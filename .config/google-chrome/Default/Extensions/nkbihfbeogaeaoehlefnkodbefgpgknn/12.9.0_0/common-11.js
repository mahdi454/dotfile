LavaPack.loadBundle([[6086,{"../ducks/locale/locale":6110,"../helpers/utils/i18n-helper":6155,"prop-types":4403,react:4651,"react-redux":4609},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LegacyI18nProvider=n.I18nProvider=n.I18nContext=void 0;var a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=(a=e("prop-types"))&&a.__esModule?a:{default:a},o=e("react-redux"),i=e("../ducks/locale/locale"),c=e("../helpers/utils/i18n-helper");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=n.I18nContext=(0,r.createContext)((e=>`[${e}]`)),p=e=>{const t=(0,o.useSelector)(i.getCurrentLocale),n=(0,o.useSelector)(i.getCurrentLocaleMessages),a=(0,o.useSelector)(i.getEnLocaleMessages),s=(0,r.useMemo)((()=>(e,...r)=>(0,c.getMessage)(t,n,e,...r)||(0,c.getMessage)(t,a,e,...r)),[t,n,a]);return r.default.createElement(d.Provider,{value:s},e.children)};n.I18nProvider=p,p.propTypes={children:s.default.node},p.defaultProps={children:undefined};class m extends r.Component{getChildContext(){return{t:this.context}}render(){return this.props.children}}n.LegacyI18nProvider=m,l(m,"propTypes",{children:s.default.node}),l(m,"defaultProps",{children:undefined}),l(m,"contextType",d),l(m,"childContextTypes",{t:s.default.func})}}},{package:"$root$",file:"ui/contexts/i18n.js"}],[609,{"./lib":620,"@ngraveio/bc-ur":2783},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryItem=void 0;const a=e("@ngraveio/bc-ur"),r=e("./lib");n.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,r.encodeDataItem)(this.toDataItem())},this.toUR=()=>new a.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,n)=>{const r=this.toUR();return new a.UREncoder(r,e,t,n)}}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[6094,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ALERT_STATE=void 0;n.ALERT_STATE={CLOSED:"CLOSED",ERROR:"ERROR",LOADING:"LOADING",OPEN:"OPEN"}}}},{package:"$root$",file:"ui/ducks/alerts/enums.js"}],[6097,{"../../../shared/constants/alerts":5121,"../../selectors":6860,"../../store/actionConstants":6874,"../../store/actions":6875,"./enums":6094,"@reduxjs/toolkit":2837,"@sentry/browser":2892},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.switchedToUnconnectedAccount=n.switchToAccount=n.getAlertState=n.dismissAndDisableAlert=n.dismissAlert=n.default=n.connectAccount=n.alertIsOpen=void 0;var a=e("@reduxjs/toolkit"),r=e("@sentry/browser"),s=e("../../../shared/constants/alerts"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("../../store/actionConstants")),i=e("../../store/actions"),c=e("../../selectors"),u=e("./enums");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const d=s.AlertTypes.unconnectedAccount,p={state:u.ALERT_STATE.CLOSED},m=(0,a.createSlice)({name:d,initialState:p,reducers:{connectAccountFailed:e=>{e.state=u.ALERT_STATE.ERROR},connectAccountRequested:e=>{e.state=u.ALERT_STATE.LOADING},connectAccountSucceeded:e=>{e.state=u.ALERT_STATE.CLOSED},disableAlertFailed:e=>{e.state=u.ALERT_STATE.ERROR},disableAlertRequested:e=>{e.state=u.ALERT_STATE.LOADING},disableAlertSucceeded:e=>{e.state=u.ALERT_STATE.CLOSED},dismissAlert:e=>{e.state=u.ALERT_STATE.CLOSED},switchAccountFailed:e=>{e.state=u.ALERT_STATE.ERROR},switchAccountRequested:e=>{e.state=u.ALERT_STATE.LOADING},switchAccountSucceeded:e=>{e.state=u.ALERT_STATE.CLOSED},switchedToUnconnectedAccount:e=>{e.state=u.ALERT_STATE.OPEN}},extraReducers:{[o.SELECTED_ADDRESS_CHANGED]:e=>{e.state===u.ALERT_STATE.OPEN&&(e.state=u.ALERT_STATE.CLOSED)}}}),{actions:T,reducer:f}=m;n.default=f;n.getAlertState=e=>e[d].state;n.alertIsOpen=e=>e[d].state!==u.ALERT_STATE.CLOSED;const{connectAccountFailed:g,connectAccountRequested:h,connectAccountSucceeded:E,disableAlertFailed:S,disableAlertRequested:y,disableAlertSucceeded:A,dismissAlert:_,switchAccountFailed:v,switchAccountRequested:I,switchAccountSucceeded:R,switchedToUnconnectedAccount:w}=T;n.switchedToUnconnectedAccount=w,n.dismissAlert=_;n.dismissAndDisableAlert=()=>async e=>{try{await e(y()),await(0,i.setAlertEnabledness)(d,!1),await e(A())}catch(t){console.error(t),(0,r.captureException)(t),await e(S())}};n.switchToAccount=e=>async(t,n)=>{const a=n();try{await t(I()),await t((0,i.setSelectedInternalAccount)(e));const n=(0,c.getInternalAccount)(a,e);await t((0,i.setSelectedAccount)(n.address)),await t(R())}catch(e){console.error(e),(0,r.captureException)(e),await t(v())}};n.connectAccount=()=>async(e,t)=>{const n=t(),{address:a}=(0,c.getSelectedInternalAccount)(n),s=(0,c.getOriginOfCurrentTab)(n);try{await e(h()),await e((0,i.addPermittedAccount)(s,a)),await e(E())}catch(t){console.error(t),(0,r.captureException)(t),await e(g())}}}}},{package:"$root$",file:"ui/ducks/alerts/unconnected-account.js"}],[6098,{"../../../shared/constants/hardware-wallets":5131,"../../store/actionConstants":6874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,a;const s={...o,...e};switch(t.type){case r.NETWORK_DROPDOWN_OPEN:return{...s,networkDropdownOpen:!0};case r.NETWORK_DROPDOWN_CLOSE:return{...s,networkDropdownOpen:!1};case r.IMPORT_NFTS_MODAL_OPEN:return{...s,importNftsModal:{open:!0,...t.payload}};case r.IMPORT_NFTS_MODAL_CLOSE:return{...s,importNftsModal:{open:!1}};case r.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN:return{...s,showBasicFunctionalityModal:!0};case r.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE:return{...s,showBasicFunctionalityModal:!1};case r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON:return{...s,externalServicesOnboardingToggleState:!0};case r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF:return{...s,externalServicesOnboardingToggleState:!1};case r.SHOW_IPFS_MODAL_OPEN:return{...s,showIpfsModalOpen:!0};case r.SHOW_IPFS_MODAL_CLOSE:return{...s,showIpfsModalOpen:!1};case r.SHOW_PERMITTED_NETWORK_TOAST_OPEN:return{...s,showPermittedNetworkToastOpen:!0};case r.SHOW_PERMITTED_NETWORK_TOAST_CLOSE:return{...s,showPermittedNetworkToastOpen:!1};case r.IMPORT_TOKENS_POPOVER_OPEN:return{...s,importTokensModalOpen:!0};case r.IMPORT_TOKENS_POPOVER_CLOSE:return{...s,importTokensModalOpen:!1};case r.DEPRECATED_NETWORK_POPOVER_OPEN:return{...s,deprecatedNetworkModalOpen:!0};case r.DEPRECATED_NETWORK_POPOVER_CLOSE:return{...s,deprecatedNetworkModalOpen:!1};case r.ALERT_OPEN:return{...s,alertOpen:!0,alertMessage:t.payload};case r.ALERT_CLOSE:return{...s,alertOpen:!1,alertMessage:null};case r.SET_ACCOUNT_DETAILS_ADDRESS:return{...s,accountDetailsAddress:t.payload};case r.QR_CODE_DETECTED:return{...s,qrCodeData:t.value};case r.SET_SMART_TRANSACTIONS_ERROR:return{...s,smartTransactionsError:t.payload};case r.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE:return{...s,smartTransactionsErrorMessageDismissed:!0};case r.MODAL_OPEN:{const{name:e,...n}=t.payload;return{...s,modal:{open:!0,modalState:{name:e,props:{...n}},previousModalState:{...s.modal.modalState}}}}case r.MODAL_CLOSE:return{...s,modal:{...s.modal,open:!1,modalState:{name:null,props:{}},previousModalState:{...s.modal.modalState}}};case r.CLEAR_ACCOUNT_DETAILS:return{...s,accountDetail:{privateKey:""}};case r.SHOW_SEND_TOKEN_PAGE:case r.LOCK_METAMASK:return{...s,warning:null};case r.GO_HOME:return{...s,accountDetail:{privateKey:""},warning:null};case r.SHOW_ACCOUNTS_PAGE:return{...s,isLoading:!1,warning:null,scrollToBottom:!1};case r.SHOW_CONF_TX_PAGE:return{...s,txId:t.id,warning:null,isLoading:!1};case r.COMPLETED_TX:return{...s,warning:null,txId:null};case r.UNLOCK_FAILED:return{...s,warning:t.value||"Incorrect password. Try again."};case r.UNLOCK_SUCCEEDED:return{...s,warning:""};case r.SET_HARDWARE_WALLET_DEFAULT_HD_PATH:{const{device:e,path:n}=t.payload,a={...s.defaultHdPaths};return a[e]=n,{...s,defaultHdPaths:a}}case r.SHOW_LOADING:return{...s,isLoading:!0,loadingMessage:t.payload};case r.HIDE_LOADING:return{...s,isLoading:!1};case r.SHOW_NFT_STILL_FETCHING_INDICATION:return{...s,isNftStillFetchingIndication:!0};case r.SHOW_NFT_DETECTION_ENABLEMENT_TOAST:return{...s,showNftDetectionEnablementToast:t.payload};case r.HIDE_NFT_STILL_FETCHING_INDICATION:return{...s,isNftStillFetchingIndication:!1};case r.DISPLAY_WARNING:return{...s,warning:t.payload,isLoading:!1};case r.HIDE_WARNING:return{...s,warning:undefined};case r.SHOW_PRIVATE_KEY:return{...s,accountDetail:{privateKey:t.payload}};case r.SET_SELECTED_NETWORK_CONFIGURATION_ID:return{...s,selectedNetworkConfigurationId:t.payload};case r.SET_NEW_NETWORK_ADDED:{const{networkConfigurationId:e,nickname:n}=t.payload;return{...s,newNetworkAddedName:n,newNetworkAddedConfigurationId:e}}case r.SET_EDIT_NETWORK:return{...s,editedNetwork:t.payload};case r.SET_NEW_TOKENS_IMPORTED:return{...s,newTokensImported:t.payload};case r.SET_NEW_TOKENS_IMPORTED_ERROR:return{...s,newTokensImportedError:t.payload};case r.SET_NEW_NFT_ADDED_MESSAGE:return{...s,newNftAddedMessage:t.payload};case r.SET_REMOVE_NFT_MESSAGE:return{...s,removeNftMessage:t.payload};case r.SET_REQUEST_ACCOUNT_TABS:return{...s,requestAccountTabs:t.value};case r.SET_OPEN_METAMASK_TAB_IDS:return{...s,openMetaMaskTabs:t.payload};case r.HIDE_WHATS_NEW_POPUP:return{...s,showWhatsNewPopup:!1};case r.CAPTURE_SINGLE_EXCEPTION:return{...s,singleExceptions:{...s.singleExceptions,[t.value]:null}};case r.TOGGLE_GAS_LOADING_ANIMATION:return{...s,gasLoadingAnimationIsShowing:t.payload};case r.SET_WEBHID_CONNECTED_STATUS:return{...s,ledgerWebHidConnectedStatus:t.payload};case r.SET_LEDGER_TRANSPORT_STATUS:return{...s,ledgerTransportStatus:t.payload};case r.TOGGLE_CURRENCY_INPUT_SWITCH:return{...s,sendInputCurrencySwitched:!s.sendInputCurrencySwitched};case r.ONBOARDED_IN_THIS_UI_SESSION:return{...s,onboardedInThisUISession:t.payload};case r.SET_CUSTOM_TOKEN_AMOUNT:return{...s,customTokenAmount:t.payload};case r.TOGGLE_NETWORK_MENU:return{...s,isAddingNewNetwork:Boolean(null===(n=t.payload)||void 0===n?void 0:n.isAddingNewNetwork),isMultiRpcOnboarding:Boolean(null===(a=t.payload)||void 0===a?void 0:a.isMultiRpcOnboarding)};case r.DELETE_METAMETRICS_DATA_MODAL_OPEN:return{...s,showDeleteMetaMetricsDataModal:!0};case r.DELETE_METAMETRICS_DATA_MODAL_CLOSE:return{...s,showDeleteMetaMetricsDataModal:!1};case r.DATA_DELETION_ERROR_MODAL_OPEN:return{...s,showDataDeletionErrorModal:!0};case r.DATA_DELETION_ERROR_MODAL_CLOSE:return{...s,showDataDeletionErrorModal:!1};case r.SHOW_SETTINGS_PAGE_ERROR:return{...s,errorInSettings:t.payload};case r.HIDE_SETTINGS_PAGE_ERROR:return{...s,errorInSettings:null};case r.SHOW_KEYRING_SNAP_REMOVAL_RESULT:return{...s,showKeyringRemovalSnapModal:!0,keyringRemovalSnapModal:{...t.payload}};case r.HIDE_KEYRING_SNAP_REMOVAL_RESULT:return{...s,showKeyringRemovalSnapModal:!1,keyringRemovalSnapModal:{snapName:"",result:"none"}};default:return s}},n.displayErrorInSettings=function(e){return{type:r.SHOW_SETTINGS_PAGE_ERROR,payload:e}},n.getGasLoadingAnimationIsShowing=function(e){return e.appState.gasLoadingAnimationIsShowing},n.getLedgerTransportStatus=function(e){return e.appState.ledgerTransportStatus},n.getLedgerWebHidConnectedStatus=function(e){return e.appState.ledgerWebHidConnectedStatus},n.getQrCodeData=function(e){return e.appState.qrCodeData},n.hideBasicFunctionalityModal=function(){return{type:r.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE}},n.hideDataDeletionErrorModal=function(){return{type:r.DATA_DELETION_ERROR_MODAL_CLOSE}},n.hideDeleteMetaMetricsDataModal=function(){return{type:r.DELETE_METAMETRICS_DATA_MODAL_CLOSE}},n.hideErrorInSettings=function(){return{type:r.HIDE_SETTINGS_PAGE_ERROR}},n.hideWhatsNewPopup=function(){return{type:r.HIDE_WHATS_NEW_POPUP}},n.onboardingToggleBasicFunctionalityOff=function(){return{type:r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF}},n.onboardingToggleBasicFunctionalityOn=function(){return{type:r.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON}},n.openBasicFunctionalityModal=function(){return{type:r.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN}},n.openDataDeletionErrorModal=function(){return{type:r.DATA_DELETION_ERROR_MODAL_OPEN}},n.openDeleteMetaMetricsDataModal=function(){return{type:r.DELETE_METAMETRICS_DATA_MODAL_OPEN}},n.setCustomTokenAmount=function(e){return{type:r.SET_CUSTOM_TOKEN_AMOUNT,payload:e}},n.setLedgerTransportStatus=function(e){return{type:r.SET_LEDGER_TRANSPORT_STATUS,payload:e}},n.setLedgerWebHidConnectedStatus=function(e){return{type:r.SET_WEBHID_CONNECTED_STATUS,payload:e}},n.setOnBoardedInThisUISession=function(e){return{type:r.ONBOARDED_IN_THIS_UI_SESSION,payload:e}},n.toggleCurrencySwitch=function(){return{type:r.TOGGLE_CURRENCY_INPUT_SWITCH}},n.toggleGasLoadingAnimation=function(e){return{type:r.TOGGLE_GAS_LOADING_ANIMATION,payload:e}};var a=e("../../../shared/constants/hardware-wallets"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("../../store/actionConstants"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const o={shouldClose:!1,menuOpen:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},alertOpen:!1,alertMessage:null,qrCodeData:null,networkDropdownOpen:!1,importNftsModal:{open:!1},showPermittedNetworkToastOpen:!1,showIpfsModalOpen:!1,showBasicFunctionalityModal:!1,externalServicesOnboardingToggleState:!0,keyringRemovalSnapModal:{snapName:"",result:"none"},showKeyringRemovalSnapModal:!1,importTokensModalOpen:!1,deprecatedNetworkModalOpen:!1,accountDetail:{privateKey:""},isLoading:!1,isNftStillFetchingIndication:!1,showNftDetectionEnablementToast:!1,loadingMessage:null,warning:null,buyView:{},defaultHdPaths:{trezor:"m/44'/60'/0'/0",ledger:"m/44'/60'/0'/0/0",lattice:"m/44'/60'/0'/0"},networksTabSelectedRpcUrl:"",requestAccountTabs:{},openMetaMaskTabs:{},currentWindowTab:{},showWhatsNewPopup:!0,showTermsOfUsePopup:!0,singleExceptions:{testKey:null},gasLoadingAnimationIsShowing:!1,smartTransactionsError:null,smartTransactionsErrorMessageDismissed:!1,ledgerWebHidConnectedStatus:a.WebHIDConnectedStatuses.unknown,ledgerTransportStatus:a.HardwareTransportStates.none,newNftAddedMessage:"",removeNftMessage:"",newNetworkAddedName:"",editedNetwork:undefined,newNetworkAddedConfigurationId:"",selectedNetworkConfigurationId:"",sendInputCurrencySwitched:!1,newTokensImported:"",newTokensImportedError:"",onboardedInThisUISession:!1,customTokenAmount:"",scrollToBottom:!0,txId:null,accountDetailsAddress:"",showDeleteMetaMetricsDataModal:!1,showDataDeletionErrorModal:!1,snapsInstallPrivacyWarningShown:!1,isAddingNewNetwork:!1,isMultiRpcOnboarding:!1,errorInSettings:null}}}},{package:"$root$",file:"ui/ducks/app/app.ts"}],[610,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryTypes=n.RegistryType=void 0;class a{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}n.RegistryType=a,n.RegistryTypes={UUID:new a("uuid",37),BYTES:new a("bytes",undefined),CRYPTO_HDKEY:new a("crypto-hdkey",303),CRYPTO_KEYPATH:new a("crypto-keypath",304),CRYPTO_COIN_INFO:new a("crypto-coin-info",305),CRYPTO_ECKEY:new a("crypto-eckey",306),CRYPTO_OUTPUT:new a("crypto-output",308),CRYPTO_PSBT:new a("crypto-psbt",310),CRYPTO_ACCOUNT:new a("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new a("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new a("qr-hardware-call",1201),KEY_DERIVATION_CALL:new a("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new a("key-derivation-schema",1302)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[6104,{"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/string-utils":5199,"../../../shared/modules/transaction.utils":5201,"../../helpers/utils/confirm-tx.util":6150,"../../selectors":6860,"../../selectors/custom-gas":6858,"../metamask/metamask":6111},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.clearConfirmTransaction=function(){return{type:T}},n.default=function(e=y,t={}){switch(t.type){case d:return{...e,txData:{...t.payload}};case p:return{...e,tokenData:{...t.payload}};case m:return{...e,tokenProps:{...t.payload}};case f:{const{fiatTransactionAmount:n,ethTransactionAmount:a,hexTransactionAmount:r}=t.payload;return{...e,fiatTransactionAmount:n||e.fiatTransactionAmount,ethTransactionAmount:a||e.ethTransactionAmount,hexTransactionAmount:r||e.hexTransactionAmount}}case g:{const{fiatTransactionFee:n,ethTransactionFee:a,hexTransactionFee:r}=t.payload;return{...e,fiatTransactionFee:n||e.fiatTransactionFee,ethTransactionFee:a||e.ethTransactionFee,hexTransactionFee:r||e.hexTransactionFee}}case h:{const{fiatTransactionTotal:n,ethTransactionTotal:a,hexTransactionTotal:r}=t.payload;return{...e,fiatTransactionTotal:n||e.fiatTransactionTotal,ethTransactionTotal:a||e.ethTransactionTotal,hexTransactionTotal:r||e.hexTransactionTotal}}case E:return{...e,nonce:t.payload};case T:return{...y,maxValueMode:e.maxValueMode};case S:return{...e,maxValueMode:{...e.maxValueMode,[t.payload.transactionId]:t.payload.enabled}};default:return e}},n.setMaxValueMode=function(e,t){return{type:S,payload:{transactionId:e,enabled:t}}},n.setTransactionToConfirm=function(e){return(t,n)=>{const s=n(),i=(0,a.unconfirmedTransactionsHashSelector)(s)[e];if(i)if(i.txParams){t(O(i));const{txParams:e}=i;if(e.data){const{to:n,data:a}=e,o=(0,u.parseStandardTokenTransactionData)(a),i=(0,r.getTokens)(s),l=null==i?void 0:i.find((({address:e})=>(0,c.isEqualCaseInsensitive)(n,e)));t(v({decimals:null==l?void 0:l.decimals,symbol:null==l?void 0:l.symbol})),t(_(o))}if(e.nonce){t(N((0,o.hexToDecimal)(e.nonce)))}}else t(A(i));else console.error(`Transaction with id ${e} not found`)}},n.updateNonce=N,n.updateTokenData=_,n.updateTokenProps=v,n.updateTransactionAmounts=I,n.updateTransactionFees=R,n.updateTransactionTotals=w,n.updateTxData=A,n.updateTxDataAndCalculate=O;var a=e("../../selectors"),r=e("../metamask/metamask"),s=e("../../helpers/utils/confirm-tx.util"),o=e("../../../shared/modules/conversion.utils"),i=e("../../selectors/custom-gas"),c=e("../../../shared/modules/string-utils"),u=e("../../../shared/modules/transaction.utils");const l=e=>`metamask/confirm-transaction/${e}`,d=l("UPDATE_TX_DATA"),p=l("UPDATE_TOKEN_DATA"),m=l("UPDATE_TOKEN_PROPS"),T=l("CLEAR_CONFIRM_TRANSACTION"),f=l("UPDATE_TRANSACTION_AMOUNTS"),g=l("UPDATE_TRANSACTION_FEES"),h=l("UPDATE_TRANSACTION_TOTALS"),E=l("UPDATE_NONCE"),S=l("SET_MAX_VALUE_MODE"),y={txData:{},tokenData:{},tokenProps:{},fiatTransactionAmount:"",fiatTransactionFee:"",fiatTransactionTotal:"",ethTransactionAmount:"",ethTransactionFee:"",ethTransactionTotal:"",hexTransactionAmount:"",hexTransactionFee:"",hexTransactionTotal:"",nonce:"",maxValueMode:{}};function A(e){return{type:d,payload:e}}function _(e){return{type:p,payload:e}}function v(e){return{type:m,payload:e}}function I(e){return{type:f,payload:e}}function R(e){return{type:g,payload:e}}function w(e){return{type:h,payload:e}}function N(e){return{type:E,payload:e}}function O(e){return(t,n)=>{const c=n(),u=(0,a.currentCurrencySelector)(c),l=(0,a.conversionRateSelector)(c),d=(0,r.getNativeCurrency)(c);t(A(e));const{txParams:{value:p="0x0",gas:m="0x0"}={}}=e;let{txParams:{gasPrice:T}={}}=e;T||(T=(0,i.getAveragePriceEstimateInHexWEI)(c)||"0x0");const f=(0,o.getValueFromWeiHex)({value:p,fromCurrency:d,toCurrency:u,conversionRate:l,numberOfDecimals:2}),g=(0,o.getValueFromWeiHex)({value:p,fromCurrency:d,toCurrency:d,conversionRate:l,numberOfDecimals:6});t(I({fiatTransactionAmount:f,ethTransactionAmount:g,hexTransactionAmount:p}));const h=(0,s.getHexGasTotal)({gasLimit:m,gasPrice:T}),E=(0,s.getTransactionFee)({value:h,fromCurrency:d,toCurrency:u,numberOfDecimals:2,conversionRate:l}),S=(0,s.getTransactionFee)({value:h,fromCurrency:d,toCurrency:d,numberOfDecimals:6,conversionRate:l});t(R({fiatTransactionFee:E,ethTransactionFee:S,hexTransactionFee:h}));t(w({fiatTransactionTotal:(0,s.addFiat)(E,f),ethTransactionTotal:(0,s.addEth)(S,g),hexTransactionTotal:(0,o.sumHexes)(p,h)}))}}}}},{package:"$root$",file:"ui/ducks/confirm-transaction/confirm-transaction.duck.js"}],[6105,{"../../shared/modules/hexstring-utils":5182,"../../shared/modules/selectors/networks":5195,"../pages/confirmations/send/send.constants":6627,"../selectors":6860,"../store/actionConstants":6874,"../store/actions":6875,"@metamask/snaps-rpc-methods":2428,"@reduxjs/toolkit":2837,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.domainInitialState=n.default=void 0,n.fetchResolutions=v,n.getDomainError=function(e){return e[T].error},n.getDomainResolutions=function(e){return e[T].resolutions},n.getDomainWarning=function(e){return e[T].warning},n.initializeDomainSlice=_,n.lookupDomainName=function(e){return async(t,n)=>{const a=e.trim();let r=n();"UNINITIALIZED"===r[T].stage&&await t(_()),await t(E(a)),r=n(),s.default.info(`Resolvers attempting to resolve name: ${a}`);const o=(0,c.getCurrentChainId)(r),i=parseInt(o,16),u=await v({domain:a,chainId:`eip155:${i}`,state:r});r=n(),a===r[T].domainName&&await t(S({resolutions:u,error:undefined,chainId:o,network:i,domainName:a}))}},n.resetDomainResolution=void 0;var a,r=e("@reduxjs/toolkit"),s=(a=e("loglevel"))&&a.__esModule?a:{default:a},o=e("@metamask/snaps-rpc-methods"),i=e("../selectors"),c=e("../../shared/modules/selectors/networks"),u=e("../store/actions"),l=e("../pages/confirmations/send/send.constants"),d=e("../store/actionConstants"),p=e("../../shared/modules/hexstring-utils");const m={stage:"UNINITIALIZED",resolutions:null,error:null,warning:null,chainId:null,domainName:null},T=(n.domainInitialState=m,"DNS"),f=(0,r.createSlice)({name:T,initialState:m,reducers:{lookupStart:(e,t)=>{e.domainName=t.payload,e.warning="loading",e.error=null},lookupEnd:(e,t)=>{e.resolutions=null,e.error=null,e.warning=null,e.domainName=null;const{resolutions:n,domainName:a}=t.payload,r=n.filter((e=>e.resolvedAddress!==p.BURN_ADDRESS&&"0x"!==e.resolvedAddress));r.length>0?e.resolutions=r:a.length>0&&(e.error=l.NO_RESOLUTION_FOR_DOMAIN)},enableDomainLookup:(e,t)=>{e.stage="INITIALIZED",e.error=null,e.resolutions=null,e.warning=null,e.chainId=t.payload},resetDomainResolution:e=>{e.resolutions=null,e.warning=null,e.error=null}},extraReducers:e=>{e.addCase(d.CHAIN_CHANGED,((e,t)=>{t.payload!==e.chainId&&(e.stage="UNINITIALIZED")}))}}),{reducer:g,actions:h}=f;n.default=g;const{lookupStart:E,lookupEnd:S,enableDomainLookup:y,resetDomainResolution:A}=h;function _(){return(e,t)=>{const n=t(),a=(0,c.getCurrentChainId)(n);e(y(a))}}async function v({domain:e,chainId:t,state:n}){const a=(0,i.getPermissionSubjects)(n),r=(0,i.getNameLookupSnapsIds)(n).filter((n=>{var r;const s=null===(r=a[n])||void 0===r?void 0:r.permissions["endowment:name-lookup"],i=(0,o.getChainIdsCaveat)(s),c=(0,o.getLookupMatchersCaveat)(s);if(i&&!i.includes(t))return!1;if(c){const{tlds:t,schemes:n}=c;return(null==t?void 0:t.some((t=>e.endsWith(`.${t}`))))||(null==n?void 0:n.some((t=>e.startsWith(`${t}:`))))}return!0}));if(0===e.length)return[];return(await Promise.allSettled(r.map((n=>(0,u.handleSnapRequest)({snapId:n,origin:"",handler:"onNameLookup",request:{jsonrpc:"2.0",method:" ",params:{domain:e,chainId:t}}}))))).reduce(((e,t,a)=>{if("rejected"!==t.status&&null!==t.value){const s=t.value.resolvedAddresses.map((e=>{var t,s;return{...e,resolvingSnap:null===(t=(0,i.getSnapMetadata)(n,r[a]))||void 0===t?void 0:t.name,addressBookEntryName:null===(s=(0,i.getAddressBookEntry)(n,e.resolvedAddress))||void 0===s?void 0:s.name}}));return e.concat(s)}return e}),[])}n.resetDomainResolution=A}}},{package:"$root$",file:"ui/ducks/domains.js"}],[6106,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SET_CUSTOM_GAS_PRICE=n.SET_CUSTOM_GAS_LIMIT=n.RESET_CUSTOM_DATA=void 0;n.RESET_CUSTOM_DATA="metamask/gas/RESET_CUSTOM_DATA",n.SET_CUSTOM_GAS_LIMIT="metamask/gas/SET_CUSTOM_GAS_LIMIT",n.SET_CUSTOM_GAS_PRICE="metamask/gas/SET_CUSTOM_GAS_PRICE"}}},{package:"$root$",file:"ui/ducks/gas/gas-action-constants.ts"}],[6107,{"./gas-action-constants":6106,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=s,t){switch(t.type){case r.SET_CUSTOM_GAS_PRICE:return{...e,customData:{...e.customData,price:t.value}};case r.SET_CUSTOM_GAS_LIMIT:return{...e,customData:{...e.customData,limit:t.value}};case r.RESET_CUSTOM_DATA:return{...e,customData:(0,a.cloneDeep)(s.customData)};default:return e}},n.setCustomGasLimit=function(e){return{type:r.SET_CUSTOM_GAS_LIMIT,value:e}},n.setCustomGasPrice=function(e){return{type:r.SET_CUSTOM_GAS_PRICE,value:e}};var a=e("lodash"),r=e("./gas-action-constants");const s={customData:{price:null,limit:null}}}}},{package:"$root$",file:"ui/ducks/gas/gas.duck.js"}],[611,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScriptExpressions=n.ScriptExpression=void 0;class a{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}n.ScriptExpression=a,a.fromTag=e=>Object.values(n.ScriptExpressions).find((t=>t.getTag()===e)),n.ScriptExpressions={SCRIPT_HASH:new a(400,"sh"),WITNESS_SCRIPT_HASH:new a(401,"wsh"),PUBLIC_KEY:new a(402,"pk"),PUBLIC_KEY_HASH:new a(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new a(404,"wpkh"),COMBO:new a(405,"combo"),MULTISIG:new a(406,"multi"),SORTED_MULTISIG:new a(407,"sortedmulti"),ADDRESS:new a(307,"addr"),RAW_SCRIPT:new a(408,"raw")}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[6110,{"../../../shared/modules/i18n":5183,"../../store/actionConstants":6874,reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=i,t){if(t.type===r.SET_CURRENT_LOCALE)return{...e,current:t.payload.messages,currentLocale:t.payload.locale};return e},n.getIntlLocale=n.getEnLocaleMessages=n.getCurrentLocaleMessages=n.getCurrentLocale=void 0;var a=e("reselect"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var i=r?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(a,s,i):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("../../store/actionConstants")),s=e("../../../shared/modules/i18n");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const i={};const c=e=>e.localeMessages.currentLocale;n.getCurrentLocale=c;n.getIntlLocale=(0,a.createSelector)(c,(e=>Intl.getCanonicalLocales(e?e.replace(/_/gu,"-"):s.FALLBACK_LOCALE)[0]));n.getCurrentLocaleMessages=e=>e.localeMessages.current;n.getEnLocaleMessages=e=>e.localeMessages.en}}},{package:"$root$",file:"ui/ducks/locale/locale.ts"}],[6111,{"../../../shared/constants/alerts":5121,"../../../shared/constants/gas":5130,"../../../shared/constants/keyring":5132,"../../../shared/constants/preferences":5144,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/hexstring-utils":5182,"../../../shared/modules/selectors/networks":5195,"../../../shared/modules/string-utils":5199,"../../selectors/accounts":6854,"../../selectors/selectors":6868,"../../store/actionConstants":6874,"../../store/actions":6875,"../gas/gas.duck":6107,"@metamask/transaction-controller":2647,"ethereumjs-util":3753,reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=y,t){const n={...y,...e};switch(t.type){case g.UPDATE_METAMASK_STATE:return{...n,...t.value};case g.LOCK_METAMASK:return{...n,isUnlocked:!1};case g.SET_ACCOUNT_LABEL:{const{account:e}=t.value,a=t.value.label,r=Object.values(n.internalAccounts.accounts).find((t=>t.address.toLowerCase()===e.toLowerCase())),s={...n.internalAccounts,accounts:{...n.internalAccounts.accounts,[r.id]:{...r,metadata:{...r.metadata,name:a}}}};return Object.assign(n,{internalAccounts:s})}case g.UPDATE_CUSTOM_NONCE:return{...n,customNonceValue:t.value};case g.TOGGLE_ACCOUNT_MENU:return{...n,isAccountMenuOpen:!n.isAccountMenuOpen};case g.TOGGLE_NETWORK_MENU:return{...n,isNetworkMenuOpen:!n.isNetworkMenuOpen};case g.UPDATE_TRANSACTION_PARAMS:{const{id:e,value:a}=t;let{transactions:r}=n;return r=r.map((t=>{if(t.id===e){const e={...t};return e.txParams=a,e}return t})),{...n,transactions:r}}case g.SET_PARTICIPATE_IN_METAMETRICS:return{...n,participateInMetaMetrics:t.value};case g.SET_DATA_COLLECTION_FOR_MARKETING:return{...n,dataCollectionForMarketing:t.value};case g.CLOSE_WELCOME_SCREEN:return{...n,welcomeScreenSeen:!0};case g.SET_PENDING_TOKENS:return{...n,pendingTokens:{...t.payload}};case g.CLEAR_PENDING_TOKENS:return{...n,pendingTokens:{}};case g.COMPLETE_ONBOARDING:return{...n,completedOnboarding:!0};case g.RESET_ONBOARDING:return{...n,completedOnboarding:!1,firstTimeFlowType:null,isInitialized:!1,isUnlocked:!1,onboardingTabs:{},seedPhraseBackedUp:null,welcomeScreenSeen:!1};case g.SET_FIRST_TIME_FLOW_TYPE:return{...n,firstTimeFlowType:t.value};case g.SET_NEXT_NONCE:return{...n,nextNonce:t.payload};case g.SET_CONFIRMATION_EXCHANGE_RATES:return{...n,confirmationExchangeRates:t.value};default:return n}},n.doesUserHaveALedgerAccount=function(e){return e.metamask.keyrings.some((e=>e.type===c.KeyringType.ledger))},n.findKeyringForAddress=k,n.getAlertEnabledness=void 0,n.getBlockGasLimit=function(e){return e.metamask.currentBlockGasLimit},n.getCompletedOnboarding=function(e){return e.metamask.completedOnboarding},n.getConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,T.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate},n.getCurrencyRates=function(e){return e.metamask.currencyRates},n.getEstimatedGasFeeTimeBounds=function(e){return e.metamask.estimatedGasFeeTimeBounds},n.getEstimatedGasFeeTimeBoundsByChainId=function(e,t){var n;return null===(n=e.metamask.gasFeeEstimatesByChainId)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.estimatedGasFeeTimeBounds},n.getGasFeeEstimatesByChainId=n.getGasFeeEstimates=n.getGasEstimateTypeByChainId=n.getGasEstimateType=void 0,n.getIsGasEstimatesLoading=function(e){const t=(0,m.checkNetworkAndAccountSupports1559)(e),n=N(e),a=n===i.GasEstimateTypes.feeMarket||n===i.GasEstimateTypes.ethGasPrice;return n===i.GasEstimateTypes.none||t&&!a||!t&&n===i.GasEstimateTypes.feeMarket},n.getIsGasEstimatesLoadingByChainId=function(e,{chainId:t,networkClientId:n}){const a=(0,m.checkNetworkAndAccountSupports1559)(e,n),r=O(e,t),s=r===i.GasEstimateTypes.feeMarket||r===i.GasEstimateTypes.ethGasPrice;return r===i.GasEstimateTypes.none||a&&!s||!a&&r===i.GasEstimateTypes.feeMarket},n.getIsInitialized=function(e){return e.metamask.isInitialized},n.getIsNetworkBusyByChainId=function(e,t){const n=C(e,t);return(null==n?void 0:n.networkCongestion)>=i.NetworkCongestionThresholds.busy},n.getIsUnlocked=function(e){return e.metamask.isUnlocked},n.getLedgerTransportType=function(e){return e.metamask.ledgerTransportType},n.getNFTsByChainId=void 0,n.getNativeCurrency=function(e){return(0,T.getProviderConfig)(e).ticker},n.getNfts=n.getNftContracts=void 0,n.getNftsDropdownState=function(e){return e.metamask.nftsDropdownState},n.getPendingTokens=void 0,n.getSeedPhraseBackedUp=function(e){return e.metamask.seedPhraseBackedUp},n.getSendHexDataFeatureFlagState=function(e){return e.metamask.featureFlags.sendHexData},n.getSendToAccounts=function(e){const t=(0,m.accountsWithSendEtherInfoSelector)(e),n=(0,m.getAddressBook)(e);return[...t,...n]},n.getTokenBalances=function(e){return e.metamask.tokenBalances},n.getWeb3ShimUsageAlertEnabledness=n.getUnconnectedAccountAlertShown=n.getUnconnectedAccountAlertEnabledness=n.getTokens=void 0,n.isAddressLedger=function(e,t){const n=k(e,t);return(null==n?void 0:n.type)===c.KeyringType.ledger},n.isEIP1559Network=function(e,t){var n;const a=(0,T.getSelectedNetworkClientId)(e);return!0===(null===(n=e.metamask.networksMetadata)||void 0===n?void 0:n[t??a].EIPS[1559])},n.isNotEIP1559Network=function(e){const t=(0,T.getSelectedNetworkClientId)(e);return!1===e.metamask.networksMetadata[t].EIPS[1559]},n.updateGasFees=function({gasPrice:e,gasLimit:t,maxPriorityFeePerGas:n,maxFeePerGas:r,transaction:s,expectHexWei:o=!1}){return async i=>{const c={...s.txParams,gas:t};e?(i((0,E.setCustomGasPrice)(A(c.gasPrice,o))),c.gasPrice=A(e,o)):r&&n&&(c.maxFeePerGas=A(r,o),c.maxPriorityFeePerGas=(0,a.addHexPrefix)((0,l.decGWEIToHexWEI)(n)));const u={...s,txParams:c},d=(0,a.isHexString)((0,a.addHexPrefix)(t))?(0,a.addHexPrefix)(t):(0,a.addHexPrefix)(t.toString(16));i((0,E.setCustomGasLimit)(d)),await i((0,h.updateTransactionGasFees)(u.id,u))}};var a=e("ethereumjs-util"),r=e("reselect"),s=e("@metamask/transaction-controller"),o=e("../../../shared/constants/alerts"),i=e("../../../shared/constants/gas"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/preferences"),l=e("../../../shared/modules/conversion.utils"),d=e("../../../shared/modules/hexstring-utils"),p=e("../../../shared/modules/string-utils"),m=e("../../selectors/selectors"),T=e("../../../shared/modules/selectors/networks"),f=e("../../selectors/accounts"),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("../../store/actionConstants")),h=e("../../store/actions"),E=e("../gas/gas.duck");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}const y={isInitialized:!1,isUnlocked:!1,isAccountMenuOpen:!1,isNetworkMenuOpen:!1,internalAccounts:{accounts:{},selectedAccount:""},transactions:[],networkConfigurations:{},addressBook:[],confirmationExchangeRates:{},pendingTokens:{},customNonceValue:"",useBlockie:!1,featureFlags:{},welcomeScreenSeen:!1,currentLocale:"",currentBlockGasLimit:"",currentBlockGasLimitByChainId:{},preferences:{autoLockTimeLimit:u.DEFAULT_AUTO_LOCK_TIME_LIMIT,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:!0,petnamesEnabled:!0,featureNotificationsEnabled:!1,privacyMode:!1,showMultiRpcModal:!1},firstTimeFlowType:null,completedOnboarding:!1,knownMethodData:{},use4ByteResolution:!0,participateInMetaMetrics:null,dataCollectionForMarketing:null,nextNonce:null,currencyRates:{ETH:{conversionRate:null}}};const A=(e,t)=>(0,a.addHexPrefix)(t?e:(0,l.decGWEIToHexWEI)(e));const _=e=>e.metamask.alertEnabledness;n.getAlertEnabledness=_;n.getUnconnectedAccountAlertEnabledness=e=>_(e)[o.AlertTypes.unconnectedAccount];n.getWeb3ShimUsageAlertEnabledness=e=>_(e)[o.AlertTypes.web3ShimUsage];n.getUnconnectedAccountAlertShown=e=>e.metamask.unconnectedAccountAlertShownOrigins;n.getPendingTokens=e=>e.metamask.pendingTokens;n.getTokens=e=>e.metamask.tokens;n.getNfts=e=>{var t;const{metamask:{allNfts:n}}=e,{address:a}=(0,f.getSelectedInternalAccount)(e),{chainId:r}=(0,T.getProviderConfig)(e);return(null==n||null===(t=n[a])||void 0===t?void 0:t[r])??[]};n.getNFTsByChainId=(e,t)=>{var n;const{metamask:{allNfts:a}}=e,{address:r}=(0,f.getSelectedInternalAccount)(e);return(null==a||null===(n=a[r])||void 0===n?void 0:n[t])??[]};function v(e){var t;const n=null===(t=e.confirmTransaction)||void 0===t?void 0:t.txData;return null==n?void 0:n.gasFeeEstimates}function I(e,t){var n;const a=null===(n=e.confirmTransaction)||void 0===n?void 0:n.txData;return(null==a?void 0:a.chainId)!==t?undefined:null==a?void 0:a.gasFeeEstimates}n.getNftContracts=e=>{var t;const{metamask:{allNftContracts:n}}=e,{address:a}=(0,f.getSelectedInternalAccount)(e),{chainId:r}=(0,T.getProviderConfig)(e);return(null==n||null===(t=n[a])||void 0===t?void 0:t[r])??[]};const R=(0,r.createSelector)(v,(e=>null==e?void 0:e.type)),w=(0,r.createSelector)(I,(e=>null==e?void 0:e.type)),N=n.getGasEstimateType=(0,r.createSelector)((function(e){return e.metamask.gasEstimateType}),R,((e,t)=>t??e)),O=n.getGasEstimateTypeByChainId=(0,r.createSelector)((function(e,t){var n;return null===(n=e.metamask.gasFeeEstimatesByChainId)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.gasEstimateType}),w,((e,t)=>t??e));const C=n.getGasFeeEstimatesByChainId=(0,r.createSelector)((function(e,t){var n;return null===(n=e.metamask.gasFeeEstimatesByChainId)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.gasFeeEstimates}),I,((e,t)=>t?(0,s.mergeGasFeeEstimates)({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}):e));n.getGasFeeEstimates=(0,r.createSelector)((function(e){return e.metamask.gasFeeEstimates}),v,((e,t)=>t?(0,s.mergeGasFeeEstimates)({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}):e));function k(e,t){return e.metamask.keyrings.find((e=>e.accounts.some((e=>(0,p.isEqualCaseInsensitive)(e,(0,a.addHexPrefix)(t))||(0,p.isEqualCaseInsensitive)(e,(0,d.stripHexPrefix)(t))))))}}}},{package:"$root$",file:"ui/ducks/metamask/metamask.js"}],[6115,{"../../../shared/constants/common":5125,"../../../shared/constants/gas":5130,"../../../shared/constants/network":5139,"../../../shared/constants/swaps":5149,"../../../shared/constants/transaction":5153,"../../../shared/lib/transactions-controller-utils":5167,"../../../shared/modules/Numeric":5169,"../../../shared/modules/contract-utils":5175,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/error":5178,"../../../shared/modules/selectors/networks":5195,"../../../shared/modules/string-utils":5199,"../../helpers/utils/util":6172,"../../pages/confirmations/send/send.utils":6628,"../../selectors":6860,"../../store/actions":6875,"../metamask/metamask":6111,"../swaps/swaps":6119,"@metamask/transaction-controller":2647,"bignumber.js":3486,"ethereumjs-util":3753,"human-standard-token-abi":4062},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBestQuote=n.addAdjustedReturnToQuotes=void 0,n.estimateGasLimitForSend=async function({selectedAddress:e,value:t,gasPrice:n,sendToken:r,to:o,data:u,isNonStandardEthChain:d,chainId:T,gasLimit:f,...E}){let S=!1,y=c.MIN_GAS_LIMIT_HEX;E.blockGasLimit?y=E.blockGasLimit:r&&(y=c.GAS_LIMITS.BASE_TOKEN_ESTIMATE);const A={from:e,value:t,gasPrice:n};if(r){if(!o)return c.GAS_LIMITS.BASE_TOKEN_ESTIMATE;A.value="0x0",A.data=(0,m.getAssetTransferData)({sendToken:r,fromAddress:e,toAddress:o,amount:t}),A.to=r.address}else{if(!u){const{isContractAddress:e}=o?await(0,p.readAddressAsContract)(global.eth,o):{};if(!e&&!d)return c.GAS_LIMITS.SIMPLE;!e&&d&&(S=!0)}A.data=u,o&&(A.to=o),t&&"0"!==t||(A.value="0xff")}S||(A.gas=new h.Numeric(y,16).times(new h.Numeric(.95,10)).round(0,s.default.ROUND_DOWN).toPrefixedHexString());let _=1.5;S?_=1:l.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[T]&&(_=l.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[T]);try{const e=await(0,g.estimateGas)(A),t=(0,m.addGasBuffer)(e,y,_);return(0,a.addHexPrefix)(t)}catch(e){const t=(0,i.getErrorMessage)(e);if(t.includes("Transaction execution error.")||t.includes("gas required exceeds allowance or always failing transaction")||l.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[T]&&t.includes("gas required exceeds allowance")){const e=(0,m.addGasBuffer)((null==A?void 0:A.gas)??f,y,_);return(0,a.addHexPrefix)(e)}throw e}},n.generateTransactionParams=function(e){var t,n,a,r;const s=e.draftTransactions[e.currentTransactionUUID],i={from:(null===(t=s.fromAccount)||void 0===t?void 0:t.address)||e.selectedAccount.address,gas:s.gas.gasLimit};switch(s.sendAsset.type){case d.AssetType.token:i.to=s.sendAsset.details.address,i.value="0x0",i.data=(0,m.generateERC20TransferData)({toAddress:s.recipient.address,amount:s.amount.value,sendToken:s.sendAsset.details});break;case d.AssetType.NFT:i.to=s.sendAsset.details.address,i.value="0x0",i.data=(null===(n=s.sendAsset.details)||void 0===n?void 0:n.standard)===d.TokenStandard.ERC721?(0,m.generateERC721TransferData)({toAddress:s.recipient.address,fromAddress:(null===(a=s.fromAccount)||void 0===a?void 0:a.address)??e.selectedAccount.address,tokenId:s.sendAsset.details.tokenId}):(0,m.generateERC1155TransferData)({toAddress:s.recipient.address,fromAddress:(null===(r=s.fromAccount)||void 0===r?void 0:r.address)??e.selectedAccount.address,tokenId:s.sendAsset.details.tokenId,amount:s.amount.value});break;case d.AssetType.native:default:i.to=s.recipient.address,i.value=s.amount.value,i.data=s.userInputHexData||"0x"}e.eip1559support?(i.type=o.TransactionEnvelopeType.feeMarket,i.maxFeePerGas=s.gas.maxFeePerGas,i.maxPriorityFeePerGas=s.gas.maxPriorityFeePerGas,i.maxFeePerGas&&"0x0"!==i.maxFeePerGas||(i.maxFeePerGas=s.gas.gasPrice),i.maxPriorityFeePerGas&&"0x0"!==i.maxPriorityFeePerGas||(i.maxPriorityFeePerGas=i.maxFeePerGas)):(i.gasPrice=s.gas.gasPrice,i.type=o.TransactionEnvelopeType.legacy);return i},n.getERC20Balance=async function(e,t){const n=global.eth.contract(r.default).at(e.address),s=await n.balanceOf(t)??null;if(!s)return"0x0";const o=(0,u.calcTokenAmount)(s.balance.toString(),e.decimals).toString(16);return(0,a.addHexPrefix)(o)},n.getIsDraftSwapAndSend=function(e){var t,n;return!(0,I.isEqualCaseInsensitive)((null==e||null===(t=e.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||"",(null==e||null===(n=e.receiveAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address)||"")},n.getRoundedGasPrice=function(e){const t=new h.Numeric(e,10).round(9).toString(),n=Number(t);return(0,f.getGasPriceInHexWei)(n)};var a=e("ethereumjs-util"),r=R(e("human-standard-token-abi")),s=R(e("bignumber.js")),o=e("@metamask/transaction-controller"),i=e("../../../shared/modules/error"),c=e("../../../shared/constants/gas"),u=e("../../../shared/lib/transactions-controller-utils"),l=e("../../../shared/constants/network"),d=e("../../../shared/constants/transaction"),p=e("../../../shared/modules/contract-utils"),m=e("../../pages/confirmations/send/send.utils"),T=e("../../../shared/modules/selectors/networks"),f=e("../../selectors"),g=e("../../store/actions"),h=e("../../../shared/modules/Numeric"),E=e("../metamask/metamask"),S=e("../swaps/swaps"),y=e("../../helpers/utils/util"),A=e("../../../shared/modules/conversion.utils"),_=e("../../../shared/constants/common"),v=e("../../../shared/constants/swaps"),I=e("../../../shared/modules/string-utils");function R(e){return e&&e.__esModule?e:{default:e}}n.addAdjustedReturnToQuotes=async(e,t,n)=>{if(null==e||!e.length)return e;try{const r=(0,T.getCurrentChainId)(t),{medium:s,gasPrice:o}=(0,E.getGasFeeEstimates)(t),i=(0,f.checkNetworkAndAccountSupports1559)(t),c=o??(null==s?void 0:s.suggestedMaxFeePerGas),l=(0,S.getUsedSwapsGasPrice)(t),d=i?c:l,p=(0,f.getTokenExchangeRates)(t),m=(0,f.getConfirmationExchangeRates)(t),g={...p,...m},I=(0,E.getNativeCurrency)(t),R=null!=n&&n.address?(0,a.toChecksumAddress)(n.address):undefined;let w=R?g[R]:1;return!w&&R&&(w=(await(0,y.fetchTokenExchangeRates)(I,[R],r))[R]),w?e.map((e=>{var t;const a=((null==e?void 0:e.gasParams.maxGas)||0)+Number((0,A.hexToDecimal)((null==e||null===(t=e.approvalNeeded)||void 0===t?void 0:t.gas)||"0x0")),s=new h.Numeric(d,10,_.EtherDenomination.GWEI).times(a,10).toDenomination(_.EtherDenomination.ETH),o=(e.destinationAmount?new h.Numeric((0,u.calcTokenAmount)(e.destinationAmount,(null==n?void 0:n.decimals)||v.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r].decimals),10).times(w,10):undefined).minus(s).toNumber();return{...e,adjustAmountReceivedInNative:o}})):e}catch(e){console.warn(`Could not calculate adjusted return for quote selection: ${e}`)}return e};n.calculateBestQuote=e=>e.reduce(((e,t)=>((null==t?void 0:t.adjustAmountReceivedInNative)||Number((null==t?void 0:t.destinationAmount)||0))>((null==e?void 0:e.adjustAmountReceivedInNative)||Number((null==e?void 0:e.destinationAmount)||0))?t:e),null==e?void 0:e[0])}}},{package:"$root$",file:"ui/ducks/send/helpers.js"}],[6116,{"./send":6117},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./send");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}))}}},{package:"$root$",file:"ui/ducks/send/index.js"}],[6117,{"../../../shared/constants/common":5125,"../../../shared/constants/gas":5130,"../../../shared/constants/swaps":5149,"../../../shared/constants/time":5151,"../../../shared/constants/transaction":5153,"../../../shared/lib/metamask-controller-utils":5160,"../../../shared/lib/transactions-controller-utils":5167,"../../../shared/modules/Numeric":5169,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/error":5178,"../../../shared/modules/hexstring-utils":5182,"../../../shared/modules/selectors/networks":5195,"../../../shared/modules/string-utils":5199,"../../../shared/modules/transaction.utils":5201,"../../helpers/constants/error-keys":6124,"../../helpers/constants/routes":6129,"../../helpers/utils/token-util":6169,"../../helpers/utils/transactions.util":6170,"../../helpers/utils/util":6172,"../../pages/confirmations/send/send.constants":6627,"../../pages/confirmations/send/send.utils":6628,"../../pages/swaps/swaps.util":6845,"../../selectors":6860,"../../store/actionConstants":6874,"../../store/actions":6875,"../confirm-transaction/confirm-transaction.duck":6104,"../domains":6105,"../gas/gas.duck":6107,"../metamask/metamask":6111,"./helpers":6115,"./swap-and-send-utils":6118,"@metamask/rpc-errors":2262,"@metamask/transaction-controller":2647,"@reduxjs/toolkit":2837,"bignumber.js":3486,"ethereumjs-util":3753,lodash:4256,uuid:5050},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.draftTransactionInitialState=n.default=n.computeEstimatedGasLimit=n.addHistoryEntry=n.acknowledgeRecipientWarning=n.SEND_STATUSES=n.SEND_STAGES=n.RECIPIENT_SEARCH_MODES=n.GAS_INPUT_MODES=n.AMOUNT_MODES=void 0,n.editExistingTransaction=function(e,t){return async(n,a)=>{await n(ae.clearPreviousDrafts());const r=a(),s=(0,h.getUnapprovedTransactions)(r)[t],i=(0,h.getTargetAccount)(r,s.txParams.from);if(Boolean(r[z].prevSwapAndSendInput)){const{amountMode:e,amount:{value:a},...s}=r[z].prevSwapAndSendInput;n(ae.addNewDraft({...Y,...s,id:t,fromAccount:i,history:[`sendFlow - user clicked edit on transaction with id ${t} (swap and send)`]})),e===q.MAX?(n(ae.updateAmountMode(q.MAX)),n(ae.updateAmountToMax()),n(fe())):n(Ee(a))}else if(e===N.AssetType.native)await n(ae.addNewDraft({...Y,id:t,fromAccount:i,gas:{...Y.gas,gasLimit:s.txParams.gas,gasPrice:s.txParams.gasPrice},userInputHexData:s.txParams.data,recipient:{...Y.recipient,address:s.txParams.to,nickname:(0,h.getAddressBookEntryOrAccountName)(r,s.txParams.to)??""},amount:{...Y.amount,value:s.txParams.value},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await n(Se({type:N.AssetType.native},{initialAssetSet:!0}));else{const a=(0,P.parseStandardTokenTransactionData)(s.txParams.data),c=e===N.AssetType.token?(0,D.getTokenValueParam)(a):"1",u=(0,A.getTokenAddressParam)(a),l=(0,h.getAddressBookEntryOrAccountName)(r,u)??"",d=(0,o.addHexPrefix)((0,p.decimalToHex)(c));await n(ae.addNewDraft({...Y,id:t,fromAccount:i,gas:{...Y.gas,gasLimit:s.txParams.gas,gasPrice:s.txParams.gasPrice},userInputHexData:s.txParams.data,recipient:{...Y.recipient,address:u,nickname:l},amount:{...Y.amount,value:d},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await n(Se({type:e,details:{address:s.txParams.to,...e===N.AssetType.NFT?{tokenId:(0,A.getTokenIdParam)(a)??(0,D.getTokenValueParam)(a)}:{}}},{initialAssetSet:!0}))}await n(J())}},n.gasFeeIsInError=function(e){var t;return Boolean(null===(t=Ae(e).gas)||void 0===t?void 0:t.error)},n.getAssetError=function(e){return Ie(e).error},n.getBestQuote=void 0,n.getCurrentDraftTransaction=Ae,n.getCurrentTransactionUUID=ye,n.getDraftTransactionExists=function(e){const t=Ae(e);if(0===Object.keys(t).length)return!1;return!0},n.getDraftTransactionID=function(e){return Ae(e).id},n.getGasInputMode=function(e){const t=(0,h.getIsMainnet)(e),n=(0,v.getGasEstimateType)(e),a=(0,h.getAdvancedInlineGasShown)(e);if(e[z].gasIsSetInModal)return V.CUSTOM;if(!t||a)return V.INLINE;if(t&&n===m.GasEstimateTypes.ethGasPrice)return V.INLINE;return V.BASIC},n.getGasLimit=function(e){var t;return null===(t=Ae(e).gas)||void 0===t?void 0:t.gasLimit},n.getGasPrice=function(e){var t;return null===(t=Ae(e).gas)||void 0===t?void 0:t.gasPrice},n.getGasTotal=function(e){var t;return null===(t=Ae(e).gas)||void 0===t?void 0:t.gasTotal},n.getIsAssetSendable=function(e){var t,n;if((null===(t=Ie(e))||void 0===t?void 0:t.type)===N.AssetType.native)return!0;return!1===(null===(n=Ie(e))||void 0===n||null===(n=n.details)||void 0===n?void 0:n.isERC721)},n.getIsBalanceInsufficient=function(e){var t;return(null===(t=Ae(e).gas)||void 0===t?void 0:t.error)===T.INSUFFICIENT_FUNDS_ERROR},n.getIsSwapAndSendDisabledForNetwork=n.getIsNativeSendPossible=void 0,n.getIsUsingMyAccountForRecipientSearch=function(e){return e[z].recipientMode===Q.MY_ACCOUNTS},n.getMinimumGasLimitForSend=function(e){return e[z].gasLimitMinimum},n.getRecipient=we,n.getRecipientUserInput=function(e){return e[z].recipientInput},n.getRecipientWarningAcknowledgement=function(e){var t;return(null===(t=Ae(e).recipient)||void 0===t?void 0:t.recipientWarningAcknowledged)??!1},n.getSendAmount=function(e){var t;return null===(t=Ae(e).amount)||void 0===t?void 0:t.value},n.getSendAnalyticProperties=void 0,n.getSendAsset=Ie,n.getSendAssetAddress=function(e){var t;return null===(t=Ie(e))||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address},n.getSendErrors=function(e){var t,n;return{gasFee:null===(t=Ae(e).gas)||void 0===t?void 0:t.error,amount:null===(n=Ae(e).amount)||void 0===n?void 0:n.error}},n.getSendHexData=function(e){return Ae(e).userInputHexData},n.getSendLayer1GasFee=ve,n.getSendMaxModeState=function(e){return e[z].amountMode===q.MAX},n.getSendStage=function(e){return e[z].stage},n.getSendTo=function(e){var t;return null===(t=we(e))||void 0===t?void 0:t.address},n.getSender=Re,n.getSwapsBlockedTokens=function(e){return e[z].swapsBlockedTokens},n.hasSendLayer1GasFee=function(e){return null!==e[z].gasTotalForLayer1},n.initializeSendState=n.initialState=void 0,n.isSendFormInvalid=function(e){const t=Ae(e);if(!t)return!0;return t.status===K.INVALID},n.isSendStateInitialized=function(e){return e[z].stage!==$.INACTIVE},n.resetRecipientInput=function(){return async(e,t)=>{const n=t(),a=(0,g.getCurrentChainId)(n);(0,E.showLoadingIndication)(),e(le("sendFlow - user cleared recipient input")),e((0,I.resetDomainResolution)()),e(he("")),await e(ge({address:"",nickname:""})),e(ce({chainId:a})),(0,E.hideLoadingIndication)()}},n.resetSendState=function(){return async(e,t)=>{const n=t();e(ae.resetSendState()),n[z].gasEstimatePollToken&&(await(0,E.gasFeeStopPollingByPollingToken)(n[z].gasEstimatePollToken),(0,E.removePollingTokenFromAppState)(n[z].gasEstimatePollToken))}},n.sendAmountIsInError=function(e){var t;return Boolean(null===(t=Ae(e).amount)||void 0===t?void 0:t.error)},n.signTransaction=function(e){return async(t,n)=>{const a=n(),{stage:r,eip1559support:s,amountMode:o}=a[z],c=a[z].draftTransactions[a[z].currentTransactionUUID];let d;const p=(0,H.getIsDraftSwapAndSend)(c),m=c.quotes,f=m?(0,H.calculateBestQuote)(m):undefined;d=p?{...f.trade}:(0,H.generateTransactionParams)(a[z]);const{amount:S,sendAsset:y,receiveAsset:A,recipient:_}=c,I={amount:{...S},sendAsset:{...y},receiveAsset:{...A},recipient:{..._},amountMode:a[z].amountMode};if(await t(ae.setPrevSwapAndSend(I)),r!==$.EDIT||p){let n,s=c.recipient.type===T.RECIPIENT_TYPES.SMART_CONTRACT?l.TransactionType.contractInteraction:l.TransactionType.simpleSend;if(c.sendAsset.type!==N.AssetType.native&&(s=c.sendAsset.type===N.AssetType.NFT?c.sendAsset.details.standard===N.TokenStandard.ERC721?l.TransactionType.tokenMethodTransferFrom:l.TransactionType.tokenMethodSafeTransferFrom:l.TransactionType.tokenMethodTransfer),await t(le("sendFlow - user clicked next and transaction should be added to controller")),p){var R,w,O,C,k,P;if(r===$.EDIT){const e=(0,h.getUnapprovedTransactions)(a)[c.id];e&&await t((0,E.rejectPendingApproval)(e.id,u.providerErrors.userRejectedRequest().serialize()))}const s=(0,g.getCurrentChainId)(a),o=x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].decimals,i=(null===(R=c.sendAsset.details)||void 0===R?void 0:R.symbol)||(0,v.getNativeCurrency)(a),p=(null===(w=c.receiveAsset.details)||void 0===w?void 0:w.symbol)||(0,v.getNativeCurrency)(a),m=(null===(O=c.receiveAsset.details)||void 0===O?void 0:O.decimals)||o,T=(null===(C=c.receiveAsset.details)||void 0===C?void 0:C.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].address,y=(null===(k=c.sendAsset.details)||void 0===k?void 0:k.decimals)||o,A=new M.Numeric((null==S?void 0:S.value)||"0x0",16).toBase(10).shiftedBy(y).toString(),_=c.recipient.address,I=(null===(P=c.sendAsset.details)||void 0===P?void 0:P.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].address,N=null==f?void 0:f.sourceAmount,D=null==f?void 0:f.destinationAmount,b={swapAndSendRecipient:_,type:l.TransactionType.swapAndSend,sourceTokenSymbol:i,destinationTokenSymbol:p,destinationTokenDecimals:m,destinationTokenAddress:T,swapTokenValue:A,approvalTxId:undefined,destinationTokenAmount:D,sourceTokenAddress:I,sourceTokenAmount:N,sourceTokenDecimals:y};if(null!=f&&f.approvalNeeded){const{id:e}=await(0,E.addTransactionAndWaitForPublish)({...f.approvalNeeded,amount:"0x0"},{requireApproval:!1,type:l.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:l.TransactionType.swapApproval,sourceTokenSymbol:i}}});b.approvalTxId=e}const{id:F}=await(0,E.addTransactionAndWaitForPublish)(d,{requireApproval:!1,sendFlowHistory:c.history,type:l.TransactionType.swapAndSend,swaps:{hasApproveTx:Boolean(null==f?void 0:f.approvalNeeded),meta:b}});n=F,await t((0,E.setDefaultHomeActiveTabName)("activity")),e.push(U.DEFAULT_ROUTE)}else{const{id:a}=await t((0,E.addTransactionAndRouteToConfirmationPage)(d,{sendFlowHistory:c.history,type:s}));n=a,e.push(U.CONFIRM_TRANSACTION_ROUTE)}await t((0,L.setMaxValueMode)(n,o===q.MAX&&c.sendAsset.type===N.AssetType.native))}else{var D;const n=(0,h.getUnapprovedTransactions)(a),r=(0,i.cloneDeep)(n[c.id]),o={data:d.data,from:d.from,to:d.to,value:d.value,gas:null!=r&&r.userEditedGasLimit?r.txParams.gas:d.gas};r.originalGasEstimate=o.gas;const u={...r,txParams:Object.assign(r.txParams,s?o:d)};await t(le("sendFlow - user clicked next and transaction should be updated in controller")),await t((0,E.updateTransactionSendFlowHistory)(c.id,(null===(D=r.sendFlowHistory)||void 0===D?void 0:D.length)||0,c.history)),await t((0,E.updateEditableParams)(c.id,u.txParams)),await t((0,E.updateTransactionGasFees)(c.id,u.txParams)),e.push(U.CONFIRM_TRANSACTION_ROUTE)}await t(ae.setPrevSwapAndSend(I))}},n.startNewDraftTransaction=function(e){return async t=>{await t(ae.clearPreviousDrafts()),await t(ae.addNewDraft({...Y,history:["sendFlow - User started new draft transaction"]})),await t(Se({type:e.type??N.AssetType.native,details:e.details,skipComputeEstimatedGasLimit:!0})),await t(J())}},n.toggleSendMaxMode=function(){return async(e,t)=>{t()[z].amountMode===q.MAX?(await e(ae.updateAmountMode(q.INPUT)),await e(ae.updateSendAmount("0x0")),await e(le("sendFlow - user toggled max mode off"))):(await e(ae.updateAmountMode(q.MAX)),await e(ae.updateAmountToMax()),await e(le("sendFlow - user toggled max mode on"))),await e(fe())}},n.updateGasLimit=void 0,n.updateGasPrice=function(e){return t=>{t(le(`sendFlow - user set legacy gasPrice to ${e}`)),t(ae.updateGasFees({gasPrice:e,transactionType:l.TransactionEnvelopeType.legacy,manuallyEdited:!0}))}},n.updateRecipient=ge,n.updateRecipientUserInput=he,n.updateSendAmount=Ee,n.updateSendAsset=Se,n.updateSendHexData=function(e){return async(t,n)=>{await t(le(`sendFlow - user added custom hexData ${e}`)),await t(ae.updateUserInputHexData(e));const a=n(),r=a[z].draftTransactions[a[z].currentTransactionUUID];await t(fe(r.sendAsset.type===N.AssetType.native))}},n.updateSendQuote=fe,n.useContactListForRecipientSearch=function(){return e=>{e(le("sendFlow - user selected back to all on recipient screen")),e(ue(Q.CONTACT_LIST))}},n.useDefaultGas=n.useCustomGas=void 0,n.useMyAccountsForRecipientSearch=function(){return e=>{e(le("sendFlow - user selected transfer to my accounts on recipient screen")),e(ue(Q.MY_ACCOUNTS))}};var a,r=e("@reduxjs/toolkit"),s=(a=e("bignumber.js"))&&a.__esModule?a:{default:a},o=e("ethereumjs-util"),i=e("lodash"),c=e("uuid"),u=e("@metamask/rpc-errors"),l=e("@metamask/transaction-controller"),d=e("../../../shared/modules/error"),p=e("../../../shared/modules/conversion.utils"),m=e("../../../shared/constants/gas"),T=e("../../pages/confirmations/send/send.constants"),f=e("../../pages/confirmations/send/send.utils"),g=e("../../../shared/modules/selectors/networks"),h=e("../../selectors"),E=e("../../store/actions"),S=e("../gas/gas.duck"),y=e("../../store/actionConstants"),A=e("../../helpers/utils/token-util"),_=e("../../helpers/utils/util"),v=e("../metamask/metamask"),I=e("../domains"),R=e("../../../shared/modules/hexstring-utils"),w=e("../../helpers/utils/transactions.util"),N=e("../../../shared/constants/transaction"),O=e("../../helpers/constants/error-keys"),C=e("../../../shared/constants/time"),k=e("../../../shared/modules/string-utils"),P=e("../../../shared/modules/transaction.utils"),D=e("../../../shared/lib/metamask-controller-utils"),b=e("../../../shared/lib/transactions-controller-utils"),M=e("../../../shared/modules/Numeric"),F=e("../../../shared/constants/common"),x=e("../../../shared/constants/swaps"),L=e("../confirm-transaction/confirm-transaction.duck"),U=e("../../helpers/constants/routes"),G=e("../../pages/swaps/swaps.util"),B=e("./swap-and-send-utils"),H=e("./helpers");const W="This has been replaced with a more recent request",j=C.SECOND,$=n.SEND_STAGES={ADD_RECIPIENT:"ADD_RECIPIENT",DRAFT:"DRAFT",EDIT:"EDIT",INACTIVE:"INACTIVE"},K=n.SEND_STATUSES={INVALID:"INVALID",VALID:"VALID"},V=n.GAS_INPUT_MODES={BASIC:"BASIC",CUSTOM:"CUSTOM",INLINE:"INLINE"},q=n.AMOUNT_MODES={INPUT:"INPUT",MAX:"MAX"},Q=n.RECIPIENT_SEARCH_MODES={CONTACT_LIST:"CONTACT_LIST",MY_ACCOUNTS:"MY_ACCOUNTS"},Y=n.draftTransactionInitialState={amount:{error:null,value:"0x0"},sendAsset:{balance:"0x0",details:null,error:null,type:N.AssetType.native},receiveAsset:{balance:"0x0",details:null,error:null,type:N.AssetType.native},fromAccount:null,gas:{error:null,gasLimit:"0x0",gasPrice:"0x0",gasTotal:"0x0",maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",wasManuallyEdited:!1},history:[],id:null,recipient:{address:"",error:null,nickname:"",warning:null,type:"",recipientWarningAcknowledged:!1},status:K.VALID,transactionType:l.TransactionEnvelopeType.legacy,userInputHexData:null,isSwapQuoteLoading:!1,swapQuotesError:null,swapQuotesLatestRequestTimestamp:null,timeToFetchQuotes:null,quotes:null},X=n.initialState={amountMode:q.INPUT,currentTransactionUUID:null,disabledSwapAndSendNetworks:[],draftTransactions:{},eip1559support:!1,gasEstimateIsLoading:!0,gasEstimatePollToken:null,gasIsSetInModal:!1,gasPriceEstimate:"0x0",gasLimitMinimum:m.GAS_LIMITS.SIMPLE,gasTotalForLayer1:null,prevSwapAndSendInput:null,recipientMode:Q.CONTACT_LIST,recipientInput:"",selectedAccount:{address:null,balance:"0x0"},stage:$.INACTIVE,swapsBlockedTokens:[]},z="send",Z=n.computeEstimatedGasLimit=(0,r.createAsyncThunk)("send/computeEstimatedGasLimit",(async(e,t)=>{var n,a;const r=t.getState(),{send:s,metamask:o}=r,i=s.draftTransactions[s.currentTransactionUUID],c=(0,h.getUnapprovedTransactions)(r)[i.id],u=(0,h.getIsNonStandardEthChain)(r),l=(0,g.getCurrentChainId)(r),d=(0,h.getSelectedInternalAccountWithBalance)(r),p=await t.dispatch((0,E.getLayer1GasFee)({transactionParams:{gasPrice:i.gas.gasPrice,gas:i.gas.gasLimit,to:null===(n=i.recipient.address)||void 0===n?void 0:n.toLowerCase(),value:s.amountMode===q.MAX?s.selectedAccount.balance:i.amount.value,from:s.selectedAccount.address,data:i.userInputHexData,type:"0x0"},chainId:l}));if(s.stage!==$.EDIT||null===(a=c.dappSuggestedGasFees)||void 0===a||!a.gas||!c.userEditedGasLimit){var m;const e=await(0,H.estimateGasLimitForSend)({gasPrice:i.gas.gasPrice,blockGasLimit:o.currentBlockGasLimit,selectedAddress:d.address,sendToken:i.sendAsset.details,to:null===(m=i.recipient.address)||void 0===m?void 0:m.toLowerCase(),value:i.amount.value,data:i.userInputHexData,isNonStandardEthChain:u,chainId:l,gasLimit:i.gas.gasLimit});return await t.dispatch((0,S.setCustomGasLimit)(e)),{gasLimit:e,gasTotalForLayer1:p}}return null})),J=n.initializeSendState=(0,r.createAsyncThunk)("send/initializeSendState",(async({chainHasChanged:e=!1}={},t)=>{const n=t.getState(),a=(0,h.getIsNonStandardEthChain)(n),r=(0,g.getSelectedNetworkClientId)(n),s=(0,g.getCurrentChainId)(n);let i=(0,h.checkNetworkAndAccountSupports1559)(n);i===undefined&&(i=await(0,E.getCurrentNetworkEIP1559Compatibility)());const c=(0,h.getSelectedAccount)(n),{send:u,metamask:l}=n,d=u.draftTransactions[u.currentTransactionUUID];if(!d)return t.rejectWithValue("draftTransaction not found, possibly not on send flow");let p=u.stage===$.EDIT?d.gas.gasPrice:"0x1",T=null;T=await(0,E.gasFeeStartPollingByNetworkClientId)(r),(0,E.addPollingTokenToAppState)(T);const{metamask:{gasFeeEstimates:f,gasEstimateType:y}}=t.getState();u.stage!==$.EDIT&&(p=y===m.GasEstimateTypes.legacy?(0,h.getGasPriceInHexWei)(f.medium):y===m.GasEstimateTypes.ethGasPrice?(0,H.getRoundedGasPrice)(f.gasPrice):y===m.GasEstimateTypes.feeMarket?(0,h.getGasPriceInHexWei)(f.medium.suggestedMaxFeePerGas):f.gasPrice?(0,H.getRoundedGasPrice)(f.gasPrice):"0x0");let{gasLimit:A}=d.gas;if(y!==m.GasEstimateTypes.none&&u.stage!==$.EDIT&&d.recipient.address){A=d.sendAsset.type===N.AssetType.token||d.sendAsset.type===N.AssetType.NFT?m.GAS_LIMITS.BASE_TOKEN_ESTIMATE:m.GAS_LIMITS.SIMPLE;A=await(0,H.estimateGasLimitForSend)({gasPrice:p,blockGasLimit:l.currentBlockGasLimit,selectedAddress:Re(n),sendToken:d.sendAsset.details,to:d.recipient.address.toLowerCase(),value:d.amount.value,data:d.userInputHexData,isNonStandardEthChain:a,chainId:s})||A}await t.dispatch((0,S.setCustomGasLimit)(A));if(t.getState().send.currentTransactionUUID!==u.currentTransactionUUID)return t.rejectWithValue("draftTransaction changed during initialization.\n        A new initializeSendState action must be dispatched.");const _=(0,h.getIsSwapsChain)(n)&&(0,h.getUseExternalServices)(n)?(await(0,G.fetchBlockedTokens)(s)).map((e=>e.toLowerCase())):[],I=await(0,B.getDisabledSwapAndSendNetworksFromAPI)();return{account:c,chainId:(0,g.getCurrentChainId)(n),tokens:(0,v.getTokens)(n),chainHasChanged:e,disabledSwapAndSendNetworks:I,gasFeeEstimates:f,gasEstimateType:y,gasLimit:A,gasTotal:(0,o.addHexPrefix)((0,b.calcGasTotal)(A,p)),gasEstimatePollToken:T,eip1559support:i,useTokenDetection:(0,h.getUseTokenDetection)(n),tokenAddressList:Object.keys((0,h.getTokenList)(n)),swapsBlockedTokens:_}}));let ee;const te=(0,r.createAsyncThunk)("send/fetchSwapAndSendQuotes",(async({requestTimestamp:e},t)=>{var n,a;const r=t.getState(),s=r[z],i=(0,g.getCurrentChainId)(r),c=s.draftTransactions[s.currentTransactionUUID],u=Re(r),l=(0,p.hexToDecimal)(c.amount.value);if(!(Number(l)&&c.sendAsset&&c.receiveAsset&&c.recipient.address))return{quotes:null,requestTimestamp:e};let d=await new Promise(((t,n)=>setTimeout((async()=>{var a,r;e!==ee&&n(new Error(W)),(0,B.getSwapAndSendQuotes)({chainId:i,sourceAmount:l,sourceToken:(null===(a=c.sendAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[i].address,destinationToken:(null===(r=c.receiveAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)||x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[i].address,sender:u,recipient:c.recipient.address}).then((e=>t(e))).catch((()=>n(T.SWAPS_QUOTES_ERROR)))}),j)));for(const e of d)e.approvalNeeded&&(e.approvalNeeded.gas=(0,o.addHexPrefix)(await(0,E.estimateGas)(e.approvalNeeded)));if(d=await(0,H.addAdjustedReturnToQuotes)(d,r,null===(n=c.receiveAsset)||void 0===n?void 0:n.details),null===(a=d)||void 0===a||!a.length)throw new Error(T.SWAPS_NO_QUOTES);return{quotes:d,requestTimestamp:e}})),ne=(0,r.createSlice)({name:z,initialState:X,reducers:{addNewDraft:(e,t)=>{e.currentTransactionUUID=(0,c.v4)(),e.draftTransactions[e.currentTransactionUUID]=t.payload,t.payload.id?e.stage=$.EDIT:e.stage=$.ADD_RECIPIENT},addHistoryEntry:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&n.history.push({entry:t.payload,timestamp:Date.now()})},calculateGasTotal:e=>{const t=e.draftTransactions[e.currentTransactionUUID];t&&(t.transactionType===l.TransactionEnvelopeType.feeMarket?t.gas.gasTotal=(0,o.addHexPrefix)((0,b.calcGasTotal)(t.gas.gasLimit,t.gas.maxFeePerGas)):t.gas.gasTotal=(0,o.addHexPrefix)((0,b.calcGasTotal)(t.gas.gasLimit,t.gas.gasPrice)),e.amountMode===q.MAX&&t.sendAsset.type===N.AssetType.native&&ne.caseReducers.updateAmountToMax(e),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))},clearPreviousDrafts:e=>{e.currentTransactionUUID=null,e.draftTransactions={}},resetSendState:e=>({...X,prevSwapAndSendInput:e.prevSwapAndSendInput}),setPrevSwapAndSend:(e,t)=>{e.prevSwapAndSendInput=t.payload},updateAmountMode:(e,t)=>{Object.values(q).includes(t.payload)&&(e.amountMode=t.payload)},updateAmountToMax:e=>{const t=e.draftTransactions[e.currentTransactionUUID];let n="0x0";if((null==t?void 0:t.sendAsset.type)===N.AssetType.token){var a;const e=(null===(a=t.sendAsset.details)||void 0===a?void 0:a.decimals)??0,r=Math.pow(10,Number(e));n=new M.Numeric(t.sendAsset.balance,16).times(r,10).toString()}else{const a=new M.Numeric(t.gas.gasTotal||"0x0",16).add(new M.Numeric(e.gasTotalForLayer1??"0x0",16));n=new M.Numeric(t.sendAsset.balance,16).lessThanOrEqualTo(a)?"0":new M.Numeric(t.sendAsset.balance,16).minus(a).toString()}ne.caseReducers.updateSendAmount(e,{payload:n})},updateAsset:(e,t)=>{const{asset:n,initialAssetSet:a,isReceived:r}=t.payload,s=e.draftTransactions[e.currentTransactionUUID],o=s[r?"receiveAsset":"sendAsset"];o.type=n.type,o.balance=n.balance,o.error=n.error,o.type===N.AssetType.token||o.type===N.AssetType.NFT?o.details=n.details:(o.details=null,s.recipient.error===T.CONTRACT_ADDRESS_ERROR&&(s.recipient.error=null)),r||(s.receiveAsset=o),e.amountMode===q.MAX?(e.amountMode=q.INPUT,ne.caseReducers.updateSendAmount(e,{payload:"0x0"})):!1===a&&(r?s.quotes=Y.quotes:(ne.caseReducers.updateSendAmount(e,{payload:"0x0"}),ne.caseReducers.updateUserInputHexData(e,{payload:""}))),ne.caseReducers.validateSendState(e)},updateGasFeeEstimates:(e,t)=>{const{gasFeeEstimates:n,gasEstimateType:a}=t.payload;let r="0x0";switch(a){case m.GasEstimateTypes.feeMarket:ne.caseReducers.updateGasFees(e,{payload:{transactionType:l.TransactionEnvelopeType.feeMarket,maxFeePerGas:(0,h.getGasPriceInHexWei)(n.medium.suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,h.getGasPriceInHexWei)(n.medium.suggestedMaxPriorityFeePerGas)}});break;case m.GasEstimateTypes.legacy:r=(0,H.getRoundedGasPrice)(n.medium),ne.caseReducers.updateGasFees(e,{payload:{gasPrice:r,type:l.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});break;case m.GasEstimateTypes.ethGasPrice:r=(0,H.getRoundedGasPrice)(n.gasPrice),ne.caseReducers.updateGasFees(e,{payload:{gasPrice:(0,H.getRoundedGasPrice)(n.gasPrice),type:l.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});case m.GasEstimateTypes.none:}e.gasPriceEstimate=(0,o.addHexPrefix)(r)},updateGasFees:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&(t.payload.transactionType===l.TransactionEnvelopeType.feeMarket?(n.gas.maxFeePerGas=(0,o.addHexPrefix)(t.payload.maxFeePerGas),n.gas.maxPriorityFeePerGas=(0,o.addHexPrefix)(t.payload.maxPriorityFeePerGas),n.transactionType=l.TransactionEnvelopeType.feeMarket):(t.payload.manuallyEdited&&(n.gas.wasManuallyEdited=!0),n.gas.wasManuallyEdited&&!t.payload.manuallyEdited||(n.gas.gasPrice=(0,o.addHexPrefix)(t.payload.gasPrice)),n.transactionType=l.TransactionEnvelopeType.legacy),ne.caseReducers.calculateGasTotal(e))},updateGasLimit:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&(n.gas.gasLimit=(0,o.addHexPrefix)(t.payload),ne.caseReducers.calculateGasTotal(e))},updateLayer1Fees:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];e.gasTotalForLayer1=t.payload,e.amountMode===q.MAX&&(null==n?void 0:n.sendAsset.type)===N.AssetType.native&&ne.caseReducers.updateAmountToMax(e)},updateRecipient:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n.recipient.error=null,e.recipientInput="",n.recipient.address=t.payload.address??"",n.recipient.nickname=t.payload.nickname??"",""===n.recipient.address?e.stage=$.ADD_RECIPIENT:(e.stage=null===n.id?$.DRAFT:$.EDIT,e.recipientMode=Q.CONTACT_LIST),ne.caseReducers.validateSendState(e)},updateRecipientSearchMode:(e,t)=>{e.recipientInput="",e.recipientMode=t.payload},updateRecipientWarning:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.warning=t.payload},updateRecipientType:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.type=t.payload},updateDraftTransactionStatus:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].status=t.payload},acknowledgeRecipientWarning:e=>{e.draftTransactions[e.currentTransactionUUID].recipient.recipientWarningAcknowledged=!0,ne.caseReducers.validateSendState(e)},updateRecipientUserInput:(e,t)=>{e.recipientInput=t.payload},updateSendAmount:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n.amount.value=(0,o.addHexPrefix)(t.payload),ne.caseReducers.validateAmountField(e),n.sendAsset.type===N.AssetType.native&&ne.caseReducers.validateGasField(e)},updateUserInputHexData:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].userInputHexData=t.payload},useCustomGas:e=>{e.gasIsSetInModal=!0},useDefaultGas:e=>{e.gasIsSetInModal=!1},validateAmountField:e=>{const t=e.draftTransactions[e.currentTransactionUUID];if(!t)return;const n=new M.Numeric(t.amount.value,16);switch(!0){case t.sendAsset.type===N.AssetType.NFT&&t.sendAsset.details.standard===N.TokenStandard.ERC1155&&"0x0"===t.amount.value:t.amount.error=T.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case t.sendAsset.type===N.AssetType.NFT&&t.sendAsset.details.standard===N.TokenStandard.ERC1155&&!(0,f.isERC1155BalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value}):t.amount.error=T.INSUFFICIENT_FUNDS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case n.isFloat()&&t.sendAsset.type===N.AssetType.NFT&&t.sendAsset.details.standard===N.TokenStandard.ERC1155:t.amount.error=T.FLOAT_TOKENS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case t.sendAsset.type===N.AssetType.token&&!(0,f.isTokenBalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value,decimals:t.sendAsset.details.decimals}):t.amount.error=T.INSUFFICIENT_TOKENS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break;case!(0,f.isBalanceSufficient)({amount:t.sendAsset.type===N.AssetType.native?t.amount.value:undefined,balance:t.sendAsset.type===N.AssetType.native?t.sendAsset.balance:e.selectedAccount.balance,gasTotal:t.gas.gasTotal??"0x0"}):{const n=t.sendAsset.type===N.AssetType.native&&!(0,f.isBalanceSufficient)({amount:t.amount.value,balance:t.sendAsset.balance,gasTotal:"0x0"});t.amount.error=n?T.INSUFFICIENT_FUNDS_ERROR:T.INSUFFICIENT_FUNDS_FOR_GAS_ERROR,t.status!==K.INVALID&&ne.caseReducers.validateSendState(e);break}default:t.amount.error=null,t.status===K.INVALID&&ne.caseReducers.validateSendState(e)}},validateGasField:e=>{var t;const n=e.draftTransactions[e.currentTransactionUUID];if(!n)return;const a=!(0,f.isBalanceSufficient)({amount:n.sendAsset.type===N.AssetType.native?n.amount.value:"0x0",balance:(null===(t=n.fromAccount)||void 0===t?void 0:t.balance)??e.selectedAccount.balance,gasTotal:n.gas.gasTotal??"0x0"});n.gas.error=a?T.INSUFFICIENT_FUNDS_ERROR:null},validateRecipientUserInput:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];if(n)if(e.recipientMode===Q.MY_ACCOUNTS||""===e.recipientInput||null===e.recipientInput)n.recipient.error=null,n.recipient.warning=null;else{var a;const{tokens:r,tokenAddressList:s,isProbablyAnAssetContract:o}=t.payload;(0,R.isBurnAddress)(e.recipientInput)||(0,R.isPossibleAddress)(e.recipientInput)&&!(0,R.isValidHexAddress)(e.recipientInput,{mixedCaseUseChecksum:!0})?n.recipient.error=T.INVALID_RECIPIENT_ADDRESS_ERROR:(0,_.isOriginContractAddress)(e.recipientInput,null===(a=n.sendAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address)?n.recipient.error=T.CONTRACT_ADDRESS_ERROR:n.recipient.error=null,(0,R.isValidHexAddress)(e.recipientInput)&&(s.find((t=>(0,k.isEqualCaseInsensitive)(t,e.recipientInput)))||(0,_.checkExistingAddresses)(e.recipientInput,r))||o?n.recipient.warning=T.KNOWN_RECIPIENT_ADDRESS_WARNING:n.recipient.warning=null}ne.caseReducers.validateSendState(e)},validateSendState:e=>{var t,n,a,r,i;const c=e.draftTransactions[e.currentTransactionUUID];if(ne.caseReducers.addHistoryEntry(e,{payload:"Begin validating send state"}),c){const u=(0,H.getIsDraftSwapAndSend)(c),l=()=>[T.INSUFFICIENT_TOKENS_ERROR,T.INSUFFICIENT_FUNDS_ERROR,T.INSUFFICIENT_FUNDS_FOR_GAS_ERROR].includes(c.amount.error)&&!c.sendAsset.balance,{quotes:d,gas:m}=c,g=d?(0,H.calculateBestQuote)(d):undefined,h=(0,p.hexToDecimal)((null==m?void 0:m.gasTotal)||"0x0")>0&&(0,p.hexToDecimal)((null==m?void 0:m.gasLimit)||"0x0")>0?new M.Numeric(m.gasTotal,16).divide(m.gasLimit,16).toString():undefined;switch(!0){case Boolean(c.amount.error&&!l()):ne.caseReducers.addHistoryEntry(e,{payload:`Amount is in error ${c.amount.error}`}),c.status=K.INVALID;break;case Boolean(c.gas.error):ne.caseReducers.addHistoryEntry(e,{payload:`Gas is in error ${c.gas.error}`}),c.status=K.INVALID;break;case Boolean(c.sendAsset.error):ne.caseReducers.addHistoryEntry(e,{payload:`Send asset is in error ${c.sendAsset.error}`}),c.status=K.INVALID;break;case Boolean(c.receiveAsset.error):ne.caseReducers.addHistoryEntry(e,{payload:`Receive asset is in error ${c.receiveAsset.error}`}),c.status=K.INVALID;break;case c.sendAsset.type===N.AssetType.token&&null===c.sendAsset.details:ne.caseReducers.addHistoryEntry(e,{payload:"Send asset is TOKEN and token details is null"}),c.status=K.INVALID;break;case c.receiveAsset.type===N.AssetType.token&&null===c.receiveAsset.details:ne.caseReducers.addHistoryEntry(e,{payload:"Receive asset is TOKEN and token details is null"}),c.status=K.INVALID;break;case e.stage===$.ADD_RECIPIENT:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is ADD_RECIPIENT"}),c.status=K.INVALID;break;case e.stage===$.INACTIVE:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is INACTIVE"}),c.status=K.INVALID;break;case e.gasEstimateIsLoading:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because gasEstimateIsLoading"}),c.status=K.INVALID;break;case new s.default(c.gas.gasLimit,16).lessThan(new s.default(e.gasLimitMinimum)):ne.caseReducers.addHistoryEntry(e,{payload:`Form is invalid because ${c.gas.gasLimit} is lessThan ${e.gasLimitMinimum}`}),c.status=K.INVALID;break;case"loading"===c.recipient.warning:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning is loading"}),c.status=K.INVALID;break;case c.recipient.warning===T.KNOWN_RECIPIENT_ADDRESS_WARNING&&!1===c.recipient.recipientWarningAcknowledged:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning not acknolwedged"}),c.status=K.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)(g.recipient,c.recipient.address)):ne.caseReducers.addHistoryEntry(e,{payload:`Recipient is not match ${c.recipient.address} ${g.recipient}`}),c.status=K.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)(g.trade.from,e.selectedAccount.address)):ne.caseReducers.addHistoryEntry(e,{payload:`Sender is not match ${e.selectedAccount.address} ${g.trade.from}`}),c.status=K.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)((null===(t=c.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||(0,o.zeroAddress)(),g.sourceToken)):ne.caseReducers.addHistoryEntry(e,{payload:`Source token is not match ${null===(n=c.sendAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address} ${g.sourceToken}`}),c.status=K.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)(g.destinationToken,(null===(a=c.receiveAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address)||(0,o.zeroAddress)())):ne.caseReducers.addHistoryEntry(e,{payload:`Destination token is not match ${null===(r=c.receiveAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address} ${g.destinationToken}`}),c.status=K.INVALID;break;case g&&!(0,f.isBalanceSufficient)({amount:c.sendAsset.type===N.AssetType.native?c.amount.value:undefined,balance:e.selectedAccount.balance,gasTotal:(0,b.calcGasTotal)(new M.Numeric((null==g||null===(i=g.gasParams)||void 0===i?void 0:i.maxGas)||0,10).toPrefixedHexString(),h??"0x0")}):c.amount.error||(c.amount.error=T.INSUFFICIENT_FUNDS_FOR_GAS_ERROR),c.status=K.INVALID;break;case u&&!g:ne.caseReducers.addHistoryEntry(e,{payload:"No swap and send quote available"}),c.status=K.INVALID;break;default:ne.caseReducers.addHistoryEntry(e,{payload:"Form is valid"}),c.status=K.VALID}}}},extraReducers:e=>{e.addCase(y.ACCOUNT_CHANGED,((e,t)=>{if(e.stage===$.EDIT&&t.payload.account){const n=e.draftTransactions[e.currentTransactionUUID];n&&n.fromAccount&&n.fromAccount.address===t.payload.account.address&&(n.fromAccount.balance=t.payload.account.balance,n.sendAsset.type===N.AssetType.native&&(n.sendAsset.balance=t.payload.account.balance),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))}})).addCase(y.ADDRESS_BOOK_UPDATED,((e,t)=>{var n;const{addressBook:a}=t.payload,r=e.draftTransactions[e.currentTransactionUUID];r&&null!==(n=a[r.recipient.address])&&void 0!==n&&n.name&&(r.recipient.nickname=a[r.recipient.address].name)})).addCase(y.CLEAR_SWAP_AND_SEND_STATE,(e=>{const t=e.draftTransactions[e.currentTransactionUUID];t.quotes=Y.quotes,t.swapQuotesError=Y.swapQuotesError,t.isSwapQuoteLoading=Y.isSwapQuoteLoading,t.swapQuotesLatestRequestTimestamp=Y.swapQuotesLatestRequestTimestamp,t.timeToFetchQuotes=Y.timeToFetchQuotes})).addCase(Z.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(Z.fulfilled,((e,t)=>{var n,a;e.gasEstimateIsLoading=!1,null!==(n=t.payload)&&void 0!==n&&n.gasLimit&&ne.caseReducers.updateGasLimit(e,{payload:t.payload.gasLimit}),null!==(a=t.payload)&&void 0!==a&&a.gasTotalForLayer1&&ne.caseReducers.updateLayer1Fees(e,{payload:t.payload.gasTotalForLayer1})})).addCase(Z.rejected,(e=>{e.gasEstimateIsLoading=!1})).addCase(y.GAS_FEE_ESTIMATES_UPDATED,((e,t)=>{ne.caseReducers.updateGasFeeEstimates(e,{payload:t.payload})})).addCase(J.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(J.fulfilled,((e,t)=>{e.eip1559support=t.payload.eip1559support,e.selectedAccount.address=t.payload.account.address,e.selectedAccount.balance=t.payload.account.balance,e.prevSwapAndSendInput=X.prevSwapAndSendInput;const n=e.draftTransactions[e.currentTransactionUUID];var a;n&&(n.gas.gasLimit=t.payload.gasLimit,n.gas.gasTotal=t.payload.gasTotal,t.payload.chainHasChanged&&(n.sendAsset.type=N.AssetType.native,n.sendAsset.balance=(null===(a=n.fromAccount)||void 0===a?void 0:a.balance)??e.selectedAccount.balance,n.sendAsset.details=null,n.receiveAsset=Y.receiveAsset));ne.caseReducers.updateGasFeeEstimates(e,{payload:{gasFeeEstimates:t.payload.gasFeeEstimates,gasEstimateType:t.payload.gasEstimateType}}),e.gasEstimatePollToken=t.payload.gasEstimatePollToken,t.payload.gasEstimatePollToken&&(e.gasEstimateIsLoading=!1),e.stage!==$.INACTIVE&&ne.caseReducers.validateRecipientUserInput(e,{payload:{chainId:t.payload.chainId,tokens:t.payload.tokens,useTokenDetection:t.payload.useTokenDetection,tokenAddressList:t.payload.tokenAddressList}}),e.swapsBlockedTokens=t.payload.swapsBlockedTokens,e.disabledSwapAndSendNetworks=t.payload.disabledSwapAndSendNetworks,e.amountMode===q.MAX&&ne.caseReducers.updateAmountToMax(e),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e)})).addCase(J.rejected,(e=>{e.prevSwapAndSendInput=X.prevSwapAndSendInput})).addCase(te.pending,((e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];var a;n&&(null!==(a=t.meta)&&void 0!==a&&null!==(a=a.arg)&&void 0!==a&&a.isRefreshingQuotes||(n.quotes=Y.quotes),n.swapQuotesError=null,n.isSwapQuoteLoading=!0,n.swapQuotesLatestRequestTimestamp=Math.max(t.meta.arg.requestTimestamp,n.swapQuotesLatestRequestTimestamp));ne.caseReducers.validateSendState(e)})).addCase(te.fulfilled,((e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&t.payload.requestTimestamp===n.swapQuotesLatestRequestTimestamp&&(n.timeToFetchQuotes=Date.now()-t.payload.requestTimestamp,n.isSwapQuoteLoading=!1,n.swapQuotesError=null,t.payload&&(n.quotes=t.payload.quotes)),ne.caseReducers.validateSendState(e)})).addCase(te.rejected,((e,t)=>{if(t.error.message===W)return;const n=e.draftTransactions[e.currentTransactionUUID];n&&(n.isSwapQuoteLoading=!1,n.swapQuotesError=t.error.message)})).addCase(y.SELECTED_ACCOUNT_CHANGED,((e,t)=>{if(e.stage!==$.EDIT&&t.payload.account){e.selectedAccount.balance=t.payload.account.balance,e.selectedAccount.address=t.payload.account.address;const n=e.draftTransactions[e.currentTransactionUUID];n&&((null==n?void 0:n.sendAsset.type)===N.AssetType.native&&(n.sendAsset.balance=t.payload.account.balance),(null==n?void 0:n.sendAsset.type)!==N.AssetType.token&&(null==n?void 0:n.sendAsset.type)!==N.AssetType.NFT||(n.sendAsset.type=Y.sendAsset.type,n.sendAsset.error=Y.sendAsset.error,n.sendAsset.details=Y.sendAsset.details,n.sendAsset.balance=t.payload.account.balance,n.receiveAsset=Y.receiveAsset,n.amount.value=Y.amount.value),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))}})).addCase(y.QR_CODE_DETECTED,((e,t)=>{const n=t.value,a=e.draftTransactions[e.currentTransactionUUID];if(n&&a&&"address"===n.type){const t=n.values.address.toLowerCase();(0,R.isValidHexAddress)(t,{allowNonPrefixed:!1})?a.recipient.address!==t&&ne.caseReducers.updateRecipient(e,{payload:{address:t}}):a.recipient.error=T.INVALID_RECIPIENT_ADDRESS_ERROR}}))}}),{actions:ae,reducer:re}=ne;n.default=re;const{useDefaultGas:se,useCustomGas:oe,updateGasLimit:ie,validateRecipientUserInput:ce,updateRecipientSearchMode:ue,addHistoryEntry:le,acknowledgeRecipientWarning:de}=ae;n.acknowledgeRecipientWarning=de,n.addHistoryEntry=le,n.updateGasLimit=ie,n.useCustomGas=oe,n.useDefaultGas=se;const pe=(0,i.debounce)(((e,t,n)=>{e(le(`sendFlow - user typed ${t.userInput} into recipient input field`)),e(ce(t)),n()}),300),me=(0,i.debounce)((async e=>{await e(Z())}),300),Te=(0,i.debounce)(((e,t)=>{e(le(t))}),100);function fe(e=!0,t=!1,n=!0){return async(a,r)=>{var s;const o=r()[z],i=null===(s=o.draftTransactions)||void 0===s?void 0:s[null==o?void 0:o.currentTransactionUUID],c=(0,H.getIsDraftSwapAndSend)(i),{quotes:u,swapQuotesError:l,isSwapQuoteLoading:d,swapQuotesLatestRequestTimestamp:p}=i??{};if(c){const e=Date.now();ee=e,a(te({requestTimestamp:e,isRefreshingQuotes:t}))}else(u||l||d||p)&&a({type:y.CLEAR_SWAP_AND_SEND_STATE});e&&(n?await a(Z()):await me(a))}}function ge({address:e,nickname:t}){return async(n,a)=>{const r=a(),s=(0,h.getAddressBookEntryOrAccountName)(r,e)??"";await n(ae.updateRecipient({address:e,nickname:t||s})),await n(fe())}}function he(e){return async(t,n)=>{t(ae.updateRecipientWarning("loading")),t(ae.updateDraftTransactionStatus(K.INVALID)),await t(ae.updateRecipientUserInput(e));const a=n(),r=Re(a),s=(0,g.getCurrentChainId)(a),o=(0,v.getTokens)(a),i=(0,h.getUseTokenDetection)(a),c=(0,h.getTokenList)(a),u=Object.keys(c),l=(0,R.isValidHexAddress)(e);let d=!1;if(l){if(await(0,w.isSmartContractAddress)(e)){t(ae.updateRecipientType(T.RECIPIENT_TYPES.SMART_CONTRACT));const{symbol:n,decimals:a}=(0,A.getTokenMetadata)(e,c)||{};if(d=n&&a!==undefined,!d)try{const{standard:t}=await(0,E.getTokenStandardAndDetails)(e,r);d=Boolean(t)}catch(e){console.log(e)}}}return new Promise((n=>{pe(t,{userInput:e,chainId:s,tokens:o,useTokenDetection:i,tokenAddressList:u,isProbablyAnAssetContract:d},n)}))}}function Ee(e,t){return async(n,a)=>{const r=a();if(n(ae.updateSendAmount(e)),r[z].amountMode===q.MAX&&n(ae.updateAmountMode(q.INPUT)),await n(fe(!0,!1,!1)),t===undefined)return;const{ticker:s}=(0,g.getProviderConfig)(r),o=r[z].draftTransactions[r[z].currentTransactionUUID];let i=e;var c;o.sendAsset.type===N.AssetType.token?i=`${t} ${null===(c=o.sendAsset.details)||void 0===c?void 0:c.symbol}`:i=`${t} ${s||F.EtherDenomination.ETH}`;Te(n,`sendFlow - user set amount to ${i}`)}}function Se({type:e,details:t,skipComputeEstimatedGasLimit:n,isReceived:a},{initialAssetSet:r=!1}={}){return async(s,i)=>{const c=i(),{ticker:u}=(0,g.getProviderConfig)(c),p=c[z].draftTransactions[c[z].currentTransactionUUID],m=Re(c),T=(0,h.getTargetAccount)(c,m);if(e===N.AssetType.native){const t=(0,h.getUnapprovedTransactions)(c),n=null==t?void 0:t[p.id];await s(le(`sendFlow - user set asset of type ${N.AssetType.native} with symbol ${u??F.EtherDenomination.ETH}`)),await s(ae.updateAsset({asset:{type:e,details:null,balance:T.balance,error:null},initialAssetSet:r,isReceived:a})),(null==n?void 0:n.type)!==l.TransactionType.tokenMethodTransferFrom&&(null==n?void 0:n.type)!==l.TransactionType.tokenMethodTransfer&&(null==n?void 0:n.type)!==l.TransactionType.tokenMethodSafeTransferFrom||await s(ae.updateUserInputHexData(""))}else{var f;await s((0,E.showLoadingIndication)());let n,i=null===(f={[N.TokenStandard.ERC20]:a?["address","symbol","decimals"]:["address","symbol","decimals","balance"],[N.TokenStandard.ERC721]:["address","symbol","tokenId"],[N.TokenStandard.ERC1155]:["address","symbol","tokenId"]}[t.standard])||void 0===f?void 0:f.find((e=>t.collection&&"symbol"===e?t.collection[e]===undefined:t[e]===undefined));if("balance"===i){var S;const e=(0,g.getSelectedNetworkClientId)(c),n=Re(c),a=null===(S=(await(0,E.getBalancesInSingleCall)(n,[t.address],e).catch((()=>({}))))[t.address])||void 0===S?void 0:S.hex;t.balance=a?(0,o.addHexPrefix)(a):undefined,i=undefined}n=t.standard&&!i?{...t}:{...t,...await(0,E.getTokenStandardAndDetails)(t.address,m,t.tokenId).catch((()=>{s((0,E.hideLoadingIndication)())}))},await s((0,E.hideLoadingIndication)());const u={type:e,details:n,error:null};if(n.standard===N.TokenStandard.ERC20)u.balance=n.balance&&n.decimals!==undefined?(0,o.addHexPrefix)((0,b.calcTokenAmount)(n.balance,n.decimals).toString(16)):undefined,await s(le(`sendFlow - user set asset to ERC20 token with symbol ${n.symbol} and address ${n.address}`));else if(n.standard===N.TokenStandard.ERC1155||n.standard===N.TokenStandard.ERC721){if(e===N.AssetType.token)throw s((0,E.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:n.address})),u.error=O.INVALID_ASSET_TYPE,new Error(O.INVALID_ASSET_TYPE);{let e=!0;try{e=await(0,E.isNftOwner)(m,n.address,n.tokenId)}catch(e){(0,d.getErrorMessage)(e).includes("Unable to verify ownership.")||s((0,E.displayWarning)(e))}if(!e)throw new Error("Send slice initialized as NFT send with an NFT not currently owned by the select account");u.error=null,u.balance=n.balance?(0,o.addHexPrefix)(n.balance):"0x1",await s(le(`sendFlow - user set asset to NFT with tokenId ${n.tokenId} and address ${n.address}`))}}await s(ae.updateAsset({asset:u,initialAssetSet:r,isReceived:a}))}await s(fe(!1===r&&!n))}}function ye(e){return e[z].currentTransactionUUID}function Ae(e){return e[z].draftTransactions[ye(e)]??{}}const _e=n.getBestQuote=(0,r.createSelector)(Ae,(({quotes:e,swapQuotesError:t})=>{const n=e;if(t||null==n||!n.length)return undefined;return(0,H.calculateBestQuote)(n)}));function ve(e){return e[z].gasTotalForLayer1}n.getIsNativeSendPossible=(0,r.createSelector)(Ae,ve,(({gas:{gasTotal:e},sendAsset:t},n)=>{if(t.type!==N.AssetType.native)return!0;const a=t.balance;return new M.Numeric(e||"0x0",16).add(new M.Numeric(n??"0x0",16)).lessThan(a,16)}));function Ie(e){return Ae(e).sendAsset}function Re(e){var t,n;const a=e[z],r=a.draftTransactions[a.currentTransactionUUID];return(null==r||null===(t=r.fromAccount)||void 0===t?void 0:t.address)??a.selectedAccount.address??(null===(n=(0,h.getSelectedInternalAccount)(e))||void 0===n?void 0:n.address)}function we(e){const t=Ae(e);if(!t.recipient)return{address:"",nickname:"",error:null,warning:null};const n=(0,R.toChecksumHexAddress)(t.recipient.address);return e.metamask.ensResolutionsByAddress?{...t.recipient,nickname:t.recipient.nickname||(0,h.getEnsResolutionByAddress)(e,n)}:t.recipient}n.getIsSwapAndSendDisabledForNetwork=(0,r.createSelector)((e=>(0,g.getCurrentChainId)(e)),(e=>{var t;return(null===(t=e[z])||void 0===t?void 0:t.disabledSwapAndSendNetworks)??[]}),((e,t)=>t.includes(e))),n.getSendAnalyticProperties=(0,r.createSelector)((e=>(0,g.getProviderConfig)(e)),Ae,_e,(({chainId:e,ticker:t},n,a)=>{try{var r,s,o,i,c,u;const l=x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].decimals,d=x.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].address,p=(0,H.getIsDraftSwapAndSend)(n),{quotes:m,amount:T,sendAsset:f,receiveAsset:g,swapQuotesError:h,timeToFetchQuotes:E}=n,S=(null==n||null===(r=n.sendAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.symbol)||t,y=(null==n||null===(s=n.receiveAsset)||void 0===s||null===(s=s.details)||void 0===s?void 0:s.symbol)||t,A=(null==n||null===(o=n.receiveAsset)||void 0===o||null===(o=o.details)||void 0===o?void 0:o.decimals)||l,_=(null==n||null===(i=n.sendAsset)||void 0===i||null===(i=i.details)||void 0===i?void 0:i.decimals)||l,v=new M.Numeric((null==T?void 0:T.value)||"0x0",16).toBase(10).shiftedBy(_).toString(),I=null==a?void 0:a.sourceAmount,R=null==a?void 0:a.destinationAmount,w=(null==n||null===(c=n.receiveAsset)||void 0===c||null===(c=c.details)||void 0===c?void 0:c.address)||d,N=(null==n||null===(u=n.sendAsset)||void 0===u||null===(u=u.details)||void 0===u?void 0:u.address)||d;return{is_swap_and_send:p,chain_id:e,token_amount_source:I&&_?(0,b.calcTokenAmount)(I,_).toString():v,token_amount_dest_estimate:R&&A?(0,b.calcTokenAmount)(R,A).toString():undefined,token_symbol_source:S,token_symbol_destination:y,token_address_source:N,token_address_destination:w,results_count:null==m?void 0:m.length,quotes_load_time_ms:E,aggregator_list:null==m?void 0:m.map((({aggregator:e,error:t})=>`${e} (${t||"no error"})`)),aggregator_recommended:null==a?void 0:a.aggregator,errors:[null==T?void 0:T.error,null==f?void 0:f.error,null==g?void 0:g.error,h].filter(Boolean)}}catch(e){return{analyticsError:e}}}))}}},{package:"$root$",file:"ui/ducks/send/send.js"}],[6118,{"../../../shared/constants/swaps":5149,"../../../shared/constants/time":5151,"../../../shared/lib/fetch-with-cache":5158,"../../../shared/lib/swaps-utils":5163,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/hexstring-utils":5182,"../../pages/swaps/swaps.util":6845,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDisabledSwapAndSendNetworksFromAPI=async function(){try{const e=[],t=await(0,d.fetchSwapsFeatureFlags)();return s.ALLOWED_PROD_SWAPS_CHAIN_IDS.forEach((n=>{var a;!1===(null===(a=t[(0,d.getNetworkNameByChainId)(n)])||void 0===a||null===(a=a.v2)||void 0===a||null===(a=a.swapAndSend)||void 0===a?void 0:a.enabled)&&e.push(n)})),e}catch(e){return[]}},n.getSwapAndSendQuotes=async function(e){const{chainId:t,...n}=e;n.slippage=n.slippage??m;const a=new URLSearchParams(n),r=`${f}/${T}/networks/${(0,u.hexToDecimal)(t)}/quotes?${a}`,l=await(0,i.default)({url:r,fetchOptions:{method:"GET",headers:{"X-Client-Id":s.SWAPS_CLIENT_ID}},cacheOptions:{cacheRefreshTime:0,timeout:15*o.SECOND},functionName:"getSwapAndSendQuotes"});return l.map((e=>{if(e.trade&&!e.error&&(0,c.validateData)(p,e,r)){const t=(0,c.addHexPrefixToObjectValues)({to:e.trade.to,from:e.trade.from,data:e.trade.data,value:(0,u.decimalToHex)(e.trade.value),gas:(0,u.decimalToHex)(e.gasParams.maxGas)});let{approvalNeeded:a}=e;return a&&(a=(0,c.addHexPrefixToObjectValues)(a)),{...e,slippage:n.slippage,trade:t,approvalNeeded:a}}return undefined})).filter(Boolean)};var a,r=e("lodash"),s=e("../../../shared/constants/swaps"),o=e("../../../shared/constants/time"),i=(a=e("../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},c=e("../../../shared/lib/swaps-utils"),u=e("../../../shared/modules/conversion.utils"),l=e("../../../shared/modules/hexstring-utils"),d=e("../../pages/swaps/swaps.util");const p=[{property:"gasParams",type:"object",validator:e=>e&&(0,r.isNumber)(e.maxGas)},{property:"trade",type:"object",validator:e=>e&&(0,c.validHex)(e.data)&&(0,l.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,l.isValidHexAddress)(e.from,{allowNonPrefixed:!1})&&(0,c.truthyString)(e.value)},{property:"approvalNeeded",type:"object",validator:e=>null===e||e&&(0,c.validHex)(e.data)&&(0,l.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,l.isValidHexAddress)(e.from,{allowNonPrefixed:!1})},{property:"sourceAmount",type:"string",validator:c.truthyDigitString},{property:"destinationAmount",type:"string",validator:c.truthyDigitString},{property:"sourceToken",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"destinationToken",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"sender",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"recipient",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"aggregator",type:"string",validator:c.truthyString},{property:"aggregatorType",type:"string",validator:c.truthyString},{property:"error",type:"object",validator:e=>null===e||"object"==typeof e},{property:"fee",type:"number"}],m="2",T="v2",f=s.SWAPS_API_V2_BASE_URL}}},{package:"$root$",file:"ui/ducks/send/swap-and-send-utils.ts"}],[6119,{"../../../shared/constants/app":5123,"../../../shared/constants/common":5125,"../../../shared/constants/metametrics":5135,"../../../shared/constants/network":5139,"../../../shared/constants/swaps":5149,"../../../shared/constants/transaction":5153,"../../../shared/lib/swaps-utils":5163,"../../../shared/lib/transactions-controller-utils":5167,"../../../shared/modules/Numeric":5169,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/selectors":5194,"../../../shared/modules/selectors/networks":5195,"../../helpers/constants/routes":6129,"../../pages/swaps/swaps.util":6845,"../../selectors":6860,"../../store/actions":6875,"../metamask/metamask":6111,"@metamask/transaction-controller":2647,"@metamask/utils":2765,"@reduxjs/toolkit":2837,"@sentry/browser":2892,"bignumber.js":3486,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GAS_PRICES_LOADING_STATES=void 0,n.cancelSwapsSmartTransaction=function(e){return async(t,n)=>{try{await t((0,l.cancelSmartTransaction)(e))}catch(e){const{swaps:{isFeatureFlagLoaded:a}}=n();if(e.message.startsWith("Fetch error:")&&a){const n=(0,p.parseSmartTransactionsError)(e.message);t(Re(null==n?void 0:n.error))}}}},n.fetchAndSetSwapsGasPriceInfo=n.default=n.clearSwapsState=void 0,n.fetchMetaSwapsGasPriceEstimates=Ce,n.fetchSwapsLivenessAndFeatureFlags=n.fetchQuotesAndSetQuoteState=void 0,n.fetchSwapsSmartTransactionFees=ke,n.setTransactionSettingsOpened=n.setTopAssets=n.setSwapsFromToken=n.setSwapToToken=n.setSwapQuotesFetchStartTime=n.setReviewSwapClickedTimestamp=n.setMaxSlippage=n.setLatestAddedTokenTo=n.setIsFeatureFlagLoaded=n.setFromTokenInputValue=n.setFromTokenError=n.setFetchingQuotes=n.setBalanceError=n.setAggregatorMetadata=n.prepareToLeaveSwaps=n.prepareForRetryGetQuotes=n.navigateBackToPrepareSwap=n.getUsedSwapsGasPrice=n.getUsedQuote=n.getTransactionSettingsOpened=n.getTradeTxId=n.getTopQuote=n.getTopAssets=n.getToToken=n.getSwapsWelcomeMessageSeenStatus=n.getSwapsUserFeeLevel=n.getSwapsTokens=n.getSwapsSTXLoading=n.getSwapsQuoteRefreshTime=n.getSwapsQuotePrefetchingRefreshTime=n.getSwapsNetworkConfig=n.getSwapsFeatureIsLive=n.getSwapsFallbackGasPrice=n.getSwapsErrorKey=n.getSwapsCustomizationModalPrice=n.getSwapsCustomizationModalLimit=n.getSwapGasPriceEstimateData=n.getSmartTransactionsErrorMessageDismissed=n.getSmartTransactionsError=n.getSmartTransactionFees=n.getSmartTransactionEstimatedGas=n.getShowQuoteLoadingScreen=n.getSelectedQuote=n.getReviewSwapClickedTimestamp=n.getQuotesLastFetched=n.getQuotesFetchStartTime=n.getQuotes=n.getPendingSmartTransactions=n.getMaxSlippage=n.getLatestAddedTokenTo=n.getIsFeatureFlagLoaded=n.getFromTokenInputValue=n.getFromTokenError=n.getFromToken=n.getFetchingQuotes=n.getFetchParams=n.getDestinationTokenInfo=n.getCustomSwapsGasPrice=n.getCustomSwapsGas=n.getCustomMaxPriorityFeePerGas=n.getCustomMaxFeePerGas=n.getCurrentSmartTransactionsError=n.getCurrentSmartTransactionsEnabled=n.getCurrentSmartTransactions=n.getBalanceError=n.getBackgroundSwapRouteState=n.getApproveTxParams=n.getApproveTxId=n.getAggregatorMetadata=void 0,n.shouldShowCustomPriceTooLowWarning=function(e){const{average:t}=U(e),n=L(e);if(!n||t===undefined)return!1;return new I.Numeric(n,16,v.EtherDenomination.WEI).toDenomination(v.EtherDenomination.GWEI).greaterThan(t,10)},n.swapsSlice=n.swapsQuoteSelected=n.swapGasPriceEstimateIsLoading=n.swapGasEstimateLoadingHasFailed=n.swapCustomGasModalPriceEdited=n.swapCustomGasModalLimitEdited=n.swapCustomGasModalClosed=n.signAndSendTransactions=n.signAndSendSwapsSmartTransaction=void 0;var a=e("@reduxjs/toolkit"),r=w(e("bignumber.js")),s=w(e("loglevel")),o=e("@sentry/browser"),i=e("@metamask/transaction-controller"),c=e("@metamask/utils"),u=e("../../../shared/constants/network"),l=e("../../store/actions"),d=e("../../helpers/constants/routes"),p=e("../../pages/swaps/swaps.util"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/modules/selectors/networks"),f=e("../../selectors"),g=e("../../../shared/modules/selectors"),h=e("../../../shared/constants/metametrics"),E=e("../../../shared/constants/swaps"),S=e("../../../shared/constants/transaction"),y=e("../metamask/metamask"),A=e("../../../shared/constants/app"),_=e("../../../shared/lib/transactions-controller-utils"),v=e("../../../shared/constants/common"),I=e("../../../shared/modules/Numeric"),R=e("../../../shared/lib/swaps-utils");function w(e){return e&&e.__esModule?e:{default:e}}const N=(0,c.createProjectLogger)("swaps"),O=n.GAS_PRICES_LOADING_STATES={INITIAL:"INITIAL",LOADING:"LOADING",FAILED:"FAILED",COMPLETED:"COMPLETED"},C={aggregatorMetadata:null,approveTxId:null,tradeTxId:null,balanceError:!1,fetchingQuotes:!1,fromToken:null,fromTokenInputValue:"",fromTokenError:null,isFeatureFlagLoaded:!1,maxSlippage:E.Slippage.default,quotesFetchStartTime:null,reviewSwapClickedTimestamp:null,topAssets:{},toToken:null,customGas:{price:null,limit:null,loading:O.INITIAL,priceEstimates:{},fallBackPrice:null},currentSmartTransactionsError:"",swapsSTXLoading:!1,transactionSettingsOpened:!1,latestAddedTokenTo:""},k=n.swapsSlice=(0,a.createSlice)({name:"swaps",initialState:C,reducers:{clearSwapsState:()=>C,navigatedBackToBuildQuote:e=>{e.approveTxId=null,e.tradeTxId=null,e.balanceError=!1,e.fetchingQuotes=!1,e.customGas.limit=null,e.customGas.price=null},retriedGetQuotes:e=>{e.approveTxId=null,e.balanceError=!1,e.fetchingQuotes=!1},setAggregatorMetadata:(e,t)=>{e.aggregatorMetadata=t.payload},setBalanceError:(e,t)=>{e.balanceError=t.payload},setFetchingQuotes:(e,t)=>{e.fetchingQuotes=t.payload},setLatestAddedTokenTo:(e,t)=>{e.latestAddedTokenTo=t.payload},setFromToken:(e,t)=>{e.fromToken=t.payload},setFromTokenInputValue:(e,t)=>{e.fromTokenInputValue=t.payload},setFromTokenError:(e,t)=>{e.fromTokenError=t.payload},setIsFeatureFlagLoaded:(e,t)=>{e.isFeatureFlagLoaded=t.payload},setMaxSlippage:(e,t)=>{e.maxSlippage=t.payload},setQuotesFetchStartTime:(e,t)=>{e.quotesFetchStartTime=t.payload},setReviewSwapClickedTimestamp:(e,t)=>{e.reviewSwapClickedTimestamp=t.payload},setTopAssets:(e,t)=>{e.topAssets=t.payload},setToToken:(e,t)=>{e.toToken=t.payload},swapCustomGasModalClosed:e=>{e.customGas.price=null,e.customGas.limit=null},swapCustomGasModalPriceEdited:(e,t)=>{e.customGas.price=t.payload},swapCustomGasModalLimitEdited:(e,t)=>{e.customGas.limit=t.payload},swapGasPriceEstimatesFetchStarted:e=>{e.customGas.loading=O.LOADING},swapGasPriceEstimatesFetchFailed:e=>{e.customGas.loading=O.FAILED},swapGasPriceEstimatesFetchCompleted:(e,t)=>{e.customGas.priceEstimates=t.payload.priceEstimates,e.customGas.loading=O.COMPLETED},retrievedFallbackSwapsGasPrice:(e,t)=>{e.customGas.fallBackPrice=t.payload},setCurrentSmartTransactionsError:(e,t)=>{const n=Object.values(p.StxErrorTypes).includes(t.payload)||t.payload===undefined?t.payload:p.StxErrorTypes.unavailable;e.currentSmartTransactionsError=n},setSwapsSTXSubmitLoading:(e,t)=>{e.swapsSTXLoading=t.payload||!1},setTransactionSettingsOpened:(e,t)=>{e.transactionSettingsOpened=Boolean(t.payload)}}}),{actions:P,reducer:D}=k;n.default=D;n.getAggregatorMetadata=e=>e.swaps.aggregatorMetadata;const b=e=>e.swaps.balanceError;n.getBalanceError=b;const M=e=>e.swaps.fromToken;n.getFromToken=M;n.getFromTokenError=e=>e.swaps.fromTokenError;n.getFromTokenInputValue=e=>e.swaps.fromTokenInputValue;n.getIsFeatureFlagLoaded=e=>e.swaps.isFeatureFlagLoaded;n.getSwapsSTXLoading=e=>e.swaps.swapsSTXLoading;n.getMaxSlippage=e=>e.swaps.maxSlippage;n.getTopAssets=e=>e.swaps.topAssets;const F=e=>e.swaps.toToken;n.getToToken=F;n.getFetchingQuotes=e=>e.swaps.fetchingQuotes;const x=e=>e.swaps.latestAddedTokenTo;n.getLatestAddedTokenTo=x;n.getQuotesFetchStartTime=e=>e.swaps.quotesFetchStartTime;n.getReviewSwapClickedTimestamp=e=>e.swaps.reviewSwapClickedTimestamp;const L=e=>e.swaps.customGas.price;n.getSwapsCustomizationModalPrice=L;n.getSwapsCustomizationModalLimit=e=>e.swaps.customGas.limit;n.swapGasPriceEstimateIsLoading=e=>e.swaps.customGas.loading===O.LOADING;n.swapGasEstimateLoadingHasFailed=e=>e.swaps.customGas.loading===O.INITIAL;const U=e=>e.swaps.customGas.priceEstimates;n.getSwapGasPriceEstimateData=U;const G=e=>e.swaps.customGas.fallBackPrice;n.getSwapsFallbackGasPrice=G;const B=e=>e.swaps.currentSmartTransactionsError;n.getCurrentSmartTransactionsError=B;n.getTransactionSettingsOpened=e=>e.swaps.transactionSettingsOpened;const H=e=>e.metamask.swapsState;n.getSwapsFeatureIsLive=e=>e.metamask.swapsState.swapsFeatureIsLive;n.getSmartTransactionsError=e=>e.appState.smartTransactionsError;n.getSmartTransactionsErrorMessageDismissed=e=>e.appState.smartTransactionsErrorMessageDismissed;const W=e=>{const t=(0,g.getSmartTransactionsEnabled)(e),n=B(e);return t&&!n};n.getCurrentSmartTransactionsEnabled=W;n.getSwapsQuoteRefreshTime=e=>e.metamask.swapsState.swapsQuoteRefreshTime;n.getSwapsQuotePrefetchingRefreshTime=e=>e.metamask.swapsState.swapsQuotePrefetchingRefreshTime;n.getBackgroundSwapRouteState=e=>e.metamask.swapsState.routeState;const j=e=>e.metamask.swapsState.customMaxGas;n.getCustomSwapsGas=j;const $=e=>e.metamask.swapsState.customGasPrice;n.getCustomSwapsGasPrice=$;n.getCustomMaxFeePerGas=e=>e.metamask.swapsState.customMaxFeePerGas;n.getCustomMaxPriorityFeePerGas=e=>e.metamask.swapsState.customMaxPriorityFeePerGas;n.getSwapsUserFeeLevel=e=>e.metamask.swapsState.swapsUserFeeLevel;const K=e=>e.metamask.swapsState.fetchParams;n.getFetchParams=K;const V=e=>e.metamask.swapsState.quotes;n.getQuotes=V;n.getQuotesLastFetched=e=>e.metamask.swapsState.quotesLastFetched;const q=e=>{const{selectedAggId:t,quotes:n}=H(e);return n[t]};n.getSelectedQuote=q;n.getSwapsErrorKey=e=>{var t;return null===(t=H(e))||void 0===t?void 0:t.errorKey};n.getShowQuoteLoadingScreen=e=>e.swaps.showQuoteLoadingScreen;const Q=e=>e.metamask.swapsState.tokens;n.getSwapsTokens=Q;n.getSwapsWelcomeMessageSeenStatus=e=>e.metamask.swapsWelcomeMessageHasBeenShown;const Y=e=>{const{topAggId:t,quotes:n}=H(e);return n[t]};n.getTopQuote=Y;n.getApproveTxId=e=>e.metamask.swapsState.approveTxId;n.getTradeTxId=e=>e.metamask.swapsState.tradeTxId;const X=e=>q(e)||Y(e);n.getUsedQuote=X;n.getDestinationTokenInfo=e=>{var t;return null===(t=K(e))||void 0===t||null===(t=t.metaData)||void 0===t?void 0:t.destinationTokenInfo};const z=e=>$(e)||G(e);n.getUsedSwapsGasPrice=z;const Z=e=>{var t;const{approvalNeeded:n}=q(e)||Y(e)||{};if(!n)return null;const a=(null===(t=H(e))||void 0===t?void 0:t.customApproveTxData)||n.data,r=z(e);return{...n,gasPrice:r,data:a}};n.getApproveTxParams=Z;const J=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t?void 0:t[(0,T.getCurrentChainId)(e)]};n.getCurrentSmartTransactions=J;n.getPendingSmartTransactions=e=>{const t=J(e);return t&&0!==t.length?t.filter((e=>e.status===S.SmartTransactionStatus.pending)):[]};const ee=e=>{const t=X(e);var n;return null!=t&&t.isGasIncludedTrade?{approvalTxFees:t.approvalTxFees,tradeTxFees:t.tradeTxFees}:null===(n=e.metamask.smartTransactionsState)||void 0===n?void 0:n.fees};n.getSmartTransactionFees=ee;n.getSmartTransactionEstimatedGas=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.estimatedGas};const te=e=>{const{swapsQuoteRefreshTime:t,swapsQuotePrefetchingRefreshTime:n,swapsStxGetTransactionsRefreshTime:a,swapsStxBatchStatusRefreshTime:r,swapsStxStatusDeadline:s,swapsStxMaxFeeMultiplier:o}=e.metamask.swapsState;return{quoteRefreshTime:t,quotePrefetchingRefreshTime:n,stxGetTransactionsRefreshTime:a,stxBatchStatusRefreshTime:r,stxStatusDeadline:s,stxMaxFeeMultiplier:o}};n.getSwapsNetworkConfig=te;const{clearSwapsState:ne,navigatedBackToBuildQuote:ae,retriedGetQuotes:re,swapGasPriceEstimatesFetchCompleted:se,swapGasPriceEstimatesFetchStarted:oe,swapGasPriceEstimatesFetchFailed:ie,setAggregatorMetadata:ce,setBalanceError:ue,setFetchingQuotes:le,setLatestAddedTokenTo:de,setFromToken:pe,setFromTokenError:me,setFromTokenInputValue:Te,setIsFeatureFlagLoaded:fe,setMaxSlippage:ge,setQuotesFetchStartTime:he,setReviewSwapClickedTimestamp:Ee,setTopAssets:Se,setToToken:ye,swapCustomGasModalPriceEdited:Ae,swapCustomGasModalLimitEdited:_e,retrievedFallbackSwapsGasPrice:ve,swapCustomGasModalClosed:Ie,setCurrentSmartTransactionsError:Re,setSwapsSTXSubmitLoading:we,setTransactionSettingsOpened:Ne}=P;n.setTransactionSettingsOpened=Ne,n.swapCustomGasModalClosed=Ie,n.swapCustomGasModalLimitEdited=_e,n.swapCustomGasModalPriceEdited=Ae,n.setSwapToToken=ye,n.setTopAssets=Se,n.setReviewSwapClickedTimestamp=Ee,n.setSwapQuotesFetchStartTime=he,n.setMaxSlippage=ge,n.setIsFeatureFlagLoaded=fe,n.setFromTokenInputValue=Te,n.setFromTokenError=me,n.setSwapsFromToken=pe,n.setLatestAddedTokenTo=de,n.setFetchingQuotes=le,n.setBalanceError=ue,n.setAggregatorMetadata=ce,n.clearSwapsState=ne;n.navigateBackToPrepareSwap=e=>async t=>{await t((0,l.setBackgroundSwapRouteState)("")),t(ae()),e.push(d.PREPARE_SWAP_ROUTE)};n.prepareForRetryGetQuotes=()=>async e=>{await e((0,l.resetSwapsPostFetchState)()),e(re())};n.prepareToLeaveSwaps=()=>async e=>{e(ne()),await e((0,l.resetBackgroundSwapsState)())};n.swapsQuoteSelected=e=>t=>{t(_e(null)),t((0,l.setSelectedQuoteAggId)(e)),t((0,l.setSwapsTxGasLimit)(""))};const Oe=()=>async e=>{const t=await e(Ce());null!=t&&t.fast&&e((0,l.setSwapsTxGasPrice)((0,m.decGWEIToHexWEI)(t.fast)))};n.fetchAndSetSwapsGasPriceInfo=Oe;n.fetchSwapsLivenessAndFeatureFlags=()=>async(e,t)=>{let n={swapsFeatureIsLive:!1};const a=t(),r=(0,T.getCurrentChainId)(a);try{const t=await(0,p.fetchSwapsFeatureFlags)();if(await e((0,l.setSwapsFeatureFlags)(t)),E.ALLOWED_SMART_TRANSACTIONS_CHAIN_IDS.includes(r)){var o;await e(Re(undefined)),await e((0,l.fetchSmartTransactionsLiveness)());((e,t)=>{if(!((null==t?void 0:t.length)<=0))for(const n of t)if(S.IN_PROGRESS_TRANSACTION_STATUSES.includes(n.status)){e(Re(p.StxErrorTypes.regularTxPending));break}})(e,await(0,l.getTransactions)({searchCriteria:{from:null===(o=(0,f.getSelectedInternalAccount)(a))||void 0===o?void 0:o.address}}))}n=(0,p.getSwapsLivenessForNetwork)(r,t)}catch(e){s.default.error("Failed to fetch Swaps feature flags and Swaps liveness, defaulting to false.",e)}return await e((0,l.setSwapsLiveness)(n)),e(fe(!0)),n};n.fetchQuotesAndSetQuoteState=(e,t,n,a,o)=>async(i,c)=>{var u,m,T;const S=c(),A=(0,f.getSelectedNetwork)(S);let v={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();v=(0,p.getSwapsLivenessForNetwork)(A.configuration.chainId,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await i((0,l.setSwapsLiveness)(v)),!v.swapsFeatureIsLive)return void await e.push(d.SWAPS_MAINTENANCE_ROUTE);const I=K(S),R=(0,f.getSelectedAccount)(S),w=b(S),N=(0,f.getSwapsDefaultToken)(S),O=(null==I||null===(u=I.metaData)||void 0===u||null===(u=u.sourceTokenInfo)||void 0===u?void 0:u.symbol)===N.symbol?N:null==I||null===(m=I.metaData)||void 0===m?void 0:m.sourceTokenInfo,C=M(S)||O||{},k=F(S)||(null==I||null===(T=I.metaData)||void 0===T?void 0:T.destinationTokenInfo)||{},{address:P,symbol:D,decimals:L,iconUrl:U,balance:G}=C,{address:B,symbol:H,decimals:j,iconUrl:$}=k;o||(await i((0,l.setBackgroundSwapRouteState)("loading")),e.push(d.LOADING_QUOTES_ROUTE)),i(le(!0));const V=(0,f.getTokenExchangeRates)(S);if(!B||H===N.symbol||V[B]!==undefined||(q=B,Y=(0,y.getTokens)(S),Array.isArray(Y)&&Y.find((e=>e.address.toLowerCase()===q.toLowerCase())))){x(S)!==B&&await i(de(""))}else await i((0,l.addToken)({address:B,symbol:H,decimals:j,image:$,networkClientId:A.clientId},!0)),await i(de(B));var q,Y;P&&D!==N.symbol&&!V[P]&&G&&new r.default(G,16).gt(0)&&i((0,l.addToken)({address:P,symbol:D,decimals:L,image:U,networkClientId:A.clientId},!0));const X=Q(S),z=(null==X?void 0:X.find((({address:e})=>e===P)))||C,Z=(null==X?void 0:X.find((({address:e})=>e===B)))||k;i(pe(C));const J=(0,f.isHardwareWallet)(S),ee=(0,f.getHardwareWalletType)(S),te=(0,f.checkNetworkAndAccountSupports1559)(S),ne=(0,g.getSmartTransactionsEnabled)(S),ae=W(S);a({event:h.MetaMetricsEventName.QuotesRequested,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:D,token_from_amount:String(t),token_to:H,request_type:w?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,is_hardware_wallet:J,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:ae,stx_user_opt_in:(0,g.getSmartTransactionsOptInStatusForMetrics)(S),anonymizedData:!0}});try{var re;const e=Date.now();i(he(e));const r=i((0,l.fetchAndSetQuotes)({slippage:n,sourceToken:P,destinationToken:B,value:t,fromAddress:R.address,balanceError:w,sourceDecimals:L,enableGasIncludedQuotes:ae&&(0,g.getSmartTransactionsPreferenceEnabled)(S)},{sourceTokenInfo:z,destinationTokenInfo:Z,accountBalance:R.balance,networkClientId:A.clientId})),s=te?null:i(Oe()),[[o,c]]=await Promise.all([r,s]);if(0===(null===(re=Object.values(o))||void 0===re?void 0:re.length))a({event:"No Quotes Available",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:D,token_from_amount:String(t),token_to:H,request_type:w?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,is_hardware_wallet:J,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:ae,stx_user_opt_in:(0,g.getSmartTransactionsOptInStatusForMetrics)(S)}}),i((0,l.setSwapsErrorKey)(E.QUOTES_NOT_AVAILABLE_ERROR));else{var se;const r=o[c],s=(0,_.calcTokenAmount)(r.destinationAmount,r.decimals||18).toString(10);a({event:h.MetaMetricsEventName.QuotesReceived,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:D,token_from_amount:String(t),token_to:H,token_to_amount:s,request_type:w?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,response_time:Date.now()-e,best_quote_source:r.aggregator,available_quotes:null===(se=Object.values(o))||void 0===se?void 0:se.length,is_hardware_wallet:J,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:ae,stx_user_opt_in:(0,g.getSmartTransactionsOptInStatusForMetrics)(S),gas_included:r.isGasIncludedTrade,anonymizedData:!0}}),i((0,l.setInitialGasEstimate)(c))}}catch(e){if(e.message===E.SWAPS_FETCH_ORDER_CONFLICT)return void s.default.debug("Swap fetch order conflict detected; ignoring older request");s.default.error("Error fetching quotes: ",e),i((0,l.setSwapsErrorKey)(E.ERROR_FETCHING_QUOTES))}i(le(!1))};n.signAndSendSwapsSmartTransaction=({unsignedTransaction:e,trackEvent:t,history:n,additionalTrackingParams:a})=>async(r,c)=>{var u,T,S,y,v,I,R,w;r(we(!0));const N=c(),O=K(N),C=(0,f.isHardwareWallet)(N),k=(0,f.getHardwareWalletType)(N),{metaData:P,value:D,slippage:b}=O,{sourceTokenInfo:M={},destinationTokenInfo:F={}}=P,x=X(N),L=te(N),U=(0,f.getSelectedNetwork)(N);r((0,l.setSmartTransactionsRefreshInterval)(null==L?void 0:L.stxBatchStatusRefreshTime));const G=x.trade,B=(0,_.calcTokenAmount)(x.destinationAmount,F.decimals||18).toPrecision(8),H=(0,g.getSmartTransactionsEnabled)(N),j=W(N),$={token_from:M.symbol,token_from_amount:String(D),token_to:F.symbol,token_to_amount:B,slippage:b,custom_slippage:2!==b,best_quote_source:null===(u=Y(N))||void 0===u?void 0:u.aggregator,available_quotes:null===(T=V(N))||void 0===T?void 0:T.length,other_quote_selected:x.aggregator!==(null===(S=Y(N))||void 0===S?void 0:S.aggregator),other_quote_selected_source:x.aggregator===(null===(y=Y(N))||void 0===y?void 0:y.aggregator)?"":x.aggregator,average_savings:null===(v=x.savings)||void 0===v?void 0:v.total,performance_savings:null===(I=x.savings)||void 0===I?void 0:I.performance,fee_savings:null===(R=x.savings)||void 0===R?void 0:R.fee,median_metamask_fee:null===(w=x.savings)||void 0===w?void 0:w.medianMetaMaskFee,is_hardware_wallet:C,hardware_wallet_type:k,stx_enabled:H,current_stx_enabled:j,stx_user_opt_in:(0,g.getSmartTransactionsOptInStatusForMetrics)(N),gas_included:x.isGasIncludedTrade,...a};if(t({event:"STX Swap Started",category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:$}),!(0,p.isContractAddressValid)(G.to,U.configuration.chainId))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:$.token_from,token_to:$.token_to,contract_address:G.to}}),await r((0,l.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void n.push(d.SWAPS_ERROR_ROUTE);const q=Z(N);let Q,z;try{var J;let t;if(q&&(z={...q,value:"0x0"}),t=x.isGasIncludedTrade?ee(N):await r(ke({unsignedTransaction:e,approveTxParams:z,fallbackOnNotEnoughFunds:!0})),!t)return s.default.error('"fetchSwapsSmartTransactionFees" failed'),r(we(!1)),void r(Re(p.StxErrorTypes.unavailable));var ne;if(q)z.gas=`0x${(0,m.decimalToHex)((null===(ne=t.approvalTxFees)||void 0===ne?void 0:ne.gasLimit)||0)}`,z.chainId=U.configuration.chainId,Q=await r((0,l.signAndSendSmartTransaction)({unsignedTransaction:z,smartTransactionFees:t.approvalTxFees}));e.gas=`0x${(0,m.decimalToHex)((null===(J=t.tradeTxFees)||void 0===J?void 0:J.gasLimit)||0)}`,e.chainId=U.configuration.chainId;const a=await r((0,l.signAndSendSmartTransaction)({unsignedTransaction:e,smartTransactionFees:t.tradeTxFees})),o=F.address,c=F.decimals,u=F.symbol,T=M.symbol;await r((0,l.updateSmartTransaction)(a,{origin:A.ORIGIN_METAMASK,destinationTokenAddress:o,destinationTokenDecimals:c,destinationTokenSymbol:u,sourceTokenSymbol:T,swapMetaData:$,swapTokenValue:D,type:i.TransactionType.swap})),Q&&await r((0,l.updateSmartTransaction)(Q,{origin:A.ORIGIN_METAMASK,type:i.TransactionType.swapApproval,sourceTokenSymbol:T})),n.push(d.SMART_TRANSACTION_STATUS_ROUTE),r(we(!1))}catch(e){console.log("signAndSendSwapsSmartTransaction error",e),r(we(!1));const{swaps:{isFeatureFlagLoaded:t}}=c();if(e.message.startsWith("Fetch error:")&&t){const t=(0,p.parseSmartTransactionsError)(e.message);r(Re(null==t?void 0:t.error))}}};function Ce(){return async(e,t)=>{const n=t(),a=(0,T.getCurrentChainId)(n);let r;e(oe());try{r=await(0,p.fetchSwapsGasPrices)(a)}catch(t){var o;if(s.default.warn("Fetching swaps gas prices failed:",t),null===(o=t.message)||void 0===o||!o.match(/NetworkError|Fetch failed with status:/u))throw t;e(ie());try{const t=await global.ethQuery.gasPrice(),n=(0,m.hexWEIToDecGWEI)(t.toString(10));return e(ve(n)),null}catch(e){return console.error("Failed to retrieve fallback gas price: ",e),null}}return e(se({priceEstimates:r})),r}}function ke({unsignedTransaction:e,approveTxParams:t,fallbackOnNotEnoughFunds:n=!1}){return async(a,r)=>{const{swaps:{isFeatureFlagLoaded:s}}=r();try{return await a((0,l.fetchSmartTransactionFees)(e,t))}catch(e){if(e.message.startsWith("Fetch error:")&&s){const t=(0,p.parseSmartTransactionsError)(e.message);(n||(null==t?void 0:t.error)!==p.StxErrorTypes.notEnoughFunds)&&a(Re(null==t?void 0:t.error))}}return null}}n.signAndSendTransactions=(e,t,n)=>async(a,c)=>{var S,A,v,I,w,O,C,k,P,D,b;const M=c(),F=(0,T.getCurrentChainId)(M),x=(0,f.isHardwareWallet)(M),L=(0,f.checkNetworkAndAccountSupports1559)(M);let G={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();G=(0,p.getSwapsLivenessForNetwork)(F,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await a((0,l.setSwapsLiveness)(G)),!G.swapsFeatureIsLive)return void await e.push(d.SWAPS_MAINTENANCE_ROUTE);const B=j(M),H=K(M),{metaData:$,value:q,slippage:Q}=H,{sourceTokenInfo:J={},destinationTokenInfo:ee={}}=$;await a((0,l.setBackgroundSwapRouteState)("awaiting")),await a((0,l.stopPollingForQuotes)()),x||e.push(d.AWAITING_SWAP_ROUTE);const{fast:te}=U(M),ne=X(M),ae=ne.trade,re=Z(M);let se;if(L){const e=(0,y.getGasFeeEstimates)(M),{estimatedBaseFee:t="0"}=e;se=await(0,p.getSwap1559GasFeeEstimates)(ne.trade,re,t,F),N("Received 1559 gas fee estimates",se)}const oe=null===(S=se)||void 0===S?void 0:S.tradeGasFeeEstimates,ie=null===(A=se)||void 0===A?void 0:A.approveGasFeeEstimates,ce=new r.default((null==ne?void 0:ne.gasEstimate)||0,16).round(0).toString(16),ue=(0,R.calculateMaxGasLimit)(null==ne?void 0:ne.gasEstimate,null==ne?void 0:ne.gasMultiplier,null==ne?void 0:ne.maxGas,B),le=z(M);ae.gas=ue,L?(ae.maxFeePerGas=null==oe?void 0:oe.maxFeePerGas,ae.maxPriorityFeePerGas=null==oe?void 0:oe.maxPriorityFeePerGas,delete ae.gasPrice):ae.gasPrice=le;const de=(0,f.getUSDConversionRate)(M),pe=(0,_.calcTokenAmount)(ne.destinationAmount,ee.decimals||18).toPrecision(8),me=(null==ne?void 0:ne.gasEstimateWithRefund)||`0x${(0,m.decimalToHex)((null==ne?void 0:ne.averageGas)||0)}`,Te=(0,_.calcGasTotal)(me,L?null==oe?void 0:oe.baseAndPriorityFeePerGas:le),fe=null===(v=ne.approvalNeeded)||void 0===v?void 0:v.gas,ge=fe?(0,_.calcGasTotal)(fe,L?null==ie?void 0:ie.baseAndPriorityFeePerGas:le):"0x0",he=(0,m.getValueFromWeiHex)({value:(0,m.addHexes)(Te,ge),toCurrency:"usd",conversionRate:de,numberOfDecimals:6}),Ee=(0,g.getSmartTransactionsEnabled)(M),Se=W(M),ye={token_from:J.symbol,token_from_amount:String(q),token_to:ee.symbol,token_to_amount:pe,slippage:Q,custom_slippage:2!==Q,best_quote_source:null===(I=Y(M))||void 0===I?void 0:I.aggregator,available_quotes:null===(w=V(M))||void 0===w?void 0:w.length,other_quote_selected:ne.aggregator!==(null===(O=Y(M))||void 0===O?void 0:O.aggregator),other_quote_selected_source:ne.aggregator===(null===(C=Y(M))||void 0===C?void 0:C.aggregator)?"":ne.aggregator,gas_fees:he,estimated_gas:new r.default(ce,16).toString(10),suggested_gas_price:te,used_gas_price:(0,m.hexWEIToDecGWEI)(le),average_savings:null===(k=ne.savings)||void 0===k?void 0:k.total,performance_savings:null===(P=ne.savings)||void 0===P?void 0:P.performance,fee_savings:null===(D=ne.savings)||void 0===D?void 0:D.fee,median_metamask_fee:null===(b=ne.savings)||void 0===b?void 0:b.medianMetaMaskFee,is_hardware_wallet:x,hardware_wallet_type:(0,f.getHardwareWalletType)(M),stx_enabled:Ee,current_stx_enabled:Se,stx_user_opt_in:(0,g.getSmartTransactionsOptInStatusForMetrics)(M),...n};if(L&&(ye.max_fee_per_gas=null==oe?void 0:oe.maxFeePerGas,ye.max_priority_fee_per_gas=null==oe?void 0:oe.maxPriorityFeePerGas,ye.base_and_priority_fee_per_gas=null==oe?void 0:oe.baseAndPriorityFeePerGas),t({event:h.MetaMetricsEventName.SwapStarted,category:h.MetaMetricsEventCategory.Swaps,sensitiveProperties:ye}),!(0,p.isContractAddressValid)(ae.to,F))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:ye.token_from,token_to:ye.token_to,contract_address:ae.to}}),await a((0,l.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void e.push(d.SWAPS_ERROR_ROUTE);let Ae;if(x&&e.push(d.AWAITING_SIGNATURES_ROUTE),re){L&&(re.maxFeePerGas=null==ie?void 0:ie.maxFeePerGas,re.maxPriorityFeePerGas=null==ie?void 0:ie.maxPriorityFeePerGas,delete re.gasPrice),N("Creating approve transaction",re);try{if(Ae=await(0,l.addTransactionAndWaitForPublish)({...re,amount:"0x0"},{requireApproval:!1,type:i.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:i.TransactionType.swapApproval,sourceTokenSymbol:J.symbol}}}),[u.CHAIN_IDS.LINEA_MAINNET,u.CHAIN_IDS.LINEA_GOERLI,u.CHAIN_IDS.LINEA_SEPOLIA].includes(F)){N("Delaying submitting trade tx to make Linea confirmation more likely");const e=new Promise((e=>setTimeout(e,5e3)));await e}}catch(t){return N("Approve transaction failed",t),await a((0,l.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void e.push(d.SWAPS_ERROR_ROUTE)}}N("Creating trade transaction",ae);try{var _e,ve;await(0,l.addTransactionAndWaitForPublish)(ae,{requireApproval:!1,type:i.TransactionType.swap,swaps:{hasApproveTx:Boolean(re),meta:{estimatedBaseFee:null===(_e=se)||void 0===_e?void 0:_e.estimatedBaseFee,sourceTokenSymbol:J.symbol,destinationTokenSymbol:ee.symbol,type:i.TransactionType.swap,destinationTokenDecimals:ee.decimals,destinationTokenAddress:ee.address,swapMetaData:ye,swapTokenValue:q,approvalTxId:null===(ve=Ae)||void 0===ve?void 0:ve.id}}})}catch(t){const n=t.message.includes("EthAppPleaseEnableContractData")?E.CONTRACT_DATA_DISABLED_ERROR:E.SWAP_FAILED_ERROR;return N("Trade transaction failed",t),await a((0,l.setSwapsErrorKey)(n)),void e.push(d.SWAPS_ERROR_ROUTE)}x&&e.push(d.AWAITING_SWAP_ROUTE),await(0,l.forceUpdateMetamaskState)(a)}}}},{package:"$root$",file:"ui/ducks/swaps/swaps.js"}],[612,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownURTypeError=void 0;class a extends Error{constructor(e){super(e)}}n.UnknownURTypeError=a}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[6121,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SUPPORT_REQUEST_LINK=n.SECONDARY=n.PRIMARY=n.PASSWORD_MIN_LENGTH=n.OUTDATED_BROWSER_VERSIONS=n.METAMETRICS_SETTINGS_LINK=n.FIXED_PRERENDER_BROWSER_VERSIONS=n.CONTRACT_ADDRESS_LINK=n.BROKEN_PRERENDER_BROWSER_VERSIONS=void 0;n.PRIMARY="PRIMARY",n.SECONDARY="SECONDARY",n.METAMETRICS_SETTINGS_LINK="https://support.metamask.io/privacy-and-security/how-to-manage-your-metametrics-settings",n.SUPPORT_REQUEST_LINK="https://support.metamask.io",n.CONTRACT_ADDRESS_LINK="https://support.metamask.io/managing-my-tokens/moving-your-tokens/why-am-i-being-warned-about-sending-tokens-to-a-contract/",n.PASSWORD_MIN_LENGTH=8,n.OUTDATED_BROWSER_VERSIONS={chrome:"<109",edge:"<109",firefox:"<102",opera:"<95"},n.BROKEN_PRERENDER_BROWSER_VERSIONS={chrome:">=113",edge:">=113"},n.FIXED_PRERENDER_BROWSER_VERSIONS={windows:{chrome:">=120",edge:">=120"},macos:{chrome:">=120",edge:">=120"},chrome:">=121",edge:">=121"}}}},{package:"$root$",file:"ui/helpers/constants/common.ts"}],[6123,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypographyVariant=n.TextVariant=n.TextTransform=n.TextColor=n.TextAlign=n.TEXT_TRANSFORM=n.TEXT_ALIGN=n.Size=n.Severity=n.SEVERITIES=n.OverflowWrap=n.OVERFLOW_WRAP=n.JustifyContent=n.IconColor=n.FontWeight=n.FontStyle=n.FlexWrap=n.FlexDirection=n.FRACTIONS=n.FONT_WEIGHT=n.FONT_STYLE=n.FLEX_WRAP=n.FLEX_DIRECTION=n.Display=n.DISPLAY=n.Color=n.BorderStyle=n.BorderRadius=n.BorderColor=n.BlockSize=n.BackgroundColor=n.BREAKPOINTS=n.BLOCK_SIZES=n.AlignItems=void 0;n.Color=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.borderDefault="border-default",e.borderMuted="border-muted",e.overlayDefault="overlay-default",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.errorInverse="error-inverse",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.warningInverse="warning-inverse",e.successDefault="success-default",e.successMuted="success-muted",e.successInverse="success-inverse",e.infoDefault="info-default",e.infoMuted="info-muted",e.infoInverse="info-inverse",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.transparent="transparent",e.localhost="localhost",e.inherit="inherit",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e}({}),n.BackgroundColor=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.backgroundHover="background-hover",e.backgroundPressed="background-pressed",e.overlayDefault="overlay-default",e.overlayAlternative="overlay-alternative",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e}({}),n.BorderColor=function(e){return e.borderDefault="border-default",e.borderMuted="border-muted",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e.backgroundDefault="background-default",e}({}),n.TextColor=function(e){return e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.IconColor=function(e){return e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.TypographyVariant=function(e){return e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.H7="h7",e.H8="h8",e.H9="h9",e.paragraph="p",e.span="span",e}({}),n.TextVariant=function(e){return e.displayMd="display-md",e.headingLg="heading-lg",e.headingMd="heading-md",e.headingSm="heading-sm",e.bodyLgMedium="body-lg-medium",e.bodyMd="body-md",e.bodyMdMedium="body-md-medium",e.bodyMdBold="body-md-bold",e.bodySm="body-sm",e.bodySmMedium="body-sm-medium",e.bodySmBold="body-sm-bold",e.bodyXs="body-xs",e.bodyXsMedium="body-xs-medium",e.inherit="inherit",e}({}),n.Size=function(e){return e.XXS="xxs",e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.inherit="inherit",e.auto="auto",e}({}),n.BorderStyle=function(e){return e.dashed="dashed",e.solid="solid",e.dotted="dotted",e.double="double",e.none="none",e}({}),n.BorderRadius=function(e){return e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.none="none",e.pill="pill",e.full="full",e}({}),n.AlignItems=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.baseline="baseline",e.stretch="stretch",e}({}),n.JustifyContent=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.spaceAround="space-around",e.spaceBetween="space-between",e.spaceEvenly="space-evenly",e}({}),n.FlexDirection=function(e){return e.Row="row",e.RowReverse="row-reverse",e.Column="column",e.ColumnReverse="column-reverse",e}({});n.FLEX_DIRECTION={ROW:"row",ROW_REVERSE:"row-reverse",COLUMN:"column",COLUMN_REVERSE:"column-reverse"};n.FlexWrap=function(e){return e.Wrap="wrap",e.WrapReverse="wrap-reverse",e.NoWrap="nowrap",e}({});n.FLEX_WRAP={WRAP:"wrap",WRAP_REVERSE:"wrap-reverse",NO_WRAP:"nowrap"};n.Display=function(e){return e.Block="block",e.Flex="flex",e.Grid="grid",e.InlineBlock="inline-block",e.Inline="inline",e.InlineFlex="inline-flex",e.InlineGrid="inline-grid",e.ListItem="list-item",e.None="none",e}({});n.DISPLAY={BLOCK:"block",FLEX:"flex",GRID:"grid",INLINE_BLOCK:"inline-block",INLINE:"inline",INLINE_FLEX:"inline-flex",INLINE_GRID:"inline-grid",LIST_ITEM:"list-item",NONE:"none"};const a=n.FRACTIONS={HALF:"1/2",ONE_THIRD:"1/3",TWO_THIRDS:"2/3",ONE_FOURTH:"1/4",TWO_FOURTHS:"2/4",THREE_FOURTHS:"3/4",ONE_FIFTH:"1/5",TWO_FIFTHS:"2/5",THREE_FIFTHS:"3/5",FOUR_FIFTHS:"4/5",ONE_SIXTH:"1/6",TWO_SIXTHS:"2/6",THREE_SIXTHS:"3/6",FOUR_SIXTHS:"4/6",FIVE_SIXTHS:"5/6",ONE_TWELFTH:"1/12",TWO_TWELFTHS:"2/12",THREE_TWELFTHS:"3/12",FOUR_TWELFTHS:"4/12",FIVE_TWELFTHS:"5/12",SIX_TWELFTHS:"6/12",SEVEN_TWELFTHS:"7/12",EIGHT_TWELFTHS:"8/12",NINE_TWELFTHS:"9/12",TEN_TWELFTHS:"10/12",ELEVEN_TWELFTHS:"11/12"};n.BlockSize=function(e){return e.Zero="0",e.Half="1/2",e.OneThird="1/3",e.TwoThirds="2/3",e.OneFourth="1/4",e.TwoFourths="2/4",e.ThreeFourths="3/4",e.OneFifth="1/5",e.TwoFifths="2/5",e.ThreeFifths="3/5",e.FourFifths="4/5",e.OneSixth="1/6",e.TwoSixths="2/6",e.ThreeSixths="3/6",e.FourSixths="4/6",e.FiveSixths="5/6",e.OneTwelfth="1/12",e.TwoTwelfths="2/12",e.ThreeTwelfths="3/12",e.FourTwelfths="4/12",e.FiveTwelfths="5/12",e.SixTwelfths="6/12",e.SevenTwelfths="7/12",e.EightTwelfths="8/12",e.NineTwelfths="9/12",e.TenTwelfths="10/12",e.ElevenTwelfths="11/12",e.Screen="screen",e.Max="max",e.Min="min",e.Full="full",e}({});n.BLOCK_SIZES={...a,SCREEN:"screen",MAX:"max",MIN:"min",FULL:"full"};n.TextAlign=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Justify="justify",e.End="end",e.Start="start",e}({});n.TEXT_ALIGN={LEFT:"left",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",END:"end",START:"start"};n.TextTransform=function(e){return e.Uppercase="uppercase",e.Lowercase="lowercase",e.Capitalize="capitalize",e}({});n.TEXT_TRANSFORM={UPPERCASE:"uppercase",LOWERCASE:"lowercase",CAPITALIZE:"capitalize"};n.FontWeight=function(e){return e.Bold="bold",e.Medium="medium",e.Normal="normal",e}({});n.FONT_WEIGHT={BOLD:"bold",MEDIUM:"medium",NORMAL:"normal"};n.OverflowWrap=function(e){return e.BreakWord="break-word",e.Anywhere="anywhere",e.Normal="normal",e}({});n.OVERFLOW_WRAP={BREAK_WORD:"break-word",ANYWHERE:"anywhere",NORMAL:"normal"};n.FontStyle=function(e){return e.Italic="italic",e.Normal="normal",e}({});n.FONT_STYLE={ITALIC:"italic",NORMAL:"normal"};n.Severity=function(e){return e.Danger="danger",e.Warning="warning",e.Info="info",e.Success="success",e}({});n.SEVERITIES={DANGER:"danger",WARNING:"warning",INFO:"info",SUCCESS:"success"},n.BREAKPOINTS=["base","sm","md","lg"]}}},{package:"$root$",file:"ui/helpers/constants/design-system.ts"}],[6124,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY=n.UNSENDABLE_ASSET_ERROR_KEY=n.TRANSACTION_ERROR_KEY=n.IS_SIGNING_OR_SUBMITTING=n.INVALID_ASSET_TYPE=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=n.INSUFFICIENT_FUNDS_ERROR_KEY=n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=n.GAS_PRICE_EXCESSIVE_ERROR_KEY=n.GAS_LIMIT_TOO_LOW_ERROR_KEY=n.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;n.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds",n.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow",n.TRANSACTION_ERROR_KEY="transactionError",n.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning",n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed",n.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive",n.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas",n.INVALID_ASSET_TYPE="invalidAssetType",n.IS_SIGNING_OR_SUBMITTING="isSigningOrSubmitting",n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY="userOpContractDeployError"}}},{package:"$root$",file:"ui/helpers/constants/error-keys.js"}],[6127,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NOTIFICATIONS_EXPIRATION_DELAY=void 0;n.NOTIFICATIONS_EXPIRATION_DELAY=1e4}}},{package:"$root$",file:"ui/helpers/constants/notifications.ts"}],[6129,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UNLOCK_ROUTE=n.SWAPS_ROUTE=n.SWAPS_NOTIFICATION_ROUTE=n.SWAPS_MAINTENANCE_ROUTE=n.SWAPS_ERROR_ROUTE=n.SNAPS_VIEW_ROUTE=n.SNAPS_ROUTE=n.SMART_TRANSACTION_STATUS_ROUTE=n.SIGNATURE_REQUEST_PATH=n.SETTINGS_ROUTE=n.SEND_ROUTE=n.SECURITY_ROUTE=n.REVIEW_PERMISSIONS=n.REVEAL_SEED_ROUTE=n.RESTORE_VAULT_ROUTE=n.PREPARE_SWAP_ROUTE=n.PERMISSIONS=n.PATH_NAME_MAP=n.ONBOARDING_WELCOME_ROUTE=n.ONBOARDING_UNLOCK_ROUTE=n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE=n.ONBOARDING_ROUTE=n.ONBOARDING_REVIEW_SRP_ROUTE=n.ONBOARDING_PRIVACY_SETTINGS_ROUTE=n.ONBOARDING_PIN_EXTENSION_ROUTE=n.ONBOARDING_METAMETRICS=n.ONBOARDING_IMPORT_WITH_SRP_ROUTE=n.ONBOARDING_HELP_US_IMPROVE_ROUTE=n.ONBOARDING_CREATE_PASSWORD_ROUTE=n.ONBOARDING_CONFIRM_SRP_ROUTE=n.ONBOARDING_COMPLETION_ROUTE=n.NOTIFICATIONS_SETTINGS_ROUTE=n.NOTIFICATIONS_ROUTE=n.NEW_ACCOUNT_ROUTE=n.NETWORKS_ROUTE=n.NETWORKS_FORM_ROUTE=n.MMI_ONBOARDING_COMPLETION_ROUTE=n.LOCK_ROUTE=n.LOADING_QUOTES_ROUTE=n.IMPORT_TOKEN_ROUTE=n.IMPORT_TOKENS_ROUTE=n.GENERAL_ROUTE=n.EXPERIMENTAL_ROUTE=n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=n.DEVELOPER_OPTIONS_ROUTE=n.DEFAULT_ROUTE=n.DECRYPT_MESSAGE_REQUEST_PATH=n.CROSS_CHAIN_SWAP_ROUTE=n.CONTACT_VIEW_ROUTE=n.CONTACT_LIST_ROUTE=n.CONTACT_EDIT_ROUTE=n.CONTACT_ADD_ROUTE=n.CONNECT_SNAP_UPDATE_ROUTE=n.CONNECT_SNAP_RESULT_ROUTE=n.CONNECT_SNAP_INSTALL_ROUTE=n.CONNECT_SNAPS_CONNECT_ROUTE=n.CONNECT_ROUTE=n.CONNECT_HARDWARE_ROUTE=n.CONNECT_CONFIRM_PERMISSIONS_ROUTE=n.CONNECTIONS=n.CONNECTED_ROUTE=n.CONNECTED_ACCOUNTS_ROUTE=n.CONFIRM_TRANSFER_FROM_PATH=n.CONFIRM_TRANSACTION_ROUTE=n.CONFIRM_TOKEN_METHOD_PATH=n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH=n.CONFIRM_SEND_TOKEN_PATH=n.CONFIRM_SEND_ETHER_PATH=n.CONFIRM_SAFE_TRANSFER_FROM_PATH=n.CONFIRM_INCREASE_ALLOWANCE_PATH=n.CONFIRM_IMPORT_TOKEN_ROUTE=n.CONFIRM_DEPLOY_CONTRACT_PATH=n.CONFIRM_APPROVE_PATH=n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE=n.CONFIRMATION_V_NEXT_ROUTE=n.AWAITING_SWAP_ROUTE=n.AWAITING_SIGNATURES_ROUTE=n.ASSET_ROUTE=n.ADVANCED_ROUTE=n.ADD_POPULAR_CUSTOM_NETWORK=n.ADD_NETWORK_ROUTE=n.ABOUT_US_ROUTE=void 0;const a=n.PATH_NAME_MAP={};a[n.DEFAULT_ROUTE="/"]="Home";a[n.UNLOCK_ROUTE="/unlock"]="Unlock Page";a[n.LOCK_ROUTE="/lock"]="Lock Page";const r=n.ASSET_ROUTE="/asset";a[`${r}/:asset/:id`]="Asset Page",a[`${r}/image/:asset/:id`]="Nft Image Page";a[n.SETTINGS_ROUTE="/settings"]="Settings Page";a[n.GENERAL_ROUTE="/settings/general"]="General Settings Page";a[n.ADVANCED_ROUTE="/settings/advanced"]="Advanced Settings Page";n.DEVELOPER_OPTIONS_ROUTE="/settings/developer-options";a[n.EXPERIMENTAL_ROUTE="/settings/experimental"]="Experimental Settings Page";a[n.SECURITY_ROUTE="/settings/security"]="Security Settings Page";a[n.ABOUT_US_ROUTE="/settings/about-us"]="About Us Page";a[n.NETWORKS_ROUTE="/settings/networks"]="Network Settings Page";a[n.NETWORKS_FORM_ROUTE="/settings/networks/form"]="Network Settings Page Form";a[n.ADD_NETWORK_ROUTE="/settings/networks/add-network"]="Add Network From Settings Page Form";a[n.ADD_POPULAR_CUSTOM_NETWORK="/settings/networks/add-popular-custom-network"]="Add Network From A List Of Popular Custom Networks";a[n.CONTACT_LIST_ROUTE="/settings/contact-list"]="Contact List Settings Page";a[`${n.CONTACT_EDIT_ROUTE="/settings/contact-list/edit-contact"}/:address`]="Edit Contact Settings Page";a[n.CONTACT_ADD_ROUTE="/settings/contact-list/add-contact"]="Add Contact Settings Page";a[`${n.CONTACT_VIEW_ROUTE="/settings/contact-list/view-contact"}/:address`]="View Contact Settings Page";a[n.REVEAL_SEED_ROUTE="/seed"]="Reveal Secret Recovery Phrase Page";a[n.RESTORE_VAULT_ROUTE="/restore-vault"]="Restore Vault Page";a[n.IMPORT_TOKEN_ROUTE="/import-token"]="Import Token Page";a[n.IMPORT_TOKENS_ROUTE="/import-tokens"]="Import Tokens Page";a[n.CONFIRM_IMPORT_TOKEN_ROUTE="/confirm-import-token"]="Confirm Import Token Page";a[n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE="/confirm-add-suggested-token"]="Confirm Add Suggested Token Page";a[n.NEW_ACCOUNT_ROUTE="/new-account"]="New Account Page";a[n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE="/confirm-add-suggested-nft"]="Confirm Add Suggested NFT Page";a[n.CONNECT_HARDWARE_ROUTE="/new-account/connect"]="Connect Hardware Wallet Page";a[n.SEND_ROUTE="/send"]="Send Page";a[n.CONNECTIONS="/connections"]="Connections";a[n.PERMISSIONS="/permissions"]="Permissions";n.REVIEW_PERMISSIONS="/review-permissions";const s=n.CONNECT_ROUTE="/connect";a[`${s}/:id`]="Connect To Site Confirmation Page";a[`${s}/:id${n.CONNECT_CONFIRM_PERMISSIONS_ROUTE="/confirm-permissions"}`]="Grant Connected Site Permissions Confirmation Page";a[`${s}/:id${n.CONNECT_SNAPS_CONNECT_ROUTE="/snaps-connect"}`]="Snaps Connect Page";a[`${s}/:id${n.CONNECT_SNAP_INSTALL_ROUTE="/snap-install"}`]="Snap Install Page";a[`${s}/:id${n.CONNECT_SNAP_UPDATE_ROUTE="/snap-update"}`]="Snap Update Page";a[`${s}/:id${n.CONNECT_SNAP_RESULT_ROUTE="/snap-install-result"}`]="Snap Install Result Page";a[n.SNAPS_ROUTE="/snaps"]="Snaps List Page";a[`${n.SNAPS_VIEW_ROUTE="/snaps/view"}/:snapId`]="Snap View Page";const o=n.NOTIFICATIONS_ROUTE="/notifications";a[o]="Notifications Page",a[`${o}/:uuid`]="Notification Detail Page";a[n.NOTIFICATIONS_SETTINGS_ROUTE="/notifications/settings"]="Notifications Settings Page";a[n.CONNECTED_ROUTE="/connected"]="Sites Connected To This Account Page";a[n.CONNECTED_ACCOUNTS_ROUTE="/connected/accounts"]="Accounts Connected To This Site Page";const i=n.CONFIRM_TRANSACTION_ROUTE="/confirm-transaction";a[i]="Confirmation Root Page",a[`${i}/:id`]="Confirmation Root Page";const c=n.CONFIRMATION_V_NEXT_ROUTE="/confirmation";a[c]="New Confirmation Page",a[`${c}/:id`]="New Confirmation Page";a[`${i}/:id${n.CONFIRM_SEND_ETHER_PATH="/send-ether"}`]="Confirm Send Ether Transaction Page";a[`${i}/:id${n.CONFIRM_SEND_TOKEN_PATH="/send-token"}`]="Confirm Send Token Transaction Page";a[`${i}/:id${n.CONFIRM_DEPLOY_CONTRACT_PATH="/deploy-contract"}`]="Confirm Deploy Contract Transaction Page";a[`${i}/:id${n.CONFIRM_APPROVE_PATH="/approve"}`]="Confirm Approve Transaction Page";a[`${i}/:id${n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH="/set-approval-for-all"}`]="Confirm Set Approval For All Transaction Page";a[`${i}/:id${n.CONFIRM_TRANSFER_FROM_PATH="/transfer-from"}`]="Confirm Transfer From Transaction Page";a[`${i}/:id${n.CONFIRM_SAFE_TRANSFER_FROM_PATH="/safe-transfer-from"}`]="Confirm Safe Transfer From Transaction Page";a[`${i}/:id${n.CONFIRM_TOKEN_METHOD_PATH="/token-method"}`]="Confirm Token Method Transaction Page";a[`${i}/:id${n.CONFIRM_INCREASE_ALLOWANCE_PATH="/increase-allowance"}`]="Confirm Increase Allowance Transaction Page";a[`${i}/:id${n.SIGNATURE_REQUEST_PATH="/signature-request"}`]="Signature Request Page";a[`${i}/:id${n.DECRYPT_MESSAGE_REQUEST_PATH="/decrypt-message-request"}`]="Decrypt Message Request Page";a[`${i}/:id${n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH="/encryption-public-key-request"}`]="Encryption Public Key Request Page";n.CROSS_CHAIN_SWAP_ROUTE="/cross-chain",n.SWAPS_ROUTE="/swaps";a[n.PREPARE_SWAP_ROUTE="/swaps/prepare-swap-page"]="Prepare Swap Page";a[n.SWAPS_NOTIFICATION_ROUTE="/swaps/notification-page"]="Swaps Notification Page";a[n.LOADING_QUOTES_ROUTE="/swaps/loading-quotes"]="Swaps Loading Quotes Page";n.AWAITING_SIGNATURES_ROUTE="/swaps/awaiting-signatures",n.SMART_TRANSACTION_STATUS_ROUTE="/swaps/smart-transaction-status";a[n.AWAITING_SWAP_ROUTE="/swaps/awaiting-swap"]="Swaps Awaiting Swaps Page";a[n.SWAPS_ERROR_ROUTE="/swaps/swaps-error"]="Swaps Error Page";n.SWAPS_MAINTENANCE_ROUTE="/swaps/maintenance",n.ONBOARDING_ROUTE="/onboarding",n.ONBOARDING_REVIEW_SRP_ROUTE="/onboarding/review-recovery-phrase",n.ONBOARDING_CONFIRM_SRP_ROUTE="/onboarding/confirm-recovery-phrase",n.ONBOARDING_CREATE_PASSWORD_ROUTE="/onboarding/create-password",n.ONBOARDING_COMPLETION_ROUTE="/onboarding/completion",n.MMI_ONBOARDING_COMPLETION_ROUTE="/onboarding/account-completion",n.ONBOARDING_UNLOCK_ROUTE="/onboarding/unlock",n.ONBOARDING_HELP_US_IMPROVE_ROUTE="/onboarding/help-us-improve",n.ONBOARDING_IMPORT_WITH_SRP_ROUTE="/onboarding/import-with-recovery-phrase",n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE="/onboarding/secure-your-wallet",n.ONBOARDING_PRIVACY_SETTINGS_ROUTE="/onboarding/privacy-settings",n.ONBOARDING_PIN_EXTENSION_ROUTE="/onboarding/pin-extension",n.ONBOARDING_WELCOME_ROUTE="/onboarding/welcome",n.ONBOARDING_METAMETRICS="/onboarding/metametrics"}}},{package:"$root$",file:"ui/helpers/constants/routes.ts"}],[613,{"../CryptoHDKey":602,"../RegistryItem":609,"../RegistryType":610,"../lib":620,buffer:3537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoMultiAccounts=void 0;const a=e("../RegistryType"),r=e("../CryptoHDKey"),s=e("../RegistryItem"),o=e("../lib");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t,n,r,s){super(),this.masterFingerprint=e,this.keys=t,this.device=n,this.deviceId=r,this.version=s,this.getRegistryType=()=>a.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[i.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[i.device]=this.device),this.deviceId&&(e[i.deviceId]=this.deviceId),this.version&&(e[i.version]=this.version),new o.DataItem(e)}}}n.CryptoMultiAccounts=c,c.fromDataItem=e=>{const n=e.getData(),a=t.alloc(4),s=n[i.masterFingerprint];s&&a.writeUInt32BE(s,0);const o=n[i.keys].map((e=>r.CryptoHDKey.fromDataItem(e))),u=n[i.device],l=n[i.deviceId],d=n[i.version];return new c(a,o,u,l,d)},c.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[6135,{"@metamask/transaction-controller":2647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_CATEGORY_HASH=n.PRIORITY_STATUS_HASH=n.PENDING_STATUS_HASH=void 0;var a=e("@metamask/transaction-controller");const r=n.PENDING_STATUS_HASH={[a.TransactionStatus.unapproved]:!0,[a.TransactionStatus.approved]:!0,[a.TransactionStatus.submitted]:!0};n.PRIORITY_STATUS_HASH={...r,[a.TransactionStatus.confirmed]:!0},n.TOKEN_CATEGORY_HASH={[a.TransactionType.tokenMethodApprove]:!0,[a.TransactionType.tokenMethodSetApprovalForAll]:!0,[a.TransactionType.tokenMethodTransfer]:!0,[a.TransactionType.tokenMethodTransferFrom]:!0,[a.TransactionType.tokenMethodIncreaseAllowance]:!0}}}},{package:"$root$",file:"ui/helpers/constants/transactions.js"}],[6136,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={ADD_CUSTOM_TOKENS:"https://support.metamask.io/managing-my-tokens/custom-tokens/how-to-display-tokens-in-metamask/",ADD_MISSING_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-missing-accounts-after-restoring-with-secret-recovery-phrase/",BASIC_SAFETY:"https://support.metamask.io/privacy-and-security/basic-safety-and-security-tips-for-metamask/",CUSTOMIZE_NONCE:"https://support.metamask.io/transactions-and-gas/transactions/how-to-customize-a-transaction-nonce/",GAS_FEES:"https://support.metamask.io/transactions-and-gas/gas-fees/",SWAPS_GAS_FEES:"https://support.metamask.io/token-swaps/user-guide-swaps/#gas-fees",HARDWARE_CONNECTION:"https://support.metamask.io/privacy-and-security/hardware-wallet-hub/",IMPORT_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-import-an-account/",IMPORTED_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/what-are-imported-accounts-/",INFURA_BLOCKAGE:"https://support.metamask.io/troubleshooting/why-infura-cannot-serve-certain-areas/",LEDGER_FIREFOX_U2F_GUIDE:"https://support.ledger.com/hc/en-us/articles/10371387758493-MetaMask-Firefox-Ledger-Integration-Issue?support=true",LEGACY_WEB3:"https://support.metamask.io/third-party-platforms-and-dapps/metamask-legacy-web3/",NFT_TOKENS:"https://support.metamask.io/nfts/nft-tokens-in-your-metamask-wallet/",PASSWORD_AND_SRP_ARTICLE:"https://support.metamask.io/getting-started/user-guide-secret-recovery-phrase-password-and-private-keys/",SECRET_RECOVERY_PHRASE:"https://support.metamask.io/privacy-and-security/what-is-a-secret-recovery-phrase-and-how-to-keep-your-crypto-wallet-secure/",NON_CUSTODIAL_WALLET:"https://support.metamask.io/getting-started/metamask-is-a-self-custodial-wallet/",SPEEDUP_CANCEL:"https://support.metamask.io/transactions-and-gas/transactions/how-to-speed-up-or-cancel-a-pending-transaction/",SUPPORT_URL:"https://support.metamask.io",TOKEN_ALLOWANCE_WITH_SPENDING_CAP:"https://support.metamask.io/privacy-and-security/how-to-customize-token-approvals-with-a-spending-cap/",TOKEN_SAFETY_PRACTICES:"https://support.metamask.io/managing-my-tokens/token-safety-practices/",UNKNOWN_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/the-risks-of-connecting-to-an-unknown-network/",USER_GUIDE_CUSTOM_NETWORKS:"https://support.metamask.io/networks-and-sidechains/managing-networks/user-guide-custom-networks-and-sidechains/",USER_GUIDE_DAPPS:"https://support.metamask.io/third-party-platforms-and-dapps/user-guide-dapps/",USER_GUIDE_GAS:"https://support.metamask.io/transactions-and-gas/gas-fees/user-guide-gas/",VERIFY_CUSTOM_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/verifying-custom-network-information/",NETWORK_DEPRECATED:"https://support.metamask.io/networks-and-sidechains/eth-on-testnets/"}}}},{package:"$root$",file:"ui/helpers/constants/zendesk-url.js"}],[614,{"../CryptoKeypath":603,"../RegistryItem":609,"../RegistryType":610,"../lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivationSchema=n.DerivationAlgorithm=n.Curve=void 0;const a=e("../RegistryType"),r=e("../RegistryItem"),s=e("../lib"),o=e("../CryptoKeypath");var i,c,u;!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(i||(i={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(c=n.Curve||(n.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(u=n.DerivationAlgorithm||(n.DerivationAlgorithm={}));class l extends r.RegistryItem{constructor(e,t=c.secp256k1,n=u.slip10){super(),this.keypath=e,this.curve=t,this.algo=n,this.getRegistryType=()=>a.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[i.keyPath]=t,e[i.curve]=this.curve,e[i.algo]=this.algo,new s.DataItem(e)}}}n.KeyDerivationSchema=l,l.fromDataItem=e=>{const t=e.getData(),n=o.CryptoKeypath.fromDataItem(t[i.keyPath]),a=t[i.curve],r=t[i.algo];return new l(n,a,r)},l.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return l.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/DerivationSchema.js"}],[6148,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBuildSpecificAsset=function(e){const t="main";if(!a[t]||!Object.keys(a[t]).includes(e))return console.error(`Cannot find asset "${e}" for build "${t}", returning main build asset.`),a.main[e];return a[t][e]},n.isBeta=function(){return!1},n.isMMI=function(){return!1};const a={main:{foxMeshJson:undefined}}}}},{package:"$root$",file:"ui/helpers/utils/build-types.js"}],[615,{"../RegistryItem":609,"../RegistryType":610,"../lib":620,"./DerivationSchema":614},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivation=void 0;const a=e("../RegistryType"),r=e("../RegistryItem"),s=e("../lib"),o=e("./DerivationSchema");var i;!function(e){e[e.schemas=1]="schemas"}(i||(i={}));class c extends r.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>a.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const e={};return e[i.schemas]=this.schemas.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),new s.DataItem(e)}}}n.KeyDerivation=c,c.fromDataItem=e=>{const t=e.getData()[i.schemas].map((e=>o.KeyDerivationSchema.fromDataItem(e)));return new c(t)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/KeyDerivation.js"}],[6150,{"../../../shared/constants/common":5125,"../../../shared/modules/Numeric":5169,"bignumber.js":3486,"currency-formatter":3675,"currency-formatter/currencies":3674},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(6)),new o.Numeric(e,10)).toString()},n.addFiat=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(2)),new o.Numeric(e,10)).toString()},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e){const{txParams:t,dappSuggestedGasFees:n}=e??{},{gasPrice:a,maxFeePerGas:r,maxPriorityFeePerGas:s}=t||{},{gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c}=n||{},u=!o&&!i&&!c;if(!a&&!r&&!s||u)return!1;const l=a&&a===o,d=[r,s].every((e=>e===o)),p=r&&r===i&&s===c;return Boolean(l||d||p)},n.convertTokenToFiat=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:n,conversionRate:a,contractExchangeRate:r}){const s=a*r;let c=new o.Numeric(e,10);t!==n&&s&&(c=c.applyConversionRate(s));return c.round(2).toString()},n.formatCurrency=function(e,t,n){const s=t.toUpperCase();return r.default.find((e=>e.code===s))?a.default.format(Number(e),{code:s,precision:n}):e},n.getHexGasTotal=function({gasLimit:e="0x0",gasPrice:t="0x0"}){return new o.Numeric(e,16).times(new o.Numeric(t,16)).toPrefixedHexString()},n.getTransactionFee=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:n,conversionRate:a,numberOfDecimals:r}){let s=new o.Numeric(e,16,i.EtherDenomination.WEI).toDenomination(i.EtherDenomination.ETH).toBase(10);t!==n&&a&&(s=s.applyConversionRate(a));return s.round(r).toString()},n.roundExponential=function(e){const t=new s.BigNumber(e);return t.e>20?t.toPrecision(4):e};var a=c(e("currency-formatter")),r=c(e("currency-formatter/currencies")),s=e("bignumber.js"),o=e("../../../shared/modules/Numeric"),i=e("../../../shared/constants/common");function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/helpers/utils/confirm-tx.util.ts"}],[6152,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$",file:"ui/helpers/utils/formatters.js"}],[6155,{"../../../shared/constants/network":5139,"../../../shared/modules/i18n":5183,"@sentry/browser":2892,react:4651},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMessage=void 0,n.getNetworkLabelKey=function(e){if(e===i.NETWORK_TYPES.LINEA_SEPOLIA)return"lineaSepolia";if(e===i.NETWORK_TYPES.LINEA_MAINNET)return"lineaMainnet";return e};var a,r=(a=e("react"))&&a.__esModule?a:{default:a},s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("@sentry/browser")),o=e("../../../shared/modules/i18n"),i=e("../../../shared/constants/network");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}n.getMessage=(e,t,n,a)=>{const i=(null==a?void 0:a.some((e=>null!==e&&("function"==typeof e||"object"==typeof e))))?e=>r.default.createElement("span",null," ",e," "):undefined;return(0,o.getMessage)(e,t,n,a,(e=>{s.captureException(e)}),i)}}}},{package:"$root$",file:"ui/helpers/utils/i18n-helper.tsx"}],[6156,{"../../../shared/modules/hexstring-utils":5182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IconFactory=void 0,n.default=function(e){o||(o=new s(e));return o};var a=e("../../../shared/modules/hexstring-utils");function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e,t=i){r(this,"jazzicon",void 0),r(this,"generateSeed",void 0),r(this,"cache",void 0),this.jazzicon=e,this.generateSeed=t,this.cache={}}iconForAddress(e,t,n){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,a.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,n)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(n):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const n=`${e}:${t}`;return(this.cache[n]||(this.cache[n]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const n=this.generateSeed(e);return this.jazzicon(t,n)}}let o;function i(e){const t=e.slice(2,10);return parseInt(t,16)}n.IconFactory=s}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[6158,{"../../../shared/constants/metametrics":5135,"../../../shared/constants/security-provider":5145,"../../../shared/lib/transactions-controller-utils":5167,"@metamask/transaction-controller":2647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAccountType=function(e){if("default"===e)return"metamask";return e},n.generateSignatureUniqueId=function(e){return`signature-${e}`},n.getBlockaidMetricsProps=void 0,n.getMethodName=function(e){if(!e||"string"!=typeof e)return"";return e.replace(/([a-z])([A-Z])/gu,"$1 $2").replace(/([A-Z])([a-z])/gu," $1$2").replace(/ +/gu," ")},n.getSwapAndSendMetricsProps=void 0;var a=e("@metamask/transaction-controller"),r=e("../../../shared/constants/security-provider"),s=e("../../../shared/constants/metametrics"),o=e("../../../shared/lib/transactions-controller-utils");n.getBlockaidMetricsProps=({securityAlertResponse:e})=>{if(!e)return{};const t={},{providerRequestsCount:n,reason:a,result_type:o,description:i,source:c}=e,u=(e=>{let t;return e===r.BlockaidResultType.Malicious?t=[s.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:e===r.BlockaidResultType.Warning?t=[s.MetaMetricsEventUiCustomization.FlaggedAsWarning]:e===r.BlockaidResultType.Errored&&(t=[s.MetaMetricsEventUiCustomization.SecurityAlertError]),t})(o);return u&&(t.ui_customizations=u),o!==r.BlockaidResultType.Benign&&(t.security_alert_reason=a??r.BlockaidReason.notApplicable),i&&(t.security_alert_description=i),t.security_alert_response=o??r.BlockaidResultType.NotApplicable,t.security_alert_source=c,n&&Object.keys(n).forEach((e=>{t[`ppom_${e}_count`]=n[e]})),t};n.getSwapAndSendMetricsProps=e=>{if(e.type!==a.TransactionType.swapAndSend)return{};const{chainId:t,sourceTokenAmount:n,sourceTokenDecimals:r,destinationTokenAmount:s,destinationTokenDecimals:i,sourceTokenSymbol:c,destinationTokenAddress:u,destinationTokenSymbol:l,sourceTokenAddress:d}=e;return{chain_id:t,token_amount_source:n&&r?(0,o.calcTokenAmount)(n,r).toString():undefined,token_amount_dest_estimate:s&&i?(0,o.calcTokenAmount)(s,i).toString():undefined,token_symbol_source:c,token_symbol_destination:l,token_address_source:d,token_address_destination:u}}}}},{package:"$root$",file:"ui/helpers/utils/metrics.js"}],[616,{"../RegistryItem":609,"../RegistryType":610,"../lib":620,"./KeyDerivation":615},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QRHardwareCall=n.QRHardwareCallType=void 0;const a=e("../RegistryType"),r=e("../RegistryItem"),s=e("../lib"),o=e("./KeyDerivation");var i,c;!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(i||(i={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(c=n.QRHardwareCallType||(n.QRHardwareCallType={}));class u extends r.RegistryItem{constructor(e,t,n){super(),this.type=e,this.params=t,this.origin=n,this.getRegistryType=()=>a.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};e[i.type]=this.type;const t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[i.params]=t,this.origin&&(e[i.origin]=this.origin),new s.DataItem(e)}}}n.QRHardwareCall=u,u.fromDataItem=e=>{const t=e.getData(),n=t[i.type]||c.KeyDerivation;let a;if(n===c.KeyDerivation)a=o.KeyDerivation.fromDataItem(t[i.params]);const r=t[i.origin];return new u(n,a,r)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/QRHardwareCall.js"}],[6167,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSnapId=function(e){return("string"==typeof e||e instanceof String)&&(e.startsWith("local:")||e.startsWith("npm:"))}}}},{package:"$root$",file:"ui/helpers/utils/snaps.js"}],[6169,{"../../../shared/constants/transaction":5153,"../../../shared/lib/metamask-controller-utils":5160,"../../../shared/lib/transactions-controller-utils":5167,"../../../shared/modules/Numeric":5169,"../../../shared/modules/string-utils":5199,"../../../shared/modules/transaction.utils":5201,"../../store/actions":6875,"./confirm-tx.util":6150,"./util":6172,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetDetails=async function(e,t,n,a){var d,p,m;const T=(0,i.parseStandardTokenTransactionData)(n);if(!T)throw new Error("Unable to detect valid token data");let f=(null===(d=_(T))||void 0===d?void 0:d.toString())??(0,u.getTokenValueParam)(T);const g=A(T);let h;if(null!=a&&a.length&&f){const t=a.find((({address:t,tokenId:n})=>(0,o.isEqualCaseInsensitive)(e,t)&&n===f));if(t&&(t.name||t.symbol))return{toAddress:g,...t}}try{h=await(0,s.getTokenStandardAndDetails)(e,t,f)}catch(e){return r.default.warn(e),{toAddress:g,tokenId:f}}const E=(0,u.getTokenValueParam)(T),S=null===(p=h)||void 0===p?void 0:p.decimals,y=T&&E&&S&&(0,l.calcTokenAmount)(E,S).toString(10),v=S&&Number(null==S?void 0:S.toString(10));(null===(m=h)||void 0===m?void 0:m.standard)===c.TokenStandard.ERC20&&(f=undefined);return{tokenAmount:y,toAddress:g,decimals:v,tokenId:f,...h}},n.getSymbolAndDecimalsAndName=y,n.getTokenAddressParam=A,n.getTokenApprovedParam=function(e={}){var t;return null==e||null===(t=e.args)||void 0===t?void 0:t._approved},n.getTokenFiatAmount=function(e,t,n,a,r,s=!0,o=!1){if(t<=0||!e||a===undefined)return undefined;const i=new d.Numeric(e,10).times(new d.Numeric(t,10)).toString();let c,u=new d.Numeric(a,10);r!==n.toUpperCase()&&i&&(u=u.applyConversionRate(i));u=u.round(2).toString(),c=o?(0,m.formatCurrency)(u,n):s?`${(0,m.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return c},n.getTokenIdParam=_,n.getTokenMetadata=g,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await y(t,n)),e[t])};var a,r=(a=e("loglevel"))&&a.__esModule?a:{default:a},s=e("../../store/actions"),o=e("../../../shared/modules/string-utils"),i=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/transaction"),u=e("../../../shared/lib/metamask-controller-utils"),l=e("../../../shared/lib/transactions-controller-utils"),d=e("../../../shared/modules/Numeric"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("./util")),m=e("./confirm-tx.util");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}const f="";function g(e,t){return e&&t[e.toLowerCase()]}async function h(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{return(await t.symbol())[0]}catch(t){return r.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const a=g(e,t);a&&(n=a.symbol)}return n}async function E(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{const[e]=await t.name();return e}catch(t){return r.default.warn(`name() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const a=g(e,t);a&&(n=a.name)}return n}async function S(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{const e=(await t.decimals())[0];return null==e?void 0:e.toString()}catch(t){return r.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const r=g(e,t);var a;if(r)n=null===(a=r.decimals)||void 0===a?void 0:a.toString()}return n}async function y(e,t){let n,a,s;try{const r=(await Promise.allSettled([h(e,t),S(e,t),E(e,t)])).filter((e=>"fulfilled"===e.status)).map((e=>e.value));[n,a,s]=r}catch(t){r.default.warn(`symbol() and decimal() and name() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||f,decimals:a,name:s}}function A(e={}){var t,n,a;const r=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(a=e.args)||void 0===a?void 0:a[0]);return null==r?void 0:r.toString().toLowerCase()}function _(e={}){var t,n;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(n=e.args)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())}}}},{package:"$root$",file:"ui/helpers/utils/token-util.js"}],[617,{"./Bytes":598,"./CryptoAccount":599,"./CryptoCoinInfo":600,"./CryptoECKey":601,"./CryptoHDKey":602,"./CryptoKeypath":603,"./CryptoOutput":604,"./CryptoPSBT":605,"./Decoder":606,"./MultiKey":607,"./PathComponent":608,"./RegistryItem":609,"./RegistryType":610,"./ScriptExpression":611,"./errors":612,"./extended/CryptoMultiAccounts":613,"./extended/DerivationSchema":614,"./extended/KeyDerivation":615,"./extended/QRHardwareCall":616,"./lib":620,"./patchCBOR":621,"./types":622,"./utils":623,"buffer/":3544,tslib:5004},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoMultiAccounts=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const a=e("tslib");e("./patchCBOR");const r=e("buffer/");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return r.Buffer}});const s=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return s.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const i=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return i.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return i.Network}});const c=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const l=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return l.CryptoOutput}});const d=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const p=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return p.CryptoAccount}});const m=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return m.URRegistryDecoder}});const T=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return T.MultiKey}});const f=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return f.ScriptExpressions}});const g=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const h=e("./RegistryItem"),E=e("./RegistryType"),S=e("./lib");var y=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return y.DataItem}});const A=e("./utils"),_=e("./extended/CryptoMultiAccounts");Object.defineProperty(n,"CryptoMultiAccounts",{enumerable:!0,get:function(){return _.CryptoMultiAccounts}});const v={URRegistryDecoder:m.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:p.CryptoAccount,CryptoHDKey:s.CryptoHDKey,CryptoMultiAccounts:_.CryptoMultiAccounts,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:i.CryptoCoinInfo,CryptoCoinInfoType:i.Type,CryptoCoinInfoNetwork:i.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:l.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:T.MultiKey,ScriptExpressions:f.ScriptExpressions,PathComponent:g.PathComponent},I={addReader:S.addReader,addSemanticDecode:S.addSemanticDecode,addSemanticEncode:S.addSemanticEncode,addWriter:S.addWriter,patchTags:A.patchTags},R={RegistryTypes:E.RegistryTypes,RegistryItem:h.RegistryItem,RegistryType:E.RegistryType,decodeToDataItem:S.decodeToDataItem,encodeDataItem:S.encodeDataItem,cbor:I};n.extend=R,(0,a.__exportStar)(e("./errors"),n),(0,a.__exportStar)(e("./Decoder"),n),(0,a.__exportStar)(e("./lib"),n),(0,a.__exportStar)(e("./CryptoAccount"),n),(0,a.__exportStar)(e("./CryptoPSBT"),n),(0,a.__exportStar)(e("./CryptoHDKey"),n),(0,a.__exportStar)(e("./extended/CryptoMultiAccounts"),n),(0,a.__exportStar)(e("./extended/QRHardwareCall"),n),(0,a.__exportStar)(e("./extended/KeyDerivation"),n),(0,a.__exportStar)(e("./extended/DerivationSchema"),n),(0,a.__exportStar)(e("./CryptoOutput"),n),(0,a.__exportStar)(e("./CryptoCoinInfo"),n),(0,a.__exportStar)(e("./CryptoECKey"),n),(0,a.__exportStar)(e("./MultiKey"),n),(0,a.__exportStar)(e("./CryptoKeypath"),n),(0,a.__exportStar)(e("./patchCBOR"),n),(0,a.__exportStar)(e("./PathComponent"),n),(0,a.__exportStar)(e("./RegistryItem"),n),(0,a.__exportStar)(e("./RegistryType"),n),(0,a.__exportStar)(e("./types"),n),(0,a.__exportStar)(e("./utils"),n),n.default=v}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[6170,{"../../../app/scripts/lib/util":134,"../../../shared/constants/transaction":5153,"../../../shared/modules/contract-utils":5175,"@metamask/controller-utils":1379,"@metamask/transaction-controller":2647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,s.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:a,txParams:{nonce:r}={}}=n;return r===t?e.submittedTime?a>e.submittedTime?n:e:n:e}),{})},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:a}=e;if("0x0"===t)return r.TransactionStatus.failed;if(a===r.TransactionStatus.confirmed&&n===r.TransactionType.cancel)return o.TransactionGroupStatus.cancelled;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case r.TransactionType.tokenMethodTransfer:return e("transfer");case r.TransactionType.tokenMethodTransferFrom:return e("transferFrom");case r.TransactionType.tokenMethodSafeTransferFrom:return e("safeTransferFrom");case r.TransactionType.tokenMethodApprove:return e("approve");case r.TransactionType.tokenMethodSetApprovalForAll:return e("setApprovalForAll");case r.TransactionType.tokenMethodIncreaseAllowance:return e("approveIncreaseAllowance");case r.TransactionType.simpleSend:return e("sendingNativeAsset",[n]);case r.TransactionType.contractInteraction:return e("contractInteraction");case r.TransactionType.deployContract:return e("contractDeployment");case r.TransactionType.swap:return e("swap");case r.TransactionType.swapAndSend:return e("swapAndSend");case r.TransactionType.swapApproval:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===r.TransactionEnvelopeType.legacy},n.isNFTAssetStandard=void 0,n.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,i.readAddressAsContract)(global.eth,e);return t},n.isTokenMethodAction=function(e){return[r.TransactionType.tokenMethodTransfer,r.TransactionType.tokenMethodApprove,r.TransactionType.tokenMethodSetApprovalForAll,r.TransactionType.tokenMethodTransferFrom,r.TransactionType.tokenMethodSafeTransferFrom,r.TransactionType.tokenMethodIncreaseAllowance].includes(e)};var a=e("@metamask/controller-utils"),r=e("@metamask/transaction-controller"),s=e("../../../app/scripts/lib/util"),o=e("../../../shared/constants/transaction"),i=e("../../../shared/modules/contract-utils");n.isNFTAssetStandard=e=>e===a.ERC1155||e===a.ERC721}}},{package:"$root$",file:"ui/helpers/utils/transactions.util.js"}],[6171,{"./util":6172,loglevel:4262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,a,o,i){r.default.debug("tx-helper called with params:"),r.default.debug({unapprovedTxs:e,personalMsgs:t,decryptMsgs:n,encryptionPublicKeyMsgs:a,typedMessages:o,chainId:i});const c=i?(0,s.valuesFor)(e).filter((e=>e.chainId===i)):(0,s.valuesFor)(e),u=(0,s.valuesFor)(t),l=(0,s.valuesFor)(n),d=(0,s.valuesFor)(a),p=(0,s.valuesFor)(o),m=c.concat(u).concat(l).concat(d).concat(p).sort(((e,t)=>e.time-t.time));return r.default.debug(`tx helper found ${c.length} unapproved txs`),r.default.debug(`tx helper found ${u.length} unsigned personal messages`),r.default.debug(`tx helper found ${l.length} decrypt requests`),r.default.debug(`tx helper found ${d.length} encryptionPublicKey requests`),r.default.debug(`tx helper found ${p.length} unsigned typed messages`),m};var a,r=(a=e("loglevel"))&&a.__esModule?a:{default:a},s=e("./util")}}},{package:"$root$",file:"ui/helpers/utils/tx-helper.ts"}],[6172,{"../../../app/scripts/lib/multichain/address":86,"../../../shared/constants/labels":5133,"../../../shared/constants/network":5139,"../../../shared/modules/Numeric":5169,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/error":5178,"../../../shared/modules/hexstring-utils":5182,"../../../shared/modules/string-utils":5199,"../constants/common":6121,"../constants/routes":6129,"@metamask/assets-controllers":1338,"@metamask/snaps-rpc-methods":2428,"@metamask/snaps-utils":2596,"@metamask/utils":2765,"bignumber.js":3486,"bn.js":3489,bowser:3500,buffer:3537,"human-standard-token-abi":4062,lodash:4256,luxon:4264,"punycode/punycode":4461},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.IS_FLASK=void 0,n.addressSummary=function(e,t=10,n=4,a=!0){if(!e)return"";let r=(0,v.normalizeSafeAddress)(e);a||(r=(0,g.stripHexPrefix)(r));return r?`${r.slice(0,t)}...${r.slice(r.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.checkTokenIdExists=void 0,n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.fetchTokenExchangeRates=void 0,n.formatBalance=function(e,t,n=!0,a="ETH"){const r=n?N(e):e.split("."),s=r[0];let o=r[1],i="None";if(t===undefined)if("0"===s){if("0"!==o){const e=o.match(/^0*(.{2})/u);e&&(o=e[0]),i=`0.${o} ${a}`}}else i=`${s}.${o.slice(0,3)} ${a}`;else o+=Array(t).join("0"),i=`${s}.${o.slice(0,t)} ${a}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithSuffix=function(e){const t=i.DateTime.fromMillis(1e3*e),{day:n}=t,a=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n);return t.toFormat(`MMM d'${a}', yyyy`)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const a=i.DateTime.fromMillis(e),r=i.DateTime.local();return a.toFormat(r.year===a.year?t:n)},n.formatUTCDateFromUnixTimestamp=void 0,n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=async function(e,t){if(!e||"string"!=typeof e)return"";if(t&&e.startsWith("ipfs://"))try{return await(0,c.getFormattedIpfsUrl)(t,e,!0)}catch(e){return(0,f.logErrorWithMessage)(e),""}return e},n.getCalculatedTokenAmount1dAgo=n.getAvatarFallbackLetter=void 0,n.getContractAtAddress=function(e){return global.eth.contract(r.default).at(e)},n.getFilteredSnapPermissions=n.getDedupedSnaps=void 0,n.getIsBrowserDeprecated=function(e=l.default.getParser(window.navigator.userAgent)){return e.satisfies(S.OUTDATED_BROWSER_VERSIONS)??!1},n.getNetworkNameFromProviderType=void 0,n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let a=0;a<n;a++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getSnapRoute=n.getSnapName=void 0,n.getURL=k,n.getURLHost=function(e){var t;return(null===(t=k(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=k(e))||void 0===t?void 0:t.hostname)||""},n.isAbleToExportAccount=n.hexToText=void 0,n.isDefaultMetaMaskChain=function(e){if(!e||e===T.CHAIN_IDS.MAINNET||e===T.CHAIN_IDS.LINEA_MAINNET||e===T.CHAIN_IDS.GOERLI||e===T.CHAIN_IDS.SEPOLIA||e===T.CHAIN_IDS.LINEA_GOERLI||e===T.CHAIN_IDS.LINEA_SEPOLIA||e===T.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==a.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=w,n.parseBalance=N,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return new E.Numeric(new E.Numeric(e,10).toFixed(t),10).toNumber()},n.sanitizeString=n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){return O(e,{truncatedCharLimit:h.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:h.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:h.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1})},n.shortenString=O,n.sortSelectedInternalAccounts=function(e){return e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)))},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=C,n.stripHttpsSchemeWithoutPort=function(e){if(k(e).port)return e;return C(e)},n.toHumanReadableTime=n.stripOneLayerofNesting=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var a=R(e("punycode/punycode")),r=R(e("human-standard-token-abi")),s=R(e("bignumber.js")),o=R(e("bn.js")),i=e("luxon"),c=e("@metamask/assets-controllers"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=r?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("lodash")),l=R(e("bowser")),d=e("@metamask/snaps-rpc-methods"),p=e("@metamask/snaps-utils"),m=e("@metamask/utils"),T=e("../../../shared/constants/network"),f=e("../../../shared/modules/error"),g=e("../../../shared/modules/hexstring-utils"),h=e("../../../shared/constants/labels"),E=e("../../../shared/modules/Numeric"),S=e("../constants/common"),y=e("../../../shared/modules/string-utils"),A=e("../../../shared/modules/conversion.utils"),_=e("../constants/routes"),v=e("../../../app/scripts/lib/multichain/address");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function R(e){return e&&e.__esModule?e:{default:e}}function w(e){if(!e)return new o.default(0,16);const t=(0,g.stripHexPrefix)(e);return new o.default(t,16)}function N(e){let t;const n=w(e),a=n.toString(),r=a.length>18?a.slice(0,a.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[r,t]}function O(e="",{truncatedCharLimit:t,truncatedStartChars:n,truncatedEndChars:a,skipCharacterInEnd:r}={truncatedCharLimit:h.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:h.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:h.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1}){return e.length<t?e:`${e.slice(0,n)}...${r?"":e.slice(-a)}`}function C(e){return e.replace(/^https:\/\//u,"")}function k(e){try{return new URL(e)}catch(e){return""}}n.formatUTCDateFromUnixTimestamp=e=>e?i.DateTime.fromSeconds(e).toUTC().toFormat("dd LLLL yyyy, HH:mm"):e;n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const P=(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),a=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),r=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),s=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`)))),o=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...s.flat(),...o.flat()]})(),D=e=>e.replace(/\[(\d*)\]/u,"");n.stripOneLayerofNesting=D;const b=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const a=t&&null!==t.match(/\[[[0-9]*\]*/u);var r;if(a)return{value:e.map((e=>b(e,D(t),n))),type:t};if(r=t,P.includes(r))return{value:e,type:t};const s=a?(e=>e.replace(/\[[[0-9]*\]*/gu,""))(t):t,o=n[s];if(!o)throw new Error("Invalid primary type definition");const i={};return Object.keys(e).forEach((t=>{const a=Object.values(o).find((e=>e.name===t));a&&(i[t]=b(e[t],a.type,n))})),{value:i,type:t}};n.sanitizeMessage=b;n.getSnapName=e=>t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.name)??(0,p.stripSnapPrefix)(t)};n.getSnapRoute=e=>`${_.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e)}`;n.getDedupedSnaps=(e,t)=>{var n,a;const r=null==e||null===(n=e.permissions)||void 0===n?void 0:n[d.WALLET_SNAP_PERMISSION_KEY],s=null==r?void 0:r.caveats[0].value,o=null==t||null===(a=t[d.WALLET_SNAP_PERMISSION_KEY])||void 0===a?void 0:a.caveats[0].value;if(!(0,m.isObject)(o)&&s)return Object.keys(s);const i=s?Object.keys(s):[],c=o?Object.keys(o):[],u=i.filter((e=>!c.includes(e)));return u.length>0?u:i};n.IS_FLASK=!1;n.sanitizeString=e=>{if(!e)return e;if(!u.isString(e))return e;return e.replace(/\u202E/giu,"\\u202E")};n.getNetworkNameFromProviderType=e=>e===T.NETWORK_TYPES.RPC?"":e;n.isAbleToExportAccount=(e="")=>!e.includes("Hardware")&&!e.includes("Snap");n.checkTokenIdExists=(e,t,n)=>{const a=(0,m.isStrictHexString)(t);let r=t;a&&(r=(0,A.hexToDecimal)(t));const s=(0,g.toChecksumHexAddress)(e);if(n[s]){const e=n[s];return u.some(e.nfts,(e=>e.address===s&&((0,y.isEqualCaseInsensitive)(e.tokenId,t)||(0,y.isEqualCaseInsensitive)(e.tokenId,r.toString()))))}return!1};n.fetchTokenExchangeRates=async(e,t,n)=>{try{return await(0,c.fetchTokenContractExchangeRates)({tokenPricesService:new c.CodefiTokenPricesServiceV2,nativeCurrency:e,tokenAddresses:t,chainId:n})}catch(e){return{}}};n.hexToText=e=>{if(!e)return e;try{const n=(0,g.stripHexPrefix)(e),a=t.from(n,"hex");return 32===a.length?e:a.toString("utf8")}catch(t){return e}};n.getAvatarFallbackLetter=e=>{var t;return(null==e||null===(t=e.match(/[a-z0-9]/iu))||void 0===t?void 0:t[0])??"?"};n.getFilteredSnapPermissions=(e,t=Infinity,n=3)=>{const a=e.filter((e=>e.weight<=t));if(n&&a.length<n){const r=e.filter((e=>e.weight>t));return a.concat(r.slice(0,n-a.length))}return a};n.getCalculatedTokenAmount1dAgo=(e,t)=>t!==undefined&&e?e/(1+t/100):e??0}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/util.js"}],[618,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[619,{"./DataItem":618,buffer:3537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var a=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",a=0;a<t.length;a++){var r=t.charCodeAt(a).toString(16);1===r.length&&(r="0"+r),n+=r}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),a="",r=0;r<n.length;r++)if("%"===n.charAt(r))a+=n.substring(r+1,r+3),r+=2;else{var s=n.charCodeAt(r).toString(16);s.length<2&&(s="0"+s),a+=s}return new e(a)};var a=[],r={},s=function(e){return function(){throw new Error(e+" not implemented")}};function o(){}function i(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void s("Additional info: "+n)()}function u(e,t,n){var a=e<<5;t<24?n.writeByte(a|t):t<256?(n.writeByte(24|a),n.writeByte(t)):t<65536?(n.writeByte(25|a),n.writeUint16(t)):t<4294967296?(n.writeByte(26|a),n.writeUint32(t)):(n.writeByte(27|a),n.writeUint64(t))}o.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,a=32768&e;if(31===t)return 0===n?a?-Infinity:Infinity:NaN;var r=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return a?-r:r},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,a=2147483648&e;if(255===t)return 0===n?a?-Infinity:Infinity:NaN;var r=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return a?-r:r},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),a=2147483648&e;if(2047===t)return 0===n?a?-Infinity:Infinity:NaN;var r=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return a?-r:r},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},i.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:s("writeString"),canWriteBinary:function(e){return!1},writeBinary:s("writeChunk")};var l=new Error;function d(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),a=[];if(null!==n){5===t.type&&(n*=2);for(var s=0;s<n;s++)a[s]=d(e)}else for(var o;(o=d(e))!==l;)a.push(o);if(5===t.type){var i={};for(s=0;s<a.length;s+=2)i[a[s]]=a[s+1];return i}return a;case 6:var u=c(t,e),p=r[u];a=d(e);return p?p(a):a;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return l;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function p(e,t){for(var n=0;n<a.length;n++){var r=a[n].fn(e);if(r!==undefined)return u(6,a[n].tag,t),p(r,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(f.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)p(e[n],t)}else{var s=Object.keys(e);u(5,s.length,t);for(n=0;n<s.length;n++){const a=parseInt(s[n]);isNaN(a)?(p(s[n],t),p(e[s[n]],t)):(p(a,t),p(e[s[n]],t))}}}}var m=[],T=[],f={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?T.push((function(n){if(e===n)return t(n)})):T.push(e)},addReader:function(e,t){"string"==typeof e?m.push((function(n,a){if(e===a)return t(n,a)})):m.push(e)},encode:function(e,t){for(var n=0;n<T.length;n++){var a=(0,T[n])(t);if(a)return p(e,a),a.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<T.length;n++){var a=(0,T[n])(t);if(a)return e.getTag()!==undefined?(p(e,a),a.result()):(p(e.getData(),a),a.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<m.length;n++){var a=(0,m[n])(e,t);if(a)return d(a)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var a=0;a<m.length;a++){var r=(0,m[a])(e,n);if(r){const e=d(r);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r[e]=t,this}};function g(e){this.buffer=e,this.pos=0}function h(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function E(e){this.hex=e,this.pos=0}function S(e){this.$hex="",this.finalFormat=e||"hex"}return g.prototype=Object.create(o.prototype),g.prototype.peekByte=function(){return this.buffer[this.pos]},g.prototype.readByte=function(){return this.buffer[this.pos++]},g.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},g.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},g.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},g.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},g.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},h.prototype=Object.create(i.prototype),h.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},h.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},h.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},h.prototype.writeString=function(e,t){var a=n.from(e,"utf-8");t(a.length),this.writeBuffer(a)},h.prototype.canWriteBinary=function(e){return e instanceof n},h.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},h.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},h.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,a=0;a<this.completeBuffers.length;a++){var r=this.completeBuffers[a];r.copy(e,t,0,r.length),t+=r.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(f.addReader((function(e,t){return n.isBuffer(e)?new g(e):"hex"===t||"base64"===t?new g(n.from(e,t)):void 0})),f.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new h(e):void 0:new h}))),E.prototype=Object.create(o.prototype),E.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},E.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},E.prototype.readChunk=function(t){var a=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(a,"hex"):new e(a)},S.prototype=Object.create(i.prototype),S.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},S.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},S.prototype.writeBinary=function(t,a){if(t instanceof e)a(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");a(t.length),this.$hex+=t.toString("hex")}},S.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},S.prototype.writeString=function(t,n){var a=e.fromUtf8String(t);n(a.length()),this.$hex+=a.$hex},f.addReader((function(t,n){return t instanceof e||t.$hex?new E(t.$hex):"hex"===n?new E(t):void 0})),f.addWriter((function(e){if("hex"===e)return new S})),f}();return a.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),a}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[6199,{"../../shared/constants/common":5125,"../../shared/constants/network":5139,"../../shared/modules/Numeric":5169,"../../shared/modules/conversion.utils":5176,"../helpers/utils/confirm-tx.util":6150,"../helpers/utils/token-util":6169,"../selectors/multichain":6865,"./useMultichainSelector":6215,"bignumber.js":3486,react:4651},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_AMOUNT=n.DEFAULT_PRECISION=void 0,n.useCurrencyDisplay=function(e,{account:t,displayValue:n,prefix:a,numberOfDecimals:s,denomination:T,currency:h,isAggregatedFiatOverviewBalance:E,...S}){const y=(0,m.useMultichainSelector)(i.getMultichainIsEvm,t),A=(0,m.useMultichainSelector)(i.getMultichainCurrentCurrency,t),_=(0,m.useMultichainSelector)(i.getMultichainNativeCurrency,t),v=(0,m.useMultichainSelector)(i.getMultichainConversionRate,t),I=h===A,R=h===_,w=(0,r.useMemo)((()=>n||(y?E?(0,o.formatCurrency)(e,h):function({isNativeCurrency:e,isUserPreferredCurrency:t,currency:n,nativeCurrency:a,inputValue:r,conversionRate:s,denomination:i,numberOfDecimals:u}){if(e||!t&&!a){const e=new l.Numeric(r,16,d.EtherDenomination.WEI).toDenomination(i||d.EtherDenomination.ETH).round(u||g).toBase(10).toString();return"0"===e&&r&&0!==Number(r)?f:e}if(t&&s)return(0,o.formatCurrency)((0,c.getValueFromWeiHex)({value:r,fromCurrency:a,toCurrency:n,conversionRate:s,numberOfDecimals:u||2,toDenomination:i}),n);return null}({isNativeCurrency:R,isUserPreferredCurrency:I,currency:h,nativeCurrency:_,inputValue:e,conversionRate:v,denomination:T,numberOfDecimals:s}):function({tokenSymbol:e,isNativeCurrency:t,isUserPreferredCurrency:n,currency:a,currentCurrency:r,nativeCurrency:s,inputValue:i,conversionRate:c}){if(t||!n&&!s)return new l.Numeric(i,10).toString();if(n&&c){const t=(0,p.getTokenFiatAmount)(1,Number(c),r,i,e,!1,!1)??"0";return(0,o.formatCurrency)(t,a)}return null}({tokenSymbol:_,isNativeCurrency:R,isUserPreferredCurrency:I,currency:h,currentCurrency:A,nativeCurrency:_,inputValue:e,conversionRate:v}))),[n,y,R,I,h,_,e,v,T,s,A,E]);let N;if(!S.hideLabel){const e=Object.values(u.TEST_NETWORK_TICKER_MAP).includes(h)?h:null==h?void 0:h.toUpperCase();N=S.suffix||e}return[`${a||""}${w}${N?` ${N}`:""}`,{prefix:a,value:w,suffix:N}]};var a,r=e("react"),s=(a=e("bignumber.js"))&&a.__esModule?a:{default:a},o=e("../helpers/utils/confirm-tx.util"),i=e("../selectors/multichain"),c=e("../../shared/modules/conversion.utils"),u=e("../../shared/constants/network"),l=e("../../shared/modules/Numeric"),d=e("../../shared/constants/common"),p=e("../helpers/utils/token-util"),m=e("./useMultichainSelector");const T=n.MIN_AMOUNT=1e-6,f=`<${T}`,g=n.DEFAULT_PRECISION=new s.default(T).decimalPlaces()}}},{package:"$root$",file:"ui/hooks/useCurrencyDisplay.js"}],[620,{"./DataItem":618,"./cbor-sync":619},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var a=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return a.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return a.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return a.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return a.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return a.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return a.addWriter}});var r=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return r.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[6209,{"../contexts/i18n":6086,react:4651},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useI18nContext=function(){return(0,a.useContext)(r.I18nContext)};var a=e("react"),r=e("../contexts/i18n")}}},{package:"$root$",file:"ui/hooks/useI18nContext.js"}],[621,{"./RegistryType":610,"./ScriptExpression":611,"./utils":623},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const a=e("./utils"),r=e("./RegistryType"),s=e("./ScriptExpression"),o=Object.values(r.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),i=Object.values(s.ScriptExpressions).map((e=>e.getTag()));(0,a.patchTags)(o.concat(i))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[6215,{"../selectors":6860,"react-redux":4609},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){return(0,a.useSelector)((n=>e(n,t||(0,r.getSelectedInternalAccount)(n))))};var a=e("react-redux"),r=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[622,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[623,{"./lib":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const a=e("./lib"),r=[];n.patchTags=e=>{e.forEach((e=>{r.find((t=>t===e))||((0,a.addSemanticEncode)(e,(t=>{if(t instanceof a.DataItem&&t.getTag()===e)return t.getData()})),(0,a.addSemanticDecode)(e,(t=>new a.DataItem(t,e))),r.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[6258,{"../../../app/scripts/controllers/bridge/constants":19,"../../../app/scripts/controllers/bridge/types":20,"../../../shared/constants/bridge":5124,"../../../shared/constants/network":5139,"../../../shared/constants/swaps":5149,"../../../shared/constants/time":5151,"../../../shared/lib/fetch-with-cache":5158,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/swaps.utils":5200,"./types":6275,"./utils/validators":6277,"@ethersproject/contracts":494,"@metamask/metamask-eth-abis":1900,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchBridgeFeatureFlags=async function(){const e=`${c.BRIDGE_API_BASE_URL}/getAllFeatureFlags`,t=await(0,l.default)({url:e,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:S},functionName:"fetchBridgeFeatureFlags"});if((0,h.validateResponse)(h.FEATURE_FLAG_VALIDATORS,t,e))return{[i.BridgeFeatureFlagsKey.EXTENSION_CONFIG]:t[g.BridgeFlag.EXTENSION_CONFIG],[i.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:t[g.BridgeFlag.EXTENSION_SUPPORT],[i.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:t[g.BridgeFlag.NETWORK_SRC_ALLOWLIST].map((e=>(0,s.add0x)((0,d.decimalToHex)(e)))),[i.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:t[g.BridgeFlag.NETWORK_DEST_ALLOWLIST].map((e=>(0,s.add0x)((0,d.decimalToHex)(e))))};return{[i.BridgeFeatureFlagsKey.EXTENSION_CONFIG]:{refreshRate:T.REFRESH_INTERVAL_MS,maxRefreshCount:5},[i.BridgeFeatureFlagsKey.EXTENSION_SUPPORT]:!1,[i.BridgeFeatureFlagsKey.NETWORK_SRC_ALLOWLIST]:[],[i.BridgeFeatureFlagsKey.NETWORK_DEST_ALLOWLIST]:[]}},n.fetchBridgeQuotes=async function(e,t){const n=new URLSearchParams({walletAddress:e.walletAddress,srcChainId:e.srcChainId.toString(),destChainId:e.destChainId.toString(),srcTokenAddress:e.srcTokenAddress,destTokenAddress:e.destTokenAddress,srcTokenAmount:e.srcTokenAmount,slippage:e.slippage.toString(),insufficientBal:e.insufficientBal?"true":"false",resetApproval:e.resetApproval?"true":"false"}),a=`${c.BRIDGE_API_BASE_URL}/getQuote?${n}`,r=await(0,l.default)({url:a,fetchOptions:{method:"GET",headers:E,signal:t},cacheOptions:{cacheRefreshTime:0},functionName:"fetchBridgeQuotes"});return r.filter((e=>{const{quote:t,approval:n,trade:r}=e;return(0,h.validateResponse)(h.QUOTE_RESPONSE_VALIDATORS,e,a)&&(0,h.validateResponse)(h.QUOTE_VALIDATORS,t,a)&&(0,h.validateResponse)(h.TOKEN_VALIDATORS,t.srcAsset,a)&&(0,h.validateResponse)(h.TOKEN_VALIDATORS,t.destAsset,a)&&(0,h.validateResponse)(h.TX_DATA_VALIDATORS,r,a)&&(0,h.validateResponse)(h.FEE_DATA_VALIDATORS,t.feeData[g.FeeType.METABRIDGE],a)&&(!n||(0,h.validateResponse)(h.TX_DATA_VALIDATORS,n,a))}))},n.fetchBridgeTokens=async function(e){const t=`${c.BRIDGE_API_BASE_URL}/getTokens?chainId=${(0,d.hexToDecimal)(e)}`,n=await(0,l.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:S},functionName:"fetchBridgeTokens"}),a=p.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e],r={};a&&(r[a.address]=a);return n.forEach((n=>{!(0,h.validateResponse)(h.TOKEN_VALIDATORS,n,t)||(0,m.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,m.isSwapsDefaultTokenAddress)(n.address,e)||(r[n.address]=n)})),r},n.isEthUsdt=n.getEthUsdtResetData=void 0;var a,r=e("@ethersproject/contracts"),s=e("@metamask/utils"),o=e("@metamask/metamask-eth-abis"),i=e("../../../app/scripts/controllers/bridge/types"),c=e("../../../shared/constants/bridge"),u=e("../../../shared/constants/time"),l=(a=e("../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},d=e("../../../shared/modules/conversion.utils"),p=e("../../../shared/constants/swaps"),m=e("../../../shared/modules/swaps.utils"),T=e("../../../app/scripts/controllers/bridge/constants"),f=e("../../../shared/constants/network"),g=e("./types"),h=e("./utils/validators");const E={"X-Client-Id":c.BRIDGE_CLIENT_ID},S=10*u.MINUTE;n.getEthUsdtResetData=()=>new r.Contract(c.ETH_USDT_ADDRESS,o.abiERC20).interface.encodeFunctionData("approve",[c.METABRIDGE_ETHEREUM_ADDRESS,"0"]);n.isEthUsdt=(e,t)=>e===f.CHAIN_IDS.MAINNET&&t.toLowerCase()===c.ETH_USDT_ADDRESS.toLowerCase()}}},{package:"$root$",file:"ui/pages/bridge/bridge.util.ts"}],[6275,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SortOrder=n.FeeType=n.ChainId=n.BridgeFlag=void 0;n.SortOrder=function(e){return e[e.COST_ASC=0]="COST_ASC",e[e.ETA_ASC=1]="ETA_ASC",e}({}),n.BridgeFlag=function(e){return e.EXTENSION_CONFIG="extension-config",e.EXTENSION_SUPPORT="extension-support",e.NETWORK_SRC_ALLOWLIST="src-network-allowlist",e.NETWORK_DEST_ALLOWLIST="dest-network-allowlist",e}({});n.ChainId=function(e){return e[e.ETH=1]="ETH",e[e.OPTIMISM=10]="OPTIMISM",e[e.BSC=56]="BSC",e[e.POLYGON=137]="POLYGON",e[e.ZKSYNC=324]="ZKSYNC",e[e.BASE=8453]="BASE",e[e.ARBITRUM=42161]="ARBITRUM",e[e.AVALANCHE=43114]="AVALANCHE",e[e.LINEA=59144]="LINEA",e}({}),n.FeeType=function(e){return e.METABRIDGE="metabridge",e.REFUEL="refuel",e}({})}}},{package:"$root$",file:"ui/pages/bridge/types.ts"}],[6276,{"../../../../shared/constants/common":5125,"../../../../shared/lib/transactions-controller-utils":5167,"../../../../shared/modules/Numeric":5169,"../../../../shared/modules/conversion.utils":5176,"../../../helpers/utils/confirm-tx.util":6150,"../../../hooks/useCurrencyDisplay":6199,"bignumber.js":3486,"ethereumjs-util":3753},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidQuoteRequest=n.isNativeAddress=n.formatTokenAmount=n.formatFiatAmount=n.formatEtaInMinutes=n.calcTotalGasFee=n.calcToAmount=n.calcSwapRate=n.calcSentAmount=n.calcRelayerFee=n.calcCost=n.calcAdjustedReturn=void 0;var a=e("ethereumjs-util"),r=e("bignumber.js"),s=e("../../../../shared/lib/transactions-controller-utils"),o=e("../../../../shared/modules/conversion.utils"),i=e("../../../helpers/utils/confirm-tx.util"),c=e("../../../../shared/modules/Numeric"),u=e("../../../../shared/constants/common"),l=e("../../../hooks/useCurrencyDisplay");const d=e=>e===(0,a.zeroAddress)();n.isNativeAddress=d;n.isValidQuoteRequest=(e,t=!0)=>{const n=["srcTokenAddress","destTokenAddress"];t&&n.push("srcTokenAmount");return n.every((t=>t in e&&"string"==typeof e[t]&&e[t]!==undefined&&""!==e[t]&&null!==e[t]))&&["srcChainId","destChainId","slippage"].every((t=>t in e&&"number"==typeof e[t]&&e[t]!==undefined&&!isNaN(Number(e[t]))&&null!==e[t]))};n.calcToAmount=({destTokenAmount:e,destAsset:t},n)=>{const a=(0,s.calcTokenAmount)(e,t.decimals);return{amount:a,fiat:n?a.mul(n.toString()):null}};n.calcSentAmount=({srcTokenAmount:e,srcAsset:t,feeData:n},a)=>{const o=(0,s.calcTokenAmount)(new r.BigNumber(e).plus(n.metabridge.amount),t.decimals);return{amount:o,fiat:a?o.mul(a.toString()):null}};n.calcRelayerFee=(e,t)=>{const{quote:{srcAsset:n,srcTokenAmount:a,feeData:i},trade:c}=e,u=(0,s.calcTokenAmount)(new r.BigNumber((0,o.hexToDecimal)(c.value)).minus(d(n.address)?new r.BigNumber(a).plus(i.metabridge.amount):0),18);return{amount:u,fiat:t?u.mul(t.toString()):null}};n.calcTotalGasFee=(e,t,n,a)=>{var s,i;const{approval:l,trade:d,l1GasFeesInHexWei:p}=e,m=(0,o.sumDecimals)((null===(s=d.gasLimit)||void 0===s?void 0:s.toString())??"0",(null==l||null===(i=l.gasLimit)||void 0===i?void 0:i.toString())??"0"),T=(0,o.sumDecimals)(t,n),f=c.Numeric.from(p??"0",16,u.EtherDenomination.WEI).toDenomination(u.EtherDenomination.GWEI),g=m.times(T).add(f),h=new r.BigNumber(g.shiftedBy(9).toString()),E=a?h.times(a.toString()):null;return{amount:h,fiat:E}};n.calcAdjustedReturn=(e,t)=>({fiat:e&&t?e.minus(t):null});n.calcSwapRate=(e,t)=>t.div(e);n.calcCost=(e,t)=>({fiat:e&&t?t.minus(e):null});n.formatEtaInMinutes=e=>(e/60).toFixed();n.formatTokenAmount=(e,t,n=2)=>`${e.toFixed(n)} ${t}`;n.formatFiatAmount=(e,t,n=l.DEFAULT_PRECISION)=>{if(!e)return undefined;if(0===n){if(e.lt(.01))return`<${(0,i.formatCurrency)("0",t,n)}`;if(e.lt(1))return(0,i.formatCurrency)(e.toString(),t,2)}return(0,i.formatCurrency)(e.toString(),t,n)}}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[6277,{"../../../../shared/lib/swaps-utils":5163,"../types":6275,"@metamask/controller-utils":1379,"@metamask/utils":2765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateResponse=n.isValidNumber=n.TX_DATA_VALIDATORS=n.TOKEN_VALIDATORS=n.QUOTE_VALIDATORS=n.QUOTE_RESPONSE_VALIDATORS=n.FEE_DATA_VALIDATORS=n.FEATURE_FLAG_VALIDATORS=void 0;var a=e("@metamask/utils"),r=e("@metamask/controller-utils"),s=e("../../../../shared/lib/swaps-utils"),o=e("../types");n.validateResponse=(e,t,n)=>(0,s.validateData)(e,t,n);const i=e=>"number"==typeof e;n.isValidNumber=i;const c=e=>"object"==typeof e&&null!==e,u=e=>"string"==typeof e&&e.length>0,l=e=>u(e)&&(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1});n.FEATURE_FLAG_VALIDATORS=[{property:o.BridgeFlag.EXTENSION_CONFIG,type:"object",validator:e=>c(e)&&"refreshRate"in e&&i(e.refreshRate)&&"maxRefreshCount"in e&&i(e.maxRefreshCount)},{property:o.BridgeFlag.EXTENSION_SUPPORT,type:"boolean"},{property:o.BridgeFlag.NETWORK_SRC_ALLOWLIST,type:"object",validator:e=>c(e)&&Object.values(e).every(i)},{property:o.BridgeFlag.NETWORK_DEST_ALLOWLIST,type:"object",validator:e=>c(e)&&Object.values(e).every(i)}],n.TOKEN_VALIDATORS=[{property:"decimals",type:"number"},{property:"address",type:"string",validator:l},{property:"symbol",type:"string",validator:e=>u(e)&&e.length<=12}],n.QUOTE_RESPONSE_VALIDATORS=[{property:"quote",type:"object",validator:c},{property:"estimatedProcessingTimeInSeconds",type:"number"},{property:"approval",type:"object|undefined",validator:e=>e===undefined||c(e)},{property:"trade",type:"object",validator:c}],n.QUOTE_VALIDATORS=[{property:"requestId",type:"string"},{property:"srcTokenAmount",type:"string"},{property:"destTokenAmount",type:"string"},{property:"bridgeId",type:"string"},{property:"bridges",type:"object",validator:c},{property:"srcChainId",type:"number"},{property:"destChainId",type:"number"},{property:"srcAsset",type:"object",validator:c},{property:"destAsset",type:"object",validator:c},{property:"feeData",type:"object",validator:c}],n.FEE_DATA_VALIDATORS=[{property:"amount",type:"string",validator:s.truthyDigitString},{property:"asset",type:"object",validator:c}],n.TX_DATA_VALIDATORS=[{property:"chainId",type:"number"},{property:"value",type:"string",validator:a.isStrictHexString},{property:"gasLimit",type:"number"},{property:"to",type:"string",validator:l},{property:"from",type:"string",validator:l},{property:"data",type:"string",validator:a.isStrictHexString}]}}},{package:"$root$",file:"ui/pages/bridge/utils/validators.ts"}],[6541,{"../../../components/component-library":5681,"../../../helpers/constants/design-system":6123,"./util":6564,"@metamask/controller-utils":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ResultTemplate=void 0;var a=e("@metamask/controller-utils"),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),o=e("./util");function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var u=new WeakMap,l=new WeakSet;function d(e,t){const{error:n,header:i,icon:l,message:d,title:p}=e,m=(f=this,(T=u).get(c(T,f))===a.ApprovalType.ResultSuccess);var T,f;return[...(0,o.processHeader)(i)??[],{key:"container",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,height:s.BlockSize.Full,padding:4},children:[{key:"content",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,height:s.BlockSize.Full,style:{alignSelf:s.AlignItems.stretch}},children:[null===l?undefined:{key:"icon",element:"AvatarIcon",props:{iconName:l??(m?r.IconName.Confirmation:r.IconName.Warning),size:r.IconSize.Xl,iconProps:{size:r.IconSize.Xl},color:m?s.IconColor.successDefault:s.IconColor.errorDefault,backgroundColor:m?s.BackgroundColor.successMuted:s.BackgroundColor.errorMuted},children:"Icon"},null===p?undefined:{key:"title",element:"Typography",props:{variant:s.TypographyVariant.H3,fontWeight:s.FontWeight.Bold},children:p??t(m?"resultPageSuccess":"resultPageError")},{key:"message",element:"Box",props:{alignItems:s.AlignItems.center,textAlign:s.TextAlign.Center,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},children:m?(0,o.processString)(d,t("resultPageSuccessDefaultMessage")):(0,o.processError)(n,t("resultPageErrorDefaultMessage"))}]}]}]}n.ResultTemplate=class{constructor(e){var t,n;i(t=this,n=l),n.add(t),function(e,t,n){i(e,t),t.set(e,n)}(this,u,void 0),function(e,t,n){e.set(c(e,t),n)}(u,this,e)}getValues(e,t,n){return{content:c(l,this,d).call(this,e.requestData||{},t),submitText:t("ok"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData),networkDisplay:!1}}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/ResultTemplate.ts"}],[6550,{"../../../../../shared/constants/network":5139,"../../../../../shared/modules/rpc.utils":5190,"../../../../helpers/constants/design-system":6123,"../../../../helpers/constants/routes":6129,"../../../../helpers/constants/zendesk-url":6136,"../../utils/confirm":6630,"@metamask/network-controller":1946,"@metamask/rpc-errors":2262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,r=e("@metamask/rpc-errors"),s=e("@metamask/network-controller"),o=e("../../../../../shared/constants/network"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../helpers/constants/routes"),u=(a=e("../../../../helpers/constants/zendesk-url"))&&a.__esModule?a:{default:a},l=e("../../../../../shared/modules/rpc.utils"),d=e("../../utils/confirm");const p={id:"UNRECOGNIZED_CHAIN",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},m={id:"SAFE_CHAIN_LIST_PROVIDER_ERROR",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorGettingSafeChainList"}}}},T={id:"MISMATCHED_CHAIN_RECOMMENDATION",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:u.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},f={id:"DEPRECATED_CHAIN_ALERT",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"deprecatedNetwork"}}}},g={id:"MISMATCHED_NETWORK_NAME",severity:i.Severity.Warning,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},h={id:"MISMATCHED_NETWORK_SYMBOL",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},E={id:"MISMATCHED_NETWORK_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}},S={id:"MISMATCHED_NETWORK_RPC_CHAIN_ID",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcChainId"}}}},y={id:"ERROR_CONNECTING_TO_RPC",severity:i.Severity.Danger,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"errorWhileConnectingToRPC"}}}};const A={getAlerts:async function(e,t){const n=[];if("metamask"===e.origin&&Boolean(t.matchedChain))return[];if(t.matchedChain){var a,r,s,i;(null===(a=t.matchedChain.name)||void 0===a?void 0:a.toLowerCase())!==e.requestData.chainName.toLowerCase()&&n.push(g),(null===(r=t.matchedChain.nativeCurrency)||void 0===r||null===(r=r.symbol)||void 0===r?void 0:r.toLowerCase())!==(null===(s=e.requestData.ticker)||void 0===s?void 0:s.toLowerCase())&&n.push(h);const{origin:c}=new URL(e.requestData.rpcUrl);null!==(i=t.matchedChain.rpc)&&void 0!==i&&i.map((e=>new URL(e).origin)).includes(c)||n.push(E),o.DEPRECATED_NETWORKS.includes(e.requestData.chainId)&&n.push(f)}return!t.matchedChain&&t.useSafeChainsListValidation&&(t.providerError?n.push(m):n.push(p)),n.length&&n.push(T),n},getValues:function(e,t,n,a,p){var m;const T="metamask"===e.origin,f=e.requestData.rpcUrl;let g,h;return g=T?t("wantToAddThisNetwork"):p.existingNetworkConfiguration?t("updateNetworkConfirmationTitle",[p.existingNetworkConfiguration.name]):t("addNetworkConfirmationTitle",[e.requestData.chainName]),h=p.existingNetworkConfiguration?t("updateEthereumChainConfirmationDescription"):t("multichainAddEthereumChainConfirmationDescription"),{content:[{element:"Typography",key:"title",children:g,props:{variant:i.TypographyVariant.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:h,props:{variant:i.TypographyVariant.H6,align:"center",boxProps:{margin:T?[0,8,4]:[0,0,4]}}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("currencySymbol")]:t("currencySymbolDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("networkName")]:t("networkNameDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},warnings:{[t("networkURL")]:(0,d.isValidASCIIURL)(f)?undefined:t("networkUrlErrorWarning",[(0,d.toPunycodeURL)(f)]),[t("currencySymbol")]:p.currencySymbolWarning},dictionary:{[t("currencySymbol")]:e.requestData.ticker,[t("networkURL")]:null!==(m=f.toLowerCase())&&void 0!==m&&m.includes(`/v3/${o.infuraProjectId}`)?f.replace(`/v3/${o.infuraProjectId}`,"").toLowerCase():f.toLowerCase(),[t("chainId")]:parseInt(e.requestData.chainId,16),[t("networkName")]:e.requestData.chainName,[t("blockExplorerUrl")]:e.requestData.rpcPrefs.blockExplorerUrl},prefaceKeys:[t("currencySymbol"),t("networkURL")]}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"watchOutMessage",variables:[{element:"a",children:t("securityMessageLinkForNetworks"),key:"securityMessageLinkForNetworks",props:{href:u.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:i.TypographyVariant.H6,boxProps:{margin:T?[0,8]:0,display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center}}}],cancelText:t("cancel"),submitText:t("approveButtonText"),loadingText:t("addingCustomNetwork"),onSubmit:async()=>{let t;try{t=await(0,l.jsonRpcRequest)(f,"eth_chainId")}catch(e){return console.error(`Request for method 'eth_chainId on ${f} failed`),[y]}if(e.requestData.chainId!==t)return console.error(`Chain ID returned by RPC URL ${f} does not match ${t}`),[S];if(await n.resolvePendingApproval(e.id,e.requestData),T){const t=e.requestData.rpcPrefs.blockExplorerUrl,r=await n.addNetwork({chainId:e.requestData.chainId,name:e.requestData.chainName,nativeCurrency:e.requestData.ticker,blockExplorerUrls:t?[t]:[],defaultBlockExplorerUrlIndex:t?0:undefined,defaultRpcEndpointIndex:0,rpcEndpoints:[{url:e.requestData.rpcUrl,type:s.RpcEndpointType.Custom}]});await n.setNewNetworkAdded({networkConfigurationId:r.rpcEndpoints[0].networkClientId,nickname:e.requestData.chainName});document.location.hash.replace("#","/")===c.ONBOARDING_PRIVACY_SETTINGS_ROUTE||a.push(c.DEFAULT_ROUTE)}return[]},onCancel:()=>n.rejectPendingApproval(e.id,r.providerErrors.userRejectedRequest().serialize()),networkDisplay:!T}},getState:function(e){return 1===parseInt(e.requestData.chainId,16)?{useWarningModal:!0}:{}}};n.default=A}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/add-ethereum-chain.js"}],[6551,{"../../../../../shared/constants/metametrics":5135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("../../../../../shared/constants/metametrics");const r={getValues:function(e,t,n,r,s,o){const{origin:i,snapName:c,requestData:u}=e,{snapSuggestedAccountName:l}=u,{trackEvent:d}=o,p=e=>{d({event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})};return{content:[{element:"CreateNamedSnapAccount",key:"create-named-snap-account",props:{onActionComplete:async t=>{t.success?(p(a.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,t)):(p(a.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1))},snapSuggestedAccountName:l}}],loadingText:t("addingAccount"),hideSubmitButton:!0,onLoad:()=>p(a.MetaMetricsEventName.AddSnapAccountViewed)}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-named-snap-account.js"}],[6552,{"../../../../../shared/constants/metametrics":5135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("../../../../../shared/constants/metametrics");const r={getValues:function(e,t,n,r,s,o){const{origin:i,snapName:c}=e,{trackEvent:u}=o,l=e=>{u({event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},d=()=>{l(a.MetaMetricsEventName.AddSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"CreateSnapAccount",key:"create-snap-account",props:{snapId:i,snapName:c,onCancel:d}}],cancelText:t("cancel"),submitText:t("create"),onLoad:()=>l(a.MetaMetricsEventName.AddSnapAccountViewed),onSubmit:()=>{l(a.MetaMetricsEventName.AddSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:d}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/create-snap-account.js"}],[6553,{"../ResultTemplate":6541,"@metamask/controller-utils":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/controller-utils");const r=new(e("../ResultTemplate").ResultTemplate)(a.ApprovalType.ResultError),s={getValues:r.getValues.bind(r)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/error.js"}],[6554,{"../../../../../shared/constants/app":5123,"../../../../store/actions":6875,"./add-ethereum-chain":6550,"./create-named-snap-account":6551,"./create-snap-account":6552,"./error":6553,"./remove-snap-account":6555,"./smart-transaction-status-page":6556,"./snap-account-redirect":6557,"./snaps/snap-alert/snap-alert":6558,"./snaps/snap-confirmation/snap-confirmation":6559,"./snaps/snap-default/snap-default":6560,"./snaps/snap-prompt/snap-prompt":6561,"./success":6562,"./switch-ethereum-chain":6563,"@metamask/controller-utils":1379,lodash:4256},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=n.PRIORITY_APPROVAL_TEMPLATE_TYPES=void 0,n.getTemplateAlerts=async function(e,t){var n;const a=null===(n=A[e.type])||void 0===n?void 0:n.getAlerts,r=a?await a(e,t):[];if(!Array.isArray(r))throw new Error(`Template alerts must be an array, received: ${r}`);if(r.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${r}`);return r},n.getTemplateState=async function(e){var t;const n=(null===(t=A[e.type])||void 0===t?void 0:t.getState)??v,a=await n(e);if("object"!=typeof a||Array.isArray(a))throw new Error(`Template state must be an object, received: ${a}`);if(null===a||a===undefined)return{};return a},n.getTemplateValues=function(e,t,n,r,o,i){var c;const u=null===(c=A[e.type])||void 0===c?void 0:c.getValues;if(!u)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const l=function(e){return{rejectPendingApproval:(...t)=>e((0,s.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,s.resolvePendingApproval)(...t)),addNetwork:(...t)=>e((0,s.addNetwork)(...t)),setNewNetworkAdded:(...t)=>e((0,s.setNewNetworkAdded)(...t)),deleteInterface:(...t)=>e((0,s.deleteInterface)(...t))}}(n),d=u(e,t,l,r,o,i),p=(0,a.omit)(d,_),m=(0,a.pick)(d,_);if(p.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(p)}`);return m};var a=e("lodash"),r=e("@metamask/controller-utils"),s=e("../../../../store/actions"),o=e("../../../../../shared/constants/app"),i=y(e("./smart-transaction-status-page")),c=y(e("./create-snap-account")),u=y(e("./remove-snap-account")),l=y(e("./snap-account-redirect")),d=y(e("./create-named-snap-account")),p=y(e("./add-ethereum-chain")),m=y(e("./switch-ethereum-chain")),T=y(e("./success")),f=y(e("./error")),g=y(e("./snaps/snap-alert/snap-alert")),h=y(e("./snaps/snap-confirmation/snap-confirmation")),E=y(e("./snaps/snap-prompt/snap-prompt")),S=y(e("./snaps/snap-default/snap-default"));function y(e){return e&&e.__esModule?e:{default:e}}n.PRIORITY_APPROVAL_TEMPLATE_TYPES=[o.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage];const A={[r.ApprovalType.AddEthereumChain]:p.default,[r.ApprovalType.SwitchEthereumChain]:m.default,[r.ApprovalType.ResultSuccess]:T.default,[r.ApprovalType.ResultError]:f.default,[o.SMART_TRANSACTION_CONFIRMATION_TYPES.showSmartTransactionStatusPage]:i.default,[r.ApprovalType.SnapDialogAlert]:g.default,[r.ApprovalType.SnapDialogConfirmation]:h.default,[r.ApprovalType.SnapDialogPrompt]:E.default,[r.ApprovalType.SnapDialogDefault]:S.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountCreation]:c.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.confirmAccountRemoval]:u.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showNameSnapAccount]:d.default,[o.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect]:l.default},_=(n.TEMPLATED_CONFIRMATION_APPROVAL_TYPES=Object.keys(A),["cancelText","content","onLoad","onCancel","onSubmit","networkDisplay","submitText","loadingText","hideSubmitButton"]);async function v(){return{}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/index.js"}],[6555,{"../../../../../shared/constants/metametrics":5135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("../../../../../shared/constants/metametrics");const r={getValues:function(e,t,n,r,s,o){const{origin:i,snapName:c}=e,{publicAddress:u}=e.requestData,{trackEvent:l}=o,d=e=>{l({event:e,category:a.MetaMetricsEventCategory.Accounts,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},p=()=>{d(a.MetaMetricsEventName.RemoveSnapAccountCanceled),n.resolvePendingApproval(e.id,!1)};return{content:[{element:"RemoveSnapAccount",key:"remove-snap-account",props:{snapId:i,snapName:c,publicAddress:u,onCancel:p}}],cancelText:t("cancel"),submitText:t("remove"),onLoad:()=>d(a.MetaMetricsEventName.RemoveSnapAccountViewed),onSubmit:()=>{d(a.MetaMetricsEventName.RemoveSnapAccountConfirmed),n.resolvePendingApproval(e.id,!0)},onCancel:p}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/remove-snap-account.js"}],[6556,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const a={getValues:function(e,t,n,a){const{id:r,requestState:s}=e;return{content:[{element:"SmartTransactionStatusPage",key:"smart-transaction-status-page",props:{requestState:s,onCloseExtension:()=>{n.resolvePendingApproval(r,!0)},onViewActivity:()=>{n.resolvePendingApproval(r,!0)}}}],hideSubmitButton:!0}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/smart-transaction-status-page.js"}],[6557,{"../../../../../shared/constants/metametrics":5135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("../../../../../shared/constants/metametrics");const r={getValues:function(e,t,n,r,s,o){const{origin:i,snapName:c}=e,{url:u,message:l,isBlockedUrl:d}=e.requestData,{trackEvent:p}=o,m=e=>{p({event:e,category:a.MetaMetricsEventCategory.Transactions,properties:{account_type:a.MetaMetricsEventAccountType.Snap,snap_id:i,snap_name:c}})},T=a=>u!==undefined&&null!==u&&u.length>0&&!1===d?{submitText:t("goToSite"),onSubmit:()=>{m(a),n.resolvePendingApproval(e.id,!0)}}:{};return{content:[{element:"SnapAccountRedirect",key:"snap-account-redirect",props:{url:u,message:l,snapId:i,snapName:c,isBlockedUrl:d,...T(a.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectSnapUrlClicked)}}],cancelText:t("close"),onLoad:()=>m(a.MetaMetricsEventName.SnapAccountTransactionFinalizeViewed),onCancel:()=>{m(a.MetaMetricsEventName.SnapAccountTransactionFinalizeClosed),n.resolvePendingApproval(e.id,!1)},...T(a.MetaMetricsEventName.SnapAccountTransactionFinalizeRedirectGoToSiteClicked)}}};n.default=r}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snap-account-redirect.js"}],[6558,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const a={getValues:function(e,t,n){const{requestData:{id:a}}=e;return{submitText:t("ok").toUpperCase(),onSubmit:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(a)}}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-alert/snap-alert.js"}],[6559,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const a={getValues:function(e,t,n){const{requestData:{id:a}}=e;return{cancelText:t("reject"),submitText:t("approveButtonText"),onSubmit:()=>{n.resolvePendingApproval(e.id,!0),n.deleteInterface(a)},onCancel:()=>{n.resolvePendingApproval(e.id,!1),n.deleteInterface(a)}}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-confirmation/snap-confirmation.js"}],[6560,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const a={getValues:function(e,t,n){const{requestData:{id:a}}=e;return{onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(a)}}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-default/snap-default.js"}],[6561,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;const a={getValues:function(e,t,n){const{requestData:{id:a}}=e;return{cancelText:t("cancel"),submitText:t("submit"),onSubmit:t=>{n.resolvePendingApproval(e.id,t),n.deleteInterface(a)},onCancel:()=>{n.resolvePendingApproval(e.id,null),n.deleteInterface(a)}}}};n.default=a}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/snaps/snap-prompt/snap-prompt.js"}],[6562,{"../ResultTemplate":6541,"@metamask/controller-utils":1379},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/controller-utils");const r=new(e("../ResultTemplate").ResultTemplate)(a.ApprovalType.ResultSuccess),s={getValues:r.getValues.bind(r)};n.default=s}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/success.js"}],[6563,{"../../../../helpers/constants/design-system":6123,"@metamask/rpc-errors":2262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/rpc-errors"),r=e("../../../../helpers/constants/design-system");const s={id:"PENDING_TX_DROP_NOTICE",severity:r.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};const o={getAlerts:async function(e,t){const n=[];return t.unapprovedTxsCount>0&&n.push(s),n},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:r.TypographyVariant.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:r.TypographyVariant.H7,color:r.TextColor.textAlternative,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:r.JustifyContent.center},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{toNetwork:e.requestData.toNetworkConfiguration,fromNetwork:e.requestData.fromNetworkConfiguration}}}],cancelText:t("cancel"),submitText:t("switchNetwork"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData.toNetworkConfiguration),onCancel:()=>n.rejectPendingApproval(e.id,a.providerErrors.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=o}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/templates/switch-ethereum-chain.js"}],[6564,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function a(e){return e===undefined?undefined:"string"==typeof e?e:Array.isArray(e)?e.map(a):{key:e.key,element:e.name,props:e.properties,children:a(e.children)}}Object.defineProperty(n,"__esModule",{value:!0}),n.processError=function(e,t){const n=a(e)||t;if("string"!=typeof n)return n;return{key:"error",element:"ActionableMessage",props:{type:"danger",message:n}}},n.processHeader=function(e){return a(e)},n.processString=function(e,t){const n=a(e)||t;if("string"!=typeof n)return n;return r=n,function(e,t,n){let a=0,r=0;const s=Array.from(e.matchAll(t)),o=[];for(const t of s){const s=e.substring(a,t.index);s.length&&o.push(s);const i=n(t[1],r);o.push(i),a=t.index+t[0].length,r+=1}const i=e.substring(a);return i.length&&o.push(i),o}(r,/\*\*(.+?)\*\*/gu,((e,t)=>({key:`bold-${t}`,element:"b",children:e})));var r}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/util.ts"}],[6565,{"../../../../shared/constants/network":5139},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedSignSignaturePrimaryTypes=n.TYPED_SIGNATURE_VERSIONS=n.SPENDING_CAP_UNLIMITED_MSG=n.IGNORE_GAS_LIMIT_CHAIN_IDS=void 0;var a=e("../../../../shared/constants/network");n.IGNORE_GAS_LIMIT_CHAIN_IDS=[a.CHAINLIST_CHAIN_IDS_MAP.MANTLE],n.TYPED_SIGNATURE_VERSIONS={V1:"V1",V3:"V3",V4:"V4"},n.SPENDING_CAP_UNLIMITED_MSG="UNLIMITED MESSAGE",n.TypedSignSignaturePrimaryTypes={PERMIT:"Permit",ORDER:"Order"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/index.ts"}],[6622,{"../../../../shared/modules/selectors/util":5197,"../../../selectors/approvals":6856,"../../../selectors/selectors":6868,"@metamask/controller-utils":1379,reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsRedesignedConfirmationsDeveloperEnabled=function(e){return(0,o.getPreferences)(e).isRedesignedConfirmationsDeveloperEnabled},n.oldestPendingConfirmationSelector=void 0,n.pendingConfirmationsSelector=function(e){return(0,s.getPendingApprovals)(e).filter((({type:e})=>c.includes(e)))},n.pendingConfirmationsSortedSelector=u;var a=e("@metamask/controller-utils"),r=e("reselect"),s=e("../../../selectors/approvals"),o=e("../../../selectors/selectors"),i=e("../../../../shared/modules/selectors/util");const c=[a.ApprovalType.PersonalSign,a.ApprovalType.EthSignTypedData,a.ApprovalType.Transaction];function u(e){return(0,s.getPendingApprovals)(e).filter((({type:e})=>c.includes(e))).sort(((e,t)=>e.time-t.time))}const l=(0,r.createSelector)(u,(e=>e[0]));n.oldestPendingConfirmationSelector=(0,i.createDeepEqualSelector)(l,(e=>e))}}},{package:"$root$",file:"ui/pages/confirmations/selectors/confirm.ts"}],[6627,{"../../../../shared/constants/common":5125,"../../../../shared/constants/gas":5130,"../../../../shared/modules/Numeric":5169},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.SWAPS_QUOTES_ERROR=n.SWAPS_NO_QUOTES=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NO_RESOLUTION_FOR_DOMAIN=n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE=n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.FLOAT_TOKENS_ERROR=n.ENS_UNKNOWN_ERROR=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=void 0;var a=e("../../../../shared/constants/gas"),r=e("../../../../shared/modules/Numeric"),s=e("../../../../shared/constants/common");const o=n.MIN_GAS_PRICE_DEC="0",i=n.MIN_GAS_PRICE_HEX=parseInt(o,10).toString(16);n.MIN_GAS_LIMIT_DEC=new r.Numeric("21000",10),n.MAX_GAS_LIMIT_DEC="7920027",n.HIGH_FEE_WARNING_MULTIPLIER=1.5,n.MIN_GAS_PRICE_GWEI=new r.Numeric(i,16,s.EtherDenomination.WEI).toDenomination(s.EtherDenomination.GWEI).round(1).toPrefixedHexString(),n.MIN_GAS_TOTAL=new r.Numeric(a.MIN_GAS_LIMIT_HEX,16).times(new r.Numeric(i,16,s.EtherDenomination.WEI)).toPrefixedHexString(),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb",n.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd",n.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE="0xf242432a",n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR="insufficientFundsForGas",n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens",n.NEGATIVE_ETH_ERROR="negativeETH",n.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR="negativeOrZeroAmountToken",n.FLOAT_TOKENS_ERROR="floatAmountToken",n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient",n.REQUIRED_ERROR="required",n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient",n.CONTRACT_ADDRESS_ERROR="contractAddressError",n.CONFUSING_ENS_ERROR="confusingEnsDomain",n.ENS_UNKNOWN_ERROR="ensUnknownError",n.NO_RESOLUTION_FOR_DOMAIN="noDomainResolution",n.SWAPS_NO_QUOTES="swapQuotesNotAvailableErrorTitle",n.SWAPS_QUOTES_ERROR="swapFetchingQuotesErrorTitle",n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.constants.js"}],[6628,{"../../../../app/scripts/lib/util":134,"../../../../shared/constants/transaction":5153,"../../../../shared/modules/Numeric":5169,"./send.constants":6627,"@metamask/abi-utils":1262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const a=new o.Numeric(e,16),r=new o.Numeric(t,16).times(new o.Numeric(.9,10)).round(0),s=a.times(new o.Numeric(n,10)).round(0);if(a.greaterThanOrEqualTo(r))return e;if(s.lessThan(r))return s.toString();return r.toString()},n.ellipsify=function(e,t=6,n=4){if(!e)return"";return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC1155TransferData=l,n.generateERC20TransferData=c,n.generateERC721TransferData=u,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:a}){switch(e.standard){case s.TokenStandard.ERC721:return u({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC1155:return l({toAddress:n,fromAddress:t,tokenId:e.tokenId});case s.TokenStandard.ERC20:default:return c({toAddress:n,amount:a,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:a="0x0",primaryCurrency:r=undefined}){let s=new o.Numeric(e,16).add(new o.Numeric(a,16)),i=new o.Numeric(t,16);null!=r&&(s=s.applyConversionRate(n),i=i.applyConversionRate(n));return i.greaterThanOrEqualTo(s)},n.isERC1155BalanceSufficient=function({amount:e="0",tokenBalance:t}){const n=new o.Numeric(e,16);return new o.Numeric(t,10).greaterThanOrEqualTo(n)},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const a=new o.Numeric(e,16).shiftedBy(n);return new o.Numeric(t,16).greaterThanOrEqualTo(a)};var a=e("@metamask/abi-utils"),r=e("../../../../app/scripts/lib/util"),s=e("../../../../shared/constants/transaction"),o=e("../../../../shared/modules/Numeric"),i=e("./send.constants");function c({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?i.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call((0,a.encode)(["address","uint256"],[(0,r.addHexPrefix)(e),(0,r.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function u({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?i.NFT_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,a.encode)(["address","address","uint256"],[(0,r.addHexPrefix)(t),(0,r.addHexPrefix)(e),BigInt(n)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function l({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n,amount:s="1",data:o="0"}){return n?i.NFT_SAFE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call((0,a.encode)(["address","address","uint256","uint256","bytes"],[(0,r.addHexPrefix)(t),(0,r.addHexPrefix)(e),BigInt(n),(0,r.addHexPrefix)(s),(0,r.addHexPrefix)(o)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.utils.js"}],[6630,{"../../../../shared/constants/signatures":5146,"../../../../shared/modules/transaction.utils":5201,"../../../helpers/utils/util":6172,"../constants":6565,"@metamask/transaction-controller":2647},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toPunycodeURL=n.parseSanitizeTypedDataMessage=n.isValidASCIIURL=n.isSignatureTransactionType=n.isSIWESignatureRequest=n.isPermitSignatureRequest=n.isOrderSignatureRequest=n.SIGNATURE_TRANSACTION_TYPES=void 0;var a=e("@metamask/transaction-controller"),r=e("../../../../shared/constants/signatures"),s=e("../../../../shared/modules/transaction.utils"),o=e("../../../helpers/utils/util"),i=e("../constants");const c=n.SIGNATURE_TRANSACTION_TYPES=[a.TransactionType.personalSign,a.TransactionType.signTypedData],u=e=>e&&c.includes(e.type);n.isSignatureTransactionType=u;n.parseSanitizeTypedDataMessage=e=>{const{message:t,primaryType:n,types:a}=(0,s.parseTypedDataMessage)(e);return{sanitizedMessage:(0,o.sanitizeMessage)(t,n,a),primaryType:n}};n.isSIWESignatureRequest=e=>{var t;return Boolean(null==e||null===(t=e.msgParams)||void 0===t||null===(t=t.siwe)||void 0===t?void 0:t.isSIWEMessage)};n.isOrderSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:a}=(0,s.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return r.PRIMARY_TYPES_ORDER.includes(a)};n.isPermitSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:a}=(0,s.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return r.PRIMARY_TYPES_PERMIT.includes(a)};n.isValidASCIIURL=e=>{try{return null==e?void 0:e.includes(new URL(e).host)}catch(e){return console.error(e),!1}};n.toPunycodeURL=e=>{try{return new URL(e).href}catch(e){return console.error(`Failed to convert URL to Punycode: ${e}`),undefined}}}}},{package:"$root$",file:"ui/pages/confirmations/utils/confirm.ts"}],[6845,{"../../../shared/constants/common":5125,"../../../shared/constants/network":5139,"../../../shared/constants/swaps":5149,"../../../shared/lib/fetch-with-cache":5158,"../../../shared/lib/swaps-utils":5163,"../../../shared/lib/transactions-controller-utils":5167,"../../../shared/modules/conversion.utils":5176,"../../../shared/modules/hexstring-utils":5182,"../../../shared/modules/swaps.utils":5200,"../../helpers/utils/confirm-tx.util":6150,"../../store/actions":6875,"bignumber.js":3486},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=n.TOKEN_VALIDATORS=n.StxErrorTypes=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:g},functionName:"fetchAggregatorMetadata"}),a={};for(const e in n)(0,p.validateData)(A,n[e],t)&&(a[e]=n[e]);return a},n.fetchBlockedTokens=async function(e){const t=(0,p.getBaseApi)("blockedTokens",e);return await(0,u.default)({url:`${t}`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:g},functionName:"fetchBlockedTokens"})},n.fetchSwapsFeatureFlags=async function(){const e=s.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},n.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(v,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:a,ProposeGasPrice:r,FastGasPrice:s}=n;return{safeLow:a,average:r,fast:s}},n.fetchToken=async function(e,t){const n=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${n}?address=${e}`,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:g},functionName:"fetchToken"})},n.fetchTokenPrice=async function(e){var t;const n=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,a=await(0,u.default)({url:`https://price.api.cx.metamask.io/v2/chains/1/${n}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==a||null===(t=a[e])||void 0===t?void 0:t.eth},n.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),n=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:g},functionName:"fetchTokens"});return[s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...n.filter((n=>(0,p.validateData)(S,n,t,false)&&!((0,o.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,o.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=await I(e);return t.reduce(((e,t,n)=>({...e,[t.address]:{index:String(n)}})),{})},n.fetchTopAssetsList=I,n.formatSwapsValueForDisplay=N,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=n.getClassNameForCharLength=void 0,n.getRenderableNetworkFeesForQuote=w,n.getSwapsLivenessForNetwork=n.getSwap1559GasFeeEstimates=void 0,n.getTransaction1559GasFeeEstimates=k,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=void 0,n.quotesToRenderableData=function({quotes:e,gasPriceTrade:t,gasPriceApprove:n,conversionRate:a,currentCurrency:s,approveGas:i,tokenConversionRates:c,chainId:u,smartTransactionEstimatedGas:l,nativeCurrencySymbol:p,multiLayerL1ApprovalFeeTotal:T}){return Object.values(e).map((e=>{const{destinationAmount:f=0,sourceAmount:g=0,sourceTokenInfo:h,destinationTokenInfo:E,slippage:S,aggType:y,aggregator:A,gasEstimateWithRefund:_,averageGas:v,fee:I,trade:O,multiLayerL1TradeFeeTotal:C}=e;let k=null;null!==C&&null!==T?k=(0,m.sumHexes)(C||"0x0",T||"0x0"):null!==C&&(k=C);const P=(0,d.calcTokenAmount)(g,h.decimals).toString(10),D=(0,d.calcTokenAmount)(f,E.decimals).toPrecision(8);let b=null,M=null,F=null,x=null;({feeInFiat:b,feeInEth:M,rawNetworkFees:F,rawEthFee:x}=w({tradeGas:_||(0,m.decimalToHex)(v||8e5),approveGas:i,gasPriceTrade:t,gasPriceApprove:n,currentCurrency:s,conversionRate:a,tradeValue:O.value,sourceSymbol:h.symbol,sourceAmount:g,chainId:u,multiLayerL1FeeTotal:k})),l&&({feeInFiat:b,feeInEth:M}=R({chainId:u,currentCurrency:s,conversionRate:a,nativeCurrencySymbol:p,feeInWeiDec:l.feeEstimate}));const L=new r.BigNumber(100-S).div(100),U=new r.BigNumber(D).times(L).toFixed(6),G=c[E.address],B=(0,o.isSwapsDefaultTokenSymbol)(E.symbol,u)?(0,d.calcTokenAmount)(f,E.decimals).minus(x,10):new r.BigNumber(G||0,10).times((0,d.calcTokenAmount)(f,E.decimals),10).minus(x,10);let H,W=S;return"AGG"===y?H="swapAggregator":"RFQ"===y?(H="swapRequestForQuotation",W=0):H="DEX"===y?"swapDecentralizedExchange":"CONTRACT"===y?"swapDirectContract":"swapUnknown",{aggId:A,amountReceiving:`${D} ${E.symbol}`,destinationTokenDecimals:E.decimals,destinationTokenSymbol:E.symbol,destinationTokenValue:N(D),destinationIconUrl:E.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:H,feeInEth:M,detailedNetworkFees:`${M} (${b})`,networkFees:b,quoteSource:y,rawNetworkFees:F,slippage:W,sourceTokenDecimals:h.decimals,sourceTokenSymbol:h.symbol,sourceTokenValue:P,sourceTokenIconUrl:h.iconUrl,ethValueOfTrade:B,minimumAmountReceived:U,metaMaskFee:I}}))},n.showRemainingTimeInMinAndSec=void 0;var a,r=e("bignumber.js"),s=e("../../../shared/constants/swaps"),o=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/confirm-tx.util"),u=(a=e("../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},l=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),T=e("../../../shared/constants/common"),f=e("../../store/actions");const g=3e5,h="usd",E={"X-Client-Id":s.SWAPS_CLIENT_ID},S=n.TOKEN_VALIDATORS=[{property:"address",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],y=S.slice(0,2),A=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],_=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),v=[{property:"SafeGasPrice",type:"string",validator:_},{property:"ProposeGasPrice",type:"string",validator:_},{property:"FastGasPrice",type:"string",validator:_}];async function I(e){const t=(0,p.getBaseApi)("topAssets",e);return(await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:E},cacheOptions:{cacheRefreshTime:g}})||[]).filter((e=>(0,p.validateData)(y,e,t)))}const R=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:a,nativeCurrencySymbol:r,feeInWeiDec:o})=>{var i;const u=(0,m.decimalToHex)(o),l=(0,m.getValueFromWeiHex)({value:u,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:n,numberOfDecimals:2});let p;p=t===h?d:(0,m.getValueFromWeiHex)({value:u,toCurrency:h,conversionRate:a,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,c.formatCurrency)(d,t),feeInEth:`${l} ${r||(null===(i=s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:l}};function w({tradeGas:e,approveGas:t,gasPriceTrade:n,gasPriceApprove:a,currentCurrency:i,conversionRate:u,USDConversionRate:l,tradeValue:p,sourceSymbol:f,sourceAmount:g,chainId:E,nativeCurrencySymbol:S,multiLayerL1FeeTotal:y}){const A=(0,d.calcGasTotal)(e,n),_=t?(0,d.calcGasTotal)(t,a):"0x0",v=(0,m.sumHexes)(A,_,y||"0x0"),I=new r.BigNumber(p,16).minus((0,o.isSwapsDefaultTokenSymbol)(f,E)?g:0,10).toString(16),R=new r.BigNumber(v,16).plus(I,16).toString(16),w=(0,m.getValueFromWeiHex)({value:R,toDenomination:T.EtherDenomination.ETH,numberOfDecimals:5}),N=(0,m.getValueFromWeiHex)({value:R,toCurrency:i,conversionRate:u,numberOfDecimals:2}),O=(0,c.formatCurrency)(N,i);let C;C=i===h?N:(0,m.getValueFromWeiHex)({value:R,toCurrency:h,conversionRate:l,numberOfDecimals:2});return{rawNetworkFees:N,feeInUsd:C,rawEthFee:w,feeInFiat:O,feeInEth:`${w} ${S||s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[E].symbol}`,nonGasFee:I}}function N(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new r.BigNumber(t).toFixed()),t}n.getFeeForSmartTransaction=R;n.getClassNameForCharLength=(e,t)=>{let n;return n=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${n}`};n.isContractAddressValid=(e,t)=>!(!e||!s.ALLOWED_CONTRACT_ADDRESSES[t])&&s.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const O=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return s.ETHEREUM;case i.CHAIN_IDS.BSC:return s.BSC;case i.CHAIN_IDS.POLYGON:return s.POLYGON;case i.CHAIN_IDS.GOERLI:return s.GOERLI;case i.CHAIN_IDS.AVALANCHE:return s.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return s.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return s.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return s.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return s.LINEA;case i.CHAIN_IDS.BASE:return s.BASE;default:return""}};n.getNetworkNameByChainId=O;n.getSwapsLivenessForNetwork=(e,t={})=>{const n=O(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[n])return{swapsFeatureIsLive:!1};return t[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let C=n.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case C.unavailable:case C.regularTxPending:return t("smartSwapsErrorUnavailable");case C.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())};async function k(e,t,n){const a=await(0,f.estimateGasFee)({transactionParams:e,chainId:n}),r=null==a?void 0:a.estimates,{maxFeePerGas:s}=(null==r?void 0:r.high)??{},{maxPriorityFeePerGas:o}=(null==r?void 0:r.high)??{};return{baseAndPriorityFeePerGas:o?(0,m.addHexes)(t,o):undefined,maxFeePerGas:s,maxPriorityFeePerGas:o}}n.getSwap1559GasFeeEstimates=async(e,t,n,a)=>{const r=(0,m.decGWEIToHexWEI)(n);return{tradeGasFeeEstimates:await k(e,r,a),approveGasFeeEstimates:t?await k(t,r,a):undefined,estimatedBaseFee:r}}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[6854,{"../../shared/lib/multichain":5161,"@metamask/keyring-api":1799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getInternalAccounts=o,n.getSelectedInternalAccount=i,n.hasCreatedBtcMainnetAccount=function(e){return c(e,r.isBtcMainnetAddress)},n.hasCreatedBtcTestnetAccount=function(e){return c(e,r.isBtcTestnetAddress)},n.isSelectedInternalAccountBtc=function(e){return s(i(e))},n.isSelectedInternalAccountEth=function(e){const t=i(e),{Eoa:n,Erc4337:r}=a.EthAccountType;return Boolean(t&&(t.type===n||t.type===r))};var a=e("@metamask/keyring-api"),r=e("../../shared/lib/multichain");function s(e){const{P2wpkh:t}=a.BtcAccountType;return Boolean(e&&e.type===t)}function o(e){return Object.values(e.metamask.internalAccounts.accounts)}function i(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function c(e,t){return o(e).some((e=>s(e)&&t(e.address)))}}}},{package:"$root$",file:"ui/selectors/accounts.ts"}],[6856,{"../../shared/modules/selectors/util":5197,reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getApprovalFlows=function(e){return e.metamask.approvalFlows},n.getApprovalRequestsByType=void 0,n.getPendingApprovals=s,n.hasPendingApprovals=function(e,t,n){const a=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(n)return a.some(n);return a.length>0},n.pendingApprovalsSortedSelector=function(e){return s(e).sort(((e,t)=>e.time-t.time))},n.selectPendingApproval=void 0;var a=e("reselect"),r=e("../../shared/modules/selectors/util");function s(e){return Object.values(e.metamask.pendingApprovals??[])}n.getApprovalRequestsByType=(e,t,n)=>{const a=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return n?a.filter(n):a};const o=(0,a.createSelector)(s,((e,t)=>t),((e,t)=>e.find((({id:e})=>e===t))));n.selectPendingApproval=(0,r.createDeepEqualSelector)(o,(e=>e))}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[6857,{"../../shared/constants/gas":5130,"../../shared/lib/transactions-controller-utils":5167,"../../shared/modules/conversion.utils":5176,"../../shared/modules/gas.utils":5181,"../../shared/modules/selectors/networks":5195,"../../shared/modules/string-utils":5199,"../ducks/metamask/metamask":6111,"../helpers/utils/confirm-tx.util":6150,"../helpers/utils/tx-helper":6171,"./custom-gas":6858,"./selectors":6868,"./transactions":6873,"@metamask/transaction-controller":2647,reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0,n.selectIsMaxValueEnabled=b,n.selectMaxValue=void 0,n.selectTransactionAvailableBalance=D,n.selectTransactionFeeById=P,n.use4ByteResolutionSelector=n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.selectTransactionValue=void 0;var a,r=e("reselect"),s=e("@metamask/transaction-controller"),o=(a=e("../helpers/utils/tx-helper"))&&a.__esModule?a:{default:a},i=e("../helpers/utils/confirm-tx.util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),l=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/string-utils"),p=e("../../shared/lib/transactions-controller-utils"),m=e("../../shared/modules/conversion.utils"),T=e("../../shared/modules/selectors/networks"),f=e("./custom-gas"),g=e("./selectors"),h=e("./transactions");const E=e=>(0,h.getUnapprovedTransactions)(e),S=e=>e.metamask.unapprovedPersonalMsgs,y=e=>e.metamask.unapprovedDecryptMsgs,A=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,_=e=>e.metamask.unapprovedTypedMessages;n.unconfirmedTransactionsListSelector=(0,r.createSelector)(E,S,y,A,_,T.getCurrentChainId,((e={},t={},n={},a={},r={},s)=>(0,o.default)(e,t,n,a,r,s)||[])),n.unconfirmedTransactionsHashSelector=(0,r.createSelector)(E,S,y,A,_,T.getCurrentChainId,((e={},t={},n={},a={},r={},s)=>({...Object.keys(e).reduce(((t,n)=>{const a={...t};return e[n].chainId===s&&(a[n]=e[n]),a}),{}),...t,...n,...a,...r}))),n.unconfirmedMessagesHashSelector=(0,r.createSelector)(S,y,A,_,((e={},t={},n={},a={})=>({...e,...t,...n,...a})));n.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const v=e=>e.metamask.currentCurrency;n.currentCurrencySelector=v;const I=e=>{var t;return null===(t=e.metamask.currencyRates[(0,T.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};n.conversionRateSelector=I;const R=e=>e.confirmTransaction.txData;n.txDataSelector=R;const w=(0,r.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),N=(0,r.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),O=(0,r.createSelector)(R,(e=>e&&e.txParams||{})),C=n.tokenAddressSelector=(0,r.createSelector)(O,(e=>e&&e.to)),k=(n.sendTokenTokenAmountAndToAddressSelector=(0,r.createSelector)(N,w,((e,t)=>{let n="",a="0";if(e&&e.length){n=e._to;let r=e._value.toString();t&&(r=(0,p.calcTokenAmount)(r,t).toFixed()),a=(0,i.roundExponential)(r)}return{toAddress:n,tokenAmount:a}})),n.contractExchangeRateSelector=(0,r.createSelector)((e=>(0,g.getTokenExchangeRates)(e)),C,((e,t)=>e[Object.keys(e).find((e=>(0,d.isEqualCaseInsensitive)(e,t)))])),function(e,t){var n,a,r,o;const d=v(e),p=I(e),T=(0,c.getNativeCurrency)(e),h=(0,c.getGasFeeEstimates)(e)||{},E=(0,c.getGasEstimateType)(e),S=(0,g.checkNetworkAndAccountSupports1559)(e),y={gasLimit:(null===(n=t.txParams)||void 0===n?void 0:n.gas)??"0x0"};if(S){var A;const{gasPrice:e="0"}=h,n=h[t.userFeeLevel]||{};if((null===(A=t.txParams)||void 0===A?void 0:A.type)===s.TransactionEnvelopeType.legacy){var _;y.gasPrice=(null===(_=t.txParams)||void 0===_?void 0:_.gasPrice)??(0,m.decGWEIToHexWEI)(e)}else{var R,w,N,O;const{suggestedMaxPriorityFeePerGas:a,suggestedMaxFeePerGas:r}=n;y.maxFeePerGas=null===(R=t.txParams)||void 0===R||!R.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?(0,m.decGWEIToHexWEI)(r||e):null===(w=t.txParams)||void 0===w?void 0:w.maxFeePerGas,y.maxPriorityFeePerGas=null===(N=t.txParams)||void 0===N||!N.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&a?a&&(0,m.decGWEIToHexWEI)(a)||y.maxFeePerGas:null===(O=t.txParams)||void 0===O?void 0:O.maxPriorityFeePerGas,y.baseFeePerGas=(0,m.decGWEIToHexWEI)(h.estimatedBaseFee)}}else switch(E){case u.GasEstimateTypes.feeMarket:case u.GasEstimateTypes.none:y.gasPrice=(null===(a=t.txParams)||void 0===a?void 0:a.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:y.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??(0,m.decGWEIToHexWEI)(h.gasPrice);break;case u.GasEstimateTypes.legacy:y.gasPrice=(null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)??(0,f.getAveragePriceEstimateInHexWEI)(e)}const{txParams:{value:C="0x0"}={}}=t,k=(0,m.getValueFromWeiHex)({value:C,fromCurrency:T,toCurrency:d,conversionRate:p,numberOfDecimals:2}),P=(0,m.getValueFromWeiHex)({value:C,fromCurrency:T,toCurrency:T,conversionRate:p,numberOfDecimals:6}),D=(0,l.getMinimumGasTotalInHexWei)(y),b=(0,l.getMaximumGasTotalInHexWei)(y),M=(0,i.getTransactionFee)({value:D,fromCurrency:T,toCurrency:d,numberOfDecimals:2,conversionRate:p}),F=(0,i.getTransactionFee)({value:b,fromCurrency:T,toCurrency:d,numberOfDecimals:2,conversionRate:p}),x=(0,i.getTransactionFee)({value:D,fromCurrency:T,toCurrency:T,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:C,fiatTransactionAmount:k,ethTransactionAmount:P,hexMinimumTransactionFee:D,fiatMinimumTransactionFee:M,hexMaximumTransactionFee:b,fiatMaximumTransactionFee:F,ethTransactionFee:x,fiatTransactionTotal:(0,i.addFiat)(M,k),ethTransactionTotal:(0,i.addEth)(x,P),hexTransactionTotal:(0,m.sumHexes)(C,D),gasEstimationObject:y}});function P(e,t){const n=(0,h.selectTransactionMetadata)(e,t);return k(e,n??{})}function D(e,t){var n;return null===(n=(0,g.getMetaMaskAccounts)(e)[(0,h.selectTransactionSender)(e,t)])||void 0===n?void 0:n.balance}function b(e,t){var n;return(null===(n=e.confirmTransaction.maxValueMode)||void 0===n?void 0:n[t])??!1}n.transactionFeeSelector=k;const M=n.selectMaxValue=(0,r.createSelector)(P,D,((e,t)=>t&&e.hexMaximumTransactionFee?(0,m.subtractHexes)(t,e.hexMaximumTransactionFee):undefined));n.selectTransactionValue=(0,r.createSelector)(b,M,h.selectTransactionMetadata,((e,t,n)=>{var a;return e?t:null==n||null===(a=n.txParams)||void 0===a?void 0:a.value}))}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[6858,{"../../app/scripts/lib/util":134,"../../shared/constants/common":5125,"../../shared/constants/gas":5130,"../../shared/lib/transactions-controller-utils":5167,"../../shared/modules/Numeric":5169,"../../shared/modules/conversion.utils":5176,"../ducks/metamask/metamask":6111,"../ducks/send":6116,"../helpers/utils/confirm-tx.util":6150,"../helpers/utils/formatters":6152,"./selectors":6868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=E,n.getAverageEstimate=g,n.getAveragePriceEstimateInHexWEI=function(e){return y(g(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===A(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=T,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,a.addHexPrefix)(t||n))},n.getFastPriceEstimate=h,n.getFastPriceEstimateInHexWEI=function(e){return y(h(e)||"0x0")},n.getGasPriceInHexWei=y,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},n.getIsGasEstimatesFetched=A,n.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.none},n.getRenderableConvertedCurrencyFee=function(e,t,n,a){const o=E(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,r.decEthToConvertedCurrency)(o,n,a);return(0,s.formatCurrency)(i,n)},n.getRenderableEthFee=function(e,t,n=9,a="ETH"){const r=E(new d.Numeric(e,10).toBase(16).toString(),t,n);return(0,o.formatETHFee)(r,a)},n.getSafeLowEstimate=f,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,i.getGasPrice)(e):T(e),a=h(e);if(!n||!a)return!1;return new d.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*a),10)},n.isCustomPriceSafe=function(e){const t=f(e),n=T(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.isCustomPriceSafeForCustomNetwork=function(e){const t=g(e),n=T(e);if(!n)return!0;if(!t)return!1;return new d.Numeric(n,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},n.priceEstimateToWei=S;var a=e("../../app/scripts/lib/util"),r=e("../../shared/modules/conversion.utils"),s=e("../helpers/utils/confirm-tx.util"),o=e("../helpers/utils/formatters"),i=e("../ducks/send"),c=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),l=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e("./selectors");function T(e){return e.gas.customData.price}function f(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function g(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function h(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===c.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function E(e,t,n=9){return new d.Numeric((0,l.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(n).toBase(10).toString()}function S(e){return new d.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function y(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,a.addHexPrefix)(S(t))}function A(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==c.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[6859,{"../../shared/constants/onboarding":5142,"../helpers/constants/routes":6129},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRouteAfterMetaMetricsOptIn=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===a.FirstTimeFlowType.create)return r.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===a.FirstTimeFlowType.import)return r.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===a.FirstTimeFlowType.restore)return r.ONBOARDING_SECURE_YOUR_WALLET_ROUTE;return r.DEFAULT_ROUTE},n.getFirstTimeFlowTypeRouteAfterUnlock=function(e){const{firstTimeFlowType:t}=e.metamask;if(t===a.FirstTimeFlowType.create)return r.ONBOARDING_CREATE_PASSWORD_ROUTE;if(t===a.FirstTimeFlowType.import)return r.ONBOARDING_IMPORT_WITH_SRP_ROUTE;if(t===a.FirstTimeFlowType.restore)return r.ONBOARDING_METAMETRICS;return r.DEFAULT_ROUTE},n.getOnboardingInitiator=void 0;var a=e("../../shared/constants/onboarding"),r=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[6860,{"../pages/confirmations/selectors/confirm":6622,"./accounts":6854,"./approvals":6856,"./confirm-transaction":6857,"./custom-gas":6858,"./first-time-flow":6859,"./metametrics":6864,"./permissions":6867,"./selectors":6868,"./transactions":6873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("../pages/confirmations/selectors/confirm");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var r=e("./confirm-transaction");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var s=e("./custom-gas");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./permissions");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./selectors");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=e("./transactions");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}}))}));var d=e("./approvals");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===d[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}}))}));var p=e("./accounts");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[6864,{reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=n.getParticipateInMetaMetrics=n.getLatestMetricsEventTimestamp=n.getDataCollectionForMarketing=void 0;var a=e("reselect");const r=e=>e.metamask.fragments;n.selectFragments=r;n.getDataCollectionForMarketing=e=>e.metamask.dataCollectionForMarketing;n.getParticipateInMetaMetrics=e=>Boolean(e.metamask.participateInMetaMetrics);n.getLatestMetricsEventTimestamp=e=>e.metamask.latestNonAnonymousEventTimestamp;const s=n.selectFragmentBySuccessEvent=(0,a.createSelector)(r,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),o=n.selectFragmentById=(0,a.createSelector)(r,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectMatchingFragment=(0,a.createSelector)(((e,t)=>s(e,t.fragmentOptions)),((e,t)=>o(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[6865,{"../../shared/constants/multichain/assets":5137,"../../shared/constants/multichain/networks":5138,"../../shared/constants/network":5139,"../../shared/modules/Numeric":5169,"../../shared/modules/selectors/networks":5195,"../ducks/metamask/metamask":6111,"./accounts":6854,"./selectors":6868,"@metamask/keyring-api":1799,"@metamask/utils":2765,"prop-types":4403,reselect:4676},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkPropType=n.InternalAccountPropType=void 0,n.getImageForChainId=function(e){const t=e;return p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[t]},n.getMultichainBalances=I,n.getMultichainCoinRates=void 0,n.getMultichainConversionRate=function(e,t){var n;const{ticker:a}=S(e,t);return E(e,t)?(0,l.getConversionRate)(e):null===(n=R(e))||void 0===n||null===(n=n[a.toLowerCase()])||void 0===n?void 0:n.conversionRate},n.getMultichainCurrencyImage=A,n.getMultichainCurrentChainId=function(e){const{chainId:t}=S(e);return t},n.getMultichainCurrentCurrency=function(e,t){const n=(0,f.getCurrentCurrency)(e);if(E(e,t))return n;return n&&"usd"===n.toLowerCase()?"usd":S(e,t).ticker},n.getMultichainCurrentNetwork=y,n.getMultichainDefaultToken=_,n.getMultichainIsBitcoin=function(e,t){const n=E(e,t),{symbol:a}=_(e,t);return!n&&"BTC"===a},n.getMultichainIsEvm=E,n.getMultichainIsMainnet=function(e,t){const n=t??(0,T.getSelectedInternalAccount)(e),a=S(e,n);if(E(e,t))return(0,f.getIsMainnet)(e);const r=u.MULTICHAIN_ACCOUNT_TYPE_TO_MAINNET[n.type];return a.chainId===r??!1},n.getMultichainIsTestnet=v,n.getMultichainNativeCurrency=function(e,t){return E(e,t)?(0,l.getNativeCurrency)(e):S(e,t).ticker},n.getMultichainNativeCurrencyImage=function(e,t){return A(e,t)},n.getMultichainNetwork=h,n.getMultichainNetworkProviders=g,n.getMultichainProviderConfig=S,n.getMultichainSelectedAccountCachedBalance=w,n.getMultichainSelectedAccountCachedBalanceIsZero=void 0,n.getMultichainShouldShowFiat=function(e,t){const n=t??(0,T.getSelectedInternalAccount)(e),a=v(e,n),r=!a;return E(e,n)?(0,f.getShouldShowFiat)(e):r||a&&(0,f.getShowFiatInTestnets)(e)},n.isChainIdMainnet=function(e){return e===p.CHAIN_IDS.MAINNET};var a,r=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("@metamask/keyring-api"),o=e("@metamask/utils"),i=e("reselect"),c=e("../../shared/modules/Numeric"),u=e("../../shared/constants/multichain/networks"),l=e("../ducks/metamask/metamask"),d=e("../../shared/constants/multichain/assets"),p=e("../../shared/constants/network"),m=e("../../shared/modules/selectors/networks"),T=e("./accounts"),f=e("./selectors");n.MultichainNetworkPropType=r.default.shape({nickname:r.default.string.isRequired,isEvmNetwork:r.default.bool.isRequired,chainId:r.default.string,network:r.default.oneOfType([r.default.shape({rpcUrl:r.default.string,type:r.default.string.isRequired,chainId:r.default.string.isRequired,ticker:r.default.string.isRequired,rpcPrefs:r.default.shape({blockExplorerUrl:r.default.string,imageUrl:r.default.string}),nickname:r.default.string,id:r.default.string}),r.default.shape({chainId:r.default.string.isRequired,ticker:r.default.string.isRequired,rpcPrefs:r.default.shape({blockExplorerUrl:r.default.string,imageUrl:r.default.string})})]).isRequired}),n.InternalAccountPropType=r.default.shape({id:r.default.string.isRequired,address:r.default.string.isRequired,metadata:r.default.shape({name:r.default.string.isRequired,snap:r.default.shape({id:r.default.string.isRequired,name:r.default.string,enabled:r.default.bool}),keyring:r.default.shape({type:r.default.string.isRequired}).isRequired}).isRequired,type:r.default.string.isRequired});function g(e){return Object.values(u.MULTICHAIN_PROVIDER_CONFIGS)}function h(e,t){if(E(e,t)){var n;const t=(0,m.getCurrentChainId)(e),a=(0,m.getProviderConfig)(e),r=t;a.rpcPrefs={...a.rpcPrefs,imageUrl:p.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[r]};return{nickname:(null===(n=(0,m.getNetworkConfigurationsByChainId)(e)[t])||void 0===n?void 0:n.name)??a.rpcUrl,isEvmNetwork:!0,chainId:`${o.KnownCaipNamespace.Eip155}:${Number(t)}`,network:a}}const a=t??(0,T.getSelectedInternalAccount)(e),r=g().find((e=>e.isAddressCompatible(a.address)));if(!r)throw new Error("Could not find non-EVM provider for the current configuration. This should never happen.");return{nickname:r.nickname,isEvmNetwork:!1,chainId:null==r?void 0:r.chainId,network:r}}function E(e,t){const n=(0,l.getCompletedOnboarding)(e),a=t??(0,f.getMaybeSelectedInternalAccount)(e);return!n||!a||(0,s.isEvmAccountType)(a.type)}function S(e,t){return h(e,t).network}function y(e,t){return S(e,t)}function A(e,t){var n;if(E(e,t))return(0,f.getNativeCurrencyImage)(e);return null===(n=S(e,t).rpcPrefs)||void 0===n?void 0:n.imageUrl}function _(e,t){var n;return{symbol:E(e,t)?(null===(n=(0,m.getProviderConfig)(e))||void 0===n?void 0:n.ticker)??"ETH":S(e,t).ticker}}function v(e,t){const n=S(e,t??(0,T.getSelectedInternalAccount)(e));return E(e,t)?p.TEST_NETWORK_IDS.includes(n.chainId):n.chainId===u.MultichainNetworks.BITCOIN_TESTNET}function I(e){return e.metamask.balances}const R=e=>e.metamask.rates;function w(e){return E(e)?(0,f.getSelectedAccountCachedBalance)(e):function(e){var t,n;const a=I(e),r=(0,T.getSelectedInternalAccount)(e),s=y(e),o=null===(t=d.MULTICHAIN_NETWORK_TO_ASSET_TYPES[s.chainId])||void 0===t?void 0:t[0];return null==a||null===(n=a[r.id])||void 0===n||null===(n=n[o])||void 0===n?void 0:n.amount}(e)}n.getMultichainCoinRates=R;n.getMultichainSelectedAccountCachedBalanceIsZero=(0,i.createSelector)([E,w],((e,t)=>{const n=e?16:10;return new c.Numeric(t,n).isZero()}))}}},{package:"$root$",file:"ui/selectors/multichain.ts"}]],[],{});