import{a as _s,b as cd,c as Zi,d as md}from"./chunk-UBBGQ4GC.js";import{a as Ot,b as od,c as td,d as Eo}from"./chunk-T3VTWFK3.js";import{a as Is,b as Xu,c as ju,d as de,e as Qu,f as X,g as xs,h as nd,l as rd,m as sd,n as vo}from"./chunk-M4UOXZNH.js";import{a as hs,b as ed}from"./chunk-C5ZY4QOR.js";import{a as ad}from"./chunk-V56JAUMS.js";import{a as $t}from"./chunk-EJPYWFCE.js";import{a as id}from"./chunk-UMI2AQQA.js";import{a as Ss}from"./chunk-TE6MX46F.js";import"./chunk-OQY6TZK5.js";import{a as Su}from"./chunk-DEHONQ75.js";import"./chunk-NNGYAC32.js";import"./chunk-6LE5AZMI.js";import{a as ce,b as _u}from"./chunk-QI6RFYBQ.js";import{a as xu,b as hu}from"./chunk-VBFVRBFM.js";import{a as yu}from"./chunk-HOCK327A.js";import{b as Au,k as Cu}from"./chunk-G6W7C4O7.js";import{a as Tu,b as Iu}from"./chunk-VHCHJ6O6.js";import{a as au,b as mu,c as es,e as pu}from"./chunk-5TIJ4M5X.js";import{a as ln,b as uu,j as du,k as fu,m as lu}from"./chunk-P52TMJKP.js";import"./chunk-ZH5Z2RVX.js";import"./chunk-P4KG7HC3.js";import"./chunk-2YRNNTO4.js";import{a as cu}from"./chunk-FCM3KMN7.js";import"./chunk-SVCSAZ2J.js";import{a as Kn,b as ns}from"./chunk-PYDL4HCD.js";import{a as gu}from"./chunk-FJWSNGLB.js";import{a as Am,d as Cm,m as iu}from"./chunk-AHU7BCIL.js";import"./chunk-C6JR2GZU.js";import"./chunk-EZ5WRJOA.js";import"./chunk-WMPWBUW7.js";import{b as Xo,c as jr,d as $m,f as Xm,h as jm,i as Hn,j as Qr,k as Vn,m as dn,q as Qm,r as os,s as ou,t as tu}from"./chunk-GL5KZF23.js";import"./chunk-WXXVKHTN.js";import"./chunk-O4KI5ERK.js";import{c as lo}from"./chunk-6D2WFU2O.js";import"./chunk-U2UKW4WG.js";import{a as Be}from"./chunk-445ZV7VL.js";import{a as ct,d as wo,e as wt,f as pm,g as gm}from"./chunk-YQGNRWCJ.js";import{a as dm,b as fm,c as lm}from"./chunk-X4Z4JMVV.js";import"./chunk-RMSE4KTO.js";import"./chunk-Y4Q624TF.js";import"./chunk-W7APXTAD.js";import{a as Hi}from"./chunk-A4CVLGFS.js";import"./chunk-ALNQKIUN.js";import{a as Bo}from"./chunk-UKF426AK.js";import{a as ts}from"./chunk-XZFOTB6K.js";import{c as sm,e as im}from"./chunk-ZGE3YU4L.js";import{a as qn,d as It,e as qi,g as su}from"./chunk-R5U3NPEX.js";import{A as zr,B as sn,C as Dt,D as Rm,E as Um,F as Wm,G as Gm,H as to,I as ve,J as Hm,K as Vm,L as qm,M as eo,O as $r,P as an,R as Jm,T as $o,U as cn,V as mn,W as Ym,X as fo,Y as Xr,Z as zm,_ as Zm,a as wm,d as qr,e as Ro,f as S,g as Bt,h as B,i as vt,j as Nm,k as q,l as se,m as $,n as Bm,o as vm,p as Kr,q as No,r as ie,s as Jr,t as rn,u as Lm,v as _,w as Dm,x as Mm,y as Yr,z as Lt}from"./chunk-JDZSGQWQ.js";import"./chunk-XY66VBX7.js";import{a as ae,e as Zr,f as Om}from"./chunk-GZFI5G46.js";import{a as xo,e as en,o as cm,p as um,q as kt}from"./chunk-UAHUXCQX.js";import{i as Km}from"./chunk-73OZ5IYN.js";import{a as Or}from"./chunk-BWRHBLYR.js";import{b as mm}from"./chunk-XTOYI7P4.js";import"./chunk-KSCP4BJT.js";import"./chunk-3MIEWVTZ.js";import{d as Jo,f as zt,g as nm,j as rm}from"./chunk-J2H2J7IS.js";import"./chunk-SJIEUX3S.js";import{a as at}from"./chunk-L7LFNDLE.js";import{b as eu,d as nu,e as ru}from"./chunk-SSCLN42L.js";import{a as fn}from"./chunk-FBTKKNCQ.js";import{a as un}from"./chunk-STMKIE2Z.js";import"./chunk-GUQJR5VF.js";import"./chunk-MI6YHDAD.js";import"./chunk-ZAW6Z544.js";import"./chunk-SVAMZON6.js";import{a as em}from"./chunk-MF4732CU.js";import{a as tn}from"./chunk-F52H34ZH.js";import"./chunk-3RNOIYOK.js";import"./chunk-OQFQ7WFP.js";import"./chunk-MFN67L7C.js";import{a as vr}from"./chunk-YW7TPMAR.js";import{b as Tt,c as Nc,d as Bc}from"./chunk-PGKED42N.js";import{b as _c,d as yc,f as Fc,g as bc,h as Ec,i as Pc,j as kc,n as wc}from"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import{a as hc,b as Wn}from"./chunk-PMGQLREC.js";import"./chunk-W6OF57RJ.js";import"./chunk-HRZ4SZVQ.js";import"./chunk-ECPXLKIL.js";import"./chunk-RK4XZYBE.js";import{a as CT}from"./chunk-RAAMOJC7.js";import{$ as Ji,B as Tn,C as us,D as ds,E as In,F as ue,G as ft,H as Du,I as Sn,J as Mu,K as Ou,L as lt,M as Ru,N as Uu,O as fs,P as Ki,Q as Wu,R as Gu,S as Hu,T as ls,U as Vu,V as qu,W as Ku,X as Yn,Y as ps,Z as zn,_ as gs,aa as Ju,b as Fu,ba as Yu,c as pn,ca as St,d as bu,e as Eu,ea as As,f as Pu,fa as zu,g as gn,ga as Cs,h as rs,ha as Zu,i as An,ia as Ts,j as Cn,ja as Zt,k as ku,ka as Yi,l as ut,la as zi,m as wu,ma as $u,n as ss,o as is,p as as,q as me,r as cs,s as Mt,t as Jn,u as Nu,v as Bu,w as vu,x as dt,y as Lu,z as ms}from"./chunk-HMORTYXM.js";import"./chunk-VVL4IZMM.js";import"./chunk-ONV3ODOM.js";import{a as Dc,b as Mc}from"./chunk-ZI4ZHHA3.js";import"./chunk-3545CIHX.js";import"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-3DI6NEAD.js";import"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import{A as Vi,B as Hr,C as Gn,D as bm,E as Em,H as ne,I as z,J as R,K as mo,L as Pm,N as km,P as Oo,Q as re,R as Vr,b as Rr,c as Tm,f as co,g as Ur,h as Wr,k as Im,l as Sm,m as mt,n as xm,o as Gr,p as Nt,q as hm,s as _m,w as ym,x as nn,z as Fm}from"./chunk-5KSRM7B2.js";import"./chunk-PPHSAQ52.js";import"./chunk-JUOUD4EO.js";import{d as Wi}from"./chunk-4W35J5OQ.js";import"./chunk-GPJC633M.js";import{A as Qc,B as om,P as tm,b as Qe,c as on,d as Mr,k as Kc,m as Jc,n as Yc,q as zc,r as Zc,s as $c,t as Xc,v as jc}from"./chunk-YC6W5MPL.js";import"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import"./chunk-2VRILCVI.js";import"./chunk-IRMGOW5H.js";import"./chunk-CQ64XZTP.js";import"./chunk-UXLFUD7T.js";import{e as Ne}from"./chunk-2HEOW3XO.js";import"./chunk-DLRFA5AU.js";import"./chunk-OC3IFNJW.js";import"./chunk-UI7PAU35.js";import{a as Rc}from"./chunk-SMZ64QW3.js";import"./chunk-DQTTI4XL.js";import{s as Gi,w as am}from"./chunk-FF6KJRSH.js";import"./chunk-CQ7YBDUS.js";import{a as it,b as Hc,j as Vc}from"./chunk-GSYNHSX4.js";import{c as Gc}from"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import{a as Uc,f as Wc,h as To,i as Lr,m as Dr}from"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import{c as vc,f as Lc}from"./chunk-HXUMX2S7.js";import{m as ao}from"./chunk-FYACTIEH.js";import"./chunk-QKXA7YNE.js";import{a as qc}from"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import{a as Oc}from"./chunk-M2F2X65U.js";import"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import{_a as Br,a as Sc,f as Ko,ja as Nr,ka as Xe,la as je}from"./chunk-S5DGV5WL.js";import{b as $e}from"./chunk-AOXUSYRH.js";import{m as Ee,n as Rn,q as Y}from"./chunk-WKBC6JL3.js";import"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import{X as K}from"./chunk-VPDRXROE.js";import{Q as wr,g as ic,ga as Pt,m as Ri,p as hr,r as et,w as E}from"./chunk-JLIPSIRU.js";import{a as dc}from"./chunk-CIDV5VJQ.js";import{a as ko}from"./chunk-VX55KNI4.js";import"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import{D as pc,Z as Vo,aa as gc,b as Fo,ca as Pe,d as fc,da as Ac,ga as Yt,ha as no,k as AT,n as lc,o as Ui,t as Fr,ta as ro,u as ee,v as br,w as ze,x as Ze,y as Er}from"./chunk-VGT27A4M.js";import{d as io,f as Mo}from"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import{g as xc}from"./chunk-OG46YTNN.js";import{c as H}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import{a as qo,b as ke}from"./chunk-CYOQISC6.js";import{c as Ic,f as st,h as we}from"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{$ as Ga,$a as Ja,$c as Un,B as Ho,C as On,Cc as sc,D as tt,F as Ar,Ha as Cr,Hc as xr,Jb as So,Kc as qe,La as Tr,Ma as Va,Mb as Sr,Oc as Pr,R as Wa,Rc as Cc,Sa as qa,Ta as Ka,Tc,Ua as Di,Ub as ec,Uc as rt,Vb as gT,X as po,Xb as Ve,Yb as bt,Zb as nc,Zc as U,a as Na,b as fT,ba as Ha,db as Ir,dd as kr,ea as lT,gd as bo,lc as rc,mc as Mi,pb as Ya,qb as za,sb as Za,tb as $a,tc as Oi,ub as Xa,vb as ja,w as Go,wb as Qa,x as yo,xb as oc,y as uo,yb as tc,z as Kt}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{E as yr,G as uc,H as te,M as Ye,c as ac,e as _r,o as nt,q as Jt,r as cc,s as mc}from"./chunk-LDKM7IQF.js";import{F as He,K as gr,d as Ba,e as Li,ea as Ra,f as va,ga as Mn,j as La,ka as Ua,pa as Zo,s as Da,w as Ma,y as Oa}from"./chunk-6O63U2D6.js";import{M as J,l as M,w as Ge,x as F}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import{b as pT}from"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{T as Ke,Z as Je,c as Et,ca as Ao}from"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import{a as h}from"./chunk-O337TVCZ.js";import"./chunk-EJP3AYQB.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-WRBXETR5.js";import"./chunk-RBB7LL2V.js";import"./chunk-VCMU2WX2.js";import"./chunk-37O5HIVF.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-7W6DAKSL.js";import"./chunk-Y2L2VAJY.js";import"./chunk-5AYYZJMV.js";import"./chunk-T47I3VPR.js";import"./chunk-ME7FEN7O.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as u,m as s,n as p,o as i}from"./chunk-GLD6H5Q5.js";s();i();var Ct=u(h()),Fe=u(ko());Zo();s();i();var xn=u(h()),ys=u(E()),ud=u(ko());var TT=()=>{let o=(0,ud.useHistory)(),t=(0,ys.useDispatch)(),e=(0,ys.useSelector)(Tm),n=(0,xn.useRef)(e);return n.current=e,(0,xn.useEffect)(()=>{let{fromPage:r}=o.location?.state||{};return r&&t(ym(r)),t(nn(!0)),()=>{n.current&&(t(Vr()),t(Ts()))}},[]),null},dd=(0,xn.memo)(TT);s();i();s();i();s();i();var Td=u(h());s();i();var le=u(h());J();s();i();var fd=u(h()),ld=u(K());J();Mo();var IT=()=>{let o=it(),[t,e]=(0,fd.useState)(!1);return[(0,ld.useMemoizedFn)(async r=>{try{e(!0);let a=await io().getRequestHeaders({currency:"usd",walletId:o,needSign:!0}),{data:c}=await tm(r,{txSource:1},{headers:a}),m="";if(c?.canRecharge||(m=c.rechargeMsg),c?.canWithdraw||(m=c.withdrawMsg),m){let d=nt.warn({text:m,confirmText:F("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{d.destroy()}});return!1}return!0}catch{return te.error(F("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},pd=IT;s();i();s();i();var fe=u(h());J();function ST({loading:o,tag:t,customRender:e,focus:n,noMargin:r,noPadding:a,onChange:c,onRef:m,...d}){let g=(0,fe.useRef)(null);(0,fe.useLayoutEffect)(()=>{n&&g.current?.focus()},[]);let l=F("wallet_extension_transaction_placeholder_input_address");return fe.default.createElement($t.Row,{noMargin:r,noPadding:a},fe.default.createElement(Jt.TextArea,{placeholder:l,errorType:Jt.TIP_TYPE.always,size:Jt.SIZE.xl,autoResize:!0,...d,onRef:f=>{g.current=f,m&&m(f)},onChange:f=>{c&&c(f.target.value)},customRender:({inputComponent:f})=>{let A=fe.default.createElement($t.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var $i=ST;s();i();var ho=u(h()),Le=u(E()),Fs=u(K()),Ad=u(Et());Zo();J();ro();s();i();var gd={selected:"_selected_1gvyw_1"};function xT({value:o,network:t}){let e=(0,Le.useDispatch)(),n=(0,Le.useSelector)(Rr),[r,a]=(0,ho.useState)(!1),[c,m]=(0,ho.useState)({}),[d,g]=(0,ho.useState)(""),l=ru(()=>{g(Ss.TYPE.ADD),m({address:o,network:t}),a(!0)}),f=(I={})=>{a(!1),m({}),g(""),I.name&&e(Gn({name:I.name,type:Ui.ADDRESS_BOOK}))},A=I=>{a(!1),setTimeout(()=>{g(Ss.TYPE.EDIT),m({...I,network:t}),a(!0)})};return ho.default.createElement(ho.default.Fragment,null,ho.default.createElement($t.InputBottomBar,{title:F("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:F("wallet_extension_send_anchor_add_now"),buttonClick:l}),ho.default.createElement(Ss,{visible:r,type:d,data:c,onClose:f,onChangeToEdit:A,onBackToHome:()=>n}))}function hT({visible:o,options:t,onSelect:e,onChange:n}){let r=(0,Le.useDispatch)();if(!o)return null;let a=({walletId:c,address:m,name:d,type:g,group:l,addressType:f})=>{if(e(),n(m),d){let A=l?`${l} - ${d}`:d;r(Gn({name:A,type:g,extra:{walletId:c,group:l,name:d,addressType:f}}))}};return ho.default.createElement($t.SelectAddress,{options:t,onSelect:a})}function _T(o,t,e){let n=e?.matchAddress||((r,a)=>Mn(a.address).includes(Mn(r))||a.name&&Mn(a.name).includes(Mn(r)));return(0,ho.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let r=[];return o.forEach(({group:a,list:c})=>{let m=[];c.forEach(d=>{n(t,d)&&m.push(d)}),m.length&&r.push({group:a,list:m})}),r},[o,t])}function yT({value:o,error:t,onChange:e,isCheckingError:n,extraProps:r,onBlur:a,onFocus:c,...m}){let d=(0,Le.useDispatch)(),g=Ro(),{coin:l}=S(),{localType:f}=l,A=(0,Le.useSelector)(Wr),I=_(),{filterAddress:T,disableRequestDomain:C}=r||{},x=!o,b=!!o&&!t&&!A?.name&&!n,y=nu(f,I),k=(0,ho.useMemo)(()=>T?T(y):y,[y,T]),[v,N]=(0,ho.useState)((!o||!!t)&&!b&&k?.length>0),P=_T(k,o,r),w=eu(f),O=W=>{e(W);let G=w(W),oo=Boolean(W&&G);d(Gn(oo?G:null))},{loading:L,abort:D}=wm({domainInputValue:o,coinId:g},({address:W,domain:G})=>{d(Hr({key:"",args:{}})),e(W),d(Gn({name:G,type:Ui.ENS}))},C),V=(0,Fs.useDebounce)(!!L||!!m.loading||!!n,{wait:200});return(0,Fs.useThrottleEffect)(()=>{n||(!!o&&!t&&P.length===0?N(!1):!!t&&P?.length>0&&N(!0))},[o,t,n,P?.length],{wait:100}),ho.default.createElement("div",{className:(0,Ad.default)({[gd.selected]:v})},ho.default.createElement($t.Row,{noMargin:v},ho.default.createElement($i,{...m,noMargin:!0,noPadding:!0,loading:V,tag:A?.name,focus:x,value:o,error:!V&&t,onChange:O,onBlur:W=>{o&&!t&&setTimeout(()=>{N(!1)},100),a&&a(W)},onFocus:W=>{P?.length>0&&N(!0),c&&c(W)}}),b&&ho.default.createElement(xT,{network:f,value:o})),ho.default.createElement(hT,{visible:v,extraProps:r,value:o,options:P,onSelect:()=>{D(),N(!1)},onChange:e}))}var Xi=yT;s();i();var Zn=u(h()),$n=u(E());J();function FT({Component:o=Xi,loading:t=!1,extraProps:e,errorFns:n={fns:[],override:!1}}){let r=(0,$n.useDispatch)(),c=at().get("address"),m=(0,$n.useSelector)(co),d=(0,$n.useSelector)(Ur),g=Um(),{isCheckingError:l,runErrorFns:f}=sn(g,n),A=T=>{f(T,C=>{r(Hr(C))})},I=T=>{A(T),r(Vi(T))};return(0,Zn.useEffect)(()=>{c&&r(Vi(c))},[]),(0,Zn.useEffect)(()=>{r(Fm(l))},[l]),Zn.default.createElement(o,{value:m,onChange:I,loading:t,isCheckingError:l,error:d?.key?F(d?.key,d?.args):null,extraProps:e||{}})}var ji=FT;s();i();var Cd={content:"_content_12kl2_1"};function bT({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let n=Ro(),r=Yr(),a=Mm(),c=Lt(),[m,d]=pd(),g=(0,le.useMemo)(()=>{let{disabled:l,loading:f,onClick:A,...I}=e||{},T=l||r,C=async()=>{let x=A||c;await m(n)&&await x()};return[{disabled:T,btnText:F("wallet_extension_send_btn_next_step"),actionType:kt.ACTION_TYPE.CONFIRM,loading:!T&&(f||a||d),onClick:C,...I}]},[e,r,a,c,m,d,n]);return le.default.createElement(Is,{slot:{header:le.default.createElement(Xu,{...o,title:F("wallet_extension_send_title_recipient_address"),pageIndex:1}),footer:le.default.createElement(kt,{buttonGroup:g})}},le.default.createElement("div",{className:Cd.content},le.default.createElement(ji,{...t})))}var j=bT;var ET=()=>Td.default.createElement(j,null),Id=ET;s();i();var yd=u(h());s();i();var Sd=u(h()),xd=u(E()),hd=u(K());var PT=()=>{let[o,{setFalse:t}]=(0,hd.useBoolean)(!0),{coin:e}=S(),n=_(),r=(0,xd.useDispatch)(),{chainId:a,coinId:c}=e;return(0,Sd.useEffect)(()=>{a&&n&&(async()=>{try{let d={coinId:c,chainId:a,address:n},g={fromAddr:n},{maxGasAmount:l,gasUnitPrice:f,fee:A}=await jc(d,g);r(z(A)),r(Mu({maxGasAmount:l,gasUnitPrice:f})),r(R(!1))}catch{r(R(!0))}finally{t()}})()},[a,n]),o},_d=PT;function kT(){let o=_d();return to(),yd.default.createElement(X,{confirmButtonProps:{loading:o}})}var Fd=kT;s();i();var Rd=u(h());s();i();var Lo=u(h()),Xn=u(E());Zo();J();s();i();var bd=u(h()),Ed=u(E());po();function Pd(){let o=(0,Ed.useDispatch)(),t=se(),e=$o();(0,bd.useEffect)(()=>{if(t){let n=e;Ho(n,0)&&(n="0"),o(bm(n))}},[t,e])}ro();s();i();var kd=u(ko()),wd=u(K());var wT=({disabled:o,onSubmit:t,feeLoading:e,loading:n,onClick:r,networkFee:a,renderActions:c,...m},d)=>{let g=(0,kd.useHistory)(),l=Bt(),{coin:f}=S(),A=_(),{loading:I,onClick:T}=Zm(t),C=zm();return(0,wd.useCreation)(()=>{if(c&&typeof c=="function"){let x=c(d);if(x)return x}return[{actionType:kt.ACTION_TYPE.CANCEL,onClick:()=>{g.goBack()}},{loading:n||I,disabled:o||C||e,actionType:kt.ACTION_TYPE.CONFIRM,onClick:r||T,...m}]},[e,n,f?.coinId,C,T,o,d,l?.coinId,A,I,r,m])},Nd=wT;s();i();var Bd=u(h());ro();var NT=({loading:o,chainName:t,feeLevel:e,onClick:n,...r},a)=>{let c=$(),m=ie(),d=No(),g=vm(),l=Kr(),f=ce(),A=n?()=>{n(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,I=(0,Bd.useMemo)(()=>e!==void 0?e:Vo?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:g&&c==="0"?void 0:c,loading:o||g,level:I,coinId:m,estimateFailed:!!l,onClick:A,...r}},vd=NT;s();i();var Qi=u(E()),Ld=u(K());J();var BT=()=>{let o=se(),t=S(),e=(0,Qi.useSelector)(hm),n=No(),r=t?.coin?.coinId,a=q(),c=rm(r,a,{currencyId:n,formatted:!1}),m=(0,Qi.useSelector)(Im);return(0,Ld.useCreation)(()=>{let d=0,g=0;return e===mm?o?(g=M.mul(c,-1),d=M.mul(a,-1)):(d=void 0,g=M.mul(m,-1)):(d=M.mul(a,-1),g=void 0),{currencyId:n,coinId:r,assetChange:d,useMinPrecision:!0,currencyAssetChange:g}},[e,n,r,o,c,m,a])},Dd=BT;s();i();var Md={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function vT({loading:o,networkFeeProps:t={},confirmButtonProps:e={},containerProps:n={},tipMessageProps:r={},slot:a={},checkEmpty:c=!0,addressType:m,renderMessage:d,renderTipActions:g,defaultMessage:l,canTransferAmount:f,tipActions:A=[]}){let I=(0,Xn.useSelector)(co),T=(0,Xn.useSelector)(Wr),C=it(),x=cu(C),b=(0,Xn.useSelector)(_m),y=(0,Xn.useSelector)(bu),k=_(),v=Dd(),{coin:N,baseCoin:P}=S(),w=vd({...t,chainName:N?.chainName},x),{loading:O,estimateFailed:L}=w,V=w?.gasReturn?.activity?.errorCode,{bottom:W,networkFee:G,footer:oo}=a,Z=Lo.default.createElement(It,{bordered:!1,verticalPadding:!1},Lo.default.createElement(ts,{...w}));G&&Li(G)&&(Z=G(w)),G&&!Li(G)&&(Z=G),ju(c),Pd(),(0,Lo.useEffect)(()=>{V===0&&am({wallet_address:k,chain_id:P.chainId,transaction_type:"transfer"})},[V]);let Io=Nd({...e,feeLoading:O},b?.type||y);return Lo.default.createElement(Is,{...n,loading:o,className:Md.root,slot:{header:Lo.default.createElement(uu,{...r,address:k,coinId:N?.coinId,actions:A,renderActions:g,renderMessage:d,type:b?.type||y||L&&su.TIP_TYPE.FEE_ERROR,message:b?.text||!!b?.key&&F(b.key,b?.args)||!L&&l}),footer:oo||Lo.default.createElement(kt,{buttonGroup:Io})}},Lo.default.createElement(H.Space,{space:24,direction:H.DIRECTION.vertical},Lo.default.createElement(fu,{txType:Fo.TRANS_OUT},Lo.default.createElement(H.FlexBox,{justify:"center"},Lo.default.createElement(du,{...v}))),Z,Lo.default.createElement(It,{bordered:!1,verticalPadding:!1},Lo.default.createElement(qi,{address:k,addressType:m,title:F("extension_send_mid_text_from"),walletId:C,onCopyCallback:()=>{x({trade:"send",network:N?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Lo.default.createElement(xu,{coinBalance:f,coinId:P.coinId})),Lo.default.createElement(qi,{tags:T?.name?[T?.name]:null,address:I,title:F("extension_send_mid_text_to"),onCopyCallback:()=>{x({trade:"send",all_confirmation:"to_address",network:N?.chainName})}})),W))}var Q=vT;s();i();var oa=u(E());bo();ro();qe();po();var Od=()=>{let{coin:o}=S(),t=_(),e=fo(),n=(0,oa.useSelector)(co),r=(0,oa.useSelector)(Fu),a=To(),{gasUnitPrice:c,maxGasAmount:m}=r,d=ct(),g=wo({fromAddr:t,walletId:a,localType:Oi}),l=wt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,networkFee:Go(c,m),localType:Oi});return lo(async()=>await d({coinId:o.coinId,address:t,fromAddr:t,toAddr:n}),async(x={})=>{let{sequenceNumber:b,chainId:y,expirationTimestampSecs:k,tyArg:v}=x,N={sequenceNumber:b,chainId:y,maxGasAmount:m,gasUnitPrice:c,expirationTimestampSecs:k},P={recipientAddress:n,amount:e},w={base:{...N}};o.baseCoinId===0&&(w.type=br.TRANSFER,w.data={...P}),o?.baseCoinId!==0&&o?.protocolType===Un.APTOS_FUNGIBLE_TOKEN&&(w.type=br.FUNGIBLE_ASSET_TRANSFER,w.data={...P,fungibleAssetMetadataAddress:o?.address}),o?.baseCoinId!==0&&o?.protocolType===Un.APTOS_TOKEN&&(w.type=br.TOKEN_TRANSFER_V2,w.data={...P,tyArg:v});let O=await g({params:w});return{signInfo:x,signedTx:O}},async({signInfo:x,signedTx:b})=>{let{sequenceNumber:y}=x,k={nonce:y},v={extJson:JSON.stringify(k)};return await l(b,v)},x=>(ao({tx_id:x}),x))};function LT(){let o=Od(),t=async()=>{await o()};return eo(),Rd.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}var Ud=LT;var DT={match:o=>Ec(o),pages:{AddressPage:Id,AmountPage:Fd,ConfirmPage:Ud}},Wd=DT;s();i();bo();s();i();var Vd=u(h()),bs=u(ko());s();i();function Rt(){return at().get("type")||Ot.SEND}s();i();function MT(){let o=Dt(),t=Rm();return[o,t]}var Gd=MT;s();i();var jn=u(h()),Hd=u(ko());bo();So();var OT=()=>{let{coinId:o}=(0,Hd.useParams)(),e=Jo(o)?.protocolId,n=Object.values(U),r=Wc(),a=r.filter(({keyringIdentityType:f})=>Lc(f)),c=r.filter(({keyringIdentityType:f})=>f===Tc.MPC),m=(f,A)=>!f.some(({walletIdentities:I})=>I.some(({addressType:T={}})=>{let C=T[Cr];return C?C.some(({address:x})=>A.address===x):!1})),d=(0,jn.useCallback)(f=>n.includes(e)?m(a,f):!0,[a,e,n]),g=(0,jn.useCallback)(f=>[U.BRC_20,U.FRACTAL_BRC20].includes(e)?!0:n.includes(e)?m(c,f):!0,[c,e,n]),l=(0,jn.useCallback)((f=[])=>f.filter(A=>d(A)&&g(A)),[d,g]);return(0,jn.useCallback)(f=>f.map(A=>({...A,list:l(A?.list)})).filter(A=>A?.list?.length),[l])},hn=OT;function RT(){let{coinId:o}=(0,bs.useParams)(),t=_(),e=(0,bs.useHistory)(),n=Rt(),r=Gd(),a=hn();return Vd.default.createElement(j,{addressProps:{errorFns:{fns:r,override:!0},extraProps:{filterAddress:a}},confirmButtonProps:{onClick:()=>{e.push(`${Ko}/${o}${je}?type=${n}&from=${t}`)}}})}var qd=RT;s();i();var _f=u(h());s();i();var jo=u(h()),ks=u(E()),Tf=u(ko()),If=u(Et());J();po();s();i();var so=u(h()),De=u(Et());J();s();i();var pt={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var UT=({lockedAmount:o,lockedAmountDisplay:t,catTotalAmount:e,pendingXrc:n,pendingXrcDisplay:r,availableWithoutSpending:a,availableWithoutSpendingDisplay:c,availableReceiving:m,availableReceivingDisplay:d,goToInscribe:g,addressType:l,coinId:f})=>{let{handleClick:A}=od(l,f);return so.default.createElement(so.default.Fragment,null,so.default.createElement(H.Box,{className:(0,De.default)(pt.container)},Number(o)>0&&so.default.createElement(H.FlexBox,{justify:"space-between"},so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_in_use"))),so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{className:pt.amount},t),so.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,De.default)(pt.link),onClick:A},F("extension_wallet_btc_btn_unlock_use")))),Number(n)>0&&so.default.createElement(H.FlexBox,{justify:"space-between",className:(0,De.default)(pt.pendingAssets)},so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_select_receiving"))),so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{className:pt.amount},r))),Number(a)>0&&so.default.createElement(H.FlexBox,{justify:"space-between"},so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{className:pt.amount},F("extension_wallet_btc_to_be_inscribed"))),so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},c),so.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,De.default)(pt.link),onClick:g},F("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&so.default.createElement(H.FlexBox,{justify:"space-between",className:(0,De.default)(pt.pendingAssets)},so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_select_receiving"))),so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{className:pt.amount},d))),Number(e)>0&&so.default.createElement(H.FlexBox,{justify:"space-between",className:(0,De.default)(pt.pendingAssets)},so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("wallet_extension_cat_desc_total_amount"))),so.default.createElement(H.Box,null,so.default.createElement(Y.Text,{className:pt.amount},e)))))},_n=UT;s();i();function WT(){let o=_(),{coin:t}=S();return td(t,o)}var pe=WT;s();i();var Co=u(h()),zd=u(E()),Zd=u(Et());J();s();i();var xt=u(h()),ta=u(Et());J();ec();s();i();var GT="md",HT="lg",Kd=o=>{let{className:t,size:e,disabled:n,checked:r,coinImage:a,coinAmountText:c,inscriptionId:m,onChange:d}=o,g=`inscription-select-container-${e}`,l=n?"inscription-select-disabled":null;return xt.default.createElement("div",{className:(0,ta.default)("inscription-select-container",g),onClick:d},n?xt.default.createElement("div",{className:"inscription-select-confirm"},F("extension_wallet_send_tag_confirming")):null,xt.default.createElement("div",{className:(0,ta.default)("inscription-select",l,t)},n?null:xt.default.createElement("div",{className:"inscription-select-radio-container"},xt.default.createElement(cc.Circle,{checked:r})),xt.default.createElement("div",{className:"inscription-select-coin"},xt.default.createElement(yr,{className:"inscription-select-coin-image",src:a,errorImg:Sr,width:14,height:14}),xt.default.createElement(Hi,{text:c,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),xt.default.createElement("div",{className:"inscription-select-id"},xt.default.createElement(Hi,{text:m,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Kd.size={md:GT,lg:HT};var yn=Kd;s();i();var Po=u(h()),Jd=u(K());J();ec();s();i();var ge={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function VT(){let{coin:o}=S(),t=pe();return Po.default.createElement("div",{className:ge.header},Po.default.createElement("div",{className:ge.amount},Po.default.createElement(yr,{className:ge.logo,src:o.image,errorImg:Sr,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function qT({loading:o,list:t,visible:e,onClose:n,value:r,onSelected:a,request:c}){let{coin:m}=S(),[d,g]=(0,Po.useState)({}),{run:l}=(0,Jd.useThrottleFn)(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,Po.useEffect)(()=>{e&&g(r)},[e]),Po.default.createElement(nt,{isFull:!0,topContent:Po.default.createElement(VT,{list:t,value:d,onMax:f=>{g(t.reduce((A,I)=>({...A,[I.inscriptionId]:!f}),{}))}}),footer:Po.default.createElement($t.ConfirmButton,{onClick:()=>{a(d)}},F("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:n,renderContent:()=>Po.default.createElement("div",{className:ge.scrollContent,onScroll:l},Po.default.createElement("div",{className:ge.content},t.map((f,A)=>Po.default.createElement("div",{className:ge.cell},Po.default.createElement(yn,{key:A,size:yn.size.lg,coinImage:m.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{g(I=>({...I,[f.inscriptionId]:!I[f.inscriptionId]}))}})))),o&&Po.default.createElement("div",{className:ge.loading},Po.default.createElement(Je.Circle,{size:Je.SIZE.sm})))})}var Yd=qT;s();i();var Fn={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function KT({loading:o,list:t,request:e,onSelected:n},r){let{coin:a}=S(),[c,m]=(0,Co.useState)(!1),d=(0,zd.useSelector)(dt),[g,l]=(0,Co.useState)(d.reduce((I,T)=>({...I,[T.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,Co.useMemo)(()=>{let I=t.filter(C=>!!g[C.inscriptionId]),T=t.filter(C=>!g[C.inscriptionId]);return{selected:I,unselected:T,showed:t.map(C=>I.includes(C)?{...C,checked:!0}:C)}},[t,g]);return(0,Co.useEffect)(()=>{n(f)},[f]),(0,Co.useImperativeHandle)(r,()=>({onMax:()=>{l(t.reduce((I,T)=>({...I,[T.inscriptionId]:!0}),{}))}})),Co.default.createElement(Co.default.Fragment,null,Co.default.createElement("div",{className:Fn.root},Co.default.createElement("div",{className:Fn.title,onClick:()=>{m(!0)}},F("extension_wallet_send_text_select_transferable"),Co.default.createElement(Ke,{className:(0,Zd.default)(Fn.arrow,"okds-arrow-chevron-right-centered-md")})),Co.default.createElement("div",{className:Fn.content},A.map((I,T)=>Co.default.createElement("div",{className:Fn.cell},Co.default.createElement(yn,{key:T,coinImage:a.image,size:yn.size.md,coinAmountText:`${I.tokenAmount} ${I.tick}`,inscriptionId:I.inscriptionId,checked:I.checked,onChange:C=>{C.stopPropagation(),l(x=>({...x,[I.inscriptionId]:!x[I.inscriptionId]}))}}))))),Co.default.createElement(Yd,{visible:c,value:g,loading:o,list:t,request:e,onSelected:I=>{l(I),m(!1)},onClose:()=>{m(!1)}}))}var $d=(0,Co.forwardRef)(KT);s();i();var Ae=u(h()),Xd=u(E());J();ro();function JT(o){let{coin:t}=S();return(0,Ae.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function jd(){let o=Bt();return t=>{let e="";return t.key&&(e=F(t?.key,t?.args)),t?.type===no.FEE_BALANCE_INSUFFICIENT?Ae.default.createElement(Ae.default.Fragment,null,e," ",Ae.default.createElement(de,{coin:o})):t?.type==="inscribe"?Ae.default.createElement(Ae.default.Fragment,null,e):e}}function YT(o,t){let e=(0,Xd.useDispatch)(),n=Wm(),r=JT(t),a=[n,r],{runErrorFns:c}=sn(a);zr(c,m=>{e(Em(m))},o)}var Qd=YT;s();i();var of=u(ko());var tf=u(E());function zT(){let o=(0,tf.useDispatch)(),t=(0,of.useHistory)(),{coin:e}=S(),n=_();return()=>{o(Ts()),o(Vr()),t.push(`${Ko}/${e.coinId}${Nr}?type=${Ot.INSCRIBE}&from=${n}`)}}var ef=zT;s();i();var sf=u(h()),af=u(E());s();i();var Qn=u(h()),nf=u(E());po();function ea(){let{baseCoin:o}=S(),t=_(),[,e]=Be({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function ZT(o,t){let r=(()=>255)(),a=o||t?.normal||"0",[c,m]=(0,Qn.useState)("0");return(0,Qn.useEffect)(()=>{if(r&&a){let d=Go(r,a);m(d)}},[r,a]),{fee:c,satBytes:a,bytes:r}}function $T(o){let t=(0,nf.useDispatch)(),e=ea(),n=ZT(o,e);return(0,Qn.useEffect)(()=>{t(St({name:"signInfo",value:e}))},[e]),{...n,signInfo:e}}var rf=$T;function XT(){let o=(0,af.useDispatch)(),{fee:t}=rf();(0,sf.useEffect)(()=>{o(z(t))},[t])}var cf=XT;s();i();var ff=u(h()),lf=u(E());s();i();var Es=u(h()),uf=u(E());s();i();var mf=u(E());ro();function jT(){let{selectedSat:o,signInfo:t}=(0,mf.useSelector)(ms),e;return o.type===Vo.CUSTOM?e=o.satBytes:e=t?.[gc[o.type]],e||0}var Ut=jT;function QT({coinId:o}){let[t,e]=(0,Es.useState)(!0),n=(0,uf.useDispatch)(),r=_(),a=xs({coinId:o}),c=Ut();return(0,Es.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:r,coinAmount:0,serviceCharge:0,feeRate:c})).canTransferAmount||"0"}catch{d="0"}e(!1),n(re(d))})()},[r,c]),t}var df=QT;function oI({coinId:o}={}){let t=(0,lf.useDispatch)(),e=pe(),n=df({coinId:o});return(0,ff.useEffect)(()=>{t(Oo(e?.transferableWithoutSpending))},[e?.transferableWithoutSpending]),n}var pf=oI;s();i();var bn=u(h()),gf=u(E()),Af=u(K());Mo();bo();ke();we();po();function tI(){let{coin:o,baseCoin:t}=S(),e=_(),n=(0,gf.useSelector)(Pt),[r,a]=(0,bn.useState)({from:1,size:10});return async()=>{let c=await io().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),m={utxoType:Xo.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:kr(o.chainId)},d={coinId:t.coinId,utxoRequests:[{...m,...r}]},{data:g}=await st(qo.getBTCUTXO,d,{headers:c}),l=(g?.[0]?.utxoList||[]).map(A=>({...A,tokenAmountInt:A.tokenAmount,tokenAmount:yo(A.tokenAmount,10**o.decimals)})),f=l.length===r.size;return f&&a(A=>({...A,from:A.from+1})),{list:l,more:f}}}function eI(){let o=(0,bn.useRef)(!0),[t,e]=(0,bn.useState)(!0),[n,r]=(0,bn.useState)([]),a=tI(),c=async()=>{if(!!o.current){e(!0);try{let{more:m,list:d}=await a();r(g=>[...g,...d]),o.current=m}finally{e(!1)}}};return(0,Af.useMount)(()=>{c()}),{list:n,loading:t,request:c}}var Cf=eI;s();i();var Ps={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function nI(){let o=(0,Tf.useHistory)(),t=(0,ks.useDispatch)(),{coin:e,baseCoin:n}=S(),r=(0,ks.useSelector)(dt),a=ef(),c=jd(),m=Rt(),d=_(),g=(0,jo.useMemo)(()=>r.reduce((N,{tokenAmount:P})=>uo(N,P),0),[r]),{loading:l,list:f,request:A}=Cf(),I=pf({coinId:n.coinId}),T=f.length>0,C=l||I;cf(),Qd(C,f);let{availableWithoutSpending:x,availableWithoutSpendingDisplay:b,availableReceiving:y,availableReceivingDisplay:k}=pe();if(f.length===0&&C)return jo.default.createElement("div",{className:Ps.loading},jo.default.createElement(Je.Circle,{size:Je.SIZE.xl}));let v=jo.default.createElement(Oc.FooterActions,{usePortal:!0,className:(0,If.default)(Ps.inscribeFooter)},jo.default.createElement(Ao,{block:!0,type:Ao.TYPE.highlight,size:Ao.SIZE.lg,onClick:a},F("extension_wallet_btc_btn_inscribe")),jo.default.createElement(Ao,{block:!0,type:Ao.TYPE.highlight,size:Ao.SIZE.lg,disabled:!0},F("wallet_extension_send_btn_continue")));return jo.default.createElement(X,{checkEmpty:!1,inputAmount:g,renderError:c,classes:{content:T?Ps.content:""},slot:{bottom:T?jo.default.createElement($d,{loading:C,list:f,request:A,onSelected:N=>{t(St({name:"brc20UtxoList",value:N}))}}):null,footer:f.length===0&&Number(x)>0?v:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:r.length===0,onClick:()=>{o.push(`${Ko}/${e.coinId}${Xe}?type=${m}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:F("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:jo.default.createElement(jo.default.Fragment,null,(Number(x)>0||Number(y)>0)&&jo.default.createElement(_n,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:x,availableWithoutSpendingDisplay:b,availableReceiving:y,availableReceivingDisplay:k,goToInscribe:a}))}}})}var Sf=nI;s();i();var xf=u(h()),ws=u(ko());function rI(){let{coinId:o}=(0,ws.useParams)(),t=(0,ws.useHistory)(),e=Rt(),n=_();return xf.default.createElement(rd,{onConfirm:()=>{t.push(`${Ko}/${o}${je}?type=${e}&from=${n}`)}})}var hf=rI;var sI={[Ot.SEND]:Sf,[Ot.INSCRIBE]:hf};function iI(){let o=Rt(),t=sI[o];return t?_f.default.createElement(t,null):null}var yf=iI;s();i();var qf=u(h());s();i();var Do=u(h()),Oe=u(E()),Wf=u(ko());J();s();i();var or=u(h());s();i();var Wt=u(h()),Ff=u(Et());J();s();i();var Me={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var aI=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:n,symbol:r}=o;return Wt.default.createElement(H.FlexBox,{justify:"space-between",align:H.ALIGN.center,className:Me.utxoTextWrap},Wt.default.createElement(H.FlexBox,{align:H.ALIGN.center},Wt.default.createElement(Y.Text,{className:Me.utxoText,ellipsis:{tooltip:!0}},t),e&&Wt.default.createElement(_r,{className:Me.badge,color:_r.COLOR.green,type:_r.TYPE.rect},F("extension_wallet_transaction_label_signature"))),Wt.default.createElement(H.FlexBox,{align:H.ALIGN.center,className:(0,Ff.default)(Me.utxoText,Me.utxoTextAmount)},Wt.default.createElement(Y.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},n),Wt.default.createElement(Y.Text,{inherit:!0,strong:!0,className:Me.utxoTextSymbol},r)))},bf=(0,Wt.memo)(aI);s();i();var Ef={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var cI=({utxos:o})=>or.default.createElement(H.Box,{className:Ef.utxosBlock},o.map((t={},e)=>{let{address:n,coinAmount:r,isNeedToSign:a,symbol:c}=t;return or.default.createElement(bf,{key:e,address:n,coinAmount:r,isNeedToSign:a,symbol:c})})),na=(0,or.memo)(cI);po();s();i();var tr=u(E());Zo();s();i();po();Mo();we();ke();bo();var Ns=async({walletId:o,signedTx:t,coinId:e,coinAmount:n,fromAdr:r,toAdr:a,serviceCharge:c,txHash:m,walletType:d,txType:g,extJson:l})=>{let f=qo.postTx,A=await io().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),I={};e==1&&(I.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:T}=await st(f,{signedTx:t,coinId:e,coinAmount:n,fromAdr:r,toAdr:a,serviceCharge:c,txSource:rt.NORMAL,txHash:m,accountId:o,walletType:d,...I,extJson:l,txType:g},{headers:A});return T};var Pf=(o,t)=>!o||!o.length?"0":o.reduce((n,r)=>{let c=(r.nftLocaltionVOs||[]).reduce((m,d)=>d.nftId===t?uo(m,d.value):m,"0");return uo(n,c)},"0"),ra=({address:o,amount:t="0",satAmount:e="0",tokenType:n="FT",atomicalId:r},a=546)=>(e=tt(e,0)?e:t,{address:o,amount:On(e,a)?a:Number(e),data:[{atomicalId:r,type:n,amount:Number(t)}]}),kf=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Ho(n,t)}),wf=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Ho(n,t)});bo();ro();s();i();var Nf=u(h()),sa=u(E());So();function mI(o){let t=(0,sa.useSelector)(Pt),e=_(),n=(0,sa.useSelector)(dt),r=Ut(),a=B(),c=Dr(t);return(0,Nf.useCallback)(async m=>{if(!m.length)return null;let d={address:e,feePerB:r,inputs:[...n.map(({txHash:l,vout:f,coinAmount:A})=>({vOut:f,txId:l,amount:A})),...m.map(({txHash:l,vout:f,coinAmount:A})=>({vOut:f,txId:l,amount:A}))],outputs:[...n.map(({coinAmount:l})=>({amount:l,address:a}))]};return await Mc(d,e,Cr,t,{fake:o===jr.CAL_FEE&&c})},[n,r])}var Bf=mI;function uI(){let o=(0,tr.useDispatch)(),{coin:t,baseCoin:e}=S(),n=(0,tr.useSelector)(dt),r=_(),a=B(),c=$(),m=q(),d=(0,tr.useSelector)(Pt),g=Vc(d),l=No(),A=ic(t)?Fo.BRC20_SEND:Fo.BRC30_SEND,I=Bf(jr.CONFIRM),T=xs({coinId:e?.coinId}),C=Ut(),x=dn({address:r,coinId:t.coinId,currencyId:l,txType:A,protocolId:kr(t.chainId)}),b=gm(d),y=async v=>{try{await b();let N=await I(v.utxoList||[]),P=await xo(t.localType,N),w=g?.serverWalletType,O={txSource:rt.NORMAL,toAdr:a,coinId:t.coinId,txHash:P,signedTx:N,walletId:d,serviceCharge:c,fromAdr:r,coinAmount:m,walletType:w,txType:A,extJson:JSON.stringify({nftIds:n.reduce((D,V)=>[...D,...(V.nftLocaltionVOs||[]).map(({nftId:W})=>W)],[])})},L=await Ns(O);ao({tx_id:L})}catch(N){N?.error_message&&te.error(N?.error_message)}};return async()=>{let v=await T({from:r,coinAmount:0,serviceCharge:c,feeRate:C}),N=v.utxoList||[];return o(St({name:"feeUtxoList",value:N||[]})),await x([...n||[],...N||[]],va),await y(v)}}var vf=uI;s();i();var Lf=u(E());function dI(){let o=(0,Lf.useDispatch)(),e=[Hm()],{runErrorFns:n}=sn(e);zr(n,r=>{o(km(r))})}var Df=dI;s();i();var Mf=u(h()),er=u(E());function Of(){let o=(0,er.useDispatch)(),t=ea();(0,Mf.useEffect)(()=>{o(St({name:"signInfo",value:t}))},[t])}function Rf(){let o=Ro(),t=(0,er.useDispatch)(),e=_(),n=B(),r=To(),a=Ut(),c=(0,er.useSelector)(dt),[m,d,g]=os({coinId:o,toAddr:n,walletId:r,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:c},{onSuccess:(l,f)=>{t(z(l)),t(St({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:m,fee:d,feeError:g}}s();i();var Uf={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function fI(){let o=qr(),t=_(),e=B(),n=$(),r=(0,Oe.useSelector)(dt),a=(0,Oe.useSelector)(vu),{baseCoin:c}=S(),m=(l,f)=>l.map(({coinAmount:A})=>{let I=yo(A,10**c.decimals);return{address:Ri(f),coinAmount:o(I,c,{useApproximate:!1}),symbol:c.symbol}}),d=(0,Do.useMemo)(()=>m([...r,...a],t),[r,a]),g=(0,Do.useMemo)(()=>{let l=m(r,e),f=a.reduce((A,{coinAmount:I})=>uo(A,I),"0");if(tt(f,n)){let A=yo(Kt(f,n),10**c.decimals);l.push({address:Ri(t),coinAmount:o(A,c,{useApproximate:!1}),symbol:c.symbol})}return l},[r,a,n]);return Do.default.createElement(It,{space:32},Do.default.createElement(qn,{title:F("extension_wallet_transaction_text_input")},Do.default.createElement(na,{utxos:d})),Do.default.createElement(qn,{title:F("extension_wallet_transaction_text_output")},Do.default.createElement(na,{utxos:g})))}function lI(){let o=(0,Oe.useDispatch)(),[t,e]=(0,Do.useState)(!1),{coinId:n}=(0,Wf.useParams)(),r=No(),a=(0,Oe.useSelector)(Lu),c=vf(),{signInfo:m}=(0,Oe.useSelector)(ms),d=rn(),g=Ut(),{feeLoading:l,fee:f,feeError:A}=Rf(),I=yo(f,g),T=x=>{o(St({name:"selectedSat",value:x}))};Of(),Df();let C=m?.transferReminder;return Do.default.createElement(Do.default.Fragment,null,Do.default.createElement(Q,{classes:{network:Uf.network},slot:{bottom:Do.default.createElement(fI,null)},defaultMessage:C,networkFeeProps:{loading:l,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:c},canTransferAmount:d}),Do.default.createElement(nd,{currencyId:r,bytes:I,value:a,coinId:n,signInfo:m,onChange:T,visible:t,onClose:()=>{e(!1)}}))}var Gf=lI;s();i();var Bs=u(h()),Hf=u(ko());po();function pI(){let o=(0,Hf.useHistory)(),t=vt();return(0,Bs.useEffect)(()=>{Ar(t,"0")&&o.go(-1)},[t]),Bs.default.createElement(sd,{onConfirm:()=>{o.replace(Sc)}})}var Vf=pI;var gI={[Ot.SEND]:Gf,[Ot.INSCRIBE]:Vf};function AI(){let o=Rt(),t=gI[o];return t?qf.default.createElement(t,null):null}var Kf=AI;s();i();var Jf=u(h());function CI({children:o}){let e=at().get("from");return Jf.default.createElement(vo,{fromAddress:e},o)}var Yf=CI;var TI={match:(o,t,e)=>et({coinId:o})&&[U.BRC_20,U.FRACTAL_BRC20].includes(e),Container:Yf,pages:{AddressPage:yf,AmountPage:qd,ConfirmPage:Kf}},zf=TI;s();i();s();i();var Zf=u(h());s();i();var II=()=>{let{initialType:o}=Hc();return async t=>{let{isValid:e}=await Zr(t);return e&&vc(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},SI=()=>[II()],vs=SI;var xI=()=>{let o=vs(),t=hn();return Zf.default.createElement(j,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},$f=xI;s();i();var Te=u(h());J();bo();s();i();var Yo=u(h()),Ce=u(E());Zo();J();bo();ro();s();i();var _I=()=>{let o=(0,Ce.useDispatch)(),t=(0,Ce.useSelector)(gn),e=(0,Yo.useCallback)(n=>{o(fs({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},yI=({fromAddr:o,toAddr:t,protocolId:e,minOutput:n,sendAmountInt:r,transferInputs:a})=>{let c=(0,Ce.useDispatch)();return(0,Yo.useMemo)(()=>{if(U.ARC_20!==e)return null;if(!a||a.length===0||M.eq(r,0))return c(Ki([])),null;let m=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,g=ra({address:t,amount:r,tokenType:m,atomicalId:d},n),l=Pf(a,d),f=M.sub(l,r),A=ra({address:o,amount:f,tokenType:m,atomicalId:d},n),I=[];return M.lte(f,0)?I.push(g):M.lt(f,n)?I.push(g,A):M.gte(f,n)&&I.push(A,g),c(Ki(I)),I},[e,a,r,t,n,o,c])},FI=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:n,minOutput:r,isXrc20Token:a,protocolId:c,sendAmountInt:m})=>{let d=yI({fromAddr:o,minOutput:r,protocolId:c,sendAmountInt:m,toAddr:t,transferInputs:n});return(0,Yo.useMemo)(()=>!a||U.SRC_20===c||!n?.length?null:U.ARC_20===c&&d?d:U.RUNES===c?[{address:t,amount:r,data:{id:e,amount:m}}]:U.RUNEMAIN===c||U.FRACTAL_RUNES?[{address:t,amount:r,data:{id:e,amount:m}}]:[{address:t,amount:Number(m),...Xm(n[0],c)}],[e,a,r,c,m,t,n,d])},bI=({coin:o,coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:c,isXrc20Token:m})=>{let[,d]=Qr({coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:c,utxoType:Xo.BRC20_CONVERTIBLE},{ready:o&&m&&n!==U.SRC_20});return[null,d]},EI=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:n,inscriptionOutput:r})=>(0,Yo.useMemo)(()=>o===22?546:t?n===U.SRC_20?r||790:"0":e,[o,t,e,n,r]),PI=({coin:o,isXrc20Token:t,protocolId:e,satBytes:n,transferInputs:r})=>(0,Yo.useMemo)(()=>!o||!n?!1:!(e&&t&&e!==U.SRC_20&&!r?.length),[o,t,e,n,r?.length]),kI=({coin:o,protocolId:t})=>(0,Yo.useMemo)(()=>{if(o?.address&&[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(t))return Da(o?.address?.split("-"))},[o?.address,t]),wI=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:n})=>(0,Yo.useMemo)(()=>{if(t&&e===U.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:n})}},[o?.name,t,e,n]),NI=({coinId:o,walletId:t,satBytes:e,address:n,isXrc20Token:r,coinBalance:a})=>{let c=(0,Ce.useDispatch)(),[m,d]=Vn({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:g=>{c(o!==22&&!r?Oo(g):Oo(a?.coinAmountInt)),c(re(g))}});return[m,d]},BI=({coinId:o,walletId:t,protocolId:e,tick:n,address:r})=>{let a=(0,Ce.useDispatch)(),[c,m]=Vn({coinId:o,walletId:t,protocolId:e,tick:n,address:r,coinAmount:"0",utxoType:Xo.BRC20_CONVERTIBLE},{ready:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(Oo(d))}});return[c,m]},vI=({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:r,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:l,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:I,availableSendCoinAmountInt:T,sendAmountInt:C},{ready:x,networkFeeInt:b})=>{let y=(0,Ce.useDispatch)(),[k,v,N]=os({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:r,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:l,inscriptionData:f,canTransferAmount:o===22||A?I:T,...o===22?{omni:{coinType:31,amount:C}}:{}},{ready:x,onSuccess:P=>{Math.abs(Number(M.sub(P,b)))!==parseInt(r,10)&&(y(z(P)),y(R(!1)))},onError:P=>{y(R(P))}});return[k,v,N]},LI=()=>{let o=Ro(),t=_(),e=B(),n=To(),r=Jo(o),a=r?.protocolId,c=jm(a),m=r?.baseCoinId||o,d=Ne(t,n,r?.localType),g=vt(),l=$(),f=q(),A=rn(),I=$o(),T=Jr(),[,C]=Be({protocolId:a,coinId:o,address:t,chainId:r?.chainId}),{inscriptionOutput:x,minOutput:b}=C||{},[y,k]=_I(),v=y?.satBytes;(0,Yo.useEffect)(()=>{if(!v&&C?.normal&&k({level:Vo.STANDARD,satBytes:C?.normal}),v&&y?.level!==Vo.CUSTOM){let oe=C[Kn[y?.level]?.satBytes];k({...y,satBytes:oe})}},[C]);let N=zt(o,void 0,{addressType:d}),P=EI({coinId:o,isXrc20Token:c,sendAmountInt:f,protocolId:a,inscriptionOutput:x}),w=kI({coin:r,protocolId:a}),[,O]=bI({coin:r,coinId:o,walletId:n,protocolId:a,tick:w,address:t,coinAmount:f,isXrc20Token:c}),L=FI({fromAddr:t,toAddr:e,coinTick:w,transferInputs:O,minOutput:b,isXrc20Token:c,protocolId:a,sendAmountInt:f}),D=(0,Yo.useMemo)(()=>{if(O?.length)return O.map(({txHash:oe,vout:Ln})=>`${oe}-${Ln}`)},[O]),V=PI({coin:r,isXrc20Token:c,protocolId:a,satBytes:v,transferInputs:O}),W=wI({coin:r,isXrc20Token:c,protocolId:a,sendAmount:g}),G=(0,Yo.useMemo)(()=>a===U.SRC_20?{protocolId:a,utxoType:Xo.BRC20_CONVERTIBLE}:{utxoType:Xo.TRANSFER,needFilteredUtxo:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?D:void 0},[D,a]),[oo,Z]=NI({coinId:o,walletId:n,satBytes:v,address:t,isXrc20Token:c,coinBalance:N}),[Io,zo]=BI({coinId:o,walletId:n,protocolId:a,tick:w,address:t}),[Vt,,qt]=vI({coinId:o,toAddr:e,walletId:n,fromAddr:t,satBytes:v,inputs:O,outputs:L,networkFee:l,revealOutValue:x,coinAmount:P,utxoParams:G,inscriptionData:W,isXrc20Token:c,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:T,sendAmountInt:f},{ready:V,networkFeeInt:l}),be=(0,Yo.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?Z===void 0||zo===void 0:Z===void 0,[Z,a,zo]);return{coin:r,toAddr:e,coinId:o,walletId:n,signInfo:C,feeError:qt,fromAddr:t,protocolId:a,baseCoinId:m,feeLoading:Vt,addressType:d,sendAmountInt:f,networkFeeInt:l,transferInputs:O,transferOutputs:L,isXrc20Token:c,utxoParams:G,initLoading:be,mergedCoinAmount:P,src20InscriptionData:W,sendCoinAvailableAmount:I,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:y,setSelectedNetworkFeeLevel:k,loading:oo||Vt||Io}},Ls=LI;s();i();var tl=u(h());J();ro();bo();s();i();var Qf=u(h());J();s();i();s();i();var Xf=u(E());var jf=()=>(0,Xf.useSelector)(gn).transferOutputs;ro();var ol=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:n,coin:r})=>{let a=jf();return(0,Qf.useCallback)(c=>o?M.lte(t,e)&&c!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:r?.symbol},type:no.COMMON_ERROR}:wf(a,n)?{key:"wallet_extension_error_dust_limit_transaction",type:no.COMMON_ERROR}:kf(a,n)?{key:"wallet_extension_error_dust_asset_continue",type:no.COMMON_TIP}:null:null,[o,t,e,n,r,a])};var el=o=>{let t=Ro(),e=Jo(t),n=e?.baseCoinId===0,a=e?.protocolId===U.ARC_20,c=M.div(o,10**e?.decimals),m=$o(),d=M.mul(c,2),g=ol({isArc20Token:a,sendCoinBalance:m,doubleMinOutput:d,minOutputFloat:c,minOutput:o,coin:e});return(0,tl.useCallback)(l=>{if(!o)return null;let f=g(l);return f||(n&&M.lt(l,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${c} ${e?.symbol}`},type:no.COMMON_ERROR}:null)},[o,g,n,c,e?.symbol])},nl=o=>{let t=el(o);to([t])},rl=o=>{let t=el(o);eo([t])};s();i();var Qo=u(h());J();ro();var DI=()=>{let o=Bt(),{coin:t}=S();return(0,Qo.useCallback)(n=>{let r="";return n.key&&(r=F(n?.key,n?.args)),n?.type===no.BALANCE_INSUFFICIENT?Qo.default.createElement(Qo.default.Fragment,null,Qo.default.createElement(H.Box,{className:Eo.wrap},r),Qo.default.createElement(H.Box,{className:Eo.wrap},Qo.default.createElement(de,{coin:t,receiveOnly:!0}))):n?.type===no.FEE_BALANCE_INSUFFICIENT?Qo.default.createElement(Qo.default.Fragment,null,Qo.default.createElement(H.Box,{className:Eo.wrap},r),Qo.default.createElement(H.Box,{className:Eo.wrap},Qo.default.createElement(de,{coin:o}))):r},[t,o])},sl=DI;s();i();var il={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function MI(){let{coin:o,coinId:t,signInfo:e,initLoading:n,addressType:r,fromAddr:a}=Ls(),{receivedPendingBalance:c,receivedPendingBalanceDisplay:m}=pe(),{lockedAmount:d}=ed(a,o),g=Ee(d,{decimals:o.decimals});nl(e?.minOutput);let l=sl(),f=(0,Te.useMemo)(()=>et({coinId:t})?F("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===U.SRC_20?F("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===U.ARC_20?F("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===U.RUNEMAIN||o?.protocolId===U.FRACTAL_RUNES?F("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return Te.default.createElement(X,{isGlobalLoading:n,renderError:l,totalAmountProps:{type:"amount",title:Te.default.createElement(Te.default.Fragment,null,F("extension_defi_text_available_balance"),!!f&&Te.default.createElement($e,{size:$e.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:il["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(c)>0?Te.default.createElement(_n,{lockedAmount:d,lockedAmountDisplay:g,pendingXrc:c,pendingXrcDisplay:m,addressType:r,coinId:t}):void 0}}})}var al=MI;s();i();var gt=u(h()),Ds=u(E()),cl=u(ko()),Ms=u(K()),ml=u(Uc());J();bo();ro();Cc();var OI=546;function RI(){let o=(0,cl.useHistory)(),t=(0,Ds.useDispatch)(),[e,{toggle:n}]=(0,Ms.useBoolean)(!1),{coin:r,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:l,utxoParams:f,protocolId:A,baseCoinId:I,feeLoading:T,addressType:C,isXrc20Token:x,networkFeeInt:b,sendAmountInt:y,transferInputs:k,transferOutputs:v,mergedCoinAmount:N,availableFeeCoinAmountInt:P,selectedNetworkFeeLevel:w,setSelectedNetworkFeeLevel:O,src20InscriptionData:L}=Ls(),D=No(),V=(0,Ds.useSelector)(Rr),W=Pr[r?.localType]?.[C],{showManageUTXO:G}=hs(r,W,!0);rl(l?.minOutput,a);let oo=Dr(d),[Z,Io]=(0,gt.useState)(!1),zo=(0,Ms.useMemoizedFn)(pr=>G&&[ln.BALANCE_INSUFFICIENT,ln.FEE_BALANCE_INSUFFICIENT].includes(pr)?[{onClick:async()=>{await t(nn(!1));let Ft=ml.default.stringify({addressType:C,coinId:I},{skipEmptyString:!0,skipNull:!0}),Dn=Ft?`?${Ft}`:"";o.push(Br+Dn)},btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:[]),Vt=Hn({coinId:a,walletId:d,address:g,utxoType:Xo.TRANSFER,satBytes:w?.satBytes,...f}),qt=tu({coinId:a,toAddr:c,walletId:d,fromAddr:g,protocolId:A,networkFee:b,localType:r?.localType,outputs:v,inscriptionData:L,dustSize:x?void 0:l?.minOutput,satBytes:w?.satBytes,coinAmount:a===22?OI:y,...a===22?{omni:{coinType:31,amount:y}}:{},extraPublishParams:{coinAmount:y,txType:x?Fo.BRC20_SEND:Fo.TRANS_OUT}}),be=dn({coinId:a,currencyId:D,txType:x?Fo.BRC20_SEND:Fo.TRANS_OUT,protocolId:A,address:g}),oe=(0,gt.useCallback)(async()=>{if(await un()){let Ft=[];Ft=await Vt(N,b),Ft=[...k||[],...Ft],await be(Ft,()=>{o.goBack()}),Io(!0);let Dn=await qt({utxoList:Ft});return ao({tx_id:Dn}),Dn}return Io(!1),Promise.reject()},[Vt,N,b,k,be,qt,o,V]),Ln=(0,gt.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(A)&&!k?.length?!0:m,[m,A,k?.length]);return gt.default.createElement(gt.default.Fragment,null,gt.default.createElement(Q,{addressType:C,confirmButtonProps:{disabled:Ln,onSubmit:oe},networkFeeProps:{onClick:n,loading:T,feeLevel:w?.level},renderTipActions:zo,defaultMessage:et({coinId:I})&&l?.transferReminder,canTransferAmount:et({coinId:I})&&P}),gt.default.createElement(ns,{visible:e,coinId:I,signInfo:l,currencyId:D,estimatedFee:b,value:w,onChange:O,onToggleVisible:n}),gt.default.createElement(hu,{visible:oo&&Z}))}var ul=RI;s();i();var dl=u(h());function UI({children:o}){let e=at().get("from");return dl.default.createElement(vo,{fromAddress:e},o)}var fl=UI;var WI={match:o=>Fc(o),Container:fl,pages:{AddressPage:$f,AmountPage:al,ConfirmPage:ul}},ll=WI;s();i();bo();s();i();var Al=u(h()),Cl=u(E()),Os=u(ko());J();s();i();var pl=u(h());var GI=()=>{let o=hn(),t=e=>e.filter(r=>/^(bc1p)/.test(r.address));return(0,pl.useCallback)(e=>o(e).map(a=>({...a,list:t(a?.list)})).filter(a=>a?.list?.length),[o])},gl=GI;var HI=()=>{let{coinId:o}=(0,Os.useParams)(),t=_(),e=(0,Os.useHistory)(),n=gl(),r=(0,Cl.useSelector)(co),a=vs();return Al.default.createElement(j,{addressProps:{errorFns:a,extraProps:{filterAddress:n}},confirmButtonProps:{onClick:async()=>{let{isValid:m}=await Zr(r);if(m)e.push(`${Ko}/${o}${Xe}?from=${t}`);else{let d=nt.warn({alignBottom:!1,title:F("wallet_extension_cat_dialog_title_risk_non_taproot"),text:F("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:F("wallet_extension_cat_icu_taproot")}),confirmText:F("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{d.destroy()}})}}}})},Tl=HI;s();i();var ht=u(h()),Bl=u(E()),aa=u(Et());J();s();i();var Il=u(h());J();ro();var VI=o=>{let t=Ro(),e=Jo(t),n=vt();return(0,Il.useCallback)(()=>M.gt(n,o)?{key:"wallet_extension_cat_max_send_utxo",args:{num:o,token:e?.symbol},type:no.COMMON_ERROR}:null,[e?.symbol,o,n])},Sl=o=>{let t=VI(o);to([t])},xl=()=>{eo()};s();i();var ot=u(h()),Ie=u(E()),ia=u(K());J();Mo();bo();ro();ke();we();var hl=()=>{let o=(0,Ie.useDispatch)(),t=(0,Ie.useSelector)(gn),e=(0,ot.useCallback)(n=>{o(fs({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},_l=({coin:o,coinId:t,walletId:e,protocolId:n,tick:r,address:a})=>{let[,c]=Qr({coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:"0",utxoType:Xo.BRC20_CONVERTIBLE},{ready:o?.coinId});return[null,c]},yl=({coin:o})=>(0,ot.useMemo)(()=>{if(!o?.address)return;let t=o.address.indexOf("_"),e=o.address.indexOf("_",t+1);return o.address.slice(e+1)},[o?.address]),Fl=({coinId:o,walletId:t,satBytes:e,address:n,coinBalance:r})=>{let a=(0,Ie.useDispatch)(),[c,m]=Vn({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:d=>{a(Oo(r?.coinAmountInt)),a(re(d))}});return[c,m]},bl=({UTXOList:o,coin:t})=>{if(!o||o.length===0)return"0";let e=o.slice(0,4).reduce((n,r)=>{let a=r?.tokenAmount;return M.add(n,a)},"0");return M.div(e,10**t?.decimals)},qI=({sendAmountInt:o,UTXOList:t})=>(0,ot.useMemo)(()=>{if(!t||!Number(o))return[];let e=[],n="0";for(let r=0;r<t.length;r++){let a=t[r],c=a?.tokenAmount;if(n=M.add(n,c),e.push(a),M.gte(n,o))break}return e},[t,o]),KI=({selectedUtxo:o,signInfo:t,chainIndex:e,walletId:n})=>{let r=t?.extInfo?.tokenAddr,a=t?.extInfo?.minterAddr,c=(0,Ie.useDispatch)(),{error:m,loading:d,data:g}=(0,ia.useRequest)(async()=>{if(!o||o.length===0)return[];if(!r||!a)return[];let l=o.map(T=>({txHash:T.txHash,tokenAddress:r,minterAddress:a,chainIndex:e})),f=await io().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),I=(await st(qo.getCat20GrandFatherRawTx,{rawTxRequestList:l},{headers:f}))?.data;if(I&&!I.find(T=>T.txStatus!==0))return I;throw c(R(!0)),uc.error({title:F("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[o]});return[m,d,g]},JI=({signInfo:o,selectedUtxo:t,grandFatherRawTxs:e,address:n})=>(0,ot.useMemo)(()=>{if(!o||!e||!e.length)return null;let r=o?.extInfo,a={minterAddr:r?.minterAddr,tokenAddr:r?.tokenAddr,info:{max:r?.max,name:r?.name,limit:r?.limit,symbol:r?.symbol,premine:"0",decimals:r?.decimals,minterMd5:r?.minterMd5},tokenId:r?.tokenId,revealTxid:r?.revealTxid,revealHeight:r?.revealHeight,genesisTxid:r?.genesisTxid,name:r?.name,symbol:r?.symbol,decimals:r?.decimals,minterPubKey:r?.minterPubKey,tokenPubKey:r?.tokenPubKey},c=t.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:r?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:n,amount:d.tokenAmount}})),m=e.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:c,tokenPrevTxs:m}},[o,e,t,n]),YI=({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:r,protocolId:a,CAT20TxParam:c,networkFeeInt:m,...d})=>{let g=(0,Ie.useDispatch)(),l=Qm({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:r,protocolId:a,...d}),f=Hn({coinId:o,address:t,utxoType:Xo.TRANSFER}),A=async()=>{g(mo(!0));let C=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],x=JSON.stringify(c?.tokenMetadata),b=JSON.stringify(c?.tokens),y=c?.tokenPrevTxs,{commitTx:k,revealTx:v}=await l({feeInputs:C,tokenMetadata:x,tokens:b,tokenPrevTxs:y}),N=M.add(k,v);if(C=await f(N),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),C.length===1)return g(mo(!1)),{mergeTx:"0",commitTx:k,revealTx:v};let P=await l({feeInputs:C,tokenMetadata:x,tokens:b,tokenPrevTxs:y}),w=P.mergeTx,O=M.add(w,N),L=C.reduce((D,V)=>{let W=V?.amount;return M.add(D,W)},"0");for(;M.lt(L,O);)C=await f(O),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),L=C.reduce((D,V)=>{let W=V?.amount;return M.add(D,W)},"0"),P=await l({feeInputs:C,tokenMetadata:x,tokens:b,tokenPrevTxs:y}),w=P.mergeTx,O=M.add(w,N);return g(mo(!1)),{mergeTx:w,commitTx:k,revealTx:v}},{error:I,data:T}=(0,ia.useRequest)(async()=>await A(),{debounceWait:500,ready:!!n&&!!c,refreshDeps:[n],onSuccess:C=>{let x=M.add(M.add(C.mergeTx,C.commitTx),C.revealTx);Math.abs(Number(M.sub(x,m)))!==parseInt(n,10)&&(g(z(x)),g(R(!1)))},onError:C=>{g(R(C))}});return[I,T]},El=()=>{let o=Ro(),t=_(),e=To(),n=Jo(o),r=n?.protocolId,a=Ne(t,e,n?.localType),c=q(),m=$o(),[,d]=Be({protocolId:r,coinId:o,address:t,chainId:n?.chainId}),[g,l]=hl(),f=g?.satBytes;(0,ot.useEffect)(()=>{if(!f&&d?.normal&&l({level:Vo.STANDARD,satBytes:d?.normal}),f&&g?.level!==Vo.CUSTOM){let k=d[Kn[g?.level]?.satBytes];l({...g,satBytes:k})}},[d]);let A=zt(o,void 0,{addressType:a}),I=yl({coin:n}),[,T]=_l({coin:n,coinId:o,walletId:e,protocolId:r,tick:I,address:t,coinAmount:c}),C=bl({coin:n,UTXOList:T}),[x,b]=Fl({coinId:o,walletId:e,satBytes:f,address:t,coinBalance:A}),y=(0,ot.useMemo)(()=>b===void 0,[b]);return{initLoading:y,loading:x||y,sendCoinAvailableAmount:m,CAT20CanTransferAmount:C}},Pl=()=>{let o=Ro(),t=_(),e=B(),n=To(),r=Jo(o),a=r?.protocolId,c=r?.baseCoinId||o,m=Ne(t,n,r?.localType),d=vt(),g=$(),l=q(),f=rn(),A=$o(),I=Jr(),[,T]=Be({protocolId:a,coinId:o,address:t,chainId:r?.chainId}),[C,x]=hl(),b=C?.satBytes,y=(0,Ie.useDispatch)();(0,ot.useEffect)(()=>{y(mo(!0))},[y]),(0,ot.useEffect)(()=>{if(!b&&T?.normal&&x({level:Vo.STANDARD,satBytes:T?.normal}),b&&C?.level!==Vo.CUSTOM){let Io=T[Kn[C?.level]?.satBytes];x({...C,satBytes:Io})}},[T]);let k=zt(o,void 0,{addressType:m}),v=yl({coin:r}),[,N]=_l({coin:r,coinId:o,walletId:n,protocolId:a,tick:v,address:t,coinAmount:l}),P=bl({coin:r,UTXOList:N}),w=qI({sendAmountInt:l,UTXOList:N}),[O,L,D]=KI({selectedUtxo:w,signInfo:T,chainIndex:r?.chainId,walletId:n}),V=JI({signInfo:T,selectedUtxo:w,grandFatherRawTxs:D,address:t}),[,W]=YI({coinId:o,fromAddr:t,toAddr:e,satBytes:b,coinAmount:l,protocolId:a,CAT20TxParam:V,networkFeeInt:g}),[G,oo]=Fl({coinId:o,walletId:n,satBytes:b,address:t,coinBalance:k}),Z=(0,ot.useMemo)(()=>oo===void 0,[oo]);return{coin:r,toAddr:e,coinId:o,walletId:n,signInfo:T,satBytes:b,fromAddr:t,protocolId:a,baseCoinId:c,addressType:m,sendAmount:d,sendAmountInt:l,networkFeeInt:g,feeData:W,selectedUtxo:w,initLoading:Z,rawTxError:O,sendCoinAvailableAmount:A,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:C,setSelectedNetworkFeeLevel:x,CAT20CanTransferAmount:P,CAT20GrandFatherRawTxs:D,CAT20TxParam:V,loading:G||L}},kl=({coinId:o,toAddr:t,fromAddr:e,satBytes:n,walletId:r,localType:a,networkFee:c,coinAmount:m,coinAmountInt:d,protocolId:g,dustSize:l=$m,feeData:f,CAT20TxParam:A,history:I,...T})=>{let C=Jo(o),x=No(),b=To(),y=r||b,k=_c(a),v=Hn({coinId:o,address:e,utxoType:Xo.TRANSFER}),N=dn({coinId:o,currencyId:x,txType:Fo.BRC20_SEND,protocolId:g,address:e}),P=ou({coinId:o,toAddr:t,walletId:r,fromAddr:e,satBytes:n,localType:k,coinAmount:d,networkFee:c,dustSize:l,protocolId:g,...T}),w=pm({walletId:y});return(0,ot.useCallback)(async()=>{let O=await v(c),L=O.map(vi=>({txId:vi.txHash,vOut:vi.vout,amount:vi.coinAmount}));await N(O,()=>{I.goBack()});let D=JSON.stringify(A?.tokenMetadata),V=JSON.stringify(A?.tokens),W=A?.tokenPrevTxs,G=await P({feeInputs:L,tokenMetadata:D,tokens:V,tokenPrevTxs:W}),{mergeTx:oo,commitTx:Z,revealTx:Io}=G,zo=[],Vt=JSON.stringify({protocolId:U.CAT20,broadcastType:1,nftIds:[]}),qt,be=await xo(a,Z),oe=await xo(a,Io);oo&&(qt=await xo(a,oo));let Ln={signedTx:oo,fromAdr:e,toAdr:e,serviceCharge:f.mergeTx,coinAmount:"0",coinId:C?.baseCoinId,txHash:qt,txType:Fo.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:Vt},pr={signedTx:Z,fromAdr:e,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:C?.baseCoinId,txHash:be,txType:Fo.CAT20_NOT_SHOWN,dependTx:qt?[qt]:[],itemId:"commitTx",extJson:Vt},Ft={signedTx:Io,fromAdr:e,toAdr:t,serviceCharge:f.revealTx,coinAmount:d,coinId:o,txHash:oe,txType:Fo.BRC20_SEND,dependTx:[be],itemId:"revealTx0",extJson:Vt};oo&&zo.push(Ln),zo.push(pr,Ft);let dT=(await w(zo))[oe];ao({tx_id:dT})},[v,c,N,A?.tokenMetadata,A?.tokens,A?.tokenPrevTxs,P,a,e,f,C?.baseCoinId,t,d,o,w,I])};s();i();var go=u(h());J();ro();var wl=u(Et()),zI=()=>{let o=Bt(),{coin:t}=S();return(0,go.useCallback)(n=>{let r="";if(n.key&&(r=F(n?.key,n?.args)),n?.type===no.BALANCE_INSUFFICIENT)return go.default.createElement(go.default.Fragment,null,go.default.createElement(H.Box,{className:Eo.wrap},r),go.default.createElement(H.Box,{className:Eo.wrap},go.default.createElement(de,{coin:t,receiveOnly:!0})));if(n?.type===no.FEE_BALANCE_INSUFFICIENT)return go.default.createElement(go.default.Fragment,null,go.default.createElement(H.Box,{className:Eo.wrap},r),go.default.createElement(H.Box,{className:Eo.wrap},go.default.createElement(de,{coin:o})));let a=()=>{nt.action({title:" ",children:go.default.createElement("div",{className:Eo.dlgContainer},go.default.createElement("div",{className:Eo.dlgTitle},F("wallet_extension_cat_drawer_title_utxo_meaning")),go.default.createElement("div",{className:Eo.dlgContent},F("wallet_extension_cat_drawer_subtitle_utxo_meaning")),go.default.createElement("div",{className:(0,wl.default)(Eo.dlgTitle,Eo.dlgGap)},F("wallet_extension_cat_drawer_title_cat_contract")),go.default.createElement("div",{className:Eo.dlgContent},F("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:F("commonall_button_text_next"),onConfirm:c=>{c.destroy()}})};return n?.key==="wallet_extension_cat_max_send_utxo"?go.default.createElement(go.default.Fragment,null,go.default.createElement(H.Box,{className:Eo.wrap},r,go.default.createElement(Ke,{className:"okx-wallet-plugin-information-circle",onClick:a}))):r},[t,o])},Nl=zI;s();i();var Gt={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function ZI(){let{initLoading:o,loading:t,sendCoinAvailableAmount:e,CAT20CanTransferAmount:n}=El();Sl(n);let r=Nl(),a=(0,Bl.useDispatch)(),c=$r(),m=()=>{a(Pm(!1)),c()},d=()=>{nt.action({title:" ",children:ht.default.createElement("div",{className:Gt.dlgContainer},ht.default.createElement("div",{className:Gt.dlgTitle},F("wallet_extension_cat_drawer_title_utxo_meaning")),ht.default.createElement("div",{className:Gt.dlgContent},F("wallet_extension_cat_drawer_subtitle_utxo_meaning")),ht.default.createElement("div",{className:(0,aa.default)(Gt.dlgTitle,Gt.dlgGap)},F("wallet_extension_cat_drawer_title_cat_contract")),ht.default.createElement("div",{className:Gt.dlgContent},F("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:F("commonall_button_text_next"),onConfirm:g=>{g.destroy()}})};return ht.default.createElement(X,{isGlobalLoading:o,renderError:r,customMaxAmount:n,confirmButtonProps:{loading:t,onClick:m},totalAmountProps:{maxAmount:n,type:"amount",title:ht.default.createElement("div",{className:Gt.canTransferContainer},ht.default.createElement("div",{className:Gt.canTransferText},F("wallet_extension_cat_desc_available_utxo")),ht.default.createElement(Ke,{className:(0,aa.default)(Gt.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:d})),slot:{bottom:ht.default.createElement(_n,{catTotalAmount:e})}}})}var vl=ZI;s();i();var Xt=u(h()),Ll=u(E()),Dl=u(ko()),Rs=u(K()),Ml=u(Uc());J();Cc();function $I(){let o=(0,Dl.useHistory)(),t=(0,Ll.useDispatch)(),[e,{toggle:n}]=(0,Rs.useBoolean)(!1),{coin:r,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:l,satBytes:f,sendAmount:A,sendAmountInt:I,protocolId:T,baseCoinId:C,addressType:x,networkFeeInt:b,feeData:y,selectedUtxo:k,availableFeeCoinAmountInt:v,selectedNetworkFeeLevel:N,setSelectedNetworkFeeLevel:P,CAT20TxParam:w}=Pl(),O=kl({coinId:a,toAddr:c,fromAddr:g,satBytes:f,walletId:d,feeData:y,localType:r?.localType,networkFee:b,coinAmount:A,coinAmountInt:I,protocolId:T,CAT20TxParam:w,history:o}),L=No(),D=Pr[r?.localType]?.[x],{showManageUTXO:V}=hs(r,D,!0);xl();let W=(0,Rs.useMemoizedFn)(Z=>V&&[ln.BALANCE_INSUFFICIENT,ln.FEE_BALANCE_INSUFFICIENT].includes(Z)?[{onClick:async()=>{await t(nn(!1));let Io=Ml.default.stringify({addressType:x,coinId:C},{skipEmptyString:!0,skipNull:!0}),zo=Io?`?${Io}`:"";o.push(Br+zo)},btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:[]),G=(0,Xt.useCallback)(async()=>{await O()},[O]),oo=(0,Xt.useMemo)(()=>!k?.length||m,[m,k?.length]);return Xt.default.createElement(Xt.default.Fragment,null,Xt.default.createElement(Q,{addressType:x,confirmButtonProps:{disabled:oo,onSubmit:G},networkFeeProps:{onClick:n,feeLevel:N?.level},renderTipActions:W,defaultMessage:et({coinId:C})&&l?.transferReminder,canTransferAmount:et({coinId:C})&&v}),Xt.default.createElement(ns,{visible:e,coinId:C,signInfo:l,currencyId:L,estimatedFee:b,value:N,onChange:P,onToggleVisible:n}))}var Ol=$I;s();i();var Rl=u(h());function XI({children:o}){let e=at().get("from");return Rl.default.createElement(vo,{fromAddress:e},o)}var Ul=XI;var jI={match:(o,t,e)=>et({coinId:o})&&[U.CAT_20].includes(e),Container:Ul,pages:{AddressPage:Tl,AmountPage:vl,ConfirmPage:Ol}},Wl=jI;s();i();So();s();i();var Ql=u(h());var Gs=u(E());var ma=u(K());J();s();i();var ql=u(h()),Kl=u(K());s();i();J();Zo();var Gl=(o,t)=>{let[e,n]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:n}]}]},QI=(o,t)=>Ua(Oa([...o,...t],"assetName")).map(n=>{let r=o.find(c=>c?.assetName===n),a=t.find(c=>c?.assetName===n);return{assetName:n,amount:M.add(r?.amount||0,a?.amount||0)}}),oS=o=>{let t=o.reduce((n,r)=>{let{multiAsset:a}=r;return a?.length?[...n,...a]:n},[]),e=[];return t.forEach(n=>{let{policyId:r,assets:a}=n,c=Ma(e,{policyId:r});if(c!==-1){let{assets:m}=e[c];e[c]={policyId:r,assets:QI(a,m)}}else e=[...e,n]}),e},Hl=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:n,contractAddress:r})=>{let{AdaWallet:a}=await Wn(),c;return e===0&&t?.some(({multiAsset:m})=>!!m?.length)?c=oS(t):e!==0&&(c=Gl(r,n)),a.minAda(o,c)},Vl=async o=>{let{AdaWallet:t}=await Wn();return t.minFee(o)},tS="999999999",eS="transfer",Us=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:n,baseCoinId:r,contractAddress:a,minTransferAmountInt:c})=>{let m={address:o,inputs:t,ttl:tS,type:eS,changeAddress:e};return r===0?m={...m,amount:n}:m={...m,amount:c,multiAsset:Gl(a,n)},m};var nS=({utxoList:o,toAddr:t,fromAddr:e,coinId:n,sendAmount:r,minTransferAmountInt:a},c)=>{let m=Jo(n),[d,g]=(0,ql.useState)("0");return(0,Kl.useDeepCompareEffect)(()=>{(async()=>{if(!o?.length)return;let l=Us({toAddr:t,fromAddr:e,utxoList:o,contractAddress:m?.address,baseCoinId:m?.baseCoinId,sendAmount:r,minTransferAmountInt:a});try{let f=await Vl({data:l});c?.(f),g(f)}catch(f){console.log(f)}})()},[m,t,e,r,a,o]),d},Jl=nS;s();i();var Zl=u(h()),$l=u(K());s();i();var zl=u(K());we();ke();Mo();J();s();i();var Yl=u(ko());var rS=()=>{let{coinId:o}=(0,Yl.useParams)(),t=_(),e=To(),[n,r]=nm(o);return{address:t,walletId:e,coin:n||{},coinId:Number(o),baseCoin:r||{},baseCoinId:n?.baseCoinId}},En=rS;var sS=()=>{let o=cn(),{coin:t,coinId:e,walletId:n,address:r}=En(),a=t?.baseCoinId;return(0,zl.useMemoizedFn)(async(c,m,d)=>{let g=await io().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),l=m,f=c,A=M.add(M.add(a===0?c:d,m),d);a===0&&M.gte(A,o)&&(f=o,l="0"),a!==0&&(l=M.add(m,M.add(d,d)));let I={coinId:e,address:r,fee:l,amount:f},{data:T}=await st(qo.getSpecialUtxoList,I,{headers:g});return T},[e,n,r,a,o])},Ws=sS;var iS=(o,t,e)=>{let[n,r]=(0,Zl.useState)([]),a=Ws();return(0,$l.useDeepCompareEffect)(()=>{(async()=>{let c=await a(o,t,e);r(c)})()},[o,t,e,a]),n},Xl=iS;s();i();var ca=u(K());ro();J();var aS=o=>{let t=S(),{coin:{symbol:e,baseCoinId:n,decimals:r}}=t,a=M.div(o,10**r);return(0,ca.useMemoizedFn)(c=>n===0&&M.gt(a,0)&&M.lt(c,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:Ee(a,{symbol:e})},type:no.COMMON_ERROR}:null,[a,e,n])},cS=o=>{let t=Bt(),{coin:e}=S(),n=$(),r=cn(),{baseCoinId:a}=e;return(0,ca.useMemoizedFn)(c=>{let m=M.mul(c,10**e?.decimals),d,g;a===0?(g=M.add(M.add(m,n),o),d=M.add(m,n)):(g=M.add(M.add(n,o),o),d=M.add(n,o));let l=M.sub(r,d);return l!=="0"&&M.lt(l,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:Ee(g,{decimals:t?.decimals})},type:no.COMMON_ERROR}:null},[a,n,r,t?.decimals,e?.decimals])},mS=o=>{let t=aS(o),e=cS(o);to([t,e])},jl=mS;function uS(){let o=(0,Gs.useDispatch)(),t=$(),n=(0,Gs.useSelector)(rs)?.minTransferInt,r=q(),a=B(),c=cn(),{coin:m,coinId:d,baseCoinId:g,address:l}=En(),f=Xl(r,t,n);return(0,ma.useDeepCompareEffect)(()=>{(async()=>{let A=await Hl({contractAddress:m?.address,baseCoinId:g,utxoList:f,toAddr:a,sendAmountInt:r});o(Wu({minTransferInt:A}))})()},[f,g,a,r,m?.address]),(0,ma.useDeepCompareEffect)(()=>{g===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(Oo(M.sub(c,n)))},[f,c,n]),jl(n),Jl({coinId:d,toAddr:a,utxoList:f,fromAddr:l,minTransferAmountInt:n,sendAmount:r},A=>{o(z(A))}),Ql.default.createElement(X,null)}var op=uS;s();i();var rp=u(h());s();i();var tp=u(E()),ep=u(K());J();var dS=()=>{let t=(0,tp.useSelector)(rs)?.minTransferInt,{coin:e,coinId:n,address:r,walletId:a}=En(),c=Lr(a),m=q(),d=B(),g=$(),l=Ws(),f=wo({fromAddr:r,walletId:a,localType:e?.localType});return(0,ep.useMemoizedFn)(async()=>{try{let I=await l(m,g,t),T=Us({toAddr:d,fromAddr:r,utxoList:I,minTransferAmountInt:t,sendAmount:m,baseCoinId:e?.baseCoinId,contractAddress:e?.address}),C=await f({params:T}),x=await xo(e?.localType,C),b={coinId:n,txHash:x,signedTx:C,walletId:a,toAdr:d,serviceCharge:g,fromAdr:r,coinAmount:m,walletType:c?.serverWalletType},y=await Ns(b);ao({tx_id:y})}catch(I){te.error(I?.error_message||F("wallet_home_toast_network_error"))}},[e,m,d,t,g,c?.serverWalletType,l])},np=dS;function fS(){let o=np();return eo(),rp.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})}var sp=fS;var lS={match:o=>o===ja,pages:{AmountPage:op,ConfirmPage:sp,AddressPage:j}},ip=lS;s();i();s();i();var cp=u(h());s();i();Zo();So();var pS=()=>{let o=Dt(),t=Pc(),e=tn({factionType:Ir});return[o,async n=>(await Promise.all(t.map(c=>{let m=wr(e,c);return ae(n,c,m)}))).some(Ba)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},ap=pS;var gS=()=>{let o=ap();return cp.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}}})},mp=gS;s();i();var fp=u(h());s();i();var up=u(E()),Vs=u(K());po();ro();Mo();s();i();var Hs=u(h());So();function ua(){let{baseCoin:o}=S(),t=B(),[e,n]=(0,Hs.useState)(!1),r=tn({factionType:Ir});return(0,Hs.useEffect)(()=>{(async()=>{let c=wr(r,o.coinId),m=await ae(t,o?.coinId,c);n(!m)})()},[o,t]),e}var AS=async({memo:o,fromAddress:t,toAddress:e,amountInt:n,isIBCTransfer:r,baseCoin:a,signInfo:c})=>{let{chainId:m,sequence:d,accountNumber:g,feeDemon:l,demon:f,sourceChannel:A,normal:I,gasLimit:T}=c,C={chainId:m,sequence:d,accountNumber:g,feeDemon:l,feeAmount:Go(I,T),gasLimit:T,memo:o,fake:!0},x={fromAddress:t,toAddress:e,demon:f,amount:n},b={};if(r){let k=uo(Math.round(Date.now()/1e3),300);b={...C,type:ze.IBC_TRANSFER,data:{...x,sourcePort:"transfer",sourceChannel:A,ibcTimeoutTimestamp:k}}}else b={...C,type:ze.TRANSFER,data:{...x}};return await io().signTransaction(b,t,a.localType)},CS=()=>{let o=(0,up.useDispatch)(),[t,{setFalse:e}]=(0,Vs.useBoolean)(!0),{coin:n}=S(),{coinId:r}=n,a=_(),c=B(),m=fo(),d=ua();return(0,Vs.useDebounceEffect)(()=>{r&&c&&m!=="0"&&(async()=>{try{let l=await Qc({coinId:r,from:a,to:c}),f=await AS({memo:"",fromAddress:a,toAddress:c,amountInt:m,isIBCTransfer:d,baseCoin:n,signInfo:l}),A=await om({coinId:r,from:a,inputData:f}),I=Math.ceil(Go(l.normal,A));o(z(I)),o(Cs({inputData:f,signInfo:l,gasLimit:A,isIBCTransfer:d})),o(R(!1))}catch{o(R(!0))}finally{e()}})()},[r,a,c,m,d]),t},dp=CS;function TS(){let o=dp();return to(),fp.default.createElement(X,{confirmButtonProps:{loading:o}})}var lp=TS;s();i();var _t=u(h()),Ks=u(E()),Ap=u(K());s();i();var Se=u(h()),pp=u(Et());J();s();i();var Pn={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var IS=({value:o,onChange:t,placeholder:e,title:n=F("wallet_extension_title_memo_optional"),dashed:r=!0,error:a,errorType:c,maxLength:m=256})=>{let d=Rc();return Se.default.createElement(It,{bordered:!1},Se.default.createElement(qn,{title:Se.default.createElement(dc,{href:d?.sendMemoInput,className:(0,pp.default)(Pn["memo-title__link"],{[Pn["memo-title__link__dashed"]]:r})},Se.default.createElement(Y.Text,{inherit:!0},n))},Se.default.createElement(Jt.TextArea,{placeholder:e||F("wallet_extension_input_memoinfro"),size:Jt.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:m,error:a,errorType:c,className:Pn["memo-input"],inputClassName:Pn["memo-input-core"],innerClassName:Pn["memo-input-box"]})))},xe=(0,Se.memo)(IS);s();i();var qs=u(E());po();ro();Mo();var SS=o=>{let{coin:t,baseCoin:e}=S(),n=_(),r=fo(),a=(0,qs.useSelector)(co),c=(0,qs.useSelector)(mt),{gasLimit:m,signInfo:d,isIBCTransfer:g,gasPrice:l}=(0,qs.useSelector)(ds),f=Bo();return lo(async()=>{if(!await un())throw new Error("mpc error")},async()=>{let{chainId:x,sequence:b,accountNumber:y,feeDemon:k,demon:v,sourceChannel:N}=d,P={chainId:x,sequence:b,accountNumber:y,feeDemon:k,feeAmount:c,gasLimit:m,memo:o},w={fromAddress:n,toAddress:a,demon:v,amount:r},O={};if(g){let D=uo(Math.round(Date.now()/1e3),300);O={...P,type:ze.IBC_TRANSFER,data:{...w,sourcePort:"transfer",sourceChannel:N,ibcTimeoutTimestamp:D}}}else O={...P,type:ze.TRANSFER,data:{...w}};return await io().signTransaction(O,n,e.localType)},async x=>{let b={memo:o,gasPrice:l,gasLimit:m},y=await xo(t.localType,x),k={signedTx:x,coinAmount:r,coinId:t.coinId,fromAdr:n,toAdr:a,serviceCharge:c,extJson:JSON.stringify(b),txHash:y};return await f(k)},x=>(ao({tx_id:x}),x))},gp=SS;s();i();function da({feeInfo:o,callback:t}){let e=Kr();return{level:o.gasType,loading:!e&&o.initLoading,networkFee:!e&&o.initLoading?void 0:o.gasFee,estimateFailed:e||o.error,onClick:()=>{t()}}}function xS(){let o=(0,Ks.useDispatch)(),[t,e]=(0,_t.useState)({}),[n,{toggle:r}]=(0,Ap.useToggle)(!1),{coin:a}=S(),{coinId:c}=a,m=_(),d=B(),g=fo(),l=(0,Ks.useSelector)(ds),f=da({feeInfo:t,callback:r}),[A,I]=(0,_t.useState)(""),T=gp(A),C=async()=>{await T()},x=y=>{I(y.target.value)},b=y=>{e(y),o(z(y.gasFee)),o(R(f.estimateFailed)),o(Cs({...l,gasLimit:y.gasAmount,gasPrice:y.gasPriceStep}))};return eo(),_t.default.createElement(_t.default.Fragment,null,_t.default.createElement(Q,{confirmButtonProps:{onSubmit:C},slot:{bottom:_t.default.createElement(_t.default.Fragment,null,_t.default.createElement(xe,{value:A,onChange:x}),_t.default.createElement(id,{visible:n,coinId:String(c),address:m,inputData:l.inputData,to:d,value:g,onBack:r,onClose:r,onChange:b}))},networkFeeProps:f}))}var Cp=xS;var hS={match:o=>bc(o),pages:{AddressPage:mp,AmountPage:lp,ConfirmPage:Cp}},Tp=hS;s();i();s();i();var bp=u(h());s();i();var Ip=u(K()),_S=()=>{let{baseCoin:o}=S();return(0,Ip.useMemoizedFn)(async t=>{let e=Tt(t,o.localType);return await ae(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},yS=()=>{let o=Dt(),t=_S();return[o,t]},Sp=yS;s();i();var _p=u(E()),yp=u(K());Zo();s();i();var xp=u(K());J();var FS=()=>{let o=lu();return(0,xp.useMemoizedFn)(async t=>{let e;try{e=(await Kc(t)).popupInfoList}catch(n){throw te.error(F("wallet_extension_transaction_error_general_check_network")),n}return e?.length&&await o(e),e})},hp=FS;var bS=10,ES=()=>{let o=(0,_p.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,yp.useBoolean)(!1),{coin:r,baseCoin:a}=S(),c=_(),m=B(),[d]=tn({coinId:a.coinId}),g=Lt(),l=hp();return{onClick:async()=>{try{e();let A=await l({from:c,to:m,method:"wallet_inner_transfer",chainIndex:d?.realChainId??r.chain}),I=La(A,"0.templeteId");o(qu(I===bS)),g()}catch(A){console.log(A)}finally{n()}},loading:t}},Fp=ES;var PS=()=>{let o=Sp(),{onClick:t,loading:e}=Fp();return bp.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},Ep=PS;s();i();var fa=u(h());Zo();s();i();var Pp=u(h()),kp=u(E());function kS(){let o=(0,kp.useDispatch)(),{coin:t}=S();(0,Pp.useEffect)(()=>{t.systemToken&&o(ne(t.coinId))},[t.coinId])}var wp=kS;var wS=()=>{let o=vt(),e=!!Nm().key||gr(o)||o==="",n=$r(),r=Qu({disabled:e,onClick:n});return to(),wp(),fa.default.createElement(X,{slot:{footer:fa.default.createElement(kt,{buttonGroup:r})}})},Np=wS;s();i();var Ht=u(h()),wn=u(E());s();i();var Bp=u(h()),vp=u(E()),Lp=u(ko());nc();function NS(){let o=(0,Lp.useHistory)(),{baseCoin:t}=S(),e=it(),n=_(),r=B(),a=q(),c=(0,vp.useSelector)(ut),m=Dm(),d=hr({from:n,to:r,value:bt(a),data:c}),g=()=>{o.go(-3)};return Bp.default.createElement(pu,{needMev:!0,chainId:t.chainId,walletId:e,txParams:d,showDappInfo:!1,coinId:t.coinId,onConfirm:m,onCancel:g})}var Dp=NS;s();i();var jt=u(h());J();s();i();var kn={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function BS({visible:o,onClose:t,onConfirm:e}){let n=xc({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return jt.default.createElement(nt.Confirmation,{visible:o,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:t},jt.default.createElement("div",{className:kn.content},jt.default.createElement(ac,{src:n,className:kn.img}),jt.default.createElement("div",{className:kn.title},F("wallet_extension_transaction_dialog_title_change_type")),jt.default.createElement("div",{className:kn.tip},F("wallet_extension_transaction_dialog_desc_change_type")),jt.default.createElement("div",{className:kn.btns},jt.default.createElement(Ao,{category:Ao.CATEGORY.fill,type:Ao.TYPE.highlight,size:Ao.SIZE.lg,onClick:t},F("commonall_text_btn_cancel")),jt.default.createElement(Ao,{category:Ao.CATEGORY.outline,type:Ao.TYPE.primary,size:Ao.SIZE.lg,onClick:e},F("commonall_modal_btn_continue")))))}var Mp=BS;s();i();var la=u(h()),Js=u(E());s();i();var nr={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function vS({errorMsg:o}){let t=(0,Js.useDispatch)(),{coin:e}=S(),n=(0,Js.useSelector)(ut),r=a=>{t(Vu(a))};return e.baseCoinId!==0?null:la.default.createElement(It,{verticalPadding:!1},la.default.createElement(mu,{className:nr.root,titleClass:nr.titleClass,headerClassName:nr.headerClassName,contentClassName:nr.contentClassName,value:n,onChange:r,error:o,autoResize:!0}))}var Op=vS;s();i();var pa=u(E());function LS(){let{coin:o}=S(),t=(0,pa.useSelector)(wu),e=(0,pa.useSelector)(ut);return o.baseCoinId===0&&t&&e}var Rp=LS;s();i();var Up=u(E());var DS=()=>{let o=(0,Up.useSelector)(Cn),{coin:t}=S(),e=fo(),n=_(),r=B();return{fetchParams:{coinId:t.coinId,from:n,to:r,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},Wp=DS;s();i();var rr=u(E());nc();lT();bo();ro();qe();po();Mo();s();i();var Gp=u(h());var MS=()=>(0,Gp.useCallback)(o=>{try{typeof o=="string"&&!!o&&ao({tx_id:o})}catch(t){console.log(t)}},[]),Ys=MS;s();i();var Vp=u(h()),qp=u(E());s();i();var Hp=({contractAddress:o,toAddress:t,amount:e})=>{try{let n=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return p.Buffer.from(n).toString("hex")}catch{return""}};var OS=()=>{let{coin:o}=S(),t=Tt(B(),o.localType),e=fo(),n=(0,qp.useSelector)(An),{isFacet:r,facetContractAddress:a}=n||{};return(0,Vp.useMemo)(()=>!o.address||!Om(t)?"":r?Hp({contractAddress:a,toAddress:t,amount:e}):fn(t,e),[o,t,e,r,a])},zs=OS;var RS=()=>{let o=(0,rr.useDispatch)(),{coin:t}=S(),e=Jm(),n=mn(),r=q(),a=se(),c=_(),m=B(),d=Tt(c,t.localType),g=Tt(m,t.localType),l=it(),{activityId:f,activity:A,status:I,tip:T}=ce(),C=zs(),x=(0,rr.useSelector)(ut),b=(0,rr.useSelector)(An),y=Ys(),k=(L,D)=>{let{userGasInfo:V}=D,{updateGasInfo:W}=L;return W?{...W,gasLimit:V.gasLimit,supportEip1559:V.supportEip1559,networkFee:V.networkFee}:{...V}},v=L=>{let D=L.supportEip1559?L.maxFeePerGas:L.gasPrice,V=L?.networkFee||Go(D,L.gasLimit),W=Kt(n,V);if(Ho(W,0))return[!1,r];if(t.baseCoinId===0)return a?[tt(W,0),W]:[On(r,W),r];let G=e;t.systemToken&&(G=Kt(G,V));let oo=a?G:r;return[On(oo,G),oo]},N=({updateData:L,finallyGasInfo:D,publishAmountInt:V})=>{let{nonce:W}=L,G=V,oo=sc(t.localType)?.realChainIdHex,Z={from:d,gasLimit:bt(D.gasLimit),nonce:bt(W),chainId:oo};return D.supportEip1559?(Z.maxFeePerGas=bt(D.maxFeePerGas),Z.maxPriorityFeePerGas=bt(D.maxPriorityFeePerGas),Z.type=lc.FEE_MARKET):Z.gasPrice=bt(D.gasPrice),b?.isFacet?(Z.value="0",Z.to=b?.facetBlackHoleAddress,Z.data=C):t.address?(Z.value="0",Z.to=Tt(t.address,t.localType),Z.data=C):(Z.value=bt(G),Z.to=g,x&&(Z.data=x)),hr(Z)},P=({txParams:L,publishAmountInt:D})=>{let V={...L};return t.systemToken&&(V.value=Ga(bt(D))),V.walletId=l,V},w=({txParams:L,publishAmountInt:D,dataForCheck:V={}})=>{let{userGasInfo:W={}}=V,G=Ve(L.value),oo=Ve(L.gasLimit),Z=Ve(W.supportEip1559?L.maxFeePerGas:L.gasPrice),Io={...L,value:G,from:c,to:m,gas:oo,gasPrice:Z,priorityFee:Ve(W.supportEip1559?L.maxPriorityFeePerGas:0),nonce:Ve(L.nonce),repeatTxType:fc.CONFIRMING,oldTxHash:"",gasType:W?.gasType};return{coinId:t.coinId,coinAmount:D,fromAdr:c,toAdr:m,serviceCharge:Go(oo,Z),extJson:JSON.stringify(Io),txSource:rt.NORMAL,inputData:L.data?L.data:"",activityId:f}};return async(L,D={})=>{let V=k(L,D),[W,G]=v(V);if(!W)throw new Error("balance check error");let oo=N({updateData:L,finallyGasInfo:V,publishAmountInt:G}),Z=P({txParams:oo,publishAmountInt:G}),Io=w({txParams:oo,publishAmountInt:G,dataForCheck:D});Ha({activityId:f,activity:A,status:I,tip:T,walletId:l,address:d}),await o(Dc({txParams:Z,walletId:l}));let zo=await io().signAndPublishTransferTransaction({signParams:Z,from:Nc(oo.from,t.localType),baseChain:Bc(t.localType),publishParams:Io});y(zo)}},Kp=RS;s();i();var Zs=u(E());var US=()=>{let o=(0,Zs.useDispatch)(),t=$(),e=(0,Zs.useSelector)(Cn),{gasLimit:n,gasPrice:r,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:l,gasType:f}=e,{minGasFee:A}=Am({gasLimit:n,gasPrice:r,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:l,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(ls(!0))}}},Jp=US;var WS=()=>{let o=(0,wn.useDispatch)(),t=Jp(),e=Wp(),n=Lm(),r=au(),a=Kp(),{clear:c}=ce(),m=(0,wn.useSelector)(ut),d=es(m),g=Rp(),[l,f]=(0,Ht.useState)(!1),A=async()=>{if(g)return f(!0),{pause:!0};try{let T=await r({...e.fetchParams,userGasInfo:e.userGasInfo,baseCoinAmountUse:e.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:n});return await a(T,e),null}catch(T){if(T?.message===iu)throw new Error(Xr);{let C=T?.data?.originalError;throw yu(C?.code)&&c?(c(),C):T}}},I=(0,wn.useSelector)(ue);return eo(),Ht.default.createElement(Ht.default.Fragment,null,Ht.default.createElement(Q,{slot:{bottom:Ht.default.createElement(Op,{errorMsg:d})},networkFeeProps:t,confirmButtonProps:{disabled:!!d,onSubmit:A},tipMessageProps:{blockAddressInfo:I}}),Ht.default.createElement(Mp,{visible:l,onClose:()=>{f(!1),Gi({action_after_pop_up:"cancel"})},onConfirm:()=>{o(Ku(!0)),f(!1),Gi({action_after_pop_up:"confirm"})}}))};function GS(o){return(0,wn.useSelector)(ss)?Ht.default.createElement(Dp,null):Ht.default.createElement(WS,{...o||{}})}var Yp=GS;s();i();var At=u(h()),he=u(E()),ga=u(K());s();i();var zp=u(E());ro();function HS(){let{coin:o}=S(),t=_(),e=Bm(),n=(0,zp.useSelector)(Cn);return im({txType:sm.transfer,coinId:o.coinId,fromAddress:t,unavailable:n.gasType===Vo.CUSTOM,fee:e})}var Zp=HS;var VS=(0,At.memo)(()=>{let o=(0,he.useDispatch)(),t=(0,At.useRef)(!1),e=(0,At.useRef)(!1),n=(0,he.useSelector)(Nt),r=(0,he.useSelector)(ku),{coin:a}=S(),c=_(),m=B(),d=Tt(c,a.localType),g=Tt(m,a.localType),l=zs(),f=(0,he.useSelector)(ut),A=a.baseCoinId===0?f:l,I=q(),T=No(),C=Yr(),x=(0,he.useSelector)(An),{isFacet:b,facetBlackHoleAddress:y}=x||{},{disabled:k,fetchOnce:v}=(0,At.useMemo)(()=>{let G=null,oo=a.baseCoinId===0&&es(f);return n&&(a.baseCoinId!==0||!oo)&&(G=+new Date),{disabled:oo||C,fetchOnce:G}},[a.baseCoinId,f,C,n]),N=ce(),P=(0,At.useMemo)(()=>b?y:a.baseCoinId===0?g:a.address,[a.baseCoinId,a.address,g,b,y]),w=()=>{t.current||e.current?o(R(!0)):o(R(!1))},O=(0,ga.useMemoizedFn)(G=>{o(Gu(G?.signInfo||{}))}),L=(0,ga.useMemoizedFn)(G=>{o(Hu(G)),o(mo(G?.isNetworkFeeLoading));let oo=G.supportEip1559?G.maxFeePerGas:G.gasPrice,Z=G.networkFee;oo==="0"?e.current=!0:e.current=!1,G?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,o(z(Z)),w()}),D=()=>{o(ls(!1))},V=()=>{t.current=!1},W=()=>{t.current=!0};return At.default.createElement(Cm,{currencyId:T,visible:r,coinId:a.coinId,address:d,inputData:A,tokenAddress:P,value:a.address?"0":I,gasLimitOptions:{fetchOnce:v,disabled:k,onFetchSuccess:V,onFetchError:W},estimatedL1FeeOptions:{fetchOnce:v,disabled:k},onBack:D,onServerDataChange:O,onGasChange:L,gasReturn:N})}),qS=({children:o})=>{let t=Zp(),e=(0,he.useSelector)(ss);return At.default.createElement(_u,{gasReturn:t},o,!e&&At.default.createElement(VS,null))},$p=qS;var KS={match:o=>yc(o),Container:$p,pages:{AddressPage:Ep,AmountPage:Np,ConfirmPage:Yp}},Xp=KS;s();i();So();s();i();s();i();var $s=u(h()),jp=u(E()),Qp=u(K());var JS=()=>{let o=(0,jp.useDispatch)(),{coin:t}=S(),e=_(),n=(0,$s.useCallback)(async()=>{try{let{data:a={}}=await Qe({coinId:t.coinId,address:e});a?.info?.normal?o(z(a.info.normal)):o(R(!0))}catch{o(R(!0))}finally{o(mo(!1))}},[o,e,t.coinId]),{run:r}=(0,Qp.useDebounceFn)(n,{wait:500});(0,$s.useEffect)(()=>{o(mo(!0)),r()},[e,t.coinId,r,o])},og=JS;var YS=({children:o})=>(og(),o),tg=YS;s();i();var eg=u(h());var zS=()=>(to(),eg.default.createElement(X,null)),ng=zS;s();i();var sg=u(h());s();i();ke();we();Mo();var ZS=()=>{let{coin:o}=S(),t=_(),e=fo(),n=$(),r=To(),a=B(),c=wo({fromAddr:t,localType:o.localType,walletId:r}),m=wt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:a,networkFee:n,localType:o.localType});return lo(async()=>{let T=await io().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),C={coinId:o.coinId,address:t,amount:e,fee:n,accountId:r},{data:x}=await st(qo.getSpecialUtxoList,C,{headers:T});return x},T=>({inputs:T.map(y=>({txId:y.txId,vOut:y.index,address:y.address,amount:y.amount})),outputs:[{address:a,amount:e}],address:t,fee:n}),async T=>await c({params:T}),async T=>await m(T),T=>(ao({tx_id:T}),T))},rg=ZS;var $S=()=>{let o=rg();return eo(),sg.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},ig=$S;var XS={match:o=>o===Qa,Container:tg,pages:{AddressPage:j,AmountPage:ng,ConfirmPage:ig}},ag=XS;s();i();So();s();i();var cg=u(h());var jS=({children:o})=>{let e=at().get("from");return cg.default.createElement(vo,{fromAddress:e},o)},mg=jS;s();i();var Cg=u(h());s();i();var ug=u(K());ke();we();var QS=()=>{let{baseCoin:o}=S();return(0,ug.useMemoizedFn)(async t=>{let e={address:t,coinId:o.coinId};try{let{data:r}=await st(qo.postCheckAddress,e);if(r?.res)return null}catch(r){console.log(r)}return await ae(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},dg=()=>{let o=Dt(),t=QS();return[o,t]};s();i();var Xs=u(h()),fg=u(E()),lg=u(K());po();var ox=()=>{let o=(0,fg.useDispatch)(),{coin:t}=S(),e=_(),n=B(),r=ct(),a=(0,Xs.useCallback)(async()=>{try{let m=await r({coinId:t.coinId,address:e,fromAddr:e,toAddr:n});o(Zu({name:"signInfo",value:m}));let d=[],{fee:g,depositMinAmount:l,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:I}=m;t.baseCoinId===0?d.push(g):I===0?d.push(g,f,l,A):d.push(g,f);let T=d.reduce((C,x)=>uo(C,x),0);o(z(T))}catch{o(R(!0))}finally{o(mo(!1))}},[o,r,t.coinId,t.baseCoinId,e,n]),{run:c}=(0,lg.useDebounceFn)(a,{wait:500});(0,Xs.useEffect)(()=>{o(mo(!0)),o(R(!1)),c()},[o,a,c])},pg=ox;s();i();var gg=u(h()),js=u(E());po();So();var tx=()=>{let o=(0,js.useDispatch)(),{coin:t,baseCoin:e}=S(),{baseCoinId:n}=t,r=_(),a=To(),c=Ne(r,a,Ja),d=zt(e.coinId,a,{addressType:c})?.coinAmountInt,f=(0,js.useSelector)(In)?.signInfo?.storageUsedAmount;(0,gg.useEffect)(()=>{if(!d||!f)return;let A=Kt(d,f);o(n===0?Oo(A):re(A))},[o,n,f,d])},Ag=tx;var ex=()=>{pg(),Ag();let o=dg();return Cg.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},Tg=ex;s();i();var _g=u(h());s();i();var Ig=u(E()),Aa=u(K());po();ro();var Sg=()=>{let o=$o(),t=Ym(),e=(0,Ig.useSelector)(In),{coin:n,baseCoin:r}=S(),a=$(),c=qr();return(0,Aa.useMemoizedFn)(m=>{let d=uo(e?.signInfo?.storageUsedAmount,a),g=yo(d,10**r.decimals);return(n.baseCoinId===0?Ho(o,m):Ho(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:c(g,r,{useApproximate:!1,isFee:!0})},type:no.FEE_BALANCE_INSUFFICIENT}:null})},xg=()=>{let o=Gm(),t=Sg();to({fns:[o,t],override:!0})},nx=()=>{let o=Sg();return(0,Aa.useMemoizedFn)(t=>{let e=o(t);return e?{...e,highlight:ve.AMOUNT}:null})},hg=()=>{let o=Vm(),t=nx();eo({fns:[o,t],override:!0})};var rx=()=>(xg(),_g.default.createElement(X,{totalAmountProps:{type:"amount"}})),yg=rx;s();i();var Eg=u(h());s();i();var Fg=u(E()),Ca=u(CT());var sx=()=>{let{coin:o}=S(),t=_(),e=B(),n=fo(),r=$(),a=To(),c=(0,Fg.useSelector)(In),m=ct(),d=Ys(),g=wo({fromAddr:t,localType:o.localType,walletId:a}),l=wt({coinId:o.coinId,coinAmount:n,fromAddr:t,toAddr:e,localType:o.localType,networkFee:r,walletId:a}),f=async()=>await m({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=x=>{let{blockHash:b,nonce:y}=x;return{from:t,blockHash:b,type:Ca.NearTypes.TransferNear,nonce:y,receiverId:e,amount:n}},I=x=>{let{blockHash:b,nonce:y}=x,{signInfo:k}=c,{toAddressCheck:v,minTransferTokenValue:N,depositGasFee:P,fee:w,depositMinAmount:O}=k;return{from:t,blockHash:b,type:Ca.NearTypes.TransferToken,nonce:y,receiverId:e,amount:n,contract:o.address,depositGas:P,transferGas:w,depositValue:O,minTransferTokenValue:N,shouldDeposit:Boolean(v===0)}};return lo(f,x=>o.baseCoinId===0?{params:A(x)}:{params:I(x)},g,l,d)},bg=sx;var ix=()=>{let o=bg();return hg(),Eg.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},Pg=ix;var ax={match:o=>o===oc,Container:mg,pages:{AddressPage:Tg,AmountPage:yg,ConfirmPage:Pg}},kg=ax;s();i();s();i();var Lg=u(h()),Dg=u(E());J();s();i();var sr=u(h()),Qs=u(E());ro();po();var wg=()=>{let{toRent:o}=(0,Qs.useSelector)(Jn),{coin:t}=S(),e=$o();return(0,sr.useCallback)(n=>{if(t.baseCoinId!==0)return null;let r=yo(o,10**t.decimals);return Ho(n,r)?{key:"walletextension_toast_text_minimum_rent_fee",args:{number:r},type:no.COMMON_ERROR}:null},[e,o])},Ng=()=>{let{selfRent:o,toRent:t}=(0,Qs.useSelector)(Jn),{coin:e,baseCoin:n}=S(),r=(0,Qs.useSelector)(mt),a=mn();return(0,sr.useCallback)(()=>{if(e.baseCoinId===0)return null;let c=uo(r,o);return Ho(a,c)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:n.symbol,number:yo(c,10**n.decimals)},type:no.FEE_BALANCE_INSUFFICIENT}:Ho(a,uo(c,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:yo(uo(c,t),10**n.decimals)},type:no.FEE_BALANCE_INSUFFICIENT}:null},[a,r,o])},Bg=()=>{let o=wg(),t=Ng();to([o,t])},cx=()=>{let o=wg();return(0,sr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:ve.AMOUNT}:null},[o])},mx=()=>{let o=Ng();return(0,sr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:ve.AMOUNT}:null},[o])},vg=()=>{let o=cx(),t=mx();eo([o,t])};function ux(){let o=(0,Dg.useSelector)(is);return Bg(),Lg.default.createElement(X,{totalAmountProps:{title:F("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var Mg=ux;s();i();var _e=u(h()),Sa=u(E()),qg=u(K());s();i();J();qe();var Uo={JITO:"jito",PRIORITY_FEE:"priorityFee"},Ta="speedUpMode";function Og(o){let t=Ge.get(Ta);return t?typeof t=="string"&&(t={[rc]:t}):t={},t[o]||Uo.PRIORITY_FEE}function Rg(o,t){let e=Ge.get(Ta);Ge.set(Ta,{...e||{},[o]:t})}var Ug="jitoGuide";function Wg(){return!!Ge.get(Ug)}function Gg(){Ge.set(Ug,"1")}s();i();var _o=u(h()),yt=u(E());J();s();i();var ir={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var dx=_o.default.memo(({jitoGuide:o})=>{let t=(0,yt.useDispatch)(),e=(0,yt.useSelector)(me),n=r=>{t(zn(r))};return _o.default.createElement(mc,{mask:!0,show:!o,title:F("wallet_extension_transfer_tooltips_title_express_mode"),description:F("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},_o.default.createElement(Ye.Segmented,{className:ir.modeSwitch,color:Ye.COLOR.grey,size:Ye.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:n},_o.default.createElement(Ye.TabPane,{tab:F("wallet_extension_transfer_tab_standard"),id:Uo.PRIORITY_FEE}),_o.default.createElement(Ye.TabPane,{tab:F("wallet_extension_transfer_tab_express"),id:Uo.JITO})))}),fx=()=>{let{baseCoin:o}=S(),t=(0,yt.useSelector)(Mt),e=(0,yt.useSelector)(as),{fee:n="0"}=t||{},{priorityFee:r}=e,a=Rn(n,{decimals:o.decimals,type:Y.CRYPTO}),c=Rn(r||"0",{decimals:o.decimals,type:Y.CRYPTO});return _o.default.createElement(_o.default.Fragment,null,F("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:c}))},lx=()=>{let{baseCoin:o}=S(),t=(0,yt.useSelector)(Mt),e=(0,yt.useSelector)(cs),{fee:n}=t||{},{totalJitoFee:r}=e||{},a=Rn(n||"0",{decimals:o.decimals,type:Y.CRYPTO}),c=Rn(r||"0",{decimals:o.decimals,type:Y.CRYPTO});return _o.default.createElement(_o.default.Fragment,null,F("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:c}),_o.default.createElement("div",{className:ir.tipDetail},F("wallet_extension_transfer_tooltips_desc_express_mode")))},px=_o.default.memo(()=>{let o=(0,yt.useSelector)(me);return _o.default.createElement("div",{className:ir.tip},o===Uo.JITO?_o.default.createElement(lx,null):_o.default.createElement(fx,null))});function gx({jitoGuide:o,...t}){let e=(0,yt.useSelector)(me),n=(0,yt.useSelector)(Mt),r=e===Uo.JITO?F("wallet_extension_transfer_express_mode"):F("wallet_extension_transfer_standard_mode");return _o.default.createElement(It,{bordered:!1,verticalPadding:!1},_o.default.createElement(ts,{...t,titleClassName:ir.title,titleAction:n?.supportJito&&_o.default.createElement(dx,{jitoGuide:o}),level:r},_o.default.createElement(px,null)))}var Hg=gx;s();i();var Re=u(E());bo();ro();So();var Ax=()=>{let o=Bo(),{coin:t}=S(),e=_(),n=(0,Re.useSelector)(Pt),r=(0,Re.useSelector)(co),a=fo(),c=(0,Re.useSelector)(mt),{computeUnitPrice:m,computeUnitLimit:d}=(0,Re.useSelector)(as),g=(0,Re.useSelector)(me),l=(0,Re.useSelector)(cs),f=wo({fromAddr:e,localType:Tr,walletId:n}),{coinId:A}=t,I=async()=>await Jc({coinId:A,address:e},{fromAddr:e,toAddr:r}),T=async()=>{if(t.baseCoinId===0||!r)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let P={coinId:A,address:r},{data:w={}}=await Yc(P),{legal:O,tokenAccountAddress:L}=w;return{haveTokenAccountAddress:O,tokenAccountAddress:L}},C=async()=>{let[P,{haveTokenAccountAddress:w,tokenAccountAddress:O}]=await Promise.all([I(),T()]);return{recentBlockHash:P,haveTokenAccountAddress:w,tokenAccountAddress:O}},x=async P=>{let{recentBlockHash:w,haveTokenAccountAddress:O}=P,L={from:e,to:r,amount:a,blockHash:w,payer:e};g===Uo.PRIORITY_FEE&&(L={...L,computeUnitPrice:m,computeUnitLimit:d});let D;return t.baseCoinId===0?D={...L,type:Fr.TRANSFER}:D={...L,type:Fr.TOKEN_TRANSFER,createAssociatedAddress:!O,mint:t.address},t.protocolType===Un.SPL_TOKEN_2022&&(D.token2022=!0,D.decimal=t.decimals),await f({params:D})},b=async P=>{if(g!==Uo.JITO||!l)return null;let{recentBlockHash:w}=P,{tipAccountAddress:O,clientGasPrice:L}=l,D={from:e,to:O,amount:L,blockHash:w,payer:e,type:Fr.TRANSFER};return await f({params:D})};return lo(C,async(P={})=>{let w=await x(P),O=await b(P);return{rawSignedTx:w,jitoSignedTx:O}},async({rawSignedTx:P,jitoSignedTx:w})=>{let O=await xo(Tr,P),L=P,D;g===Uo.JITO&&w&&(L=JSON.stringify([P,w]),D=JSON.stringify({mev:"Jito",jitoHash:await xo(Tr,w)}));let V={signedTx:L,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:c,txHash:O,extJson:D},W=await o(V);return Rg(t.localType,g),W},P=>(ao({tx_id:P}),P))},Vg=Ax;s();i();var Ia={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function Cx(){let o=(0,Sa.useSelector)(is),t=(0,qg.useDebounce)(o,{wait:200}),e=(0,Sa.useSelector)(Mt),[n,r]=(0,_e.useState)(!0),a=Vg(),c=async()=>{o||await a()};return vg(),(0,_e.useEffect)(()=>{if(e?.supportJito){let m=Wg();r(m),m||Gg()}},[e?.supportJito]),_e.default.createElement("div",{className:Ia.root,onClick:()=>{r(!0)}},_e.default.createElement(Q,{tipMessageProps:{hidden:o},containerProps:{contentClassName:n?"":Ia.contentJitoGuide},slot:{networkFee:m=>_e.default.createElement(Hg,{...m,jitoGuide:n})},confirmButtonProps:{disabled:t,onSubmit:c}}))}var Kg=Cx;s();i();s();i();var Jg=u(h()),oi=u(E());function Tx(){let o=(0,oi.useDispatch)(),{coin:t}=S(),e=(0,oi.useSelector)(Mt);(0,Jg.useEffect)(()=>{!e||(e.supportJito?o(zn(Og(t.localType))):o(zn(Uo.PRIORITY_FEE)))},[e,t.localType])}var Yg=Tx;s();i();var jg=u(h());po();var Qg=u(E());s();i();var Qt=u(h()),ye=u(E()),zg=u(K());Zo();po();function Ix(){let o=(0,ye.useDispatch)(),t=_(),{baseCoin:e}=S(),n=(0,Qt.useRef)(null),r=(0,Qt.useRef)(!1),[a,c]=(0,Qt.useState)("0"),m=async l=>{if(!r.current){try{let f=await zc({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},I=uo(A||"0",l?.fee||"0");c(I),o(gs({...f,totalJitoFee:I})),o(R(!1))}catch{c("0"),o(gs(null)),o(R(!0))}finally{o(Yn(!1))}n.current=setTimeout(()=>{m(l)},7e3)}};return[a,l=>{r.current=!1,m(l)},()=>{clearTimeout(n.current),r.current=!0,n.current=null,c("0"),o(gs(null))}]}function Sx(){let o=(0,ye.useDispatch)(),t=gu(),e=_(),{coin:n,baseCoin:r}=S(),{coinId:a}=n,[c,m]=(0,Qt.useState)("0"),d=()=>{m("0"),o(ps({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(R(!0))};return[c,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:r.chainId});if(gr(A)){d();return}let{computeUnitPrice:I,feelimit:T}=f,{priorityFee:C,priorityGasPrice:x,priorityGasLimit:b}=cm(T,I,A);m(C),o(ps({priorityFee:C,computeUnitPrice:x||"",computeUnitLimit:b||""})),o(R(!1))}catch{d()}finally{o(Yn(!1))}},()=>{m("0"),o(ps({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function xx(){let o=(0,ye.useDispatch)(),t=(0,ye.useSelector)(me),e=(0,ye.useSelector)(Mt),n=(0,ye.useSelector)(xm),r=(0,zg.useLatest)(n),[a,c,m]=Ix(),[d,g,l]=Sx();return(0,Qt.useEffect)(()=>{r.current?o(Yn(!1)):o(Yn(!0))},[t]),(0,Qt.useEffect)(()=>(!e||!t||(t===Uo.PRIORITY_FEE?g(e):c(e)),()=>{m(),l()}),[e,t]),{speedUpFee:t===Uo.PRIORITY_FEE?d:a}}var Zg=xx;s();i();var ti=u(h()),$g=u(E());function hx(){let o=(0,$g.useDispatch)(),[t,e]=(0,ti.useState)(null),{coin:n}=S(),r=_(),a=B(),{coinId:c}=n;return(0,ti.useEffect)(()=>{c&&r&&a&&(async()=>{try{let{data:d}=await Qe({coinId:c,address:r},{fromAddr:r,toAddr:a}),{info:g}=d||{},{fee:l}=g||{};o(R(!l)),o(Ji(g)),e(g)}catch{o(R(!0)),o(Ji(null)),e(null)}})()},[c,r,a]),{baseFee:t?.fee||"0"}}var Xg=hx;function _x(){let o=(0,Qg.useDispatch)(),{baseFee:t}=Xg(),{speedUpFee:e}=Zg();(0,jg.useEffect)(()=>{o(z(uo(t,e)))},[t,e])}var oA=_x;s();i();var ei=u(E());var tA=u(h());po();function yx(){let o=(0,ei.useDispatch)(),{coin:t}=S(),{selfRent:e}=(0,ei.useSelector)(Jn),n=an();(0,tA.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let r=Kt(n||"0",e||"0");o(Oo(tt(r,"0")?r:"0"))}else o(Oo(null))})()},[t,e,n])}var eA=yx;function Fx({children:o}){return Yg(),oA(),eA(),o}var nA=Fx;var bx={match:o=>wc(o),Container:nA,pages:{AddressPage:j,AmountPage:Mg,ConfirmPage:Kg}},rA=bx;s();i();So();s();i();s();i();var xa=u(h()),ar=u(E());Zo();var ni=u(K());s();i();pc();pT();var Ex=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:r="",signInfo:a={}})=>{let{getRawTransaction:c}=await hc(),m={};if(o.baseCoinId===0)m={data:{type:Ze.TRANSFER,data:{to:e,amount:n,memo:r}}};else{let{info:g={}}=a,{contractAddress:l,contractName:f,tokenName:A}=g;m={data:{type:Ze.TOKEN_TRANSFER,data:{from:t,to:e,memo:r,contract:l,contractName:f,functionName:Er.TRANSFER,tokenName:A,amount:n}}}}return await c(5757,m)},sA=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:r="",signInfo:a={}})=>{let c=await Ex({coin:o,fromAddress:t,toAddress:e,value:n,memo:r,signInfo:a});return(await Tu({coinId:o.coinId,fromAddress:t,value:n,inputData:c}))?.gasLimit||"0"};var Px=()=>{let o=(0,ar.useDispatch)(),t=_(),e=B(),n=(0,ar.useSelector)(Nt),r=q(),a=(0,ni.usePrevious)(r),{coin:c,baseCoin:m}=S(),{signInfo:d,memo:g}=(0,ar.useSelector)(Tn),l=async()=>{try{o(R(!1));let A;c.baseCoinId!==0&&He(d)?(A=await Iu({coinId:c.coinId,fromAddress:t,toAddress:e,value:r}),o(As({name:"signInfo",value:A}))):A=d;let I=await sA({coin:c,baseCoin:m,fromAddress:t,toAddress:e,value:r,signInfo:A,memo:g});o(z(I))}catch{o(R(!0))}finally{o(mo(!1))}},{run:f}=(0,ni.useDebounceFn)(l,{wait:500});(0,xa.useEffect)(()=>{n&&(o(mo(!0)),f())},[n]),(0,xa.useEffect)(()=>{n&&r!==a||(o(mo(!0)),f())},[r,e,n,g])},iA=Px;var kx=({children:o})=>(iA(),o),aA=kx;s();i();var cA=u(h());var wx=()=>(to(),cA.default.createElement(X,null)),mA=wx;s();i();var ha=u(h()),si=u(E());J();s();i();var ri=u(E());pc();var Nx=()=>{let{coin:o,baseCoin:t}=S(),e=_(),n=(0,ri.useSelector)(co),r=q(),a=(0,ri.useSelector)(mt),{memo:c}=(0,ri.useSelector)(Tn),m=ct(),d=wo({fromAddr:e,localType:t.localType}),g=wt({coinAmount:r,coinId:o.coinId,fromAddr:e,toAddr:n,networkFee:a}),l=async()=>await m({coinId:o.coinId,address:e,fromAddr:e,toAddr:n,value:r}),f=y=>{let{nonce:k}=y;return{type:Ze.TRANSFER,data:{to:n,amount:r,nonce:k,fee:a,memo:c}}},A=y=>{let{nonce:k,contractAddress:v,contractName:N,tokenName:P}=y;return{type:Ze.TOKEN_TRANSFER,data:{from:e,to:n,amount:r,nonce:k,fee:a,memo:c,contract:v,contractName:N,functionName:Er.TRANSFER,tokenName:P}}};return lo(l,y=>o.baseCoinId===0?f(y):A(y),async y=>{let{data:k}=y,{nonce:v}=k,{txId:N,txSerializedHexString:P}=await d({params:y,needCapture:!0});return{txId:N,txSerializedHexString:P,nonce:v}},async({txId:y,txSerializedHexString:k,nonce:v})=>{let N={nonce:v},P=JSON.stringify(N);return await g(k,{txHash:y,memo:c,extJson:P})},y=>(ao({tx_id:y}),y))},uA=Nx;var dA=34,Bx=()=>{let o=(0,si.useDispatch)(),{memo:t}=(0,si.useSelector)(Tn),e=uA(),n=r=>{let a=r.target.value;new TextEncoder().encode(a).length<=dA&&o(As({name:"memo",value:r.target.value}))};return eo(),ha.default.createElement(Q,{confirmButtonProps:{onSubmit:e},slot:{bottom:ha.default.createElement(xe,{value:t,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:dA}),onChange:n})}})},fA=Bx;var vx={match:o=>o===Za,Container:aA,pages:{AddressPage:j,AmountPage:mA,ConfirmPage:fA}},lA=vx;s();i();So();s();i();s();i();var _a=u(h()),ii=u(E());Zo();Mo();var ai=u(K());var Lx=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:n,feeInt:r,coin:a,isMax:c})=>{let m=(0,ii.useDispatch)(),{signInfo:d}=(0,ii.useSelector)(us),g=(0,ai.usePrevious)(e),l=async()=>{let C=await on({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return m(zu({name:"signInfo",value:C})),C},f=async C=>{let x={type:"transfer",nonce:C?.info?.nonce,maxFee:r||"0",transferData:{contractAddress:C?.info?.contractAddress,from:o,to:t,amount:e}};return(await io().signTransaction(x,o,a.localType))?.signature},A=async C=>{let{data:x}=await Mr({coinId:a.coinId,address:o,inputData:C});if(x?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return x?.gasLimit},I=async()=>{try{let C;He(d)?C=await l():C=d;let x=await f(C),b=await A(x);m(z(b)),m(R(!1))}catch{m(R(!0))}finally{m(mo(!1))}},{run:T}=(0,ai.useDebounceFn)(I,{wait:500});(0,_a.useEffect)(()=>{c&&(m(mo(!0)),T())},[c,n]),(0,_a.useEffect)(()=>{c&&e!==g||(m(mo(!0)),T())},[t,e,c])},pA=Lx;var Dx=({children:o})=>{let t=_(),e=B(),n=q(),r=an(),a=$(),{coin:c}=S(),m=se();return pA({fromAddress:t,toAddress:e,amountInputValueInt:n,sendCoinBalanceInt:r,feeInt:a,coin:c,isMax:m}),o},gA=Dx;s();i();var AA=u(h());var Mx=()=>(to(),AA.default.createElement(X,null)),CA=Mx;s();i();var IA=u(h()),SA=u(E());s();i();Mo();AT();var Ox=({coin:o,baseCoin:t,fromAddress:e,toAddress:n,amountInt:r,feeInt:a,nonce:c,contractAddress:m})=>{let d=Bo();return lo(async()=>{let I={type:"transfer",nonce:c,maxFee:a,transferData:{contractAddress:m,from:e,to:n,amount:r}},{txId:T,signature:C}=await io().signTransaction(I,e,t.localType);return{txId:T,signature:C}},async({txId:I,signature:T})=>{let C={serviceChargeCoinId:t.coinId,nonce:c},x=JSON.stringify(C),b={signedTx:T,coinAmount:r,coinId:o.coinId,fromAdr:e,toAdr:n,serviceCharge:a,txType:Fo.TRANS_OUT,txHash:I,extJson:x};return await d(b)},I=>(ao({tx_id:I}),I))},TA=Ox;var Rx=()=>{let o=_(),t=B(),e=fo(),n=$(),{coin:r,baseCoin:a}=S(),{signInfo:c}=(0,SA.useSelector)(us),m=TA({coin:r,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:n,nonce:c?.info?.nonce,contractAddress:c?.info?.contractAddress});return eo(),IA.default.createElement(Q,{confirmButtonProps:{onSubmit:m}})},xA=Rx;var Ux={match:o=>o===Xa,Container:gA,pages:{AddressPage:j,AmountPage:CA,ConfirmPage:xA}},hA=Ux;s();i();So();s();i();var bA=u(h());s();i();var _A=u(E()),yA=u(K());s();i();ro();So();var Wx=()=>{let o=dm(),t=lm(),e=fm();return async({coinId:r,from:a,to:c,amount:m,inputData:d,localType:g})=>{let l=[Pe.SAFE_ADDRESS,Pe.CONTRACT_ADDRESS];g===Va&&l.push(Pe.TRON_PERMISSTION);let f=await o({checkTypes:l,coinId:r,from:a,to:c,amount:m,txType:Ac.TRANSFER,inputData:d||"0x"}),{result:A,msg:I}=f[Pe.TRON_PERMISSTION]||{},T=f[Pe.SAFE_ADDRESS],C={...T,...f[Pe.CONTRACT_ADDRESS],tronPermission:{msg:I,wrongPermission:!A},address:c};return await e({...T,...T?.blackAddressWarning}),await t(C),C}},Nn=Wx;ro();var Gx=()=>{let o=(0,_A.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,yA.useBoolean)(!1),{coin:r}=S(),a=_(),c=B(),m=q(),{coinId:d,localType:g}=r,l=Lt(),f=Nn();return{onClick:async()=>{try{e();let I=await f({coinId:d,from:a,to:c,amount:m,inputData:"",localType:g}),{isDefraud:T,isSimilar:C,blackAddressWarning:x}=I;T?(o(lt(Yt.DEFRAUD)),o(Zt(x))):C?(o(lt(Yt.SIMILAR)),o(Zt(x))):o(lt("")),l()}catch(I){console.log(I)}finally{n()}},loading:t}},FA=Gx;var Hx=()=>{let{onClick:o,loading:t}=FA();return bA.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},EA=Hx;s();i();var wA=u(h());s();i();var Ue=u(h()),mi=u(E()),ui=u(K());s();i();fT();function Vx({from:o,to:t,coin:e,error:n}){Na.captureEvent({tags:{address:o},message:"API_ERROR_build_sui_tx",contexts:{report:{info:JSON.stringify({from:o,coinId:e?.coinId,to:t})}},exception:{values:[{type:"API_ERROR_build_sui_tx",value:n?.message}]},level:"info"})}function qx(){let{coin:o}=S(),t=_();return async({value:e,to:n,signInfo:r})=>{try{let{gasPrice:a,inputCoins:c=[],tokenInputCoins:m=[],budget:d}=r||{},g=c.map((A={})=>{let{digest:I,version:T,objectId:C}=A;return{digest:I,version:T,objectId:C}}),l=new Cu;if(l.setGasPrice(a),l.setGasPayment(g||[]),l.setSender(t),d&&l.setGasBudget(d),o.baseCoinId===0){let A=l.splitCoins(l.gas,[e]);l.transferObjects([A],l.pure.address(n))}else if(m.length>1){let A=m.slice(1).map(C=>l.object(C.objectId)),I=l.object(m[0].objectId);l.mergeCoins(I,A);let T=l.splitCoins(I,[e]);l.transferObjects([T],l.pure.address(n))}else{let A=l.splitCoins(l.object(m[0].objectId),[e]);l.transferObjects([A],l.pure.address(n))}let f=Au(await l.build({client:ad}));return{tx:l,txBytes:f}}catch(a){throw Vx({from:t,to:n,coin:o,error:a}),a}}}var ci=qx;s();i();function Kx(){let{coin:o}=S(),t=_(),e=o.coinId;return async({to:n,value:r})=>(await on({address:t,coinId:e},{fromAddr:t,toAddr:n,value:r})).info||{}}var PA=Kx;function kA(){let o=(0,mi.useDispatch)(),t=(0,mi.useSelector)(Nt),{coin:e}=S(),n=_(),r=q(),a=B(),{coinId:c}=e,[m,d]=(0,Ue.useState)(!1),g=(0,Ue.useRef)(0),l=PA(),f=ci(),A=(0,ui.usePrevious)(r),{run:I}=(0,ui.useDebounceFn)(async()=>{g.current++;try{o(R(!1));let T={value:r,to:a},C=await l(T),b=(await f({...T,signInfo:C}))?.tx?.blockData?.gasConfig?.budget||"0";o(Yu(C)),o(z(b))}catch{o(R(!0))}finally{g.current--,g.current===0&&d(!1)}},{wait:300});return(0,Ue.useEffect)(()=>{t&&(d(!0),I())},[t]),(0,Ue.useEffect)(()=>{t&&r!==A||(d(!0),I())},[c,n,a,r,t]),m}function Jx(){let o=kA();return to(),wA.default.createElement(X,{confirmButtonProps:{loading:o}})}var NA=Jx;s();i();var vA=u(h()),Fa=u(E());s();i();var ya=u(E());So();var BA=()=>{let{coin:o}=S(),t=_(),e=fo(),n=(0,ya.useSelector)(co),r=(0,ya.useSelector)(Bu),a=$(),c=wo({fromAddr:t,localType:Di}),m=wt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,localType:Di}),d=ci();return lo(async()=>await d({value:e,to:n,signInfo:{...r||{},budget:a}}),async({tx:T,txBytes:C})=>{let b=await c({params:{type:"raw",data:C}});return{tx:T,txBytes:C,signedTx:b}},async({tx:T,txBytes:C,signedTx:x}={})=>{let{signature:b,hash:y}=x||{};return await m({request_type:"WaitForEffectsCert",tx_bytes:C,signatures:[b]},{txHash:y,serviceCharge:T?.blockData?.gasConfig?.budget||"0"})},T=>(ao({tx_id:T}),T))};function Yx(){let o=BA(),t=async()=>{await o()};eo();let e=(0,Fa.useSelector)(ue),n=(0,Fa.useSelector)(Gr);return vA.default.createElement(Q,{tipMessageProps:{hidden:n,blockAddressInfo:e},confirmButtonProps:{onSubmit:t}})}var LA=Yx;var zx={match:o=>o===za,pages:{AddressPage:EA,AmountPage:NA,ConfirmPage:LA}},DA=zx;s();i();So();s();i();var UA=u(h());s();i();var MA=u(E()),OA=u(K());ro();s();i();var pi=u(h()),gi=u(E());s();i();var fi=u(h()),di=u(E());function Zx({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=S(),n=B(),r=an(),a=q(),c=(0,di.useSelector)(ft),m=(0,di.useSelector)(Sn),d=(0,di.useSelector)(Nt),g=!!c,{fromJettonAccount:l,nonce:f}=c||{},A=(0,fi.useCallback)((I,T)=>{if(!g)return null;let C={to:n,seqno:f,decimal:e.decimals,amount:I,memo:m};return e.baseCoinId===0?C={...C,type:Zi.TRANSFER,sendMode:T}:(C={...C,type:Zi.JETTON_TRANSFER,fromJettonAccount:l,messageAttachedTons:o,invokeNotificationFee:t,sendMode:en.PAY_GAS_SEPARATELY+en.IGNORE_ERRORS},c.customPayload&&(C={...C,customPayload:c.customPayload,stateInit:c.stateInit})),C},[n,g,l,m,o,t]);return(0,fi.useMemo)(()=>d?A(r,en.CARRY_ALL_REMAINING_BALANCE):A(a,en.PAY_GAS_SEPARATELY+en.IGNORE_ERRORS),[d,r,a,A])}var li=Zx;function $x({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=(0,gi.useDispatch)(),n=it(),r=_(),a=(0,gi.useSelector)(ft),{ttl:c}=a||{},m=li({messageAttachedTons:o,invokeNotificationFee:t}),[d,g]=(0,pi.useState)(null);return(0,pi.useEffect)(()=>{(async()=>{if(!!m)try{m.expireAt=_s(c);let l=await cd({fromAddress:r,body:m,walletId:n});g(JSON.stringify(l))}catch{g(null),e(R(!0)),e(mo(!1))}})()},[m,c]),d}var Ai=$x;var Xx=()=>{let o=(0,MA.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,OA.useBoolean)(!1),{coin:r}=S(),a=_(),c=B(),m=q(),d=Ai(),{coinId:g,localType:l}=r,f=Lt(),A=Nn();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:l}),{isDefraud:C,isSimilar:x,blackAddressWarning:b}=T;C?(o(lt(Yt.DEFRAUD)),o(Zt(b))):x?(o(lt(Yt.SIMILAR)),o(Zt(b))):o(lt("")),f()}catch(T){console.log(T)}finally{n()}},loading:t}},RA=Xx;var jx=()=>{let{onClick:o,loading:t}=RA();return UA.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},WA=jx;s();i();var qA=u(h());s();i();var GA=u(h()),HA=u(E());po();function ba(){let{coin:o,baseCoin:t}=S(),e=(0,HA.useSelector)(ft),n=$(),r=e?.minTonLimit,a=uo(r||"0",n||"0"),c=mn();return(0,GA.useCallback)(()=>{if(o.baseCoinId!==0&&tt(a,c)){let m=yo(a,10**t.decimals);return{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:m}}}return null},[a,c,o.baseCoinId,t.decimals])}function Qx(){let o=ba();to([o])}var VA=Qx;function oh(){return VA(),qA.default.createElement(X,null)}var KA=oh;s();i();var ur=u(h()),mr=u(E());s();i();var YA=u(h());var cr=u(E());J();var JA=250;function th({error:o,onChange:t}){let e=(0,cr.useDispatch)(),n=(0,cr.useSelector)(ft),r=(0,cr.useSelector)(Sn),c=n?.checkMemo?F("wallet_extension_import_desc_comment_required"):F("wallet_extension_import_desc_comment_optional");return YA.default.createElement(xe,{value:r,placeholder:F("wallet_extension_ton_placeholder_comment_max_character2",{amount:JA}),dashed:!1,title:c,error:o,errorType:Jt.TIP_TYPE.always,maxLength:JA,onChange:m=>{let d=m.target.value;e($u(d)),t()}})}var zA=th;s();i();var Ci=u(E());Mo();bo();function eh(){let o=To(),t=Lr(o),e=ct(),{coin:n,baseCoin:r}=S(),a=_(),c=B(),m=(0,Ci.useSelector)(mt),d=(0,Ci.useSelector)(ft),g=(0,Ci.useSelector)(Du),l=q(),f=li({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:g?.invokeNotificationFee}),A=Bo();return lo(async()=>(await e({coinId:n.coinId,address:a,fromAddr:a,toAddr:c,value:"0"}))?.nonce,async y=>(f.seqno=y,f.expireAt=_s(d?.ttl),(await io().signTransaction(f,a,r.localType))?.boc),async y=>{let k=await xo(r.localType,y),v={signedTx:y,coinId:n.coinId,coinAmount:l,fromAdr:a,toAdr:f.to,serviceCharge:m,txHash:k,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:rt.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(v)},y=>(ao({tx_id:y}),y))}var ZA=eh;s();i();var Ti=u(h());ro();function nh(o){return(0,Ti.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:no.COMMON_ERROR}:null,[o])}function rh(o){return(0,Ti.useCallback)(()=>o?{key:"wallet_extension_multisender_notice_failed_try_again",type:no.COMMON_ERROR}:null,[o])}function sh(){let o=ba();return(0,Ti.useCallback)(()=>{let t=o();return t?{...t,highlight:no.FEE_BALANCE_INSUFFICIENT}:null},[o])}function ih(o,t){let e=nh(o),n=rh(t),r=sh();eo([n,e,r])}var $A=ih;function ah(){let o=(0,mr.useSelector)(ft),t=o?.checkMemo,e=o?.getCustomPayloadInfoRpcError,n=(0,mr.useSelector)(Sn),r=(0,mr.useSelector)(Gr),[a,c]=(0,ur.useState)(!1),m=ZA(),d=async()=>t&&(!n||n.trim()==="")?(c(!0),{pause:!0}):(await m(),null);$A(a,e);let g=(0,mr.useSelector)(ue);return ur.default.createElement(Q,{tipMessageProps:{hidden:r,blockAddressInfo:g},slot:{bottom:ur.default.createElement(zA,{error:a,onChange:()=>{c(!1)}})},confirmButtonProps:{onSubmit:d}})}var XA=ah;s();i();s();i();var jA=u(h()),QA=u(E()),oC=u(K());function ch(){let o=(0,QA.useDispatch)(),t=ct(),e=md(),{coin:n}=S(),r=_(),a=(0,oC.useDebounce)(B(),{wait:500}),{coinId:c,baseCoinId:m}=n;(0,jA.useEffect)(()=>{c&&r&&a&&(async()=>{try{let g=await t({coinId:c,address:r,fromAddr:r,toAddr:a,value:"0"}),l=await e(g,m);o(R(!l)),o(Yi(l))}catch{o(R(!0)),o(Yi(null)),o(mo(!1))}})()},[a])}var tC=ch;s();i();var Ii=u(h());var eC=u(E());var Si=u(K());po();function mh(){let o=(0,eC.useDispatch)(),t=_(),{coin:e,baseCoin:n}=S(),r=(0,Ii.useRef)(null),a=(0,Si.useDebounce)(Ai(),{wait:500});(0,Si.useMount)(()=>{o(mo(!0))}),(0,Ii.useEffect)(()=>{let c=()=>{o(R(!0)),o(zi(null)),o(z("0"))},m=async()=>{try{let{code:g,data:l}=await Mr({address:t,tokenAddress:e.address,chainId:n.chainId,coinId:n.coinId,value:"0",inputData:a});if(g!==0||!l||l?.queryGasLimitErrorUseDefault)c();else{o(R(!1)),o(zi(l));let{invokeNotificationFee:f="0",gasLimit:A="0"}=l;o(z(e.baseCoinId===0?A:uo(A,f)))}}catch{c()}finally{o(mo(!1))}};return(()=>{!a||(r.current=setInterval(m,7e3),m())})(),()=>{clearInterval(r.current)}},[a])}var nC=mh;function uh({children:o}){return tC(),nC(),o}var rC=uh;var dh={match:o=>o===tc,Container:rC,pages:{AddressPage:WA,AmountPage:KA,ConfirmPage:XA}},sC=dh;s();i();qe();s();i();var gC=u(h());s();i();var iC=u(E()),aC=u(K());ro();s();i();var hi=u(h()),xi=u(E());var fh=()=>{let o=(0,xi.useSelector)(pn),t=(0,xi.useSelector)(co),e=q(),n=(0,xi.useSelector)(Ur),r=!t||!!n.key,[a,c]=(0,hi.useState)("");return(0,hi.useEffect)(()=>{(async()=>{if(!r)try{let d=await vr(t);c(o?fn(d,e):"")}catch(d){console.log(d)}})()},[o,r,t,e]),a},_i=fh;var lh=()=>{let o=(0,iC.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,aC.useBoolean)(!1),{coin:r}=S(),a=_(),c=B(),m=q(),d=_i(),{coinId:g,localType:l}=r,f=Lt(),A=Nn();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:l}),{isDefraud:C,isSimilar:x,tronPermission:b,blackAddressWarning:y}=T;b&&b.wrongPermission?o(Uu({wrongPermission:b.wrongPermission,msg:b.msg})):C?(o(lt(Yt.DEFRAUD)),o(Zt(y))):x?(o(lt(Yt.SIMILAR)),o(Zt(y))):o(lt("")),f()}catch(T){console.log(T)}finally{n()}},loading:t}},cC=lh;s();i();var mC=u(h()),uC=u(E());var dC=u(K());qe();var ph=()=>{let[o,{setFalse:t}]=(0,dC.useBoolean)(!0),{coin:e}=S(),n=_(),r=(0,uC.useDispatch)(),{coinId:a}=e;return(0,mC.useEffect)(()=>{(async()=>{if(Number(a)!==xr){let d=await Zc({coinId:a,address:n});r(Ou(d))}t()})()},[a,n]),o},fC=ph;s();i();var lC=u(h());function gh(){let o=_();return(0,lC.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function Ah(){return[gh()]}var pC=Ah;var Ch=()=>{let o=fC(),{onClick:t,loading:e}=cC(),n=pC();return gC.default.createElement(j,{addressProps:{errorFns:n},confirmButtonProps:{onClick:t,loading:e||o}})},AC=Ch;s();i();var TC=u(h());s();i();var Ea=u(h()),dr=u(E());var Bn=u(K());var Th=()=>{let[o,{setTrue:t,setFalse:e}]=(0,Bn.useBoolean)(!1),n=(0,dr.useDispatch)(),r=B(),a=(0,dr.useSelector)(pn),c=(0,dr.useSelector)(Nt),m=q(),d=(0,Bn.usePrevious)(m),g=Gc(),{coin:l}=S(),f=_i(),{coinId:A}=l,I=async()=>{let C=a?"0":m,x={coinId:A,address:g},b={fromAddr:g,value:C,toAddr:r,inputData:f};try{let y=await Xc(x,b);n(z(y)),n(R(!1))}catch{n(R(!0))}finally{e()}},{run:T}=(0,Bn.useDebounceFn)(I,{wait:500});return(0,Ea.useEffect)(()=>{c&&(t(),T())},[c]),(0,Ea.useEffect)(()=>{c&&m!==d||(t(),T())},[m,f,c]),o},CC=Th;var Ih=()=>{let o=CC();return to(),TC.default.createElement(X,{confirmButtonProps:{loading:o}})},IC=Ih;s();i();var yC=u(h()),FC=u(E());s();i();var fr=u(E()),SC=u(gT());ro();qe();var Sh=()=>{let o=Bo(),{coin:t}=S(),e=_(),n=(0,fr.useSelector)(co),r=(0,fr.useSelector)(mt),a=(0,fr.useSelector)(pn),c=q(),m=(0,fr.useSelector)(Pt),d=wo({fromAddr:e,localType:Mi,walletId:m});return lo(async()=>{if(!await un())throw new Error("mpc error")},async()=>{let T=a?"0":c,C=await vr(n),x=a?fn(C,c):"",b={coinId:t.coinId,address:e};return await $c(b,{fromAddr:e,toAddr:n,value:T,inputData:x})},async(T={})=>{let{info:C={}}=T,{timestamp:x,expiration:b,ref_block_bytes:y,ref_block_hash:k,feelimit:v,contractAddress:N,asset:P}=C,w={fromAddress:e,toAddress:n,amount:c,timestamp:x,expiration:b,refBlockBytes:y,refBlockHash:k},O={};return t.baseCoinId===0?O={type:ee.TRANSFER,data:w}:a?O={type:ee.TOKEN_TRANSFER,data:{...w,feeLimit:v,contractAddress:N}}:O={type:ee.ASSET_TRANSFER,data:{...w,assetName:(0,SC.bufferToHex)(p.Buffer.from(P))}},await d({params:O})},async T=>{let C=await xo(Mi,T),x={signedTx:T,coinAmount:c,coinId:t.coinId,fromAdr:e,toAdr:n,serviceCharge:r,txHash:C};return await o(x)},T=>(ao({tx_id:T}),T))},xC=Sh;s();i();var hC=u(h()),_C=u(E());ro();function xh(o,t){return(0,hC.useCallback)(()=>o?{text:t,type:no.COMMON_ERROR}:null,[o,t])}function Pa(){let o=qm(),t=(0,_C.useSelector)(Eu),e=xh(t.wrongPermission,t.msg);eo({fns:[e,...o],override:!0})}function hh(){let o=xC(),t=async()=>{await o()},e=(0,FC.useSelector)(ue);return Pa(),yC.default.createElement(Q,{confirmButtonProps:{onSubmit:t},tipMessageProps:{blockAddressInfo:e}})}var bC=hh;var _h={match:o=>o===xr,pages:{AddressPage:AC,AmountPage:IC,ConfirmPage:bC}},EC=_h;s();i();So();s();i();var wC=u(h());s();i();var PC=u(K());we();ke();var yh=()=>{let{baseCoin:o}=S();return(0,PC.useMemoizedFn)(async t=>{let e={account:t,coinId:o.coinId},n;try{n=await Ic(qo.queryAccountExist,e)}catch(r){console.log(r)}return n?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function Fh(){let o=Dt(),t=yh();return[o,t]}var kC=Fh;var bh=()=>{let o=kC();return wC.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},NC=bh;s();i();var BC=u(h());function Eh(){return to(),BC.default.createElement(X,null)}var vC=Eh;s();i();var lr=u(h());J();s();i();var LC=u(E());Mo();var Ph=o=>{let{coin:t,baseCoin:e}=S(),n=_(),r=(0,LC.useSelector)(co),a=fo(),c=Bo();return lo(async()=>await on({coinId:t.coinId,address:n},{fromAddr:n,toAddr:r}),async A=>{let{info:I}=A,{chainid:T,compression:C,refBlockNumber:x,refBlockId:b,refBlockTimestamp:y,expireSeconds:k,precision:v,symbol:N,contract:P}=I,w={type:0,from:n,to:r,amount:a,memo:o,precision:v,symbol:N,contract:P,common:{chainId:T,compression:C,refBlockNumber:x,refBlockId:b,refBlockTimestamp:y,expireSeconds:k}};return await io().signTransaction(w,n,e.localType)},async A=>{let I={memo:o},T=await xo(t.localType,A),C={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:n,toAdr:r,serviceCharge:"0",extJson:JSON.stringify(I),txHash:T};return await c(C)},A=>(ao({tx_id:A}),A))},DC=Ph;var MC=256;function kh(){let[o,t]=(0,lr.useState)(""),e=DC(o),n=async()=>{await e()},r=a=>{let c=a.target.value;new TextEncoder().encode(c).length<=MC&&t(a.target.value)};return eo(),lr.default.createElement(Q,{slot:{bottom:lr.default.createElement(xe,{value:o,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:MC}),onChange:r})},confirmButtonProps:{onSubmit:n}})}var OC=kh;var wh={match:o=>o===$a,pages:{AddressPage:NC,AmountPage:vC,ConfirmPage:OC}},RC=wh;s();i();s();i();var Ei=u(h());s();i();var HC=u(h()),VC=u(K());var bi=u(E());Zo();s();i();var UC=u(ko());var WC=u(E());var GC=u(K());function Nh(){let{coinId:o}=(0,UC.useParams)(),t=_(),e=(0,WC.useSelector)(co);return(0,GC.useMemoizedFn)(async()=>(await Qe({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var yi=Nh;s();i();po();function Bh(){let o=em();return(t,e,n)=>{let r=e||0,a=tt(n,0)?yo(r,n):"0",c=o[t];return Wa(Go(a,10**(c.decimals||0)),0)}}var Fi=Bh;function vh(){let o=(0,bi.useDispatch)(),[t,e]=(0,HC.useState)(!1),n=(0,bi.useSelector)(Sm),r=yi(),a=Km(),c=Fi();return(0,VC.useMount)(()=>{e(!0),(async()=>{try{let g=(await r())?.info||{},l={};if(n!==-1)l=(g?.coinFeeList||[]).find(({coinId:A})=>A===n);else{let A=Ra(g?.coinFeeList||[],I=>a(I.coinId).currencyAmount||0);A&&(l=A.pop())}let f=c(l?.coinId,g?.methodFeeList?.transfer,l?.rate);o(ne(l?.coinId)),o(z(f)),o(Ru(g))}finally{e(!1)}})()}),t}var qC=vh;function Lh(){let o=qC();return to(),Ei.default.createElement(X,{confirmButtonProps:{loading:o}})}function Dh(){let{coin:o}=S();return Ei.default.createElement(vo,{fixed:!!o.vdecimalNum},Ei.default.createElement(Lh,null))}var KC=Dh;s();i();var We=u(h());var $C=u(K());s();i();var JC=u(E());Mo();bo();ro();So();function Mh(){let o=Bo(),{coin:t}=S(),e=_(),n=(0,JC.useSelector)(co),r=$(),a=ie(),c=fo(),m=yi(),{coin:d}=Or(a,!1);return lo(m,async(f={})=>{let{info:A={}}=f,{chainId:I,accountId:T,nonce:C,tokenId:x,coinFeeList:b=[]}=A,y=b.find(({coinId:N})=>N===a)||{},k={type:ee.TRANSFER,accountId:parseInt(T,10),nonce:C,from:e,chainId:I,to:n,tokenId:parseInt(x,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(y.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:r,amounts:c};return await io().signTransaction(k,e,qa)},async f=>{let{signature:A,tx:I}=f||{},{txHash:T,...C}=I||{},x={txSource:rt.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:C}),fromAdr:e,coinAmount:c,coinId:t.coinId,toAdr:n,serviceCharge:f?.tx?.fee,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(x)})}var YC=Mh;s();i();var Wo=u(h()),zC=u(Et());J();var Pi=u(K()),ki=u(E());s();i();var vn={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var Oh=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:n,setSupplyGas:r,...a})=>{let c=zt(o),m=c?.coinAmountInt,d=M.gte(m,t);return Wo.default.createElement(Wi.Card,{hovered:d,onClick:()=>{d&&n?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},Wo.default.createElement(H.Space,{space:12,className:(0,zC.default)(vn["select-networkFee-card-content"],{[vn["select-networkFee-card-content-disable"]]:!d})},Wo.default.createElement($e,{size:$e.SIZE.lg,src:c?.image,text:c?.text}),Wo.default.createElement(H.Space,{space:2,direction:H.DIRECTION.vertical,...a},Wo.default.createElement(Y.Text,{strong:!0},c?.symbol),Wo.default.createElement(Y.Text,{size:Y.SIZE.xs,type:Y.TYPE.secondary},d?F("developer_mode_send_text_balanceprice",{balance:Ee(m,{decimals:c?.decimals,useApproximate:!1})}):F("wallet_extension_placeorder_tooltips_insufficient",{token:c?.symbol})))),!d&&Wo.default.createElement(Ao,{category:Ao.CATEGORY.fill,type:Ao.TYPE.gray,size:Ao.SIZE.xxs,onClick:g=>{g?.stopPropagation(),r({supplyGasVisible:!0,supplyGasCoinId:o})}},F("extension_send_btn_fill_up_token",{token:c?.symbol})))},Rh=({visible:o,onToggle:t})=>{let e=ie(),n=(0,ki.useDispatch)(),r=_(),a=it(),c=Fi(),[{supplyGasVisible:m,supplyGasCoinId:d},g]=(0,Pi.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),l=(0,ki.useSelector)(Pu),f=l?.coinFeeList||[],A=l?.methodFeeList?.transfer,I=(0,Pi.useCreation)(()=>f.map(({rate:x,coinId:b})=>{let y=c(b,A,x);return{coinId:b,feeCoinAmountInt:y}}),[f,A]),T=({coinId:x,feeCoinAmountInt:b})=>{t?.(),n(ne(x)),n(z(b))},C=({coinId:x,feeCoinAmountInt:b})=>Wo.default.createElement(Oh,{coinId:x,selectedCoinId:e,feeCoinAmountInt:b,onSelect:T,setSupplyGas:g});return o?Wo.default.createElement(H.Portal,{component:H.Container,className:vn["select-networkFee"]},Wo.default.createElement(qc,{onBack:t,onClose:t,title:F("wallet_transfer_subtitle_network_fee")}),Wo.default.createElement(H.Box,{className:vn["select-networkFee-content"]},Wo.default.createElement(Y.Text,{className:vn["select-networkFee-title"]},F("wallet_extension_send_alert_choose_token")),Wo.default.createElement(Wi,{space:16,dataSource:I,renderItem:C})),Wo.default.createElement(um,{walletId:a,address:r,visible:m,closeCallback:()=>{g({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},ZC=Rh;function Uh(){let[o,{toggle:t}]=(0,$C.useBoolean)(!1),e=YC(),n=async()=>{await e()};return eo(),We.default.createElement(We.default.Fragment,null,We.default.createElement(Q,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:n}}),We.default.createElement(ZC,{visible:o,onToggle:t}))}function Wh(){let{coin:o}=S();return We.default.createElement(vo,{fixed:!!o.vdecimalNum},We.default.createElement(Uh,null))}var XC=Wh;var Gh={match:o=>kc(o),pages:{AddressPage:j,AmountPage:KC,ConfirmPage:XC}},jC=Gh;s();i();So();s();i();var Ni=u(h());s();i();var QC=u(h()),oT=u(K());var wi=u(E());function Hh(){let o=(0,wi.useDispatch)(),{coin:t}=S(),e=_(),n=(0,wi.useSelector)(co),r=Su(),[a,c]=(0,QC.useState)(!1);return(0,oT.useMount)(()=>{c(!0),(async()=>{let d={coinId:t.coinId,address:e},g={fromAddr:e,toAddr:n,value:"0"};try{let l=await r("Transfer",d,g);if(l){let{info:f,feeCoin:A,fee:I}=l;o(Ju({info:f,feeCoin:A})),o(ne(A.coinId)),o(z(I)),o(R(!1))}}catch{o(R(!0))}finally{c(!1)}})()}),a}var tT=Hh;s();i();var eT=u(h());J();ro();po();function ka(){let{coin:o}=S();return(0,eT.useCallback)(async t=>{let{ZksyncWallet:e}=await Wn(),n=Go(t,10**o.decimals),r=await e.getCloseAmounts(n);return Ar(r,n)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:M.showFloorTruncation(yo(r,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:no.COMMON_ERROR}},[])}function Vh(){let t=[ka()];to(t)}var nT=Vh;function qh(){let o=tT();return nT(),Ni.default.createElement(X,{confirmButtonProps:{loading:o}})}function Kh(){let{coin:o}=S();return Ni.default.createElement(vo,{fixed:!!o.vdecimalNum},Ni.default.createElement(qh,null))}var rT=Kh;s();i();var Bi=u(h());s();i();var wa=u(E());ro();Mo();So();bo();function Jh(){let o=Bo(),{coin:t}=S(),e=_(),n=(0,wa.useSelector)(co),r=$(),a=ie(),c=q(),m=(0,wa.useSelector)(Nu),d=async()=>{let{info:l,feeCoin:f}=m||{},{accountId:A,nonce:I}=l||{},T={type:ee.TRANSFER,from:e,to:n,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:c,fees:r,decimals:t.decimals,nonce:parseInt(I,10)};return await io().signTransaction(T,e,Ka)},g=async l=>{if(l?.code)throw new Error(Xr);let{signature:f,tx:A}=l||{},{txHash:I,...T}=A||{},C={txSource:rt.NORMAL,signedTx:JSON.stringify({signature:f,tx:T}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:c,coinId:t.coinId,txHash:I,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(C)};return async()=>{let l=await d();return g(l)}}var sT=Jh;s();i();var iT=u(h());function Yh(){let o=ka();return(0,iT.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:ve.AMOUNT}:null},[o])}function zh(){let t=[Yh()];eo(t)}var aT=zh;function Zh(){let o=sT(),t=async()=>o();return aT(),Bi.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}function $h(){let{coin:o}=S();return Bi.default.createElement(vo,{fixed:!!o.vdecimalNum},Bi.default.createElement(Zh,null))}var cT=$h;var Xh={match:o=>o===Ya,pages:{AddressPage:j,AmountPage:rT,ConfirmPage:cT}},mT=Xh;var jh=[Wl,zf,Wd,ll,Tp,Xp,rA,EC,jC,mT,DA,lA,RC,hA,ip,ag,kg,sC],uT=jh;var Qh=({coinId:o,protocolId:t,baseCoinId:e})=>{let n=uT.find(({match:d})=>d(e,o,t))||{},{Container:r=({children:d})=>Ct.default.createElement(Ct.default.Fragment,null,d)}=n,{AddressPage:a,AmountPage:c,ConfirmPage:m}=n.pages||{};return He(n)?null:Ct.default.createElement(r,null,Ct.default.createElement(Fe.Switch,null,Ct.default.createElement(Fe.Route,{exact:!0,path:`${Ko}/:coinId?${Nr}`,component:a}),Ct.default.createElement(Fe.Route,{exact:!0,path:`${Ko}/:coinId?${Xe}`,component:c}),Ct.default.createElement(Fe.Route,{exact:!0,path:`${Ko}/:coinId?${je}`,component:m})),Ct.default.createElement(dd,null))},o_=(0,Ct.memo)(Qh),t_=()=>{let{coinId:o}=(0,Fe.useParams)(),{coin:t,baseCoin:e}=Or(o,!0);return Ct.default.createElement(o_,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},G4=t_;export{G4 as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-VKTXP5FT.js.map
