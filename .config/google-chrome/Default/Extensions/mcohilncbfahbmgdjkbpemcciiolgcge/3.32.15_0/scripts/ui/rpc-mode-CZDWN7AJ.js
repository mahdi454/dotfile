import{a as bs,b as ws,l as As}from"./chunk-O3T2GWQS.js";import{a as vs,b as Ns}from"./chunk-DIVHVDM3.js";import{a as uo,b as Bo,c as Fo,d as Ot,e as Lt,f as Es,g as Is,h as ks}from"./chunk-YEFA6IK7.js";import{a as Qn,b as bt,c as os,d as ts,e as rs,f as ns,i as ss,j as is,k as as,l as ms,o as ls}from"./chunk-63F6WMW7.js";import{a as b,b as N,c as Ye,d as Xn,e as jn,f as Pe,g as Jn,h as wt,i as Rn,k as es}from"./chunk-J5JIFWF4.js";import"./chunk-4AGVCDBO.js";import"./chunk-TC3YAW4K.js";import{d as y,e as ye,f as Ae,g as po,h as Yn,i as Kn,j as Zn,k as qn,m as Nt}from"./chunk-DNWFHBV5.js";import{a as $n}from"./chunk-5JK4LSTH.js";import"./chunk-OSCUV4AL.js";import"./chunk-XSGF34ZC.js";import{a as we}from"./chunk-EJPYWFCE.js";import{a as Xa}from"./chunk-GEOOHDVI.js";import{a as Vn}from"./chunk-R4GTXV6N.js";import"./chunk-UGA3IFLT.js";import{a as On,b as Ln,c as Fn,e as Un,f as Wn,g as zn}from"./chunk-W47JE5NG.js";import{a as Dn}from"./chunk-4MSAK6P3.js";import"./chunk-VX2LEDO2.js";import{a as Bn}from"./chunk-O4SNKDES.js";import"./chunk-EONSVHR4.js";import{a as Gn}from"./chunk-QIBHRUGG.js";import"./chunk-UYTBS3GV.js";import"./chunk-KL6US7RS.js";import"./chunk-PK2CDXEP.js";import"./chunk-RCR6NTPG.js";import"./chunk-ISFMRJLT.js";import"./chunk-TPHTKHCZ.js";import"./chunk-PTWLRD3D.js";import"./chunk-JM4RGU3J.js";import{b as Hn}from"./chunk-XHHRGPLK.js";import{a as Pn}from"./chunk-226IQWB4.js";import"./chunk-GYYXMXJJ.js";import"./chunk-2YRNNTO4.js";import{a as An}from"./chunk-FCM3KMN7.js";import"./chunk-SVCSAZ2J.js";import"./chunk-EZ5WRJOA.js";import"./chunk-WXXVKHTN.js";import"./chunk-O4KI5ERK.js";import{a as En,d as In}from"./chunk-6D2WFU2O.js";import"./chunk-U2UKW4WG.js";import"./chunk-445ZV7VL.js";import"./chunk-YQGNRWCJ.js";import"./chunk-X4Z4JMVV.js";import"./chunk-RMSE4KTO.js";import{a as Tr,b as kn}from"./chunk-A4CVLGFS.js";import"./chunk-ALNQKIUN.js";import{a as bn}from"./chunk-XZFOTB6K.js";import"./chunk-ZGE3YU4L.js";import{a as vn,b as Nn,d as Lo,e as gr,g as hr}from"./chunk-R5U3NPEX.js";import"./chunk-JDZSGQWQ.js";import"./chunk-XY66VBX7.js";import{f as lo}from"./chunk-GZFI5G46.js";import{q as _r}from"./chunk-UAHUXCQX.js";import"./chunk-73OZ5IYN.js";import"./chunk-BWRHBLYR.js";import{a as yn}from"./chunk-XTOYI7P4.js";import"./chunk-KSCP4BJT.js";import"./chunk-3MIEWVTZ.js";import"./chunk-J2H2J7IS.js";import"./chunk-SJIEUX3S.js";import{a as re}from"./chunk-L7LFNDLE.js";import{a as Mn}from"./chunk-J2KUA7PM.js";import"./chunk-KPCSDZ6R.js";import{a as kt,b as Sn}from"./chunk-CPJ5LGGO.js";import"./chunk-WNAIDEAY.js";import"./chunk-QMWYGZOJ.js";import"./chunk-5J7CBDXX.js";import"./chunk-Z4A553U5.js";import"./chunk-QYIKLURE.js";import"./chunk-NEFZK4RT.js";import{a as wn}from"./chunk-FBTKKNCQ.js";import{b as co}from"./chunk-UBFVE3Q4.js";import"./chunk-STMKIE2Z.js";import"./chunk-GUQJR5VF.js";import"./chunk-MI6YHDAD.js";import"./chunk-ZAW6Z544.js";import{a as gn}from"./chunk-SVAMZON6.js";import"./chunk-MF4732CU.js";import"./chunk-F52H34ZH.js";import"./chunk-3RNOIYOK.js";import"./chunk-OQFQ7WFP.js";import"./chunk-MFN67L7C.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import"./chunk-O3R53BBL.js";import"./chunk-H4XP2LWR.js";import"./chunk-PMGQLREC.js";import"./chunk-W6OF57RJ.js";import"./chunk-HRZ4SZVQ.js";import"./chunk-ECPXLKIL.js";import"./chunk-RK4XZYBE.js";import{d as Qa}from"./chunk-XWRJSWFX.js";import{a as $a,c as go,d as ne,e as Mo,f as Ps}from"./chunk-S2HMMJL3.js";import{b as j,c as Ee,d as At,e as fo,f as cs,g as Pt,h as ps,i as xr,j as _o,k as St,l as To,m as Cr,n as ds,o as us,p as fs,q as _s,r as Ts,s as gs,t as yr,u as hs,v as xs,w as Cs,y as ys,z as Dt}from"./chunk-CFXFWVCZ.js";import"./chunk-NIVBOS5R.js";import"./chunk-C4AEIBFI.js";import{b as vt}from"./chunk-5EAA4KU7.js";import"./chunk-XIDZSPWD.js";import"./chunk-VVCHQHKB.js";import"./chunk-N3OY7GLG.js";import{b as an}from"./chunk-ONV3ODOM.js";import"./chunk-ZI4ZHHA3.js";import"./chunk-3545CIHX.js";import"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-3DI6NEAD.js";import"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import"./chunk-5KSRM7B2.js";import"./chunk-PPHSAQ52.js";import"./chunk-JUOUD4EO.js";import{d as ur}from"./chunk-4W35J5OQ.js";import"./chunk-GPJC633M.js";import"./chunk-YC6W5MPL.js";import"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import"./chunk-2VRILCVI.js";import"./chunk-IRMGOW5H.js";import"./chunk-CQ64XZTP.js";import{d as It,h as mn,k as ln,l as cn,o as ue,p as A,q as pn,s as dn,u as un,v as fn,w as _n}from"./chunk-UXLFUD7T.js";import"./chunk-2HEOW3XO.js";import{a as D}from"./chunk-DLRFA5AU.js";import"./chunk-OC3IFNJW.js";import{d as mo}from"./chunk-UI7PAU35.js";import"./chunk-SMZ64QW3.js";import"./chunk-DQTTI4XL.js";import{G as hn,T as xn,fa as Cn}from"./chunk-FF6KJRSH.js";import"./chunk-CQ7YBDUS.js";import{a as Tn}from"./chunk-GSYNHSX4.js";import{b as de}from"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import{a as fr,i as Et}from"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import"./chunk-HXUMX2S7.js";import"./chunk-FYACTIEH.js";import"./chunk-7ZRI3S6Z.js";import"./chunk-QKXA7YNE.js";import{a as z}from"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import{a as be}from"./chunk-M2F2X65U.js";import"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import{$a as sn,Aa as ht,Ba as xt,Ca as Ct,Da as ao,Ea as yt,Q as en,R as on,T as tn,_ as rn,a as Q,i as Rr,ua as nn,va as _t,wa as io,xa as pe,ya as Tt,za as gt}from"./chunk-S5DGV5WL.js";import{b as ft}from"./chunk-AOXUSYRH.js";import{m as no,q as Ce}from"./chunk-WKBC6JL3.js";import{f as ro}from"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import{X}from"./chunk-VPDRXROE.js";import{Da as ut,m as H,na as Xr,ra as jr,sa as Jr,w}from"./chunk-JLIPSIRU.js";import"./chunk-CIDV5VJQ.js";import{a as G}from"./chunk-VX55KNI4.js";import"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import{a as Ya}from"./chunk-656GFN7J.js";import{e as Do,n as so,ta as Oo}from"./chunk-VGT27A4M.js";import{d as Qr,f as Za}from"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import"./chunk-OG46YTNN.js";import{c as So}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import"./chunk-CYOQISC6.js";import"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{B as lt,C as ct,D as Ve,E as Ao,F as oo,Fa as Vr,Jb as Wa,K as $e,L as ie,Mb as $r,Q as pt,Ub as za,Vb as Va,Vc as dr,X as oe,Xb as ae,Yb as Yr,Zb as Po,_ as zr,ea as Ga,gd as qa,j as Gr,v as Ha,w as $,y as Wr,z as ze}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{A as xe,D as W,G as to,H as qr,b as Kr,o as dt,q as S,y as Zr}from"./chunk-LDKM7IQF.js";import{J as Ur,K as mt,f as Br,la as Hr,pa as eo,r as Fr,y as Mr}from"./chunk-6O63U2D6.js";import{M as v,e as Re,l as M,n as Lr,x as l}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{T as F,Z as pr,c as te,ca as L}from"./chunk-OSCGYMLH.js";import{a as Ka}from"./chunk-ADWO6K2C.js";import{a as _}from"./chunk-O337TVCZ.js";import"./chunk-BWEIB2OY.js";import"./chunk-EJP3AYQB.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-WRBXETR5.js";import"./chunk-RBB7LL2V.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-7W6DAKSL.js";import"./chunk-Y2L2VAJY.js";import"./chunk-5AYYZJMV.js";import"./chunk-T47I3VPR.js";import"./chunk-ME7FEN7O.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as a,h as cr,m as n,o as s}from"./chunk-GLD6H5Q5.js";n();s();var nt=a(_()),Fa=a(w()),vo=a(G());n();s();var Z=a(_()),R=a(G());n();s();var k=a(_()),Ho=a(w()),Ys=a(G()),Ks=a(Qa()),Zs=a(X());v();Ga();Ha();n();s();var me=a(_()),Ss=a(G()),Ds=a(te()),Os=a(fr());v();n();s();var Uo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var ja=190,Ls=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,me.useMemo)(()=>e.length>=8&&o>ja,[e.length,o]),{paddingBottom:i,buttonPaddingBottom:m,absoluteBottom:c}=Hn({isButtonAbsolute:r,backupHeight:t});return me.default.createElement("div",{className:Uo.wrapper},me.default.createElement("div",{style:{paddingBottom:i}},me.default.createElement(ur,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>me.default.createElement(ur.Coin,{name:p?.name,symbol:p?.symbol,to:`${ao}?${Os.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),me.default.createElement("div",{className:`${r?Uo.showButton:""} ${Uo.button}`,style:{bottom:c,paddingBottom:m}},me.default.createElement(Ss.Link,{to:ht},me.default.createElement(L,{circle:!0,type:L.TYPE.primary,category:L.CATEGORY.outline},me.default.createElement(F,{className:(0,Ds.default)("okx-wallet-plugin-edit-wallet",Uo.editIcon)}),l("developer_mode_home_maintitle_managecpt")))))};n();s();var Se=a(_()),Fs=a(w()),Ms=a(G()),Us=a(fr());n();s();var Bs=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Hs=()=>{let e=(0,Fs.useSelector)(ut),t=kt(),o=(0,Ms.useHistory)(),r=ue(),{extensionConfig:i}=D("rpc_info"),m=(0,Se.useMemo)(()=>r.filter(({balance:I})=>!!Number(I)),[r]),c=(0,Se.useCallback)(()=>{m.length===1?o.push(`${pe}?${Us.default.stringify({address:m[0]?.address})}`):o.push(gt)},[m]),p=(0,Se.useCallback)(()=>{e?t():o.push(io)},[e]),d=()=>{o.push(Ct)},f=(0,Se.useCallback)(()=>{i.faucetUrl&&globalThis.open(i.faucetUrl)},[i.faucetUrl]),{hasNewFeature:T}=Mn(),g=()=>{hn({button_name:"more",site:""})},h=()=>{o.push(Rr)},x=(0,Se.useCallback)(I=>{switch(I.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":g();break;default:break}},[h,f,d,p,c]),E=(0,Se.useMemo)(()=>Bs.map(I=>I.type==="FAUCET"?{...I,disabled:!i?.faucetUrl}:I.type==="MORE"?{...I,hasNewFeature:T}:I),[T,i]);return{clickHandle:x,iconOptions:E}};n();s();var Bt=a(_()),Er=a(w()),Ws=a(G()),zs=a(X());v();n();s();var om=a(_()),tm=a(w());n();s();var Ra=a(_()),em=a(te());var Gs="SHOW-SWITCH";var Vs=()=>{let e=re(),t=(0,Ws.useHistory)(),o=ue(),{extensionConfig:r}=D("rpc_info"),i=de(),[m,c]=Bt.default.useState(!0),p=(0,Er.useSelector)(ut),d=(0,Er.useSelector)(Xr);(0,zs.useMount)(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Lr.listen(Gs,()=>{c(!0)}))});let f=(0,Bt.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:i,isNotBackupWallet:p,switchVisible:m}};n();s();var $s={wrapper:"_wrapper_11hdl_1"};var qs=()=>{let e=(0,Ys.useHistory)(),t=kt(),o=(0,Ho.useDispatch)(),{rpcInfo:r,chainTokens:i,isNotBackupWallet:m,mainToken:c,ethereumAccount:p}=Vs(),d=Et(),f=(0,k.useRef)(null),[T,g]=(0,k.useState)(0),[h,x]=(0,k.useState)(0),E=(0,k.useRef)(null),{unapprovedRequestCount:I,unapprovedTxCount:se,unapprovedPermissionsRequestId:q}=ls(),V=On();(0,k.useEffect)(()=>{m&&I!==0?t({text:l("wallet_dapp_conncetion_alert_backup_wallet")},q):se>0?e.push(tn):I>0&&e.push(en)},[m,I]);let Ge=(0,Ho.useSelector)(jr);(0,k.useEffect)(()=>{(async()=>{I===0&&!Ge&&await o(an())})()},[I]);let{isRpcMode:ee}=(0,Ho.useSelector)(mo);(0,k.useEffect)(()=>{ee||e.replace(Q)},[ee]);let sr=zr()===Gr;(0,k.useEffect)(()=>{Ge&&sr&&globalThis.platform.openExtensionInPopup(_t)},[]);let No=no(c.balance),{clickHandle:We,iconOptions:ir}=Hs(),{isNeedShowDisconnectUpgrade:st,setDisconnectUpgrade:je}=Dn(),ar=(0,k.useCallback)(()=>{st&&(to.success({title:l("wallet_extension_card_subtitle_disconnect_update")}),je())},[st,je]),[mr,bo]=(0,k.useState)(co.init),U=Gn(),{run:lr}=(0,Zs.useDebounceFn)(()=>{x(E.current?.scrollTop||0)},{wait:50,maxWait:50}),wo=()=>{!r.rpcUrl||(bo(co.loading),vs(r.rpcUrl).then(()=>{console.log("rpc success"),bo(co.success)}).catch(()=>{console.log("rpc failed"),bo(co.failed)}))};(0,k.useEffect)(()=>{wo()},[r]),(0,k.useLayoutEffect)(()=>{f.current&&m&&g(f.current?.clientHeight||0)},[m]);let{walletId:it}=d,{chainId:Je,symbol:at}=r;return(0,k.useEffect)(()=>{c?.balance&&Je&&xn({wallet_id:it,main_coin_number_by_networks:[{chain_id:(0,Ks.hexToDecimalString)(Je),main_token_symbol:at,main_token_amount:c?.balance}]})},[it,c?.balance,Je,at]),k.default.createElement("div",{className:$s.wrapper,ref:E,onScroll:()=>{lr()}},k.default.createElement("div",null,k.default.createElement(Wn,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:H(p),address:p,chainName:r?.name}),k.default.createElement(Fn,{balance:No,symbol:c.symbol}),k.default.createElement(Un,{clickHandle:We,iconOptions:ir}),k.default.createElement(Ls,{dataSource:i,scrollTop:h,backupHeight:m?T+24:0})),k.default.createElement(Ln,{disconnectCallback:ar}),k.default.createElement("div",{ref:f},k.default.createElement(Sn,{offsetBottom:24})),k.default.createElement(zn,{showBackup:()=>{}}),k.default.createElement(Ns,{visible:mr===co.failed,onRetry:wo,onChangeNet:()=>{e.push(`${on}?tab=${U?.networkType??"1"}`)}}),V&&k.default.createElement(Bn,{actionMap:{["RECOVER"]:()=>{e.push(`${sn}?action=${gn.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${rn}?fromHome=1`)}}}))};n();s();var oi=a(_());n();s();var Go=a(_()),Qs=a(w()),Ft=a(X());eo();var Xs=a($a());Po();oe();var Ir=class extends Xs.default{constructor(){super();cr(this,"DROPPED_BUFFER_COUNT",3);cr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,i){let m=[o,...o.txPool],c=0,p;(await Promise.allSettled(m.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:g,transactionReceipt:h}=T;p={id:g,transactionReceipt:h}}}}),p?r(p,o.id):c===m.length&&i(o.id)}async checkOnePendingTx(o){let{id:r,txHash:i}=o;if(!i||o.status===b.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let m=await this.web3.eth.getTransactionReceipt(i);if(m?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:m}}catch(m){throw new Error(m)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&oo(ae(r.txParams.nonce),ae(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:i,txParams:{nonce:m,from:c}}=o,p=`${r}-${i}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if(mt(d)||Ao(ae(m),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function js(){let e=It(),t=os(),o=(0,Qs.useSelector)(vt),r=(0,Ft.useLatest)(de()),i=(0,Ft.useLatest)(Pe()),m=(0,Ft.useLatest)(Xn()),c=(0,Go.useRef)(!1),p=(0,Go.useRef)(new Ir),d=async(g,h,x)=>{let E=await Qn({txId:g,replaceTxId:h,tx:x});t(E)},f=g=>{d(g,null,{status:b.DROPPED,finishTime:+new Date})},T=({id:g,transactionReceipt:h},x)=>{let E={blockNumber:h.blockNumber,gasUsed:h.gasUsed,finishTime:+new Date,extraParams:{contractAddress:h.contractAddress}};h.status?E.status=b.SUCCEED:E.status=b.FAILED,d(x,g,E)};(0,Go.useEffect)(()=>{(async()=>{if(!(i.current.length===0||c.current)){c.current=!0;try{let h=await e();p.current.setWeb3(h),p.current.setConfirmedTxs(m.current);let x=null;try{x=await h.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(i.current.map(E=>x!==null&&Ao(ae(E.txParams.nonce),x)?null:p.current.checkPendingTx(E,T,f)))}finally{c.current=!1}}})()},[o,e])}n();s();eo();var ho=a(_()),Mt=a(w()),Js=a(X()),Rs=a(Ya());var rm=3*60*1e3,nm={mainTokens:[],chainTokens:[]},ei=()=>{let e=(0,Mt.useDispatch)(),t=(0,ho.useRef)(null),o=dn(),r=(0,ho.useRef)(nm),i=fn(),{isRpcMode:m}=(0,Mt.useSelector)(mo);(0,ho.useEffect)(()=>{let{chainId:d,chainTokens:f}=i,T=Mr(Hr(f,"address"),({address:g})=>g||"");r.current={chainId:d,tokenAddresses:T}},[i]);let c=()=>{clearInterval(t.current),t.current=null},p=async()=>{try{let{chainId:d,tokenAddresses:f}=r.current;f.length&&(await o(d,f))?.forEach(({price:g="0",address:h})=>{e(cn({chainId:d,address:h,price:g}))})}catch(d){Rs.default.debug(`fetch coin price failed 
${d}`)}};(0,Js.useMount)(()=>{p()}),(0,ho.useEffect)(()=>(m?t.current=setInterval(()=>{p()},rm):c(),()=>{c()}),[m])};var sm=()=>(Vn(),Es(),ei(),js(),ks(),null),ti=(0,oi.memo)(sm);n();s();var Ut=a(_()),ri=a(G());var im=()=>{let e=(0,ri.useHistory)(),t=re(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:i}=D("rpc_info"),m=A(r),c=de(),p=`ethereum:${c}`;return Ut.default.createElement(yn,{navigator:{bordered:!1,onClose:o?()=>{e.push(Q)}:null,closeable:!0},content:{symbol:m?.symbol,coinLogo:m?.icon,chainName:i?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},ni=(0,Ut.memo)(im);n();s();var _e=a(_());var hi=a(X());var xi=a(w());n();s();var si=a(_());var ii=a(G()),Wo=a(w());var am=()=>{let e=(0,ii.useHistory)(),t=(0,Wo.useDispatch)(),r=re().get("showClose"),i=(0,Wo.useSelector)(St),m=(0,Wo.useSelector)(j),c=A(m),p=()=>{setTimeout(()=>{t(Dt())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(i||Q)}:null;return si.default.createElement(z,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},ai=am;n();s();var Ke=a(_()),zo=a(w());v();function mm(){let e=(0,zo.useDispatch)(),t=(0,zo.useSelector)(Ee),o=(0,zo.useSelector)(At),r=(0,Ke.useRef)(null),i=c=>{let{value:p}=c.target,d=null;p?p&&!lo(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(fs(p)),e(_s(d))};(0,Ke.useLayoutEffect)(()=>{r.current.focus()},[]);let m=l("wallet_extension_transaction_placeholder_input_address");return Ke.default.createElement(we.Row,null,Ke.default.createElement(S.TextArea,{onRef:c=>{r.current=c},value:t,label:l("wallet_extension_transaction_input_label_to"),placeholder:m,size:S.SIZE.xl,autoResize:!0,errorType:S.TIP_TYPE.always,error:o&&l(o.key,o.args),onChange:i}))}var mi=mm;n();s();var fe=a(_()),De=a(w()),Gt=a(X());v();oe();n();s();var Ht={"max-button":"_max-button_zd8rw_1",maxButton:"_max-button_zd8rw_1",balance:"_balance_zd8rw_14","balance-wrap":"_balance-wrap_zd8rw_18",balanceWrap:"_balance-wrap_zd8rw_18"};function lm(){let e=(0,De.useDispatch)(),t=(0,De.useSelector)(j),o=A(),r=A(t),i=o?.balance,m=Bo(),c=!t,{run:p,cancel:d}=(0,Gt.useThrottleFn)(f=>{let T=null,g=ze(i,m);lt(g,0)?T={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:o?.symbol}}:Ve(f,c?g:r?.balance)&&(T={key:"wallet_transfer_errortip_insufficient_balance"}),e(gs(T))},{wait:100});return(0,Gt.useUnmount)(d),p}function cm(){let e=(0,De.useDispatch)(),t=A(),o=(0,De.useSelector)(j),r=(0,De.useSelector)(fo),i=(0,De.useSelector)(Pt),m=A(o),c=m?.balance,p=uo(c,{symbol:m?.symbol,decimals:m?.decimals}),d=lm(),f=Bo(),T=(0,fe.useRef)(!!r),g=x=>{T.current=!0,e(Ts(x))},h=()=>{if(o)g(c);else{let x=ze(c,f);g(ct(x,0)?"0":x)}};return(0,fe.useEffect)(()=>{T.current&&d(r)},[r,f,t?.balance]),fe.default.createElement(we.Row,null,fe.default.createElement(S.Number,{placeholder:M.showFloorTruncation(0,6,{needZero:!0}),title:l("wallet_extension_send_subtitle_amount"),size:S.SIZE.xl,enableMinus:!1,precision:m?.decimals,value:r,error:i&&l(i.key,i.args),errorType:S.TIP_TYPE.always,onChange:g,action:fe.default.createElement(Ce.Text,{size:Ce.SIZE.xs,type:Ce.TYPE.secondary,className:Ht["balance-wrap"],onClick:h},`${l("wallet_extension_send_text_balance")}:`,fe.default.createElement(Ce.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Ht.balance},p)),suffix:fe.default.createElement(Ce.Text,{className:Ht["max-button"],onClick:h},l("wallet_extension_send_text_max"))}))}var li=cm;n();s();var Oe=a(_()),ke=a(w()),ci=a(Va());eo();v();Po();oe();n();s();function pm(){let e=(0,ke.useDispatch)(),t=(0,ke.useSelector)(j),o=A(t),r=(0,ke.useSelector)(Ee),i=(0,ke.useSelector)(fo);(0,Oe.useEffect)(()=>{if(t&&lo(r)&&o?.decimals){let m=!i||Ur(Number(i));e(yr(wn(r,m?"0":(0,ci.addHexPrefix)(Yr($(i,10**o?.decimals))))))}},[t,o?.decimals,r,i])}function dm(){let e=(0,ke.useDispatch)(),o=!(0,ke.useSelector)(j),r=(0,ke.useSelector)(ps);return pm(),o?Oe.default.createElement(we.Row,null,Oe.default.createElement(S,{title:Oe.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},l("developer_mode_send_maintitle_gasprice"),Oe.default.createElement(xe,{title:l("developer_mode_send_tooltip_additional_data"),placement:xe.DIRECTION.topRight},Oe.default.createElement(F,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:l("developer_mode_select_a_token_input_optional"),errorType:S.TIP_TYPE.always,size:S.SIZE.xl,value:r,onChange:i=>{e(yr(i.target.value))}})):null}var pi=dm;n();s();var xo=a(_()),Vo=a(w()),di=a(te());eo();v();oe();n();s();function um(){let e=(0,Vo.useDispatch)(),t=(0,Vo.useSelector)(_o),o=(0,Vo.useSelector)(To),r=p=>{e(hs(p))},i;t&&(Ve(t,o)?i=l("developer_mode_send_tooltip_higher",{num:o}):lt(t,o)&&(i=l("developer_mode_send_tooltip_lower",{num:o})));let m=l("developer_mode_send_maintitle_nonce1"),c=`${mt(o)?"":M.thousandFormat(o)}`;return xo.default.createElement(we.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},xo.default.createElement(S.Number,{innerClassName:(0,di.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,precision:0,title:m,placeholder:c,size:S.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(Wr(o,1)),!1):!0,onSub:()=>!t&&Ve(o,0)?(r(ze(o-1)),!1):!0,onChange:r})),i&&xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},xo.default.createElement(F,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),i))}var ui=um;n();s();var fi=a(_()),_i=a(G());v();var $o=a(w());function fm(){let e=(0,$o.useSelector)(Ee),t=(0,$o.useSelector)(At),o=(0,$o.useSelector)(Pt);return!e||!!t||!!o}function _m({loading:e}){let t=(0,_i.useHistory)(),o=(0,$o.useSelector)(j),r=fm(),i=()=>{let m=Tt;o&&(m+=`?address=${o}`),t.push(m)};return fi.default.createElement(L,{category:L.CATEGORY.fill,type:L.TYPE.highlight,size:L.SIZE.lg,loading:e,block:!0,disabled:r,onClick:i},l("wallet_extension_send_btn_next"))}var Ti=_m;n();s();var gi={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function Tm(){let e=(0,xi.useDispatch)(),t=re(),{chainGasLimitLoading:o}=Ot();return Lt(),(0,hi.useMount)(()=>{e(us(t.get("address")))}),_e.default.createElement(So.Container,null,_e.default.createElement(ai,null),_e.default.createElement(So.Box,{className:gi["rpc-evm-send-edit__inner"]},_e.default.createElement(mi,null),_e.default.createElement(li,null),_e.default.createElement(pi,null),_e.default.createElement(ui,null)),_e.default.createElement(be.FooterActions,{usePortal:!0},_e.default.createElement(Ti,{loading:o})))}var Ci=Tm;n();s();var P=a(_()),O=a(w()),yi=a(G()),Wt=a(X());eo();v();Wa();function gm({requestNonce:e}){let t=(0,O.useDispatch)(),[o,r]=(0,P.useState)(!1),i=(0,O.useSelector)(_o),m=(0,O.useSelector)(To);return{loading:o,onChecker:(0,Wt.useMemoizedFn)(()=>{let c=[];return i===""&&m===null&&c.push(e().then(({suggestedNonce:p})=>{t(Cs(p))})),c.length===0?Promise.resolve():(r(!0),Promise.all(c).finally(()=>{setTimeout(()=>{r(!1)})}))})}}function hm(){let e=(0,O.useSelector)(Cr),t=(0,O.useSelector)(j),o=!t,r=de(),i=(0,O.useSelector)(Ee),m=(0,O.useSelector)(xr),c=(0,O.useSelector)(cs),p=(0,O.useSelector)(_o),d=(0,O.useSelector)(To),{extensionConfig:f}=D("rpc_info"),T={from:r,to:o?i:t,value:o?c:"0x0",data:m},[g,h]=ss(T),x=is({data:T.data,type:g}),[E,I]=as(T.to),se=no(x?.amount||0,{decimals:E?.decimals||6});return{txMeta:ms({tx:T,customGasInfo:e,nonce:p||d,txData:x,tokenInfo:E,chain:f,approvedAmount:se,formattedAmount:se,txType:g}),loadingTxData:h||I}}var xm=()=>{let e=(0,yi.useHistory)(),t=(0,O.useDispatch)(),o=(0,O.useSelector)(St),r=(0,O.useSelector)(j),i=A(r),m=A(),c=(0,O.useSelector)(fo),p=Tn(),d=Et(p),f=(0,O.useSelector)(Ee),T=Bo(),g=(0,O.useSelector)(_o),h=(0,O.useSelector)(To),x=(0,O.useSelector)(xr),{extensionConfig:E}=D("rpc_info"),I=ts(),se=An(p),[q,V]=(0,P.useState)(!1),[Ge,ee]=(0,P.useState)(!1),{request:sr}=Lt(),{chainGasLoading:No,chainGasLoadFailed:We,stopPollingGasPrice:ir,chainGasLimitLoadFailed:st}=Ot(),je=(0,O.useSelector)(Cr),ar=(0,O.useSelector)(ds),{loading:mr,onChecker:bo}=gm({requestNonce:sr}),{txMeta:U,loadingTxData:lr}=hm();(0,Wt.useMount)(()=>{if(!f){let ce=pe;r&&(ce+=`?address=${r}`),e.replace(ce)}});let wo=(0,P.useMemo)(()=>[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(U.type)?!1:U.type===N.TRANS_OUT?U.extraParams?.value:c,[c,U]),it=(0,P.useMemo)(()=>U.type===N.TRANS_OUT?U.extraParams?.coinSymbol:[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(U.type)?l(Ye[U.type],{symbol:U.extraParams?.coinSymbol}):l(Ye[U.type]),[U]),Je=()=>{setTimeout(()=>{t(Dt())},200),e.push(o||Q)},at=ce=>{t(ys(ce)),V(!1)},Or=async()=>{try{ee(!0),await bo(),await I(U,void 0,ce=>{let Ua=mn[d?.keyringIdentityType];Cn({tx_source:"transfer",from_addr:ce?.txParams?.from,to_addr:f,main_token_symbol:E?.symbol,token_symbol:ce?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:ce?.txHash,wallet_type:Ua,chain_id:parseInt(E?.chainId,16)})}),Je()}catch(ce){Br(ce)}finally{ee(!1)}},Ma=(0,P.useMemo)(()=>We?{type:hr.TIP_TYPE.FEE_ERROR}:je?.baseFeePerGas==="0"?{type:Kr.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,[We,je?.baseFeePerGas]);return P.default.createElement(So.Container,null,P.default.createElement(z,{icon:U.type===N.TRANS_OUT&&{text:U.extraParams?.coinSymbol},title:it,onClose:Je}),wo&&P.default.createElement(Lo,null,P.default.createElement(Nn,{summaryList:[{useMinPrecision:!1,coinAmount:wo,injectCoin:i,displayEstimate:!1}],title:l("wallet_extension_send_colored_send")})),P.default.createElement(Lo,null,P.default.createElement(gr,{localType:Vr,title:l("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{se({trade:"send",all_confirmation:"wallet_used_address"})}}),P.default.createElement(gr,{address:f,title:l("extension_send_mid_text_to"),onCopyCallback:()=>{se({trade:"send",all_confirmation:"to_address"})}})),P.default.createElement(Lo,null,P.default.createElement(bn,{onClick:()=>{V(!0)},injectCoin:m,estimateFailed:!!We,networkFee:No?void 0:M.mul(T,10**m?.decimals),loading:No})),P.default.createElement(Lo,{bordered:!1},P.default.createElement(vn,{title:l("developer_mode_send_maintitle_nonce1")},P.default.createElement(Ce.Text,{size:Ce.SIZE.sm},g||h)),!!x&&P.default.createElement(Pn,{copyable:!0,defaultExpanded:!0,data:x})),P.default.createElement(be,{placeholder:!0,offsetBottom:0},P.default.createElement(hr,{...Ma}),P.default.createElement(_r,{buttonGroup:[{disabled:!!We,onClick:Or,actionType:_r.ACTION_TYPE.CONFIRM,loading:(mr||lr||Ge||No)&&!We}]})),q&&P.default.createElement(Is,{onBack:()=>V(!1),rpcInfo:E,chainGasInfo:ar,customGasInfo:je,stopPollingGasPrice:ir,updateCustomGasInfo:at,chainGasLimitLoadFailed:st}))},Ei=xm;n();s();var Fe=a(_());v();var Ki=a(X()),Zi=a(w());n();s();var Ii=a(_()),zt=a(w());v();var ki=a(X());function Cm(){let e=(0,zt.useDispatch)(),t=(0,zt.useSelector)(ne),o=Pe(),r=[{text:l("wallet_extension_history_option_pending",{num:o.length}),value:go.PENDING},{text:l("wallet_extension_history_tab_completed"),value:go.COMPLETE}];return(0,ki.useMount)(()=>{o.length===0&&e(Mo({status:go.COMPLETE}))}),Ii.default.createElement(y.FilterTabs,{tabs:r,value:t.status,onSelect:i=>{e(Mo({status:i}))}})}var vi=Cm;n();s();var Yo=a(_()),$t=a(w()),Ni=a(te());v();Za();n();s();var Vt={"retina-border-basic":"_retina-border-basic_2pibg_1",retinaBorderBasic:"_retina-border-basic_2pibg_1",root:"_root_2pibg_29",resetNonceIcon:"_resetNonceIcon_2pibg_99",disabledResetNonceIcon:"_disabledResetNonceIcon_2pibg_103"};function ym(){let e=(0,$t.useDispatch)(),t=(0,$t.useSelector)(ne),o=Pe(),r=()=>{o.length!==0&&dt.warn({alignBottom:!1,title:l("extension_wallet_advanced_title_clear_confirm"),text:l("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:l("wallet_extension_btn_general_cancel"),confirmText:l("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await Qr().rpcEvmClearPendingTransaction(),qr.success({title:l("extension_wallet_advanced_notification_cleared")})}})};return Yo.default.createElement("div",{className:Vt.root},Yo.default.createElement(y.DateRangeSelection,{dates:t.dates,onChange:(i,m)=>{e(Mo({dates:m}))}}),Yo.default.createElement(xe,{title:l("wallet_extension_settings_tooltips_reset_nonce"),placement:xe.DIRECTION.bottomRight},Yo.default.createElement(F,{className:(0,Ni.default)("okx-wallet-plugin-brush-20",Vt.resetNonceIcon,{[Vt.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var bi=ym;n();s();var Be=a(_()),$i=a(w());n();s();n();s();var Qe=a(_());v();n();s();var Te=a(_());v();n();s();n();s();var Kt=a(_());oe();Oo();n();s();oe();Oo();var Yt=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:i,type:m}=e.txParams,c={gasLimit:i};return m===so.FEE_MARKET?(c.maxFeePerGas=pt($(o,1.2),0),c.maxPriorityFeePerGas=pt($(r,1.2),0)):c.gasPrice=pt($(t,1.2),0),c};function Em({txId:e,onClose:t}){let o=wt(e),r=rs(),[i,m]=(0,Kt.useState)(!1),c=Yt(o),p=async()=>{if(i)return;m(!0);let V=await bt(o.id);if(!V||V.status!==b.PENDING){m(!1),t();return}r(o,c).catch(Ge=>{console.log(Ge)}).finally(()=>{m(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:g}=o?.txParams||{},h="",x="";g===so.FEE_MARKET?(h=f,x=c.maxFeePerGas):(h=d,x=c.gasPrice);let E=Fo(ie($(h,T))),I=`=Gas Price(${$e(h)})`,se=Fo(ie($(x,c.gasLimit))),q=`=Gas Price(${$e(x)})`;return Kt.default.createElement(y.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:i,onClose:t,oldGasFeeDisplay:E,oldGasDetailDisplay:I,newGasFeeDisplay:se,newGasDetailDisplay:q})}var Ko=Em;n();s();var Zt=a(_());oe();Oo();function Im({txId:e,onClose:t}){let o=wt(e),r=ns(),i=A(),[m,c]=(0,Zt.useState)(!1),p=Yt(o),d=async()=>{if(m)return;if(c(!0),(await bt(o.id)).status!==b.PENDING){c(!1),t();return}r(o,p).catch(E=>{console.log(E)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===so.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let g=Fo(ie($(T,p.gasLimit))),h=`Gas Price (${$e(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return Zt.default.createElement(y.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:m,onClose:t,chainSymbol:i?.symbol,newGasFeeDisplay:g,newGasDetailDisplay:h})}var Zo=Im;n();s();var ve=a(_());n();s();var Ze=a(_()),Pi=a(w());v();Oo();n();s();var qo=a(_());v();var wi=({onClick:e,children:t})=>qo.default.createElement(L,{className:"rpc-evm-tx-actions__button",category:L.CATEGORY.outline,type:L.TYPE.primary,size:L.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function km({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:i}=e,m=i?l("wallet_extension_history_list_status_btn_speed_up_cancellation"):l("wallet_extension_history_list_status_btn_cancel_transaction");return r?qo.default.createElement("div",{className:"rpc-evm-tx-actions"},qo.default.createElement(wi,{onClick:t},m),!i&&qo.default.createElement(wi,{onClick:o},l("wallet_extension_history_list_status_btn_speed_up"))):null}var Ai=km;n();s();v();Po();qa();oe();function qt({type:e,extraParams:t}){let o=Ye[e],r,i=l(o);return e===N.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===N.AUTHORIZATION||e===N.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",i=l(o,{symbol:t?.coinSymbol})):e===N.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===N.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:i}}function Qt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=D("rpc_info");if(e===N.TRANS_OUT){let c=o?.value;return c&&(c=M.thousandFormat(c)),[{direction:dr.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:i}=t||{},m=ae(i);return Ve(m,0)?[{direction:dr.OUT,coinAmount:`${M.thousandFormat(ie(m))} ${r.symbol||""}`}]:[]}function Xt(e){let t;return e.type===N.TRANS_OUT?t=`${l("wallet_extension_history_list_send_to")}   ${H(e.extraParams.toAddress)}`:e.type===N.AUTHORIZATION||e.type===N.CANCEL_AUTHORIZATION?t=H(e.extraParams?.approvedAddress):t=H(e.txParams.to),t}function vm({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",i="";return e?(r=Do.PENDING,t?i=l("wallet_extension_send_status_speedingup"):o?i=l("wallet_extension_send_status_canceling"):i=l("wallet_extension_history_list_status_pending")):(r=Do.WAITING,i=l("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:i}}function Nm(e){let t=Xt(e),o=(0,Pi.useSelector)(ro),r=[t],i=Re(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(i),r}function bm({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:i,title:m}=qt(e),{labelType:c,labelText:p}=vm(e),d=Qt(e),f=Nm(e),T=Nt(f,d),g=Ze.default.createElement(y.Label,{className:"tx-history-ml4",type:c,text:p});return Ze.default.createElement(y.ItemContainer,{onClick:h=>{t&&t(e,h)}},Ze.default.createElement(y.Row,{assets:d,align:T},Ze.default.createElement(y.Info,{icons:i,title:m,label:g,details:f}),Ze.default.createElement(y.Assets,{assets:d})),Ze.default.createElement(Ai,{tx:e,onCancel:o,onSpeed:r}))}var Qo=bm;function wm({txs:e,onClick:t}){let[o,r]=(0,ve.useState)(null),[i,m]=(0,ve.useState)(null);return ve.default.createElement(ve.default.Fragment,null,e.map(c=>ve.default.createElement(Qo,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{m(c.id)}})),ve.default.createElement(Ko,{txId:o,onClose:()=>{r(null)}}),ve.default.createElement(Zo,{txId:i,onClose:()=>{m(null)}}))}var Xo=wm;n();s();var qe=a(_());v();var kr=a(w());function Am({txs:e,onClick:t}){let o=(0,kr.useSelector)(ro),{dates:r}=(0,kr.useSelector)(ne),i=(0,qe.useMemo)(()=>{let m=e.map(T=>({...T,groupDate:Re(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return m.forEach(T=>{let{groupDate:g}=T;d!==g&&(d=g,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return qe.default.createElement(y.List,null,i.map(({date:m,list:c},p)=>qe.default.createElement("div",{key:p},qe.default.createElement(y.Date,null,m),c.map(d=>qe.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var jo=Am;n();s();var Co=a(_());v();Oo();function Pm({status:e}){let t="",o="";return(e===b.FAILED||e===b.DROPPED)&&(t=Do.FAILED,o=l("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function Sm(e){return[Xt(e)]}function Dm({tx:e,onClick:t}){let{icons:o,title:r}=qt(e),i=Qt(e),m=Sm(e),c=Nt(m,i),{labelType:p,labelText:d}=Pm(e),f=Co.default.createElement(y.Label,{className:"tx-history-ml4",type:p,text:d});return Co.default.createElement(y.ItemContainer,{onClick:T=>{t&&t(e,T)}},Co.default.createElement(y.Row,{assets:i,align:c},Co.default.createElement(y.Info,{icons:o,title:r,label:f,details:m}),Co.default.createElement(y.Assets,{assets:i})))}var Jo=Dm;function Om({tx:e}){let t=es(),{status:o,isShowPending:r,isCanceling:i}=e,[m,c]=(0,Te.useState)(!1),[p,d]=(0,Te.useState)(!1);return Te.default.createElement(Te.default.Fragment,null,(o===b.SUCCEED||o===b.FAILED)&&Te.default.createElement(Kn,{url:t(e.txHash),text:l("wallet_extension_mid_link_explorer")}),r&&o===b.PENDING&&Te.default.createElement(Zn,{isShowCancel:!i,isShowSpeedUp:!i,isShowSpeedupCancel:i,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&Te.default.createElement(Ko,{txId:e?.id,onClose:()=>{d(!1)}}),m&&Te.default.createElement(Zo,{txId:e?.id,onClose:()=>{c(!1)}}))}var Si=Om;n();s();var Le=a(_());v();za();Po();n();s();var vr=a(_()),Nr=a(te());n();s();var Lm={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},Bm={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function Fm({icon:e,className:t,text:o,size:r="normal",fontSize:i,theme:m,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,g;if(m){let I=Lm[m];f=I?.color,T=I?.background,g=I?.border}let h,x;if(typeof r=="string"){let I=Bm[r];h=I?.size,x=I?.fontSize}else h=r.size;let E={width:`${h}px`,height:`${h}px`};return e?vr.default.createElement("img",{alt:"icon",src:e,style:E,className:(0,Nr.default)("capitalize-letter",t)}):(E={...E,fontSize:`${i||x}px`,color:c||f,background:p||T,border:g},vr.default.createElement("div",{style:E,className:(0,Nr.default)("capitalize-letter",t)},d))}var Y=Fm;oe();n();s();var J=a(_()),jt=a(te()),Di=a(Ka());v();n();s();function Mm({className:e,label:t,children:o}){return J.default.createElement("div",{className:(0,jt.default)("rpc-evm-coin-flow__label",e)},J.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),J.default.createElement("div",null,o))}function Um({isNFT:e,icon:t,title:o,address:r}){let i=typeof t=="string"?J.default.createElement(kn,{className:(0,jt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return J.default.createElement("div",{className:"rpc-evm-coin-flow__record"},J.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},i),J.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},J.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&J.default.createElement(Ae,{className:"rpc-evm-coin-flow__record-address",label:H(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})))}function br({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:i,label:m,...c}=r;return J.default.createElement(Mm,{...c,label:m,key:r},i.map((p,d)=>J.default.createElement(Um,{...p,key:d})))};return J.default.createElement("div",{className:(0,jt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var Oi=br;br.propTypes={data:Di.default.array};br.defaultProps={data:[]};var{TRANS_OUT:Li,CONTRACT_CALL:Bi,AUTHORIZATION:Jt,CANCEL_AUTHORIZATION:Rt,CONTRACT_DEPLOY:Fi}=N,Hm={[Jt]:"wallet_extension_header_approval_title_approve",[Rt]:"wallet_extension_header_approval_title_cancel_approval"},Gm={[Jt]:"wallet_extension_header_approval_title_for",[Rt]:"wallet_extension_header_approval_title_for"},Wm="/static/images/tx-history/default-protocol.svg";function zm(e){let{type:t}=e,o=A("",!0);switch(t){case Li:{let{value:r,coinSymbol:i}=e.extraParams||{},m=`- ${M.thousandFormat(r)} ${i||l("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Le.default.createElement(Y,{icon:!i&&$r,text:i,size:"large",theme:"black"}),title:Le.default.createElement(Tr,{maxWidth:"284px",text:m})}]}}case Bi:{let{value:r}=e.txParams||{},i=ae(r);if(oo(i,0))return null;let m=`- ${uo(ie(i),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Le.default.createElement(Y,{text:o.symbol,size:"large",theme:"black"}),title:Le.default.createElement(Tr,{text:m,maxWidth:"284px"})}]}}case Jt:case Rt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:l(Hm[t]),items:[{icon:Le.default.createElement(Y,{text:r,size:"large",theme:"black"}),title:r}]}:null}case Fi:default:return null}}function Vm(e){let{type:t,extraParams:o}=e;switch(t){case Jt:case Rt:{let{approvedAddress:r}=o||{};return{label:l(Gm[t]),items:[{icon:Wm,title:Le.default.createElement(Ae,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:H(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})}]}}case Li:case Bi:case Fi:default:return null}}function $m({tx:e}){let t=zm(e),o=Vm(e);return Le.default.createElement(Oi,{data:[t,o]})}var Mi=$m;n();s();var C=a(_()),wr=a(w()),Ui=a(te());v();Po();oe();function Ym({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let i,m="";return e===b.SUCCEED?(i=po.TxStatusInfoEnum.SUCCESS,m=l("wallet_extension_history_status_completed")):e===b.FAILED||e===b.DROPPED?(i=po.TxStatusInfoEnum.FAILED,m=l("wallet_extension_history_status_failed")):e===b.PENDING&&(r?(i=po.TxStatusInfoEnum.PENDING,t?m=l("wallet_extension_send_status_canceling"):o?m=l("wallet_extension_send_status_speedingup"):m=l("wallet_extension_history_list_status_pending")):(i=po.TxStatusInfoEnum.WAITING,m=l("wallet_extension_history_list_status_waiting"))),C.default.createElement(po,{label:l("wallet_extension_mid_text_status"),status:i,statusText:m})}function Km({status:e,sendTime:t,finishTime:o}){let r=(0,wr.useSelector)(ro);return C.default.createElement(ye,{label:l("wallet_extension_mid_text_time"),value:Re(e===b.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function Zm({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==N.AUTHORIZATION?null:C.default.createElement(ye,{label:l("wallet_extension_mid_text_approved_amount"),value:o>=10**13?l("wallet_extension_mid_text_unlimited"):M.thousandFormat(o||"0")})}function qm({status:e,blockNumber:t}){let o=(0,wr.useSelector)(vt),r=ze(o,t);return e===b.PENDING||e===b.DROPPED||ct(r,0)||Ao(r,14)?null:C.default.createElement(ye,{label:l("wallet_extension_mid_text_block_confirmation"),value:r})}function Qm(){let{extensionConfig:e}=D("rpc_info");return C.default.createElement(ye,{label:l("wallet_extension_mid_text_network"),value:C.default.createElement(C.default.Fragment,null,C.default.createElement(Y,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Xm({txParams:e}){let{from:t}=e;return C.default.createElement(ye,{label:l("wallet_extension_mid_text_from"),value:C.default.createElement(Ae,{label:H(t),value:t,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function jm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:i,tokenAddress:m,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===N.TRANS_OUT)d=l("wallet_extension_mid_text_to"),f=i;else if(t===N.CONTRACT_DEPLOY)if(e===b.SUCCEED)d=l("developer_mode_history_subtitle_developer"),f=c;else return null;else d=l("wallet_extension_mid_text_interaction_address"),t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?f=m:f=p;return C.default.createElement(ye,{label:d,value:C.default.createElement(Ae,{label:H(f),value:f,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function Jm({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=D("rpc_info"),{gasLimit:i,maxFeePerGas:m,gasPrice:c}=o,p=En($,ie),d=c||m,f=uo(p(d,t||i),{symbol:r?.symbol,decimals:r?.decimals});return C.default.createElement(Yn,{label:l("wallet_extension_mid_text_network_fee"),value:f,tip:e===b.PENDING&&l("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:M.thousandFormat($e(d)),gasLimit:M.thousandFormat(i)})})}function Rm({txParams:e}){let{data:t}=e,[o,r]=(0,C.useState)(!1);return t?C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(i=>!i)}},l("developer_mode_history_title_transaction_data"),C.default.createElement(F,{className:(0,Ui.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function el({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},C.default.createElement(Ym,{...e}),C.default.createElement(Km,{...e}),C.default.createElement(Zm,{...e}),C.default.createElement(qm,{...e}),C.default.createElement(Qm,{...e}),C.default.createElement(Xm,{...e}),C.default.createElement(jm,{...e}),C.default.createElement(Jm,{...e}),C.default.createElement(ye,{label:l("developer_mode_history_title_nonce"),value:ae(o)}),C.default.createElement(ye,{label:l("wallet_extension_mid_text_transaction_hash"),value:C.default.createElement(Ae,{label:H(t),value:t,message:l("wallet_extension_popup_title_transaction_hash_copied")})}),C.default.createElement(Rm,{...e}))}var Hi=el;var ol=e=>{if(!e)return null;let{type:t,extraParams:o}=e,r=Ye[t];return t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?l(r,{symbol:o?.coinSymbol||""}):l(r)};function tl({txId:e,onBack:t}){let r=Jn().find(({id:m})=>m===e),i=ol(r);return Qe.default.createElement(dt.Action,{isFull:!0,titleCenter:!0,title:i,visible:!!e,onClose:t},Qe.default.createElement(qn,{message:r?.errorMessage}),!!r&&Qe.default.createElement("div",{className:"rpc-mode-tx-detail__content"},Qe.default.createElement(Mi,{tx:r}),Qe.default.createElement(Hi,{tx:r}),Qe.default.createElement(Si,{tx:r})))}var Ro=tl;n();s();var Ar=a(_());function rl({symbol:e}){return Ar.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},Ar.default.createElement(Y,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var Pr=rl;n();s();n();s();var er=a(_()),Gi=a(w());function nl({onClick:e}){let{dates:t}=(0,Gi.useSelector)(ne),o=Pe({dates:t});return o.length===0?er.default.createElement(y.Empty,{top:72}):er.default.createElement(y.ListContainer,{style:{paddingTop:"8px"}},er.default.createElement(Xo,{txs:o,onClick:e}))}var Wi=nl;n();s();var yo=a(_());var zi=a(w());function sl({onClick:e}){let{dates:t}=(0,zi.useSelector)(ne),o=jn({dates:t}),r=(0,yo.useMemo)(()=>o.map(i=>({...i,sortTime:i.finishTime,Comp:Jo})),[o]);return r.length===0?yo.default.createElement(y.Empty,{top:72}):yo.default.createElement(y.ListContainer,null,yo.default.createElement(jo,{txs:r,onClick:e}))}var Vi=sl;function il(){let e=(0,$i.useSelector)(ne),[t,o]=(0,Be.useState)(null),r=i=>{o(i.id)};return Be.default.createElement(Be.default.Fragment,null,e.status===go.PENDING?Be.default.createElement(Wi,{onClick:r}):Be.default.createElement(Vi,{onClick:r}),t&&Be.default.createElement(Ro,{txId:t,onBack:()=>{o(null)}}))}var Yi=il;n();s();function al(){let e=(0,Zi.useDispatch)();return(0,Ki.useUnmount)(()=>{e(Ps())}),Fe.default.createElement(y.PageContainer,{className:"rpc-evm-tx-history"},Fe.default.createElement(be,{className:"rpc-evm-tx-history__top",offsetTop:0},Fe.default.createElement(z,{sticky:!1,title:l("wallet_extension_header_text_history")}),Fe.default.createElement(vi,null),Fe.default.createElement(bi,null)),Fe.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Fe.default.createElement(Yi,null)))}var qi=al;n();s();var Io=a(_());n();s();var Eo=a(_()),Qi=a(G());v();n();s();function Me(){return re().get("address")}var ml=()=>{let e=(0,Qi.useHistory)(),t=Me(),o=A(t),r=()=>{e.push(Q)};return Eo.default.createElement(z,{title:Eo.default.createElement(Pr,{symbol:o?.symbol}),onBack:r},t&&Eo.default.createElement(xe,{title:l("developer_mode_infor_tooltip_token_details"),placement:xe.DIRECTION.bottom},Eo.default.createElement(F,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${yt}?address=${t}`)}})))},Xi=Eo.default.memo(ml);n();s();var ge=a(_());n();s();var ji=a(_());function ll({txs:e,onClick:t}){return e.length===0?null:ji.default.createElement(Xo,{txs:e,onClick:t})}var Ji=ll;n();s();var or=a(_());function cl({txs:e,onClick:t}){let o=(0,or.useMemo)(()=>e.map(r=>{let i,m;return r.status===b.PENDING?(i=r.sendTime,m=Qo):(i=r.finishTime,m=Jo),{...r,sortTime:i,Comp:m}}),[e]);return o.length===0?null:or.default.createElement(jo,{txs:o,onClick:t})}var Ri=cl;function pl(){let e=Me(),t=Rn({tokenAddress:e}),[o,r]=(0,ge.useState)(null),[i,m]=(0,ge.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?ge.default.createElement(y.Empty,null):ge.default.createElement("div",null,ge.default.createElement(Ji,{txs:i,onClick:c}),ge.default.createElement(Ri,{txs:m,onClick:c}),ge.default.createElement(Ro,{txId:o,onBack:()=>{r(null)}}))}var ea=pl;n();s();var ot=a(_()),na=a(w());oe();n();s();var et=a(_()),oa=a(w()),ta=a(G());v();oe();function dl(){let e=(0,ta.useHistory)(),t=(0,oa.useDispatch)(),{extensionConfig:o}=D("rpc_info"),r=Me(),i=A(r),m=`${ao}?address=${r||""}`,c=!r&&o?.faucetUrl;return et.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},et.default.createElement(ft.IconButtonWithLabel,{disabled:oo(i?.balance,0),icon:"okx-wallet-plugin-up",text:l("wallet_home_btn_send"),onClick:()=>{t(xs(m));let p=`${pe}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),et.default.createElement(ft.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:l("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${io}?showClose=1${p}`)}}),c&&et.default.createElement(ft.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:l("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var ra=dl;function ul(){let e=Me(),t=A(e),o=t?.balance||0,{symbol:r,usdToThisRate:i}=(0,na.useSelector)(Jr),m=$(t?.price,i);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:no(o),currencyAmountDisplay:In({amount:o,rate:m,symbol:r},{useSign:!0,useFixed:!0})}}function fl(){let e=de(),{coinSymbol:t,coinAmountDisplay:o}=ul();return ot.default.createElement(As,null,ot.default.createElement(ws,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),ot.default.createElement(bs,{address:e}),ot.default.createElement(ra,null))}var sa=fl;n();s();function _l(){return Io.default.createElement("div",{className:"rpc-evm-coin-detail"},Io.default.createElement(Xi,null),Io.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Io.default.createElement(sa,null),Io.default.createElement(ea,null)))}var ia=_l;n();s();var le=a(_()),fa=a(fr());v();var _a=a(G());n();s();var la=a(_()),ca=a(te());n();s();var ko=a(_()),aa=a(te());var ma=({token:e,className:t,children:o,onClick:r})=>ko.default.createElement("div",{onClick:r,className:(0,aa.default)("rc-mode__token",t)},ko.default.createElement(Y,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),ko.default.createElement("div",{className:"rc-mode__token__info"},ko.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),ko.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var pa=({className:e,dataSource:t=[],renderItem:o,emptyText:r,component:i="div",...m})=>{let c=!t.length;return la.default.createElement(i,{className:(0,ca.default)("rc-mode__tokens",e),...m},t.map(p=>o(p)),c&&r)};pa.Item=ma;var Ue=pa;n();s();var tt=a(_()),da=a(X());var ua=()=>{let e=ue(),[t,o]=tt.default.useState(),r=(0,da.useMemoizedFn)(({target:{value:c}})=>{o(c)},[]),i=(0,tt.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,tt.useMemo)(()=>t?i.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):i,[t,i]),{onChange:r,value:t,showSearch:!!i.length}]};n();s();var Ta=()=>{let[e,{showSearch:t,...o}]=ua();return le.default.createElement("div",{className:"rc-mode-select__token"},le.default.createElement(z,{title:l("developer_mode_send_title_selecta_token")}),t&&le.default.createElement(S.Search,{placeholder:l("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),le.default.createElement(Ue,{dataSource:e,renderItem:r=>le.default.createElement(_a.Link,{to:`${pe}?${fa.default.stringify({showClose:1,address:r?.address})}`},le.default.createElement(Ue.Item,{token:r},le.default.createElement("div",{className:"rc-mode-select__token__balance"},le.default.createElement("div",{className:"rc-mode-select__token__amount"},M.thousandFormat(r.balance||0))))),emptyText:le.default.createElement(Zr.State,{className:"rc-mode-select__token__empty",title:t?l("developer_mode_send_toast_addnewtoken",{crypto:le.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):l("developer_mode_send_toast_nonetoken")})}))};n();s();var Xe=a(_()),Ea=a(G()),Ia=a(X());v();n();s();n();s();var tr=a(_()),Tl=({children:e})=>tr.default.createElement("div",{className:"token-detail-container"},e),ga=(0,tr.memo)(Tl);n();s();var He=a(_()),gl=({image:e,symbol:t,name:o})=>He.default.createElement("div",{className:"token-detail-intro"},He.default.createElement("div",{className:"token-detail-intro__image"},e),He.default.createElement("div",{className:"token-detail-intro__desc"},He.default.createElement("div",{className:"token-detail-intro__symbol"},t),He.default.createElement("div",{className:"token-detail-intro__name"},o))),ha=(0,He.memo)(gl);n();s();var he=a(_()),xa=a(te());var hl=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:i,copyNotificationDesc:m})=>{let c=(0,xa.default)("token-detail-row",e),[p,d]=$n();return he.default.createElement("div",{className:c},he.default.createElement("div",{className:"token-detail-row__title"},t),he.default.createElement("div",{className:"token-detail-row__content"},he.default.createElement("div",{className:"token-detail-row__text"},o),r&&he.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),to.success({title:i,desc:he.default.createElement("div",{className:"token-detail-row__copy-desc"},m)}))}},he.default.createElement(F,{className:"okx-wallet-plugin-copy"}))))},rr=(0,he.memo)(hl);n();s();var rt=a(_()),Ca=a(te());var xl=({details:e})=>rt.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",i=(0,Ca.default)(t?.className,r);return rt.default.createElement(rr,{...t,className:i})})),ya=(0,rt.memo)(xl);var nr={Container:ga,Intro:ha,Row:rr,Details:ya};n();s();function Cl(){let e=(0,Ea.useHistory)(),o=re().get("address"),r=A(o,!0),{extensionConfig:i}=D("rpc_info"),m=[{title:l("developer_mode_infor_subtitle_contractadd"),text:H(o),copyText:o,copyNotificationTitle:l("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:l("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:l("developer_mode_infor_subtitle_network"),text:i.name}];return(0,Ia.useMount)(()=>{o||e.replace(Q)}),Xe.default.createElement("div",{className:"rpc-evm-token-detail"},Xe.default.createElement(z,{title:l("developer_mode_infor_maintitle_tokendetails")}),Xe.default.createElement(nr.Container,null,Xe.default.createElement(nr.Intro,{image:Xe.default.createElement(Y,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Xe.default.createElement(nr.Details,{details:m})))}var ka=Cl;n();s();var K=a(_()),Aa=a(G()),Pa=a(te()),Sr=a(Xa());v();n();s();var va=a(_()),Na=a(w()),ba=a(X());var wa=()=>{let e=(0,Na.useDispatch)(),{extensionConfig:t}=D("rpc_info"),{chainId:o}=t,r=ue(!0,!0),i=(0,va.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),m=(0,ba.useMemoizedFn)(({address:c,isDeleted:p})=>{e(ln({chainId:o,address:c,isDeleted:!p}))},[o]);return[i,m]};n();s();var Sa=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=wa();return K.default.createElement("div",{className:"rpc-mode-manage-crypto"},K.default.createElement(z,{closeable:!1,title:l("developer_mode_home_maintitle_managecpt")}),K.default.createElement(Aa.Link,{to:xt},K.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},K.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},l("developer_mode_manage_text_customcpt")),K.default.createElement(F,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_addedcpt")),K.default.createElement(Ue,{component:Sr.default,className:"rc-mode-home__tokens",dataSource:e,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:r=>{let i=!r.address;return K.default.createElement(Ue.Item,{token:r},K.default.createElement(F,{className:(0,Pa.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":i}),onClick:()=>o(r)}))}}),!!t.length&&K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_adding")),K.default.createElement(Ue,{component:Sr.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:r=>K.default.createElement(Ue.Item,{token:r,key:r?.address},K.default.createElement(F,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};n();s();var B=a(_());v();n();s();var Ne=a(_()),Da=a(G()),Dr=a(X());eo();v();var yl="0x",El=()=>{let e=It();return async t=>{try{return!lo(t)||await(await e()).eth.getCode(t)===yl}catch(o){return console.log(o),!0}}},Oa=()=>{let e=W.useForm(),t=(0,Da.useHistory)(),[o,r]=Ne.default.useState(null),[i,m]=Ne.default.useState(!1),[c,p]=Ne.default.useState(!1),d=_n(),f=pn(),T=un(),g=El(),h=ue(!0,!0),{extensionConfig:x}=D("rpc_info");Ne.default.useEffect(()=>{e?.setFieldsValue({network:x.name})},[x]);let E=(0,Dr.useMemoizedFn)(()=>{let{chainId:q}=x,V=e.getFieldsValue();d(q,V.address,V),T({chainId:q,address:V.address}),to.success({title:l("developer_mode_manage_toast_added")}),t.go(-1)},[x]),I=(0,Dr.useMemoizedFn)(Fr(async()=>{r(null),p(null);let q=e.getFieldValue("address");if(e.cleanErrors(),!q)return!1;let V=h.find(ee=>ee.address===q);if(V&&!V.isDeleted)return e.setErrors({address:l("developer_mode_manage_errortip_duplicate_add")});if(m(!0),p(!1),await g(q))return m(!1),e.setErrors({address:l("developer_mode_manage_errortip_request_failed")});try{let ee=await f(q);r(ee),e.setFieldsValue(ee)}catch(ee){p(!0),e.setErrors({address:""}),console.log("error",ee)}finally{m(!1)}},250),[h]),se=(0,Ne.useMemo)(()=>c?Ne.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},l("developer_mode_manage_errortip_request_failed"),Ne.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:I},l("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:x,fetching:i,addressError:se,onConfirm:E,onAddressTrigger:I}};n();s();var Il=11,La=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:i,addressError:m,onAddressTrigger:c}=Oa();return B.default.createElement("div",{className:"rpc-mode-custom-crypto"},B.default.createElement(z,{title:l("developer_mode_manage_maintitle_customcpt")}),B.default.createElement(W,{form:e,size:W.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},B.default.createElement(W.Item,{name:"network",label:l("developer_mode_manage_title_network")},B.default.createElement(S,{size:W.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:B.default.createElement(Y,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),B.default.createElement(W.Item,{name:"address",label:l("developer_mode_manage_title_contractadd"),extra:m},B.default.createElement(S.TextArea,{autoResize:!0,size:W.SIZE.xl,onChange:c,errorType:S.TIP_TYPE.always,suffix:r&&B.default.createElement(pr.Circle,{size:pr.SIZE.sm})})),B.default.createElement(W.Item,{name:"symbol",hidden:!t,label:l("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>Il?Promise.reject(l("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},B.default.createElement(S,{size:W.SIZE.xl})),B.default.createElement(W.Item,{hidden:!t,name:"decimals",label:l("developer_mode_manage_title_decimals")},B.default.createElement(S,{size:W.SIZE.xl,disabled:!0})),B.default.createElement(W.Item,{hidden:!0,name:"name"},B.default.createElement(S,{size:W.SIZE.xl})),B.default.createElement(W.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>B.default.createElement(be.FooterActions,{usePortal:!0,offsetBottom:0},B.default.createElement(L,{size:L.SIZE.lg,type:L.TYPE.highlight,category:L.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:i},l("developer_mode_manage_btn_confirm"))))))};var Ba=()=>Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(R.Switch,null,Z.default.createElement(R.Route,{path:_t,component:qs,exact:!0}),Z.default.createElement(R.Route,{path:io,component:ni,exact:!0}),Z.default.createElement(R.Route,{path:pe,component:Ci,exact:!0}),Z.default.createElement(R.Route,{path:Tt,component:Ei,exact:!0}),Z.default.createElement(R.Route,{path:gt,component:Ta,exact:!0}),Z.default.createElement(R.Route,{path:ht,component:Sa,exact:!0}),Z.default.createElement(R.Route,{path:xt,component:La,exact:!0}),Z.default.createElement(R.Route,{path:Ct,component:qi,exact:!0}),Z.default.createElement(R.Route,{path:ao,component:ia,exact:!0}),Z.default.createElement(R.Route,{path:yt,component:ka,exact:!0})),Z.default.createElement(ti,null));var PE=()=>{let e=(0,vo.useHistory)(),{isRpcMode:t}=(0,Fa.useSelector)(mo);return(0,nt.useEffect)(()=>{t||e.replace(Q)},[t]),nt.default.createElement(vo.Switch,null,nt.default.createElement(vo.Route,{path:nn,component:Ba}))};export{PE as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-CZDWN7AJ.js.map
