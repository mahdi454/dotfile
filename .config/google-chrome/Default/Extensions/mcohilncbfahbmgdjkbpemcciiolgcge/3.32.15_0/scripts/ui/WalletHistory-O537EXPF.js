import{a as Ct,b as Tt,d as St,e as Dt}from"./chunk-QDNNAHIB.js";import{d as E}from"./chunk-DNWFHBV5.js";import{a as Lt}from"./chunk-4IWHAPUK.js";import"./chunk-5JK4LSTH.js";import"./chunk-OSCUV4AL.js";import"./chunk-TE6MX46F.js";import"./chunk-OQY6TZK5.js";import"./chunk-UGA3IFLT.js";import"./chunk-SVCSAZ2J.js";import"./chunk-GL5KZF23.js";import"./chunk-WXXVKHTN.js";import"./chunk-O4KI5ERK.js";import"./chunk-6D2WFU2O.js";import"./chunk-U2UKW4WG.js";import"./chunk-445ZV7VL.js";import"./chunk-YQGNRWCJ.js";import"./chunk-X4Z4JMVV.js";import"./chunk-RMSE4KTO.js";import"./chunk-Y4Q624TF.js";import"./chunk-W7APXTAD.js";import"./chunk-A4CVLGFS.js";import"./chunk-ALNQKIUN.js";import"./chunk-JDZSGQWQ.js";import"./chunk-XY66VBX7.js";import"./chunk-GZFI5G46.js";import"./chunk-UAHUXCQX.js";import"./chunk-73OZ5IYN.js";import"./chunk-BWRHBLYR.js";import"./chunk-XTOYI7P4.js";import"./chunk-KSCP4BJT.js";import"./chunk-3MIEWVTZ.js";import"./chunk-J2H2J7IS.js";import"./chunk-SJIEUX3S.js";import"./chunk-L7LFNDLE.js";import"./chunk-SSCLN42L.js";import"./chunk-FBTKKNCQ.js";import"./chunk-STMKIE2Z.js";import"./chunk-GUQJR5VF.js";import"./chunk-MI6YHDAD.js";import"./chunk-ZAW6Z544.js";import"./chunk-SVAMZON6.js";import"./chunk-MF4732CU.js";import"./chunk-F52H34ZH.js";import"./chunk-3RNOIYOK.js";import"./chunk-OQFQ7WFP.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import"./chunk-O3R53BBL.js";import"./chunk-H4XP2LWR.js";import"./chunk-PMGQLREC.js";import"./chunk-W6OF57RJ.js";import"./chunk-HRZ4SZVQ.js";import"./chunk-ECPXLKIL.js";import"./chunk-RK4XZYBE.js";import{a as mt}from"./chunk-XX6E3LAM.js";import{a as k,c as pt,d as P,f as ht,g as F,h as v,i as dt,m as xt,n as Z,o as $,p as gt,q as _t,r as yt,s as J,t as V}from"./chunk-NVJFLL3D.js";import{b as M}from"./chunk-XIDZSPWD.js";import"./chunk-VVL4IZMM.js";import"./chunk-ONV3ODOM.js";import"./chunk-ZI4ZHHA3.js";import"./chunk-3545CIHX.js";import"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import"./chunk-5KSRM7B2.js";import"./chunk-PPHSAQ52.js";import"./chunk-JUOUD4EO.js";import"./chunk-4W35J5OQ.js";import"./chunk-GPJC633M.js";import{C as ut}from"./chunk-YC6W5MPL.js";import"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import"./chunk-IQQANR3G.js";import"./chunk-2VRILCVI.js";import"./chunk-IRMGOW5H.js";import"./chunk-CQ64XZTP.js";import"./chunk-UXLFUD7T.js";import"./chunk-2HEOW3XO.js";import"./chunk-DLRFA5AU.js";import"./chunk-OC3IFNJW.js";import"./chunk-UI7PAU35.js";import"./chunk-SMZ64QW3.js";import"./chunk-DQTTI4XL.js";import"./chunk-FF6KJRSH.js";import"./chunk-CQ7YBDUS.js";import"./chunk-GSYNHSX4.js";import"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import"./chunk-HXUMX2S7.js";import"./chunk-QKXA7YNE.js";import{a as ft}from"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import"./chunk-M2F2X65U.js";import"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import"./chunk-S5DGV5WL.js";import"./chunk-AOXUSYRH.js";import{q as N}from"./chunk-WKBC6JL3.js";import{f as at}from"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import{X as q}from"./chunk-VPDRXROE.js";import{w as O}from"./chunk-JLIPSIRU.js";import"./chunk-CIDV5VJQ.js";import{a as zt}from"./chunk-VX55KNI4.js";import"./chunk-4TYAYDA2.js";import{e as ct,j as Kt}from"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import{a as D,ta as Gt}from"./chunk-VGT27A4M.js";import"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import"./chunk-OG46YTNN.js";import{c as h}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import"./chunk-CYOQISC6.js";import"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{A as Y,C as lt,o as it,w as nt}from"./chunk-LDKM7IQF.js";import"./chunk-6O63U2D6.js";import{M as I,m as rt,x as g}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{T as st,c as Wt}from"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import{a as y}from"./chunk-O337TVCZ.js";import"./chunk-EJP3AYQB.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-WRBXETR5.js";import"./chunk-RBB7LL2V.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as l,m as e,o}from"./chunk-GLD6H5Q5.js";e();o();var i=l(y()),z=l(O()),Ot=l(zt());I();Kt();Gt();e();o();var L=l(y()),b=l(O());e();o();var H=l(y());I();e();o();var A={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var _=l(y());var Nt=l(Wt());I();var Bt=l(q());var Yt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},bt="hasReadTxHistoryFilterEntryTooltip",qt=()=>{try{return localStorage.getItem(bt)??!1}catch{return!0}},Zt=()=>{try{localStorage.setItem(bt,!0)}catch(s){console.error(s)}};function $t({onClick:s}){let t=(0,_.useRef)();(0,_.useEffect)(()=>{qt()||(t.current.setVisible(!0),Zt())},[]);let n=c=>{t.current=c},r=(0,_.useRef)();return(0,Bt.useClickAway)(()=>{t.current.setVisible(!1)},r),_.default.createElement(Y,{popupRef:n,placement:Y.DIRECTION.bottomRight,title:g(Yt.tooltip)},_.default.createElement(h.Box,{ref:r},_.default.createElement(st,{onClick:s,className:(0,Nt.default)("okds-filter",A.filter)})))}var wt=$t;e();o();var B=l(y());I();e();o();var j={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};e();o();var U=l(y());function Jt({onChange:s,reject:t}){let[n,r]=(0,U.useState)(t);return(0,U.useEffect)(()=>{r(t)},[t]),{currentReject:n,onChangeReject:d=>m=>{let f=t,x={...f,[d]:m};r(x),pt(d,m).then(p=>{p?(r(x),s?.(x)):r(f)}).catch(()=>{r(f)})}}}var It=Jt;var kt={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},Qt=s=>{let{currentReject:t,onChangeReject:n}=It(s);return B.default.createElement(h.Box,{className:j.root},B.default.createElement(h.Box,{className:j.textBox},B.default.createElement(N.Text,{warp:!0,strong:!0,size:N.SIZE.md,className:j.text},g(kt.hideValuelessNftTittle)),B.default.createElement(N.Text,{warp:!0,size:N.SIZE.xs,className:j.text,type:N.TYPE.secondary},g(kt.hideValuelessNftSubtitle))),B.default.createElement(lt,{onChange:n(k.hideValuelessNft),checked:t?.[k.hideValuelessNft]}))},Ft=Qt;e();o();var R=l(y()),Vt=l(O());function Xt(){let s=(0,Vt.useDispatch)(),[t,n]=(0,R.useState)({[k.hideValuelessNft]:!1}),[r,c]=(0,R.useState)(!1),d=()=>P().then(p=>{n(p)}).catch(()=>{});(0,R.useEffect)(()=>{d()},[]);let m=()=>{c(!0)},f=()=>{c(!1)};return{reject:t,onChangeShowValueLess:p=>{n(p),s(V({})),setTimeout(()=>{f()},200)},openDialog:m,closeDialog:f,showRejectDialog:r}}var Et=Xt;function te(){let{reject:s,onChangeShowValueLess:t,openDialog:n,closeDialog:r,showRejectDialog:c}=Et();return H.default.createElement(h.Box,{className:A.root},H.default.createElement(wt,{onClick:n}),H.default.createElement(it,{title:g("wallet_extension_history_title_filter"),visible:c,onClose:r,onCancel:r,alignBottom:!0,noMargin:!0},H.default.createElement(Ft,{onChange:t,reject:s})))}var jt=te;e();o();var Q={"retina-border-basic":"_retina-border-basic_12hb5_1",retinaBorderBasic:"_retina-border-basic_12hb5_1",root:"_root_12hb5_29",left:"_left_12hb5_68"};I();function ee(){let s=(0,b.useDispatch)(),t=(0,b.useSelector)(F);return L.default.createElement(Lt,{align:nt.DIRECTION.left,value:t.mainCoinId,searchable:!0,onChange:n=>{s(V({mainCoinId:n}))}})}function oe(){let s=(0,b.useDispatch)(),t=(0,b.useSelector)(F),n=M(rt.subtract(3,"M"))?.stringDates?.[0];return L.default.createElement(E.DateRangeSelection,{dates:t.dates,mainCoinId:t.mainCoinId,customMinDate:n,setDate:r=>{s(xt({dates:r}))},onChange:r=>{s(V({dates:r}))}})}function re(){return L.default.createElement(h.Box,{className:Q.root},L.default.createElement(h.Box,{className:Q.left},L.default.createElement(ee,null),L.default.createElement(oe,null)),L.default.createElement(jt,null))}var Rt=re;e();o();var a=l(y()),C=l(O()),w=l(q());var se=({txData:s,setTxData:t,explorerUrl:n})=>{let r=(0,C.useDispatch)(),c=(0,C.useSelector)(F),d=(0,C.useSelector)(ht),m=(0,C.useSelector)(at),f=(0,C.useSelector)(dt),x=(0,C.useSelector)(v),[p,W]=(0,a.useState)(null),{run:S}=(0,w.useDebounceFn)(()=>{r(J({...x}))},{wait:200}),G=(0,a.useCallback)(()=>{r(J({...x},{scrollLoad:!0}))},[c]);Dt({scrollContainer:p},S),(0,w.useInfiniteScroll)(G,{target:p,threshold:150});let[X,K]=(0,a.useMemo)(()=>Ct(d,m),[d,m]),T=(0,w.useMemoizedFn)(()=>{t(null)});return a.default.createElement(a.default.Fragment,null,a.default.createElement(St.HistoryList,{completedList:K,pendingList:X,isLoading:f,onClick:t,onRepeat:S,onContainer:W,explorerUrl:n}),a.default.createElement(Tt,{visible:!!s,params:s,onRefresh:S,onClose:T}))},Ht=(0,a.memo)(se);e();o();var Mt=l(q()),ie=()=>{let s=(0,Ot.useHistory)(),t=(0,z.useDispatch)(),n=(0,z.useSelector)(v),r=M()?.stringDates?.[0],[c,d]=(0,i.useState)(!0),[m,f]=(0,i.useState)(null),x=(0,Mt.useLatest)(m),[p,W]=(0,i.useState)([]);(0,i.useEffect)(()=>{let K=[(async()=>{let T=await P()??{};return await ut({startDate:new Date(`${r} 00:00:00`).getTime(),...n,hideValuelessNft:T?.hideValuelessNft??!0,status:[D.PENDING,D.CONFIRMING,D.ERROR,D.SUCCESS,D.WITHDRAWING]})})()];Promise.all(K).then(([T])=>{let tt=(ot,vt)=>{let At=ot.length,Ut=vt?ot[At-1]?.rowId:"";t(_t(Ut)),t($(!1))},et=T.content||[],Pt=T.hasViewMore;t(Z(et)),W(T?.explorerUrl||[]),tt(et,Pt)}).catch(()=>{t(Z([])),t($(!1))}).finally(()=>{d(!1)})},[]);let S=()=>{s.goBack(),t(yt()),t(gt()),t(ct())},G=(0,i.useCallback)(()=>{x.current?f(null):S()},[m]);return i.default.createElement(E.PageContainer,{className:"tx-history__container"},i.default.createElement(ft,{sticky:!1,className:"tx-history__navigator",title:g("wallet_extension_header_text_history"),onBack:S,closeable:!1,bordered:!1,customizeBackFn:G}),c?i.default.createElement(mt,null):i.default.createElement(i.default.Fragment,null,i.default.createElement(E.FilterContainer,null,i.default.createElement(Rt,null)),i.default.createElement(Ht,{txData:m,setTxData:f,explorerUrl:p})))},Ko=(0,i.memo)(ie);export{Ko as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-O537EXPF.js.map
