import{a as A}from"./chunk-BWRHBLYR.js";import{k as I}from"./chunk-GPJC633M.js";import{a as S}from"./chunk-GSYNHSX4.js";import{X as H}from"./chunk-VPDRXROE.js";import{a as b,b as B}from"./chunk-CYOQISC6.js";import{c as k,h as F}from"./chunk-TKYTZF2K.js";import{D as L,X as z,w as E}from"./chunk-YT2MPR4E.js";import{a as q}from"./chunk-O337TVCZ.js";import{f as w,m as o,o as a}from"./chunk-GLD6H5Q5.js";o();a();var u=w(q());z();var K=w(H());o();a();var U={gasReturn:"freeGasPlugin"},s={availableTimesLimit:"wallet_extension_freegas_notif_daily_gas",exceedGasLimit:"wallet_extension_freegas_notif_exceeds_limit",exceedTodayGasLimit:"wallet_extension_freegas_notif_limit_reached",walletAssetNotEnough:"walletAssetNotEnough"},n={saveTxCommon:170001,notStart:170003,exceededTheLimit:170004,exceedingTheSubsidyLimit:170006,walletAssetNotEnough:170007},Q=Object.values(n),V={transfer:1,dex:2,dapp:3,nft:4,approval:5};o();a();F();B();async function D(m){let{data:f={}}=await k(b.getGasReturnCheck,m);return f}var c={empty:1,unavailable:2,error:3,ok:4};function J({walletId:m,coinId:f,fromAddress:d,toAddress:h,txType:p,unavailable:P,disabled:G,fee:W}){let j=S(),T=m||j,{baseCoin:_}=A(f,!0),y=_.chainId,M=I(_.coinId),C=E(W,M),[t,x]=(0,u.useState)(null),[R,e]=(0,u.useState)(null),O=async()=>{if(G||!y||!d||!p){x(null);return}try{let i=await D({accountId:T,chainId:y,address:d,toAddress:h,txType:p});if(i){let{activitySymbol:l,activityStatus:g,errorCode:v}=i;l===U.gasReturn&&g===1&&v!==n.notStart&&x(i)}}catch{}};(0,K.useDebounceEffect)(()=>{O()},[T,y,d,h,p,G],{wait:100}),(0,u.useEffect)(()=>{if(!t){e(null);return}let{gas:i,errorCode:l,availableTimes:g,errorMsg:v}=t;l===n.exceedingTheSubsidyLimit?e({key:s.exceedTodayGasLimit,error:!0}):l===n.exceededTheLimit?e({key:s.availableTimesLimit,args:{num:0},error:!0}):l===n.walletAssetNotEnough?e({key:s.walletAssetNotEnough,text:v,error:!0}):L(C,i)?e({key:s.exceedGasLimit,error:!0}):e({key:s.availableTimesLimit,args:{num:g},error:!1})},[t,C]);let r;return t?P?r=c.unavailable:R?.error?r=c.error:r=c.ok:r=c.empty,{status:r,activityId:r===c.ok?t.activityId:void 0,activity:t,tip:R,clear:()=>{x(null),e(null)}}}var ue=J;export{s as a,Q as b,V as c,c as d,ue as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-ZGE3YU4L.js.map
