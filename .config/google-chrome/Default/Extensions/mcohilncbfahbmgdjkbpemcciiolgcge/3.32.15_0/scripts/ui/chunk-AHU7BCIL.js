import{a as ai}from"./chunk-C6JR2GZU.js";import{a as ii,b as si}from"./chunk-EZ5WRJOA.js";import{a as ri}from"./chunk-WMPWBUW7.js";import{a as oi}from"./chunk-WXXVKHTN.js";import{a as O}from"./chunk-O4KI5ERK.js";import{a as ci}from"./chunk-U2UKW4WG.js";import{a as ti}from"./chunk-445ZV7VL.js";import{a as ni}from"./chunk-A4CVLGFS.js";import{a as Xt,d as Qt}from"./chunk-ZGE3YU4L.js";import{c as je,d as ei}from"./chunk-UAHUXCQX.js";import{g as ft,j as pt}from"./chunk-J2H2J7IS.js";import{c as lt}from"./chunk-F52H34ZH.js";import{a as Ft}from"./chunk-3DI6NEAD.js";import{e as qt,h as Jt}from"./chunk-YC6W5MPL.js";import{m as mt}from"./chunk-WKBC6JL3.js";import{X as jt}from"./chunk-VPDRXROE.js";import{p as Zt}from"./chunk-JLIPSIRU.js";import{Z as t,aa as ut,ca as de,ea as De,ta as Ze}from"./chunk-VGT27A4M.js";import{A as ie,B as R,C as ae,D,E as Yt,F as le,H as ze,I as $,K as we,L as nt,P as Ye,Q as Kt,X as Ke,Yb as ye,Zb as ts,a as Ht,b as Qi,w as P,y as x,z as ee}from"./chunk-YT2MPR4E.js";import{b as ct,q as B}from"./chunk-LDKM7IQF.js";import{F as $t,K as zt,pa as es}from"./chunk-6O63U2D6.js";import{M as Rt,l as Q,x as g}from"./chunk-RIOWPXBZ.js";import{a as is}from"./chunk-ADWO6K2C.js";import{a as Vt}from"./chunk-O337TVCZ.js";import{f as Me,m as H,o as V}from"./chunk-GLD6H5Q5.js";H();V();var a=Me(Vt()),xi=Me(jt());es();var y=Me(is());Rt();Ze();Ke();H();V();var Y=Me(Vt()),fi=Me(jt());Qi();ts();H();V();Rt();Ze();Ke();var mi=({gasLimit:r,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:n,supportEip1559:u,extFee:c}={})=>{let m="",o="";if(!u)m=P(r,e),o=e;else{let l=x(n,i);o=Math.min(l,s),m=P(r,o)}return{minGasFee:x(m,c),minGasPrice:o}},ui=({gasLimit:r,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c={},gasLimitInfo:m={},gasType:o})=>{let{baseFee:l}=c,{originGasLimit:M}=m;if(o!==t.CUSTOM)return mi({gasLimit:M,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:l,supportEip1559:n,extFee:u});let d=ee(s,i),L=Math.min(d,l),F=Math.min(r,M);return mi({gasLimit:F,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:L,supportEip1559:n,extFee:u})};function ls(r,e){let{isNetworkFeeLoading:i,gasLimit:s,gasPrice:n,maxFeePerGas:u,maxPriorityFeePerGas:c,supportEip1559:m,gasLimitInfo:o}=r;return!i&&(ae(s,0)||m&&(ae(u,0)||R(c,0))||!m&&ae(n,0)||o?.queryGasLimitErrorUseDefault&&e!==ei.DEPLOY_CONTRACT)}async function fs(r,e){let{from:i,to:s,data:n,value:u="0"}=e,c={checkTypes:[de.VERIFY_GAS_LIMIT],coinId:r,from:i,to:s,amount:u,inputData:n,tokenAddress:s},{data:m=[]}=await qt(c),o=m?.find((l={})=>l.checkType===de.VERIFY_GAS_LIMIT);return o&&o?.result===!1&&o?.resultCode!=="306001"?o.msg||g("wallet_extension_toast_text_unknown_error"):!1}Ze();Ke();var pi=()=>e=>Kt(e,0),Fi=({gasPrice:r,gasLimit:e,extFee:i,baseCoin:s={},currencyId:n})=>{let u=x(P(r,e),i),c=nt(u),m=mt(c,{symbol:s?.symbol}),o=pt(s?.coinId,u,{currencyId:n,useApproximate:!0});return{gasFeeDisplay:`${m}${o}`,gasFee:c}},qe=({gasPrice:r,gasLimit:e,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c,gasLimitInfo:m,gasType:o,baseCoin:l={},currencyId:M})=>{let{minGasFee:d,minGasPrice:L}=ui({gasLimit:e,gasPrice:r,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c,gasLimitInfo:m,gasType:o}),F=nt(d),T=mt(F,{symbol:l?.symbol}),p=pt(l?.coinId,d,{currencyId:M,useApproximate:!0});return{minGasPrice:L,minGasFee:F,minGasFeeDisplay:`${T}${p}`}},li=(r={},e={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:i,disabled:s,fetchOnce:n,signInfo:u={}}=e,{coinId:c,supportEip1559:m,tx:o,needExtFee:l=!1}=r,[M,d]=(0,Y.useState)(null),[L,F]=(0,Y.useState)({data:"",loading:!1,error:""});(0,Y.useEffect)(()=>{!l||s||F(p=>({...p,loading:!0,error:""}))},[o,l,s]);let T=()=>{try{if(!c){let p=u;Ht.captureEvent({message:`coinId is ${c}`,contexts:{report:{info:JSON.stringify({href:window?.location?.href,rawData:p})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${c}`}]},tags:{},level:"info"})}}catch{}};return(0,fi.useDebounceEffect)(()=>{if(!l||s){F(f=>({...f,loading:!1,error:""}));return}if(n===M&&n!==null){F(f=>({...f,loading:!1,error:""}));return}let p=D(o.gasPrice,"0")&&D(o.gasLimit,"0"),E=D(o.maxFeePerGas,"0")&&D(o.maxPriorityFeePerGas,"0")&&D(o.gasLimit,"0");if(!(m?E:p)){F(f=>({...f,loading:!1,error:""}));return}(async()=>{try{let f={...o,value:ye(o.value),gasLimit:ye(o.gasLimit)},I=m?{...f,maxFeePerGas:ye(o.maxFeePerGas),maxPriorityFeePerGas:ye(o.maxPriorityFeePerGas)}:{...f,gasPrice:ye(o.gasPrice)},K=Zt(I),Z=await ci(K);T();let _=await Jt({coinId:c},{inputData:Z});F(oe=>({...oe,data:_,loading:!1,error:""}))}catch(f){F(I=>({...I,loading:!1,error:f.error_message||"Network error"}))}finally{n&&d(n)}})()},[c,o,n,l],{wait:i}),L},ss=({commonTx:r,gasPrice:e,priorityFee:i,supportEip1559:s})=>(0,Y.useMemo)(()=>s?{...r,maxFeePerGas:e,maxPriorityFeePerGas:i}:{...r,gasPrice:e},[r,e,i,s]),Gi=({coinId:r,from:e,to:i,value:s,inputData:n,gasLimit:u,supportEip1559:c,needExtFee:m,fastGasPrice:o,fastPriorityFee:l,customGasPrice:M,customMaxBaseFee:d,customMaxPriorityFee:L,customGasLimit:F,estimatedL1FeeOptions:T})=>{let p=(0,Y.useMemo)(()=>({from:e,to:i,value:s,data:n}),[e,i,s,n]),E=(0,Y.useMemo)(()=>({...p,gasLimit:u}),[p,u]),w=ss({commonTx:E,gasPrice:o,priorityFee:l,supportEip1559:c}),W=(0,Y.useMemo)(()=>c?{...p,maxFeePerGas:$(x(d,L)),maxPriorityFeePerGas:$(L),gasLimit:F}:{...p,gasPrice:$(M),gasLimit:F},[p,c,M,d,L,F]),f=li({coinId:r,tx:w,type:"fast",supportEip1559:c,needExtFee:m},T),I=li({coinId:r,tx:W,type:"custom",supportEip1559:c,needExtFee:m},T);return(0,Y.useMemo)(()=>{let K=f.loading||I.loading,Z=f.error||I.error,_={[t.SLOW]:f.data,[t.STANDARD]:f.data,[t.FAST]:f.data,[t.CUSTOM]:I.data};return{loading:K,error:Z,data:_}},[f,I])};H();V();var te={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};var fe=r=>zt(r)||ae(r,0);function Pi({className:r}){return a.default.createElement(ct,{className:r,desc:g("wallet_extension_transfer_text_higher_than_necessary"),type:ct.TYPE.warn,closable:!1})}var rs=({isSignInfoLoading:r,signInfo:e,initialGasLimitInfo:i,isGasLimitLoading:s,visible:n,address:u,inputData:c,tokenAddress:m,coinId:o,value:l,initialGasData:M,estimatedL1FeeOptions:d,onBack:L,onClose:F,onGasChange:T,currencyId:p,minimumGasLimit:E,gasReturn:w,onServerDataChange:W,onGasTypeManualChange:f,isMev:I,mevInfo:K})=>{let Z=(0,a.useRef)(!1),[,_]=ft(o,{withPrice:!0}),oe=lt({coinId:_?.coinId}),[pe,ge,Se]=si(oe?.realChainIdHex),ne=ai(),Fe=pi(),{initialGasType:Ee=t.STANDARD,initialCustomMaxBaseFee:ce,initialCustomMaxPriorityFee:Te,initialCustomGasPrice:Ge,initialCustomGasLimit:b}=M||{},Ne=fe(ce)?void 0:we(ce),he=fe(Te)?void 0:we(Te),Ae=fe(Ge)?void 0:we(Ge),Je=fe(b)?void 0:b,[Oe,ke]=(0,a.useState)(),[We,yi]=(0,a.useState)(),[Pt,di]=(0,a.useState)(),[xt,yt]=(0,a.useState)(),[be,dt]=(0,a.useState)(Ee),[N,ve]=(0,a.useState)(Ee),gi=G=>{let{priorityRate:C}=K||{},k=ot=>P(ot,C),A=(ot,Ji)=>{let Xi=ie([0,P(Ji,ee(C,1))]);return x(ot,Xi)},{supportEip1559:z,max:re,min:at,normal:vt,fastPriorityFee:$e,proposePriorityFee:Bt,safePriorityFee:Ut}=G,ue={};return z&&C&&(ue.fastPriorityFee=k($e),ue.safePriorityFee=k(Ut),ue.proposePriorityFee=k(Bt),ue.max=A(re,$e),ue.normal=A(vt,Bt),ue.min=A(at,Ut)),{...G,...ue}},U=(0,a.useMemo)(()=>I?e?.gasPrice?gi(e?.gasPrice):je:e?.gasPrice||je,[e?.gasPrice,I]),Ti=e?.needExtFee,{min:_i,normal:Ci,max:Li,minGasPrice:Mi,supportEip1559:v,suggestBaseFee:wi,safePriorityFee:_e,proposePriorityFee:Ce,fastPriorityFee:Le}=U,j=Fe(_i),q=Fe(Ci),J=Fe(Li),h=(0,a.useMemo)(()=>{let G=Yt(i?.minGasLimit,E)?i?.minGasLimit:E,C={...i,minGasLimit:G};return R(C?.gasLimit,C?.minGasLimit)&&(C.gasLimit=C?.minGasLimit),C},[i,E]),gt=`${h?.gasLimit||0}`,X=Je||gt,Xe=`${h?.minGasLimit||gt}`,Qe=`${h?.maxGasLimit||1500*1e4}`,Di=O(j),Tt=O(q),Ii=O(J),_t=we(Mi),et=O(wi),Si=O(ee(j,_e)),Ct=O(ee(q,Ce)),Ei=O(ee(J,Le)),Ni=O(_e),Lt=O(Ce),hi=O(Le),Be=(0,a.useRef)(),Ue=(0,a.useRef)(),He=(0,a.useRef)(),tt=(0,a.useRef)(),Mt={[t.SLOW]:Di,[t.STANDARD]:Tt,[t.FAST]:Ii,[t.CUSTOM]:fe(Be.current)?Tt:Be.current},wt={[t.SLOW]:Si,[t.STANDARD]:Ct,[t.FAST]:Ei,[t.CUSTOM]:fe(Ue.current)?Ct:Ue.current},Dt={[t.SLOW]:Ni,[t.STANDARD]:Lt,[t.FAST]:hi,[t.CUSTOM]:fe(He.current)?Lt:He.current},Pe=typeof Pt=="string"?Pt:Ae||Mt[N],me=typeof Oe=="string"?Oe:Ne||wt[N],xe=typeof We=="string"?We:he||Dt[N],se=typeof xt=="string"?xt:X,S=Gi({coinId:o,from:u,to:m,value:l,inputData:c,gasLimit:X,supportEip1559:v,needExtFee:Ti,slowGasPrice:j,safePriorityFee:_e,standardGasPrice:q,proposePriorityFee:Ce,fastGasPrice:J,fastPriorityFee:Le,customGasPrice:Pe,customMaxBaseFee:me,customMaxPriorityFee:xe,customGasLimit:se,estimatedL1FeeOptions:{wait:200,...d,signInfo:e}}),Ve=r||s||S.loading,{minGasFeeDisplay:Ai,minGasFee:Oi,minGasPrice:ki}=qe({gasPrice:j,gasLimit:X,maxPriorityFeePerGas:_e,maxFeePerGas:j,supportEip1559:v,extFee:S?.data?.[t.SLOW],gasPriceInfo:U,gasLimitInfo:h,gasType:be,baseCoin:_,currencyId:p}),Wi=O(ki),{minGasFeeDisplay:bi,minGasFee:vi,minGasPrice:Bi}=qe({gasPrice:q,gasLimit:X,maxPriorityFeePerGas:Ce,maxFeePerGas:q,supportEip1559:v,extFee:S?.data?.[t.STANDARD],gasPriceInfo:U,gasLimitInfo:h,gasType:be,baseCoin:_,currencyId:p}),Ui=O(Bi),{minGasFeeDisplay:Hi,minGasFee:Vi,minGasPrice:Ri}=qe({gasPrice:J,gasLimit:X,maxPriorityFeePerGas:Le,maxFeePerGas:J,supportEip1559:v,extFee:S?.data?.[t.FAST],gasPriceInfo:U,gasLimitInfo:h,gasType:be,baseCoin:_,currencyId:p}),$i=O(Ri),It=ae(me,0)?g("extension_wallet_transaction_errortip_basefeelimit"):"",St=R(me,et)&&D(me,0)?g("extension_wallet_transaction_errortip_notsuccess",{baseFee:et}):"",Et=ae(xe,0)?g("extension_wallet_transaction_errortip_priorityfeelimit"):"",Nt=R(Pe,_t)?g("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:_t}):"",ht=R(se,Xe)||D(se,Qe)?g("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:Ft(Xe,0),maxGasLimit:Ft(Qe)}):"",At=!ht&&(!v&&!Nt||v&&!It&&!Et),Ot=x(me,xe),Re=$(ze((v?Ot:Pe)||0)),zi=O(Re),{gasFeeDisplay:kt}=Fi({gasPrice:ze(Re),gasLimit:ze(se),extFee:S?.data?.[t.CUSTOM],baseCoin:_,currencyId:p}),Yi=x(P(j,X),S?.data?.[t.SLOW]),Ki=x(P(q,X),S?.data?.[t.STANDARD]),Wt=x(P(J,X),S?.data?.[t.FAST]),bt=x(P(Re,se),S?.data?.[t.CUSTOM]),it=D(bt,P(Wt,2)),st=[{typeKey:t.SLOW,gasFee:Oi,unitPrice:`${Q.ceilShort(Wi,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Ai,estimatedTime:ne(U,j),onClick:()=>(f?.(),ve(t.SLOW))},{typeKey:t.STANDARD,gasFee:vi,unitPrice:`${Q.ceilShort(Ui,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:bi,estimatedTime:ne(U,q),onClick:()=>(f?.(),ve(t.STANDARD))},{typeKey:t.FAST,gasFee:Vi,unitPrice:`${Q.ceilShort($i,2)} ${g("extension_wallet_transaction_input_gwei")}`,totalPrice:Hi,estimatedTime:ne(U,J),onClick:()=>(f?.(),ve(t.FAST))}],Zi=(0,a.useMemo)(()=>w&&w?.status!==Qt.empty&&(!w?.tip?.error||w?.tip?.key===Xt.exceedGasLimit)?st?.map(G=>G?.typeKey!==t.CUSTOM&&Q.lte(Q.mul(G?.gasFee,_?.usdPrice),w?.activity?.gas)?{supportGasReturn:!0,...G}:G):st,[w,st,_?.usdPrice]),ji=ne(U,Re,!At),qi={unitPricePrefix:Q.ceilShort(zi,2),unitPriceSuffix:g("extension_wallet_transaction_input_gwei"),totalPrice:kt?a.default.createElement(ni,{style:{color:it?"var(--okd-color-semantic-notice)":null},text:kt,maxWidth:"120px"}):"",renderWarning:G=>!G&&it?a.default.createElement(Pi,{className:te.customGasFeeWarningFold}):null,estimatedTime:ji,onClick:()=>{dt(t.CUSTOM)},canConfirm:At,onConfirm:G=>{ve(t.CUSTOM),f?.();let C=$(Pe),k=$(Ot),A=$(xe),z=se,re=S?.data?.[t.CUSTOM];Z.current=!0,T({gasType:t.CUSTOM,maxFeePerGas:k,maxPriorityFeePerGas:A,gasPrice:C,gasLimit:z,isGasLimitLoading:s,isNetworkFeeLoading:Ve,networkFee:bt,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:U,extFee:re,customConfirmed:Z.current}),Be.current=Pe,Ue.current=me,He.current=xe,tt.current=se,G?ge({gasPrice:C,isDefault:!0,maxFeePerGas:k,isSupportEip1559:v,maxPriorityFeePerGas:A,baseFeePerGas:Q.sub(k,A)}):Se(oe?.realChainIdHex)}};(0,a.useEffect)(()=>{dt(N)},[n]),(0,a.useEffect)(()=>{if(N===t.CUSTOM)return;let G,C,k,A,z,re=X;N===t.SLOW?(k=j,G=j,C=_e,z=Yi,A=S?.data?.[t.SLOW]):N===t.STANDARD?(k=q,G=q,C=Ce,z=Ki,A=S?.data?.[t.STANDARD]):N===t.FAST&&(k=J,G=J,C=Le,z=Wt,A=S?.data?.[t.FAST]),T({gasType:N,maxFeePerGas:G,maxPriorityFeePerGas:C,gasPrice:k,gasLimit:re,isGasLimitLoading:s,isNetworkFeeLoading:Ve,networkFee:z,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:U,extFee:A})},[N,j,q,J,h,s,Ve,T]),(0,a.useEffect)(()=>{if(N===t.CUSTOM&&!n){let G=tt.current;typeof G=="string"&&R(G,h?.minGasLimit)&&(G=h?.minGasLimit,yt(h?.minGasLimit),tt.current=h?.minGasLimit);let C=$(Be.current||Ae||Mt[N]),k=$(Ue.current||Ne||wt[N]),A=$(He.current||he||Dt[N]),z=x(k,A),re=typeof G=="string"?G:X,at=S?.data?.[t.CUSTOM],$e=x(P((v?z:C)||0,re),S?.data?.[t.CUSTOM]);T({gasType:N,maxFeePerGas:z,maxPriorityFeePerGas:A,gasPrice:C,gasLimit:re,isGasLimitLoading:s,isNetworkFeeLoading:Ve,networkFee:$e,supportEip1559:v,gasLimitInfo:h,gasPriceInfo:U,extFee:at,useDefaultGas:!!pe,customConfirmed:Z.current})}},[pe,h,U,S]),(0,a.useEffect)(()=>{typeof W=="function"&&W({signInfo:e})},[e]);let rt=()=>a.default.createElement("span",{className:te.customGWei},g("extension_wallet_transaction_input_gwei"));return a.default.createElement(ri,{feeType:be,baseCoinId:_?.coinId,feeDataList:Zi,onBack:L,onClose:F,visible:n,supportDefaultGas:!0,custom:{useDefaultGas:!!pe,chainName:oe?.chainName,...qi,components:()=>a.default.createElement(a.default.Fragment,null,v?a.default.createElement(a.default.Fragment,null,a.default.createElement(B.Number,{className:te.customInput,size:B.SIZE.sm,title:a.default.createElement("div",{className:"network-fee--refresh-animation"},g("extension_wallet_transaction_text_maxbase_fee"),a.default.createElement("span",{className:te.customInputSubTitle},g("extension_wallet_transaction_text_current",{number:Q.ceilShort(et,2)}))),value:me,error:It,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:ke,max:1e7,tips:St&&a.default.createElement("div",{className:te.maxBaseFeeWarning},St),suffix:rt()}),a.default.createElement(B.Number,{className:te.customInput,size:B.SIZE.sm,title:g("extension_wallet_transaction_text_priority_fee"),value:xe,error:Et,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:yi,max:1e7,suffix:rt()})):a.default.createElement(B.Number,{className:te.customInput,size:B.SIZE.sm,title:a.default.createElement(a.default.Fragment,null,g("wallet_transfer_gasfee_subtitle_gas_price"),a.default.createElement("span",{className:te.customInputSubTitle},g("extension_wallet_transaction_input_gwei"))),value:Pe,error:Nt,errorType:B.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:di,max:1e7,suffix:rt()}),a.default.createElement(B.Number,{size:B.SIZE.sm,title:g("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:se,error:ht,errorType:B.TIP_TYPE.always,enableMinus:!1,onChange:yt,max:Qe,min:Xe,precision:0}),it&&a.default.createElement(Pi,{className:te.customGasFeeWarning}))}})};function Gt(r){let{coinId:e,address:i,inputData:s,tokenAddress:n,value:u,gasLimitOptions:c,initialGasData:m,onDappGasIllegal:o}=r,[l,M]=ft(e)||[{},{}],d=lt({coinId:M?.coinId}),L=ii(),[F,T]=(0,a.useState)(m),[p,E]=(0,a.useState)(!1),[w,W]=ti({coinId:e,address:i,chainId:l?.chainId}),[f,I,K]=oi({address:i,inputData:s,tokenAddress:n,coinId:e,value:u},{wait:200,...c}),Z=w||K;return(0,xi.useAsyncEffect)(async()=>{if(Z)return;if(d?.realChainIdHex)try{let b=await L(d?.realChainIdHex);if(!$t(b)){T({initialGasType:t.CUSTOM,initialCustomGasPrice:b?.gasPrice,initialCustomMaxPriorityFee:b?.maxPriorityFeePerGas,initialCustomMaxBaseFee:Q.sub(b?.maxFeePerGas,b?.maxPriorityFeePerGas)}),E(!0);return}}catch(b){console.log(b)}let _={...m||{}},{initialGasType:oe,initialCustomMaxBaseFee:pe,initialCustomMaxPriorityFee:ge,initialCustomGasPrice:Se,initialCustomGasLimit:ne}=_,{min:Fe,safePriorityFee:Ee,supportEip1559:ce,max:Te}=W?.gasPrice||je,{gasLimit:Ge}=f||{};if(oe===t.CUSTOM){let b=R(ne,Ge);b&&(_.initialCustomGasLimit=Ge);let Ne=ce&&(R(ge,Ee)||R(x(pe,ge),Fe)),he=!ce&&R(Se,Fe),Ae=D(ne,P(Ge,1.2)),Je=!ce&&D(Se,P(Te,1.2)),Oe=ce&&D(x(pe,ge),P(Te,1.2)),ke=b||Ne||he,We=Ae||Je||Oe;ke&&(_.initialCustomMaxPriorityFee=null,_.initialCustomMaxBaseFee=null,_.initialCustomGasPrice=null,_.initialGasType=t.STANDARD,o?.(ut[t.SLOW])),!ke&&We&&o?.(ut[t.FAST]),T(_)}E(!0)},[Z]),p?a.default.createElement(rs,{...r,initialGasData:F,isSignInfoLoading:w,signInfo:W,initialGasLimitInfo:f,isGasLimitLoading:I,onGasTypeManualChange:()=>{o?.("")}}):null}Gt.propTypes={visible:y.default.bool,address:y.default.string,inputData:y.default.string,tokenAddress:y.default.string,coinId:y.default.oneOfType([y.default.string,y.default.number]),value:y.default.string,initialGasData:y.default.shape({initialGasType:y.default.string,initialCustomMaxBaseFee:y.default.string,initialCustomMaxPriorityFee:y.default.string,initialCustomGasPrice:y.default.string,initialCustomGasLimit:y.default.string}),gasLimitOptions:y.default.object,estimatedL1FeeOptions:y.default.object,onBack:y.default.func,onClose:y.default.func,onGasChange:y.default.func,onServerDataChange:y.default.func,minimumGasLimit:y.default.string};Gt.defaultProps={visible:!1,address:"",inputData:"",tokenAddress:"",coinId:"",value:"0",initialGasData:{initialGasType:t.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},gasLimitOptions:{},estimatedL1FeeOptions:{},onBack:()=>{},onClose:()=>{},onGasChange:()=>{},onServerDataChange:()=>{},minimumGasLimit:"0"};var rr=(0,a.memo)(Gt);H();V();Ze();Ke();var ur=(r,e)=>{let i=r.find(s=>s?.checkType===e);return i?!i?.result:!1},lr=(r,e,i)=>{let s=r.find(n=>n?.checkType===de.OVERWRITTEN)||{};return s.toastType===De.FAILED?e():s.toastType===De.PENDING?i():r},fr=(r=[])=>{let e={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},i=r.find(s=>s?.checkType===de.OVERWRITTEN)||{};return e.nonce=i.nonce,e.newNonce=i.newNonce,e.originGasPrice=P(i?.gasPrice,1.1),e.originPriorityFee=P(i?.originPriorityFee,1.1),i.toastType===De.FAILED?e.hasFailedTx=!0:i.toastType===De.PENDING&&(e.hasPendingTx=!0),e},pr=(r,e,i)=>{let{userGasInfo:s,serverGasInfo:n,originTxGasInfo:u}=e,{originGasPrice:c,originPriorityFee:m}=u,{supportEip1559:o}=s;if(o){let L=!1,{maxFeePerGas:F,maxPriorityFeePerGas:T}=s,{normal:p,proposePriorityFee:E}=n,w=c,W=m,f=ie([F,p,w]);le(f,F)||(L=!0);let I=ie([T,E,W]),K="0";return le(I,T)||(K=ee(I,T),L=!0),L?i({maxFeePerGas:x(f,K),maxPriorityFeePerGas:I}):r}let{gasPrice:l}=s,{normal:M}=n,d=ie([l,M,c]);return le(d,l)?r:i({gasPrice:d})},Fr=({userGasInfo:r,serverGasInfo:e,originTxGasInfo:i})=>{let{originGasPrice:s,originPriorityFee:n}=i,{supportEip1559:u}=r;if(u){let l=!1,{maxFeePerGas:M,maxPriorityFeePerGas:d}=r,{normal:L,proposePriorityFee:F}=e,T=s,p=n,E=ie([M,L,T]);le(E,M)||(l=!0);let w=ie([d,F,p]),W="0";if(le(w,d)||(W=ee(w,d),l=!0),l)return{maxFeePerGas:Ye(x(E,W),0),maxPriorityFeePerGas:Ye(w,0)}}let{gasPrice:c}=r,{normal:m}=e,o=ie([c,m,s]);return le(o,c)?{}:{gasPrice:Ye(o,0)}},Gr=(r,e,i)=>{let{userGasInfo:s,updateGasInfo:n,baseCoinAmountAvailable:u}=e,{supportEip1559:c,gasLimit:m}=s;if(c){let{maxFeePerGas:l}=n;return D(P(l,m),u)?i():r}let{gasPrice:o}=n;return D(P(o,m),u)?i():r},Pr=({userGasInfo:r,updateGasInfo:e,baseCoinAmountAvailable:i,L1FEE:s})=>{let{supportEip1559:n,gasLimit:u}=r;if(n){let{maxFeePerGas:m}=e;return!!D(x(P(m,u),s),i)}let{gasPrice:c}=e;return!!D(x(P(c,u),s),i)};H();V();var gr={ON_CHAIN:0,NEW:1},Tr="UserReject";export{ui as a,ls as b,fs as c,rr as d,ur as e,lr as f,fr as g,pr as h,Fr as i,Gr as j,Pr as k,gr as l,Tr as m};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-AHU7BCIL.js.map
