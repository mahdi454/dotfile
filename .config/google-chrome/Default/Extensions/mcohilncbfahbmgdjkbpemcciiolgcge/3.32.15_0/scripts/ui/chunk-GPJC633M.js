import{f as U,o as b,q as j}from"./chunk-ABBYZM2I.js";import{a as x,b as W}from"./chunk-CQ7YBDUS.js";import{a as S}from"./chunk-GSYNHSX4.js";import{X as E}from"./chunk-VPDRXROE.js";import{E as O,sa as R,ta as q,w as P}from"./chunk-JLIPSIRU.js";import{d as M,f as J}from"./chunk-R4G6BEPF.js";import{X as H,w as h}from"./chunk-YT2MPR4E.js";import{la as F,pa as z}from"./chunk-6O63U2D6.js";import{a as A}from"./chunk-O337TVCZ.js";import{f as l,m as p,o as d}from"./chunk-GLD6H5Q5.js";p();d();var s=l(A()),C=l(P()),T=l(E());z();p();d();J();async function L(e,n){return(await M().getWalletsBalance({walletIds:e,chainId:n})).map(r=>({walletId:r?.walletId,balanceData:r?.balanceData,coinsMap:r?.coins.reduce((o,c)=>(o[c.coinId]=c,o),{})}))}async function K(e){return(await L([e])).find(t=>t.walletId===e)}async function Y({walletIds:e,chainId:n,coinId:t,flatten:r=!1}){let o=await M().getWalletsCoinBalance({walletIds:e,chainId:n,coinId:t}),c={};return o.forEach(m=>{let i=m.coins.reduce((a,u)=>(a[u.coinId]=u,a),{}),V=m.balanceCoins,f=[],_=["walletId","default"];V.forEach(a=>{if(a.childrenCoin){let u=a.childrenCoin.map(B=>({...B,...i[B.coinId]}));r?(u.forEach(B=>{_.forEach(w=>{B[w]=a[w]})}),f.push(...u)):f.push({...a,...i[a.coinId],childrenCoin:u})}else f.push({...a,...i[a.coinId]})}),c[m.walletId]=f}),c}function $(e,n,t){let r=S(),{data:o,run:c}=(0,T.useRequest)(K,{manual:!0,cacheKey:n});return(0,s.useEffect)(()=>{n&&n!==r&&c(n)},[n,r]),(0,s.useMemo)(()=>i=>n&&n!==r?o?e(i,n,o):t:e(i,r),[e,n,r,o,t])}var I=e=>{let n=(0,s.useRef)({}),t=$(b,e,n.current),r=(0,C.useSelector)(t);return(0,T.useCreation)(()=>r[e],[r,e])},se=e=>{let n=I(e),r=((0,C.useSelector)(O)[e]??[]).map(o=>U(o));return F([...n?.coins??[],...r],o=>`${o.coinId}_${"addressType"in o?o.addressType:0}`)},N=()=>{let e=S();return I(e)},ie=()=>N()?.coins??[];function ue(e){let n=(0,s.useRef)([]),t=$(j,e,n.current);return(0,C.useSelector)(t)}p();d();var k=l(A()),g=l(P()),D=l(E());H();var Te=e=>(0,g.useSelector)(q).find(({currencyId:r})=>r===e)||{},Q={},y=()=>{let{data:e}=x(W.coinTickers);return(0,k.useMemo)(()=>e||Q,[e])},ge=()=>{let e=y(),n=(0,g.useSelector)(R);return(0,D.useCreation)(()=>Object.keys(e).reduce((t,r)=>(t[r]=h(e?.[r]?.coinToUSDRate,n?.usdToThisRate),t),{}),[e,n?.usdToThisRate])},ye=()=>{let e=y();return(0,D.useCreation)(()=>Object.keys(e).reduce((n,t)=>(n[t]=e?.[t]?.coinToUSDRate,n),{}),[e])},he=e=>{let n=y(),t=(0,g.useSelector)(R),r=n?.[e]?.coinToUSDRate;return(0,k.useMemo)(()=>h(r,t?.usdToThisRate),[r,t?.usdToThisRate])},Me=e=>y()?.[e]?.coinToUSDRate,Re=e=>{let{data:n}=x(W.coinTickers);return n?.[e]?.coinPriceChangePercent24h};export{Y as a,I as b,se as c,ie as d,ue as e,Te as f,y as g,ge as h,ye as i,he as j,Me as k,Re as l};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-GPJC633M.js.map
