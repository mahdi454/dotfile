import{a as ge}from"./chunk-WMPWBUW7.js";import{a as fe}from"./chunk-A4CVLGFS.js";import{a as k}from"./chunk-BWRHBLYR.js";import{j as le}from"./chunk-J2H2J7IS.js";import{A as ce,B as ue}from"./chunk-YC6W5MPL.js";import{m as _}from"./chunk-WKBC6JL3.js";import{X as pe}from"./chunk-VPDRXROE.js";import{sa as me,w as ke}from"./chunk-JLIPSIRU.js";import{Z as u,ta as M}from"./chunk-VGT27A4M.js";import{B as re,C as ae,E as ne,X as ie,w as oe}from"./chunk-YT2MPR4E.js";import{q as F}from"./chunk-LDKM7IQF.js";import{K as ee,O as te,f as R,pa as se}from"./chunk-6O63U2D6.js";import{M as Q,l as H,x as G}from"./chunk-RIOWPXBZ.js";import{a as I}from"./chunk-O337TVCZ.js";import{f as y,m as i,o as m}from"./chunk-GLD6H5Q5.js";i();m();var p=y(I()),h=y(pe());se();Q();M();ie();i();m();var L=y(I());M();i();m();Q();se();ie();var V=e=>ee(e)||te(e,0),T=(e,t)=>String(Math.ceil(oe(e,t))),d=(e,t)=>ne(e,1)?`${H.ceilShort(e||0,0,!1,0,!1)} ${t}`:_(e||0,{symbol:t});function U({feeInfo:e,feeDisplay:t,customGasPriceStep:o,customGasAmount:a,customGasFee:n,canConfirm:c,onClick:r,onConfirm:g}){return(0,L.useMemo)(()=>({unitPrice:d(o,e.denom),totalPrice:L.default.createElement(fe,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:r,canConfirm:c,onConfirm:()=>{g({gasType:u.CUSTOM,gasPriceStep:o,gasAmount:a,gasFee:n})}}),[o,a])}i();m();var de=y(I());M();function O({feeInfo:e,feeDisplay:t,onClick:o}){return(0,de.useMemo)(()=>[{typeKey:u.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{o({gasType:u.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:u.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{o({gasType:u.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:u.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{o({gasType:u.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}i();m();var ye=y(ke());function N({coinId:e,symbol:t,decimals:o,currencyId:a,fee:n}){let c=_(n,{symbol:t,decimals:o}),r=le(e,n,{currencyId:a,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${c} ${r}`}function $({coinId:e,fee:t}){let{baseCoin:o}=k(Number(e),!0),a=(0,ye.useSelector)(me),{currencyId:n}=a,{symbol:c,decimals:r}=o,g=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.slow}),f=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.fast}),l=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.standard}),P=N({coinId:e,symbol:c,decimals:r,currencyId:n,fee:t.custom});return{slow:g,fast:f,standard:l,custom:P}}i();m();var Fe=y(I()),Pe=y(pe());var Le={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},z=0,Ne=7e3;function B({coinId:e,address:t,value:o="0",inputData:a="",to:n=""}){let[c,r]=(0,Fe.useState)(Le);async function g(){try{if(!e||!t||!a)return;r(A=>({...A,loading:!0,error:!1}));let[f,l]=await Promise.all([ce({coinId:e,from:t,value:o??"0",to:n??""}),ue({coinId:e,from:t,value:o??"0",inputData:a})]),{min:P,normal:C,max:x,feeDemon:s}=f,v={denom:s,gasAmount:l,gasPriceStep:{slow:P,fast:x,standard:C},gasFee:{slow:T(P,l),fast:T(x,l),standard:T(C,l)},error:!1,initLoading:!1,loading:!1};r(v)}catch{r(l=>({...l,error:!0,initLoading:!1,loading:!1}))}}return(0,Pe.useDeepCompareEffect)(()=>(clearInterval(z),g(),z=setInterval(g,Ne),()=>{clearInterval(z)}),[n,o,a]),c}i();m();var K={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function he({coinId:e,address:t,to:o,inputData:a,visible:n,gasType:c=u.STANDARD,gasPriceStep:r,gasAmount:g,onConfirm:f,onBack:l,onClose:P,onChange:C}){let{baseCoin:x}=k(Number(e),!0),s=B({coinId:e,address:t,to:o,inputData:a}),[v,A]=(0,p.useState)(c),[D,Se]=(0,p.useState)(c),[W,Te]=(0,p.useState)(),Ce=(V(r)?void 0:r)||s.gasPriceStep.standard,b=typeof W=="string"?W:Ce,[J,De]=(0,p.useState)(),Ge=(V(g)?void 0:g)||s.gasAmount,w=typeof J=="string"?J:Ge,X=re(b,s.gasPriceStep.slow)?G("wallet_extension_cosmos_alert_morethan",{num:d(s.gasPriceStep.slow,s.denom)}):"",Y=ae(w,0)?G("wallet_extension_cosmos_alert_limitmorethan"):"",xe=!X&&!Y,Z=T(b,w),j=$({coinId:e,fee:{...s.gasFee,custom:Z}}),q=(0,h.useMemoizedFn)(({gasType:E,gasAmount:we,gasPriceStep:Ie,gasFee:_e})=>{A(E),Se(E),C({gasType:E,gasPriceStep:Ie,gasAmount:we,gasFee:_e,denom:s.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),Ae=O({feeInfo:s,feeDisplay:j,onClick:q}),be=U({feeInfo:s,feeDisplay:j,customGasPriceStep:b,customGasAmount:w,customGasFee:Z,canConfirm:xe,onClick:()=>{A(u.CUSTOM)},onConfirm:q});return(0,h.useDeepCompareEffect)(()=>{D!==u.CUSTOM&&C({gasType:D,gasAmount:s.gasAmount,gasPriceStep:s.gasPriceStep[D],gasFee:s.gasFee[D],denom:s.denom,loading:s.loading,error:s.error,initLoading:s.initLoading})},[D,s,o,a]),p.default.createElement(ge,{feeType:v,feeDataList:Ae,onBack:l,onClose:P,onChange:R,visible:n,custom:{...be,components:()=>p.default.createElement(p.default.Fragment,null,p.default.createElement(F.Number,{className:K.customGasPriceStep,size:F.SIZE.sm,title:p.default.createElement(p.default.Fragment,null,G("wallet_extension_cosmos_title_gasfee")),value:b,onChange:Te,errorType:F.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:x?.decimals??6,suffix:p.default.createElement("span",{className:K.customGasPriceStepDenom},s.denom)}),p.default.createElement(F.Number,{size:F.SIZE.sm,title:G("wallet_extension_cosmos_title_gasamount",{},{useBr:!1}),value:w,onChange:De,errorType:F.TIP_TYPE.always,error:Y,enableMinus:!1,min:0,precision:0}))}})}export{he as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-UMI2AQQA.js.map
