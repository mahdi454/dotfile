import{d as Re,e as xo,f as vo,g as To,l as ho,o as go}from"./chunk-P52TMJKP.js";import{a as fo,b as yo}from"./chunk-2YRNNTO4.js";import{a as _o}from"./chunk-FCM3KMN7.js";import{d as po,e as uo}from"./chunk-SVCSAZ2J.js";import{a as to,b as Be,d as oo,e as so,g as lo,i as mo,k as co,m as ve}from"./chunk-AHU7BCIL.js";import{b as eo}from"./chunk-O4KI5ERK.js";import{e as Rt}from"./chunk-YQGNRWCJ.js";import{a as Co}from"./chunk-Y4Q624TF.js";import{a as io}from"./chunk-XZFOTB6K.js";import{c as $e,e as Qt}from"./chunk-ZGE3YU4L.js";import{a as ao,e as ro}from"./chunk-R5U3NPEX.js";import{a as jt,d as $t,q as Xe}from"./chunk-UAHUXCQX.js";import{i as no}from"./chunk-73OZ5IYN.js";import{b as qt}from"./chunk-BWRHBLYR.js";import{c as Xt}from"./chunk-XTOYI7P4.js";import{d as xe,f as Se}from"./chunk-J2H2J7IS.js";import{b as Vt}from"./chunk-F52H34ZH.js";import{a as Gt}from"./chunk-PGKED42N.js";import{a as Mt,b as Dt}from"./chunk-VVL4IZMM.js";import{a as Ot,d as Wt}from"./chunk-4W35J5OQ.js";import{h as Ut}from"./chunk-GPJC633M.js";import{b as Yt,e as Zt}from"./chunk-YC6W5MPL.js";import{c as zt}from"./chunk-2HEOW3XO.js";import{ha as Kt,w as Jt}from"./chunk-FF6KJRSH.js";import{a as Ht}from"./chunk-M2F2X65U.js";import{b as re}from"./chunk-AOXUSYRH.js";import{f as Ct,h as Je,l as wt,m as bt,q as W}from"./chunk-WKBC6JL3.js";import{X as ye}from"./chunk-VPDRXROE.js";import{T as At,X as Pt,Y as Ke,sa as kt,w as pn}from"./chunk-JLIPSIRU.js";import{F as Nt,Z as K,b as ke,ca as Le,d as Ft,l as Et,ta as fe}from"./chunk-VGT27A4M.js";import{g as Bt}from"./chunk-OG46YTNN.js";import{c as h}from"./chunk-RXNDJ7P3.js";import{a as Lt,b as dn}from"./chunk-CYOQISC6.js";import{c as St,h as _n}from"./chunk-TKYTZF2K.js";import{$b as Pe,B as lt,D as _e,Fa as pt,Jb as mn,L as mt,Lb as ut,Ub as cn,Uc as It,X as Ae,Xb as Z,Zb as qe,ba as ct,cc as dt,dc as _t,ea as ln,gd as un,w as Ze,x as st,y as Ve,z as Ie}from"./chunk-YT2MPR4E.js";import{A as Tt,G as ht,H as gt,a as yt,c as xt,o as X,q as je,r as vt}from"./chunk-LDKM7IQF.js";import{K as ge,e as rt,pa as Ye}from"./chunk-6O63U2D6.js";import{M as oe,l as j,w as Ue,x as a}from"./chunk-RIOWPXBZ.js";import{T as ft,c as Qe,ca as I}from"./chunk-OSCGYMLH.js";import{a as Q}from"./chunk-O337TVCZ.js";import{f as A,m as i,o as r}from"./chunk-GLD6H5Q5.js";i();r();fe();i();r();oe();i();r();var Ce=A(Q());i();r();i();r();var $=A(Q()),wo=A(pn());oe();Ae();i();r();var R={title:"_title_1xthp_1",subtitle:"_subtitle_1xthp_9",fee:"_fee_1xthp_15",feeTitle:"_feeTitle_1xthp_21",feeDetail:"_feeDetail_1xthp_26",speedDetail:"_speedDetail_1xthp_33",gasDetail:"_gasDetail_1xthp_36"};var fn=()=>{let e=qt(),o=no(),t=Ut(),s=(0,wo.useSelector)(kt),n=eo(),_=po(),c=async(l,y,d,F=0)=>{let{baseCoin:T}=await e(d,!0),w=t?.[T.coinId]||"0",E=Ze(l,y),b=bt(Ve(E,F),{symbol:T.symbol,decimals:T.decimals}),x=wt(Ze(st(Ve(E,F),10**T.decimals),w),{symbol:s.symbol});return`${b} ${x}`},u=(l,y)=>{let d=n(l);return a("wallet_extension_transaction_confirmation_gas_detail",{gasPrice:j.thousandFormat(d),gasLimit:j.thousandFormat(y)})},m=async(l,y)=>{try{return await _({...l,coinId:y})}catch{return""}},p=({userGasInfo:l,updateGasInfo:y,fetchParams:d})=>{let{gasPrice:F,maxFeePerGas:T,maxPriorityFeePerGas:w}=y,{supportEip1559:E,gasLimit:b,gasPrice:x,maxFeePerGas:C,maxPriorityFeePerGas:D}=l;return E?(delete d.gasPrice,{...d,value:d?.amount,maxFeePerGas:T||C,maxPriorityFeePerGas:w||D,gasLimit:b}):{...d,value:d?.amount,gasPrice:F||x,gasLimit:b}};return async({coinId:l,baseCoinAmountUse:y,userGasInfo:d,updateGasInfo:F,serverSignInfo:T,fetchParams:w})=>{let{gasPrice:E,maxFeePerGas:b}=F,{supportEip1559:x,gasLimit:C,gasPrice:D,maxFeePerGas:P}=d,G=0;T?.needExtFee&&(G=await m(p({userGasInfo:d,updateGasInfo:F,fetchParams:w}),l));let O=x?P:D,Y=await c(O,C,l),z=u(O,C),V=x?b:E,U=await c(V,C,l,G),J=u(V,C);return new Promise((q,te)=>{let k=X.prompt({hideCloseBtn:!1,alignBottom:!1,titleCenter:!1,infoType:null,confirmText:a("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:I.TYPE.highlight,size:I.SIZE.lg},onConfirm:async()=>{k.destroy();let{baseCoin:H}=await e(l,!0),{coinAmountInt:ne}=o(H.coinId),he=Ie(ne,y);co({userGasInfo:d,updateGasInfo:F,baseCoinAmountAvailable:he,L1FEE:G})?(ht.error({title:a("extension_toast_text_insufficient_balance")}),te(new Error(ve))):q(F)},onClose:()=>{k.destroy(),te(new Error(ve))},renderContent:H=>$.default.createElement(H,null,$.default.createElement("div",{className:R.title},a("extension_toast_title_transaction_replace")),$.default.createElement("div",{className:R.subtitle},a("extension_toast_subtitle_gasincrease")),$.default.createElement("div",{className:R.feeTitle},a("extension_toast_title_current_transaction")),$.default.createElement("div",{className:R.fee},$.default.createElement("div",{className:R.feeDetail},Y),$.default.createElement("div",{className:R.gasDetail},z)),$.default.createElement("div",{className:R.feeTitle},a("extension_toast_title_gasprice")),$.default.createElement("div",{className:R.fee},$.default.createElement("div",{className:R.speedDetail},U),$.default.createElement("div",{className:R.gasDetail},J)))})})}},bo=fn;var yn=()=>{let e=bo();return async({coinId:t,baseCoinAmountUse:s,userGasInfo:n,serverGasInfo:_,serverSignInfo:c,originTxGasInfo:u,fetchParams:m})=>{let p=mo({userGasInfo:n,serverGasInfo:_,originTxGasInfo:u});return p?.gasPrice||p?.maxFeePerGas?(await e({coinId:t,baseCoinAmountUse:s,userGasInfo:n,updateGasInfo:p,serverSignInfo:c,fetchParams:m}),Promise.resolve(p)):Promise.resolve()}},Fo=yn;i();r();var Ge={content:"_content_18w99_1",title:"_title_18w99_4",text:"_text_18w99_10"};var xn=()=>{let e=Fo();return async({coinId:t,baseCoinAmountUse:s="0",showSelectNonceDialog:n=!1,onChainNonce:_="0",newNonce:c="0",userGasInfo:u={},serverGasInfo:m={},serverSignInfo:p={},originTxGasInfo:f={},fetchParams:l={},title:y="",text:d="",confirmText:F="",cancelText:T=""})=>new Promise((w,E)=>{if(n){let b=X.prompt({hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,cancelBtnProps:{category:I.CATEGORY.outline,size:I.SIZE.lg},confirmBtnProps:{type:I.TYPE.highlight,size:I.SIZE.lg},confirmText:F,cancelText:T,onConfirm:async()=>{b.destroy();try{let x=await e({coinId:t,baseCoinAmountUse:s,userGasInfo:u,serverGasInfo:m,serverSignInfo:p,originTxGasInfo:f,fetchParams:l});w(x?{nonce:_,updateGasInfo:x}:{nonce:_})}catch(x){E(x)}},onCancel:()=>{b.destroy(),w({nonce:c})},renderContent:x=>Ce.default.createElement(x,null,Ce.default.createElement("div",{className:Ge.content},Ce.default.createElement("div",{className:Ge.title},y),Ce.default.createElement("div",{className:Ge.text},d)))})}else w({nonce:c})})},Me=xn;var vn=()=>{let e=Me();return async({coinId:t,baseCoinAmountUse:s,hasFailedTx:n,onChainNonce:_,newNonce:c,userGasInfo:u,serverGasInfo:m,originTxGasInfo:p,serverSignInfo:f,fetchParams:l})=>e({coinId:t,baseCoinAmountUse:s,showSelectNonceDialog:n,onChainNonce:_,newNonce:c,userGasInfo:u,serverGasInfo:m,serverSignInfo:f,originTxGasInfo:p,fetchParams:l,title:a("wallet_extension_transaction_popup_failed_transaction"),text:a("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:a("wallet_extension_transaction_popup_btn_replace"),cancelText:a("wallet_extension_transaction_popup_btn_skip")})},Eo=vn;i();r();oe();var Tn=()=>{let e=Me();return async({coinId:t,baseCoinAmountUse:s,hasPendingTx:n,onChainNonce:_,newNonce:c,userGasInfo:u,serverGasInfo:m,originTxGasInfo:p,serverSignInfo:f,fetchParams:l})=>e({coinId:t,baseCoinAmountUse:s,showSelectNonceDialog:n,onChainNonce:_,newNonce:c,userGasInfo:u,serverGasInfo:m,serverSignInfo:f,fetchParams:l,originTxGasInfo:p,title:a("wallet_extension_transaction_popup_pending_transaction"),text:a("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:a("wallet_extension_transaction_popup_btn_replace"),cancelText:a("wallet_extension_transaction_popup_btn_continue_wait")})},No=Tn;i();r();oe();Ye();var hn=()=>async({isRepeat:o,onCancel:t})=>new Promise((s,n)=>{if(o){let _=X.prompt({alignBottom:!1,hideCloseBtn:!0,infoType:X.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:I.TYPE.highlight,size:I.SIZE.lg},cancelBtnProps:{category:I.CATEGORY.outline,size:I.SIZE.lg},title:a("wallet_extension_popup_repeat_order"),confirmText:a("wallet_extension_popup_repeat_order_btn_continue"),cancelText:t?a("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:a("wallet_extension_popup_repeat_order_desc"),onConfirm:()=>{_.destroy(),s()},onCancel:()=>{_.destroy(),rt(t)&&t(),n(new Error(ve))}})}else s()}),Io=hn;var Ao="FetchError";var Po=()=>{let e=Eo(),o=No(),t=Io(),s=async({coinId:c,from:u,to:m,amount:p,gasPrice:f})=>{let[{data:l=[]},{data:y={}}]=await Promise.all([Zt({checkTypes:[Le.REPEAT,Le.OVERWRITTEN],coinId:c,from:u,to:m,amount:p,gasPrice:f}),Yt({coinId:c,address:u},{fromAddr:u,scenario:Et.SCENARIO_SEND_COIN})]);return{txToastCheckData:l,signInfoData:y}},n=c=>{let{hasFailedTx:u,hasPendingTx:m,nonce:p,newNonce:f,originGasPrice:l,originPriorityFee:y}=lo(c),d=so(c,Le.REPEAT);return{hasFailedTx:u,hasPendingTx:m,nonce:p,newNonce:f,originGasPrice:l,originPriorityFee:y,isRepeat:d}};return async({coinId:c,from:u,to:m,amount:p,gasPrice:f,baseCoinAmountUse:l,userGasInfo:y,whetherCheckRepeat:d,onRepeatCancel:F})=>{let T=[],w={};try{let U=await s({coinId:c,from:u,to:m,amount:p,gasPrice:f});if(!Array.isArray(U.txToastCheckData)||typeof U.signInfoData!="object")throw new Error(Ao);T=U.txToastCheckData,w=U.signInfoData?.info||{}}catch{throw new Error(Ao)}let E=n(T),{nonce:b,newNonce:x,originGasPrice:C,originPriorityFee:D,hasFailedTx:P,hasPendingTx:G,isRepeat:O}=E,Y={originGasPrice:C,originPriorityFee:D},z={coinId:c,baseCoinAmountUse:l,onChainNonce:b,newNonce:x,userGasInfo:y,serverGasInfo:w.gasPrice,serverSignInfo:w,originTxGasInfo:Y,fetchParams:{amount:p,coinId:c,from:u,gasPrice:f,to:m}},V={nonce:x};return P?V=await e({...z,hasFailedTx:P}):G&&(V=await o({...z,hasPendingTx:G})),d&&await t({isRepeat:O,onCancel:F}),V}};i();r();var Oo=A(Q());i();r();var v=A(Q()),we=A(ye()),et=A(Qe());oe();i();r();var ee=A(Q());var ko=A(ye());cn();i();r();var L={"mev-control-enter":"_mev-control-enter_1h6im_1",mevControlEnter:"_mev-control-enter_1h6im_1","mev-control-content":"_mev-control-content_1h6im_6",mevControlContent:"_mev-control-content_1h6im_6","mev-control-content-title":"_mev-control-content-title_1h6im_9",mevControlContentTitle:"_mev-control-content-title_1h6im_9","mev-control-content-desc":"_mev-control-content-desc_1h6im_14",mevControlContentDesc:"_mev-control-content-desc_1h6im_14","list-content":"_list-content_1h6im_18",listContent:"_list-content_1h6im_18","list-item":"_list-item_1h6im_21",listItem:"_list-item_1h6im_21","item-icon":"_item-icon_1h6im_24",itemIcon:"_item-icon_1h6im_24","list-item-text":"_list-item-text_1h6im_28",listItemText:"_list-item-text_1h6im_28","mev-control-title":"_mev-control-title_1h6im_32",mevControlTitle:"_mev-control-title_1h6im_32","mev-control-sub-title":"_mev-control-sub-title_1h6im_37",mevControlSubTitle:"_mev-control-sub-title_1h6im_37","mev-control-picture":"_mev-control-picture_1h6im_42",mevControlPicture:"_mev-control-picture_1h6im_42","mev-control-divider":"_mev-control-divider_1h6im_46",mevControlDivider:"_mev-control-divider_1h6im_46","mev-control-text-content":"_mev-control-text-content_1h6im_50",mevControlTextContent:"_mev-control-text-content_1h6im_50","mev-status":"_mev-status_1h6im_54",mevStatus:"_mev-status_1h6im_54","mev-status__text":"_mev-status__text_1h6im_58",mevStatusText:"_mev-status__text_1h6im_58","mev-status__text__active":"_mev-status__text__active_1h6im_63",mevStatusTextActive:"_mev-status__text__active_1h6im_63","mev-tooltip":"_mev-tooltip_1h6im_66",mevTooltip:"_mev-tooltip_1h6im_66"};var gn=({mevList:e,mevChecked:o,setMevChecked:t,...s})=>{let n=(0,ee.useRef)(null);if(!e.length)return null;let _=(0,ko.useSize)(n),c=m=>{t(m)},u=m=>ee.default.createElement(Ot,{icon:{size:re.SIZE.lg,src:m.vendorIcon||ut,type:re.TYPE.image},className:L["list-item"],onClick:()=>{c(m)},...s},ee.default.createElement(h.FlexBox,{direction:h.DIRECTION.vertical},ee.default.createElement(h.FlexBox,{align:h.ALIGN.center},ee.default.createElement(W.Text,{className:L["list-item-text"]},m.name))),m.name===o.name&&ee.default.createElement(h.FlexBox,{className:L["item-icon"],justify:"flex-end"},ee.default.createElement(re,{icon:"okds-success-circle-fill",size:re.SIZE.sm})));return ee.default.createElement("div",{ref:n,className:L["list-content"]},ee.default.createElement(Wt,{itemKey:"id",height:_?.height??408,searchable:!1,dataSource:e,renderItem:u}))},Lo=gn;var So="mevOperated",Cn=2e3,wn=({isMev:e,needTooltip:o=!0,isShowBlockSwapMevTooltip:t,onMevChange:s,mevChecked:n,mevList:_,setMevChecked:c,className:u="",children:m})=>{let[p,{setFalse:f,setTrue:l}]=(0,we.useBoolean)(!1),[y,{toggle:d}]=(0,we.useBoolean)(!1),[F,T]=(0,v.useState)(""),[w]=(0,v.useState)(e);(0,v.useEffect)(()=>{let C=!e&&t,D=!e&&Ue.get(So)===void 0,P=()=>{f()},G=()=>{Ue.set(So,1)};return C?(T("wallet_extension_trade_tooltip_enable_mev"),l(),document.addEventListener("click",P,!1)):D&&(T("wallet_extension_mev_pop_turnon_mev"),l(),document.addEventListener("click",P,!1),document.addEventListener("click",G,!1)),()=>{document.removeEventListener("click",P,!1),document.removeEventListener("click",G,!1)}},[]);let E=()=>{window.localStorage.setItem("mevCheckedName",n.name)};(0,v.useEffect)(()=>{w&&n&&(E(),s(w,n))},[w,n]);let b=(0,we.useMemoizedFn)(()=>{typeof s=="function"&&(E(),s(!e,n)),Kt({mev:!e}),T(e?"wallet_extension_mev_pop_mev_off":"wallet_extension_mev_pop_mev_on"),d(),l(),setTimeout(()=>{f()},Cn)}),x=Bt({dark:"/cdn/assets/imgs/245/127CAD27DF691613.png",light:"/cdn/assets/imgs/2311/700F36AE20EC394E.png"});return n?v.default.createElement(v.default.Fragment,null,v.default.createElement("div",{className:(0,et.default)(L["mev-status"],u),onClick:d},v.default.createElement(Ct,{show:p,title:o&&a(F),placement:Tt.DIRECTION.bottomRight},m||v.default.createElement(ao,{clickable:!0,title:a("wallet_extension_mev_subtitle_protection")},v.default.createElement(W.Text,{className:(0,et.default)(L["mev-status__text"],{[L["mev-status__text__active"]]:e})},a(e?"wallet_extension_mev_desc_open":"wallet_extension_mev_desc_closed"))))),v.default.createElement(X.Action,{visible:y,onClose:d,onCancel:d,title:v.default.createElement(v.default.Fragment,null),isFull:!0,noContentPadding:!0,noMargin:!0,onConfirm:b,confirmBtnProps:e?{size:I.SIZE.lg,type:I.TYPE.primary,category:I.CATEGORY.outline}:{size:I.SIZE.lg,type:I.TYPE.highlight,category:I.CATEGORY.fill},confirmText:e?a("wallet_extension_mev_btn_disable_mev"):a("wallet_extension_mev_btn_activate_protection")},v.default.createElement(h.Box,{className:L["mev-control-content"]},v.default.createElement(h.FlexBox,{justify:"space-between",align:h.ALIGN.center},v.default.createElement(h.Space,{direction:h.DIRECTION.vertical,space:12},v.default.createElement(W.Text,{className:L["mev-control-title"]},a("wallet_extension_mev_grouptitle_mev_protection")),v.default.createElement(W.Text,{style:{color:e?"var(--okd-color-semantic-positive)":"var(--okd-color-content-primary)"},className:L["mev-control-sub-title"]},a(e?"wallet_extension_mev_label_enabled":"wallet_extension_mev_label_disabled"))),v.default.createElement(xt,{className:L["mev-control-picture"],src:x})),v.default.createElement(Je,{className:L["mev-control-divider"],style:{marginTop:24}}),v.default.createElement(h.Space,{className:L["mev-control-text-content"],direction:h.DIRECTION.vertical,space:24},v.default.createElement(h.Box,null,v.default.createElement(W.Text,{className:L["mev-control-content-title"]},a("wallet_extension_mev_title_provider")),v.default.createElement(Lo,{mevList:_,mevChecked:n,setMevChecked:c})),v.default.createElement(Je,{className:L["mev-control-divider"]}),v.default.createElement(h.Box,null,v.default.createElement(W.Text,{className:L["mev-control-content-title"]},a("wallet_extension_mev_title_mev_attack")),v.default.createElement(W.Text,{className:L["mev-control-content-desc"]},a("wallet_extension_mev_subtitle_mev_attack"))),v.default.createElement(h.Box,null,v.default.createElement(W.Text,{className:L["mev-control-content-title"]},a("wallet_extension_mev_title_prevent_attacks")),v.default.createElement(W.Text,{className:L["mev-control-content-desc"]},a("wallet_extension_mev_subtitle_prevent_attacks"))),v.default.createElement(h.Box,null,v.default.createElement(W.Text,{className:L["mev-control-content-desc"]},a("wallet_extension_mev_subtitle_mev_reset"))))))):null},Bo=wn;i();r();i();r();var De=A(Q()),Go=A(ye());_n();dn();var bn=()=>{let[e,{setFalse:o}]=(0,Go.useBoolean)(!0),[t,s]=(0,De.useState)([]),n=async()=>{try{let _=await St(Lt.getMevList,{},{});return s(_.data),_.data}catch{return[]}finally{o()}};return(0,De.useEffect)(()=>{n()},[]),[e,t]},Mo=bn;var me=A(Q()),Fn=e=>{let[o,t]=Mo(),[s,n]=(0,me.useState)(""),[_,c]=(0,me.useState)([]);(0,me.useEffect)(()=>{let m=t.find(l=>window.localStorage.getItem("mevCheckedName")===l.name&&l.chainIds.includes(Number(e))),p=t.find(l=>l.chainIds.includes(Number(e))),f=t.filter(l=>l.chainIds.includes(Number(e)));c(f),n(m||p)},[t,e]);let u=(0,me.useMemo)(()=>s&&t.length>0&&!o,[s,t,o]);return[s,_,u,n]},Do=Fn;var En=({isMev:e,chainId:o,className:t,needTooltip:s,isShowBlockSwapMevTooltip:n,onMevChange:_,children:c})=>{let[u,m,p,f]=Do(o);return p&&Oo.default.createElement(Bo,{isMev:e,needTooltip:s,className:t,isShowBlockSwapMevTooltip:n,onMevChange:_,mevChecked:u,mevList:m,setMevChecked:f},c)},Ho=En;i();r();var M=A(Q()),ue=A(ye());Ye();oe();qe();i();r();var be=A(Q()),ce=A(Qe());oe();i();r();var se={root:"_root_wpiv5_1",title:"_title_wpiv5_4",header:"_header_wpiv5_8",icon:"_icon_wpiv5_12",content:"_content_wpiv5_16",textarea:"_textarea_wpiv5_19",errorTip:"_errorTip_wpiv5_22",errorBordered:"_errorBordered_wpiv5_29"};function Nn({className:e,value:o,onChange:t,error:s,titleClass:n,errorTipClass:_,headerClassName:c,contentClassName:u,...m}){return be.default.createElement(yt,{defaultExpanded:!0,className:(0,ce.default)(se.root,e),titleClass:(0,ce.default)(se.title,n),headerClassName:(0,ce.default)(se.header,c),contentClassName:(0,ce.default)(se.content,u),customHeaderIcon:p=>be.default.createElement(re,{icon:"okds-arrow-chevron-down-md",size:re.SIZE.xs,className:(0,ce.default)({"okui-accordion-header-icon-expanded":p},se.icon)}),title:a("wallet_extension_inscription_text_hex_data_optional")},be.default.createElement(je.TextArea,{...m,inputClassName:se.textarea,errorType:je.TIP_TYPE.always,error:!!s,value:o,onChange:p=>{let f=p.target.value||"";t?.(f.trim())}}),!!s&&be.default.createElement(W.Text,{className:(0,ce.default)(se.errorTip,_)},s))}var Wo=Nn;i();r();oe();_t();function zo(e){return!!e&&(e.toLowerCase()==="0x"||!dt(e)||e.length%2!==0)?a("wallet_extension_inscription_text_input_formatting_error"):null}fe();i();r();var Uo=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isPauser",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint8"},{name:"totalSupply",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}];i();r();var g=A(Q()),pe=A(ye()),Zo=A(Qe());oe();Ae();i();r();var S={root:"_root_14625_1",icon:"_icon_14625_1",editApproveAmountModal:"_editApproveAmountModal_14625_10",content:"_content_14625_22",txTypeInfo:"_txTypeInfo_14625_25",editArea:"_editArea_14625_28",unlimitedText:"_unlimitedText_14625_33",unlimitedSymbol:"_unlimitedSymbol_14625_42",symbolClassName:"_symbolClassName_14625_59",quickHandler:"_quickHandler_14625_62",balanceWrap:"_balanceWrap_14625_69",balance:"_balance_14625_69",maxBalance:"_maxBalance_14625_91",unlimited:"_unlimited_14625_33",text:"_text_14625_104",authQuantityWarnTip:"_authQuantityWarnTip_14625_111",danger:"_danger_14625_118",info:"_info_14625_121",approveTip:"_approveTip_14625_124",footerActions:"_footerActions_14625_132"};var Yo=j.toPlainString(10**40),In=e=>{typeof e!="string"&&(e=e.toString());let o=e?.length;return o<=9?36:o>=10&&o<12?32:o===12?30:o>=13&&o<=15?24:o>=16&&o<=18?20:o>=19&&o<=24?16:12},Vo=({address:e,coins:o,baseCoinId:t})=>{if(Array.isArray(o))return o.find(s=>s?.baseCoinId===t&&Gt(s?.address,e,{baseCoinId:t})||Vo({address:e,baseCoinId:t,coins:s?.childrenCoin}))},An=({txTypeInfo:e,walletAccount:o,approve:t,baseCoin:s,onAuthTokenAmountChange:n,updateApproveInfo:_})=>{let{walletId:c}=o,{tokenInfo:u,id:m,amount:p,authQuantity:f}=t||{},{autoEdit:l,defaultAmount:y,warnTip:d}=f||{},{address:F,decimals:T,symbol:w}=u,E=To(w,12),[b,x]=(0,g.useState)(!1),[C,D]=(0,g.useState)(!1),[P,G]=(0,g.useState)(0),O=(0,pe.useMemoizedFn)((B=p)=>{D(Ke(B)),G(fo(B,T)),x(!0)}),Y=(0,g.useMemo)(()=>d?{type:S.info,text:d}:C&&!Ke(y)?{type:S.danger,text:a("wallet_extension_approve_alert_high_risk_unlimited")}:!C&&j.eq(P||0,0)?{type:S.info,text:a("wallet_extension_approve_cannot_zero")}:null,[d,C,y,P]),{chainId:z}=s||{},{coinId:V}=xe(void 0,void 0,{chainId:z,address:F})||{},U=Se(V,c)?.coinAmount,J=j.thousandFormat(U),q=(0,pe.useMemoizedFn)(()=>{D(!1),G(U)}),te=(0,g.useMemo)(()=>!(C||j.gt(`${P||0}`,0)),[C,P]),k=(0,pe.useMemoizedFn)(()=>{let B=C?Pt:yo(P,T);n(B),_(m,{amount:B}),x(!1)}),H=Co(),ne=Vt({},c),he=(0,g.useMemo)(()=>ne?.find(B=>B.localType===s?.localType),[s?.localType,ne?.length]),le=(0,pe.useMemoizedFn)(async(B=0)=>{if(!Vo({address:F,coins:H,baseCoinId:s?.coinId}))try{let ae=await Mt({contractAddress:F,chainInfo:he});await Dt(ae)}catch(ae){++B<3?le(B):gt.error({title:ae?.msg||a("wallet_home_toast_network_error")})}});return(0,pe.useMount)(()=>{l&&O(y),le()}),g.default.createElement(h.Box,{className:S.root},g.default.createElement(h.Box,{className:S.icon,onClick:()=>{O()}},g.default.createElement(ft,{className:"okx-wallet-plugin-draw-20"})),g.default.createElement(X.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:b},g.default.createElement(h.Box,{className:S.editApproveAmountModal},g.default.createElement(h.Box,{className:S.content},g.default.createElement(ho,{bordered:!1,txTypeInfo:e,className:S.txTypeInfo}),g.default.createElement(h.Box,{className:S.editArea},C?g.default.createElement(W.Text,{className:S.unlimitedText},a("wallet_extension_transfer_title_unlimited_amount",{token:g.default.createElement(W.Text,{className:S.unlimitedSymbol},E)})):g.default.createElement(Xt,{symbol:E,autoSize:In,placeholder:"0",max:Yo,decimals:T,value:P,onChange:B=>{lt(B,Yo)&&G(B)},style:{fontWeight:700,height:"42px"},symbolClassName:S.symbolClassName})),g.default.createElement(h.Box,{className:S.quickHandler},!!Number(U)&&g.default.createElement(h.Box,{className:S.balanceWrap},g.default.createElement(W.Text,{className:S.balance,ellipsis:{tooltip:J}},a("wallet_extension_approve_label_balance",{amount:J})),g.default.createElement(h.Box,{className:S.maxBalance,onClick:q},a("commonall_enterfield_btn_max"))),g.default.createElement(h.Box,{onClick:()=>{D(B=>!B),G(0)},className:S.unlimited},g.default.createElement(h.Box,{className:S.text},a("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),g.default.createElement(vt,{checked:C}))),!!Y&&g.default.createElement(h.Box,{className:(0,Zo.default)(S.authQuantityWarnTip,Y.type)},Y.text)),g.default.createElement(h.Box,{className:S.approveTip},a("wallet_extension_approve_desc_dapp_right")),g.default.createElement(Ht,{affixStyle:{position:"none"},placeholder:!1,className:S.footerActions},g.default.createElement(I,{block:!0,disabled:te,category:I.CATEGORY.fill,type:I.TYPE.primary,size:I.SIZE.lg,onClick:k},a("wallet_extension_approve_btn_amount_confirmation"))))))},qo=An;i();r();var Oe=A(Q()),Qo=A(ye());Ye();qe();_t();un();fe();mn();var Pn=({coinId:e,txType:o,txParams:t,isMev:s,mevInfo:n,localType:_,modifiedData:c,walletAccount:u,customGasInfo:m,gasReturnActivity:p,modifiedDataError:f,isSufficientGas:l,isSufficientBalance:y,baseCoinBalanceInt:d,reportGasReturnActivityDataInConfirm:F,canConfirm:T,silentLoading:w,onCancel:E,onConfirm:b,onConfirmReplace:x})=>{let{walletId:C}=u||{},D=Po(),{networkFee:P,gasType:G,gasPrice:O}=m||{},Y=uo({coinId:e,walletId:C,localType:_,fromAddr:t?.from}),z=Rt({coinId:e,toAddr:t?.to,fromAddr:t?.from,txSource:It.DAPP,coinAmount:(Pe(t?.value)?Z(t?.value):t?.value)||0,serviceCharge:P,inputData:c,mev:s?n?.name:"",activityId:p?.activityId}),V=(0,Oe.useMemo)(()=>m?.isNetworkFeeLoading||Be(m,o)||ge(d)||f||w||T===!1||!l||!y,[w,m,o,d,f,T,l,y]),U=(0,Qo.useMemoizedFn)(async()=>{if(x&&typeof b=="function")return b({isMev:s,coinId:e,mevInfo:n,txParams:t,customGasInfo:m,modifiedData:c,gasReturnActivity:p,reportGasReturnActivityDataInConfirm:F});let{nonce:q,updateGasInfo:te}=await D({to:t?.to,from:t?.from,coinId:e,gasPrice:O,userGasInfo:m,amount:Z(t?.value)||0,baseCoinAmountUse:Z(t?.value||0)});F();let k={...t,...m,...te||{},nonce:q,data:c};try{let H=await Y(k),ne=await jt(pt,H);return await z(H,{txHash:ne,extJson:JSON.stringify({to:k?.to,gasType:G,from:k?.from,value:Pe(k?.value)?Z(k?.value):k?.value,nonce:Pe(k?.nonce)?Z(k?.nonce):k?.nonce,data:k?.data,gas:k?.gasLimit,oldTxHash:"",gasPrice:k?.supportEip1559?k?.maxFeePerGas:k?.gasPrice,repeatTxType:Ft.CONFIRMING,priorityFee:k?.supportEip1559?k.maxPriorityFeePerGas:0})}),b?.({txHash:ne})}catch(H){return b?.({error:H})}}),J=(0,Oe.useMemo)(()=>({disabled:V,actionType:Xe.ACTION_TYPE.CONFIRM,onClick:U}),[V,U]);return(0,Oe.useMemo)(()=>[{onClick:E,actionType:Xe.ACTION_TYPE.CANCEL},J],[J,E])},jo=Pn;i();r();var He=A(Q());oe();fe();var kn=e=>{let[o,t]=(0,He.useState)({isNetworkFeeLoading:!0,gasLimit:"0",gasPrice:"0",maxFeePerGas:"0",maxPriorityFeePerGas:"0",supportEip1559:!1,gasType:K.STANDARD}),{gasLimitInfo:s={},gasLimit:n,gasPrice:_,maxFeePerGas:c,gasType:u,supportEip1559:m,customConfirmed:p,isGasLimitLoading:f,isNetworkFeeLoading:l,networkFee:y,maxPriorityFeePerGas:d,gasPriceInfo:F,extFee:T}=o,{minGasFee:w}=to({gasLimit:n,gasPrice:_,maxPriorityFeePerGas:d,maxFeePerGas:c,supportEip1559:m,extFee:T,gasPriceInfo:F,gasLimitInfo:s,gasType:u}),E=(0,He.useMemo)(()=>u===K.CUSTOM&&!p?a("extension_send_mid_text_dapps_suggested_fee"):u||K.STANDARD,[p,u]),b=Be(o,e),x=l&&f&&!s?.gasLimit;return{level:E,estimateFailed:b,customGasInfo:o,loading:l,networkFee:x?void 0:w,maxNetworkFee:x?void 0:y,onCustomGasInfoChange:t}},Jo=kn;i();r();var Te=A(Q());ln();fe();Ae();var Ln=({txType:e,walletId:o,coinId:t,txParams:s,customGasInfo:n,preExecuteLoading:_})=>{let[c,u]=(0,Te.useState)(""),m=xe(t),{from:p,to:f}=s||{},[l,y]=(0,Te.useState)("");(0,Te.useEffect)(()=>{_||(Re(e)||xo(e)?(u($e.approval),y(Re(e)?"approve":"revoke_approve")):(u($e.dapp),y("Contract interaction")))},[_,e]);let d=Qt({walletId:o,coinId:t,fromAddress:p,toAddress:f,txType:c,fee:mt(n?.networkFee),disabled:!f,unavailable:n.gasType===K.CUSTOM&&n.customConfirmed}),{status:F,activity:T,activityId:w,tip:E,clear:b}=d,x=()=>{ct({activityId:w,activity:T,status:F,tip:E,walletId:o,address:p})},C=T?.errorCode;return(0,Te.useEffect)(()=>{!l||C===0&&Jt({wallet_address:p,interactive_address:f,chain_id:m?.chainId,transaction_type:l})},[C,l,p,f,m?.chainId]),{gasReturnActivity:d,clearGasReturnInfo:b,reportGasReturnActivityDataInConfirm:x}},Ko=Ln;i();r();qe();fe();Ae();var Sn=e=>{let{txParams:o={}}=e,{gasPrice:t,maxFeePerGas:s,maxPriorityFeePerGas:n}=o,_=o.gas||o.gasLimit,c=K.STANDARD,u,m,p,f=Z(_),l=Z(t),y=Z(s),d=Z(n);return _e(l,0)&&(c=K.CUSTOM,u=l),_e(y,0)&&_e(d,0)&&_e(y,d)&&(c=K.CUSTOM,m=y,p=d),_e(f,0)&&(c=K.CUSTOM),!o.to&&o.data&&(c=K.CUSTOM),{initialGasType:c,initialCustomMaxPriorityFee:p,initialCustomGasLimit:f,initialCustomGasPrice:u,initialCustomMaxBaseFee:Ie(m,p)}},$o=Sn;i();r();var We={"data-input":"_data-input_dry9a_1",dataInput:"_data-input_dry9a_1","data-input-error-tip":"_data-input-error-tip_dry9a_5",dataInputErrorTip:"_data-input-error-tip_dry9a_5","mev-status__wrap":"_mev-status__wrap_dry9a_10",mevStatusWrap:"_mev-status__wrap_dry9a_10"};var Bn=e=>Number(e)===ke.INCREASE_ALLOWANCE?Uo:[],Gn=e=>{let{txId:o,chainId:t,walletId:s,txParams:n,dappInfo:_={},needMev:c=!1,openMev:u=!1,coinId:m,isShowBlockSwapMevTooltip:p,onMevChange:f,onConfirm:l,onConfirmReplace:y,onCancel:d}=e||{},[F,T]=(0,ue.useSetState)({mevInfo:{},isMev:u}),[w,{toggle:E}]=(0,ue.useBoolean)(!1),{from:b,to:x,value:C="0x0",data:D}=n||{},[P,G]=(0,M.useState)(""),O=xe(m,void 0,{chainId:t}),Y=O?.coinId,[z,V]=(0,M.useState)({}),U=z.loading,J=(0,M.useMemo)(()=>!x&&D?$t.DEPLOY_CONTRACT:z?.approveInfoList?.[0]?.spender?.approvalType||"",[x,D,z]),q=zt(O?.localType,s),te=Z(C),H=Se(Y,q?.walletId)?.coinAmountInt||0,ne=$o({txParams:n}),he=_o(q.walletId),le=(0,M.useMemo)(()=>zo(P),[P]),{isMev:B,mevInfo:Fe}=F,ae=P||D||"",Xo=(0,M.useMemo)(()=>({dappData:JSON.stringify({to:x,from:b,value:C,data:ae}),from:b,dappInfo:_,chainIndex:O?.chainId,method:Nt.SIGN_TRANSACTION}),[O?.chainId,b,ae,x,C]),Ro=(0,ue.useMemoizedFn)((ie,de)=>{T({isMev:ie,mevInfo:de}),f?.(ie,de)}),{level:en,networkFee:tn,maxNetworkFee:Ee,customGasInfo:tt,estimateFailed:ot,loading:on,onCustomGasInfoChange:nn}=Jo(J),{gasReturnActivity:nt,reportGasReturnActivityDataInConfirm:an}=Ko({txType:J,coinId:Y,txParams:n,customGasInfo:tt,preExecuteLoading:U,walletId:q.walletId}),at=(0,M.useMemo)(()=>(ge(H)||j.gte(H,Ee))&&z?.needFillUp!==!0,[H,Ee,z?.needFillUp]),it=(0,M.useMemo)(()=>!j.eq(te,0)&&!ge(H)?j.lte(te,j.sub(H,Ee)):!0,[H,Ee,te]),rn=jo({coinId:Y,txType:J,txParams:n,isMev:B,mevInfo:Fe,canConfirm:z?.canConfirm,silentLoading:z?.silentLoading,isSufficientGas:at,isSufficientBalance:it,walletAccount:q,customGasInfo:tt,gasReturnActivity:nt,modifiedDataError:le,localType:O?.localType,modifiedData:ae,walletId:q?.walletId,baseCoinBalanceInt:H,reportGasReturnActivityDataInConfirm:an,onCancel:d,onConfirm:l,onConfirmReplace:y}),sn=(0,ue.useMemoizedFn)(ie=>{let de=Bn(J),Ne=At(n?.data,de);if(Ne){let ze=vo(n?.data,{approveAmount:ie},Ne);G(ze)}});return M.default.createElement(M.default.Fragment,null,M.default.createElement(go,{handleCancel:d,preExecParams:Xo,walletAccount:q,buttonGroup:rn,onUpdatePreExecInfo:V,txState:{txId:o,baseCoin:O,estimateFailed:ot,isSufficientBalance:it,isSufficientGas:at},slot:{mev:!!c&&M.default.createElement(Ho,{isMev:B,needTooltip:!1,className:We["mev-status__wrap"],chainId:O?.chainId,onMevChange:Ro,isShowBlockSwapMevTooltip:p}),networkFeeEntry:M.default.createElement(io,{level:en,coinId:Y,networkFee:tn,loading:on,estimateFailed:ot,onClick:()=>{E(),he({trade:"contract_interaction",all_confirmation:"network_fee"})}}),interactWith:!!x&&M.default.createElement(ro,{address:x,title:a("wallet_extension_popup_text_interact_with")}),advancedEntry:!D&&M.default.createElement(Wo,{value:P,error:le,onChange:G,className:We["data-input"],errorTipClass:We["data-input-error-tip"]})},renderEditApproveAmount:(ie,de)=>{let Ne=ie?.authQuantity?.canEdit,ze=ie?.spender?.approvalType;return[ke.INCREASE_ALLOWANCE,ke.AUTHORIZATION].includes(ze)&&Ne?M.default.createElement(qo,{txTypeInfo:z?.txTypeInfo,walletAccount:q,approve:ie,baseCoin:O,onAuthTokenAmountChange:sn,updateApproveInfo:de}):null}}),M.default.createElement(oo,{visible:w,coinId:Y,address:b,inputData:ae,tokenAddress:x,value:Z(C),onBack:E,onClose:null,initialGasData:ne,onGasChange:nn,minimumGasLimit:B?Fe.gas:0,isMev:B,mevInfo:Fe,gasReturn:nt,gasLimitOptions:{disabled:le}}))},js=Gn;export{Po as a,Wo as b,zo as c,Ho as d,js as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-5TIJ4M5X.js.map
