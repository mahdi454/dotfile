import{a as I,b as S}from"./chunk-7VNATZE7.js";import{a as H}from"./chunk-ABRHAPNW.js";import"./chunk-NWUTPD36.js";import"./chunk-UJ7MX4VL.js";import{a as _}from"./chunk-4I336HK5.js";import{a as y,b as P}from"./chunk-L2NVTMS2.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import"./chunk-O3R53BBL.js";import"./chunk-H4XP2LWR.js";import{a as x}from"./chunk-JTGFDHLS.js";import"./chunk-PMGQLREC.js";import"./chunk-RK4XZYBE.js";import"./chunk-HXUMX2S7.js";import{d as l,f as E}from"./chunk-R4G6BEPF.js";import{a as w}from"./chunk-AYCAVTPT.js";import"./chunk-CYOQISC6.js";import"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{Fa as c,Jb as O,Vb as D}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{H as g}from"./chunk-LDKM7IQF.js";import"./chunk-6O63U2D6.js";import{M,x as T}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import"./chunk-O337TVCZ.js";import"./chunk-EJP3AYQB.js";import"./chunk-TZ33IXYR.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f,m as u,o as d}from"./chunk-GLD6H5Q5.js";u();d();var v=f(H()),m=f(I()),o=f(D());M();E();O();var h=class extends S{async signTransaction(a,t,e){let p=a.hdPathMap[c];t=x(t);let r=await y(t),{payload:s,success:n}=await m.default.ethereumSignTransaction({path:p,transaction:{...r.toJSON(),to:(0,o.bufferToHex)(r.to).toString(),chainId:t.chainId}});if(n){globalThis.platform.focusCurrentWindow();let i=await P(r,{...s});return _(i,t.from)?e?i:{rawTxResult:i}:this.throwInvalidPassPhraseTip()}return this.throwTxCancelTip()}async signPersonalMessage(a,t={}){let e=a.hdPathMap[c],{data:p=""}=t||{},{success:r,payload:s}=await m.default.ethereumSignMessage({path:e,message:(0,o.stripHexPrefix)(p),hex:!0});if(r){globalThis.platform.focusCurrentWindow();let{signature:n=""}=s||{};return(0,o.addHexPrefix)(n)}return this.throwTxCancelTip()}async signTypedData(a,t={}){let e=a.hdPathMap[c];if(!(t.version==="V4"))throw new Error("Trezor: Only version 4 of typed data signing is supported");let r=JSON.parse(t.data),{domain_separator_hash:s,message_hash:n}=(0,v.default)(r,!0),{success:i,payload:C}=await m.default.ethereumSignTypedData({path:e,data:r,metamask_v4_compat:!0,domain_separator_hash:s,message_hash:n});return i?(l().focusLastOkPopupWithCache(),C?.signature):this.throwTxCancelTip()}throwInvalidPassPhraseTip(){throw g.error(T("wallet_extension_transaction_toast_trezor")),new Error(w)}},j=new h;export{j as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ethAdapter-K4RR7AFW.js.map
