import{a as R,b as P,d as fe,f as de,k as Te,l as ge,m as _e}from"./chunk-J5JIFWF4.js";import{a as pe}from"./chunk-4AGVCDBO.js";import{a as le}from"./chunk-TC3YAW4K.js";import{a as re,b as ie,c as at,d as ce}from"./chunk-2YRNNTO4.js";import{a as se}from"./chunk-EZ5WRJOA.js";import{a as ne,d as A}from"./chunk-UAHUXCQX.js";import{d as me}from"./chunk-UBFVE3Q4.js";import{a as ae}from"./chunk-STMKIE2Z.js";import{a as jt,c as Jt}from"./chunk-MFN67L7C.js";import{a as oe}from"./chunk-NIVBOS5R.js";import{a as Pe}from"./chunk-C4AEIBFI.js";import{b as ue}from"./chunk-5EAA4KU7.js";import{a as zt,b as gt}from"./chunk-ONV3ODOM.js";import{a as Qt}from"./chunk-ZI4ZHHA3.js";import{a as Zt,f as $t}from"./chunk-IRMGOW5H.js";import{d as nt,o as Xt,q as te}from"./chunk-UXLFUD7T.js";import{a as G}from"./chunk-DLRFA5AU.js";import{b as Tt}from"./chunk-UI7PAU35.js";import{a as _t,j as ee}from"./chunk-GSYNHSX4.js";import{b as st}from"./chunk-Y6SGFHFT.js";import{Q as Vt}from"./chunk-S5DGV5WL.js";import{X as et}from"./chunk-VPDRXROE.js";import{T as X,ba as Ht,da as Mt,na as Kt,ra as Yt,w as Q,wa as qt,xa as Wt}from"./chunk-JLIPSIRU.js";import{a as Ve}from"./chunk-VX55KNI4.js";import{i as W,m as Bt}from"./chunk-4TYAYDA2.js";import{n as q,ta as Ut}from"./chunk-VGT27A4M.js";import{d as S,f as dt}from"./chunk-R4G6BEPF.js";import{a as ot}from"./chunk-AYCAVTPT.js";import{D as b,Fa as Ft,Ga as Gt,Jb as kt,L as It,P as St,V as Lt,Vb as qe,X as pt,Xb as Y,Yb as F,Zb as ft,a as ht,aa as Dt,ac as bt,b as Ke,dc as We,ea as Ye,z as Ot}from"./chunk-YT2MPR4E.js";import{G as U}from"./chunk-LDKM7IQF.js";import{F as lt,K as vt,U as Rt,f as J,pa as wt}from"./chunk-6O63U2D6.js";import{M as Ct,x as I}from"./chunk-RIOWPXBZ.js";import{a as j}from"./chunk-O337TVCZ.js";import{f as v,m as d,o as T}from"./chunk-GLD6H5Q5.js";d();T();var V=v(Q());function po(){let t=(0,V.useSelector)($t),e=t&&t.metadata?t.metadata.id:null,s=e?1:0,o=(0,V.useSelector)(Mt),n=o.length,a=(0,V.useSelector)(Ht),i=(0,V.useSelector)(Wt),c=i.length,r=(0,V.useSelector)(qt),m=r.length;return{unapprovedTxList:o,unapprovedTxCount:n,unapprovedSmCount:a,unapprovedStList:i,unapprovedStCount:c,unapprovedPermissionCount:s,unapprovedPermissionsRequestId:e,unapprovedSnList:r,unapprovedSnCount:m,unapprovedRequestCount:n+a+c+m+s}}d();T();d();T();var _=v(j()),Nt=v(Q()),Ge=v(Ve());Ct();d();T();var rt=v(Q()),B=v(et()),H=v(qe());wt();Ke();dt();ft();Ye();Ut();kt();d();T();dt();var Ee=async t=>await S().rpcEvmAddTransaction(t),Pt=async t=>await S().rpcEvmUpdateTransaction(t),Ae=async t=>await S().rpcEvmConfirmTransaction(t),xe=async t=>await S().rpcEvmFindTransaction(t),ye=async(t,e)=>await S().rpcEvmPublishTransaction(t,e);d();T();var Ne=v(j());Ct();var Be=()=>{let t=Te();return e=>{if(e){let{type:s,status:o,txHash:n,extraParams:a}=e,i={[P.TRANS_OUT]:{key:"wallet_transfer_notif_send_success",params:{first:a?.value,second:a?.coinSymbol}},[P.CONTRACT_CALL]:{key:"wallet_transfer_notif_contract_interaction_success"},[P.AUTHORIZATION]:{key:"wallet_transfer_notif_approval_success",params:{first:a?.coinSymbol}},[P.CANCEL_AUTHORIZATION]:{key:"wallet_transfer_notif_cancel_approval_success",params:{first:a?.coinSymbol}},[P.CONTRACT_DEPLOY]:{key:"developer_mode_dapp_toast_deployed_successfully"}},c={[P.TRANS_OUT]:{key:"wallet_transfer_notif_send_fail",params:{first:a?.value,second:a?.coinSymbol}},[P.CONTRACT_CALL]:{key:"wallet_transfer_notif_contract_interaction_fail"},[P.AUTHORIZATION]:{key:"wallet_transfer_notif_approval_fail",params:{first:a?.coinSymbol}},[P.CANCEL_AUTHORIZATION]:{key:"wallet_transfer_notif_cancel_approval_fail",params:{first:a?.coinSymbol}},[P.CONTRACT_DEPLOY]:{key:"developer_mode_dapp_toast_deployfailed"}},r,m,p,u,f;o===R.PENDING?(r=U.TYPE.success,s===P.CANCEL_AUTHORIZATION?(m="wallet_transfer_notif_cancel_approval_submit",p={first:a?.coinSymbol}):m="wallet_transfer_notif_transaction_submit"):(o===R.SUCCEED?(r=U.TYPE.success,m=i[s]?.key,p=i[s]?.params):(r=U.TYPE.error,m=c[s]?.key,p=c[s]?.params),o!==R.DROPPED&&(u=t(n),f="wallet_transfer_notif_view_on_explorer")),U[r]({title:I(m,p)||m,desc:u?Ne.default.createElement(oe,{url:u,urlText:I(f)}):null,duration:3})}}},he=Be;function Ze(t){let e={to:t.to,value:(0,H.addHexPrefix)(F(t.value)),gasLimit:(0,H.addHexPrefix)(F(t.gasLimit)),nonce:(0,H.addHexPrefix)(F(t.nonce))};return t.type===q.FEE_MARKET?(e.maxFeePerGas=(0,H.addHexPrefix)(F(t.maxFeePerGas)),e.maxPriorityFeePerGas=(0,H.addHexPrefix)(F(t.maxPriorityFeePerGas)),e.type=t.type):(e.gasPrice=(0,H.addHexPrefix)(F(t.gasPrice)),t.type=q.LEGACY),t.data&&(e.data=t.data),e}function At(t){let{extensionConfig:e}=G("rpc_info"),s=t||e,o=st();return(0,B.useMemoizedFn)(n=>{let{type:a,txParams:i,extraParams:c}=n,r=a;return r||(i.to?r=P.CONTRACT_CALL:r=P.CONTRACT_DEPLOY),{id:Dt(),type:r,txParams:{...Ze(i),from:i.from||o,chainId:s.chainId},status:R.UNAPPROVED,createTime:+new Date,txPool:[],isCanceling:!1,isSpeeding:!1,extraParams:c||{}}})}function xt(t){let e=he(),s=(0,rt.useSelector)(Yt),o=_t();return(0,B.useMemoizedFn)(async(n,{walletId:a=o,signedCallback:i=J}={})=>{if(!n)throw new Error("tx meta error");let c;if(n.txParams.result)c=n.txParams.result;else{let{from:m}=n.txParams;c=await S().signRpcEvmTransaction(n.txParams,m,s,a)}let r=await ne(Ft,c);return await i({rawTx:c,txHash:r,status:R.PENDING}),new Promise((m,p)=>{ye({txId:n.id,rawTx:c},t).then(({error:u,data:f,tx:l})=>{if(u){(l?.status===R.PENDING||l?.status===R.DROPPED)&&e(l),p(u);let{type:x,txParams:y,extraParams:h}=n,{from:C,to:N,value:O,gasLimit:g,gasPrice:E,nonce:L,chainId:D}=y||{},{approvedAmount:z,coinSymbol:K,tokenAddress:it,approvedAddress:ct,value:mt,toAddress:ut}=h||{};ht.captureEvent({tags:{address:C},message:"API_ERROR_evm_rpc_send_tx",contexts:{report:{info:JSON.stringify({type:x,txParams:{from:C,to:N,value:O,gasLimit:g,gasPrice:E,nonce:L,chainId:D},extraParams:Rt({approvedAmount:z,coinSymbol:K,tokenAddress:it,approvedAddress:ct,value:mt,toAddress:ut},vt)})}},exception:{values:[{type:"API_ERROR_evm_rpc_send_tx",value:u?.message}]},level:"info"})}else e(l),m({id:n.id,txHash:f.result})}).catch(async u=>{await Ae({txId:n.id,tx:{status:R.DROPPED,finishTime:+new Date,errorMessage:u?.message},checkPoolEmpty:!0}),p(u)})})})}var yt=()=>{let t=(0,rt.useDispatch)(),e=_t();return async(s,o=e)=>{await t(Qt({walletId:o,txParams:s.txParams,isRpcMode:!0}));let{id:n}=s,a=await xe(n);if(a&&(a.status===R.SUCCEED||a.status===R.DROPPED||a.status===R.DROPPED))throw Error(ot)}};function Ce(t){let e=At(t),s=xt(t),o=yt();return(0,B.useMemoizedFn)(async(n,a,i)=>{if(!await ae({walletId:a}))return J;let r=e(n);return await o(r,a),s(r,{walletId:a,signedCallback:m=>{let p={...r,...m};try{i&&i(p)}catch(u){console.log(u)}return Ee(p)}})})}function zo(){let t=At(),e=xt(),s=yt();return(0,B.useMemoizedFn)(async(o,n)=>{let{type:a,txParams:i,extraParams:c}=o,r=t({type:a,txParams:{...i,...n},extraParams:c}),{id:m,txPool:p}=o;return o.id=r.id,r.id=m,o.txPool=[],await s(r),e(r,{signedCallback:u=>Pt({txId:m,tx:{...r,status:R.PENDING,isSpeeding:!0,txPool:[o,...p],...u}})})})}function jo(){let t=Xt(!0),e=At(),s=xt(),o=yt();return(0,B.useMemoizedFn)(async(n,a)=>{let{txParams:i,extraParams:c}=n,{from:r,nonce:m,type:p,chainId:u}=i,f=t.find(({address:h})=>!h),l=e({type:P.TRANS_OUT,txParams:{to:r,value:"0x0",nonce:m,chainId:u,type:p,...a},extraParams:c}),{id:x,txPool:y}=n;return n.id=l.id,l.id=x,n.txPool=[],await o(l),s(l,{signedCallback:h=>Pt({txId:x,tx:{...l,status:R.PENDING,isCanceling:!0,txPool:[n,...y],extraParams:{toAddress:r,tokenAddress:"",coinSymbol:f?.symbol,value:"0"},...h}})})})}ft();d();T();var Z=v(j()),ve=v(Q()),tt=v(et());We();function $e(t){let e=t.map(o=>{let{nonce:n}=o.txParams;return parseInt(n,16)}),s=Math.max.apply(null,e);return Number.isInteger(s)?s+1:0}function Re(t,e){let s=nt(void 0,e),o=st(),n=t||o,a=(0,ve.useSelector)(ue),i=(0,tt.useLatest)(fe(e)),c=(0,tt.useLatest)(de(void 0,e)),[r,m]=(0,Z.useState)(!1),[p,u]=(0,Z.useState)(null),[f,l]=(0,Z.useState)(null),x=(0,tt.useMemoizedFn)(async()=>{let y;try{m(!0),y=await(await s()).eth.getTransactionCount(n,"latest")}finally{m(!1)}let h=$e(i.current),C=Math.max(y,h),N=c.current.map(g=>{let{nonce:E}=g.txParams;return bt(E)}),O=C;for(;N.includes(O);)O+=1;return u(y),l(O),{nonce:y,suggestedNonce:O}});return(0,Z.useEffect)(()=>{(async()=>(await s())?.eth&&x())()},[s,n,a]),{loadingNonce:r,nonce:p,suggestedNonce:f,request:x}}Ut();pt();d();T();d();T();var $=v(j()),we=v(et());pt();var ze=({txParams:t={},dappInjectedGasInfo:e={}},s)=>{let{to:o,from:n,value:a,data:i,tokenAddress:c}=t,[r,m]=(0,$.useState)(""),[p,u]=(0,$.useState)(!0),[f,l]=(0,$.useState)(!1),{extensionConfig:x}=G("rpc_info"),h=ge((s||x)?.rpcUrl),{run:C}=(0,we.useDebounceFn)(async()=>{try{u(!0);let N=await h({to:o,from:n,value:a,data:i},c);m(N),l(!1)}catch{l(!0)}finally{u(!1)}},{wait:500});return(0,$.useEffect)(()=>{b(e.gasLimit,0)?(m(e.gasLimit),u(!1)):C()},[o,n,a,i,c,e.gasLimit]),{chainGasLimit:r,chainGasLimitLoading:p,chainGasLimitLoadFailed:f}},Oe=ze;d();T();var M=v(j());wt();pt();var Ie=v(et()),je=({dappInjectedGasInfo:t={}},e)=>{let[s,o]=(0,M.useState)({}),[n,a]=(0,M.useState)(!0),[i,c]=(0,M.useState)(!1),{extensionConfig:r}=G("rpc_info"),m=e||r,{rpcUrl:p,chainId:u}=m,f=se(u),l=_e(p),x=7e3,y=(0,M.useRef)(),h=(0,M.useRef)(!0),C=()=>{h.current=null,clearTimeout(y.current)},N=g=>{if(lt(t))o(g);else{let{gasPrice:E,maxFeePerGas:L,maxPriorityFeePerGas:D}=t,{isSupportEip1559:z}=g;if(z){delete g.gasPrice;let K=Ot(L,D);b(L,0)&&b(K,0)&&b(D,0)?(o({...g,maxFeePerGas:L,baseFeePerGas:K,maxPriorityFeePerGas:D}),C()):o(g)}else delete g.maxFeePerGas,delete g.baseFeePerGas,delete g.maxPriorityFeePerGas,b(E,0)?(o({...g,gasPrice:E}),C()):o(g)}},O=async(g=!1)=>{try{g&&a(!0);let L=(await l(u)).find(({level:D})=>D===Pe.MEDIUM)||{};delete L.level,(g||h.current)&&(N(L),c(!1))}catch{g&&c(!0)}finally{a(!1),h.current&&(y.current=setTimeout(()=>{O()},x))}};return(0,Ie.useAsyncEffect)(async()=>{if(!m?.rpcUrl)return J;let g=await f();return lt(g)?O(!0):(o(g),a(!1)),()=>{C()}},[m?.rpcUrl]),{chainGasPrice:s,stopPollingGasPrice:C,chainGasPriceLoading:n,chainGasPriceLoadFailed:i}},Se=je;var Je=(t={},e={},s)=>{let{chainGasPrice:o,stopPollingGasPrice:n,chainGasPriceLoading:a,chainGasPriceLoadFailed:i}=Se({dappInjectedGasInfo:e},s),{chainGasLimit:c,chainGasLimitLoading:r,chainGasLimitLoadFailed:m}=Oe({txParams:t,dappInjectedGasInfo:e},s);return{chainGasPrice:o,chainGasLimit:c,chainGasLoading:a||r,chainGasLoadFailed:i||m,stopPollingGasPrice:n,chainGasPriceLoading:a,chainGasLimitLoading:r,chainGasPriceLoadFailed:i,chainGasLimitLoadFailed:m}},Le=Je;d();T();var De=async(t,e)=>{let s;try{s=await e.eth.getCode(t)}catch{s=null}return{isContractAddress:s&&s!=="0x"&&s!=="0x0"}};d();T();ft();function Fe(t,{customPermissionAmount:e,decimals:s}){let o=X(t);if(o){if(o.name!==A.TOKEN_METHOD_APPROVE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${o.name}'`)}else throw new Error("Invalid data");let n=at(o);n.startsWith("0x")&&(n=n.substring(2));let[a,i]=t.split(n);if(!a||!i)throw new Error("Invalid data");if(i.length!==64)throw new Error("Invalid token value; should be exactly 64 hex digits long (u256)");let c=F(ie(e,s));if(c.length>64)throw new Error("Custom value is larger than u256");return c=c.padStart(i.length,"0"),`${a}${n}${c}`}function Qe({data:t,to:e}){let s=nt(),[o,n]=(0,_.useState)(""),[a,i]=(0,_.useState)(!1);return(0,_.useEffect)(()=>{(async()=>{if(t&&!e){n(A.DEPLOY_CONTRACT);return}try{let u=X(t)?.name,f=[A.TOKEN_METHOD_APPROVE,A.TOKEN_METHOD_TRANSFER,A.TOKEN_METHOD_TRANSFER_FROM].find(l=>l.toLowerCase()===u.toLowerCase());if(f){n(f);return}}catch{}i(!0);let r=await s(),{isContractAddress:m}=await De(e,r);n(m?A.CONTRACT_INTERACTION:A.SENT_ETHER),i(!1)})()},[t,e,s]),[o,a]}function Xe({data:t,type:e}){let s,o,n,a;try{let i=X(t),c=ce(i);s=at(i),a=c,o=e===A.TOKEN_METHOD_APPROVE,n=o&&Number(a)===0}catch{}return{address:s,isApprove:o,isRevoke:n,amount:a}}function to(t,e){let s=te(void 0,e),[o,n]=(0,_.useState)({}),[a,i]=(0,_.useState)(!1),c=async()=>{try{i(!0);let{symbol:r,decimals:m}=await s(t);n({symbol:r,decimals:m}),i(!1)}catch{i(!1)}};return(0,_.useEffect)(()=>{t&&c()},[t]),[o,a]}function eo(t){let[s,o]=(0,_.useState)(-1),{isApprove:n,formattedAmount:a,decimals:i,symbol:c}=t;(0,_.useEffect)(()=>{n&&o(a)},[n,a]);let r=(0,_.useMemo)(()=>s>=1e13?I("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):`${Lt(St(s,i))}${c||""}`,[s,i,c,1e13]);return[{...t,customApproveAmount:s,approveAmountDisplay:r,INFINITY:1e13},o]}function oo({origin:t,isApprove:e,isRevoke:s,symbol:o,walletId:n}){let a=ee(n),i=(0,Nt.useSelector)(Kt),c=n?a:i,m=(0,Nt.useSelector)(Zt)[t]||{},[p,u]=(0,_.useState)({});return(0,_.useEffect)(()=>{let f=null,l=null,x=null;e?(f=null,l=o,x=s?I("wallet_approval_subtitle_revoke_approval_desc",{tokenSymbol:o}):I("wallet_dapp_conncetion_alert_approve_tip",{name:m.name,tokenSymbol:o})):(f=m.icon,x=m.host,l=m.name),u({icon:f,host:x,name:l})},[s,o]),{...p,originInfo:m,wallet:`${c.keyringName} - ${c.walletName}`}}function no(t,e){let{nonce:s,suggestedNonce:o}=Re(t,e),[n,a]=(0,_.useState)(0),[i,c]=(0,_.useState)(!0);return(0,_.useEffect)(()=>{a(o),c(!1)},[o]),[{suggested:s,custom:n,pending:i},a]}var so=({tx:t,nonce:e,txData:s,tokenInfo:o,chain:n,customGasInfo:a,approvedAmount:i,formattedAmount:c,txType:r})=>{let{from:m,to:p,value:u,data:f}=t,{isSupportEip1559:l,maxFeePerGas:x,maxPriorityFeePerGas:y,gasPrice:h,gasLimit:C}=a,N={from:m,to:p,value:u,gasLimit:C,nonce:e,data:f};l?(N.maxFeePerGas=x,N.maxPriorityFeePerGas=y,N.type=q.FEE_MARKET):(N.gasPrice=h,N.type=q.LEGACY);let g={[A.DEPLOY_CONTRACT]:P.CONTRACT_DEPLOY,[A.CONTRACT_INTERACTION]:P.CONTRACT_CALL,[A.TOKEN_METHOD_APPROVE]:P.AUTHORIZATION,[A.SENT_ETHER]:P.TRANS_OUT,[A.TOKEN_METHOD_TRANSFER]:P.TRANS_OUT,[A.TOKEN_METHOD_TRANSFER_FROM]:P.TRANS_OUT}[r]||P.CONTRACT_CALL;s.isRevoke&&(g=P.CANCEL_AUTHORIZATION);let E={};return r===A.TOKEN_METHOD_APPROVE&&(E.approvedAmount=i,E.coinSymbol=o.symbol,E.tokenAddress=p,E.approvedAddress=s.address),r===A.SENT_ETHER&&(E.value=It(Y(u)),E.toAddress=p,E.coinSymbol=n.symbol),(r===A.TOKEN_METHOD_TRANSFER||r===A.TOKEN_METHOD_TRANSFER_FROM)&&(E.value=c,E.tokenAddress=p,E.toAddress=s.address,E.coinSymbol=o.symbol),{type:g,txParams:N,extraParams:E}};function ao(t,e,s){let o=(0,Ge.useHistory)(),n=le(),a=pe(),i=Ce(s),[c,r]=(0,_.useState)(!1);return[{sign:async(u,f)=>{r(!0),i(t,u,f).then(async({txHash:l})=>{n({id:e,result:l}),o.push(Vt)}).catch(l=>{l.message!==ot&&U.error({title:l?.message}),n({id:e,error:l?.message||"Transaction failed"}),r(!1)}).finally(()=>{o.go(0)})},cancel:async()=>{await a({id:e}),o.go(0)}},c]}function us(t,e){let[s]=Qe(t),o=Xe({data:t.data,type:s}),[n,a]=to(t?.to,e),i=oo({walletId:t?.walletId,origin:t.origin,...o,...n}),c=(0,_.useMemo)(()=>re(o?.amount||0,n?.decimals),[o?.amount,n?.decimals]),[r,m]=eo({...o,...n,formattedAmount:c}),[p,u]=(0,_.useState)(t.data);(0,_.useEffect)(()=>{if(s===A.TOKEN_METHOD_APPROVE&&r.customApproveAmount>=0&&r.customApproveAmount<=r.INFINITY)try{let k=Fe(t.data,{customPermissionAmount:r.customApproveAmount,decimals:n?.decimals});u(k)}catch{}},[r.customApproveAmount,r.INFINITY,t.data,n?.decimals,o,s]);let f={...e,name:e?.name||e?.chainName},[l,x]=no(t.from,e),[y,h]=(0,_.useState)(null),[C,N]=(0,_.useState)({}),{chainGasPrice:O,chainGasLimit:g,chainGasLoading:E,chainGasLoadFailed:L,stopPollingGasPrice:D,chainGasLimitLoadFailed:z}=Le({to:t.to,from:t.from,value:t.value||"0x0",data:p},{gasLimit:Y(t.gas||t.gasLimit),gasPrice:Y(t.gasPrice),maxFeePerGas:Y(t.maxFeePerGas),maxPriorityFeePerGas:Y(t.maxPriorityFeePerGas)},e),K=k=>{h(Me=>({...Me,...k}))};(0,_.useEffect)(()=>{N(k=>({...k,...O}))},[O]),(0,_.useEffect)(()=>{N(k=>({...k,gasLimit:g}))},[g]);let it=so({tx:{...t,data:p},nonce:l.custom||l.suggested,txData:o,tokenInfo:n,chain:f,customGasInfo:y||C,approvedAmount:r.customApproveAmount,formattedAmount:c,txType:s}),[{sign:ct,cancel:mt},ut]=ao(it,t.id,e),He=(0,_.useMemo)(()=>{switch(s){case A.DEPLOY_CONTRACT:return I("developer_mode_history_title_contract_eployment");case A.TOKEN_METHOD_APPROVE:return o?.isRevoke?I("wallet_extension_popup_btn_revoke_approval"):I("wallet_extension_popup_btn_approve");default:return I("wallet_extension_popup_title_contract_interaction")}},[s,o?.isRevoke]);return[{type:s,title:He,auth:{...r,...n,formattedAmount:c},meta:i,chain:f,nonce:l,gas:{chainGasInfo:C,customGasInfo:y||C,chainGasLoading:E,chainGasLoadFailed:L,updateCustomGasInfo:K,stopPollingGasPrice:D,chainGasLimitLoadFailed:z},loading:{sign:ut,token:a},data:p},{sign:ct,cancel:mt,setNonce:x,setAuthAmount:m}]}d();T();var Ue=v(Q());d();T();Bt();dt();function ke(t,e,s){return async o=>{await S().resolvePendingApproval(t,e);let{pendingApprovals:n}=await W(o);Object.values(n).length===0&&!s&&o(gt())}}function be(t){return async e=>{await S().rejectPendingApproval(t);let{pendingApprovals:s}=await W(e);Object.values(s).length===0&&e(gt())}}Bt();kt();function ws(t){let e=(0,Ue.useDispatch)(),o=(r=>{let{id:m,origin:p,requestData:u,type:f,requestData:{chainId:l}}=r;return{id:m,origin:p,...u,requestData:u,chainIdToDisplay:parseInt(l,16),switchType:f,explorers:u.blockExplorerUrl}})(t),{addRpcNetwork:n}=me(),{setExtensionConfig:a}=G("rpc_info");return[o,{cancel:async()=>{await e(be(o.id)),await W(e)},approve:async()=>{let{rpcUrl:r,ticker:m,blockExplorerUrl:p,chainId:u,faucetUrl:f,chainName:l}=o,x=await n({chainId:u,explorerUrl:p,faucetUrl:f,name:l,rpcUrl:r,symbol:m}),{uniqueId:y}=x;await a(x),await e(Tt("isRpcMode",!0)),await e(Tt("currentNetworkUniqueId",y)),await e(zt(Gt,r,m,l,u,{},!0,y)),await e(ke(o.id,o.requestData)),await W(e)}}]}d();T();function Ds(t){return jt(t?.image)?t.image=t.image[0]:Jt(t?.image)&&(t.image=null),t}export{Ae as a,xe as b,he as c,Ce as d,zo as e,jo as f,Re as g,Le as h,Qe as i,Xe as j,to as k,so as l,us as m,ws as n,po as o,Ds as p};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-63F6WMW7.js.map
