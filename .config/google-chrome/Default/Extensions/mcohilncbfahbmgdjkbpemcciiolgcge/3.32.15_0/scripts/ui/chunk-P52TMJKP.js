import{a as Tt}from"./chunk-ZH5Z2RVX.js";import{f as xt}from"./chunk-P4KG7HC3.js";import{c as yt}from"./chunk-2YRNNTO4.js";import{a as ft,e as xe}from"./chunk-R5U3NPEX.js";import{d as fe,p as dt,q as Z}from"./chunk-UAHUXCQX.js";import{d as pt,g as ut}from"./chunk-J2H2J7IS.js";import{d as at}from"./chunk-4W35J5OQ.js";import{k as mt}from"./chunk-YC6W5MPL.js";import{a as Xt}from"./chunk-2VRILCVI.js";import{a as lt}from"./chunk-SMZ64QW3.js";import{c as ct,t as _t}from"./chunk-FF6KJRSH.js";import{a as me}from"./chunk-M2F2X65U.js";import{a as st}from"./chunk-ZYEEMVIP.js";import{b as Oe}from"./chunk-AOXUSYRH.js";import{l as Re,m as et,n as Me,q as g}from"./chunk-WKBC6JL3.js";import{a as Qt}from"./chunk-LMIOM5QK.js";import{X as le}from"./chunk-VPDRXROE.js";import{W as nt,Y as rt,m as qe}from"./chunk-JLIPSIRU.js";import{b as M,ga as tt,ha as ot,ta as Ie}from"./chunk-VGT27A4M.js";import{g as it,h as be}from"./chunk-OG46YTNN.js";import{c as o}from"./chunk-RXNDJ7P3.js";import{B as Ve,Mb as Ke,Ub as Jt,X as qt}from"./chunk-YT2MPR4E.js";import{A as ne,G as Xe,K as $,M as Ne,a as Qe,c as X,f as de,o as he}from"./chunk-LDKM7IQF.js";import{F as ce,K as $e,Q as Ze,e as Ye,f as ue,pa as ge}from"./chunk-6O63U2D6.js";import{M as se,l as J,x as _}from"./chunk-RIOWPXBZ.js";import{E as Je,T as Q,c as _e,ca as Y}from"./chunk-OSCGYMLH.js";import{a as v}from"./chunk-O337TVCZ.js";import{f as d,m as r,o as i}from"./chunk-GLD6H5Q5.js";r();i();var gt=d(Xt());Ie();qt();var Rt={[fe.TOKEN_METHOD_APPROVE]:{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},[fe.TOKEN_METHOD_INCREASE_ALLOWANCE]:{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}},vo=e=>[M.AUTHORIZATION,M.NFT_AUTHORIZATION,M.COMMON_APPROVE].includes(e),wo=e=>[M.CANCEL_AUTHORIZATION,M.NFT_CANCEL_AUTHORIZATION].includes(e),eo=({spender:e,value:t,type:n})=>!e||Ve(t,0)?"":gt.default.encodeMethod(Rt[n],[e,t]);function So(e,{approveAmount:t},n){if(n){if(n.name!==fe.TOKEN_METHOD_APPROVE&&n.name!==fe.TOKEN_METHOD_INCREASE_ALLOWANCE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${n.name}'`)}else throw new Error("Invalid data");let a=yt(n);return eo({spender:a,value:t,type:n.name})}var We=(e,t=24)=>e?.length>t?`${e.slice(0,t)}...`:e;r();i();var h=d(v()),He=d(le());ge();se();r();i();var I=d(v()),Nt=d(le()),It=d(_e());ge();se();r();i();Ie();var E={NORMAL:"NORMAL",FEE_ERROR:"FEE_ERROR",...ot,...tt},ht={[E.BALANCE_INSUFFICIENT]:"wallet_transfer_errortip_insufficient_balance",[E.FEE_ERROR]:"wallet_extension_alert_estimate_unavailable",[E.DEFRAUD]:"wallet_extension_protocol_toast_risk_warning_desc",[E.SIMILAR]:"wallet_extension_modaldesc_riskaddress"};r();i();var pe={"retina-border-basic":"_retina-border-basic_1itfd_1",retinaBorderBasic:"_retina-border-basic_1itfd_1",headerTip:"_headerTip_1itfd_29","tip-message-link":"_tip-message-link_1itfd_65",tipMessageLink:"_tip-message-link_1itfd_65",headerTipWarning:"_headerTipWarning_1itfd_68",headerTipMsg:"_headerTipMsg_1itfd_72",headerTipAction:"_headerTipAction_1itfd_77"};var to=({text:e,track:t})=>{let n=lt();return I.default.createElement(I.default.Fragment,null,e,I.default.createElement(de,{className:pe["tip-message-link"],type:de.TYPE.primary,weight:de.WEIGHT.muted,size:de.SIZE.xs,onClick:()=>{Ye(t)&&t(),setTimeout(()=>{globalThis.platform.openTab({url:n?.scamsUrl})},100)}},_("wallet_extension_scam_toast_link_view_scams")))},oo=({type:e,coinId:t,inherit:n,address:a,walletId:u,className:l,message:m,hidden:c,actions:p=[],renderActions:x,renderMessage:s,blockAddressInfo:y,supportGasStation:N=!0})=>{let[b,{toggle:k}]=(0,Nt.useBoolean)(!1),[U,re]=(0,I.useState)(t),[F,j]=ut(t),ie=F?.baseCoinId===0,B=(0,I.useMemo)(()=>{if(s&&typeof s=="function"){let z=s(e);if(z)return z}if(F?.symbol&&e===E.FEE_BALANCE_INSUFFICIENT)return _(ie?"wallet_extension_popup_adjust_add":"wallet_extension_popup_insufficient_network_fee",{token:j?.symbol,symbol:j?.symbol});if(F?.symbol&&e===E.BALANCE_INSUFFICIENT)return _("wallet_transfer_errortip_insufficient_balance",{chainSymbol:F?.symbol});if(m)return m;let P=ht[e];if([E.DEFRAUD,E.SIMILAR].includes(e)){let z=!!a&&qe(a),Se=e===E.DEFRAUD?y?.msg:_(P,{contractaddress:z});return I.default.createElement(to,{track:ct,text:Se})}return _(P,{chainSymbol:F?.symbol})},[s,F?.symbol,e,m,ie,j?.symbol,a,y?.msg]),te=(0,I.useMemo)(()=>x&&typeof x=="function"?x(e)||[]:p,[p,x]),ae=(0,I.useMemo)(()=>{let P=[];if([E.BALANCE_INSUFFICIENT,E.FEE_BALANCE_INSUFFICIENT].includes(e)&&N&&!n){let z=e===E.FEE_BALANCE_INSUFFICIENT?j?.symbol:F?.symbol;return P=[{btnText:_("wallet_extension_placeorder_textbtn_replenish",{token:z}),onClick:()=>{k(),re(e===E.FEE_BALANCE_INSUFFICIENT?j?.coinId:t)}}],[...P,...te]}return te},[n,e,N,te,j?.symbol,j?.coinId,F?.symbol,k,t]);return c||!B?null:I.default.createElement(I.default.Fragment,null,I.default.createElement(me,{offsetTop:0},I.default.createElement(o.FlexBox,{className:(0,It.default)(pe.headerTip,l),align:o.ALIGN.center},I.default.createElement(Q,{iconName:"okx-wallet-plugin-error",className:pe.headerTipWarning}),I.default.createElement(o.Box,null,I.default.createElement(g.Text,{block:!0,className:pe.headerTipMsg},B),!ce(ae)&&I.default.createElement(o.Space,{wrap:!0,space:12,style:{marginTop:"4px"}},ae.map(({btnText:P,onClick:z})=>I.default.createElement(g.Text,{strong:700,className:pe.headerTipAction,onClick:z},P)))))),N&&I.default.createElement(dt,{address:a,visible:b,walletId:u,coinId:U,closeCallback:k}))},bt=I.default.memo(oo);r();i();var L=d(v()),Bt=d(_e()),Et=d(Qt());se();r();i();var G={root:"_root_w4981_1",header:"_header_w4981_4",title:"_title_w4981_10",content:"_content_w4981_14",contractAddress:"_contractAddress_w4981_18",tabContent:"_tabContent_w4981_21",data:"_data_w4981_24",abi:"_abi_w4981_27",icon:"_icon_w4981_37",copyableText:"_copyableText_w4981_41"};var no=({children:e=null,advanced:t={},title:n=_("wallet_extension_transaction_tab_advanced"),tooltipZIndex:a})=>{let{data:u,contractList:l,methodName:m,methodParameter:c}=t,p=s=>{(0,Et.default)(s),Xe.success({title:_("wallet_receive_toast_address_copied")})},x=(0,L.useMemo)(()=>m&&c?JSON.stringify({[_("wallet_extension_transaction_tab_func")]:m,[_("wallet_extension_transaction_tab_params")]:c},null,2):"",[m,c]);return!u&&!e?null:L.default.createElement(Qe,{className:G.root,headerClassName:G.header,titleClass:G.title,contentClassName:G.content,customHeaderIcon:s=>L.default.createElement(Q,{className:(0,Bt.default)(G.icon,"okds-arrow-chevron-down-md",{"okui-accordion-header-icon-expanded":s})}),title:n},l?.length?l.map(s=>L.default.createElement(o.Box,{className:G.contractAddress},L.default.createElement(xe,{title:s.title,address:s.address}))):null,L.default.createElement(Ne.Underline,{size:Je.xs,noLine:!0,noPadding:!0,paneSpacing:24},L.default.createElement(Ne.TabPane,{tab:_("wallet_dapp_connection_subtitle_data_label"),id:"wallet_dapp_connection_subtitle_data_label"},L.default.createElement(o.Box,{className:G.tabContent},e||L.default.createElement(ne,{graspBaseDom:!0,title:_("wallet_receive_btn_copy_address"),type:ne.TYPES.neutral,trigger:ne.TRIGGER_TYPES.hover,zIndex:a},L.default.createElement(g.Text,{forceWrap:!0,onClick:()=>{p(u)},size:g.SIZE.sm,className:G.data},u)))),x?L.default.createElement(Ne.TabPane,{tab:_("wallet_extension_transaction_tab_abi"),id:"wallet_extension_transaction_tab_abi"},L.default.createElement(o.Box,{className:G.tabContent,onClick:()=>{p(x)}},L.default.createElement(ne,{noWrapper:!0,graspBaseDom:!0,title:_("wallet_receive_btn_copy_address"),type:ne.TYPES.neutral,trigger:ne.TRIGGER_TYPES.hover,zIndex:a},L.default.createElement("pre",{className:G.abi},x)))):null))},Lt=no;r();i();var O=d(v()),Ct=d(le()),At=d(_e());se();Ie();r();i();var Ee=d(v());Jt();r();i();var Be={root:"_root_195s5_1",image:"_image_195s5_7",text:"_text_195s5_13"};var ro=({imageUrl:e,text:t})=>Ee.default.createElement(o.Box,{className:Be.root},Ee.default.createElement(X,{src:e,className:Be.image,errorImg:Ke}),Ee.default.createElement(g.Text,{ellipsis:{tooltip:t},className:Be.text},t)),Le=ro;r();i();var H={root:"_root_1g5ne_1",approve:"_approve_1g5ne_1",token:"_token_1g5ne_4",amount:"_amount_1g5ne_10",amountWrap:"_amountWrap_1g5ne_15",number:"_number_1g5ne_18",symbol:"_symbol_1g5ne_19",expiration:"_expiration_1g5ne_31",foldSwitch:"_foldSwitch_1g5ne_37",fold:"_fold_1g5ne_37"};var io=({amount:e,decimals:t,isRpcMode:n})=>n?nt(e)?_("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):Me(e,{decimals:t}):rt(e)?_("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):Me(e,{decimals:t}),ao=e=>{e&&typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=12?28:t<=14?26:t>14&&t<=16?24:t>16&&t<=18?22:t>18&&t<=20?20:t>20&&t<=22?18:16},so=({approveInfoList:e,renderEditApproveAmount:t,updateApproveInfo:n,isRpcMode:a=!1})=>{let u=e.length>3,[l,{toggle:m}]=(0,Ct.useBoolean)(u),c=l?e.slice(0,3):e;if(e.length===1){let[p]=e,{tokenInfo:x,spender:s}=p,{symbol:y,imageUrl:N}=x||{},b=We(y,12);if([M.CANCEL_AUTHORIZATION,M.NFT_CANCEL_AUTHORIZATION,M.DECREASE_ALLOWANCE].includes(s?.approvalType))return O.default.createElement(Le,{imageUrl:N,text:b})}return O.default.createElement(o.Box,{className:H.root},c.map(p=>{let{amount:x,tokenInfo:s,expiration:y}=p,{decimals:N,symbol:b}=s||{},k=We(b,12),U=io({amount:x,decimals:N,isRpcMode:a});return O.default.createElement(o.Box,{className:H.approve},O.default.createElement(o.Box,{className:H.token},O.default.createElement(o.Box,{className:H.amount},O.default.createElement(g.AdaptiveText,{nowrap:!0,ellipsis:{tooltip:`${U} ${k}`},autoSize:ao,text:`${U}${k}`,className:H.amountWrap},O.default.createElement(g.Text,{inherit:!0,className:H.number},U),O.default.createElement(g.Text,{inherit:!0,className:H.symbol},k))),t(p,n)),y?O.default.createElement(o.Box,{className:H.expiration},_("wallet_extension_permitapproval_variable_days",{num:y})):null)}),u&&O.default.createElement(o.Box,{align:o.ALIGN.center,className:(0,At.default)(H.foldSwitch,{[H.fold]:l}),onClick:m},O.default.createElement(o.Box,null,_(l?"extension_defi_card_textbtn_view_all":"extension_defi_card_textbtn_view_less")),O.default.createElement(Q,{className:"okx-wallet-plugin-add-arrow-chevrons"})))},vt=so;r();i();var ve=d(v());r();i();var Ae=d(v()),kt=d(le());r();i();var C=d(v()),St=d(_e());se();r();i();var wt=e=>{e&&typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=12?28:t<=14?26:t>14&&t<=16?24:t>16&&t<=18?22:t>18&&t<=20?20:t>20&&t<=22?18:16};r();i();var R={singleChangeSummary:"_singleChangeSummary_163a5_1",cryptoWrap:"_cryptoWrap_163a5_4",cryptoNumber:"_cryptoNumber_163a5_9",cryptoSymbol:"_cryptoSymbol_163a5_15",currencyNumber:"_currencyNumber_163a5_20",coinLogo:"_coinLogo_163a5_26",singleChangeSummaryWithLogo:"_singleChangeSummaryWithLogo_163a5_30"};var lo=({coinId:e,injectCoin:t,currencyId:n,assetChange:a,justify:u="center",currencyAssetChange:l,withCoinLogo:m=!1,useMinPrecision:c=!0,needSwapCurrency:p=!1})=>{let x=pt(e,{withPrice:!0}),s=(0,C.useMemo)(()=>t||x,[x,t]),y=st(n),N=s?.usdPrice?J.mul(s?.usdPrice,y?.usdToThisRate):0,b=(0,C.useMemo)(()=>{let B;return a!==void 0&&!c&&(B=a),B===void 0&&a!==void 0&&s?.decimals!==void 0&&c&&(B=J.div(a,10**s?.decimals)),B===void 0&&l!==void 0&&N&&(B=J.div(l,N)),B},[a,l,N,s?.decimals,c]),k=(0,C.useMemo)(()=>{let B;return l!==void 0&&(B=J.mul(l,p?y?.usdToThisRate:1)),B===void 0&&b!==void 0&&(B=J.mul(b,N||0)),B===void 0&&J.lt(B,0)&&(B=J.mul(B,-1)),B},[N,b,p,l,y?.usdToThisRate]),U=(0,C.useMemo)(()=>b!==void 0?et(b,{validDigit:0,signDisplay:!0,precision:s?.orderDecimalNum||s?.decimals}):null,[s?.decimals,s?.orderDecimalNum,b]),re=(0,C.useMemo)(()=>k!==void 0?Re(k,{useApproximate:!1,symbol:y?.symbol}):null,[y?.symbol,k]),F=(0,C.useMemo)(()=>s?.image?{src:s?.image}:s?.symbol?{text:s?.symbol}:null,[s?.image,s?.symbol]),j=m?o.FlexBox:C.default.Fragment,ie=m?{align:o.ALIGN.center}:{};return C.default.createElement(j,{...ie},!!m&&!!F&&C.default.createElement(Oe,{...F,size:Oe.SIZE.lg,className:R.coinLogo}),C.default.createElement(o.FlexBox,{wrap:!0,justify:u,align:o.ALIGN.end,className:(0,St.default)(R.singleChangeSummary,{[R.singleChangeSummaryWithLogo]:m})},C.default.createElement(g.AdaptiveText,{strong:!0,nowrap:!0,ellipsis:{tooltip:`${U} ${s?.symbol}`},component:"span",autoSize:wt,className:R.cryptoWrap,text:`${U}${s?.symbol}`},C.default.createElement(g.Text,{inherit:!0,className:R.cryptoNumber,component:"span"},U),C.default.createElement(g.Text,{inherit:!0,className:R.cryptoSymbol,component:"span"},s?.symbol)),C.default.createElement(g.Text,{component:"span",className:R.currencyNumber},re)))},Ce=lo;var mo=({title:e,space:t=24,tooltip:n,currencyId:a,summaryList:u,useMinPrecision:l,needSwapCurrency:m})=>{let c=(0,kt.useMemoizedFn)(p=>Ae.default.createElement(Ce,{withCoinLogo:!0,justify:"flex-start",coinId:p?.coinId,injectCoin:p?.injectCoin,assetChange:p?.assetChange,currencyId:p?.currencyId||a,currencyAssetChange:p?.currencyAssetChange,useMinPrecision:p?.useMinPrecision||l,needSwapCurrency:p?.needSwapCurrency||m}));return Ae.default.createElement(ft,{title:e,tooltip:n,space:8},Ae.default.createElement(at,{space:t,renderEmpty:!1,dataSource:u,renderItem:c}))},Ft=mo;r();i();var Pt={sendToken:"_sendToken_r2evm_1"};var po=({preExecRet:e})=>{let{assetDiffList:t,sendToken:n}=e||{};if(t?.length){let a=t.map(u=>({title:u.title,summaryList:u.tokenAssetDifflist.map(l=>{let{tokenInfo:m,type:c,amount:p,usdAmount:x}=l;return{injectCoin:{...m,image:m.imageUrl},withCoinLogo:!0,assetChange:p?`${c}${p}`:void 0,currencyAssetChange:x||void 0,needSwapCurrency:!0}})}));return ve.default.createElement(o.Space,{space:24,direction:o.DIRECTION.vertical},a.map(Ft))}if(n?.length){let[{tokenInfo:a,type:u,amount:l,usdAmount:m}]=n,c={injectCoin:{...a,image:a.imageUrl},assetChange:l?`${u}${l}`:void 0,currencyAssetChange:m||void 0};return ve.default.createElement(o.Box,{className:Pt.sendToken},ve.default.createElement(Ce,{...c}))}return null},Mt=po;r();i();var w=d(v()),Ot=d(Tt());r();i();var W={root:"_root_ud6a5_1",main:"_main_ud6a5_8",icon:"_icon_ud6a5_14",title:"_title_ud6a5_19",subTitle:"_subTitle_ud6a5_24",txInfo:"_txInfo_ud6a5_29",content:"_content_ud6a5_38",line:"_line_ud6a5_42",field:"_field_ud6a5_46"};var uo=({handleCancel:e})=>{let t=[{onClick:e,actionType:Z.ACTION_TYPE.CANCEL},{onClick:Ot.default,disabled:!0,actionType:Z.ACTION_TYPE.CONFIRM}];return w.default.createElement(o.Box,{className:W.root},w.default.createElement(o.Box,{className:W.main},w.default.createElement($.Input,{active:!0,className:W.icon}),w.default.createElement($.Input,{active:!0,className:W.title}),w.default.createElement($.Input,{active:!0,className:W.subTitle}),w.default.createElement(o.Box,{className:W.txInfo},w.default.createElement($.Input,{active:!0,className:W.title}),w.default.createElement($.Input,{active:!0,className:W.content})),w.default.createElement($.Input,{active:!0,className:W.line}),w.default.createElement($.Input,{active:!0,className:W.field}),w.default.createElement($.Input,{active:!0,className:W.field}),w.default.createElement($.Input,{active:!0,className:W.field})),w.default.createElement(me,{placeholder:!0,offsetBottom:0,borderTop:!0},w.default.createElement(Z,{buttonGroup:t})))},Wt=uo;r();i();var q=d(v());r();i();var ee=d(v()),De=d(_e());ge();r();i();se();Ie();var Ue="UNKNOWN",Ut={[Ue]:{title:_("wallet_extension_transaction_page_title_unknown_transaction"),image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"}},[M.TRANS_OUT]:{title:_("wallet_extension_send_title_send"),image:{light:"/cdn/assets/imgs/2411/CB43D95ECC4204BB.png",dark:"/cdn/assets/imgs/2411/07EBF82A7C4E6ABA.png"}},[M.REGISTRATION]:{title:_("wallet_dapp_conncetion_notify_signature_request"),image:{light:"/cdn/assets/imgs/2411/32C073438B555887.png",dark:"/cdn/assets/imgs/2411/F0FFC2576F5F3139.png"}}};r();i();var K={"retina-border-basic":"_retina-border-basic_uvlo7_1",retinaBorderBasic:"_retina-border-basic_uvlo7_1",txType:"_txType_uvlo7_29",bordered:"_bordered_uvlo7_33",txTypeLogo:"_txTypeLogo_uvlo7_66",txTypeTitle:"_txTypeTitle_uvlo7_70",txTypeSubTitle:"_txTypeSubTitle_uvlo7_77",txTypeDesc:"_txTypeDesc_uvlo7_85",content:"_content_uvlo7_93",needChildrenPadding:"_needChildrenPadding_uvlo7_96"};var co=({className:e,txType:t=Ue,injectInfo:n={},children:a,bordered:u=!0,needChildrenPadding:l})=>{let m=Ze({},Ut[t],n),c=it(m?.image);return ee.default.createElement(o.FlexBox,{justify:"center",align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:(0,De.default)(K.txType,{[K.bordered]:u},e)},ee.default.createElement(X,{src:c,className:K.txTypeLogo}),ee.default.createElement(g.Text,{strong:500,className:K.txTypeTitle},m?.title),ee.default.createElement(g.Text,{strong:500,className:K.txTypeSubTitle},m?.subTitle),ee.default.createElement(g.Text,{className:K.txTypeDesc},m?.desc),ee.default.createElement(o.Box,{className:(0,De.default)(K.content,{[K.needChildrenPadding]:l})},a))},Dt=ee.default.memo(co);r();i();var S=d(v()),jt=d(le());r();i();var D={root:"_root_1ixys_1",txExplain:"_txExplain_1ixys_1",txExplainModal:"_txExplainModal_1ixys_7",main:"_main_1ixys_20",image:"_image_1ixys_28",title:"_title_1ixys_33",infoList:"_infoList_1ixys_40",info:"_info_1ixys_40",subTitle:"_subTitle_1ixys_46",text:"_text_1ixys_53",footWrap:"_footWrap_1ixys_58"};var _o=({txExplain:e})=>{let[t,{toggle:n}]=(0,jt.useBoolean)(!1),{image:a,descList:u,title:l,confirmBtnText:m}=e,c=be(a);return S.default.createElement(o.Box,{className:D.root},S.default.createElement(o.Box,{onClick:n,className:D.txExplain},S.default.createElement(Q,{className:"okds-question-mark-circle"})),S.default.createElement(he.Action,{noContentPadding:!0,visible:t,onClose:n},S.default.createElement(o.Box,{className:D.txExplainModal},S.default.createElement(o.Box,{className:D.main},S.default.createElement(X,{src:c,className:D.image}),S.default.createElement(o.Box,{className:D.title},l),u?.length?S.default.createElement(o.Box,{className:D.infoList},u.map(p=>S.default.createElement(o.Box,{className:D.info},S.default.createElement(o.Box,{className:D.subTitle},p.text),S.default.createElement(o.Box,{className:D.text},p.desc)))):null),S.default.createElement(o.Box,{className:D.footWrap},S.default.createElement(Y,{block:!0,onClick:n,size:Y.SIZE.lg,type:Y.TYPE.highlight,category:Y.CATEGORY.fill},m)))))},Gt=_o;r();i();var ye={root:"_root_1gj3g_1",tools:"_tools_1gj3g_1",mevWrap:"_mevWrap_1gj3g_9",txExplainWrap:"_txExplainWrap_1gj3g_12",data:"_data_1gj3g_15"};var fo=({txTypeInfo:e,children:t,...n})=>{let{txExplain1:a={},baseInfo:u={}}=e,l;u?.title?.text&&(l={...u,title:u.title.text});let c=q.Children.toArray(t)?.filter(Boolean)?.length;return q.default.createElement(Dt,{injectInfo:l,needChildrenPadding:c,...n},q.default.createElement(o.Box,{className:ye.root},q.default.createElement(o.Box,{className:ye.tools},a?.title?q.default.createElement(o.Box,{className:ye.txExplainWrap},q.default.createElement(Gt,{txExplain:a})):null),q.default.createElement(o.Box,{className:ye.data},t)))},Ht=fo;r();i();var zt=d(v());var xo=({txState:{txId:e="",baseCoin:t={},estimateFailed:n=!1,isSufficientBalance:a=!0,isSufficientGas:u=!0},loading:l,walletAccount:m,preExecRet:c={}})=>{let{tipMessageInfo:p}=c,x=(0,zt.useMemo)(()=>{let y=t?.coinId,{address:N,walletId:b}=m;return u?a?n?{type:E.FEE_ERROR,level:770}:null:{type:E.BALANCE_INSUFFICIENT,txId:e,coinId:y,address:N,walletId:b,level:760}:{type:E.FEE_BALANCE_INSUFFICIENT,txId:e,coinId:y,address:N,walletId:b,level:765}},[t?.coinId,m,u,a,n,e]),s=p?.tipMessage?{message:p.tipMessage,level:p.level}:null;return l?null:[x,s].filter(Boolean).sort((y,N)=>y.level-N.level).pop()||null},Yt=xo;r();i();var Te=d(v()),we=d(le()),Zt=d(Tt());r();i();var T=d(v());ge();r();i();var A={root:"_root_ajyhg_1",main:"_main_ajyhg_14",image:"_image_ajyhg_23",title:"_title_ajyhg_27",desc:"_desc_ajyhg_36",descRaw:"_descRaw_ajyhg_37",extLink:"_extLink_ajyhg_44",descList:"_descList_ajyhg_50",addressItem:"_addressItem_ajyhg_53",assressTitle:"_assressTitle_ajyhg_56",assressInfo:"_assressInfo_ajyhg_62",assressGray:"_assressGray_ajyhg_69",footerWrap:"_footerWrap_ajyhg_72",verticalButtons:"_verticalButtons_ajyhg_75",extButton:"_extButton_ajyhg_79"};var yo={vertical:"vertical",horizontal:"horizontal"},je=({evtType:e,btnType:t}={})=>{e&&_t({specific_risk_scenarios:e,interaction_after_popup_window:t})},To=e=>{let{descRaw:t,desc:n,descList:a,evtType:u}=e;return t?T.default.createElement(g.Text,{className:A.descRaw},t):ce(n)?ce(a)?null:T.default.createElement(o.Box,{className:A.descList},a.map(l=>{let{text:m,highLightLogic:c}=l,p=[];if(c){let[x=6,s=4]=c?.split(":")||[];p.push(l?.desc?.slice(0,x)),p.push(l?.desc?.slice(x,-s)),p.push(l?.desc?.slice(-s))}return T.default.createElement(o.Box,{className:A.addressItem},T.default.createElement(o.Box,{className:A.assressTitle},m),T.default.createElement(o.Box,{className:A.assressInfo},T.default.createElement("span",null,p[0]),T.default.createElement("span",{className:A.assressGray},p[1]),T.default.createElement("span",null,p[2])))})):T.default.createElement(g.Text,{className:A.desc},T.default.createElement("span",null,n.text),T.default.createElement("span",{className:A.extLink,onClick:()=>{je({evtType:u,btnType:"click_on_the_risk_link"}),globalThis.platform.openTab({url:n.link.href})}},n.link?.text))},go=e=>{let{btnLayout:t,evtType:n,handleClickHighLightButton:a,handleClickGrayButton:u,highlightBtnText:l,grayBtnText:m}=e,[c,p]=(0,T.useState)(!1),x=async()=>{je({evtType:n,btnType:"click_cancel"}),p(!0),await a(),p(!1)},s=()=>{je({evtType:n,btnType:"after_clicking_advanced_click_continue"}),u()};return t===yo.vertical?T.default.createElement(o.Box,{className:A.verticalButtons},T.default.createElement(Y,{block:!0,loading:c,size:Y.SIZE.lg,onClick:x,type:Y.TYPE.highlight,category:Y.CATEGORY.fill},l),m?T.default.createElement(o.Box,{className:A.extButton,onClick:s},m):null):T.default.createElement(Z,{buttonGroup:[m&&{loading:c,actionType:Z.ACTION_TYPE.CANCEL,btnText:m,onClick:s},{actionType:Z.ACTION_TYPE.CONFIRM,btnText:l,onClick:x}].filter(Boolean)})},ho=e=>{let{title:t,image:n}=e,a=be(n);return T.default.createElement(o.Box,{className:A.root},T.default.createElement(o.Box,{className:A.main},T.default.createElement(X,{className:A.image,src:a}),T.default.createElement(g.Text,{className:A.title},t),T.default.createElement(To,{...e})),T.default.createElement(o.Box,{className:A.footerWrap},T.default.createElement(go,{...e})))},No=({handleCancel:e,handleCloseModal:t,popupInfoList:n})=>{let[a,u]=(0,T.useState)(0),l=n[a],m=a===n.length-1,c=()=>{u(s=>s+1)};return T.default.createElement(ho,{...l,handleClickGrayButton:()=>m?t():c(),handleClickHighLightButton:()=>e()})},$t=No;var Io=({handleCancel:e=Zt.default}={})=>{let t=(0,Te.useRef)(),n=(0,Te.useRef)(),a=()=>{t.current&&(t.current.destroy(),t.current=null,n.current=null)},u=(0,we.useMemoizedFn)(l=>(n.current||(n.current=new Promise((m,c)=>{t.current=he.action({hideCloseBtn:!0,maskClosable:!1,noContentPadding:!0,children:Te.default.createElement($t,{popupInfoList:l,handleCancel:async()=>{await e(),c(),a()},handleCloseModal:()=>{m(),a()}})})})),n.current));return(0,we.useUnmount)(a),u},Vt=Io;r();i();var Ge={root:"_root_1x894_1",txTypeExtInfo:"_txTypeExtInfo_1x894_6","section-wrap":"_section-wrap_1x894_12",sectionWrap:"_section-wrap_1x894_12"};var ze={signMessage:"signMessage",signTransaction:"signTransaction"},bo=({txType:e,preExecParams:t})=>{let n=t?.dappInfo,u={[ze.signMessage]:{dappInfo:n,txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/32C073438B555887.png",dark:"/cdn/assets/imgs/2411/F0FFC2576F5F3139.png"},title:{text:_("wallet_dapp_conncetion_notify_signature_request")}}}},[ze.signTransaction]:{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:_("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:n.host}}}}[e];return{defaultPreExecRet:{tipMessageInfo:{tipMessage:_("wallet_extension_transaction_error_general_check_network"),level:780},...u,canConfirm:!1},defaultTxTypeInfo:u}},Bo=(0,h.memo)(({txType:e=ze.signTransaction,preExecParams:t={},slot:n={},walletAccount:a={},handleCancel:u=ue,buttonGroup:l,txState:m={},renderEditApproveAmount:c=ue,onUpdatePreExecInfo:p=ue})=>{let{defaultPreExecRet:x,defaultTxTypeInfo:s}=bo({txType:e,preExecParams:t}),[y,N]=(0,h.useState)({}),[b,k]=(0,h.useState)(!0),[U,re]=(0,h.useState)(!0),F=Vt({handleCancel:u}),j=(0,He.useMemoizedFn)(async()=>{try{re(!0);let V=await mt(t);V.txTypeInfo||(V.txTypeInfo=s.txTypeInfo,V.dappInfo=s.dappInfo);let{approveInfoList:ke}=V;if(ke?.forEach((oe,Fe)=>{oe.id=Fe}),b){let{popupInfoList:oe}=V;oe?.length&&await F(oe).catch(ue)}N(V)}catch{N(x)}finally{k(!1),re(!1)}});(0,h.useEffect)(()=>{p({...y,loading:b,silentLoading:U})},[y,b,p,U]),(0,h.useEffect)(()=>{$e(t.chainIndex)||j()},[t]);let ie=(0,He.useMemoizedFn)((V,ke)=>{N(oe=>{let{approveInfoList:Fe}=oe;return{...oe,approveInfoList:Fe.map(Pe=>V===Pe.id?{...Pe,...ke}:Pe)}})}),B=y.txTypeInfo||{},te=y.dappInfo||{},ae=y.approveInfoList||[],P=ae[0]?.spender,{assetDiffList:z,sendToken:Se}=y||{},Kt=Yt({txState:m,walletAccount:a,preExecRet:y,loading:b});return h.default.createElement(o.Container,{className:Ge.root},b?h.default.createElement(Wt,{handleCancel:u}):h.default.createElement(h.default.Fragment,null,h.default.createElement(bt,{...Kt}),h.default.createElement(Ht,{txTypeInfo:B},z?.length||Se?.length?h.default.createElement(Mt,{preExecRet:y}):null,ae.length?h.default.createElement(vt,{approveInfoList:ae,renderEditApproveAmount:c,updateApproveInfo:ie}):null,te?.host?h.default.createElement(Le,{imageUrl:te.icon,text:te.host}):null),h.default.createElement(o.FlexBox,{className:Ge["section-wrap"],direction:o.DIRECTION.vertical},n.mev,n.networkFeeEntry,P?h.default.createElement(xe,{address:P.address,connectable:P.addressType!=="eoa",title:_(xt(P.approvalType)?"wallet_extension_approve_header_dapp_contract_address":"wallet_extension_permitapproval_text_approved")}):null,n.network,h.default.createElement(xe,{address:a?.address,walletId:a?.walletId,title:_("wallet_extension_network_address_title_walletused")}),P?null:n.interactWith,n.advanced?n.advanced:h.default.createElement(Lt,{tooltipZIndex:101,advanced:y?.txExtInfo||{}})),h.default.createElement(me,{borderTop:!0,placeholder:!0,offsetBottom:0,style:{zIndex:205}},h.default.createElement(Z,{buttonGroup:l}))))}),$a=Bo;export{E as a,bt as b,Lt as c,vo as d,wo as e,So as f,We as g,Le as h,vt as i,Ce as j,Dt as k,Ht as l,Vt as m,ze as n,$a as o};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-P52TMJKP.js.map
