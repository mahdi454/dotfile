import{a as cr}from"./chunk-SZX7JZFP.js";import{a as mr}from"./chunk-NKXP6EKG.js";import{a as ir}from"./chunk-TCBPZU5U.js";import{a as Ge,b as lr}from"./chunk-QI6RFYBQ.js";import"./chunk-VBFVRBFM.js";import{a as fr}from"./chunk-HOCK327A.js";import{a as bt}from"./chunk-UGA3IFLT.js";import{c as er}from"./chunk-MCFQAJ2N.js";import"./chunk-PYDL4HCD.js";import{a as tr}from"./chunk-FJWSNGLB.js";import{d as jo}from"./chunk-AHU7BCIL.js";import"./chunk-C6JR2GZU.js";import"./chunk-EZ5WRJOA.js";import"./chunk-WMPWBUW7.js";import"./chunk-GL5KZF23.js";import"./chunk-WXXVKHTN.js";import"./chunk-O4KI5ERK.js";import{a as Vo,d as fe}from"./chunk-6D2WFU2O.js";import"./chunk-U2UKW4WG.js";import"./chunk-445ZV7VL.js";import"./chunk-YQGNRWCJ.js";import"./chunk-X4Z4JMVV.js";import"./chunk-RMSE4KTO.js";import"./chunk-W7APXTAD.js";import{a as qo}from"./chunk-A4CVLGFS.js";import"./chunk-ALNQKIUN.js";import"./chunk-XZFOTB6K.js";import{a as Wt,c as Yo,d as pt,e as $o}from"./chunk-ZGE3YU4L.js";import"./chunk-R5U3NPEX.js";import"./chunk-JDZSGQWQ.js";import"./chunk-XY66VBX7.js";import{b as Jo,c as Ko,d as Xo,f as Qo}from"./chunk-GZFI5G46.js";import{a as ce,o as De}from"./chunk-UAHUXCQX.js";import{a as Zo}from"./chunk-73OZ5IYN.js";import{a as le}from"./chunk-BWRHBLYR.js";import"./chunk-XTOYI7P4.js";import"./chunk-KSCP4BJT.js";import"./chunk-3MIEWVTZ.js";import{d as Mo,f as me,g as Ho}from"./chunk-J2H2J7IS.js";import"./chunk-SJIEUX3S.js";import"./chunk-L7LFNDLE.js";import{a as Ro}from"./chunk-STMKIE2Z.js";import"./chunk-GUQJR5VF.js";import"./chunk-MI6YHDAD.js";import"./chunk-ZAW6Z544.js";import"./chunk-SVAMZON6.js";import"./chunk-MF4732CU.js";import"./chunk-F52H34ZH.js";import"./chunk-3RNOIYOK.js";import"./chunk-OQFQ7WFP.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import{i as Fo}from"./chunk-PMGQLREC.js";import"./chunk-W6OF57RJ.js";import"./chunk-HRZ4SZVQ.js";import"./chunk-ECPXLKIL.js";import"./chunk-RK4XZYBE.js";import{b as Ut,c as rr,d as nr,e as Le,f as B,g as b,h as at,i as st,j as de,k as ar,l as St,m as pe,n as sr}from"./chunk-OEIE6KE4.js";import{a as ut,c as or}from"./chunk-N3OY7GLG.js";import"./chunk-ONV3ODOM.js";import{a as Po,c as ko}from"./chunk-ZI4ZHHA3.js";import"./chunk-3545CIHX.js";import"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-3DI6NEAD.js";import"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import"./chunk-5KSRM7B2.js";import"./chunk-PPHSAQ52.js";import"./chunk-JUOUD4EO.js";import"./chunk-4W35J5OQ.js";import{j as ie}from"./chunk-GPJC633M.js";import{c as Lo,f as Go,l as Bo,m as Oo,o as Wo,u as Uo,y as Ee}from"./chunk-YC6W5MPL.js";import"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import"./chunk-2VRILCVI.js";import"./chunk-IRMGOW5H.js";import"./chunk-CQ64XZTP.js";import"./chunk-UXLFUD7T.js";import"./chunk-2HEOW3XO.js";import"./chunk-DLRFA5AU.js";import"./chunk-OC3IFNJW.js";import"./chunk-UI7PAU35.js";import"./chunk-SMZ64QW3.js";import"./chunk-DQTTI4XL.js";import{w as zo}from"./chunk-FF6KJRSH.js";import"./chunk-CQ7YBDUS.js";import{a as Eo}from"./chunk-GSYNHSX4.js";import"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import"./chunk-HXUMX2S7.js";import{k as Ct}from"./chunk-FYACTIEH.js";import"./chunk-QKXA7YNE.js";import{a as Do}from"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import{a as nt}from"./chunk-M2F2X65U.js";import"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import{a as M,n as ne,o as ae}from"./chunk-S5DGV5WL.js";import"./chunk-AOXUSYRH.js";import{m as go}from"./chunk-WKBC6JL3.js";import"./chunk-3EO5SKIF.js";import{a as Ln}from"./chunk-LMIOM5QK.js";import{X as rt}from"./chunk-VPDRXROE.js";import{ga as ot,m as J,na as vo,oa as Ao,p as fo,qa as Nt,r as te,sa as re,w as P}from"./chunk-JLIPSIRU.js";import"./chunk-CIDV5VJQ.js";import{a as et}from"./chunk-VX55KNI4.js";import"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import{Z as ho,_ as Io,d as xo,n as yo,t as To,ta as At,v as dt}from"./chunk-VGT27A4M.js";import{d as vt,f as ke}from"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import{a as se}from"./chunk-AYCAVTPT.js";import{g as wt}from"./chunk-OG46YTNN.js";import{c as _o}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import{a as Ot,b as No}from"./chunk-CYOQISC6.js";import{d as wo,e as Co,f as bo,h as So}from"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{Ab as so,C as Fe,Cc as lo,D as Re,E as to,Fc as co,Gc as It,H as eo,Ic as j,Jb as Xt,Kc as Rt,L as Lt,La as no,N as oo,R as ro,Uc as $,V as Kt,X as V,Xb as ht,Yb as q,Zb as Dn,gd as Bt,jb as ao,jc as io,tc as Qt,w as tt,x as jt,y as Jt,zc as mo}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{A as Pe,G,b as oe,q as ft}from"./chunk-LDKM7IQF.js";import"./chunk-6O63U2D6.js";import{M as U,l as qt,x as a}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{T as po,Z as uo,c as Gt,ca as v}from"./chunk-OSCGYMLH.js";import{a as ee}from"./chunk-ADWO6K2C.js";import{a as C}from"./chunk-O337TVCZ.js";import"./chunk-EJP3AYQB.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-WRBXETR5.js";import"./chunk-RBB7LL2V.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as m,m as s,o as i}from"./chunk-GLD6H5Q5.js";s();i();var Ne=m(C()),xt=m(et()),In=m(rt());var vn=m(P());s();i();var Ht=m(C()),Cr=m(P()),br=m(et()),Sr=m(rt());U();s();i();var Mt=m(C()),Ft=m(ee()),dr=m(P());var Be=({title:t,children:e,onBack:o,onClose:r,nav:n,loading:l,pageName:f})=>{let c=(0,dr.useSelector)(b);return Mt.default.createElement(_o.Container,{loading:l,className:`metax-send-nft-page main-container ${f==="confirmDetail"&&c?.chain==0?"metax-send-btc-page":""}`},!n&&Mt.default.createElement(Do,{title:t,onClose:r,onBack:o,closeable:!!r,className:f==="confirmDetail"&&c?.chain==0?"metax-send-btc-page-nav":""}),n,Mt.default.createElement("div",{className:`metax-send-nft-page__content ${f==="confirmDetail"&&c?.chain==0?"metax-send-btc-content":""}`},c&&Mt.default.createElement("div",{className:"metax-send-nft-page__content__main"},e)))};Be.defaultProps={nav:null,title:"",onBack:null,onClose:null};Be.propTypes={children:Ft.default.node.isRequired,onBack:Ft.default.func,onClose:Ft.default.func,title:Ft.default.string,nav:Ft.default.node};var ue=Be;s();i();U();var Y=m(C()),xe=m(P()),Ar=m(ee());s();i();Rt();var pr=async(t,e,o)=>{let r="",{coinId:n,baseCoinId:l}=o;return t?((n===It||l===It)&&!await Ko(t)||(te({coinId:n})||te({coinId:l}))&&!(await Xo(t)).isValid||(n===j||l===j)&&!await Jo(t)||o.coinId!==It&&o.coinId!==j&&!te(o)&&!Qo(t,{allowNonPrefixed:!1}))&&(r="wallet_manage_crypto_errortip_invalid_address_tips"):r="wallet_transfer_errortip_receive_address_empty",r},ur=({amount:t,balance:e,t:o})=>t==="0"?o("wallet_extension_nft_toast_input_amount_no0"):t?t>e?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:e}):"":o("wallet_extension_nft_toast_input_transfer_amount");var Me=m(rt());s();i();var L=m(C()),ge=m(ee()),hr=m(Gt());U();var Ir=m(et());s();i();var Oe=m(C());var _e=m(ee());var We=({disabled:t,buttonText:e,nextJump:o})=>{let r=()=>{t||o&&o()};return Oe.default.createElement(nt.FooterActions,{usePortal:!0},Oe.default.createElement(v,{block:!0,category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,onClick:r,disabled:t},e))};We.propTypes={disabled:_e.default.bool,buttonText:_e.default.string.isRequired,nextJump:_e.default.func};We.defaultProps={disabled:!1,nextJump:()=>{}};var _r=We;s();i();var gr=m(C()),xr=m(P()),yr=m(rt());Xt();No();So();var Gn=0,Bn=()=>{let{chain:t,tokenId:e,accountAddress:o,tokenStandard:r}=(0,xr.useSelector)(b),{loading:n,data:l,error:f}=(0,yr.useRequest)(async()=>{let p={chain:t,walletAddress:o,inscriptionIds:[e],tokenStandard:or[r]},{data:d}=await bo(Ot.postBtcNftStatus,p);return d?.assetStatusList||[]},{ready:t===Gn&&[ut.Ordinals,ut.ATOMICAL].includes(r)||t===so&&[ut.FractalOrdinals].includes(r)}),c=(0,gr.useMemo)(()=>[ut.ATOMICAL,ut.Ordinals,ut.FractalOrdinals].includes(r)&&l?.some(({unavailable:p})=>Number(p)===1)?1:0,[l,r]);return[n,c,f]},Tr=Bn;var Ue=({nftBalance:t,nftInfo:e,amount:o,toAddress:r,toError:n,amountError:l,onAmountChange:f,onToAddressChange:c,showAmount:p,onLoadingChange:d,tipMessage:g})=>{let[u,h,x]=Tr(),I=(0,Ir.useHistory)(),F=()=>{I.replace(ae)};(0,L.useEffect)(()=>{d?.(u)},[u]);let _=(0,L.useMemo)(()=>x?a("extension_wallet_header_alert_nft_check_error"):h===1?a("extension_wallet_header_alert_utxo_limit_arc"):null,[x,h]);return L.default.createElement("div",{className:(0,hr.default)("metax-send-nft-form")},(h||x)&&L.default.createElement(oe,{closable:!1,type:x?oe.TYPE.error:oe.TYPE.warn,className:"metax-send-nft-form__alert",title:_}),L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ft.TextArea,{className:"metax-send-nft-form__address",inputClassName:"metax-send-nft-form__address-input",placeholder:a("wallet_extension_transaction_placeholder_input_address"),label:a("wallet_transfer_subtitle_receive_address"),value:r,error:n?a(n):"",disabled:!!h||u,size:ft.SIZE.xl,errorType:ft.TIP_TYPE.always,onChange:c,tips:g||a("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),p&&L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ft.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:a("wallet_contract_interactiom_subtitle_amount"),size:ft.SIZE.xl,precision:0,enableMinus:!1,value:o,error:l||"",errorType:ft.TIP_TYPE.always,onChange:f}),L.default.createElement("div",{className:"metax-send-nft-form__row__max"},L.default.createElement("span",{className:"metax-send-nft-form__row__max-amount"},a("wallet_extension_nft_toast_owned"),":",t),L.default.createElement("span",{onClick:()=>{f(`${e.totalBalance||0}`)},className:"metax-send-nft-form__row__btn-max"},a("wallet_transfer_btn_max_balance_amount")))),L.default.createElement(_r,{nextJump:F,buttonText:a("wallet_transfer_btn_next"),disabled:!r||n||h||p&&(!o||l)}))};Ue.propTypes={nftBalance:ge.default.number.isRequired,amount:ge.default.number,toAddress:ge.default.string};Ue.defaultProps={toAddress:"",amount:void 0};var vr=Ue;function Nr(t){let e=Mo(void 0,void 0,{key:t.nftInfo.baseCoinKey}),o=(0,xe.useSelector)(pe),[r,n]=(0,Y.useState)(null),[l,f]=(0,Y.useState)(null),{run:c}=(0,Me.useDebounceFn)(async(x,I)=>{!e||(x.toLowerCase()===I.toLowerCase()&&f(Y.default.createElement("div",{className:"metax-send-nft-form__waring"},Y.default.createElement("span",{className:"metax-send-nft-form__waring__tips"},a("wallet_extension_mid_textarea_same_address")))),n(await pr(x,I,e)))},{wait:200}),[p,d]=(0,Y.useState)(null),{run:g}=(0,Me.useDebounceFn)((x,I)=>{d(ur({amount:x,balance:I,t:a}))},{wait:200}),u=(0,Y.useCallback)(x=>{t.setToAddress(x.target.value),c(x.target.value,t.fromAddress)},[t.fromAddress,c]),h=(0,Y.useCallback)(x=>{let I=x.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(I),g(I,t.nftBalance)},[t.nftBalance,g]);return Y.default.createElement(vr,{...t,toError:r,tipMessage:l,amountError:p,showAmount:o,onToAddressChange:u,onAmountChange:h})}Nr.propTypes={nftInfo:Ar.default.object.isRequired};function On(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Wn(t){return{setToAddress:e=>t(Ut.setToAddress(e)),setAmount:e=>t(Ut.setAmount(e))}}var wr=(0,xe.connect)(On,Wn)(Nr);var Un=()=>{let t=(0,Cr.useDispatch)(),e=(0,br.useHistory)(),[o,{set:r}]=(0,Sr.useBoolean)(!1),n=(0,Ht.useCallback)(()=>{t(Ut.resetSend()),e.goBack()},[e]);return Ht.default.createElement(ue,{onBack:n,loading:o,title:a("wallet_home_btn_send")},Ht.default.createElement(wr,{onLoadingChange:r}))},Fr=Un;s();i();var zt=m(C()),yn=m(P()),Tn=m(et());U();s();i();var $t=m(C()),gn=m(P());Rt();Xt();s();i();var N=m(C()),Pt=m(P()),$r=m(et());U();s();i();Bt();At();Rt();No();So();V();ke();var Mn=t=>{let e=ot(t),n=(vo(t)?.account||{})[Qt]||"";return{walletId:e,address:n}},Hn=async t=>{let e={coinId:j,address:t.address},o={fromAddr:t.fromAddress,toAddr:t.toAddress},{info:r={}}=await Lo(e,o),{sequenceNumber:n,chainId:l,expirationTimestampSecs:f,gasUnitPrice:c}=r;return{sequenceNumber:n,chainId:l,expirationTimestampSecs:f,gasUnitPrice:c,maxGasAmount:8e3}},Yn=t=>async e=>{let{signedTx:o,sequenceNumber:r,fromAddress:n,toAddress:l,gasUnitPrice:f,maxGasAmount:c,amount:p}=t,d={nonce:r},g=tt(f,c),u={signedTx:o,coinId:j,fromAdr:n,toAdr:l,serviceCharge:g,extJson:JSON.stringify(d),coinAmount:eo(p),txSource:$.NFT};return await e(ir(u))},He=t=>async(e,o)=>{let r=o(),{address:n}=Mn(r),{type:l,maxGasAmount:f,gasUnitPrice:c,fromAddress:p,toAddress:d,receiver:g,sender:u,creator:h,collectionName:x,tokenName:I,version:F,amount:_}=t,k=await Hn({fromAddress:p,toAddress:d,address:n});f&&(k.maxGasAmount=f),c&&(k.gasUnitPrice=c);let w={};l===dt.OFFER_NFT||l===dt.OFFER_NFT_SIMULATE?(w.receiver=g,w.amount=_):w.sender=u;let O={type:l,base:k,data:{...w,creator:h,collectionName:x,tokenName:I,version:F}},E=await vt().signTransaction(O,n,Qt);return{base:k,signedTx:E}},Pr=t=>async e=>{let{fromAddress:o,toAddress:r,amount:n}=t,{base:l,signedTx:f}=await e(He(t)),c=await ce(Qt,f);return{txId:await e(Yn({...l,signedTx:f,fromAddress:o,toAddress:r,amount:n})),txHash:c}},kr=async(t={},e)=>{let o;try{o=await Uo(e)}catch(l){o=t.maxGasAmount||2e3,console.log(l)}let{gasUnitPrice:r}=t,n=tt(r,o);return{gasUnitPrice:r,maxGasAmount:o,fee:n}},Er=t=>async e=>{let{base:o,signedTx:r}=await e(He({...t,type:dt.OFFER_NFT_SIMULATE}));return kr(o,r)},Dr=t=>async e=>{let{base:o,signedTx:r}=await e(He({...t,type:dt.CLAIM_NFT_SIMULATE}));return kr(o,r)},Lr=t=>async e=>e(Pr({...t,type:dt.OFFER_NFT})),Gr=t=>async e=>e(Pr({...t,type:dt.CLAIM_NFT})),Br=async(t,e,o,r)=>{let n=mo({coinId:r})||{},l=Ot.getAptosResourceType.replace("{rpcUrl}",n.rpcUrl),f=Ot.getAptosTable.replace("{rpcUrl}",n.rpcUrl),{data:{data:{token_data:{handle:c}}}}=await wo(l.replace("{creator}",t)),{data:p}=await Co(f.replace("{handle}",c),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:e,name:o}});return p.largest_property_version};s();i();var Or=m(P());V();var $n=(t,e)=>Vo((n,l)=>jt(n,10**l.decimals),Kt)(t,e),ye=(t,e={})=>go(t,{symbol:e?.symbol,decimals:e?.decimals}),Te=(t,e={})=>{let o=(0,Or.useSelector)(re),r=ie(e.coinId),n=$n(t,e);return fe({amount:n,rate:r,symbol:o.symbol},{useApproximate:!0})};V();s();i();var it=m(C()),Wr=m(Ln());U();var D=({label:t,value:e,valueDisplay:o,canCopy:r})=>{let n=(0,it.useCallback)(()=>{(0,Wr.default)(e),G.success({title:a("wallet_transaction_history_toast_address_copied"),desc:e,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:G.DIRECTION.top})},[e]);return it.default.createElement("div",{className:"metax-send-nft-confirm"},it.default.createElement("div",{className:"metax-send-nft-confirm__label"},t),it.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:r?n:void 0},it.default.createElement(qo,{text:o,maxWidth:"215px"}),r&&it.default.createElement("span",{className:"okds-copy confirm-transaction--copy"})))};s();i();var Ur=m(C()),Mr=m(P()),Hr=m(rt());var Yr=(t,e)=>{let o=(0,Mr.useDispatch)(),[r,n]=(0,Ur.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return(0,Hr.useMount)(()=>{(async()=>{n({...r,loading:!0}),t.version=await Br(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:f,maxGasAmount:c,fee:p}=e?await o(Dr(t)):await o(Er(t));n({aptosFee:p,gasUnitPrice:f,maxGasAmount:c,loading:!1,version:t.version})})()}),r};var zn=()=>{let t=(0,Pt.useDispatch)(),{creatorAddress:e,name:o,projectName:r,accountAddress:n,baseCoinId:l,image:f,chainName:c,claim:p}=(0,Pt.useSelector)(b),d=(0,$r.useHistory)(),{name:g,keyringName:u}=(0,Pt.useSelector)(Nt),{toAddress:h,amount:x=1}=(0,Pt.useSelector)(at),{baseCoin:I,coin:F}=le(l,!0),_=p?{fromAddress:n,toAddress:h,sender:n,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId}:{fromAddress:n,toAddress:h,receiver:h,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId},{aptosFee:k,gasUnitPrice:w,maxGasAmount:O,loading:E,version:K}=Yr(_,p),[X,Q]=(0,N.useState)(!1),Et=er(),Zt=ye(k,I),lt=Re(Et,oo(k)),H=Te(k,I),Z=wt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return N.default.createElement(N.default.Fragment,null,N.default.createElement("div",{className:"metax-send-nft-detail"},N.default.createElement("div",{className:"metax-send-nft-detail__base--container"},N.default.createElement(bt,{src:f,startStatus:!0,alt:"nft",backupImage:Z,classnames:"metax-send-nft-detail__icon"}),N.default.createElement("div",{className:"metax-send-nft-detail__name-container"},N.default.createElement("div",{className:"metax-send-nft-detail__name"},o))),N.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${u} - ${g}`}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:J(n),canCopy:!0}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:J(h),canCopy:!0}),N.default.createElement("div",{className:"metax-send-nft-detail__hr"}),N.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:c}),N.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},N.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),N.default.createElement("div",{className:"metax-send-nft-confirm__value"},E?N.default.createElement(uo,null):N.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},N.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",Zt),N.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},H)))),!lt&&!E&&N.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip"))),N.default.createElement(nt.FooterActions,null,N.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),lt?d.goBack():d.replace(M)}},a("wallet_dapp_connection_btn_reject")),N.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:X,disabled:!lt||E,onClick:async()=>{try{Q(!0),_.gasUnitPrice=w,_.maxGasAmount=O,_.version=K;let{txId:yt,txHash:Tt}=p?await t(Gr(_)):await t(Lr(_));p?await Ee(21,Tt,h):await Ee(20,Tt,n),Ct({tx_id:yt}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),d.replace(M)}catch{G.error({title:a("wallet_home_toast_network_error")})}finally{Q(!1)}}},a("wallet_set_password_btn_confirm"))))},zr=zn;s();i();var Zr=m(C()),he=m(P());var Vr=()=>{let{accountAddress:t,inscriptionIdProtocol:e,localType:o}=(0,he.useSelector)(b),{toAddress:r}=(0,he.useSelector)(at),n=(0,he.useSelector)(ot);return Zr.default.createElement(mr,{unapproved:{walletId:n,params:{transfer:{from:t,to:r,data:e}},localType:o}})};s();i();var A=m(C()),z=m(P()),sn=m(et());U();At();V();s();i();var Ye=m(P());V();function qr(){let{baseCoinKey:t}=(0,Ye.useSelector)(b),o=me(void 0,void 0,{key:t})?.coinAmountInt,r=(0,Ye.useSelector)(st),{gasLimit:n,gasPrice:l,supportEip1559:f,maxFeePerGas:c,maxPriorityFeePerGas:p}=r;if(n==="0"||f&&(c==="0"||p==="0")||!f&&l==="0")return!1;let g=tt(`${(f?c:l)||0}`,`${n||0}`);return to(`${o||0}`,g)}s();i();var kt=m(P());Dn();Rt();At();Bt();V();ke();function jr(){let t=(0,kt.useDispatch)(),{contractAddress:e,accountAddress:o,baseCoinId:r,localType:n}=(0,kt.useSelector)(b),{gasLimit:l,gasPrice:f,maxFeePerGas:c,maxPriorityFeePerGas:p,supportEip1559:d}=(0,kt.useSelector)(ar),g=(0,kt.useSelector)(de),u=Eo();return{send:async({nonce:h,updateGasInfo:x,activityId:I})=>{let F=lo(n)?.realChainIdHex,_={from:o,to:e,nonce:q(h),data:g,chainId:F,value:"0",gasLimit:q(l)};d?(_.type=yo.FEE_MARKET,_.maxFeePerGas=q(c),_.maxPriorityFeePerGas=q(p)):_.gasPrice=q(f),x&&(_.maxFeePerGas?(_.maxFeePerGas=q(x.maxFeePerGas),_.maxPriorityFeePerGas=q(x.maxPriorityFeePerGas)):_.gasPrice=q(x.gasPrice));let w={...fo(_)};w.walletId=u;let O=ht(d?_.maxFeePerGas:_.gasPrice),E=ht(_.gasLimit),K={..._,value:ht(_.value),from:_.from,to:_.to,gas:E,gasPrice:O,priorityFee:ht(d?_.maxPriorityFeePerGas:0),nonce:ht(_.nonce),repeatTxType:xo.CONFIRMING,oldTxHash:""},X={coinId:r,coinAmount:0,fromAdr:_.from,toAdr:_.to,serviceCharge:tt(E,O),extJson:JSON.stringify(K),txSource:$.NFT,inputData:_.data?_.data:"",activityId:I};return await t(Po({txParams:w,walletId:u})),{serverTxId:await vt().signAndPublishTransferTransaction({signParams:w,from:w.from,baseChain:io,publishParams:X})}}}}s();i();var S=m(C()),rn=m(Gt()),_t=m(P());var ve=m(rt());U();At();var nn=m(et());s();i();s();i();var Kr=m(C()),Xr=m(Gt());U();s();i();var Jr={root:"_root_1leh0_1"};function Zn({className:t,style:e}){return Kr.default.createElement("div",{className:(0,Xr.default)(Jr.root,t),style:e},a("wallet_extension_freegas_notif_networkfee_rebate"))}var $e=Zn;s();i();var Rr=m(C());s();i();var Qr={text:"_text_1qgtl_1"};function Vn({status:t}){return t!==pt.ok?null:Rr.default.createElement($e,{className:Qr.text})}var ze=Vn;s();i();var tn=m(C()),en=m(Gt());s();i();var mt={"retina-border-basic":"_retina-border-basic_tetol_1",retinaBorderBasic:"_retina-border-basic_tetol_1",root:"_root_tetol_29",render:"_render_tetol_67",iconWrapper:"_iconWrapper_tetol_71",icon:"_icon_tetol_71",error:"_error_tetol_81"};function qn({className:t,children:e,error:o}){return tn.default.createElement("div",{className:(0,en.default)(mt.root,t,{[mt.error]:o})},e)}var Ze=qn;s();i();U();var Yt=m(C());var Ve=m(Gt());function jn({className:t,status:e,tip:o,activity:r}){if(e!==pt.error&&e!==pt.ok||!o)return null;let{gas:n,totalTimes:l}=r,{text:f,key:c,args:p,error:d}=o,g=f||a(c,p||{}),u;return c===Wt.availableTimesLimit?u=a("wallet_extension_freegas_tooltip_5refund_day",{num:l}):c===Wt.exceedGasLimit?u=a("wallet_extension_freegas_tooltip_under_10u",{num:n}):c===Wt.exceedTodayGasLimit?u=a("wallet_extension_freegas_tooltip_paused_rules"):c===Wt.walletAssetNotEnough&&(u=a("wallet_extension_freegas_notif_greater_than10",{num:l})),u&&(g=Yt.default.createElement("div",{className:mt.iconWrapper},g,Yt.default.createElement(Pe,{title:u,trigger:Pe.TRIGGER_TYPES.hover},Yt.default.createElement(po,{className:(0,Ve.default)("okx-wallet-plugin-information-circle",mt.icon,{[mt.error]:d})})))),Yt.default.createElement(Ze,{className:(0,Ve.default)(mt.render,t),error:d},g)}var qe=jn;s();i();var Ie=m(P());U();V();var on=()=>{let t=(0,Ie.useSelector)(St),e=(0,Ie.useSelector)(st),{baseCoin:o}=le(t,!0),{networkFee:r}=e,n=(0,Ie.useSelector)(re),f=Zo(Lt,g=>ro(g,o.vdecimalNum),Kt),c=`${qt.thousandFormat(f(r))} ${o.symbol}`,p=ie(o.coinId),d=fe({amount:Lt(r),rate:p,symbol:n.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:c,gasFeeToCurrencyDisplay:d}};s();i();var je={arrow:"_arrow_1p9f5_1",gasReturnTip:"_gasReturnTip_1p9f5_6"};function Jn(){let t=(0,_t.useSelector)(st),e=Ge(),{status:o}=e,{gasType:r}=t,n=Io[r],l=n?a(n):"",{gasFeeToETHDisplay:f,gasFeeToCurrencyDisplay:c}=on();return o===pt.ok?S.default.createElement(S.default.Fragment,null,S.default.createElement(ze,{status:o}),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},l,"\xA0",f)):S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},l,"\xA0",f),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},c))}var an=()=>{let t=(0,_t.useDispatch)(),e=(0,nn.useHistory)(),{accountAddress:o,contractAddress:r}=(0,_t.useSelector)(b),n=(0,_t.useSelector)(St),l=(0,_t.useSelector)(de),[f,{setTrue:c,setFalse:p}]=(0,ve.useBoolean)(!1),d=Ge(),g=(0,ve.useMemoizedFn)(h=>{t(rr(h))}),u=()=>{t(B()),e.push(M)};return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm"},S.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),S.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:c},S.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},S.default.createElement(Jn,null)),S.default.createElement("div",{className:"metax-send-nft-confirm__value__narrow"},S.default.createElement("span",{className:(0,rn.default)("okds-arrow-chevron-right-centered-md",je.arrow)}))),S.default.createElement(jo,{visible:f,coinId:n,address:o,inputData:l,tokenAddress:r,value:"0",onBack:p,onClose:u,onGasChange:g,gasReturn:d})),S.default.createElement(qe,{className:je.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var Kn=()=>{let t=(0,z.useDispatch)(),e=(0,z.useSelector)(sr),{accountAddress:o,baseCoinId:r,image:n,name:l,chainName:f}=(0,z.useSelector)(b),c=qr(),p=(0,sn.useHistory)(),{name:d,keyringName:g}=(0,z.useSelector)(Nt),u=(0,z.useSelector)(st),h=(0,z.useSelector)(St),[,x]=Ho(h),{toAddress:I,amount:F}=(0,z.useSelector)(at),_=(0,z.useSelector)(pe),[k,w]=(0,A.useState)(!1),{send:O}=jr(),E=$o({coinId:h,txType:Yo.nft,fromAddress:o,toAddress:I,unavailable:u.gasType===ho.CUSTOM,fee:Lt(u.networkFee)}),K=E?.errorCode,X=()=>{w(!0)},Q=()=>{w(!1)},{gasPrice:Et}=u,lt={fetchParams:{coinId:h,from:o,to:I,amount:F,gasPrice:Et},userGasInfo:u,baseCoinAmountUse:"0"},H=(0,A.useMemo)(()=>_?qt.thousandFormat(F):"",[F,_]),Z=(0,A.useCallback)(()=>{t(B()),c?p.goBack():p.replace(M)},[c]),yt=(0,A.useCallback)(async we=>{if(!await Ro({callback:Z}))return;let{nonce:Ce,updateGasInfo:be}=we;try{let W=await O({nonce:Ce,updateGasInfo:be,activityId:E.activityId}),{serverTxId:Dt}=W||{};Ct({tx_id:Dt}),G.success({title:a("wallet_transfer_notif_transaction_submit")}),t(B()),p.replace("/")}catch(W){let Dt=W?.data?.originalError?.code;fr(Dt)?(G.error({title:W?.data?.originalError.msg||a("wallet_home_toast_network_error")}),E.clear()):W.message!==se&&G.error({title:a("wallet_home_toast_network_error")})}},[r,o,O]);(0,A.useEffect)(()=>{K===0&&typeof x?.chainId<"u"&&zo({wallet_address:o,interactive_address:I,chain_id:x?.chainId,transaction_type:"send_nft"})},[K,x?.chainId]);let Tt=wt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return A.default.createElement(lr,{gasReturn:E},A.default.createElement("div",{className:"metax-send-nft-detail"},A.default.createElement("div",{className:"metax-send-nft-detail__base--container"},A.default.createElement(bt,{src:n,alt:"nft",startStatus:!0,backupImage:Tt,classnames:"metax-send-nft-detail__icon"}),A.default.createElement("div",{className:"metax-send-nft-detail__name-container"},A.default.createElement("div",{className:"metax-send-nft-detail__name"},l))),A.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${g} - ${d}`}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:J(o),canCopy:!0}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:I,valueDisplay:J(I),canCopy:!0}),A.default.createElement("div",{className:"metax-send-nft-detail__hr"}),A.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:f}),A.default.createElement(an,null),!e&&!c&&A.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip")),_&&A.default.createElement(D,{label:a("wallet_extension_transaction_module_input_label_amount"),valueDisplay:H})),A.default.createElement(nt.FooterActions,null,A.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:Z},a("wallet_dapp_connection_btn_reject")),A.default.createElement(cr,{dataForCheck:lt,onClick:yt,beforeClick:X,afterClick:Q,btnProps:{loading:k,width:160,disabled:e||!c}},a("wallet_set_password_btn_confirm"))))},mn=Kn;s();i();var y=m(C());U();var pn=m(rt());s();i();var Ae=m(C()),ln=m(rt());V();At();Xt();var cn=(t={},e=!1,o=!1)=>{let[r,n]=(0,Ae.useState)({}),[l,f]=(0,Ae.useState)(!0),[c,p]=(0,Ae.useState)(!1),d=r.fee;return(0,ln.useMount)(()=>{(async()=>{try{let u=await Bo(t);u?.fee&&n(u),f(!1)}catch{o&&(p(!0),f(!1))}})()}),e?{solanaFee:d,solanaFeeInfo:r,loading:l,error:c}:d};var gt=m(P()),un=m(et());s();i();Bt();At();Xt();s();i();ke();Bt();var fn=t=>async(e,o)=>{let r=o(),n=ot(r),l=t.walletId||n,c=Ao(r,l)?.serverWalletType,p=await vt().getSignRequestHeaders({walletId:l}),d={txSource:$.NORMAL,accountId:l,walletType:c,...t};return await Go(d,{headers:p})};var Je=({type:t,from:e,to:o,blockHash:r,coinAmount:n,mint:l,createAssociatedAddress:f,computeUnitPrice:c,computeUnitLimit:p,tokenStandard:d})=>{let g={type:t,payer:e,blockHash:r,from:e,to:o,amount:n,computeUnitPrice:c,computeUnitLimit:p},u;return t===To.TRANSFER?u={...g}:u={...g,mint:l,createAssociatedAddress:f},d&&(u.tokenStandard=d),u},dn=({type:t,from:e,to:o,coinId:r,blockHash:n,coinAmount:l,mint:f=null,createAssociatedAddress:c,serviceCharge:p,computeUnitPrice:d,computeUnitLimit:g,txSource:u=$.NORMAL,extJson:h=JSON.stringify({}),walletId:x,tokenStandard:I})=>async F=>{let _=Je({type:t,from:e,to:o,blockHash:n,coinAmount:l,mint:f,createAssociatedAddress:c,computeUnitPrice:d,computeUnitLimit:g,tokenStandard:I}),k=await F(ko(_,e,x)),w=await ce(no,k);return await F(fn({signedTx:k,coinAmount:l,coinId:r,fromAdr:e,toAdr:o,serviceCharge:p,txSource:u,extJson:h,txHash:w}))};Bt();V();var Xn=()=>{let t=(0,gt.useDispatch)(),e=(0,gt.useSelector)(b),{tokenId:o,accountAddress:r,baseCoinId:n,image:l,name:f,chainName:c,extendProperty:p}=e,d=me(n),{chainId:g}=d,{tokenStandard:u}=p||{},h=tr(),x=(0,un.useHistory)(),I=(0,y.useRef)(!1),F=(0,y.useRef)(),{name:_,keyringName:k}=(0,gt.useSelector)(Nt),{toAddress:w}=(0,gt.useSelector)(at),[O,{setTrue:E,setFalse:K}]=(0,pn.useBoolean)(!0),[X,Q]=(0,y.useState)(""),[Et,Zt]=(0,y.useState)("0"),{loading:lt,solanaFeeInfo:H}=cn({coinId:n,address:w},!0),Z=lt||O,{fee:yt,computeUnitPrice:Tt,feelimit:we}=H,{priorityFee:Ke,priorityGasPrice:Ce,priorityGasLimit:be}=De(we,Tt,Et),W=Jt(yt,Ke),Dt=Te(W,d),An=ye(W,d),Nn=(0,gt.useSelector)(ot),[wn,Xe]=(0,y.useState)(!1),Cn=wt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Vt=(0,y.useMemo)(()=>Z?{msg:"",isEnough:!1}:X?{msg:X,isEnough:!0}:Fe(d.coinAmountInt,W)?{msg:a("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:Fe(d.coinAmountInt,Jt(W,H.selfRent))?{msg:a("walletextension_toast_text_reserve_rent_exempt",{number:jt(H.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[Z,d.coinAmountInt,d.decimals,W,H.selfRent]),Qe=()=>{let R={from:r,to:w,coinId:n,serviceCharge:W,computeUnitPrice:Ce,computeUnitLimit:be,txSource:$.NFT,coinAmount:1,mint:o,createAssociatedAddress:!F.current,walletId:Nn,type:"tokenTransfer"};return u===4&&(R.type="mplTransfer",R.tokenStandard=4),R};return(0,y.useEffect)(()=>{o&&w&&g&&H.recentBlockhash&&(E(),Q(""),(async()=>{try{let ct=Qe();ct.blockHash=H.recentBlockhash;let Se=Je(ct),bn=Wo({mint:o,address:w}),{SolWallet:Sn}=await Fo(),Fn=await new Sn().getSerializedTransaction({privateKey:"",data:Se}),Pn=h({coinId:n,from:r,chainId:g,simulateTransactionParam:{transaction:Fn}}),[kn,En]=await Promise.all([bn,Pn]);F.current=kn?.data?.legal,Zt(En.firstUnitLimit)}catch(ct){Q(ct?.message||a("wallet_extension_alert_estimate_unavailable"))}finally{K()}})())},[o,r,w,g,H.recentBlockhash]),y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"metax-send-nft-detail"},y.default.createElement("div",{className:"metax-send-nft-detail__base--container"},y.default.createElement(bt,{src:l,startStatus:!0,alt:"",backupImage:Cn,classnames:"metax-send-nft-detail__icon"}),y.default.createElement("div",{className:"metax-send-nft-detail__name-container"},y.default.createElement("div",{className:"metax-send-nft-detail__name"},f))),y.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${k} - ${_}`}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:J(r),canCopy:!0}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:w,valueDisplay:J(w),canCopy:!0}),y.default.createElement("div",{className:"metax-send-nft-detail__hr"}),y.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:c}),y.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},y.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),y.default.createElement("div",{className:"metax-send-nft-confirm__value"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",An),y.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},Dt)))),!Z&&Vt.msg&&y.default.createElement("div",{className:"metax-send-nft-detail__error"},Vt.msg)),y.default.createElement(nt.FooterActions,null,y.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),Vt.isEnough?x.goBack():x.replace(M)}},a("wallet_dapp_connection_btn_reject")),y.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:Z||wn,disabled:Vt.msg,onClick:async()=>{if(!I.current){I.current=!0,Xe(!0);try{let R=await Oo({coinId:n,address:r},{fromAddr:r,toAddr:w}),ct=Qe();ct.blockHash=R;let Se=await t(dn(ct));Ct({tx_id:Se}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),x.replace(M)}catch(R){R.message!==se&&G.error({title:a("wallet_home_toast_network_error")})}I.current=!1,Xe(!1)}}},a("wallet_set_password_btn_confirm"))))},_n=Xn;var Qn=()=>{let{baseCoinId:t}=(0,gn.useSelector)(b);switch(t){case co:case ao:return $t.default.createElement(Vr,null);case It:return $t.default.createElement(_n,null);case j:return $t.default.createElement(zr,null);default:return $t.default.createElement(mn,null)}},xn=Qn;var Rn=()=>{let t=(0,Tn.useHistory)(),e=(0,yn.useDispatch)(),o=(0,zt.useCallback)(()=>{e(Le()),t.replace(ne)},[]);return zt.default.createElement(ue,{pageName:"confirmDetail",title:t.location.state?.nftInfo.claim?a("extension_aptos_nft_title_receiveconfirm"):a("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(t.location.state?.nftInfo.claim){e(B()),e(Le()),t.goBack();return}o()}},zt.default.createElement(xn,null))},hn=Rn;var ta=()=>{let t=(0,xt.useHistory)(),e=(0,vn.useDispatch)();return(0,In.useMount)(()=>{t.location.state?e(nr(t.location.state?.nftInfo)):t.replace(M)}),Ne.default.createElement(xt.Switch,null,Ne.default.createElement(xt.Route,{exact:!0,path:ne,component:Fr}),Ne.default.createElement(xt.Route,{exact:!0,path:ae,component:hn}))},Yc=ta;export{Yc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendNft-LTOMWFQO.js.map
