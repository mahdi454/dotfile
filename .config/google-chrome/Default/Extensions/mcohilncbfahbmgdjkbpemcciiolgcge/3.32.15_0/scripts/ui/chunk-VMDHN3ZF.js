import{m as ur,n as Ei,t as Ia,v as be,x as bi}from"./chunk-QKMEJIUR.js";import{I as yi,P as gi,i as di,j as hi,u as pi,v as _i,w as mi,z as wi}from"./chunk-JLMMMGUZ.js";import{A as Zr,b as I,h as lt,k as li,n as ar,y as Ze}from"./chunk-33Y4IZ5Y.js";import{b as $n,f as Jn,i as jt,k as ei,m as qt,o as J}from"./chunk-G5U7ERLN.js";import{Dc as sr,Gc as fi,Ic as ci,Ja as gt,Ta as Ee,Ua as Vr,Z as ri,gb as oi,hb as si,m as ti,r as Ve,vc as ai,wc as ui,xa as ni}from"./chunk-3RNOIYOK.js";import{f as ii}from"./chunk-OQFQ7WFP.js";import{a as Ue}from"./chunk-CJBRPLUG.js";import{A as Kr,H as or,f as Ht,o as Ft,y as Wr}from"./chunk-LDKM7IQF.js";import{C as jr,F as ge,T as Xn,a as wt,aa as Mt,d as zn,j as B,pa as yt}from"./chunk-6O63U2D6.js";import{E as ir,L as Yn,M as Ut,a as Kn,b as ct,c as Vn,w as Zn}from"./chunk-RIOWPXBZ.js";import{E as Qn,T as qr,Z as Gr,ca as $}from"./chunk-OSCGYMLH.js";import{a as fe}from"./chunk-O337TVCZ.js";import{d as Fr,e as ka}from"./chunk-VBARKITZ.js";import{c as N,f as Y,h as m,l as process,m as c,n as d,o as l}from"./chunk-GLD6H5Q5.js";var Zt=N(ee=>{"use strict";c();l();var Ya=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function za(e,r){return Object.prototype.hasOwnProperty.call(e,r)}ee.assign=function(e){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var t=r.shift();if(!!t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var n in t)za(t,n)&&(e[n]=t[n])}}return e};ee.shrinkBuf=function(e,r){return e.length===r?e:e.subarray?e.subarray(0,r):(e.length=r,e)};var Xa={arraySet:function(e,r,t,n,i){if(r.subarray&&e.subarray){e.set(r.subarray(t,t+n),i);return}for(var o=0;o<n;o++)e[i+o]=r[t+o]},flattenChunks:function(e){var r,t,n,i,o,a;for(n=0,r=0,t=e.length;r<t;r++)n+=e[r].length;for(a=new Uint8Array(n),i=0,r=0,t=e.length;r<t;r++)o=e[r],a.set(o,i),i+=o.length;return a}},Qa={arraySet:function(e,r,t,n,i){for(var o=0;o<n;o++)e[i+o]=r[t+o]},flattenChunks:function(e){return[].concat.apply([],e)}};ee.setTyped=function(e){e?(ee.Buf8=Uint8Array,ee.Buf16=Uint16Array,ee.Buf32=Int32Array,ee.assign(ee,Xa)):(ee.Buf8=Array,ee.Buf16=Array,ee.Buf32=Array,ee.assign(ee,Qa))};ee.setTyped(Ya)});var Gi=N((dp,qi)=>{"use strict";c();l();function $a(e,r,t,n){for(var i=e&65535|0,o=e>>>16&65535|0,a=0;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+r[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}qi.exports=$a});var Ki=N((_p,Wi)=>{"use strict";c();l();function Ja(){for(var e,r=[],t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r}var eu=Ja();function tu(e,r,t,n){var i=eu,o=n+t;e^=-1;for(var a=n;a<o;a++)e=e>>>8^i[(e^r[a])&255];return e^-1}Wi.exports=tu});var Zi=N((yp,Vi)=>{"use strict";c();l();var mr=30,ru=12;Vi.exports=function(r,t){var n,i,o,a,s,h,f,u,y,_,p,O,E,T,b,R,C,k,w,L,x,S,A,q,P;n=r.state,i=r.next_in,q=r.input,o=i+(r.avail_in-5),a=r.next_out,P=r.output,s=a-(t-r.avail_out),h=a+(r.avail_out-257),f=n.dmax,u=n.wsize,y=n.whave,_=n.wnext,p=n.window,O=n.hold,E=n.bits,T=n.lencode,b=n.distcode,R=(1<<n.lenbits)-1,C=(1<<n.distbits)-1;e:do{E<15&&(O+=q[i++]<<E,E+=8,O+=q[i++]<<E,E+=8),k=T[O&R];t:for(;;){if(w=k>>>24,O>>>=w,E-=w,w=k>>>16&255,w===0)P[a++]=k&65535;else if(w&16){L=k&65535,w&=15,w&&(E<w&&(O+=q[i++]<<E,E+=8),L+=O&(1<<w)-1,O>>>=w,E-=w),E<15&&(O+=q[i++]<<E,E+=8,O+=q[i++]<<E,E+=8),k=b[O&C];r:for(;;){if(w=k>>>24,O>>>=w,E-=w,w=k>>>16&255,w&16){if(x=k&65535,w&=15,E<w&&(O+=q[i++]<<E,E+=8,E<w&&(O+=q[i++]<<E,E+=8)),x+=O&(1<<w)-1,x>f){r.msg="invalid distance too far back",n.mode=mr;break e}if(O>>>=w,E-=w,w=a-s,x>w){if(w=x-w,w>y&&n.sane){r.msg="invalid distance too far back",n.mode=mr;break e}if(S=0,A=p,_===0){if(S+=u-w,w<L){L-=w;do P[a++]=p[S++];while(--w);S=a-x,A=P}}else if(_<w){if(S+=u+_-w,w-=_,w<L){L-=w;do P[a++]=p[S++];while(--w);if(S=0,_<L){w=_,L-=w;do P[a++]=p[S++];while(--w);S=a-x,A=P}}}else if(S+=_-w,w<L){L-=w;do P[a++]=p[S++];while(--w);S=a-x,A=P}for(;L>2;)P[a++]=A[S++],P[a++]=A[S++],P[a++]=A[S++],L-=3;L&&(P[a++]=A[S++],L>1&&(P[a++]=A[S++]))}else{S=a-x;do P[a++]=P[S++],P[a++]=P[S++],P[a++]=P[S++],L-=3;while(L>2);L&&(P[a++]=P[S++],L>1&&(P[a++]=P[S++]))}}else if((w&64)===0){k=b[(k&65535)+(O&(1<<w)-1)];continue r}else{r.msg="invalid distance code",n.mode=mr;break e}break}}else if((w&64)===0){k=T[(k&65535)+(O&(1<<w)-1)];continue t}else if(w&32){n.mode=ru;break e}else{r.msg="invalid literal/length code",n.mode=mr;break e}break}}while(i<o&&a<h);L=E>>3,i-=L,E-=L<<3,O&=(1<<E)-1,r.next_in=i,r.next_out=a,r.avail_in=i<o?5+(o-i):5-(i-o),r.avail_out=a<h?257+(h-a):257-(a-h),n.hold=O,n.bits=E}});var eo=N((bp,Ji)=>{"use strict";c();l();var Yi=Zt(),Et=15,zi=852,Xi=592,Qi=0,nn=1,$i=2,nu=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],iu=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ou=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],su=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Ji.exports=function(r,t,n,i,o,a,s,h){var f=h.bits,u=0,y=0,_=0,p=0,O=0,E=0,T=0,b=0,R=0,C=0,k,w,L,x,S,A=null,q=0,P,re=new Yi.Buf16(Et+1),g=new Yi.Buf16(Et+1),V=null,ue=0,ut,ft,mt;for(u=0;u<=Et;u++)re[u]=0;for(y=0;y<i;y++)re[t[n+y]]++;for(O=f,p=Et;p>=1&&re[p]===0;p--);if(O>p&&(O=p),p===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,h.bits=1,0;for(_=1;_<p&&re[_]===0;_++);for(O<_&&(O=_),b=1,u=1;u<=Et;u++)if(b<<=1,b-=re[u],b<0)return-1;if(b>0&&(r===Qi||p!==1))return-1;for(g[1]=0,u=1;u<Et;u++)g[u+1]=g[u]+re[u];for(y=0;y<i;y++)t[n+y]!==0&&(s[g[t[n+y]]++]=y);if(r===Qi?(A=V=s,P=19):r===nn?(A=nu,q-=257,V=iu,ue-=257,P=256):(A=ou,V=su,P=-1),C=0,y=0,u=_,S=a,E=O,T=0,L=-1,R=1<<O,x=R-1,r===nn&&R>zi||r===$i&&R>Xi)return 1;for(;;){ut=u-T,s[y]<P?(ft=0,mt=s[y]):s[y]>P?(ft=V[ue+s[y]],mt=A[q+s[y]]):(ft=32+64,mt=0),k=1<<u-T,w=1<<E,_=w;do w-=k,o[S+(C>>T)+w]=ut<<24|ft<<16|mt|0;while(w!==0);for(k=1<<u-1;C&k;)k>>=1;if(k!==0?(C&=k-1,C+=k):C=0,y++,--re[u]===0){if(u===p)break;u=t[n+s[y]]}if(u>O&&(C&x)!==L){for(T===0&&(T=O),S+=_,E=u-T,b=1<<E;E+T<p&&(b-=re[E+T],!(b<=0));)E++,b<<=1;if(R+=1<<E,r===nn&&R>zi||r===$i&&R>Xi)return 1;L=C&x,o[L]=O<<24|E<<16|S-a|0}}return C!==0&&(o[S+C]=u-T<<24|64<<16|0),h.bits=O,0}});var Do=N(me=>{"use strict";c();l();var ae=Zt(),cn=Gi(),ve=Ki(),au=Zi(),Yt=eo(),uu=0,ko=1,Io=2,to=4,fu=5,wr=6,ht=0,cu=1,lu=2,le=-2,Ro=-3,ln=-4,du=-5,ro=8,xo=1,no=2,io=3,oo=4,so=5,ao=6,uo=7,fo=8,co=9,lo=10,Er=11,He=12,on=13,ho=14,sn=15,po=16,_o=17,mo=18,wo=19,yr=20,gr=21,yo=22,go=23,Eo=24,bo=25,Oo=26,an=27,To=28,vo=29,F=30,dn=31,hu=32,pu=852,_u=592,mu=15,wu=mu;function So(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function yu(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ae.Buf16(320),this.work=new ae.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ao(e){var r;return!e||!e.state?le:(r=e.state,e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=xo,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new ae.Buf32(pu),r.distcode=r.distdyn=new ae.Buf32(_u),r.sane=1,r.back=-1,ht)}function No(e){var r;return!e||!e.state?le:(r=e.state,r.wsize=0,r.whave=0,r.wnext=0,Ao(e))}function Co(e,r){var t,n;return!e||!e.state||(n=e.state,r<0?(t=0,r=-r):(t=(r>>4)+1,r<48&&(r&=15)),r&&(r<8||r>15))?le:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,No(e))}function Lo(e,r){var t,n;return e?(n=new yu,e.state=n,n.window=null,t=Co(e,r),t!==ht&&(e.state=null),t):le}function gu(e){return Lo(e,wu)}var Po=!0,un,fn;function Eu(e){if(Po){var r;for(un=new ae.Buf32(512),fn=new ae.Buf32(32),r=0;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Yt(ko,e.lens,0,288,un,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Yt(Io,e.lens,0,32,fn,0,e.work,{bits:5}),Po=!1}e.lencode=un,e.lenbits=9,e.distcode=fn,e.distbits=5}function Bo(e,r,t,n){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new ae.Buf8(o.wsize)),n>=o.wsize?(ae.arraySet(o.window,r,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),ae.arraySet(o.window,r,t-n,i,o.wnext),n-=i,n?(ae.arraySet(o.window,r,t-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function bu(e,r){var t,n,i,o,a,s,h,f,u,y,_,p,O,E,T=0,b,R,C,k,w,L,x,S,A=new ae.Buf8(4),q,P,re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return le;t=e.state,t.mode===He&&(t.mode=on),a=e.next_out,i=e.output,h=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,f=t.hold,u=t.bits,y=s,_=h,S=ht;e:for(;;)switch(t.mode){case xo:if(t.wrap===0){t.mode=on;break}for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(t.wrap&2&&f===35615){t.check=0,A[0]=f&255,A[1]=f>>>8&255,t.check=ve(t.check,A,2,0),f=0,u=0,t.mode=no;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",t.mode=F;break}if((f&15)!==ro){e.msg="unknown compression method",t.mode=F;break}if(f>>>=4,u-=4,x=(f&15)+8,t.wbits===0)t.wbits=x;else if(x>t.wbits){e.msg="invalid window size",t.mode=F;break}t.dmax=1<<x,e.adler=t.check=1,t.mode=f&512?lo:He,f=0,u=0;break;case no:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(t.flags=f,(t.flags&255)!==ro){e.msg="unknown compression method",t.mode=F;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=F;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,t.check=ve(t.check,A,2,0)),f=0,u=0,t.mode=io;case io:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.head&&(t.head.time=f),t.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,A[2]=f>>>16&255,A[3]=f>>>24&255,t.check=ve(t.check,A,4,0)),f=0,u=0,t.mode=oo;case oo:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,t.check=ve(t.check,A,2,0)),f=0,u=0,t.mode=so;case so:if(t.flags&1024){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&(A[0]=f&255,A[1]=f>>>8&255,t.check=ve(t.check,A,2,0)),f=0,u=0}else t.head&&(t.head.extra=null);t.mode=ao;case ao:if(t.flags&1024&&(p=t.length,p>s&&(p=s),p&&(t.head&&(x=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),ae.arraySet(t.head.extra,n,o,p,x)),t.flags&512&&(t.check=ve(t.check,n,p,o)),s-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=uo;case uo:if(t.flags&2048){if(s===0)break e;p=0;do x=n[o+p++],t.head&&x&&t.length<65536&&(t.head.name+=String.fromCharCode(x));while(x&&p<s);if(t.flags&512&&(t.check=ve(t.check,n,p,o)),s-=p,o+=p,x)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=fo;case fo:if(t.flags&4096){if(s===0)break e;p=0;do x=n[o+p++],t.head&&x&&t.length<65536&&(t.head.comment+=String.fromCharCode(x));while(x&&p<s);if(t.flags&512&&(t.check=ve(t.check,n,p,o)),s-=p,o+=p,x)break e}else t.head&&(t.head.comment=null);t.mode=co;case co:if(t.flags&512){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f!==(t.check&65535)){e.msg="header crc mismatch",t.mode=F;break}f=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=He;break;case lo:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.adler=t.check=So(f),f=0,u=0,t.mode=Er;case Er:if(t.havedict===0)return e.next_out=a,e.avail_out=h,e.next_in=o,e.avail_in=s,t.hold=f,t.bits=u,lu;e.adler=t.check=1,t.mode=He;case He:if(r===fu||r===wr)break e;case on:if(t.last){f>>>=u&7,u-=u&7,t.mode=an;break}for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}switch(t.last=f&1,f>>>=1,u-=1,f&3){case 0:t.mode=ho;break;case 1:if(Eu(t),t.mode=yr,r===wr){f>>>=2,u-=2;break e}break;case 2:t.mode=_o;break;case 3:e.msg="invalid block type",t.mode=F}f>>>=2,u-=2;break;case ho:for(f>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",t.mode=F;break}if(t.length=f&65535,f=0,u=0,t.mode=sn,r===wr)break e;case sn:t.mode=po;case po:if(p=t.length,p){if(p>s&&(p=s),p>h&&(p=h),p===0)break e;ae.arraySet(i,n,o,p,a),s-=p,o+=p,h-=p,a+=p,t.length-=p;break}t.mode=He;break;case _o:for(;u<14;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(t.nlen=(f&31)+257,f>>>=5,u-=5,t.ndist=(f&31)+1,f>>>=5,u-=5,t.ncode=(f&15)+4,f>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=F;break}t.have=0,t.mode=mo;case mo:for(;t.have<t.ncode;){for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.lens[re[t.have++]]=f&7,f>>>=3,u-=3}for(;t.have<19;)t.lens[re[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,q={bits:t.lenbits},S=Yt(uu,t.lens,0,19,t.lencode,0,t.work,q),t.lenbits=q.bits,S){e.msg="invalid code lengths set",t.mode=F;break}t.have=0,t.mode=wo;case wo:for(;t.have<t.nlen+t.ndist;){for(;T=t.lencode[f&(1<<t.lenbits)-1],b=T>>>24,R=T>>>16&255,C=T&65535,!(b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(C<16)f>>>=b,u-=b,t.lens[t.have++]=C;else{if(C===16){for(P=b+2;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f>>>=b,u-=b,t.have===0){e.msg="invalid bit length repeat",t.mode=F;break}x=t.lens[t.have-1],p=3+(f&3),f>>>=2,u-=2}else if(C===17){for(P=b+3;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=b,u-=b,x=0,p=3+(f&7),f>>>=3,u-=3}else{for(P=b+7;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=b,u-=b,x=0,p=11+(f&127),f>>>=7,u-=7}if(t.have+p>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=F;break}for(;p--;)t.lens[t.have++]=x}}if(t.mode===F)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=F;break}if(t.lenbits=9,q={bits:t.lenbits},S=Yt(ko,t.lens,0,t.nlen,t.lencode,0,t.work,q),t.lenbits=q.bits,S){e.msg="invalid literal/lengths set",t.mode=F;break}if(t.distbits=6,t.distcode=t.distdyn,q={bits:t.distbits},S=Yt(Io,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,q),t.distbits=q.bits,S){e.msg="invalid distances set",t.mode=F;break}if(t.mode=yr,r===wr)break e;case yr:t.mode=gr;case gr:if(s>=6&&h>=258){e.next_out=a,e.avail_out=h,e.next_in=o,e.avail_in=s,t.hold=f,t.bits=u,au(e,_),a=e.next_out,i=e.output,h=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,f=t.hold,u=t.bits,t.mode===He&&(t.back=-1);break}for(t.back=0;T=t.lencode[f&(1<<t.lenbits)-1],b=T>>>24,R=T>>>16&255,C=T&65535,!(b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(R&&(R&240)===0){for(k=b,w=R,L=C;T=t.lencode[L+((f&(1<<k+w)-1)>>k)],b=T>>>24,R=T>>>16&255,C=T&65535,!(k+b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=k,u-=k,t.back+=k}if(f>>>=b,u-=b,t.back+=b,t.length=C,R===0){t.mode=Oo;break}if(R&32){t.back=-1,t.mode=He;break}if(R&64){e.msg="invalid literal/length code",t.mode=F;break}t.extra=R&15,t.mode=yo;case yo:if(t.extra){for(P=t.extra;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=go;case go:for(;T=t.distcode[f&(1<<t.distbits)-1],b=T>>>24,R=T>>>16&255,C=T&65535,!(b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((R&240)===0){for(k=b,w=R,L=C;T=t.distcode[L+((f&(1<<k+w)-1)>>k)],b=T>>>24,R=T>>>16&255,C=T&65535,!(k+b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=k,u-=k,t.back+=k}if(f>>>=b,u-=b,t.back+=b,R&64){e.msg="invalid distance code",t.mode=F;break}t.offset=C,t.extra=R&15,t.mode=Eo;case Eo:if(t.extra){for(P=t.extra;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=F;break}t.mode=bo;case bo:if(h===0)break e;if(p=_-h,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=F;break}p>t.wnext?(p-=t.wnext,O=t.wsize-p):O=t.wnext-p,p>t.length&&(p=t.length),E=t.window}else E=i,O=a-t.offset,p=t.length;p>h&&(p=h),h-=p,t.length-=p;do i[a++]=E[O++];while(--p);t.length===0&&(t.mode=gr);break;case Oo:if(h===0)break e;i[a++]=t.length,h--,t.mode=gr;break;case an:if(t.wrap){for(;u<32;){if(s===0)break e;s--,f|=n[o++]<<u,u+=8}if(_-=h,e.total_out+=_,t.total+=_,_&&(e.adler=t.check=t.flags?ve(t.check,i,_,a-_):cn(t.check,i,_,a-_)),_=h,(t.flags?f:So(f))!==t.check){e.msg="incorrect data check",t.mode=F;break}f=0,u=0}t.mode=To;case To:if(t.wrap&&t.flags){for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=F;break}f=0,u=0}t.mode=vo;case vo:S=cu;break e;case F:S=Ro;break e;case dn:return ln;case hu:default:return le}return e.next_out=a,e.avail_out=h,e.next_in=o,e.avail_in=s,t.hold=f,t.bits=u,(t.wsize||_!==e.avail_out&&t.mode<F&&(t.mode<an||r!==to))&&Bo(e,e.output,e.next_out,_-e.avail_out)?(t.mode=dn,ln):(y-=e.avail_in,_-=e.avail_out,e.total_in+=y,e.total_out+=_,t.total+=_,t.wrap&&_&&(e.adler=t.check=t.flags?ve(t.check,i,_,e.next_out-_):cn(t.check,i,_,e.next_out-_)),e.data_type=t.bits+(t.last?64:0)+(t.mode===He?128:0)+(t.mode===yr||t.mode===sn?256:0),(y===0&&_===0||r===to)&&S===ht&&(S=du),S)}function Ou(e){if(!e||!e.state)return le;var r=e.state;return r.window&&(r.window=null),e.state=null,ht}function Tu(e,r){var t;return!e||!e.state||(t=e.state,(t.wrap&2)===0)?le:(t.head=r,r.done=!1,ht)}function vu(e,r){var t=r.length,n,i,o;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==Er)?le:n.mode===Er&&(i=1,i=cn(i,r,t,0),i!==n.check)?Ro:(o=Bo(e,r,t,t),o?(n.mode=dn,ln):(n.havedict=1,ht))}me.inflateReset=No;me.inflateReset2=Co;me.inflateResetKeep=Ao;me.inflateInit=gu;me.inflateInit2=Lo;me.inflate=bu;me.inflateEnd=Ou;me.inflateGetHeader=Tu;me.inflateSetDictionary=vu;me.inflateInfo="pako inflate (from Nodeca project)"});var Fo=N(bt=>{"use strict";c();l();var br=Zt(),Uo=!0,Mo=!0;try{String.fromCharCode.apply(null,[0])}catch{Uo=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Mo=!1}var zt=new br.Buf8(256);for(Fe=0;Fe<256;Fe++)zt[Fe]=Fe>=252?6:Fe>=248?5:Fe>=240?4:Fe>=224?3:Fe>=192?2:1;var Fe;zt[254]=zt[254]=1;bt.string2buf=function(e){var r,t,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(r=new br.Buf8(s),o=0,i=0;o<s;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?r[o++]=t:t<2048?(r[o++]=192|t>>>6,r[o++]=128|t&63):t<65536?(r[o++]=224|t>>>12,r[o++]=128|t>>>6&63,r[o++]=128|t&63):(r[o++]=240|t>>>18,r[o++]=128|t>>>12&63,r[o++]=128|t>>>6&63,r[o++]=128|t&63);return r};function Ho(e,r){if(r<65534&&(e.subarray&&Mo||!e.subarray&&Uo))return String.fromCharCode.apply(null,br.shrinkBuf(e,r));for(var t="",n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t}bt.buf2binstring=function(e){return Ho(e,e.length)};bt.binstring2buf=function(e){for(var r=new br.Buf8(e.length),t=0,n=r.length;t<n;t++)r[t]=e.charCodeAt(t);return r};bt.buf2string=function(e,r){var t,n,i,o,a=r||e.length,s=new Array(a*2);for(n=0,t=0;t<a;){if(i=e[t++],i<128){s[n++]=i;continue}if(o=zt[i],o>4){s[n++]=65533,t+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&t<a;)i=i<<6|e[t++]&63,o--;if(o>1){s[n++]=65533;continue}i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|i&1023)}return Ho(s,n)};bt.utf8border=function(e,r){var t;for(r=r||e.length,r>e.length&&(r=e.length),t=r-1;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+zt[e[t]]>r?t:r}});var qo=N((xp,jo)=>{"use strict";c();l();jo.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Wo=N((Cp,Go)=>{"use strict";c();l();Go.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Vo=N((Dp,Ko)=>{"use strict";c();l();function Su(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Ko.exports=Su});var Yo=N((Hp,Zo)=>{"use strict";c();l();function Pu(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Zo.exports=Pu});var Xo=N(Qt=>{"use strict";c();l();var Ot=Do(),Xt=Zt(),Or=Fo(),K=qo(),hn=Wo(),ku=Vo(),Iu=Yo(),zo=Object.prototype.toString;function pt(e){if(!(this instanceof pt))return new pt(e);this.options=Xt.assign({chunkSize:16384,windowBits:0,to:""},e||{});var r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ku,this.strm.avail_out=0;var t=Ot.inflateInit2(this.strm,r.windowBits);if(t!==K.Z_OK)throw new Error(hn[t]);if(this.header=new Iu,Ot.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=Or.string2buf(r.dictionary):zo.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=Ot.inflateSetDictionary(this.strm,r.dictionary),t!==K.Z_OK)))throw new Error(hn[t])}pt.prototype.push=function(e,r){var t=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s,h,f,u=!1;if(this.ended)return!1;a=r===~~r?r:r===!0?K.Z_FINISH:K.Z_NO_FLUSH,typeof e=="string"?t.input=Or.binstring2buf(e):zo.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Xt.Buf8(n),t.next_out=0,t.avail_out=n),o=Ot.inflate(t,K.Z_NO_FLUSH),o===K.Z_NEED_DICT&&i&&(o=Ot.inflateSetDictionary(this.strm,i)),o===K.Z_BUF_ERROR&&u===!0&&(o=K.Z_OK,u=!1),o!==K.Z_STREAM_END&&o!==K.Z_OK)return this.onEnd(o),this.ended=!0,!1;t.next_out&&(t.avail_out===0||o===K.Z_STREAM_END||t.avail_in===0&&(a===K.Z_FINISH||a===K.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=Or.utf8border(t.output,t.next_out),h=t.next_out-s,f=Or.buf2string(t.output,s),t.next_out=h,t.avail_out=n-h,h&&Xt.arraySet(t.output,t.output,s,h,0),this.onData(f)):this.onData(Xt.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(u=!0)}while((t.avail_in>0||t.avail_out===0)&&o!==K.Z_STREAM_END);return o===K.Z_STREAM_END&&(a=K.Z_FINISH),a===K.Z_FINISH?(o=Ot.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===K.Z_OK):(a===K.Z_SYNC_FLUSH&&(this.onEnd(K.Z_OK),t.avail_out=0),!0)};pt.prototype.onData=function(e){this.chunks.push(e)};pt.prototype.onEnd=function(e){e===K.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Xt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function pn(e,r){var t=new pt(r);if(t.push(e,!0),t.err)throw t.msg||hn[t.err];return t.result}function Ru(e,r){return r=r||{},r.raw=!0,pn(e,r)}Qt.Inflate=pt;Qt.inflate=pn;Qt.inflateRaw=Ru;Qt.ungzip=pn});var we=N($e=>{"use strict";c();l();Object.defineProperty($e,"__esModule",{value:!0});$e.testnet=$e.regtest=$e.bitcoin=void 0;$e.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};$e.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};$e.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var gn=N(Je=>{"use strict";c();l();Object.defineProperty(Je,"__esModule",{value:!0});Je.encode=Je.decode=Je.check=void 0;function Nu(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return!1;let t=e[5+r];return!(t===0||6+r+t!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||t>1&&e[r+6]===0&&!(e[r+7]&128))}Je.check=Nu;function Cu(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let r=e[3];if(r===0)throw new Error("R length is zero");if(5+r>=e.length)throw new Error("R length is too long");if(e[4+r]!==2)throw new Error("Expected DER integer (2)");let t=e[5+r];if(t===0)throw new Error("S length is zero");if(6+r+t!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(r>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[r+6]&128)throw new Error("S value is negative");if(t>1&&e[r+6]===0&&!(e[r+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+r),s:e.slice(6+r)}}Je.decode=Cu;function Lu(e,r){let t=e.length,n=r.length;if(t===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(t>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(r[0]&128)throw new Error("S value is negative");if(t>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&r[0]===0&&!(r[1]&128))throw new Error("S value excessively padded");let i=d.Buffer.allocUnsafe(6+t+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+t]=2,i[5+t]=r.length,r.copy(i,6+t),i}Je.encode=Lu});var bn=N(vt=>{"use strict";c();l();Object.defineProperty(vt,"__esModule",{value:!0});vt.REVERSE_OPS=vt.OPS=void 0;var En={OP_FALSE:0,OP_0:0,OP_DATA_1:1,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};vt.OPS=En;var is={};vt.REVERSE_OPS=is;for(let e of Object.keys(En)){let r=En[e];is[r]=e}});var ss=N(tt=>{"use strict";c();l();Object.defineProperty(tt,"__esModule",{value:!0});tt.decode=tt.encode=tt.encodingLength=void 0;var et=bn();function os(e){return e<et.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}tt.encodingLength=os;function Bu(e,r,t){let n=os(r);return n===1?e.writeUInt8(r,t):n===2?(e.writeUInt8(et.OPS.OP_PUSHDATA1,t),e.writeUInt8(r,t+1)):n===3?(e.writeUInt8(et.OPS.OP_PUSHDATA2,t),e.writeUInt16LE(r,t+1)):(e.writeUInt8(et.OPS.OP_PUSHDATA4,t),e.writeUInt32LE(r,t+1)),n}tt.encode=Bu;function Du(e,r){let t=e.readUInt8(r),n,i;if(t<et.OPS.OP_PUSHDATA1)n=t,i=1;else if(t===et.OPS.OP_PUSHDATA1){if(r+2>e.length)return null;n=e.readUInt8(r+1),i=2}else if(t===et.OPS.OP_PUSHDATA2){if(r+3>e.length)return null;n=e.readUInt16LE(r+1),i=3}else{if(r+5>e.length)return null;if(t!==et.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(r+1),i=5}return{opcode:t,number:n,size:i}}tt.decode=Du});var as=N(St=>{"use strict";c();l();Object.defineProperty(St,"__esModule",{value:!0});St.encode=St.decode=void 0;function Uu(e,r,t){r=r||4,t=t===void 0?!0:t;let n=e.length;if(n===0)return 0;if(n>r)throw new TypeError("Script number overflow");if(t&&(e[n-1]&127)===0&&(n<=1||(e[n-2]&128)===0))throw new Error("Non-minimally encoded script number");if(n===5){let o=e.readUInt32LE(0),a=e.readUInt8(4);return a&128?-((a&-129)*4294967296+o):a*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=e[o]<<8*o;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}St.decode=Uu;function Mu(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function Hu(e){let r=Math.abs(e),t=Mu(r),n=d.Buffer.allocUnsafe(t),i=e<0;for(let o=0;o<t;++o)n.writeUInt8(r&255,o),r>>=8;return n[t-1]&128?n.writeUInt8(i?128:0,t-1):i&&(n[t-1]|=128),n}St.encode=Hu});var ne=N(v=>{"use strict";c();l();Object.defineProperty(v,"__esModule",{value:!0});v.oneOf=v.Null=v.BufferN=v.Function=v.UInt32=v.UInt8=v.tuple=v.maybe=v.Hex=v.Buffer=v.String=v.Boolean=v.Array=v.Number=v.Hash256bit=v.Hash160bit=v.Buffer256bit=v.isTaptree=v.isTapleaf=v.TAPLEAF_VERSION_MASK=v.Satoshi=v.Signer=v.BIP32Path=v.UInt31=v.isPoint=v.typeforce=void 0;var Pr=Fr(),G=Ue();Object.defineProperty(v,"typeforce",{enumerable:!0,get:function(){return G.typeforce}});var us=Pr.Buffer.alloc(32,0),fs=Pr.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function Fu(e){if(!Pr.Buffer.isBuffer(e)||e.length<33)return!1;let r=e[0],t=e.slice(1,33);if(t.compare(us)===0||t.compare(fs)>=0)return!1;if((r===2||r===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare(us)===0||n.compare(fs)>=0?!1:r===4&&e.length===65}v.isPoint=Fu;var ju=Math.pow(2,31)-1;function qu(e){return G.typeforce.UInt32(e)&&e<=ju}v.UInt31=qu;function cs(e){return G.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}v.BIP32Path=cs;cs.toJSON=()=>"BIP32 derivation path";function Gu(e){return(G.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}v.Signer=Gu;var Wu=21*1e14;function Ku(e){return G.typeforce.UInt53(e)&&e<=Wu}v.Satoshi=Ku;v.TAPLEAF_VERSION_MASK=254;function ls(e){return!e||!("output"in e)||!Pr.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&v.TAPLEAF_VERSION_MASK)===e.version:!0}v.isTapleaf=ls;function ds(e){return(0,v.Array)(e)?e.length!==2?!1:e.every(r=>ds(r)):ls(e)}v.isTaptree=ds;v.Buffer256bit=G.typeforce.BufferN(32);v.Hash160bit=G.typeforce.BufferN(20);v.Hash256bit=G.typeforce.BufferN(32);v.Number=G.typeforce.Number;v.Array=G.typeforce.Array;v.Boolean=G.typeforce.Boolean;v.String=G.typeforce.String;v.Buffer=G.typeforce.Buffer;v.Hex=G.typeforce.Hex;v.maybe=G.typeforce.maybe;v.tuple=G.typeforce.tuple;v.UInt8=G.typeforce.UInt8;v.UInt32=G.typeforce.UInt32;v.Function=G.typeforce.Function;v.BufferN=G.typeforce.BufferN;v.Null=G.typeforce.Null;v.oneOf=G.typeforce.oneOf});var ys=N(de=>{"use strict";c();l();var Vu=de&&de.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Zu=de&&de.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ms=de&&de.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Vu(r,e,t);return Zu(r,e),r};Object.defineProperty(de,"__esModule",{value:!0});de.encode=de.decode=void 0;var ws=ms(gn()),On=ms(ne()),{typeforce:Yu}=On,hs=d.Buffer.alloc(1,0);function ps(e){let r=0;for(;e[r]===0;)++r;return r===e.length?hs:(e=e.slice(r),e[0]&128?d.Buffer.concat([hs,e],1+e.length):e)}function _s(e){e[0]===0&&(e=e.slice(1));let r=d.Buffer.alloc(32,0),t=Math.max(0,32-e.length);return e.copy(r,t),r}function zu(e){let r=e.readUInt8(e.length-1),t=r&-193;if(t<=0||t>=4)throw new Error("Invalid hashType "+r);let n=ws.decode(e.slice(0,-1)),i=_s(n.r),o=_s(n.s);return{signature:d.Buffer.concat([i,o],64),hashType:r}}de.decode=zu;function Xu(e,r){Yu({signature:On.BufferN(64),hashType:On.UInt8},{signature:e,hashType:r});let t=r&-193;if(t<=0||t>=4)throw new Error("Invalid hashType "+r);let n=d.Buffer.allocUnsafe(1);n.writeUInt8(r,0);let i=ps(e.slice(0,32)),o=ps(e.slice(32,64));return d.Buffer.concat([ws.encode(i,o),n])}de.encode=Xu});var Pe=N(U=>{"use strict";c();l();var Qu=U&&U.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),$u=U&&U.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Jt=U&&U.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Qu(r,e,t);return $u(r,e),r};Object.defineProperty(U,"__esModule",{value:!0});U.signature=U.number=U.isCanonicalScriptSignature=U.isDefinedHashType=U.isCanonicalPubKey=U.toStack=U.fromASM=U.toASM=U.decompile=U.compile=U.isPushOnly=U.OPS=void 0;var Ju=Jt(gn()),ie=bn();Object.defineProperty(U,"OPS",{enumerable:!0,get:function(){return ie.OPS}});var Tn=Jt(ss()),gs=Jt(as()),ef=Jt(ys()),Se=Jt(ne()),{typeforce:$t}=Se,Es=ie.OPS.OP_RESERVED;function tf(e){return Se.Number(e)&&(e===ie.OPS.OP_0||e>=ie.OPS.OP_1&&e<=ie.OPS.OP_16||e===ie.OPS.OP_1NEGATE)}function rf(e){return Se.Buffer(e)||tf(e)}function bs(e){return Se.Array(e)&&e.every(rf)}U.isPushOnly=bs;function kr(e){if(e.length===0)return ie.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return Es+e[0];if(e[0]===129)return ie.OPS.OP_1NEGATE}}function Os(e){return d.Buffer.isBuffer(e)}function nf(e){return Se.Array(e)}function Ir(e){return d.Buffer.isBuffer(e)}function Ts(e){if(Os(e))return e;$t(Se.Array,e);let r=e.reduce((i,o)=>Ir(o)?o.length===1&&kr(o)!==void 0?i+1:i+Tn.encodingLength(o.length)+o.length:i+1,0),t=d.Buffer.allocUnsafe(r),n=0;if(e.forEach(i=>{if(Ir(i)){let o=kr(i);if(o!==void 0){t.writeUInt8(o,n),n+=1;return}n+=Tn.encode(t,i.length,n),i.copy(t,n),n+=i.length}else t.writeUInt8(i,n),n+=1}),n!==t.length)throw new Error("Could not decode chunks");return t}U.compile=Ts;function vn(e){if(nf(e))return e;$t(Se.Buffer,e);let r=[],t=0;for(;t<e.length;){let n=e[t];if(n>ie.OPS.OP_0&&n<=ie.OPS.OP_PUSHDATA4){let i=Tn.decode(e,t);if(i===null||(t+=i.size,t+i.number>e.length))return null;let o=e.slice(t,t+i.number);t+=i.number;let a=kr(o);a!==void 0?r.push(a):r.push(o)}else r.push(n),t+=1}return r}U.decompile=vn;function of(e){return Os(e)&&(e=vn(e)),e.map(r=>{if(Ir(r)){let t=kr(r);if(t===void 0)return r.toString("hex");r=t}return ie.REVERSE_OPS[r]}).join(" ")}U.toASM=of;function sf(e){return $t(Se.String,e),Ts(e.split(" ").map(r=>ie.OPS[r]!==void 0?ie.OPS[r]:($t(Se.Hex,r),d.Buffer.from(r,"hex"))))}U.fromASM=sf;function af(e){return e=vn(e),$t(bs,e),e.map(r=>Ir(r)?r:r===ie.OPS.OP_0?d.Buffer.allocUnsafe(0):gs.encode(r-Es))}U.toStack=af;function uf(e){return Se.isPoint(e)}U.isCanonicalPubKey=uf;function vs(e){let r=e;return r&128&&(r=r&-129),r&64&&(r=r&-65),r>0&&r<4}U.isDefinedHashType=vs;function ff(e){return!d.Buffer.isBuffer(e)||!vs(e[e.length-1])?!1:Ju.check(e.slice(0,-1))}U.isCanonicalScriptSignature=ff;U.number=gs;U.signature=ef});var je=N(Pt=>{"use strict";c();l();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.value=Pt.prop=void 0;function cf(e,r,t){Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let n=t.call(this);return this[r]=n,n},set(n){Object.defineProperty(this,r,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}Pt.prop=cf;function lf(e){let r;return()=>(r!==void 0||(r=e()),r)}Pt.value=lf});var Is=N(ke=>{"use strict";c();l();var df=ke&&ke.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),hf=ke&&ke.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ks=ke&&ke.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&df(r,e,t);return hf(r,e),r};Object.defineProperty(ke,"__esModule",{value:!0});ke.p2data=void 0;var pf=we(),Rr=ks(Pe()),qe=ne(),Ss=ks(je()),Ps=Rr.OPS;function _f(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function mf(e,r){if(!e.data&&!e.output)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,qe.typeforce)({network:qe.typeforce.maybe(qe.typeforce.Object),output:qe.typeforce.maybe(qe.typeforce.Buffer),data:qe.typeforce.maybe(qe.typeforce.arrayOf(qe.typeforce.Buffer))},e);let t=e.network||pf.bitcoin,n={name:"embed",network:t};if(Ss.prop(n,"output",()=>{if(!!e.data)return Rr.compile([Ps.OP_RETURN].concat(e.data))}),Ss.prop(n,"data",()=>{if(!!e.output)return Rr.decompile(e.output).slice(1)}),r.validate&&e.output){let i=Rr.decompile(e.output);if(i[0]!==Ps.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(qe.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!_f(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}ke.p2data=mf});var As=N(Ie=>{"use strict";c();l();var wf=Ie&&Ie.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),yf=Ie&&Ie.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),xs=Ie&&Ie.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&wf(r,e,t);return yf(r,e),r};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.p2ms=void 0;var gf=we(),kt=xs(Pe()),z=ne(),rt=xs(je()),It=kt.OPS,xr=It.OP_RESERVED;function Rs(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function Ef(e,r){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{});function t(h){return kt.isCanonicalScriptSignature(h)||(r.allowIncomplete&&h===It.OP_0)!==void 0}(0,z.typeforce)({network:z.typeforce.maybe(z.typeforce.Object),m:z.typeforce.maybe(z.typeforce.Number),n:z.typeforce.maybe(z.typeforce.Number),output:z.typeforce.maybe(z.typeforce.Buffer),pubkeys:z.typeforce.maybe(z.typeforce.arrayOf(z.isPoint)),signatures:z.typeforce.maybe(z.typeforce.arrayOf(t)),input:z.typeforce.maybe(z.typeforce.Buffer)},e);let i={network:e.network||gf.bitcoin},o=[],a=!1;function s(h){a||(a=!0,o=kt.decompile(h),i.m=o[0]-xr,i.n=o[o.length-2]-xr,i.pubkeys=o.slice(1,-2))}if(rt.prop(i,"output",()=>{if(!!e.m&&!!i.n&&!!e.pubkeys)return kt.compile([].concat(xr+e.m,e.pubkeys,xr+i.n,It.OP_CHECKMULTISIG))}),rt.prop(i,"m",()=>{if(!!i.output)return s(i.output),i.m}),rt.prop(i,"n",()=>{if(!!i.pubkeys)return i.pubkeys.length}),rt.prop(i,"pubkeys",()=>{if(!!e.output)return s(e.output),i.pubkeys}),rt.prop(i,"signatures",()=>{if(!!e.input)return kt.decompile(e.input).slice(1)}),rt.prop(i,"input",()=>{if(!!e.signatures)return kt.compile([It.OP_0].concat(e.signatures))}),rt.prop(i,"witness",()=>{if(!!i.input)return[]}),rt.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),r.validate){if(e.output){if(s(e.output),!z.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!z.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==It.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(h=>(0,z.isPoint)(h)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!Rs(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==It.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(t))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!Rs(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}Ie.p2ms=Ef});var Ls=N(Re=>{"use strict";c();l();var bf=Re&&Re.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Of=Re&&Re.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Cs=Re&&Re.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&bf(r,e,t);return Of(r,e),r};Object.defineProperty(Re,"__esModule",{value:!0});Re.p2pk=void 0;var Tf=we(),xt=Cs(Pe()),ye=ne(),Rt=Cs(je()),Ns=xt.OPS;function vf(e,r){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,ye.typeforce)({network:ye.typeforce.maybe(ye.typeforce.Object),output:ye.typeforce.maybe(ye.typeforce.Buffer),pubkey:ye.typeforce.maybe(ye.isPoint),signature:ye.typeforce.maybe(xt.isCanonicalScriptSignature),input:ye.typeforce.maybe(ye.typeforce.Buffer)},e);let t=Rt.value(()=>xt.decompile(e.input)),n=e.network||Tf.bitcoin,i={name:"p2pk",network:n};if(Rt.prop(i,"output",()=>{if(!!e.pubkey)return xt.compile([e.pubkey,Ns.OP_CHECKSIG])}),Rt.prop(i,"pubkey",()=>{if(!!e.output)return e.output.slice(1,-1)}),Rt.prop(i,"signature",()=>{if(!!e.input)return t()[0]}),Rt.prop(i,"input",()=>{if(!!e.signature)return xt.compile([e.signature])}),Rt.prop(i,"witness",()=>{if(!!i.input)return[]}),r.validate){if(e.output){if(e.output[e.output.length-1]!==Ns.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,ye.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(t().length!==1)throw new TypeError("Input is invalid");if(!xt.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}Re.p2pk=vf});var Nt=N(he=>{"use strict";c();l();Object.defineProperty(he,"__esModule",{value:!0});he.taggedHash=he.hash256=he.hash160=he.sha256=he.ripemd160=void 0;var Bs=Ue();function Ds(e){return d.Buffer.from(Bs.base.ripemd160(e))}he.ripemd160=Ds;function At(e){return d.Buffer.from(Bs.base.sha256(e))}he.sha256=At;function Sf(e){return Ds(At(e))}he.hash160=Sf;function Pf(e){return At(At(e))}he.hash256=Pf;var kf=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],If=Object.fromEntries(kf.map(e=>{let r=At(d.Buffer.from(e));return[e,d.Buffer.concat([r,r])]}));function Rf(e,r){return At(d.Buffer.concat([If[e],r]))}he.taggedHash=Rf});var Ms=N(xe=>{"use strict";c();l();var xf=xe&&xe.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Af=xe&&xe.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Pn=xe&&xe.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&xf(r,e,t);return Af(r,e),r};Object.defineProperty(xe,"__esModule",{value:!0});xe.p2pkh=void 0;var Sn=Pn(Nt()),Nf=we(),Ct=Pn(Pe()),te=ne(),Ge=Pn(je()),nt=Ct.OPS,Us=Ue();function Cf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,te.typeforce)({network:te.typeforce.maybe(te.typeforce.Object),address:te.typeforce.maybe(te.typeforce.String),hash:te.typeforce.maybe(te.typeforce.BufferN(20)),output:te.typeforce.maybe(te.typeforce.BufferN(25)),pubkey:te.typeforce.maybe(te.isPoint),signature:te.typeforce.maybe(Ct.isCanonicalScriptSignature),input:te.typeforce.maybe(te.typeforce.Buffer)},e);let t=Ge.value(()=>{let a=Us.base.fromBase58Check(e.address),s=a.readUInt8(0),h=a.slice(1);return{version:s,hash:h}}),n=Ge.value(()=>Ct.decompile(e.input)),i=e.network||Nf.bitcoin,o={name:"p2pkh",network:i};if(Ge.prop(o,"address",()=>{if(!o.hash)return;let a=d.Buffer.allocUnsafe(21);return a.writeUInt8(i.pubKeyHash,0),o.hash.copy(a,1),Us.base.toBase58Check(a)}),Ge.prop(o,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return t().hash;if(e.pubkey||o.pubkey)return Sn.hash160(e.pubkey||o.pubkey)}),Ge.prop(o,"output",()=>{if(!!o.hash)return Ct.compile([nt.OP_DUP,nt.OP_HASH160,o.hash,nt.OP_EQUALVERIFY,nt.OP_CHECKSIG])}),Ge.prop(o,"pubkey",()=>{if(!!e.input)return n()[1]}),Ge.prop(o,"signature",()=>{if(!!e.input)return n()[0]}),Ge.prop(o,"input",()=>{if(!!e.pubkey&&!!e.signature)return Ct.compile([e.signature,e.pubkey])}),Ge.prop(o,"witness",()=>{if(!!o.input)return[]}),r.validate){let a=d.Buffer.from([]);if(e.address){if(t().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(t().hash.length!==20)throw new TypeError("Invalid address");a=t().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==nt.OP_DUP||e.output[1]!==nt.OP_HASH160||e.output[2]!==20||e.output[23]!==nt.OP_EQUALVERIFY||e.output[24]!==nt.OP_CHECKSIG)throw new TypeError("Output is invalid");let s=e.output.slice(3,23);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.pubkey){let s=Sn.hash160(e.pubkey);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.input){let s=n();if(s.length!==2)throw new TypeError("Input is invalid");if(!Ct.isCanonicalScriptSignature(s[0]))throw new TypeError("Input has invalid signature");if(!(0,te.isPoint)(s[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(s[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(s[1]))throw new TypeError("Pubkey mismatch");let h=Sn.hash160(s[1]);if(a.length>0&&!a.equals(h))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}xe.p2pkh=Cf});var js=N(Ne=>{"use strict";c();l();var Lf=Ne&&Ne.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Bf=Ne&&Ne.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),kn=Ne&&Ne.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Lf(r,e,t);return Bf(r,e),r};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.p2sh=void 0;var Hs=kn(Nt()),Df=we(),We=kn(Pe()),j=ne(),Ae=kn(je()),Fs=Ue(),Ar=We.OPS;function Uf(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function Mf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,j.typeforce)({network:j.typeforce.maybe(j.typeforce.Object),address:j.typeforce.maybe(j.typeforce.String),hash:j.typeforce.maybe(j.typeforce.BufferN(20)),output:j.typeforce.maybe(j.typeforce.BufferN(23)),redeem:j.typeforce.maybe({network:j.typeforce.maybe(j.typeforce.Object),output:j.typeforce.maybe(j.typeforce.Buffer),input:j.typeforce.maybe(j.typeforce.Buffer),witness:j.typeforce.maybe(j.typeforce.arrayOf(j.typeforce.Buffer))}),input:j.typeforce.maybe(j.typeforce.Buffer),witness:j.typeforce.maybe(j.typeforce.arrayOf(j.typeforce.Buffer))},e);let t=e.network;t||(t=e.redeem&&e.redeem.network||Df.bitcoin);let n={network:t},i=Ae.value(()=>{let s=Fs.base.fromBase58Check(e.address),h=s.readUInt8(0),f=s.slice(1);return{version:h,hash:f}}),o=Ae.value(()=>We.decompile(e.input)),a=Ae.value(()=>{let s=o();return{network:t,output:s[s.length-1],input:We.compile(s.slice(0,-1)),witness:e.witness||[]}});if(Ae.prop(n,"address",()=>{if(!n.hash)return;let s=d.Buffer.allocUnsafe(21);return s.writeUInt8(n.network.scriptHash,0),n.hash.copy(s,1),Fs.base.toBase58Check(s)}),Ae.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return Hs.hash160(n.redeem.output)}),Ae.prop(n,"output",()=>{if(!!n.hash)return We.compile([Ar.OP_HASH160,n.hash,Ar.OP_EQUAL])}),Ae.prop(n,"redeem",()=>{if(!!e.input)return a()}),Ae.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return We.compile([].concat(We.decompile(e.redeem.input),e.redeem.output))}),Ae.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),Ae.prop(n,"name",()=>{let s=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&s.push(n.redeem.name),s.join("-")}),r.validate){let s=d.Buffer.from([]);if(e.address){if(i().version!==t.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");s=i().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==Ar.OP_HASH160||e.output[1]!==20||e.output[22]!==Ar.OP_EQUAL)throw new TypeError("Output is invalid");let f=e.output.slice(2,22);if(s.length>0&&!s.equals(f))throw new TypeError("Hash mismatch");s=f}let h=f=>{if(f.output){let u=We.decompile(f.output);if(!u||u.length<1)throw new TypeError("Redeem.output too short");let y=Hs.hash160(f.output);if(s.length>0&&!s.equals(y))throw new TypeError("Hash mismatch");s=y}if(f.input){let u=f.input.length>0,y=f.witness&&f.witness.length>0;if(!u&&!y)throw new TypeError("Empty input");if(u&&y)throw new TypeError("Input and witness provided");if(u){let _=We.decompile(f.input);if(!We.isPushOnly(_))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let f=o();if(!f||f.length<1)throw new TypeError("Input too short");if(!d.Buffer.isBuffer(a().output))throw new TypeError("Input is invalid");h(a())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==t)throw new TypeError("Network mismatch");if(e.input){let f=a();if(e.redeem.output&&!e.redeem.output.equals(f.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(f.input))throw new TypeError("Redeem.input mismatch")}h(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!Uf(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}Ne.p2sh=Mf});var Gs=N(Ce=>{"use strict";c();l();var Hf=Ce&&Ce.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Ff=Ce&&Ce.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Rn=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Hf(r,e,t);return Ff(r,e),r};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.p2wpkh=void 0;var In=Rn(Nt()),jf=we(),Cr=Rn(Pe()),X=ne(),it=Rn(je()),Nr=Ue(),qs=Cr.OPS,qf=d.Buffer.alloc(0);function Gf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,X.typeforce)({address:X.typeforce.maybe(X.typeforce.String),hash:X.typeforce.maybe(X.typeforce.BufferN(20)),input:X.typeforce.maybe(X.typeforce.BufferN(0)),network:X.typeforce.maybe(X.typeforce.Object),output:X.typeforce.maybe(X.typeforce.BufferN(22)),pubkey:X.typeforce.maybe(X.isPoint),signature:X.typeforce.maybe(Cr.isCanonicalScriptSignature),witness:X.typeforce.maybe(X.typeforce.arrayOf(X.typeforce.Buffer))},e);let t=it.value(()=>{let o=Nr.base.bech32.decode(e.address),a=o.words.shift(),s=Nr.base.bech32.fromWords(o.words);return{version:a,prefix:o.prefix,data:d.Buffer.from(s)}}),n=e.network||jf.bitcoin,i={name:"p2wpkh",network:n};if(it.prop(i,"address",()=>{if(!i.hash)return;let o=Nr.base.bech32.toWords(i.hash);return o.unshift(0),Nr.base.bech32.encode(n.bech32,o)}),it.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return t().data;if(e.pubkey||i.pubkey)return In.hash160(e.pubkey||i.pubkey)}),it.prop(i,"output",()=>{if(!!i.hash)return Cr.compile([qs.OP_0,i.hash])}),it.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(!!e.witness)return e.witness[1]}),it.prop(i,"signature",()=>{if(!!e.witness)return e.witness[0]}),it.prop(i,"input",()=>{if(!!i.witness)return qf}),it.prop(i,"witness",()=>{if(!!e.pubkey&&!!e.signature)return[e.signature,e.pubkey]}),r.validate){let o=d.Buffer.from([]);if(e.address){if(n&&n.bech32!==t().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(t().version!==0)throw new TypeError("Invalid address version");if(t().data.length!==20)throw new TypeError("Invalid address data");o=t().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==qs.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");o=e.output.slice(2)}if(e.pubkey){let a=In.hash160(e.pubkey);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch");if(o=a,!(0,X.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!Cr.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,X.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let a=In.hash160(e.witness[1]);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}Ce.p2wpkh=Gf});var Vs=N(Le=>{"use strict";c();l();var Wf=Le&&Le.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Kf=Le&&Le.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),An=Le&&Le.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Wf(r,e,t);return Kf(r,e),r};Object.defineProperty(Le,"__esModule",{value:!0});Le.p2wsh=void 0;var Ws=An(Nt()),Vf=we(),ot=An(Pe()),M=ne(),Ke=An(je()),Lr=Ue(),Ks=ot.OPS,xn=d.Buffer.alloc(0);function Zf(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function Br(e){return!!(d.Buffer.isBuffer(e)&&e.length===65&&e[0]===4&&(0,M.isPoint)(e))}function Yf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,M.typeforce)({network:M.typeforce.maybe(M.typeforce.Object),address:M.typeforce.maybe(M.typeforce.String),hash:M.typeforce.maybe(M.typeforce.BufferN(32)),output:M.typeforce.maybe(M.typeforce.BufferN(34)),redeem:M.typeforce.maybe({input:M.typeforce.maybe(M.typeforce.Buffer),network:M.typeforce.maybe(M.typeforce.Object),output:M.typeforce.maybe(M.typeforce.Buffer),witness:M.typeforce.maybe(M.typeforce.arrayOf(M.typeforce.Buffer))}),input:M.typeforce.maybe(M.typeforce.BufferN(0)),witness:M.typeforce.maybe(M.typeforce.arrayOf(M.typeforce.Buffer))},e);let t=Ke.value(()=>{let a=Lr.base.bech32.decode(e.address),s=a.words.shift(),h=Lr.base.bech32.fromWords(a.words);return{version:s,prefix:a.prefix,data:d.Buffer.from(h)}}),n=Ke.value(()=>ot.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||Vf.bitcoin);let o={network:i};if(Ke.prop(o,"address",()=>{if(!o.hash)return;let a=Lr.base.bech32.toWords(o.hash);return a.unshift(0),Lr.base.bech32.encode(i.bech32,a)}),Ke.prop(o,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return t().data;if(o.redeem&&o.redeem.output)return Ws.sha256(o.redeem.output)}),Ke.prop(o,"output",()=>{if(!!o.hash)return ot.compile([Ks.OP_0,o.hash])}),Ke.prop(o,"redeem",()=>{if(!!e.witness)return{output:e.witness[e.witness.length-1],input:xn,witness:e.witness.slice(0,-1)}}),Ke.prop(o,"input",()=>{if(!!o.witness)return xn}),Ke.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let a=ot.toStack(n());return o.redeem=Object.assign({witness:a},e.redeem),o.redeem.input=xn,[].concat(a,e.redeem.output)}if(!!e.redeem&&!!e.redeem.output&&!!e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),Ke.prop(o,"name",()=>{let a=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&a.push(o.redeem.name),a.join("-")}),r.validate){let a=d.Buffer.from([]);if(e.address){if(t().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(t().version!==0)throw new TypeError("Invalid address version");if(t().data.length!==32)throw new TypeError("Invalid address data");a=t().data}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==Ks.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let s=e.output.slice(2);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(ot.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");let s=Ws.sha256(e.redeem.output);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.redeem.input&&!ot.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!Zf(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(Br)||e.redeem.output&&(ot.decompile(e.redeem.output)||[]).some(Br))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let s=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(s))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(Br)||(ot.decompile(s)||[]).some(Br))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}Le.p2wsh=Yf});var zs=N((Km,Ys)=>{"use strict";c();l();var Nn=ka().Buffer,zf=9007199254740991;function Cn(e){if(e<0||e>zf||e%1!==0)throw new RangeError("value out of range")}function er(e,r,t){if(Cn(e),r||(r=Nn.allocUnsafe(Zs(e))),!Nn.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return t||(t=0),e<253?(r.writeUInt8(e,t),er.bytes=1):e<=65535?(r.writeUInt8(253,t),r.writeUInt16LE(e,t+1),er.bytes=3):e<=4294967295?(r.writeUInt8(254,t),r.writeUInt32LE(e,t+1),er.bytes=5):(r.writeUInt8(255,t),r.writeUInt32LE(e>>>0,t+1),r.writeUInt32LE(e/4294967296|0,t+5),er.bytes=9),r}function tr(e,r){if(!Nn.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var t=e.readUInt8(r);if(t<253)return tr.bytes=1,t;if(t===253)return tr.bytes=3,e.readUInt16LE(r+1);if(t===254)return tr.bytes=5,e.readUInt32LE(r+1);tr.bytes=9;var n=e.readUInt32LE(r+1),i=e.readUInt32LE(r+5),o=i*4294967296+n;return Cn(o),o}function Zs(e){return Cn(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Ys.exports={encode:er,decode:tr,encodingLength:Zs}});var ta=N(W=>{"use strict";c();l();var Xf=W&&W.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Qf=W&&W.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Xs=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Xf(r,e,t);return Qf(r,e),r};Object.defineProperty(W,"__esModule",{value:!0});W.BufferReader=W.BufferWriter=W.cloneBuffer=W.reverseBuffer=W.writeUInt64LE=W.readUInt64LE=W.varuint=void 0;var _t=Xs(ne()),{typeforce:Qs}=_t,rr=Xs(zs());W.varuint=rr;function $s(e,r){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>r)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function Js(e,r){let t=e.readUInt32LE(r),n=e.readUInt32LE(r+4);return n*=4294967296,$s(n+t,9007199254740991),n+t}W.readUInt64LE=Js;function ea(e,r,t){return $s(r,9007199254740991),e.writeInt32LE(r&-1,t),e.writeUInt32LE(Math.floor(r/4294967296),t+4),t+8}W.writeUInt64LE=ea;function $f(e){if(e.length<1)return e;let r=e.length-1,t=0;for(let n=0;n<e.length/2;n++)t=e[n],e[n]=e[r],e[r]=t,r--;return e}W.reverseBuffer=$f;function Jf(e){let r=d.Buffer.allocUnsafe(e.length);return e.copy(r),r}W.cloneBuffer=Jf;var nr=class{static withCapacity(r){return new nr(d.Buffer.alloc(r))}constructor(r,t=0){this.buffer=r,this.offset=t,Qs(_t.tuple(_t.Buffer,_t.UInt32),[r,t])}writeUInt8(r){this.offset=this.buffer.writeUInt8(r,this.offset)}writeInt32(r){this.offset=this.buffer.writeInt32LE(r,this.offset)}writeUInt32(r){this.offset=this.buffer.writeUInt32LE(r,this.offset)}writeUInt64(r){this.offset=ea(this.buffer,r,this.offset)}writeVarInt(r){rr.encode(r,this.buffer,this.offset),this.offset+=rr.encode.bytes}writeSlice(r){if(this.buffer.length<this.offset+r.length)throw new Error("Cannot write slice out of bounds");this.offset+=r.copy(this.buffer,this.offset)}writeVarSlice(r){this.writeVarInt(r.length),this.writeSlice(r)}writeVector(r){this.writeVarInt(r.length),r.forEach(t=>this.writeVarSlice(t))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};W.BufferWriter=nr;var Ln=class{constructor(r,t=0){this.buffer=r,this.offset=t,Qs(_t.tuple(_t.Buffer,_t.UInt32),[r,t])}readUInt8(){let r=this.buffer.readUInt8(this.offset);return this.offset++,r}readInt32(){let r=this.buffer.readInt32LE(this.offset);return this.offset+=4,r}readUInt32(){let r=this.buffer.readUInt32LE(this.offset);return this.offset+=4,r}readUInt64(){let r=Js(this.buffer,this.offset);return this.offset+=8,r}readVarInt(){let r=rr.decode(this.buffer,this.offset);return this.offset+=rr.decode.bytes,r}readSlice(r){if(this.buffer.length<this.offset+r)throw new Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+r);return this.offset+=r,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let r=this.readVarInt(),t=[];for(let n=0;n<r;n++)t.push(this.readVarSlice());return t}};W.BufferReader=Ln});var ia=N(Lt=>{"use strict";c();l();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.taprootTweakPubkey=Lt.taprootTweakPrivKey=void 0;var ec=Ue(),Dn=ec.signUtil.schnorr.secp256k1,Un=Dn.schnorr,ra=Dn.secp256k1.ProjectivePoint,Bn=Dn.secp256k1.CURVE.n;function na(e,r){let t=Un.utils,n=t.taggedHash("TapTweak",e,r),i=t.bytesToNumberBE(n);if(i>=Bn)throw new Error("tweak higher than curve order");return i}function tc(e,r=new Uint8Array){let t=Un.utils,n=t.bytesToNumberBE(e),i=ra.fromPrivateKey(n),o=i.hasEvenY()?n:t.mod(-n,Bn),a=t.pointToBytes(i),s=na(a,r);return t.numberToBytesBE(t.mod(o+s,Bn),32)}Lt.taprootTweakPrivKey=tc;function rc(e,r){r||(r=new Uint8Array);let t=Un.utils,n=na(e,r),o=t.lift_x(t.bytesToNumberBE(e)).add(ra.fromPrivateKey(n)),a=o.hasEvenY()?0:1;return[t.pointToBytes(o),a]}Lt.taprootTweakPubkey=rc});var aa=N(H=>{"use strict";c();l();var nc=H&&H.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ic=H&&H.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),oc=H&&H.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&nc(r,e,t);return ic(r,e),r};Object.defineProperty(H,"__esModule",{value:!0});H.tweakKey=H.tapTweakHash=H.tapleafHash=H.findScriptPath=H.toHashTree=H.rootHashFromPath=H.MAX_TAPTREE_DEPTH=H.LEAF_VERSION_TAPSCRIPT=void 0;var st=Fr(),jn=oc(Nt()),oa=ta(),sc=ne(),ac=ia();H.LEAF_VERSION_TAPSCRIPT=192;H.MAX_TAPTREE_DEPTH=128;var uc=e=>"left"in e&&"right"in e;function fc(e,r){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let t=(e.length-33)/32,n=r;for(let i=0;i<t;i++){let o=e.slice(33+32*i,65+32*i);n.compare(o)<0?n=Fn(n,o):n=Fn(o,n)}return n}H.rootHashFromPath=fc;function Mn(e){if((0,sc.isTapleaf)(e))return{hash:sa(e)};let r=[Mn(e[0]),Mn(e[1])];r.sort((i,o)=>i.hash.compare(o.hash));let[t,n]=r;return{hash:Fn(t.hash,n.hash),left:t,right:n}}H.toHashTree=Mn;function Hn(e,r){if(uc(e)){let t=Hn(e.left,r);if(t!==void 0)return[...t,e.right.hash];let n=Hn(e.right,r);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(r))return[]}H.findScriptPath=Hn;function sa(e){let r=e.version||H.LEAF_VERSION_TAPSCRIPT;return jn.taggedHash("TapLeaf",st.Buffer.concat([st.Buffer.from([r]),dc(e.output)]))}H.tapleafHash=sa;function cc(e,r){return jn.taggedHash("TapTweak",st.Buffer.concat(r?[e,r]:[e]))}H.tapTweakHash=cc;function lc(e,r){if(!st.Buffer.isBuffer(e)||e.length!==32||r&&r.length!==32)return null;let t=(0,ac.taprootTweakPubkey)(e,r);return{parity:t[1],x:st.Buffer.from(t[0])}}H.tweakKey=lc;function Fn(e,r){return jn.taggedHash("TapBranch",st.Buffer.concat([e,r]))}function dc(e){let r=oa.varuint.encodingLength(e.length),t=st.Buffer.allocUnsafe(r);return oa.varuint.encode(e.length,t),st.Buffer.concat([t,e])}});var la=N(Be=>{"use strict";c();l();var hc=Be&&Be.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),pc=Be&&Be.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ca=Be&&Be.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&hc(r,e,t);return pc(r,e),r};Object.defineProperty(Be,"__esModule",{value:!0});Be.p2tr=void 0;var Dr=Fr(),_c=we(),qn=ca(Pe()),D=ne(),oe=aa(),pe=ca(je()),Ur=Ue(),ua=qn.OPS,fa=1,mc=80;function wc(e,r){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,D.typeforce)({address:D.typeforce.maybe(D.typeforce.String),input:D.typeforce.maybe(D.typeforce.BufferN(0)),network:D.typeforce.maybe(D.typeforce.Object),output:D.typeforce.maybe(D.typeforce.BufferN(34)),internalPubkey:D.typeforce.maybe(D.typeforce.BufferN(32)),hash:D.typeforce.maybe(D.typeforce.BufferN(32)),pubkey:D.typeforce.maybe(D.typeforce.BufferN(32)),witness:D.typeforce.maybe(D.typeforce.arrayOf(D.typeforce.Buffer)),scriptTree:D.typeforce.maybe(D.isTaptree),redeem:D.typeforce.maybe({output:D.typeforce.maybe(D.typeforce.Buffer),redeemVersion:D.typeforce.maybe(D.typeforce.Number),witness:D.typeforce.maybe(D.typeforce.arrayOf(D.typeforce.Buffer))}),redeemVersion:D.typeforce.maybe(D.typeforce.Number)},e);let t=pe.value(()=>{let s=Ur.base.bech32m.decode(e.address),h=s.words.shift(),f=Ur.base.bech32m.fromWords(s.words);return{version:h,prefix:s.prefix,data:Dr.Buffer.from(f)}}),n=pe.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===mc?e.witness.slice(0,-1):e.witness.slice()}),i=pe.value(()=>{if(e.scriptTree)return(0,oe.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),o=e.network||_c.bitcoin,a={name:"p2tr",network:o};if(pe.prop(a,"address",()=>{if(!a.pubkey)return;let s=Ur.base.bech32m.toWords(a.pubkey);return s.unshift(fa),Ur.base.bech32m.encode(o.bech32,s)}),pe.prop(a,"hash",()=>{let s=i();if(s)return s.hash;let h=n();if(h&&h.length>1){let f=h[h.length-1],u=f[0]&D.TAPLEAF_VERSION_MASK,y=h[h.length-2],_=(0,oe.tapleafHash)({output:y,version:u});return(0,oe.rootHashFromPath)(f,_)}return null}),pe.prop(a,"output",()=>{if(!!a.pubkey)return qn.compile([ua.OP_1,a.pubkey])}),pe.prop(a,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:oe.LEAF_VERSION_TAPSCRIPT),pe.prop(a,"redeem",()=>{let s=n();if(!(!s||s.length<2))return{output:s[s.length-2],witness:s.slice(0,-2),redeemVersion:s[s.length-1][0]&D.TAPLEAF_VERSION_MASK}}),pe.prop(a,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return t().data;if(a.internalPubkey){let s=(0,oe.tweakKey)(a.internalPubkey,a.hash);if(s)return s.x}}),pe.prop(a,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let s=n();if(s&&s.length>1)return s[s.length-1].slice(1,33)}),pe.prop(a,"signature",()=>{if(e.signature)return e.signature;let s=n();if(!(!s||s.length!==1))return s[0]}),pe.prop(a,"witness",()=>{if(e.witness)return e.witness;let s=i();if(s&&e.redeem&&e.redeem.output&&e.internalPubkey){let h=(0,oe.tapleafHash)({output:e.redeem.output,version:a.redeemVersion}),f=(0,oe.findScriptPath)(s,h);if(!f)return;let u=(0,oe.tweakKey)(e.internalPubkey,s.hash);if(!u)return;let y=Dr.Buffer.concat([Dr.Buffer.from([a.redeemVersion|u.parity]),e.internalPubkey].concat(f));return[e.redeem.output,y]}if(e.signature)return[e.signature]}),r.validate){let s=Dr.Buffer.from([]);if(e.address){if(o&&o.bech32!==t().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(t().version!==fa)throw new TypeError("Invalid address version");if(t().data.length!==32)throw new TypeError("Invalid address data");s=t().data}if(e.pubkey){if(s.length>0&&!s.equals(e.pubkey))throw new TypeError("Pubkey mismatch");s=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==ua.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(s.length>0&&!s.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");s=e.output.slice(2)}if(e.internalPubkey){let u=(0,oe.tweakKey)(e.internalPubkey,a.hash);if(s.length>0&&!s.equals(u.x))throw new TypeError("Pubkey mismatch");s=u.x}if(s&&s.length&&s.length!==32)throw new TypeError("Invalid pubkey for p2tr");let h=i();if(e.hash&&h&&!e.hash.equals(h.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&h){let u=(0,oe.tapleafHash)({output:e.redeem.output,version:a.redeemVersion});if(!(0,oe.findScriptPath)(h,u))throw new TypeError("Redeem script not in tree")}let f=n();if(e.redeem&&a.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==a.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(qn.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(a.redeem.output&&!e.redeem.output.equals(a.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&a.redeem.witness&&!yc(e.redeem.witness,a.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(f&&f.length)if(f.length===1){if(e.signature&&!e.signature.equals(f[0]))throw new TypeError("Signature mismatch")}else{let u=f[f.length-1];if(u.length<33)throw new TypeError(`The control-block length is too small. Got ${u.length}, expected min 33.`);if((u.length-33)%32!==0)throw new TypeError(`The control-block length of ${u.length} is incorrect!`);let y=(u.length-33)/32;if(y>128)throw new TypeError(`The script path is too long. Got ${y}, expected max 128.`);let _=u.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(_))throw new TypeError("Internal pubkey mismatch");if(_.length!==32)throw new TypeError("Invalid internalPubkey for p2tr witness");let p=u[0]&D.TAPLEAF_VERSION_MASK,O=f[f.length-2],E=(0,oe.tapleafHash)({output:O,version:p}),T=(0,oe.rootHashFromPath)(u,E),b=(0,oe.tweakKey)(_,T);if(!b)throw new TypeError("Invalid outputKey for p2tr witness");if(s.length&&!s.equals(b.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(b.parity!==(u[0]&1))throw new Error("Incorrect parity")}}return Object.assign(a,e)}Be.p2tr=wc;function yc(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}});var da=N(Q=>{"use strict";c();l();Object.defineProperty(Q,"__esModule",{value:!0});Q.p2tr=Q.p2wsh=Q.p2wpkh=Q.p2sh=Q.p2pkh=Q.p2pk=Q.p2ms=Q.embed=void 0;var gc=Is();Object.defineProperty(Q,"embed",{enumerable:!0,get:function(){return gc.p2data}});var Ec=As();Object.defineProperty(Q,"p2ms",{enumerable:!0,get:function(){return Ec.p2ms}});var bc=Ls();Object.defineProperty(Q,"p2pk",{enumerable:!0,get:function(){return bc.p2pk}});var Oc=Ms();Object.defineProperty(Q,"p2pkh",{enumerable:!0,get:function(){return Oc.p2pkh}});var Tc=js();Object.defineProperty(Q,"p2sh",{enumerable:!0,get:function(){return Tc.p2sh}});var vc=Gs();Object.defineProperty(Q,"p2wpkh",{enumerable:!0,get:function(){return vc.p2wpkh}});var Sc=Vs();Object.defineProperty(Q,"p2wsh",{enumerable:!0,get:function(){return Sc.p2wsh}});var Pc=la();Object.defineProperty(Q,"p2tr",{enumerable:!0,get:function(){return Pc.p2tr}})});var va=N(Z=>{"use strict";c();l();var kc=Z&&Z.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Ic=Z&&Z.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Hr=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&kc(r,e,t);return Ic(r,e),r};Object.defineProperty(Z,"__esModule",{value:!0});Z.toOutputScript=Z.fromOutputScript=Z.toBech32=Z.toBase58Check=Z.fromBech32=Z.fromBase58Check=void 0;var ha=Hr(we()),De=Hr(da()),pa=Hr(Pe()),Mr=Hr(ne()),at=Ue(),{typeforce:Rc}=Mr,_a=40,ma=2,wa=16,ya=2,ga=80,Ea="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function xc(e,r){let t=e.slice(2);if(t.length<ma||t.length>_a)throw new TypeError("Invalid program length for segwit address");let n=e[0]-ga;if(n<ya||n>wa)throw new TypeError("Invalid version for segwit address");if(e[1]!==t.length)throw new TypeError("Invalid script for segwit address");return console.warn(Ea),Ta(t,n,r.bech32)}function ba(e){let r=at.base.fromBase58Check(e);if(r.length<21)throw new TypeError(e+" is too short");if(r.length>21)throw new TypeError(e+" is too long");let t=r.readUInt8(0),n=r.slice(1);return{version:t,hash:n}}Z.fromBase58Check=ba;function Oa(e){let r,t;try{r=at.base.bech32.decode(e)}catch{}if(r){if(t=r.words[0],t!==0)throw new TypeError(e+" uses wrong encoding")}else if(r=at.base.bech32m.decode(e),t=r.words[0],t===0)throw new TypeError(e+" uses wrong encoding");let n=at.base.bech32.fromWords(r.words.slice(1));return{version:t,prefix:r.prefix,data:d.Buffer.from(n)}}Z.fromBech32=Oa;function Ac(e,r){Rc(Mr.tuple(Mr.Hash160bit,Mr.UInt8),arguments);let t=d.Buffer.allocUnsafe(21);return t.writeUInt8(r,0),e.copy(t,1),at.base.toBase58Check(t)}Z.toBase58Check=Ac;function Ta(e,r,t){let n=at.base.bech32.toWords(e);return n.unshift(r),r===0?at.base.bech32.encode(t,n):at.base.bech32m.encode(t,n)}Z.toBech32=Ta;function Nc(e,r){r=r||ha.bitcoin;try{return De.p2pkh({output:e,network:r}).address}catch{}try{return De.p2sh({output:e,network:r}).address}catch{}try{return De.p2wpkh({output:e,network:r}).address}catch{}try{return De.p2wsh({output:e,network:r}).address}catch{}try{return De.p2tr({output:e,network:r}).address}catch{}try{return xc(e,r)}catch{}throw new Error(pa.toASM(e)+" has no matching Address")}Z.fromOutputScript=Nc;function Cc(e,r){r=r||ha.bitcoin;let t,n;try{t=ba(e)}catch{}if(t){if(t.version===r.pubKeyHash)return De.p2pkh({hash:t.hash}).output;if(t.version===r.scriptHash)return De.p2sh({hash:t.hash}).output}else{try{n=Oa(e)}catch{}if(n){if(n.prefix!==r.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return De.p2wpkh({hash:n.data}).output;if(n.data.length===32)return De.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return De.p2tr({pubkey:n.data}).output}else if(n.version>=ya&&n.version<=wa&&n.data.length>=ma&&n.data.length<=_a)return console.warn(Ea),pa.compile([n.version+ga,n.data])}}throw new Error(e+" has no matching Script")}Z.toOutputScript=Cc});c();l();var fr=Y(fe());c();l();c();l();var Ti=Y(fe());function Oi(e,r){let{chainId:t,isNativeToken:n,balance:i,availableBalance:o}=r,{fromToStore:a,accountStore:s}=J(),{getTokenBalanceByAccount:h}=a,f=Ze(t,Ee.BTC_MAINNET)&&n;(0,Ti.useEffect)(()=>{f&&s.computedSpecialWalletAddress&&h(e,r)},[f,i,o,s.computedSpecialWalletAddress])}function Ra(){let{fromToStore:e}=J(),{from:r,to:t}=e;Oi(Vr.FROM,jt(r)),Oi(Vr.TO,jt(t))}var vi=Ra;function xa(){vi()}var Si=xa;function Aa(){let{accountStore:e,fromToStore:r}=J(),{computedAccountId:t,address:n,setFromChainId:i}=e,{from:o,to:a,setBalanceState:s,getSwapTokenBalance:h,computedIsToAddressEqualsCurrentToAddress:f}=r,{amount:u,chainId:y}=o;(0,fr.useEffect)(()=>{ar(y)&&i(y)},[y,i]),(0,fr.useEffect)(()=>{h()},[t,h]),(0,fr.useEffect)(()=>{s({amount:u,address:n,from:o,to:a})},[u,n,o,a,s,f]),Si()}var Xc=Aa;c();l();var dt=Y(fe()),Li=Y(Zr());c();l();var cr=Y(fe()),Yr=Y(Zr());var Na=({showIconBg:e=!1,iconName:r="",onClick:t,iconStyle:n,category:i=$.CATEGORY.fill,size:o=$.SIZE.lg,type:a=$.TYPE.gray,iconClassName:s=""})=>e?cr.default.createElement($,{strictCircle:!0,category:i,type:a,size:o,style:{padding:"0px"},iconType:$.ICON_POSITION.tailing,onClick:t,icon:cr.default.createElement(qr,{className:(0,Yr.default)(r,s),style:n})}):cr.default.createElement(qr,{className:(0,Yr.default)(r,s),style:n,onClick:t}),Pi=Na;c();l();var Gt=Y(fe());var Ca=()=>{let{fromToStore:e={},commonStore:r,accountStore:t}=J(),{computedIsMarket:n,computedIsWalletEnv:i}=r,{address:o}=t,{from:a={},to:s={}}=e,{tokenContractAddress:h,tokenName:f,chainName:u}=a,{tokenContractAddress:y,tokenName:_}=s,p=(0,Gt.useMemo)(()=>({user_id:o,terminal_type:i?"Extension":"Web",from_token_address:h,from_token_name:f,to_token_address:n?"":y,to_token_name:n?"":_,chain_name:u}),[o,u,n,i,h,f,y,_]),O=(0,Gt.useCallback)(()=>{(n?pi:mi)(p)},[p,n]),E=(0,Gt.useCallback)(T=>{let b=n?wi:_i,R={...p,content:T};b(R)},[p,n]);return{monitorShareClickEvent:O,monitorCopyClickEvent:E}},lr=Ca;c();l();var se=Y(fe()),Ai=Y(Ia()),zr=Y(Zr());c();l();var Ri=Y(fe());c();l();var Oe=Y(fe());Ut();var La=e=>{let{fromToStore:r={},commonStore:t}=J(),{computedIsMarket:n}=t,[i,o]=(0,Oe.useState)(""),[a,s]=(0,Oe.useState)(!1),[h,f]=(0,Oe.useState)(null),{from:u={},to:y={}}=r,{chainId:_,tokenContractAddress:p}=u,{chainId:O,tokenContractAddress:E}=y,T=(0,Oe.useCallback)(async()=>{s(!0),f(null);let[b,R]=await ir(ur.get(ai,{params:{source:n?1:0,fromTokenAddress:p,toTokenAddress:E,chainId:_}}));if(s(!1),b){f(b);return}o(R?.data?.url)},[n,p,E,_]);return(0,Oe.useEffect)(()=>{p&&E&&_&&O&&e&&T()},[p,E,_,O,e,T]),(0,Oe.useMemo)(()=>({shareLink:i,loading:a,error:h,refresh:T}),[i,a,h,T])},ki=La;c();l();var Te=Y(fe());Ut();var Ba=e=>{let[r,t]=(0,Te.useState)(""),[n,i]=(0,Te.useState)(!1),[o,a]=(0,Te.useState)(null),s=(0,Te.useCallback)(async()=>{i(!0),a(null);let{url:h}=new Yn,f=`${h?.pathname}${h?.hash}${h?.search}`,[u,y]=await ir(ur.get(ui,{params:{originalUrl:f}}));if(i(!1),u){a(u);return}t(y?.data?.universalLink||"")},[]);return(0,Te.useEffect)(()=>{e&&s()},[e]),(0,Te.useMemo)(()=>({shareShortLink:r,shortLoading:n,shortError:o,shortRefresh:s}),[r,n,o,s])},Ii=Ba;var Da=({isShareShortLink:e,visible:r})=>{let{shareLink:t,loading:n,error:i,refresh:o}=ki(!!r&&!e),{shareShortLink:a,shortLoading:s,shortError:h,shortRefresh:f}=Ii(!!r&&e),{tokenInfoStore:u}=J();return(0,Ri.useMemo)(()=>{let _=n||i,p={href:gi(t),target:"__blank",icon:"okx-defi-dex-twitter",iconType:$.ICON_POSITION.leading},O=i,E=n,T=I("swaptrade_mid_dialog_header_share_as_blink"),b=I("swaptrade_mid_dialog_btn_share_on_x"),R=o,C=()=>{},k=t;if(e){let{latestInfo:w}=u;_=s||h,p={},O=h,E=s,R=f,T=I("swaptrade_market_token_dialog_header_share_link"),b=I("commonall_enterfield_btn_copy_link"),C=()=>{or.success(I("swaptrade_order_info_label_from_copy_success")),yi(a),di({chain_id:w?.chainId,token_name:w?.tokenName,button_name:"url_share"})},k=a}return{status:_,hrefConfig:p,infoError:O,infoLoading:E,infoRefresh:R,title:T,confirmText:b,displayLink:k,onConfirm:C}},[n,s,i,h,t,a,o,f,e,u])},xi=Da;c();l();var Ye={"share-button":"_share-button_hlj9x_1",shareButton:"_share-button_hlj9x_1",description:"_description_hlj9x_4",input:"_input_hlj9x_10","copy-button":"_copy-button_hlj9x_15",copyButton:"_copy-button_hlj9x_15",loading:"_loading_hlj9x_18",empty:"_empty_hlj9x_21","copy-container":"_copy-container_hlj9x_24",copyContainer:"_copy-container_hlj9x_24","copy-address":"_copy-address_hlj9x_32",copyAddress:"_copy-address_hlj9x_32"};var Ua=({shareLink:e="",shareBlinkEnable:r=!1,supportShortLink:t=!1})=>{let{monitorCopyClickEvent:n}=lr(),o=t&&!r?"":I("swaptrade_dialog_dialog_title_share_x");return se.default.createElement(se.default.Fragment,null,se.default.createElement("div",{className:Ye.copyContainer},se.default.createElement("div",{className:Ye.copyAddress},se.default.createElement("span",{className:"ellipsis"},e)),!t||r?se.default.createElement(Ai.CopyToClipboard,{text:e,onCopy:()=>{n(e),or.success(I("swaptrade_order_info_label_from_copy_success"))}},se.default.createElement($,{className:Ye.copyButton,category:$.CATEGORY.outline,type:$.TYPE.primary,size:$.SIZE.xxs},I("swaptrade_dialog_btn_desc_copy"))):null),o&&se.default.createElement("p",{className:(0,zr.default)(Ye.description)},o))},Ma=({visible:e,shareBlinkEnable:r,supportShortLink:t,...n})=>{let o=xi({isShareShortLink:t&&!r,visible:e}),a=()=>o.infoError?se.default.createElement(Wr.State,{className:Ye.empty,type:Wr.State.TYPE.noNetwork,title:I("swaptrade_general_emptystate_title_loading_fail"),description:I("swaptrade_general_emptystate_subtitle_network_error"),buttonText:I("swaptrade_recent_transaction_dialog_btn_reload"),onButtonClick:o.infoRefresh}):o.infoLoading?se.default.createElement(Gr.Circle,{className:(0,zr.default)(Ye.loading,"flex justify-center"),size:Gr.SIZE.xl}):se.default.createElement(Ua,{shareLink:o.displayLink,shareBlinkEnable:r,supportShortLink:t});return se.default.createElement(Ft.Confirmation,{title:o.title,hideCloseBtn:!1,onConfirm:o.onConfirm,confirmText:o.status?void 0:o.confirmText,visible:e,width:420,confirmBtnProps:o.status?void 0:{...o.hrefConfig,className:Ye.shareButton,size:Qn.lg},...n},a())},Ni=Ma;c();l();var Ci={icon:"_icon_26h91_1"};var Ha=({iconStyle:e={fontSize:"24px"},iconClassName:r,tooltipProps:t,showIconBg:n=!1,shareBlinkEnable:i,supportShortLink:o})=>{let[a,s]=dt.default.useState(!1),{monitorShareClickEvent:h}=lr();return dt.default.createElement(dt.default.Fragment,null,dt.default.createElement(Kr,{placement:Kr.DIRECTION.bottom,title:o&&!i?I("swaptrade_market_token_tooltips_share_link"):I("swaptrade_mid_dialog_header_share_as_blink"),...t},dt.default.createElement(Pi,{showIconBg:n,iconName:(0,Li.default)("okx-defi-nft-share2",Ci.icon,r),iconStyle:e,onClick:()=>{h(),s(!0)}})),dt.default.createElement(Ni,{visible:a,onClose:()=>s(!1),shareBlinkEnable:i,supportShortLink:o}))},sd=Ha;c();l();var Bi=Y(fe());var Fa=()=>{let{fromToStore:e={},commonStore:r}=J(),{from:t={},to:n={},computedIsSolanaChain:i}=e,{currentTab:o,computedIsMarket:a}=r,s=o===si.SWAP,h=a,{chainId:f,tokenContractAddress:u,isHoneypot:y}=t,{chainId:_,tokenContractAddress:p,isHoneypot:O}=n;return(0,Bi.useMemo)(()=>!(!f||!u||!_||!p||y||O||f!==_||!i||!(s||h)),[f,u,_,p,y,O,i,s,h])},dd=Fa;c();l();c();l();var Mi=Y(fe());c();l();var dr=Y(fe());c();l();var Di={"warn-state-container":"_warn-state-container_1n8v8_1",warnStateContainer:"_warn-state-container_1n8v8_1","error-state-container":"_error-state-container_1n8v8_2",errorStateContainer:"_error-state-container_1n8v8_2","error-state-title":"_error-state-title_1n8v8_15",errorStateTitle:"_error-state-title_1n8v8_15","error-state-content":"_error-state-content_1n8v8_21",errorStateContent:"_error-state-content_1n8v8_21","add-funds":"_add-funds_1n8v8_28",addFunds:"_add-funds_1n8v8_28",warning:"_warning_1n8v8_33",error:"_error_1n8v8_2","ledger-network-tips":"_ledger-network-tips_1n8v8_39",ledgerNetworkTips:"_ledger-network-tips_1n8v8_39",mb16:"_mb16_1n8v8_42","error-icon":"_error-icon_1n8v8_45",errorIcon:"_error-icon_1n8v8_45","warn-icon":"_warn-icon_1n8v8_46",warnIcon:"_warn-icon_1n8v8_46"};var ja=({chainName:e})=>{let r=()=>{let t=Ft.tip({infoType:Ft.Tip.INFO_TYPE.default,children:I("swaptrade_top_modaldesc_ledger_supported_paychains"),confirmText:I("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{t.destroy()},confirmBtnProps:{block:!0,size:$.SIZE.md}})};return dr.default.createElement(dr.default.Fragment,null,I("swaptrade_top_alert_desc_paychain_not_supported",{payChain:e}),dr.default.createElement(Ht,{className:Di.ledgerNetworkTips,type:Ht.TYPE.primary,weight:Ht.WEIGHT.muted,size:Ht.SIZE.xs,onClick:r},I("swaptrade_top_alert_textbtn_view_supported_chains")))},Ui=ja;var qa=e=>{let r=I("swaptrade_adjustslip_modal_title_wrongnetwork"),t=I("swaptrade_card_alert_switch_wallet_to_match",{chainName:e});return gt()?(r=I("swaptrade_extension_mid_plzswitch_wallet"),t=I("swaptrade_extension_mid_plzswitch_wallettips",{chain:e})):bi&&(r=I("swaptrade_top_alert_title_please_switch_network"),t=Mi.default.createElement(Ui,{chainName:e})),{title:r,content:t}},ze={default:()=>({type:"",title:"",content:"",errorType:""}),quote:()=>({type:"error",title:I("swap_title_quote_server_error"),content:I("swaptrade_quote_server_error_content"),errorType:Ve.QUOTE_ERROR}),honeypot:e=>({type:"error",title:I("wallet_swap_alert_scamtoken",{tokenSymbol:e}),titleEquation:I("wallet_swap_alert_scamtoken",{tokenSymbol:be(e)}),content:I("wallet_swap_toast_scam_token_desc"),errorType:Ve.QUOTE_ERROR}),leverageToken:(e,r)=>{let t=e&&r?I("swaptrade_mid_alert_highrisk_both_token",{sellToken:e.tokenSymbol,receiveToken:r.tokenSymbol}):I("swaptrade_mid_alert_highrisk_token",{token:e?.tokenSymbol||r?.tokenSymbol}),n=e&&r?I("swaptrade_mid_alert_highrisk_both_token",{sellToken:be(e.tokenSymbol),receiveToken:be(r.tokenSymbol)}):I("swaptrade_mid_alert_highrisk_token",{token:be(e?.tokenSymbol)||be(r?.tokenSymbol)});return{type:"error",title:t,titleEquation:n,content:I("swaptrade_top_text_protect_capital"),errorType:Ve.QUOTE_ERROR}},wrongNetwork:e=>{let{title:r,content:t}=qa(e);return{type:"warning",title:r,content:t,errorType:Ve.NETWORK_ERROR}},feeConfig:()=>({type:"error",title:I("swaptrade_card_reminder_title_parameter_error"),content:I("swaptrade_card_reminder_desc_feepercent",{feePercent:"feePercent",value1:"0",value2:lt(ni,{needZero:!1})}),errorType:Ve.FEE_CONFIG_ERROR}),accountErrorTips:()=>({type:"warning",title:I("swaptrade_adjustslip_modal_title_wrongnetwork"),content:I("swaptrade_mid_alert_desc_vm_wallet"),errorType:Ve.FEE_CONFIG_ERROR})},Hd={handleBalanceErrorState:({state:e})=>e.errorType===Ve.BALANCE_ERROR?ze.default():"",handleQuoteErrorState:({quote:e,honeypotToken:r,hasLeverageToken:t,leverageTokenPair:n=[]})=>{let{quoteError:i}=e;return i?ze.quote():r?ze.honeypot(r.tokenSymbol):t?ze.leverageToken(n[0],n[1]):""},handleNetworkErrorState:e=>(hi({type:ri.SWITCH_WALLET}),ze.wrongNetwork(e)),handleDefaultState:()=>ze.default(),handleFeeConfigErrorState:()=>ze.feeConfig(),handleFacetTokenAccountErrorState:()=>ze.accountErrorTips()};c();l();var _e={MARKET:"marketFee",FAST:"fastFee",TURBO:"turboFee",CUSTOM:"custom"},Gd={[_e.MARKET]:{text:"swaptrade_modal_dialog_option_market",icon:"okx-defi-nft-gas-slow",iconColor:"var(--okd-color-semantic-notice)"},[_e.FAST]:{text:"swaptrade_modal_dialog_option_fast5x",icon:"okx-defi-nft-gas-standard",iconColor:"var(--okd-color-semantic-informative)"},[_e.TURBO]:{text:"swaptrade_modal_dialog_option_turbo10x",icon:"okx-defi-nft-gas-fast",iconColor:"var(--okd-color-semantic-positive)"},[_e.CUSTOM]:{text:"swaptrade_market_sort_label_custom",icon:"okx-defi-nft-gas-custom",iconColor:"var(--okd-color-content-contrast)"}},Wd=[_e.MARKET,_e.FAST,_e.TURBO],Kd={[_e.MARKET]:"fee_Market",[_e.FAST]:"fee_Fast",[_e.TURBO]:"fee_Turbo",[_e.CUSTOM]:"fee_custom"};c();l();yt();Ut();c();l();Ut();function Xr(){return gt()?{walletType:"okwallet-extension"}:Zn.getProjectStorage("onChain")}var Hi={HEART:"heart",HEART_FINISH:"heartFinish",UPDATE_HASH:"updateHash",UPDATE_HASH_ERROR:"updateHashError",SAVE_ORDER:"saveOrder",SAVE_ORDER_PARAMS:"saveOrderParams",SAVE_ORDER_ERROR:"saveOrderError",SEND_ERROR:"sendError",ON_WALLET_FAIL:"onWalletFail",PAYLOAD:"payload",UPDATE_NONCE:"updateNonce",UPDATE_NONCE_FAIL:"updateNonceFail",CLOSE_CONFIRM_SWAP:"closeConfirmSwap",BEFOREUNLOAD:"beforeunload",CANCEL_ORDER:"cancelOrder",REDEEM_ORDER:"redeemOrder",ERROR_BOUNDARY:"errorBoundary",STUFF_LOG:"stuffLog",GET_LIMIT_CALL_DATA_ERROR:"getLimitCallDataError",SAVE_APPROVE:"saveApprove",SAVE_APPROVE_ERROR:"saveApproveError",APPROVE_DATA:"approveData",APPROVE_TOKEN_ERROR:"approveTokenError",CHAIN_ID_ADDRESS_MAP_IS_EMPTY:"chainIdAddressMapIsEmpty",UPDATE_BTC_BALANCE_ERROR_BEFORE_SWAP:"updateBtcBalanceErrorBeforeSwap",CHAIN_INFO:"chainInfo",ON_CHAIN_CHANGE:"onChainChange",LINK_SWITCH_START:"linkSwitchStart",LINK_SWITCH_SUCCESS:"linkSwitchSuccess",LINK_SWITCH_FAILED:"linkSwitchFailed",LINK_SWITCH_END:"linkSwitchEnd",DOUBLE_CHECK_CHAIN_ID_SUCCESS:"doubleCheckChainIdSuccess",DOUBLE_CHECK_CHAIN_ID_FAILED:"doubleCheckChainIdFailed",GET_CHAIN_ID_FAILED:"getChainIdFailed",UPDATE_APPROVAL_GAS_INFO_ERROR:"updateApprovalGasInfoError",WALLET_INFO:"walletInfo",OVER_VIEW_PRE_DATA_ERROR:"overViewInfoPreDataError",TRANSACTION_HISTORY_PRE_DATA_ERROR:"transactionHistoryPreDataError",REDEEM_ORDER_CALL_DATA:"redeemOrderCallData",REDEEM_ORDER_CALL_DATA_ERROR:"redeemOrderCallDataError",REDEEM_ORDER_ERROR:"redeemOrderError",INTENT_QUOTE_CALLDATA_ERROR:"intentQuoteCallDataError",INTENT_SWAP_SIGN_ERROR:"intentSwapSignError",INTENT_ORDER_CREATE_ERROR:"intentOrderCreateError",INTENT_SWAP_CALLDATA_ERROR:"intentSwapCalldataError",INTENT_SWAP_PROCESS_ERROR:"intentSwapProcessError",REGISTER_CO_LISTING_ERROR:"registerCoListingError",BEFORE_SEND_TRANSACTION_ERROR:"beforeSendTransactionError",TRANSACTION_HISTORY_LIST_ERROR:"transaction_history_list_error",TRANSACTION_HISTORY_INFO_ERROR:"transaction_history_info_error",EXTENSION_SWITCH_BTC_ADDRESS_ERROR:"extensionSwitchBtcAddressError",CHECK_CHAIN_ID_BEFORE_SEND_TRANSACTION:"checkChainIdBeforeSendTransaction",CHECK_CHAIN_ID_AFTER_SEND_TRANSACTION:"checkChainIdAfterSendTransaction",WIDGET_UPDATE_PROVIDER_ERROR:"widgetUpdateProviderError",OK_GLOBAL_LOCALE_MAP_IS_EMPTY:"okGlobalLocaleMapIsEmpty",SET_LANGUAGE_ERROR:"setLanguageError",SIGN_PERMIT2_DATA:"signPermit2Data",LIMIT_ORDER_TOKEN_PAIR_ERROR:"limitOrderTokenPairError",LIMIT_TOKEN_CONFIG_EMPTY:"limitChainListTokenConfigIsEmpty",LIMIT_TOKEN_CONFIG_DIFF_CHAIN:"limitChainListTokenConfigIsDiffChain",SWAP_SLIPPAGER_MEV_SETTING:"swapSlippagerMevSetting"};var Ga={business:"dex"},Qr=class{constructor(r){m(this,"setTags",r=>{this.tags={...this.tags,...r}});m(this,"extendTags",()=>{let{walletType:r,scanAppType:t}=Xr();return Xn({walletType:r,scanAppType:t,taskId:this.uid,...this.tags},zn)});m(this,"wrapHandle",(r,t,n={})=>{r(t,{...n,tags:{...this.extendTags(),...n?.tags}})});m(this,"debug",(...r)=>{this.wrapHandle(ct.debug,...r)});m(this,"info",(...r)=>{this.wrapHandle(ct.info,...r)});m(this,"error",(...r)=>{this.wrapHandle(ct.error,...r)});m(this,"warn",(...r)=>{this.wrapHandle(ct.warn,...r)});m(this,"stuff",(...r)=>{r.length===1&&typeof r[0]=="string"?this.wrapHandle(ct.info,Hi.STUFF_LOG,{msg:r[0]}):this.wrapHandle(ct.info,Hi.STUFF_LOG,...r)});m(this,"generateUUID",()=>{this.uid=Ei()});m(this,"timerRef",null);m(this,"heartNumber",0);m(this,"uid","");m(this,"keepLive",()=>{this.generateUUID(),this.heartNumber=0,this.timerRef&&clearInterval(this.timerRef),this.heartCheck(),this.timerRef=setInterval(()=>{this.heartCheck()},30*1e3)});m(this,"heartCheck",()=>{this.info("heart",{tags:{heartNumber:this.heartNumber}}),this.heartNumber++});m(this,"removeKeep",()=>{this.timerRef&&clearInterval(this.timerRef),this.info("heart finish",{tags:{heartNumber:this.heartNumber}}),this.heartNumber=0,this.uid=""});this.tags=r}};var Fi=new Qr(Ga);c();l();yt();c();l();var $r="1",Wa="2",Ka="3",uh="0",fh={[$r]:"swaptrade_aggregator_tag_best_value",[Wa]:"swaptrade_xrouting_tag_fastest",[Ka]:"swaptrade_xrouting_tag_best_in_all_dimensions"};c();l();var ji={AUTO:1,CUSTOM:2,DEFAULT:3};var Va=()=>{let{accountStore:e,quoteStore:r}=qt(),t=B(r,"quote.bestRoute",{}),n=t.defiPlatformInfoList?.findIndex(i=>i.defiPlatformId===r.aggregateSelectId)+1;return{wallet_address:e.address,provider_name:t.name,best_price:t.isBest?"yes":"no",price_difference:li(t.reducePercent),price_ranking:n}},bh=()=>{let{accountStore:e,liquidityChooseStore:r,quoteStore:t}=qt(),{bestRoute:n}=t.quote;if(!n)return{};let{slippage:i,slippageType:o}=t.computedSlippage,{fromToken:a,fromTokenAmount:s,fromTokenPrice:h,toTokenPrice:f,receiveAmount:u,toToken:y,swapType:_,routerLabel:p}=n,O=Number(_)===0,E=O?{liquidity_source:r.computedMonitorLiquidSelectType}:{},T=O?{}:{bridge_selection:p?.includes($r)?"overall best":"custom"};return{wallet_address:e.address,from_token_name:a?.tokenName,from_token_address:a?.tokenContractAddress,from_token_amount:s,from_amount_usdt:h,to_token_address:y?.tokenContractAddress,to_token_amount:u,to_amount_usdt:f,chain:a?.chainName,from_chain:a?.chainName,to_chain:y?.chainName,swap_type:O?"swap":"cross_chain_swap",slippage:{type:o===ji.AUTO?"auto":"custom",amount:i},...E,...T,...Va()}};c();l();yt();c();l();var hr=(e,r)=>({networkFeeAmount:e,networkFeeTokenSymbol:r,formattedNetworkFeeAmount:e?`${ci(e)} ${r}`:"--"}),pr=e=>{let{commonStore:r}=qt(),{computedNowCurrencySymbol:t,currencyConversion:n}=r;return{networkFeeUsd:e,formattedNetworkFeeUsd:e?fi(n(e).toString(),t):"--"}},Jr=e=>{let{estimateGasFeeAmount:r,fromNativeTokenSymbol:t,estimateGasFeeAmountUsd:n,bridge:i,fromToken:o,toToken:a,crossChainFee:s,bridgeFeeUsd:h,toSwapFee:f,toNativeTokenSymbol:u,toSwapFeeUsd:y}=e||{},{estimateBridgeFeeAmountUsd:_,estimateBridgeFeeAmount:p,bridgeName:O,bridgeLogoUrl:E}=i||{},T=hr(s,i?.crossToToken?.tokenSymbol),b=pr(h);return{from:{chainName:o?.chainName,chainLogo:o?.chainLogoUrl,...hr(r,t),...pr(n)},bridge:{bridgeName:O,bridgeLogo:E,...hr(p,t),...pr(_),bridgeFeeAmount:T.networkFeeAmount,bridgeFeeTokenSymbol:T.networkFeeTokenSymbol,formattedBridgeFeeAmount:T.formattedNetworkFeeAmount,bridgeFeeUsd:b.networkFeeUsd,formattedBridgeFeeUsd:b.formattedNetworkFeeUsd},to:{chainName:a?.chainName,chainLogo:a?.chainLogoUrl,...hr(f,u),...pr(y)}}},Za=()=>{let{quoteStore:e}=J(),{quote:r}=e;return Jr(r?.bestRoute)},kh=Za;c();l();yt();c();l();yt();c();l();yt();c();l();var Wt=class{constructor(r,t){m(this,"percent","");m(this,"exactPercent","");m(this,"dexRouterPercent","");Object.assign(this,t),this.dexRouterPercent=r}get computedPercent(){return this.percent?lt(this.percent,{needZero:!1}):""}get computedExactPercent(){let r=sr.BigNumber(this.percent).multipliedBy(this.dexRouterPercent).dividedBy(100);return r.isNaN()?"":lt(r.toNumber(),{needZero:!1})}};var Kt=class{constructor(r,t,n){m(this,"fromToken",{});m(this,"toToken",{});m(this,"dexQuoteInfoList",[]);let{fromToken:i={},toToken:o={},dexQuoteInfoList:a}=t||{};this.fromToken=i,this.toToken=o,this.dialogHeaderText=n?be(this.toToken?.tokenSymbol):`${be(this.fromToken?.tokenSymbol)}/${be(this.toToken?.tokenSymbol)}`,wt(a)&&(this.dexQuoteInfoList=a.map(s=>new Wt(r,s)))}};var Vt=class{constructor(r,t){m(this,"percent","");m(this,"router","");m(this,"subRouterList",[]);m(this,"flag","");let{percent:n="",router:i="",flag:o="",subRouterList:a}=r||{};this.percent=n,this.router=i,this.flag=o,wt(a)&&(this.subRouterList=a.map(s=>new Kt(n,s,t)))}get computedPercent(){return this.percent?lt(this.percent,{needZero:!1}):""}};var Xe=class{constructor(r,t=!1){m(this,"data",[]);wt(r)&&(this.data=r.map(n=>new Vt(n,t)))}};var ce={DEFAULT:0,LOADING:1,DISCONNECTION:2,NO_DATA:3,SHOW_DATA:4},Me={DISMISS:"0",FROM:"1",BRIDGE:"2",TO:"3"},tn={IN_CHAIN:"0",CROSS_CHAIN:"1"},_r={NORMAL_PERCENT:0,EXACT_PERCENT:1},rn=class{constructor({swapStore:r,fromToStore:t,swapDappStore:n}){m(this,"showEntryForPc",!1);m(this,"isShowShowAll",!0);m(this,"updateIsShowShowAll",(r=!1)=>{this.isShowShowAll=r});m(this,"status",ce.LOADING);m(this,"percentType",_r.NORMAL_PERCENT);m(this,"swapType",tn.IN_CHAIN);m(this,"tokenInfo",{dexRouter:{token0:{},token1:{}},fromDexRouter:{token0:{},token1:{}},bridge:{token0:{},token1:{}},toDexRouter:{token0:{},token1:{}}});m(this,"dexRouterList",[]);m(this,"fromDexRouterList",[]);m(this,"toDexRouterToList",[]);m(this,"bridgeRouterList",[]);m(this,"getInfoByMenuType",r=>{if(this.swapType===tn.IN_CHAIN)return{routerList:this.dexRouterList,tokenInfo:this.tokenInfo.dexRouter};switch(r){case Me.FROM:return{routerList:this.fromDexRouterList,tokenInfo:this.tokenInfo.fromDexRouter};case Me.BRIDGE:return{routerList:this.bridgeRouterList,tokenInfo:this.tokenInfo.bridge};case Me.TO:return{routerList:this.toDexRouterToList,tokenInfo:this.tokenInfo.toDexRouter};default:return{routerList:[],tokenInfo:this.tokenInfo.dexRouter}}});m(this,"currentMenu",Me.DISMISS);m(this,"menuList",[]);m(this,"showMenuList",!0);m(this,"isCrossBridgeOnly",!1);m(this,"showXRouteModal",oi.SWAP);m(this,"subRouterData",null);m(this,"subRouterModal",!1);m(this,"setSubRouterModal",r=>{this.subRouterModal=r});m(this,"dexQuoteInfoListData",[]);m(this,"setDexQuoteInfoListData",r=>{this.dexQuoteInfoListData=r});m(this,"oldRouterModal",!1);m(this,"allGasFee",{});this.fromToStore=t||{},this.quoteStore=r.quoteStore||{},this.swapDappStore=n||{},ei(this,{},{autoBind:!0}),Jn(()=>({isFetchQuoting:this.quoteStore.quote?.isFetchQuoting,bestRoute:this.quoteStore.computedRouterForSmartRouterStore,quoteError:this.quoteStore.quote?.quoteError,quoteNull:this.quoteStore.quote?.quoteNull,fromToken:this.fromToStore.from,toToken:this.fromToStore.to,shouldPauseQuote:this.swapDappStore.computedSupportDappTradeByChain}),({isFetchQuoting:i,bestRoute:o,quoteError:a,quoteNull:s,shouldPauseQuote:h})=>{let f=o?jt(o):{},u=f.commonDexInfo||{},y=h?{}:{...u,...f};this.setStatusByQuote({isFetchQuoting:i,quoteError:a,bestRoute:y,quoteNull:s,shouldPauseQuote:h}),this.updateData(y||{}),this.updateAllGasFee(y||{})},{equals:$n.shallow})}setShowEntryForPc(r){this.showEntryForPc=r}setStatus(r){let n=jr(ce).some(i=>i===r);this.status=n?r:ce.DEFAULT}setStatusByQuote({isFetchQuoting:r,quoteError:t,bestRoute:n,quoteNull:i,shouldPauseQuote:o}){if(o){this.setStatus(ce.NO_DATA);return}if(!t&&!n&&!i&&sr.BigNumber(this.fromToStore?.computedTypedValue).gt(0)){this.setStatus(ce.LOADING);return}if(r&&this.status!==ce.SHOW_DATA&&this.status!==ce.NO_DATA){this.setStatus(ce.LOADING);return}if(t){this.setStatus(ce.DISCONNECTION);return}if(i&&ge(n?.dexRouterList)&&ge(n?.fromDexRouterList)&&ge(n?.bridge)&&ge(n?.toDexRouterToList)){this.setStatus(ce.NO_DATA);return}if(!ge(n?.dexRouterList)||!ge(n?.fromDexRouterList)||!ge(n?.bridge)||!ge(n?.toDexRouterToList)){this.setStatus(ce.SHOW_DATA);return}this.setStatus(ce.DEFAULT)}switchPercentType(){this.percentType=this.percentType===_r.NORMAL_PERCENT?_r.EXACT_PERCENT:_r.NORMAL_PERCENT}setSwapType(r){this.swapType=r}updateTokenInfo(r){Mt(this.tokenInfo,"dexRouter",{token0:this.fromToStore.from||{},token1:this.fromToStore.to||{}}),Mt(this.tokenInfo,"fromDexRouter",{token0:{...B(r,"fromToken",{}),amountIn:B(r,"fromTokenAmount","")},token1:{...B(r,"fromSwapToTokenInfo",{}),amountOut:B(r,"bridge.bridgeAmountIn","")}}),Mt(this.tokenInfo,"bridge",{token0:this.isCrossBridgeOnly?{...B(r,"fromToken",{}),amountIn:B(r,"bridge.bridgeAmountIn","")}:{...B(r,"bridge.crossFromToken",{}),amountIn:B(r,"bridge.bridgeAmountIn","")},token1:this.isCrossBridgeOnly?{...B(r,"toToken",{}),amountOut:B(r,"bridge.bridgeAmountOut","")}:{...B(r,"bridge.crossToToken",{}),amountOut:B(r,"bridge.bridgeAmountOut","")}}),Mt(this.tokenInfo,"toDexRouter",{token0:{...B(r,"toSwapFromTokenInfo",{}),amountIn:B(r,"bridge.bridgeAmountOut","")},token1:{...B(r,"toToken",{}),amountOut:B(r,"receiveAmount","")}})}setDexRouterList(r){this.dexRouterList=new Xe(r).data}setFromDexRouterList(r){this.fromDexRouterList=new Xe(r).data}setToDexRouterToList(r){this.toDexRouterToList=new Xe(r).data}setBridgeRouterList(r,t){let n=(i={},o)=>({...i,tokenSymbol:o,fromBridge:!0});this.bridgeRouterList=new Xe([{percent:B(t,"percent")||"100",subRouterList:[{dexQuoteInfoList:[{dexName:B(t,"bridgeName"),percent:"100",okLinkUrl:B(t,"fromPoolAddress")}],fromToken:{},toToken:n(B(t,"crossFromToken"),B(t,"fromPoolName"))},{dexQuoteInfoList:[{dexName:B(t,"bridgeName"),percent:"100",okLinkUrl:B(t,"toPoolAddress")}],fromToken:{},toToken:n(B(t,"crossToToken"),B(t,"toPoolName"))}]}],!0).data}checkIsManyQuote(r){if(r.length>1)return!1;let t=r.length>0?B(r,[0,"subRouterList"],[]):[];return t.length>1?!1:B(t,[0,"dexQuoteInfoList","length"])>5}checkIsFewRouter(r){return r.length===1&&B(r,[0,"subRouterList","length"])<3}get computedIsFewRouter(){let{routerList:r}=this.computedCurrentRouter;return this.checkIsFewRouter(r)}get computedIsManyQuoteInfo(){let{routerList:r}=this.computedCurrentRouter;return this.checkIsManyQuote(r)}get computedCurrentRouter(){return this.getInfoByMenuType(this.currentMenu)}setCurrentMenu(r){let n=jr(Me).some(i=>i===r);this.currentMenu=n?r:Me.DISMISS}setMenuListAndCurrentMenu(r,t,n){if(!Array.isArray(r)||ge(r))this.showMenuList=!1,this.isCrossBridgeOnly=!1,this.setCurrentMenu(Me.DISMISS);else{this.menuList=r.map(o=>({...o,bridge:{...n}}));let i=B(r,[0,"smartRoutingMenuType"]);(!this.showMenuList||this.currentMenu===Me.DISMISS||!r.some(o=>B(o,"smartRoutingMenuType")===this.currentMenu))&&this.setCurrentMenu(i),this.isCrossBridgeOnly=r.length===1&&i===Me.BRIDGE&&t===tn.CROSS_CHAIN,this.showMenuList=!this.isCrossBridgeOnly}}updateData(r){let{swapType:t,smartRoutingMenuVoList:n,dexRouterList:i,fromDexRouterList:o,bridge:a,toDexRouterToList:s}=r;this.setSwapType(t),this.setMenuListAndCurrentMenu(n,t,a),this.setDexRouterList(i),this.setFromDexRouterList(o),this.setBridgeRouterList(r,a),this.setToDexRouterToList(s),this.updateTokenInfo(r)}setXRouteModal(r){this.showXRouteModal=r}setSubRouterData(r){this.subRouterData=r}setOldRouterModal(r){this.oldRouterModal=r}updateAllGasFee(r){this.allGasFee=Jr(r)}};c();l();Ut();c();l();var Jo=Y(Xo());c();l();c();l();c();l();c();l();c();l();var Tr=()=>Boolean(typeof window>"u"||process.env.SSR_ENV);var _n={PING:"ping",PONG:"pong"},Tt={CONNECTED:0,DISCONNECTED:1,PING_PENDING:2,PING_PENDING_OVER:3},Qe=!Tr(),vr=Qe&&!window.inOKXExtension;var xu=/^\{|\[/,Qo="";Qe&&(Qo=window?.okGlobal?.socketBaseUrls?.trade);var Sr={isPushingJSON(e){return xu.test(e)},getRealConnectUrl(e=Qo){return e}};c();l();var $o={decode(e){let r=0,t,n,i,o,a,s=[],h=e.length;for(;r<h;)t=e[r++],t<128?a=t:t<224?(n=e[r++],a=(t&31)<<6|n&63):t<240?(n=e[r++],i=e[r++],a=(t&15)<<12|(n&63)<<6|i&63):(n=e[r++],i=e[r++],o=e[r++],a=(t&7)<<18|(n&63)<<12|(i&63)<<6|o&63),s.push(String.fromCodePoint(a));return s.join("")}};var es=$o;if(Qe&&vr){let{location:e,TextDecoder:r}=window;r&&(es=new r("utf-8")),window.$has_debug_push_param$=e.href.indexOf("debug_push=true")>-1}var mn={};function wn(e={}){let r=this,t=Sr.getRealConnectUrl(e.connectUrl),n={maxPendingTime:5e3,maxReconnectTime:1e4,maxWaitingResponseTime:1e4,maxSleepRecoveringTime:3e3,...e,connectUrl:t},i=mn[n.connectUrl];if(i)return i;let o={isConnected:!1,isConnectPending:!1,isClosingByClient:!1,isKillingUnWakeUp:!1,isPingPending:!1},a,s={reconnectTimer:0,handlePendingTimer:0,discontinueTimer:0,killingUnWakeUpTimer:0,pingPendingTimer:0},h={currReconnectTime:0,lastReceivingTime:0},f=[],u=[],y=[],_=[],p=[],O=()=>{},E=()=>{this.isConnected()&&(O(),s.pingPendingTimer=setTimeout(()=>{o.isPingPending=!0,_.forEach(g=>{g(Tt.PING_PENDING)})},n.maxPendingTime))},T=(g,V)=>{for(let ue=0;ue<g.length;ue++)if(g[ue]===V){g.splice(ue,1);break}},b=()=>{o.isPingPending=!1,clearTimeout(s.pingPendingTimer)},R=()=>{clearInterval(s.handlePendingTimer)},C=()=>{h.currReconnectTime=0,s.reconnectTimer&&(clearTimeout(s.reconnectTimer),delete s.reconnectTimer)},k=()=>{!this.isConnected()&&!o.isConnectPending&&(C(),w())},w=function(){a=new WebSocket(n.connectUrl),o.isConnectPending=!0,a.onopen=L,a.onmessage=S,a.onclose=q,a.onerror=P,s.handlePendingTimer=setInterval(r.handleConnectPending,n.maxPendingTime)},L=function(){o.isConnected=!0,o.isConnectPending=!1,o.isClosingByClient=!1,C(),R(),u.forEach(g=>{g(),g.triggered=!0}),_.forEach(g=>{g(Tt.CONNECTED)})},x=function(){o.isPingPending&&_.forEach(g=>{g(Tt.PING_PENDING_OVER)}),b()},S=function(g){if(h.lastReceivingTime=Date.now(),clearTimeout(s.discontinueTimer),clearTimeout(s.killingUnWakeUpTimer),s.discontinueTimer=setTimeout(E,n.maxPendingTime),g.data instanceof Blob){let V=g.data,ue=new FileReader,ut={done:!1,resultString:""};p.push(ut),ue.onload=function(ft){if(ft.target.readyState==FileReader.DONE){let mt=(0,Jo.inflateRaw)(ft.target.result);for(ut.done=!0,ut.resultString=es.decode(mt);p[0]&&p[0].done;){let{resultString:Dt}=p.shift();Dt===_n.PONG&&x();let Wn=Sr.isPushingJSON(Dt)?JSON.parse(Dt):Dt;re(Wn),window.$has_debug_push_param$&&(console.log(Dt),window.$ok_debug_push_callback$&&window.$ok_debug_push_callback$(Wn))}}},ue.readAsArrayBuffer(V)}else{let V=g.data;V===_n.PONG&&x(),re(Sr.isPushingJSON(V)?JSON.parse(V):V),window.$has_debug_push_param$&&console.log(V)}},A=function(){o.isConnected=!1,o.isConnectPending=!1,b(),u.forEach(g=>{g.triggered=!1})},q=function(){if(o.isKillingUnWakeUp){o.isKillingUnWakeUp=!1;return}o.isClosingByClient?A():s.reconnectTimer||P()},P=function(){A(),R(),f.forEach(V=>{V()}),_.forEach(V=>{V(Tt.DISCONNECTED)}),s.reconnectTimer=setTimeout(w,h.currReconnectTime);let g=h.currReconnectTime+1e3;g>n.maxReconnectTime&&(g=n.maxReconnectTime),h.currReconnectTime=g},re=function(g){if(g.event==="error"&&Number(g.errorCode)===30026){a.close();return}y.forEach(ue=>ue(g))};if(this.setPushDataResolver=function(g){return y.push(g),()=>{T(y,g)}},this.connect=function(){if(Qe){if(this.isConnected()){u.forEach(g=>{g.triggered||(g(),g.triggered=!0)});return}!this.isConnected()&&!o.isConnectPending&&w()}},this.disconnect=function(){clearTimeout(s.reconnectTimer),clearTimeout(s.discontinueTimer),delete s.reconnectTimer,delete s.discontinueTimer,o.isClosingByClient=!0,a.close(),f.length=0,u.length=0,y.length=0,O=()=>{},delete mn[n.connectUrl];let{connection:g}=navigator;g&&g.removeEventListener&&g.removeEventListener("change",this.handleConnectionChange),vr&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},this.isConnected=function(){return o.isConnected},this.sendChannel=function(g){a.readyState===WebSocket.OPEN?a.send(g):console.error("WebSocket is not in open state, can not send!")},this.onSocketConnected=function(g){return u.push(g),()=>{T(u,g)}},this.onSocketError=function(g){return f.push(g),()=>{T(f,g)}},this.onPushDiscontinue=function(g){return O=g,()=>{}},this.onStatusChange=function(g){return _.push(g),()=>{T(_,g)}},this.handleConnectPending=function(){o.isConnectPending&&f.forEach(g=>{g()})},this.handleConnectionChange=()=>{navigator.onLine===!0&&k()},this.handleVisibilityChange=()=>{if(!document.hidden){if(!this.isConnected()){k();return}Date.now()-h.lastReceivingTime>n.maxWaitingResponseTime&&(E(),s.killingUnWakeUpTimer=setTimeout(()=>{A(),C(),o.isKillingUnWakeUp=!0,a.close(),w()},n.maxSleepRecoveringTime))}},Qe){let{connection:g}=navigator;g&&g.addEventListener&&g.addEventListener("change",this.handleConnectionChange),vr&&document.addEventListener("visibilitychange",this.handleVisibilityChange)}return mn[n.connectUrl]=this,this}wn.STATUS=Tt;Qe&&!window.WebSocketCore&&(window.WebSocketCore=wn);var ts=wn;var rs={DEX_PUSH_ENGINE:"dex-across-order-info",WALLET_ASSET:"wallet-asset"},Au=e=>e.reduce((r,t)=>{let{channel:n}=t;return r.has(n)||r.set(n,new Set),r},new Map),ns=e=>e?e.split(",").map(t=>({token:t})):[],yn=class{constructor(){m(this,"initEventList",()=>{this.errorHandlerList=new Set,this.channelList=Object.keys(rs).map(r=>({channel:rs[r]})),this.eventList=Au(this.channelList)});m(this,"connectUrl",()=>{let r="";return gt()?process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?"wss://wsdexpre.coinall.ltd:8443/ws/v5/iprivate":ii.global.urlConfig.serverPushUrl:(r=Vn.socketBaseUrls?.dex||"",`${r}/ws/v5/iprivate`)});m(this,"init",r=>{if(!Kn()){if(this.isLoginDone=!1,!r){this.tokens="";return}if(this.tokens=r,this.isConnected()){this.connectedCallback();return}this.wsInstance||(this.wsInstance=new ts({connectUrl:this.connectUrl(),reconnectTime:1e4,maxPendingTime:2e4}),this.setCallbacks(),this.wsInstance.connect())}});m(this,"getInstance",()=>this.wsInstance);m(this,"setCallbacks",()=>{this.wsInstance.onSocketConnected(this.connectedCallback),this.wsInstance.onSocketError(this.errorCallback),this.wsInstance.onPushDiscontinue(()=>{this.wsInstance.sendChannel("ping")}),this.wsInstance.setPushDataResolver(r=>this.dataCallback(r))});m(this,"connectedCallback",()=>{this.login(this.tokens).then(()=>(this.subscribe(),this.isLoginDone=!0,!0)).catch(()=>{Fi.stuff("ws login fail")})});m(this,"errorCallback",r=>{this.errorHandlerList.forEach(t=>{t(r)})});m(this,"dataCallback",r=>{this.isLoginDone?this.dataHandler(r):this.loginHandler(r)});m(this,"login",r=>new Promise((t,n)=>{this.isLoginDone=!1,this.wsInstance.sendChannel(JSON.stringify({op:"login",args:ns(r)})),this.loginResolveFn=t,this.loginRejectFn=n}));m(this,"loginHandler",r=>{let{event:t,code:n}=r;if(t==="login"){if(Number(n)===0){this.loginResolveFn();return}this.loginRejectFn()}});m(this,"dataHandler",r=>{let{arg:t,data:n}=r,i=t?.channel,o=this.eventList.get(i);o?.size>0&&o.forEach(a=>{a(n)})});m(this,"logout",r=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"logout",args:ns(r)}))});m(this,"subscribe",()=>{this.wsInstance.sendChannel(JSON.stringify({op:"subscribe",args:this.channelList}))});m(this,"unsubscribe",()=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"unsubscribe",args:this.channelList}))});m(this,"addListen",(r,t)=>{if(r==="error"){this.errorHandlerList.add(t);return}this.eventList.has(r)&&this.eventList.get(r).add(t)});m(this,"removeListen",(r,t=()=>{})=>{if(r==="error"){this.errorHandlerList.delete(t);return}this.eventList.has(r)&&this.eventList.get(r).delete(t)});m(this,"removeAll",()=>{this.initEventList()});m(this,"isConnected",()=>!!this.wsInstance?.isConnected());m(this,"disconnect",()=>{this.wsInstance?.disconnect(),this.initEventList()});this.wsInstance=null,this.initEventList()}},N_=new yn;c();l();var H_=e=>!!(e?.isNativeToken===ti.TRUE||e?.isBaseCoin),F_=e=>e?ar(e.chainId)&&e.tokenContractAddress:!1,j_=({chainId:e,tokenContractAddress:r,tokenAddress:t=void 0}={})=>`${e}_${(r||t)?.toLowerCase()}`;c();l();c();l();var Sa=Y(va()),Pa=Y(we());c();l();function Bt(e){return e.default||e}async function Gn(e){if(Ze(e,Ee.SOLANA_MAINNET)){let n=await import("./SolWallet-PHEMQ534.js"),{SolWallet:i}=Bt(n);return new i}else if(Ze(e,Ee.STARKNET_MAINNET)){let n=await import("./StarknetWallet-YF6XHVGA.js"),{StarknetWallet:i}=Bt(n);return new i}else if(Ze(e,Ee.SUI_MAINNET)){let n=await import("./SuiWallet-X6I2T2MV.js"),{SuiWallet:i}=Bt(n);return new i}else if(Ze(e,Ee.TRON_MAINNET)){let n=await import("./TrxWallet-5ISKTGTI.js"),{TrxWallet:i}=Bt(n);return new i}else if(Ze(e,Ee.TON_MAINNET)){let n=await import("./TonWallet-PWGCZG2L.js"),{TonWallet:i}=Bt(n);return new i}let r=await import("./EthWallet-DU75KGCY.js"),{EthWallet:t}=Bt(r);return new t}function Lc(e){let r=!1;try{(0,Sa.toOutputScript)(e,Pa.bitcoin)&&(r=!0)}catch{r=!1}return r}async function Bc(e,r){return Ee.BTC_MAINNET===e?Lc(r):(await(await Gn(e)).validAddress({address:r})).isValid}export{Hi as a,Fi as b,ts as c,rs as d,N_ as e,Xc as f,$r as g,Wa as h,Ka as i,uh as j,ji as k,Va as l,bh as m,Pi as n,sd as o,dd as p,Bc as q,ze as r,Hd as s,H_ as t,F_ as u,j_ as v,_e as w,Gd as x,Wd as y,Kd as z,pr as A,Jr as B,kh as C,ce as D,Me as E,tn as F,_r as G,rn as H};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-VMDHN3ZF.js.map
