import{a as jo,b as Zo,c as nr,d as Ke,e as ir,f as gr,g as yr}from"./chunk-W47JE5NG.js";import{a as qo}from"./chunk-4MSAK6P3.js";import{a as mr,b as cr,c as Er,d as Ir}from"./chunk-NPXFRVR7.js";import{a as Jo}from"./chunk-O4SNKDES.js";import{a as Qo,b as er}from"./chunk-KXCCZLKU.js";import{a as pr,b as ur}from"./chunk-V34L2UDJ.js";import{a as Xo}from"./chunk-ESV2DVRZ.js";import{a as ar}from"./chunk-RKM66LLN.js";import{a as _r}from"./chunk-QIBHRUGG.js";import{a as dr}from"./chunk-AB3XUJUH.js";import{a as or,b as rr}from"./chunk-ISFMRJLT.js";import{a as Yo,b as lr}from"./chunk-XHHRGPLK.js";import{a as hr}from"./chunk-PEKCL2VD.js";import{a as $o}from"./chunk-BWRHBLYR.js";import{a as sr}from"./chunk-J2KUA7PM.js";import{a as Ge,b as zo}from"./chunk-CPJ5LGGO.js";import{a as _e}from"./chunk-Z4A553U5.js";import{a as Uo}from"./chunk-SVAMZON6.js";import{a as Do,c as Ho}from"./chunk-F52H34ZH.js";import{a as Et,c as tr}from"./chunk-PNVAA2YG.js";import{b as fr}from"./chunk-GNUZCK62.js";import{m as Ve}from"./chunk-NVJFLL3D.js";import{n as Ue,p as Ko,w as Vo}from"./chunk-VVCHQHKB.js";import{b as go}from"./chunk-GJCTNUAU.js";import{b as de}from"./chunk-RIWLOEHK.js";import{d as _t}from"./chunk-4W35J5OQ.js";import{g as Mo,h as Po}from"./chunk-GPJC633M.js";import{x as Wo}from"./chunk-YC6W5MPL.js";import{g as gt,h as So,i as Bo,j as Lo,k as Ro,l as Oo,m as vo,n as Fo}from"./chunk-ABBYZM2I.js";import{a as To}from"./chunk-IQQANR3G.js";import{f as uo}from"./chunk-IRMGOW5H.js";import{a as bo}from"./chunk-2HEOW3XO.js";import{d as fo}from"./chunk-UI7PAU35.js";import{a as xo}from"./chunk-SMZ64QW3.js";import{O as yt,R as He,T as Go,V as $e}from"./chunk-FF6KJRSH.js";import{a as ko,e as wo}from"./chunk-GSYNHSX4.js";import{f as Ao,h as X,i as fe}from"./chunk-IQUFOLSA.js";import{a as _o}from"./chunk-HXUMX2S7.js";import{b as No}from"./chunk-7ZRI3S6Z.js";import{b as be}from"./chunk-QKXA7YNE.js";import{b as Eo,c as Io,d as Co}from"./chunk-ZYEEMVIP.js";import{g as yo}from"./chunk-BOOOUD52.js";import{a as ho}from"./chunk-TBLUUKKO.js";import{$a as co,G as ft,V as dt,Ya as mo,_ as We,e as Ae,i as lo,ia as De}from"./chunk-S5DGV5WL.js";import{b as $}from"./chunk-AOXUSYRH.js";import{b as jt,q as K}from"./chunk-WKBC6JL3.js";import{X as Te}from"./chunk-VPDRXROE.js";import{B as Xt,Da as Fe,E as Jt,F as Qt,Ta as so,Ua as io,ga as xe,m as Kt,ma as ve,na as eo,qa as to,s as Vt,sa as oo,t as zt,va as ro,w as B,x as Zt,za as no}from"./chunk-JLIPSIRU.js";import{a as q}from"./chunk-VX55KNI4.js";import{d as po,m as is}from"./chunk-4TYAYDA2.js";import{d as M,f as Oe}from"./chunk-R4G6BEPF.js";import{c as f}from"./chunk-RXNDJ7P3.js";import{a as Z,b as Me}from"./chunk-CYOQISC6.js";import{c as ao,f as ue,h as Pe}from"./chunk-TKYTZF2K.js";import{E as Be,Fa as he,Fc as Gt,Ha as le,Jb as Le,Kc as ss,Mb as $t,Sb as ct,Tc as pe,Ub as Ut,X as mt,a as Rt,b as rs,d as Se,e as ns,gd as ut,w as Dt,y as oe,z as Ht}from"./chunk-YT2MPR4E.js";import{G,K as re,M as Ce,b as Re,i as pt,m as qt,o as me,y as ce}from"./chunk-LDKM7IQF.js";import{E as Mt,G as Pt,ka as Wt,pa as lt}from"./chunk-6O63U2D6.js";import{L as Ft,M as v,d as Ot,l as vt,x as E}from"./chunk-RIOWPXBZ.js";import{T as j,c as Yt,ca as N}from"./chunk-OSCGYMLH.js";import{a as h}from"./chunk-O337TVCZ.js";import{f as m,m as o,o as r}from"./chunk-GLD6H5Q5.js";o();r();var C=m(h()),nt=m(B()),Hn=m(q()),st=m(Te());v();is();o();r();lt();var ge=m(Zt());mt();var as=(0,ge.createSelectorCreator)(ge.defaultMemoize,Pt),It=as(e=>{let{createdMap:n={},needSyncMap:t={}}=e.metamask;return{createdMap:n,needSyncMap:t}},xe,({createdMap:e,needSyncMap:n},t)=>{let s=Boolean(e[t]),i=Boolean(n[t]);return!(!s||i)}),ls=(0,ge.createSelector)(It,Bo,xe,e=>e.metamask?.walletConfig?.currentNetworkUniqueId||"",oo,Vo,So,Jt,Qt,Xt,no,(e,n,t,s,i,c,l,p,d,_,a)=>{let g=null;_?.length&&n?.[t]&&(g=Lo({isReady:n[t]?.coins&&e,defaultBaseCoinsCoinIds:l.size>0?Array.from(l):[],addedCoins:p[t]??[],reducedCoins:d[t]??[],balanceCoins:n[t]?.coins??[],defi:n[t]?.defi,nft:n[t]?.nft,networks:_.map(L=>({chainId:L})),hiddenSmallAssets:a,customFilter:({chainId:L})=>s===""||L===Number(s)}));let y="0",T="0",b="0",I="0",x="0",H="0";if(g){let{tokenTotalAssetsUSD:L,defiTotalAssetsUSD:Y,nftTotalAssetsUSD:R,smallTotalAssetsUSD:ee,platformTotalAssetsUSD:te}=g;I=R,x=Y,H=L,b=te,y=L,y=Ht(y,ee),c&&(y=oe(y,I)),y=oe(y,Y),T=y,y=Dt(y,i?.usdToThisRate??"1")}else return{walletAsset:"--",walletAssetUSD:"--",platformAssetUSD:"--",nftBalanceUSD:"--"};return{walletAsset:y,walletAssetUSD:T,platformAssetUSD:b,nftBalanceUSD:I,defiBalanceUSD:x,tokenBalanceUSD:H}}),Cr=ls;o();r();var P=m(h()),kr=m(B()),wr=m(Te());o();r();var ht=(t=>(t.ERR_NETWORK="ERR_NETWORK",t.ERR_SERVER_LIMIT="ERR_SERVER_LIMIT",t))(ht||{});Oe();o();r();var xr=m(h());rs();var Tr=()=>(0,xr.useCallback)(e=>{try{let n=e===A.CREATE_FAIL_FROM_SERVER_ERROR?"Server":"Local";Rt.captureException(`CreateWalletToServerInHomePage-${n}`)}catch(n){console.log(n)}},[]);o();r();Oe();ut();Me();Pe();var ze=m(h()),Ar=m(B());var br=()=>{let e=Ao({keyringType:pe.MPC}),n=(0,Ar.useSelector)(so),t=(0,ze.useCallback)(async()=>{Promise.all(e.map(s=>{let i=s?.mpcId||"",c=s?.walletIdentities?.length-1;return ue(Z.syncMpcwallet,{mpcId:i,deriveIndex:c})})).then(s=>{M().setIsNeedSyncMpcIndex(!1)}).catch(s=>{console.log("syncMpcWallet error:")})},[e?.length]);(0,ze.useEffect)(()=>{e?.length&&n&&t()},[e?.length,t,n])};var Nr=(i=>(i.CREATE_FAIL_FROM_NETWORK_ERROR="CREATE_FAIL_FROM_NETWORK_ERROR",i.CREATE_FAIL_FROM_SERVER_ERROR="CREATE_FAIL_FROM_SERVER_ERROR",i.CREATE_FAIL_FROM_SERVER_LIMIT="CREATE_FAIL_FROM_SERVER_LIMIT",i.PENDING="PENDING",i))(Nr||{}),A={...Nr,...ht},Sr=()=>{let e=X();br();let{needSyncMap:n={},createdMap:t={}}=(0,kr.useSelector)(({metamask:I})=>I),s=Boolean(t[e]),i=Boolean(n[e]),c=Tr(),l=Xo(),[p,d]=(0,P.useState)(!s||i||l?A.PENDING:""),[_,a]=(0,P.useState)(""),g=(0,P.useCallback)(async()=>{try{await No()}catch(I){d(I?.message)}},[]),y=(0,P.useCallback)(async()=>{let I=await M().getWalletTypeCreated(e);d(A.PENDING);try{await M().createWalletToServer({walletId:e,walletType:I,noticeBackend:!0})}catch(x){switch(x?.message){case"ERR_NETWORK":d(A.CREATE_FAIL_FROM_NETWORK_ERROR),c();break;case"ERR_SERVER_LIMIT":d(A.CREATE_FAIL_FROM_SERVER_LIMIT),c(A.CREATE_FAIL_FROM_SERVER_LIMIT);break;default:d(A.CREATE_FAIL_FROM_SERVER_ERROR),a(x?.message);break}}},[c,e]),T=(0,P.useCallback)(async()=>{try{await M().syncWalletToServer(e)}catch{console.log("sync wallet error")}},[e]),b=(0,P.useCallback)(async()=>{s?i&&await T():await y()},[y,s,i,T]);return(0,P.useEffect)(()=>{(async()=>s&&!i&&(await g(),await M().getAccountKeys()))()},[g,s,i,e]),(0,wr.useUpdateEffect)(()=>{d(A.PENDING)},[e]),(0,P.useEffect)(()=>{b()},[b]),(0,P.useEffect)(()=>{!l&&s&&!i&&d("")},[l,s,i]),[{errorType:p,errorMsg:_},{createWalletToServer:y}]};o();r();o();r();v();var O=m(h());o();r();var Br={btn:"_btn_l5kiz_1"};o();r();var Ct=m(h());Oe();var Lr=({walletIds:e})=>{let n=(0,Ct.useCallback)(async()=>await M().fetchApprovalRisk({accountIds:e}),[e]),t=(0,Ct.useCallback)(async()=>{await M().setApprovalRiskRemindLater()},[]);return{fetchApprovalRisk:n,remindLater:t}};var Rr=({walletId:e})=>{let[n,t]=O.default.useState(!1),s=xo(),i=To(),c=(0,O.useMemo)(()=>({walletIds:[e]}),[e]),{fetchApprovalRisk:l,remindLater:p}=Lr(c);(0,O.useEffect)(()=>{(async()=>{let{approvalProjectList:a}=await l();a?.length>0&&t(!0)})()},[l]);let d=(0,O.useCallback)(()=>{t(!1),yt({go_to_website:!1}),p()},[p]),_=(0,O.useCallback)(()=>{let a=s.web3||`https://${i}/web3`;globalThis.open(a),t(!1),yt({go_to_website:!0})},[i,s.web3]);return O.default.createElement(me.Prompt,{visible:n,title:E("wallet_extension_risk_modaltitle_risk_warning"),text:E("wallet_extension_risk_modalsubtitle_risk_warning"),infoType:me.Prompt.INFO_TYPE.warn,hideCloseBtn:!0,alignBottom:!1,footer:O.default.createElement(O.default.Fragment,null,O.default.createElement(N,{category:N.CATEGORY.fill,type:N.TYPE.highlight,size:N.SIZE.lg,block:!0,onClick:_},E("wallet_extension_risk_btn_official_website")),O.default.createElement(N,{category:N.CATEGORY.outline,type:N.TYPE.default,size:N.SIZE.lg,className:Br.btn,block:!0,onClick:d},E("wallet_extension_risk_btn_remind_later")))})};o();r();v();var ye=m(h()),Mr=m(B());o();r();var vr=m(h());v();o();r();var Or={blue:"_blue_1j2vu_1"};var Fr=()=>{let e=Qo();return vr.default.createElement("span",{className:Or.blue,onClick:()=>{er(e)}},E("wallet_extension_home_notification_btn_switch_servers"))};var Pr=()=>{let e=X(),n=(0,Mr.useSelector)(ve)||{},t=Boolean(n[e]),s=(0,ye.useCallback)((l=5)=>{G.error({key:"networkError",title:E("wallet_extension_toast_asset_error_try_again"),duration:l,placement:G.DIRECTION.top,desc:ye.default.createElement(Fr,null)})},[]),i=(0,ye.useCallback)((l=5)=>{G.error({key:"serverLimitError",title:E("wallet_extension_home_notif_network_high_traffic"),duration:l,placement:G.DIRECTION.top})},[]),c=(0,ye.useCallback)((l,p=5)=>{G.error({key:"customAlert",title:l,duration:p,placement:G.DIRECTION.top})},[]);return{isWalletCreated:t,networkAlert:s,serverLimitAlert:i,customAlert:c}};o();r();var k=m(h());o();r();var xt=m(h());o();r();var Ye={main:"_main_1li3n_1",line:"_line_1li3n_5",dot:"_dot_1li3n_11"};var Wr=({total:e,activeIndex:n,className:t})=>xt.default.createElement(f.FlexBox,{align:f.ALIGN.center,className:`${Ye.main} ${t}`},Array(e).fill("").map((s,i)=>xt.default.createElement("div",{className:n===i?Ye.line:Ye.dot})));o();r();var qe=m(h());o();r();var ke={main:"_main_si9mr_1",icon:"_icon_si9mr_1",left:"_left_si9mr_11"};var Dr=({handlePrev:e,handleNext:n,className:t})=>qe.default.createElement(f.FlexBox,{align:f.ALIGN.center,className:`${ke.main} ${t}`},qe.default.createElement($,{size:$.SIZE.xxs,onClick:e,icon:"okx-wallet-plugin-left",className:`${ke.icon} ${ke.left} `}),qe.default.createElement($,{size:$.SIZE.xxs,onClick:n,icon:"okx-wallet-plugin-right",className:ke.icon}));o();r();var J=m(h()),je=m(B());lt();ns();Me();Pe();var Hr=()=>{let[e,n]=(0,J.useState)([]),t=(0,je.useSelector)(tr),s=(0,je.useDispatch)(),i=qt();(0,J.useEffect)(()=>{(async()=>{let{data:p=[]}=await ao(Z.getBannerConfig),{uiData:d}=await Se.get("uiData"),_=d?.closedBannerStore||[];s(Et({allData:p,closedBanners:_,theme:i})),n(p)})()},[i]);let c=(0,J.useMemo)(()=>t.length,[t]),l=(0,J.useCallback)(async p=>{let{uiData:d}=await Se.get("uiData"),{closedBannerStore:_=[]}=d;_.push(p?.id);let a=Mt(_,e,(g,y)=>g===y?.id);await Se.set({uiData:{...d??{},closedBannerStore:a}}),s(Et({allData:e,closedBanners:a,theme:i}))},[e,i]);return{bannerList:t,total:c,handleClose:l}};o();r();var $r=m(h()),Ur=m(q());var Gr=()=>{let e=(0,Ur.useHistory)();return{link:(0,$r.useCallback)(t=>{switch(He({click_close:!1,banner_id:t.id}),t.urlType){case 2:{let s=t.url.replace("wallet://","");e.push(s);break}case 1:globalThis.open(t.url);break;default:break}},[])}};o();r();var U={"retina-border-basic":"_retina-border-basic_60npk_1",retinaBorderBasic:"_retina-border-basic_60npk_1",main:"_main_60npk_29",carousel:"_carousel_60npk_63",closeWrapper:"_closeWrapper_60npk_67",banner:"_banner_60npk_75",content:"_content_60npk_80",left:"_left_60npk_83",title:"_title_60npk_87",icon:"_icon_60npk_90",buttonIndex:"_buttonIndex_60npk_95",switch:"_switch_60npk_100"};var Kr=()=>{let[e,n]=(0,k.useState)(0),[t,s]=(0,k.useState)(!1),i=k.default.useRef(null),{link:c}=Gr(),{bannerList:l,total:p,handleClose:d}=Hr();return p===0?null:k.default.createElement(f.FlexBox,{className:U.main,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},k.default.createElement(pt,{touchSwitch:p>1,className:U.carousel,autoplay:p>1?5e3:!1,ref:i,loop:p>1,navigation:!1,showIndicators:!1,onChange:_=>{n(_)}},l?.map(_=>k.default.createElement(pt.Slide,null,k.default.createElement(f.FlexBox,{className:U.banner},k.default.createElement(f.FlexBox,{onClick:()=>c(_),className:U.content,align:p===1?f.ALIGN.center:f.ALIGN.start},k.default.createElement("div",{className:U.left},k.default.createElement(K.Text,{ellipsis:{rows:2},size:K.SIZE.sm,strong:500,className:U.title},_.title)),k.default.createElement($,{type:$.TYPE.image,className:U.icon,src:_.img})),k.default.createElement(f.FlexBox,{align:f.ALIGN.center,className:U.closeWrapper,onClick:()=>{He({click_close:!0,banner_id:_.id}),d(_)}},k.default.createElement(j,{className:"okx-wallet-plugin-close"})))))),p>1&&k.default.createElement("div",null,t?k.default.createElement(Dr,{className:U.switch,handlePrev:()=>i.current?.prev(),handleNext:()=>i.current?.next()}):k.default.createElement(Wr,{total:p,activeIndex:e,className:U.buttonIndex})))};o();r();var Ze=m(h());o();r();var Vr={content:"_content_o6jn4_1",wrapper:"_wrapper_o6jn4_9",img:"_img_o6jn4_12",title:"_title_o6jn4_16",text:"_text_o6jn4_19"};o();r();var D=m(h());o();r();var W={skeletonWrapper:"_skeletonWrapper_k76ne_1",tab:"_tab_k76ne_5",tokenList:"_tokenList_k76ne_10",token:"_token_k76ne_10",logo:"_logo_k76ne_18",symbol:"_symbol_k76ne_23",chain:"_chain_k76ne_28",middle:"_middle_k76ne_32",number:"_number_k76ne_35",currency:"_currency_k76ne_40"};var ms=()=>D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,align:f.ALIGN.unset,className:W.skeletonWrapper},D.default.createElement(re.Input,{active:!0,className:W.tab}),D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,justify:"space-around",className:W.tokenList},Array(5).fill("").map((e,n)=>D.default.createElement(f.FlexBox,{className:W.token,align:f.ALIGN.center,key:n},D.default.createElement(re.Avatar,{active:!0,className:W.logo}),D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,className:W.middle},D.default.createElement(re.Input,{active:!0,className:W.symbol}),D.default.createElement(re.Input,{active:!0,className:W.chain})),D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,align:f.ALIGN.end,className:W.right},D.default.createElement(re.Input,{active:!0,className:W.number}),D.default.createElement(re.Input,{active:!0,className:W.currency})))))),zr=ms;o();r();var qr=m(h());v();o();r();var Yr={wrapper:"_wrapper_16oot_1"};var jr=({tryAgain:e})=>qr.default.createElement(ce.State,{title:E("wallet_extension_home_title_network_unavailable"),type:ce.State.TYPE.noNetwork,description:E("wallet_extension_home_text_check_network_error"),buttonText:E("wallet_extension_home_btn_try_again"),onButtonClick:()=>{e&&e()},className:Yr.wrapper});var Zr=({errorType:e,tryAgain:n})=>{let t=e===A.CREATE_FAIL_FROM_NETWORK_ERROR||e===A.CREATE_FAIL_FROM_SERVER_ERROR;if(!t&&e!==A.PENDING)return null;let s=()=>{switch(e){case A.CREATE_FAIL_FROM_NETWORK_ERROR:case A.CREATE_FAIL_FROM_SERVER_ERROR:return Ze.default.createElement(jr,{tryAgain:n});case A.PENDING:return Ze.default.createElement(zr,null);default:return null}};return Ze.default.createElement(f.FlexBox,{align:f.ALIGN.center,justify:t?f.ALIGN.center:f.ALIGN.unset,direction:f.DIRECTION.vertical,className:Vr.content},s())};o();r();var S=m(h()),hn=m(B());o();r();var Xe=m(h());var Jr=m(B());var Qr=()=>{let[e,n]=(0,Xe.useState)([]),t=de("nft-operate"),i=(0,Jr.useSelector)(eo)?.account?.aptos||"",c=or();return rr(),(0,Xe.useEffect)(()=>{(!t||t.data.status===2)&&i&&Wo(i).then(l=>{n(l.list)}),t?.data?.status===2&&setTimeout(()=>{c()},3e3)},[t,c]),{aptosNftOffers:e,aptosAddress:i,fetchNftListData:c}};o();r();var w=m(h()),gn=m(B()),yn=m(q());v();o();r();var tn=m(Zt());o();r();mt();var en=({addedCoinIdsSet:e,defaultBaseCoinsCoinIdsSet:n,balanceCoin:t,isDefault:s})=>{let i=e.has(t.coinId),c=n.has(t.coinId)||s||t.isDefault,l=i||c,p=Be(t.currencyAmountUSD,"1");return l||p};var cs={showCoins:[],hiddenCoins:[]},on=(0,tn.createSelector)(Oo,Ro,Fo,vo,(e,n,t,s)=>{if(!e.length)return cs;let i=gt(e,p=>!t.has(p.coinId),{sort:!1}).results,{results:c,uselessResults:l}=gt(i,(p,d)=>en({defaultBaseCoinsCoinIdsSet:s,addedCoinIdsSet:n,balanceCoin:p,isDefault:d}));return{showCoins:c,hiddenCoins:l}});o();r();var rn=m(B());function ps(){let e=(0,rn.useDispatch)(),[n]=Io(Eo.hiddenSmallAssets),t=l=>{e(yo(l))};return[n,{toggle:()=>{t(!n)},hide:()=>{t(!0)},show:()=>{t(!1)},setValue:t}]}var nn=ps;o();r();var an=m(h()),Tt=m(B());v();mt();var us=e=>e.map(n=>({...n,coinAmount:null})),sn=e=>e.map(n=>{try{let t=new Ft(n.image),{query:s}=t;if(!s.get("x-oss-process"))return s.set("x-oss-process","image/resize,m_lfit,w_100,h_100/ignore-error,1"),{...n,image:t.get()}}catch{}return n}),At=e=>{let n=ko(),{currentNetworkUniqueId:t}=_e(),s=(0,Tt.useSelector)(ve),i=(0,Tt.useSelector)(io),c=Boolean(s[n]),l=Boolean(i[n]);return(!c||l)&&(e=us(e)),(0,an.useMemo)(()=>{if(t==="")return sn(e);let d=e.filter(a=>(a?.childrenCoin||[]).find(g=>g.chainId===Number(t))||a.chainId===Number(t)),_=[];return d.forEach(a=>{if(a?.aggregation){let g=(a?.childrenCoin||[]).filter(I=>I.chainId===Number(t)),y=g.reduce((I,x)=>oe(I,x.coinAmount),"0"),T=g.reduce((I,x)=>oe(I,x.currencyAmount),"0"),b=g.reduce((I,x)=>oe(I,x.currencyAmountUSD),"0");_.push({...a,childrenCoin:g,coinAmount:y,currencyAmount:T,currencyAmountUSD:b})}else _.push(a)}),_=_.map(a=>({...a,coinAmount:a?.coinAmount===null?"--":vt.truncate(a?.coinAmount,6,!1)})).sort((a,g)=>Be(g.currencyAmount,a.currencyAmount)?1:-1),sn(_)},[e,t])};o();r();var Ee=m(h()),cn=m(Te());Ut();o();r();var bt=m(B()),ln=m(q());var mn=()=>{let{currentNetworkUniqueId:e}=(0,bt.useSelector)(fo),n=Po(),t=(0,ln.useHistory)(),s=(0,bt.useSelector)(fr),i=X(),c=s?.[i],l=a=>{if(c?.[`${a.symbol}-${a.coinId}`])return c[`${a.symbol}-${a.coinId}`];let g=be({nearAggregation:!0,coinSymbol:a.symbol,coinId:a.coinId,addressType:""});return`${Ae}${g}`},p=a=>{if(c?.[`${a.symbol}-${a.coinId}`])return c[`${a.symbol}-${a.coinId}`];let g=be({btcAggregation:!0,coinSymbol:a.symbol,coinId:a.coinId,addressType:""});return`${Ae}${g}`},d=async a=>{if(e===""&&c?.[a.symbol])return c[a.symbol];let y=(e!==""?a.childrenCoin.find(b=>b.chainId===Number(e)):null)?.coinId||"",T=be({aggregation:!0,coinSymbol:a.symbol,coinId:y});return`${Ae}${T}`};return{jumpCoinDetailPage:async a=>{let g="";if(a.aggregation)g=await d(a);else if(Vt(a))g=p(a);else if(zt(a))g=l(a);else{let y=be({coinId:a.coinId});g=`${Ae}${y}`}g&&t.push(g)},coinToCurrencyRate:n}};function fs({dataSource:e,hiddenAssets:n,onMount:t}){let{jumpCoinDetailPage:s,coinToCurrencyRate:i}=mn(),c=ur(),l=Mo(),p=(0,cn.useMemoizedFn)(()=>{t?.()});return(0,Ee.useLayoutEffect)(()=>{p()},[p]),Ee.default.createElement(_t,{renderEmpty:!1,dataSource:e,renderItem:d=>{let{image:_,symbol:a,coinAmount:g,currencyAmount:y,coinId:T,riskType:b}=d,I=c(d),x=i?.[T]||"0",H=l?.[T]?.coinPriceChangePercent24h??void 0;return Ee.default.createElement(_t.Coin,{icon:{lazyload:!0,src:_,type:jt.image,defaultIcon:$t},price:x,pricePercent:H,symbol:a,hidden:n,balance:I?g:void 0,market:I?y:void 0,onClick:async()=>{I&&await s(d)},riskType:b},!I&&Ee.default.createElement(pr,{coinId:d?.coinId}))}})}var kt=fs;o();r();var V=m(h());var un=m(q());Pe();Me();Le();v();o();r();var pn={root:"_root_qmbez_1",alert:"_alert_qmbez_4"};function ds(){let[e,n]=(0,V.useState)(!1),[t,s]=(0,V.useState)({}),i=(0,un.useHistory)(),c=bo(he),l=de("dex-across-order-info"),{currentNetworkUniqueId:p}=_e(),d=Do({localType:he})||[],_=Number(p)===d?.[0]?.realChainId||p==="";return(0,V.useEffect)(()=>{(()=>{ue(Z.postPendingFacetOrder,{userWalletAddresses:c,chainId:d?.[0]?.realChainId||1}).then(g=>{if(g.data?.length>0){if(_)n(!0);else{n(!1);return}let y=g.data.filter(T=>Number(T.status)===11&&Number(T.specialOrderType)===3);y?.length>0?(s({orderId:y[0].orderId,toAmount:y[0].toAmount,toTokenSymbol:y[0].toTokenSymbol}),n(!0)):(s(""),n(!1))}else s({}),n(!1)}).catch(g=>{console.log("err",g),s({}),n(!1)})})()},[l,p,_]),e?V.default.createElement(f.Box,{className:pn.root},V.default.createElement(Re,{desc:V.default.createElement("div",null,E("swaptrade_extension_reminder_desc_pending_withdrawal",{token:t?.toTokenSymbol,amount:t?.toAmount}),V.default.createElement(Re.Link,{onClick:a=>{a.preventDefault(),i.push(`${mo}/${t?.orderId}`)}},E("swaptrade_extension_cell_btn_confirm_withdrawal"))),type:Re.TYPE.info,onClose:()=>{n(!1)}})):null}var fn=ds;o();r();var Je=m(h()),dn=m(Yt());v();o();r();var wt={root:"_root_1e5k7_1",icon:"_icon_1e5k7_12"};function _s({length:e,toggle:n,value:t}){let s=t?"okds-arrow-chevron-down-md":"okds-arrow-chevron-up-md",i=E("wallet_extension_main_toggle_hide",{num:Ot.formatNumber(e)});return Je.default.createElement("div",{onClick:n,className:wt.root},Je.default.createElement("div",null,i),Je.default.createElement(j,{className:(0,dn.default)(s,wt.icon)}))}var _n=_s;o();r();var Ie={button:"_button_blxw2_1",showButton:"_showButton_blxw2_5",coinList:"_coinList_blxw2_13",icon:"_icon_blxw2_16",empty:"_empty_blxw2_20"};var gs=190,Nt=({scrollTop:e,hiddenAssets:n,backupHeight:t,changeScrollTop:s})=>{let{showCoins:i,hiddenCoins:c}=(0,gn.useSelector)(on),l=At(i),p=At(c),[d,{toggle:_}]=nn(),a=(0,w.useRef)(e),g=()=>{a.current=e,_()},y=()=>{requestAnimationFrame(()=>{s(a.current)})},{fetch:T}=cr();ar(T,{cacheKey:mr,staleTime:1e3*60*10});let b=(0,yn.useHistory)(),I=l.length,x=p.length,H=(0,w.useMemo)(()=>e<=gs?!1:I+(d?0:x)>8,[d,x,I,e]),{paddingBottom:L,buttonPaddingBottom:Y,absoluteBottom:R}=lr({isButtonAbsolute:H,backupHeight:t});return I===0&&x===0?w.default.createElement("div",{style:{paddingBottom:L+t}},w.default.createElement(ce.State,{className:Ie.empty,type:ce.State.TYPE.noRecord,title:E("extension_wallet_home_text_no_added_currencies"),buttonText:E("extension_wallet_home_btn_add_now"),onButtonClick:()=>{b.push(ft)}})):w.default.createElement("div",null,w.default.createElement("div",{style:{paddingBottom:L},className:Ie.coinList},w.default.createElement(fn,null),w.default.createElement(kt,{dataSource:l,hiddenAssets:n}),x>0&&w.default.createElement(w.default.Fragment,null,w.default.createElement(_n,{length:x,toggle:g,value:d}),!d&&w.default.createElement(kt,{onMount:y,dataSource:p,hiddenAssets:n}))),w.default.createElement("div",{className:`${H?Ie.showButton:""} ${Ie.button}`,style:{bottom:R,paddingBottom:Y}},w.default.createElement(N,{circle:!0,category:N.CATEGORY.outline,type:N.TYPE.secondary,size:N.SIZE.md,onClick:()=>{b.push(ft)}},w.default.createElement(j,{className:`okx-wallet-plugin-edit-wallet ${Ie.icon}`}),E("wallet_home_btn_manage_crypto"))))};o();r();var ne=m(h());v();var et=m(B());o();r();var Qe={homeTabs:"_homeTabs_o2bwr_1",homeTab:"_homeTab_o2bwr_1",active:"_active_o2bwr_13"};var En=({aptosNftOffers:e})=>{let n=(0,et.useSelector)(Ue),t=(0,et.useDispatch)(),s=Ke($e),i=(0,ne.useMemo)(()=>[E("wallet_extension_nft_tab_coins"),ne.default.createElement("div",null,E("wallet_extension_nft_tab_nfts"),e.length>0&&ne.default.createElement("span",{className:"new-home-nft-aptos-notify"})),E("wallet_extension_tab_defi")],[e]);return ne.default.createElement(Ce,{noLine:!0,className:Qe.homeTabs,activeId:n,size:Ce.SIZE.lg,color:Ce.COLOR.grey,paneSpacing:0,onChange:c=>{let l;switch(c){case 1:l="crypto";break;case 2:l="nfts";break;case 3:l="defi";break;default:break}s({homepage:l}),t(Ko.setActiveId({id:c}))}},i.map((c,l)=>ne.default.createElement(Ce.TabPane,{className:`${Qe.homeTab} ${+n===l+1?Qe.active:""}`,tab:c,key:l,id:l+1})))};o();r();var In={main:"_main_bbmgq_1"};var ys=(0,S.lazy)(()=>import("./Nft-HQGGQXNK.js")),Es=(0,S.lazy)(()=>import("./DefiList-ARE22O4M.js")),Cn=({scrollTop:e,hiddenAssets:n,backupHeight:t,isWalletCreated:s,changeScrollTop:i})=>{let c=(0,hn.useSelector)(Ue),{aptosNftOffers:l,aptosAddress:p}=Qr(),d=(0,S.useMemo)(()=>{switch(c){case 1:return S.default.createElement(Nt,{scrollTop:e,hiddenAssets:n,backupHeight:t,changeScrollTop:i});case 2:return S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(ys,{scrollTop:e,aptosNftOffers:l,aptosAddress:p,backupHeight:t}));case 3:return S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(Es,{scrollTop:e,hiddenAssets:n,backupHeight:t,isWalletCreated:s}));default:return S.default.createElement(Nt,{scrollTop:e,hiddenAssets:n,backupHeight:t})}},[c,p,l,t,n,e,s]);return S.default.createElement("div",{className:In.main},S.default.createElement(En,{aptosNftOffers:l}),d)};o();r();var Q=m(h());v();o();r();var se={iconAniWrapper:"_iconAniWrapper_piy3e_20",iconItem:"_iconItem_piy3e_29",text:"_text_piy3e_35",moveOutAnimation:"_moveOutAnimation_piy3e_38",moveOut:"_moveOut_piy3e_38",moveInAnimation:"_moveInAnimation_piy3e_42",moveIn:"_moveIn_piy3e_42",iconTitle:"_iconTitle_piy3e_54"};var xn=({width:e})=>Q.default.createElement(f.FlexBox,{align:f.ALIGN.center,direction:f.DIRECTION.vertical,style:{width:e}},Q.default.createElement(f.Box,{className:se.iconAniWrapper},Q.default.createElement(f.FlexBox,{align:f.ALIGN.center,justify:f.ALIGN.center,className:`${se.iconItem} ${se.moveInAnimation}`},Q.default.createElement($,{className:"okx-wallet-plugin-toolkit"})),Q.default.createElement(f.FlexBox,{align:f.ALIGN.center,justify:f.ALIGN.center,direction:f.DIRECTION.vertical,className:`${se.iconItem} ${se.moveOutAnimation}`},Q.default.createElement($,{className:"okx-wallet-plugin-swap-for-gas"}))),Q.default.createElement(K.Text,{className:se.iconTitle,ellipsis:!0,size:K.SIZE.xs},E("wallet_extension_home_text_toolkit")));o();r();var F=m(h()),ot=m(B()),wn=m(q()),Nn=m(Te()),Sn=m(Yt());v();ss();o();r();var tt={"retina-border-basic":"_retina-border-basic_1a6hn_1",retinaBorderBasic:"_retina-border-basic_1a6hn_1",main:"_main_1a6hn_29",dot:"_dot_1a6hn_64",title:"_title_1a6hn_73",icon:"_icon_1a6hn_77"};o();r();var Tn=m(h());Le();Me();Pe();var An=m(Te());Oe();var bn=m(B());var kn=()=>{let e=wo(le),n=(0,Tn.useMemo)(()=>e?.map(i=>i.address)||[],[e]),t=(0,bn.useSelector)(xe);return(0,An.useMemoizedFn)(async()=>{try{let i=await M().getRequestHeaders({walletId:t,needSign:!0,currency:"usd"}),{data:c=[]}=await ue(Z.getBtcPendingTx,{txPendingCountReqList:[{addressList:n,chainId:0}]},{headers:i});return c[0]}catch{return{}}})};var Bn=()=>{let[e,n]=(0,F.useState)({}),t=(0,ot.useSelector)(It),s=(0,wn.useHistory)(),i=(0,ot.useDispatch)(),c=kn(),l=(0,Nn.useMemoizedFn)(async()=>{let a=await c();n(a)});(0,F.useEffect)(()=>{t&&l()},[t]);let p=de("wallet-notice");(0,F.useEffect)(()=>{p&&l()},[p,l]);let d=(0,F.useMemo)(()=>!e||typeof e?.pendingCount!="number"?"":e?.hasMoreCount?E("extension_defi_mid_notif_btc_over100_receive",{minAmt:"100"}):e?.pendingCount&&e?.pendingCount>0?E("extension_defi_mid_notif_btc100_receive",{extension_defi_mid_notif_btc100_receive:e?.pendingCount,maxAmt:e?.pendingCount}):"",[e]),_=()=>{i(Ve({mainCoinId:Gt})),s.push(`${De}?filterByChain=${0}`)};return!e||typeof e?.pendingCount!="number"||e?.pendingCount===0?null:F.default.createElement(f.FlexBox,{className:tt.main,align:"center",justify:"space-between",onClick:_},F.default.createElement(f.FlexBox,{align:"center"},F.default.createElement("div",{className:tt.dot}),F.default.createElement(K.Text,{type:K.TYPE.default,size:K.SIZE.xs},d)),F.default.createElement(j,{className:(0,Sn.default)("okx-wallet-plugin-right",tt.icon)}))};o();r();var z=m(h());var Rn=m(q());Ut();var we=m(B());Le();o();r();var Ln=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"wallet_extension_homepage_feature_name_swap",icon:"okx-wallet-plugin-swap-2",type:"DEX",disabledText:""},{text:"wallet_extension_header_text_history",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var On=()=>{let e=(0,we.useSelector)(Fe),n=Ge(),t=(0,Rn.useHistory)(),s=(0,we.useDispatch)(),i=_r(),l=Ho({networkId:i?.id?String(i?.id):void 0})?.coinId,{baseCoin:p={}}=$o(l,!0),d=Ir(p,"",Er.home),_=(0,we.useSelector)(to),a=(0,z.useMemo)(()=>{let{initialType:R,accountMap:ee}=_;if(_o(R)){let te=Object.keys(ee);return![le,he].some(it=>te.includes(it))}return!1},[_]),g=(0,z.useCallback)(()=>{e?n():t.push(`${dt}?type=${ct.RECEIVE}`)},[t,e,n]),y=(0,z.useCallback)(()=>{p?.coinId&&s(Ve({mainCoinId:p?.coinId})),t.push(De)},[p?.coinId,s,t]),{hasNewFeature:T}=sr(),b=(0,z.useCallback)(()=>{t.push(lo)},[t]),I=(0,z.useCallback)(()=>{t.push(`${dt}?type=${ct.SEND}`)},[t]),x=Ke($e),{impactHaptic:H}=ho(),L=(0,z.useCallback)(R=>{switch(H(),R.type){case"SEND":{x({homepage:"send"}),I();break}case"RECEIVE":{x({homepage:"receive"}),g();break}case"DEX":{x({homepage:"trade"}),d();break}case"HISTORY":{x({homepage:"history"}),y();break}case"DAPP_CONNECT":{b();break}default:break}},[g,d,y,b,I]),Y=(0,z.useMemo)(()=>Ln.map(R=>R.type==="DEX"?{...R,disabled:a}:R.type==="MORE"?{...R,hasNewFeature:T}:R),[a,T]);return{clickHandle:L,iconOptions:Y}};o();r();var rt=m(h()),Fn=m(B());o();r();var vn=m(h());lt();ut();Le();function St(){let e=fe();return(0,vn.useMemo)(()=>{let n=hr.find(t=>{let s=e?.account?.[t],i=Wt(Object.values(e?.account??{}));return t===le?!1:s&&e.keyringIdentityType===pe.PRIVATE_KEY&&i.length===1&&i[0]===s});return n?{isFactionPKAccount:!0,chain:n}:{isFactionPKAccount:!1}},[e])}var Mn=()=>{let e=fe(),{isFactionPKAccount:n,chain:t}=St(),{currentNetworkUniqueId:s}=_e(),{addresses:i=[],hotAddresses:c=[]}=(0,Fn.useSelector)(go),l=(0,rt.useCallback)(a=>n?a.localType===t:s===""?!0:a.chainId===Number(s),[s,n,t]),{filterAddress:p,filterHotAddress:d}=(0,rt.useMemo)(()=>({filterAddress:i.filter(l),filterHotAddress:c.filter(l)}),[i,l,c]),_=p.length===1;return{filterAddress:p,filterHotAddress:d,address:_?p[0]?.address:"",chainName:_?p[0]?.chainName:"",titleLeft:e?.keyringName,titleRight:_?e?.walletName:"",subTitle:_?Kt(p[0]?.address):e?.walletName,isFactionPKAccount:n}};o();r();var Pn=m(h()),Wn=m(q());v();ut();var Dn=({address:e})=>{let n=(0,Wn.useHistory)(),t=fe(),s=()=>{n.push(`${We}?fromHome=1`)};return t?.keyringIdentityType===pe.PRIVATE_KEY&&e==="UQCiCTSKMQTIF8VSGc3F7DxWxJrV09SAbJzc1YvWZ5pgiQAP"?Pn.default.createElement(me.Prompt,{visible:!0,infoType:me.Prompt.INFO_TYPE.warn,title:E("wallet_extension_errormsg_unavailable_address"),confirmText:E("wallet_extension_connect_btn_switch_wallet"),onConfirm:s,hideCloseBtn:!0,alignBottom:!1,maskClosable:!1,confirmBtnProps:{type:N.TYPE.highlight,size:N.SIZE.lg}}):null};var hs=()=>{let{firstPermissionsRequestId:e}=(0,nt.useSelector)(ae=>{let ts=ro(ae),at=uo(ae),os=at&&at.metadata?at.metadata.id:null;return{totalUnapprovedCount:ts,firstPermissionsRequestId:os}}),{isWalletCreated:n,networkAlert:t,serverLimitAlert:s,customAlert:i}=Pr(),c=X(),{walletAsset:l,platformAssetUSD:p,nftBalanceUSD:d,defiBalanceUSD:_,tokenBalanceUSD:a}=(0,nt.useSelector)(Cr),g=Ge(),[{errorType:y,errorMsg:T},{createWalletToServer:b}]=Sr(),I=jo(),[x,H]=Co(),L=(0,C.useRef)(null),[Y,R]=(0,C.useState)(0),{isNeedShowDisconnectUpgrade:ee,setDisconnectUpgrade:te}=qo(),it=(0,C.useCallback)(()=>{ee&&(G.success({title:E("wallet_extension_card_subtitle_disconnect_update")}),te())},[ee,te]),ie=(0,nt.useSelector)(Fe),Ne=(0,C.useRef)(null),Bt=(0,Hn.useHistory)(),[$n,Un]=(0,C.useState)(0),{clickHandle:Gn,iconOptions:Kn}=On();(0,C.useEffect)(()=>{switch(y){case A.CREATE_FAIL_FROM_NETWORK_ERROR:case A.ERR_NETWORK:t();break;case A.CREATE_FAIL_FROM_SERVER_LIMIT:case A.ERR_SERVER_LIMIT:s();break;case A.CREATE_FAIL_FROM_SERVER_ERROR:i(T);break;default:break}},[i,T,y,t,s]),(0,C.useEffect)(()=>{p!=="--"&&Go({wallet_id:c,coin_balance:a,nft_balance:d,defi_balance:_,platform_coin_balance:p})},[c,p,d,a,_]);(0,C.useEffect)(()=>{e&&ie&&g({text:E("wallet_dapp_conncetion_alert_backup_wallet")},e)},[ie,e]),(0,st.useMount)(()=>{po()});let{run:Vn}=(0,st.useDebounceFn)(()=>{Un(Ne.current?.scrollTop||0)},{wait:50,maxWait:50}),{titleLeft:zn,titleRight:Yn,subTitle:qn,address:Lt,chainName:jn,filterAddress:Zn,filterHotAddress:Xn,isFactionPKAccount:Jn}=Mn(),Qn=async()=>{y!==A.PENDING&&(G.destroyAll(),await b())};(0,C.useLayoutEffect)(()=>{L.current&&ie&&n&&R(L.current?.clientHeight||0)},[ie,n]);let es=ae=>{Ne.current&&(Ne.current.scrollTop=ae)};return C.default.createElement("div",{id:dr,className:"ok-home-page main-container",ref:Ne,onScroll:()=>{Vn()}},C.default.createElement(gr,{titleLeft:zn,titleRight:Yn,subTitle:qn,address:Lt,chainName:jn,filterAddress:Zn,filterHotAddress:Xn,isNotBackupWallet:ie,isFactionPKAccount:Jn}),C.default.createElement(nr,{balance:l,hiddenAssets:x,onToggleHiddenAssets:H}),C.default.createElement(ir,{clickHandle:Gn,iconOptions:Kn,customMore:ae=>C.default.createElement(xn,{width:ae})}),C.default.createElement(Bn,null),C.default.createElement(Kr,null),C.default.createElement(Cn,{scrollTop:$n,hiddenAssets:x,backupHeight:ie?Y+24:0,isWalletCreated:n,changeScrollTop:es}),n&&C.default.createElement("div",{ref:L},C.default.createElement(zo,{offsetBottom:24+Yo})),C.default.createElement(Zo,{disconnectCallback:it}),n&&C.default.createElement(yr,{showBackup:()=>{g({text:E("wallet_dapp_conncetion_alert_backup_wallet")},e)}}),I&&C.default.createElement(Jo,{actionMap:{["RECOVER"]:()=>{Bt.push(`${co}?action=${Uo.RECOVER}&walletId=${c}`)},["SWITCH_WALLET"]:()=>{Bt.push(`${We}?fromHome=1`)}}}),C.default.createElement(Rr,{walletId:c}),C.default.createElement(Zr,{tryAgain:Qn,errorType:y}),C.default.createElement(Dn,{address:Lt}))},Uf=hs;export{It as a,Uf as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-27CM2NKZ.js.map
