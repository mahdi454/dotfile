import{a as Ir}from"./chunk-C5ZY4QOR.js";import{a as G}from"./chunk-OQY6TZK5.js";import{a as Tr}from"./chunk-6LE5AZMI.js";import{a as yr}from"./chunk-FCM3KMN7.js";import{a as vo}from"./chunk-C6JR2GZU.js";import{a as Lo}from"./chunk-WMPWBUW7.js";import{b as cr,c as pe,m as pr,o as lr,p as fr}from"./chunk-GL5KZF23.js";import{a as Mo}from"./chunk-6D2WFU2O.js";import{a as wo}from"./chunk-445ZV7VL.js";import{g as Po}from"./chunk-YQGNRWCJ.js";import{a as _r}from"./chunk-XZFOTB6K.js";import{a as pt,b as dr,d as gt,e as xr,f as le,g as It}from"./chunk-R5U3NPEX.js";import{A as se,B as ie,F as sr,I as ir,J as ar,N as ae,O as mr,Q as ur,S as me,T as ue,Y as ce,b as er,c as or,d as rr,e as Pt,f as $,g as oe,i as wt,k as re,l as nr,q as ne,v as Lt}from"./chunk-JDZSGQWQ.js";import{a as ho,b as No,p as Oo,q as k}from"./chunk-UAHUXCQX.js";import{a as Fo}from"./chunk-BWRHBLYR.js";import{e as Bo}from"./chunk-XTOYI7P4.js";import{d as Q,g as bo,j as Ot}from"./chunk-J2H2J7IS.js";import{b as To}from"./chunk-MFN67L7C.js";import{A as Cr,da as gr}from"./chunk-HMORTYXM.js";import{D as ke,E as zo,F as Go,G as Vo,I as Xo,J as Zo,L as Ko,M as qo,N as Jo,O as jo,P as Qo,Q as tr,b as Do,f as ko,j as Uo,k as Ro,n as $o,q as Wo,t as Ho,x as Yo}from"./chunk-5KSRM7B2.js";import{k as Ao}from"./chunk-GPJC633M.js";import{H as Eo,i as So}from"./chunk-YC6W5MPL.js";import{a as te,g as Io}from"./chunk-GSYNHSX4.js";import{a as zn,m as Co,n as go}from"./chunk-IQUFOLSA.js";import{a as ee}from"./chunk-PAER4Z2U.js";import{a as Qt}from"./chunk-M2F2X65U.js";import{_a as yo,a as fo,f as _o,ja as xo}from"./chunk-S5DGV5WL.js";import{b as De}from"./chunk-AOXUSYRH.js";import{l as no,m as so,q as A}from"./chunk-WKBC6JL3.js";import{X as ct}from"./chunk-VPDRXROE.js";import{sa as qt,w as Y}from"./chunk-JLIPSIRU.js";import{a as ve}from"./chunk-VX55KNI4.js";import{$ as Kt,W as Zt,Y as mo,Z as h,aa as uo,b as B,ha as j,j as ao,ta as z}from"./chunk-VGT27A4M.js";import{d as Xt,f as io}from"./chunk-R4G6BEPF.js";import{c as F}from"./chunk-RXNDJ7P3.js";import{a as Jt,b as po}from"./chunk-CYOQISC6.js";import{f as jt,h as lo}from"./chunk-TKYTZF2K.js";import{B as zt,C as Qe,D as Le,Ha as $t,Jb as Wt,M as to,R as Gt,U as Tt,Uc as co,X as mt,gd as Yn,ib as ut,w as q,x as we,y as at}from"./chunk-YT2MPR4E.js";import{B as oo,H as ro,b as eo,o as Vt,q as Ct}from"./chunk-LDKM7IQF.js";import{K as Rt,pa as Pe,s as je}from"./chunk-6O63U2D6.js";import{M,l as yt,x as f}from"./chunk-RIOWPXBZ.js";import{c as Me,ca as J}from"./chunk-OSCGYMLH.js";import{a as x}from"./chunk-O337TVCZ.js";import{f as u,m as r,o as n}from"./chunk-GLD6H5Q5.js";r();n();var xe=u(x()),Fr=u(Y()),hr=u(ct());z();r();n();var fe=u(x());z();mo();mt();var Ue=(0,fe.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:Zt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function tt(){return(0,fe.useContext)(Ue)}function vt(){let{signInfo:t}=tt();return t}function de(){let{currencyId:t}=tt();return t}function rt(){let{params:t}=tt();return t}function Re(){let{feeData:t}=tt();return t}function _e(){let{onFeeDataChange:t}=tt();return t}function et(){let t=vt(),{inscriptions:e}=rt(),{inscriptionOutput:o}=Re(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:q(i,e.length)}}function At(){let{feeData:t}=tt();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>at(e,o),"0")}}function St(){let{feeData:t}=tt();return t.commitTxFee}function Z(){let{feeData:{feeSelectedSat:t={}}}=tt(),{type:e}=t,o=vt(),i;return e===h.CUSTOM?i=t.satBytes:i=o?.[uo[e]],{...t,satBytes:i||o?.normal||0}}function Ar(){let{feeData:t}=tt();return t.canTransferAmount}function Sr(){let{lifecycle:t}=tt();return t}r();n();var Er=u(x());function Gn(t,e){let o=Q(e),[,i]=wo({coinId:e,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Er.useMemo)(()=>i||{},[i])}var br=Gn;function Vn({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:c,...l}=o,p=(0,Fr.useSelector)(qt),y=br(m,c),[_,C]=(0,xe.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:h.STANDARD},canTransferAmount:"0"}),v=(0,hr.useMemoizedFn)((I,T)=>{C(S=>({...S,[I]:T}))});return xe.default.createElement(Ue.Provider,{value:{signInfo:y,currencyId:e??p.currencyId,params:{...l,netWorkCoinId:c,from:m,to:a||m},lifecycle:i,feeData:_,onFeeDataChange:v}},s)}var $e=Vn;r();n();r();n();var L=u(x()),Ee=u(ct());M();r();n();var Et=u(x()),We=u(Me());r();n();var Mt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Xn({className:t,loading:e,slot:o={},children:i,contentClassName:s}){let{header:m,footer:a,top:c}=o;return Et.default.createElement(F.Container,{loading:e,className:(0,We.default)(Mt.root,t)},Et.default.createElement(F.Box,{className:Mt["send-page-base-container__header"]},m),Et.default.createElement(F.Box,{className:Mt["send-page-base-container__wrapper"]},c,Et.default.createElement(F.Box,{className:Mt["send-page-base-container__inner-wrapper"]},Et.default.createElement(F.Box,{className:(0,We.default)(Mt["send-page-base-container__content"],s)},i),Et.default.createElement(Qt,{usePortal:!0,offsetBottom:0,placeholder:!0},a))))}var ye=Xn;r();n();var Ye=u(x());Pe();r();n();var V=u(x());M();r();n();var Nr=u(x()),He=u(Y());mt();var Br=(t,e)=>{let o=t.coinId,i=Ao(o),s=(0,He.useSelector)(qt),m=(0,He.useSelector)(({metamask:l})=>l.currencies),a=(0,Nr.useMemo)(()=>e&&m?.find(l=>l.currencyId===e)||s,[e]),c=q(i,a?.usdToThisRate);return Mo(to,l=>{let p=so(l,{symbol:t.symbol}),y=no(q(l,c),{useApproximate:!1,symbol:a.symbol});return`${p}(${y})`})};z();Wt();mt();var Or=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m})=>{let a=vo(),{coin:c,baseCoin:l}=Fo(i,!0),[p,y]=(0,V.useState)(e?.customSatBytes),_=Br(l,s),C=f("extension_wallet_transaction_text_minute");(0,V.useEffect)(()=>{!p&&o?.normal&&y(o?.normal)},[o]);let v=(0,V.useCallback)(g=>{y(g)},[]),I=(0,V.useCallback)(()=>{m?.({customSatBytes:p,type:h.CUSTOM,satBytes:p})},[p]),T=c.localType===$t?f("wallet_extension_transfer_unit_sat_b"):"",S=(0,V.useMemo)(()=>{let{min:g,mempoolMin:O}=o,E=O||g||0;return zt(p,E)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:E}):""},[p,o]);return(0,V.useMemo)(()=>[h.SLOW,h.STANDARD,h.FAST,h.CUSTOM].map(g=>{switch(g){case h.SLOW:return{data:{type:h.SLOW,satBytes:o.min,estimatedTime:`${Tt(o.maxCost)} ${C}`},unitPrice:`${o.min} ${T}`,totalPrice:_(q(o.min,t),s),type:f(Kt[h.SLOW]),typeKey:h.SLOW,estimatedTime:`${Tt(o.maxCost)} ${C}`};case h.STANDARD:return{data:{type:h.STANDARD,satBytes:o.normal,estimatedTime:`${Tt(o.normalCost)} ${C}`},unitPrice:`${o.normal} ${T}`,totalPrice:_(q(o.normal,t),s),type:f(Kt[h.STANDARD]),typeKey:h.STANDARD,estimatedTime:`${Tt(o.normalCost)} ${C}`};case h.FAST:return{data:{type:h.FAST,satBytes:o.max,estimatedTime:`${Tt(o.minCost)} ${C}`},unitPrice:`${o.max} ${T}`,totalPrice:_(q(o.max,t),s),type:f(Kt[h.FAST]),typeKey:h.FAST,estimatedTime:`${Tt(o.minCost)} ${C}`};default:return{unitPrice:`${o.max} ${T}`,totalPrice:_(q(p,t),s),estimatedTime:a(o,p),canConfirm:!S,onConfirm:I,components:()=>V.default.createElement(Ct.Number,{enableMinus:!1,precision:0,error:S,errorType:Ct.TIP_TYPE.always,onChange:v,value:p,size:Ct.SIZE.sm,title:T,className:"custom-network-fee__satb"})}}}),[t,o,p])};var Zn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:c})=>{let l=Or({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m});return Ye.default.createElement(Lo,{feeType:t?.type,feeDataList:l?.slice(0,3),onBack:a,visible:c,custom:je(l),onChange:({data:p})=>{s?.(p)}})},Pr=Ye.default.memo(Zn);Wt();r();n();var nt=u(x());Wt();M();var Lr=u(ct());z();r();n();var w=u(x());M();r();n();var bt={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var Te=330,Ce=1e4,Kn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,c]=(0,w.useState)(String(o));(0,w.useEffect)(()=>{c(String(o))},[o]),(0,w.useEffect)(()=>{e&&c(String(o))},[o,e]);let l=Ot(t,a,{currencyId:i,useApproximate:!1});return w.default.createElement(Vt.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:e,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},w.default.createElement(F.Box,{className:bt["output-panel__content"]},w.default.createElement(Ct.Number,{precision:0,value:a,max:Ce,min:Te,size:Ct.SIZE.xl,onChange:p=>{c(p)},suffix:w.default.createElement(A.Text,{size:A.SIZE.sm},"sats")}),w.default.createElement(A.Text,{className:bt["output-panel__compare"],type:A.TYPE.secondary,size:A.SIZE.sm},l),w.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},w.default.createElement(oo,{value:a,min:Te,max:Ce,contentClassName:bt["output-panel-slider__content"],onChange:p=>{c(String(p))}}),w.default.createElement(F.FlexBox,{justify:"space-between"},w.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${Te} sats`),w.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${Ce} sats`)))),w.default.createElement(F.Box,{className:bt["output-panel__button"]},w.default.createElement(J,{disabled:!a||!a?.trim(),category:J.CATEGORY.fill,type:J.TYPE.highlight,size:J.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,Te),Ce)),s?.()}},f("extension_transactions_btn_confirm"))))},wr=Kn;var qn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=ut,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[c,{toggle:l}]=(0,Lr.useBoolean)(!1),p=yt.gt(m,0)?m:"0",y=Ot(s,p,{currencyId:e,useApproximate:!0}),_=(0,nt.useMemo)(()=>ao(t),[t]);return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement(pt,{clickable:t===B.RUNES_ETCH?!1:void 0,onClick:()=>{yt.gt(i,0)&&l()},title:f(_)},nt.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&nt.default.createElement(A.Text,{className:bt["output-tag"]},"x",o),y)),nt.default.createElement(wr,{coinId:s,visible:c,currencyId:e,outputValue:i,onClose:l,onChange:a}))},vr=qn;r();n();M();var ge=u(x()),Jn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=Q(t),s=Ot(t,o,{currencyId:e,useApproximate:!0});return ge.default.createElement(pt,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},ge.default.createElement(A.Text,{inherit:!0,strong:700},ge.default.createElement(A.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},Mr=Jn;r();n();var Rr=u(x()),$r=u(ve()),Wr=u(ct()),Hr=u(zn());M();z();r();n();M();io();r();n();var Dr=u(x());Pe();io();Wt();po();lo();function jn({walletId:t,utxoType:e=1,coinId:o=ut}={}){let i=te();return(0,Dr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:c})=>{let l=await Xt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),p={address:s,coinAmount:m,serviceCharge:a,utxoType:e};Rt(c);let y={coinId:o,utxoRequests:[p]};try{let{data:_}=await jt(Jt.getBTCUTXO,y,{headers:l});return _?.[0]||{}}catch(_){return{error:!0,errorResp:_}}},[o,i,e,t])}var Ie=jn;mo();Wt();mt();r();n();var kr=u(x());z();function Qn(t){let{inscriptionOutput:e}=et(),{satBytes:o}=Z(),{walletId:i,from:s,to:m,inscriptions:a,txType:c,mintType:l}=rt(),p=lr(t),y=fr();return(0,kr.useCallback)(async _=>{let C={};return c===B.RUNES_ETCH?(C={input:_.map(({txHash:T,vout:S,coinAmount:g})=>({vOut:S,txId:T,amount:g})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:T})=>JSON.parse(T))},await y({walletId:i,address:s,tx:C,txType:c,mintType:l})):(C={commitTxPrevOutputList:_.map(({txHash:I,vout:T,coinAmount:S})=>({vOut:T,txId:I,amount:S})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:I,body:T})=>({contentType:I,body:T})),revealOutValue:e,changeAddress:s,toAddr:m},await p({walletId:i,address:s,tx:C,txType:c}))},[s,m,a,e,o])}var Ae=Qn;function ts(t=ut){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:c,mintType:l}=rt(),p=vt(),y=de(),_=pr({address:o,coinId:t,currencyId:y,txType:a,protocolId:c}),C=Ae(pe.CONFIRM),v=Ie({walletId:e,utxoType:s,coinId:t}),{beforePostTx:I}=Sr(),{inscriptionOutput:T,total:S}=et(),{totalFee:g}=At(),O=St(),{satBytes:E}=Z(),D=async N=>{let{commitTx:b,revealTxs:P,commitAddrs:U,commitTxFee:H,revealTxFees:ot}=await C(N.utxoList||[]),K=await ho($t,b),dt=await No($t,P),Bt=[K,...dt],_t={signedTx:b,fromAdr:o,serviceCharge:H,toAdr:i||o,itemId:"commitTx",txHash:K,txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e},R=P.map((Yt,xt)=>({signedTx:Yt,fromAdr:U?.[xt]||o,serviceCharge:ot?.[xt],toAdr:i||o,itemId:`revealTx${xt}`,txHash:dt[xt],dependTx:l===Zt.serial?[Bt[xt]]:[K],txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e})),it=!1;if(I&&(it=I(_t,R)),it)return{commitParams:_t,revealParams:R,commitTx:b,revealTxs:P,commitAddrs:U,commitTxFee:H,revealTxFees:ot,feeRate:parseInt(E,10),size:parseInt(T,10)};let Ut=await Xt().getRequestHeaders({walletId:e,needSign:!0,currency:"usd"});return{txIds:await So({txList:[_t,...R]},{headers:Ut}),commitTx:b,revealTxs:P,commitAddrs:U,commitTxFee:H,revealTxFees:ot,feeRate:parseInt(E,10),size:parseInt(T,10)}},ft=async()=>{let N=await v({from:o,coinAmount:at(S,g),serviceCharge:O,feeRate:E}),b=N.utxoList||[];return await _(b,()=>{}),await D(N)};return()=>new Promise((N,b)=>{if(typeof p?.txSizeLimit=="number"&&m.length>p.txSizeLimit){let P=Vt.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let U=await ft();N(U)}catch(U){b(U)}P.destroy()},onConfirm:()=>{b(new Error(ce)),P.destroy()}})}else(async()=>{try{let P=await ft();N(P)}catch(P){b(P)}})()})}var Ur=ts;var es=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:c,addressType:l,useTipMessageFillUp:p,onFillUp:y,netWorkCoinId:_},C)=>{let v=(0,$r.useHistory)(),I=Ur(_),T=Po(o,a),S=(0,Wr.useMemoizedFn)(async()=>{try{await T();let g=await I();m&&await m(g)}catch(g){if(!(g?.message===ce)){let E=g?.data?.msg||g?.msg||g?.data?.originalError?.msg||f("wallet_home_toast_network_error");ro.error({title:E})}}},[m]);return(0,Rr.useMemo)(()=>{let g=a?{actionType:k.ACTION_TYPE.CANCEL,onClick:a}:null,O={disabled:c,actionType:k.ACTION_TYPE.CONFIRM,onClick:S};return!i&&[j.BALANCE_INSUFFICIENT,j.FEE_BALANCE_INSUFFICIENT].includes(C)&&(g=g||{actionType:k.ACTION_TYPE.CANCEL,onClick:()=>{v.goBack()}},p?O={actionType:k.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{y&&await y();let E=Hr.default.stringify({addressType:l,coinId:e},{skipEmptyString:!0,skipNull:!0}),D=E?`?${E}`:"";v.push(yo+D)}}:O={txId:t,coinId:e,address:s,walletId:o,actionType:k.ACTION_TYPE.FILL_UP}),[g,O]},[a,c,S,i,C,p,v,l,t,e,s,o,y])},Yr=es;r();n();M();r();n();var zr=u(x());mt();function Gr(){let{totalFee:t}=At(),{satBytes:e}=Z();return Gt(we(t,e),0)}function Vr(){let t=St(),{satBytes:e}=Z();return Gt(we(t,e),0)}function Xr(){let{totalFee:t}=At(),e=St();return(0,zr.useMemo)(()=>at(t,e),[t,e])}r();n();r();n();var Ft=u(x());mt();function os(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=rt(),[a,c]=(0,Ft.useState)(!0),[l,p]=(0,Ft.useState)(!0),[y,_]=(0,Ft.useState)(null),[C,v]=(0,Ft.useState)([]),I=Ie({walletId:o,utxoType:s,coinId:m}),T=Ae(pe.CAL_FEE),{satBytes:S}=Z(),{total:g}=et(),O=_e(),{totalFee:E}=At(),D=St();return(0,Ft.useEffect)(()=>{!e&&(async()=>{if(!Qe(g,0))try{p(!0);let N=await I({from:i,coinAmount:at(g,E),serviceCharge:D,feeRate:S});if(!N?.utxoList?.length){_(G.BALANCE_NOT_ENOUGH);return}if(N.error){let U=N.errorResp.code,H=G.COMMON_ERROR;[G.BALANCE_NOT_ENOUGH,G.PURE_UTXO_NOT_ENOUGH].includes(U)&&(H=U),_(H);return}O("canTransferAmount",N.canTransferAmount||"0"),_(null);let{commitTxFee:b,revealTxFees:P}=await T(N.utxoList);v(N.utxoList),O("commitTxFee",b),O("revealTxFees",P)}catch{_(G.COMMON_ERROR),O("commitTxFee","0"),O("revealTxFees",[])}finally{c(!1),p(!1)}})()},[i,S,g,E,D,T,e]),{isInitLoading:a,isLoading:l,error:y,utxoList:C}}var Zr=os;function rs(t){let{disabled:e=!1}=t||{},o=Xr(),{total:i}=et(),s=Ar(),m=Re(),{isInitLoading:a,isLoading:c,error:l,utxoList:p}=Zr({disabled:e});return{isInitLoading:a,isLoading:c,error:l,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:p}}var Se=rs;var ns=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=Se(),m=vt(),a=Vr(),c=Gr(),l=yt.add(a,c),p=Z(),y=_e();return{bytes:l,signInfo:m,feeError:o,selectedSat:p,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:y}},Kr=ns;r();n();var Jr=u(x());M();r();n();z();var ss=[B.BRC20_DEPLOY,B.BRC20_MINT,B.BRC20_INSCRIBE,B.ORDINAL_NFT,B.ORDINAL_TEXT,B.EARN_BRC30_DEPLOY,B.EARN_BRC30_APPLY,B.EARN_BRC30_REDEEM,B.EARN_BRC30_CLAIM,B.BRC30_INSCRIBE,B.RUNES_ETCH];function qr(t){return ss.indexOf(t)>-1}z();var is=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a})=>(0,Jr.useMemo)(()=>qr(t)?i&&t===B.RUNES_ETCH?{type:It.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:It.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===G.COMMON_ERROR?{type:It.TIP_TYPE.FEE_ERROR}:e===G.BALANCE_NOT_ENOUGH?{type:le.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===G.PURE_UTXO_NOT_ENOUGH?{type:le.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:le.BALANCE_INSUFFICIENT}:{message:m}:{type:It.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m]),jr=is;r();n();var ze={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function as({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=ut}){let{from:m,walletId:a,txType:c}=rt(),l=go(a),p=Co(a),[y,{toggle:_}]=(0,Ee.useBoolean)(!1),C=de(),I=Io()[m],{bytes:T,signInfo:S,feeError:g,selectedSat:O,feeLoading:E,networkFee:D,canTransferAmount:ft,utxoListCount:N,onFeeDataChange:b}=Kr(),{title:P,...U}=e,{inscriptionOutput:H,inscriptionsCount:ot,total:K}=et(),dt=(0,L.useMemo)(()=>yt.add(D,K),[D,K]),Bt=Q(s),{showManageUTXO:_t}=Ir(Bt||{},I,!0),R=_t&&g!==G.PURE_UTXO_NOT_ENOUGH,{type:it,message:Ut}=jr({txType:c,feeError:g,feeLoading:E,utxoListCount:N,isHardware:l,isMpcWallet:p,canTransferAmount:ft,networkFee:D,totalUsedCoinAmount:dt,coin:Bt}),Je=Yr({txId:t,walletId:a,coinId:s,addressType:I,disabled:!!it||!!g||!!E||l||N>100,useTipMessageFillUp:R,netWorkCoinId:s,...i},it),Yt=yr(a),xt=(0,Ee.useMemoizedFn)(Oe=>{b("commitTxFee","0"),b("revealTxFees",[]),b("inscriptionOutput",Oe)},[]),{top:Wn,footer:Hn}=o;return L.default.createElement(ye,{slot:{header:L.default.createElement(ee,{title:P||f("extension_wallet_header_maintitle_inscribe"),...U}),footer:Hn||L.default.createElement("div",{className:ze.actions},L.default.createElement(It,{type:it||eo.TYPE.warn,address:m,message:Ut,coinId:s,walletId:a,fillUpAble:R}),L.default.createElement(k,{buttonGroup:Je}))}},Wn,L.default.createElement(gt,null,L.default.createElement(pt,{title:f("wallet_info_title_inscribe_service_fee")},L.default.createElement(A.Text,{className:ze["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),L.default.createElement(_r,{coinId:s,loading:E,currencyId:C,networkFee:E&&D==="0"?void 0:D,estimateFailed:!E&&!Number(D),onClick:()=>{_?.(),Yt({trade:"brc20",all_confirmation:"network_fee"})}}),L.default.createElement(vr,{txType:c,currencyId:C,inscriptionsCount:ot,inscriptionOutput:H,totalInscriptionCoinAmount:K,onInscriptionOutputChange:xt,coinId:s})),L.default.createElement(gt,null,L.default.createElement(Mr,{coinId:s,currencyId:C,totalCoinAmount:dt})),L.default.createElement(gt,{bordered:!1},L.default.createElement(xr,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Yt({trade:"brc20",all_confirmation:"wallet_used_address"})}})),L.default.createElement(Pr,{bytes:T,currencyId:C,value:O,coinId:s,onClose:_,signInfo:S,visible:y,onChange:Oe=>{b("commitTxFee","0"),b("revealTxFees",[]),b("feeSelectedSat",Oe)}}))}var Ge=as;r();n();var Nt=u(x());M();r();n();var en=u(x()),on=u(Y());Yn();z();r();n();var Qr=u(x());function ms(){let{coin:t}=$(),e=wt();return(0,Qr.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var tn=ms;function us({walletId:t,txSource:e,children:o}){let i=tn(),s=ne(),m=re(),{coin:a}=$(),c=oe(),l=Lt(),p=te(),y=B.BRC20_INSCRIBE,_=(0,on.useSelector)(Cr),C=(I,T)=>{I.coinAmount=m,I.coinId=T?c.coinId:a.coinId,I.txSource=e||co.NORMAL},v=(I,T)=>{I&&C(I,!0),Array.isArray(T)&&T.forEach(S=>{C(S,!1)})};return en.default.createElement($e,{defaultFeeData:_,currencyId:s,params:{walletId:t||p,from:l,inscriptions:i,utxoType:cr.INSCRIPTION_USE_NFT_UTXO,txType:y,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:v}},o)}var be=us;r();n();var W=u(x()),kt=u(Y()),hn=u(Me());Pe();M();r();n();var nn=u(x()),sn=u(ve()),an=u(Me());r();n();var rn={root:"_root_ryl3e_1"};function cs({onBack:t,onClose:e,pageIndex:o,...i}){let s=(0,sn.useHistory)(),m=()=>{t&&t(),s.goBack()},a=()=>{e&&e(),s.go(-o)};return nn.default.createElement(ee,{className:(0,an.default)(rn.root,i.className),onClose:a,onBack:m,...i})}var mn=cs;r();n();var un=u(ve()),Ve=u(Y());var cn=u(ct());function ps(t){let e=(0,un.useHistory)(),o=(0,Ve.useSelector)(Do),i=Pt(),{coin:s}=$(),m=(0,Ve.useSelector)(ko),a=or();(0,cn.useMount)(()=>{if(!!t){if(To(s))e.replace(o||fo);else if(!m){let c={pathname:`${_o}/${i}${xo}`};a&&(c.search=`?from=${a}`),e.replace(c)}}})}var pn=ps;r();n();var Cn=u(x()),gn=u(Y());r();n();var ht=u(x());M();z();r();n();var _n=u(x());r();n();var st=u(x()),fn=u(ct());M();r();n();var ln={root:"_root_26a1b_1"};var ls=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s})=>{let[m,{setTrue:a,setFalse:c}]=(0,fn.useBoolean)();(0,st.useEffect)(()=>{e&&e(m)},[m]);let l=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return st.default.createElement(st.default.Fragment,null,st.default.createElement("div",{className:ln.root,onClick:a,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:l})),st.default.createElement(Oo,{address:i,visible:m,closeCallback:c,coinId:t.coinId,receiveOnly:o}))},dn=(0,st.memo)(ls);var xn=u(Y());function fs(t){let e=(0,xn.useDispatch)(),o=Lt();return _n.default.createElement(dn,{address:o,...t,onVisible:s=>{e(jo(s))}})}var Xe=fs;var ds=()=>{let{coin:t}=$(),e=oe();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===j.BALANCE_INSUFFICIENT?ht.default.createElement(ht.default.Fragment,null,s," ",ht.default.createElement(Xe,{coin:t,receiveOnly:!0})):i?.type===j.FEE_BALANCE_INSUFFICIENT?ht.default.createElement(ht.default.Fragment,null,s," ",ht.default.createElement(Xe,{coin:e})):s}},yn=ds;r();n();var Tn={root:"_root_g697e_1"};function _s({renderError:t}){let e=(0,gn.useSelector)(Uo),o=yn(),i=t||o;if(!e.key)return null;let s=i(e);return Cn.default.createElement("div",{className:Tn.root},s)}var In=_s;r();n();var lt=u(x());M();r();n();var Dt={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var xs=(t,e)=>{let{coin:o}=$(),i=rr(),s=ur(),m=me(),a=ue(),l={total:s,amount:m,available:a}[t];return`${i(e||l,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},An=xs;function ys(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function Ts({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},...c}){let{coin:l}=$(),p=An(t,i),{bottom:y}=a;return lt.default.createElement(F.Box,{className:Dt.container},lt.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Dt.totalAmount,...c},lt.default.createElement(De,{size:De.SIZE.lg,src:l?.image,text:l?.symbol}),lt.default.createElement(F.Box,{className:Dt["totalAmount-content"]},lt.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs,className:Dt["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),lt.default.createElement(A.Text,{ellipsis:{tooltip:!0},className:Dt["totalAmount-amount"],style:{fontSize:ys(p)}},p)),!s&&lt.default.createElement(J,{category:J.CATEGORY.fill,type:J.TYPE.gray,size:J.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),y)}var Sn=Ts;r();n();mt();var Cs=()=>{let t=ue();return zt(t,0)&&(t="0"),t},En=Cs;r();n();var bn=u(ct());M();var gs=({loading:t,disabled:e,onClick:o,...i})=>(0,bn.useCreation)(()=>[{loading:!e&&t,disabled:e,onClick:o,actionType:k.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_send_btn_continue"),...i}],[e,t,o,i]),Is=({disabled:t,onClick:e,...o})=>{let i=mr(),s=ae();return gs({...o,disabled:t||s,onClick:e||i})},Fn=Is;r();n();var Ze={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function As({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:c={},checkEmpty:l=!0,inputAmount:p,customMaxAmount:y}){let _=(0,kt.useDispatch)(),{content:C}=c,{header:v,bottom:I,footer:T}=a,S=(0,W.useRef)(),g=(0,kt.useSelector)(Ho),O=Pt(),E=wt(),D=(0,kt.useSelector)(Ro),ft=(0,kt.useSelector)(Wo),N=ne(),b=nr(),P=En(),U=y||P,{amount:H}=Tr(),ot=(0,W.useRef)(!!E),K=R=>{_(Ko(R))},dt=()=>{_(ke(U)),K(!0)},Bt=m.onMax||dt;pn(l),(0,W.useEffect)(()=>{Rt(p)||S.current?.setInputAmount(p.toString()),Rt(H)||S.current?.setInputAmount(H)},[p,H]);let _t=Fn(i);return W.default.createElement(ye,{loading:t,slot:{header:v||W.default.createElement(mn,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:t?null:T||W.default.createElement(k,{buttonGroup:_t})}},W.default.createElement("div",{className:(0,hn.default)(C,Ze.content)},W.default.createElement(Bo,{ref:S,...s,autoFocus:!g,coinId:O,maximumMode:b,maximumAmount:b?U:null,initialValue:{value:[E||"0",D||"0"],mode:ft,flatCurrencyId:N},onAmountChange:([R,it],Ut)=>{_(Go(it)),_(ke(R)),Ut&&(K(!1),ot.current=!0)},onModeChnage:R=>{_(Vo(R))},onFlatChange:R=>{R&&_(qo(R.currencyId))}}),ot.current&&W.default.createElement(In,{renderError:e}),W.default.createElement(Qt,{usePortal:!0,offsetBottom:m?.fixBottom?80:104,className:Ze.totalAmountWrap},W.default.createElement(Sn,{...m,onMax:()=>{Bt(),ot.current=!0}})),I))}var Nn=As;r();n();var Bn=u(x());z();mt();var On=u(Y());function Ke(){let t=me();return(0,Bn.useCallback)(e=>Le(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:j.COMMON_ERROR}:null,[t])}function Ss(){let t=(0,On.useDispatch)(),e=sr(),o=Ke(),i=[e,o],{runErrorFns:s}=ie(i);se(s,m=>{t(zo(m))})}var Pn=Ss;r();n();var wn=u(Y()),Fe=u(x());lo();po();function Es(){let t=(0,wn.useDispatch)(),e=Lt(),{coin:o}=$(),[i,s]=(0,Fe.useState)(!0);return(0,Fe.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await jt(Jt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(Qo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Ln=Es;r();n();var Ht=u(x());var vn=u(Y());function bs(){let t=(0,vn.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=Se();return(0,Ht.useEffect)(()=>{t(tr(m))},[m]),(0,Ht.useEffect)(()=>{t(Xo(i))},[i]),(0,Ht.useEffect)(()=>{t(gr(s))},[s]),(0,Ht.useEffect)(()=>{t(Zo(!!o))},[o]),e}var he=bs;function Fs({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=ae(),a=he(),c=Ln(),l=(0,Nt.useMemo)(()=>{let p=null;return typeof e=="function"&&(p={actionType:k.ACTION_TYPE.CANCEL,onClick:e}),[p,{actionType:k.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[a,m,e,o]);return Pn(),Nt.default.createElement(Nn,{...s,inputAmount:t,isGlobalLoading:c,slot:{...i||{},footer:Nt.default.createElement(k,{buttonGroup:l})},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function hs({walletId:t,...e}){return Nt.default.createElement(be,{walletId:t},Nt.default.createElement(Fs,{...e}))}var Ml=hs;r();n();var X=u(x()),Rn=u(Y());M();r();n();var Ne=u(x()),Dn=u(ct());M();r();n();var Mn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var Ns=({coinId:t,amount:e})=>{let o=Q(t),{loading:i,data:s}=(0,Dn.useRequest)(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await Eo(m))?.brcJson||""});return Ne.default.createElement(pt,{title:f("extension_wallet_transaction_item_inscribe_preview")},Ne.default.createElement(F.Spin,{loading:i},Ne.default.createElement(A.Text,{className:Mn["preview-json"]},s)))},kn=Ns;r();n();var qe=u(x()),Be=u(Y());z();function Bs(t){let e=(0,Be.useSelector)($o);return(0,qe.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:j.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Os(){let t=Ke();return(0,qe.useCallback)(e=>{let o=t(e);return o?{...o,highlight:ir.AMOUNT}:null},[t])}function Ps(t,e){let o=(0,Be.useDispatch)(),i=Q(e),s=Bs(i),m=ar(),a=Os(),c=[s,m,a],{runErrorFns:l}=ie(c);se(l,p=>{o(Jo(p))},t)}var Un=Ps;function ws({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let s=(0,Rn.useDispatch)(),m=wt(),a=Pt(),[,c]=bo(a),l=re(),p=he(),y=(0,X.useCallback)(async()=>{await s(Yo(!1))},[s]);return Un(p,a),X.default.createElement(Ge,{walletId:i,slot:{top:X.default.createElement(X.default.Fragment,null,X.default.createElement(gt,null,X.default.createElement(dr,{summaryList:[{coinId:a,coinAmount:l}],title:f("extension_wallet_transaction_item_inscribe")})),X.default.createElement(gt,null,X.default.createElement(kn,{coinId:a,amount:m})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:y},netWorkCoinId:c?.coinId})}function Ls({txSource:t,walletId:e,...o}){return X.default.createElement(be,{txSource:t,walletId:e},X.default.createElement(ws,{walletId:e,...o}))}var Sf=Ls;r();n();var $n=u(x());function vs({children:t,...e}){return $n.default.createElement(er.Provider,{value:e},t)}var Nf=vs;export{ye as a,mn as b,pn as c,Xe as d,gs as e,Nn as f,Ie as g,Pr as h,rt as i,Ge as j,$e as k,Ml as l,Sf as m,Nf as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-M4UOXZNH.js.map
