import{g as Ce,h as Pe}from"./chunk-63F6WMW7.js";import{b as xe}from"./chunk-EZ5WRJOA.js";import{a as ke,d as he}from"./chunk-6D2WFU2O.js";import{a as ge}from"./chunk-A4CVLGFS.js";import{q as I}from"./chunk-UAHUXCQX.js";import{c as be,d as Te}from"./chunk-UBFVE3Q4.js";import{b as Fe,c as Ge,f as Ne,i as ye,m as Ee,w as ve,x as M}from"./chunk-CFXFWVCZ.js";import{b as we}from"./chunk-5EAA4KU7.js";import{c as se,e as ne,m as ce,p as le,r as me,v as ue,w as fe,y as pe}from"./chunk-UXLFUD7T.js";import{a as ie}from"./chunk-2HEOW3XO.js";import{a as re}from"./chunk-DLRFA5AU.js";import{a as oe}from"./chunk-SMZ64QW3.js";import{u as _e}from"./chunk-FF6KJRSH.js";import{b as ae}from"./chunk-Y6SGFHFT.js";import{a as de}from"./chunk-PAER4Z2U.js";import{a as te}from"./chunk-M2F2X65U.js";import{X as je}from"./chunk-VPDRXROE.js";import{sa as ee,w as J}from"./chunk-JLIPSIRU.js";import{c as L}from"./chunk-RXNDJ7P3.js";import{I as v,K as y,L as K,O as V,Q as Z,V as j,X as B,w as q,y as Y}from"./chunk-YT2MPR4E.js";import{o as X,q as T,r as R}from"./chunk-LDKM7IQF.js";import{G as $,pa as Ve}from"./chunk-6O63U2D6.js";import{M as O,l as U,x as m}from"./chunk-RIOWPXBZ.js";import{T as Q,c as Ze}from"./chunk-OSCGYMLH.js";import{a as E}from"./chunk-O337TVCZ.js";import{f as k,m as c,o as l}from"./chunk-GLD6H5Q5.js";c();l();var A=k(E()),d=k(J());B();c();l();B();O();function Le(r,{symbol:o,decimals:t}={}){let i;return r=j(Z(r,t||18)),r==="0"?i="0":i=U.thousandFormat(r),o&&(i+=` ${o}`),i}function Ae(r){let o=(0,d.useSelector)(Ee),t=r||o,i=t?.isSupportEip1559?t?.maxFeePerGas||0:t?.gasPrice||0,a=t?.gasLimit||0;return ke(V,K)(i,a)}function De(r){let o=le(),{symbol:t,usdToThisRate:i}=(0,d.useSelector)(ee),a=q(o?.price,i),s=Le(r,{symbol:o?.symbol,decimals:o?.decimals}),p=he({amount:r,rate:a,symbol:t},{useApproximate:!0});return`${s} ${p}`}function _t(){let r=(0,d.useDispatch)(),o=ae(),t=(0,d.useSelector)(Ge),i=(0,d.useSelector)(Ne),a=(0,d.useSelector)(ye),s=(0,d.useSelector)(Fe),{chainGasPrice:p,chainGasLimit:n,chainGasLoading:C,chainGasLoadFailed:_,stopPollingGasPrice:P,chainGasLimitLoading:h,chainGasLimitLoadFailed:F}=Pe({to:t,from:o,value:i,data:a,tokenAddress:s});return(0,A.useEffect)(()=>{r(M(p))},[p]),(0,A.useEffect)(()=>{r(M({gasLimit:n}))},[n]),{chainGasLoading:C,chainGasLoadFailed:_,stopPollingGasPrice:P,chainGasLimitLoading:h,chainGasLimitLoadFailed:F}}function xt(){let r=(0,d.useDispatch)(),{nonce:o,suggestedNonce:t,request:i}=Ce();return(0,A.useEffect)(()=>{r(ve(t))},[o,t]),{nonce:o,suggestedNonce:t,request:i}}c();l();var D=k(E()),S=k(J());var Se=k(je());var Je={mainTokens:[],chainTokens:[]},Qe=(r,o)=>{let t=(0,D.useRef)(Je),i=(0,S.useDispatch)(),a=(0,S.useSelector)(we),s=ue(o),p=me(o),n=ie(),C=r||n,_=()=>{let{chainTokens:P}=t.current;P.forEach(async({rpcUrl:h,chainId:F,account:g,address:G})=>{if(C!==g)return;let N=await p(G,g,G?null:await se(h));i(ce({chainId:F,account:g,address:G,balance:N}))})};(0,D.useEffect)(()=>{t.current=s},[s]),(0,Se.useUpdateEffect)(()=>{a!==0&&_()},[a])},Ft=Qe;c();l();var e=k(E()),Ie=k(Ze());O();c();l();var Xe=()=>{let r=oe();return()=>globalThis.platform.openTab({url:r.rpcGasUrl})},Be=Xe;B();c();l();var u={"retina-border-basic":"_retina-border-basic_1xrkr_1",retinaBorderBasic:"_retina-border-basic_1xrkr_1",RpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_1xrkr_29",rpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_1xrkr_29",content:"_content_1xrkr_34",title:"_title_1xrkr_37","info-icon":"_info-icon_1xrkr_41",infoIcon:"_info-icon_1xrkr_41",box:"_box_1xrkr_46",customize:"_customize_1xrkr_51",money:"_money_1xrkr_94",row:"_row_1xrkr_97",defaultTip:"_defaultTip_1xrkr_100",checkBoxWrap:"_checkBoxWrap_1xrkr_106"};function Re({onBack:r,rpcInfo:o={},customGasInfo:t={},chainGasInfo:i={},updateCustomGasInfo:a,stopPollingGasPrice:s,chainGasLimitLoadFailed:p=!1}){let{isSupportEip1559:n}=t,C=y(n?i.baseFeePerGas:i.gasPrice),[_,P]=(0,e.useState)(y(n?t.baseFeePerGas:t.gasPrice)),[h,F]=(0,e.useState)(y(t.maxPriorityFeePerGas)),[g,G]=(0,e.useState)(t.gasLimit),[N,H]=(0,e.useState)(t.isDefault),x=(0,e.useMemo)(()=>{let f={gasLimit:g,isDefault:N};return n?(f.baseFeePerGas=v(_),f.maxPriorityFeePerGas=v(h),f.maxFeePerGas=Y(f.baseFeePerGas,f.maxPriorityFeePerGas)):f.gasPrice=v(_),{...t,...f}},[g,_,N,t,n,h]),He=Ae(x),We=De(He),{extensionConfig:W,setExtensionConfig:ze}=re("rpc_info"),[,Ue,Oe]=xe(W?.chainId),$e=Be(),qe=(0,e.useMemo)(()=>{let f=!Number(x.gasPrice);return x.isSupportEip1559&&(f=!Number(x.maxPriorityFeePerGas)),f||!Number(x.gasLimit)},[x]),Ye=[{actionType:I.ACTION_TYPE.CONFIRM,disabled:qe,async onClick(){let{gasLimit:f,...b}=x;b.isDefault&&(s(),await Ue(b),be(o,W)&&await ze(o)),a(x)}}],Ke=async f=>{let b=f.target.checked;if(b)H(b),_e();else{let z=X.tip({children:m("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:m("wallet_extension_btn_general_confirm"),cancelText:m("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){await Oe(o?.chainId),H(b),z.destroy()},onCancel(){z.destroy()}})}};return e.default.createElement(L.Portal,{component:L.Container,className:u.RpcEvmSendEditNetworkFee},e.default.createElement(de,{title:m("wallet_transfer_subtitle_network_fee"),onBack:r,closeable:!1}),e.default.createElement("div",{className:u.content},e.default.createElement(T.Label,{title:e.default.createElement("div",{className:u.title},m("wallet_extension_transaction_input_label_network_fee"),e.default.createElement(Q,{className:(0,Ie.default)("okx-wallet-plugin-information-circle",u["info-icon"]),onClick:$e}))}),e.default.createElement("div",{className:u.box},e.default.createElement("div",{className:u.customize},e.default.createElement("div",{className:u.title},m("wallet_transfer_gasfee_subtitle_custom_gas_fee")),e.default.createElement("div",null,e.default.createElement("div",{className:u.money},e.default.createElement(ge,{text:We,maxWidth:"215px"})))),e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:C,title:n?m("extension_wallet_transaction_text_maxbase_fee"):m("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:_,onChange:P})),n?e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:y(i.maxPriorityFeePerGas),title:m("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:h,onChange:F})):null,e.default.createElement("div",{className:u.row},e.default.createElement(T.Number,{placeholder:i.gasLimit,title:m("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:T.TIP_TYPE.always,error:p&&m("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:g,onChange:G}))),e.default.createElement("div",{className:u.defaultTip},m("wallet_extension_mid_checkbox_setting_default"))),e.default.createElement(te,{usePortal:!0,placeholder:!0,style:{zIndex:101}},e.default.createElement(L.Box,{className:u.checkBoxWrap},e.default.createElement(R,{onChange:Ke,checked:N},m("wallet_extension_bot_alert_default_gas",{networkName:o.name}))),e.default.createElement(I,{buttonGroup:Ye})))}var oo=e.default.memo(Re);c();l();var Me=k(E());Ve();var mo=()=>{let r=fe(),o=pe(),{rpcNetworks:t=[]}=Te(),i=ne(()=>t,t,(a,s)=>!$(a,s));Me.default.useEffect(()=>{let a=o?.reduce((s,{walletIdentities:p})=>[...s,...p.map(({account:{mainnet:n}})=>n)],[]);i.forEach(async s=>{a.forEach(p=>{let n=s.chainId;r(n,void 0,{...s,account:p})})})},[o,i])};export{Le as a,Ae as b,De as c,_t as d,xt as e,Ft as f,oo as g,mo as h};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-YEFA6IK7.js.map
