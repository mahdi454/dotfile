import{a as Lf,b as pt,c as Kf,d as ja,e as qb,f as ar}from"./chunk-YSHDEOBZ.js";import{a as Cf}from"./chunk-HOU7RFGS.js";import{b as Hf}from"./chunk-ZRLPUW3Z.js";import{a as Rf}from"./chunk-IMZNFJSN.js";import{a as Nb}from"./chunk-VCMU2WX2.js";import{w as Ob}from"./chunk-VBARKITZ.js";import{c as U,m as h,n as E,o as y}from"./chunk-GLD6H5Q5.js";var kn=U(Da=>{"use strict";h();y();Object.defineProperty(Da,"__esModule",{value:!0});Da.HexString=void 0;var jf=pt(),ts=class{static fromBuffer(e){return ts.fromUint8Array(e)}static fromUint8Array(e){return new ts((0,jf.bytesToHex)(e))}static ensure(e){return typeof e=="string"?new ts(e):e}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from((0,jf.hexToBytes)(this.noPrefix()))}};Da.HexString=ts});var jo=U(ot=>{"use strict";h();y();Object.defineProperty(ot,"__esModule",{value:!0});ot.output=ot.exists=ot.hash=ot.bytes=ot.bool=ot.number=void 0;function Va(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}ot.number=Va;function Df(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}ot.bool=Df;function Xu(n,...e){if(!(n instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}ot.bytes=Xu;function Vf(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Va(n.outputLen),Va(n.blockLen)}ot.hash=Vf;function Ff(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}ot.exists=Ff;function Gf(n,e){Xu(n);let t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}ot.output=Gf;var Mb={number:Va,bool:Df,bytes:Xu,hash:Vf,exists:Ff,output:Gf};ot.default=Mb});var kf=U(Fa=>{"use strict";h();y();Object.defineProperty(Fa,"__esModule",{value:!0});Fa.crypto=void 0;Fa.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var ns=U(se=>{"use strict";h();y();Object.defineProperty(se,"__esModule",{value:!0});se.randomBytes=se.wrapConstructorWithOpts=se.wrapConstructor=se.checkOpts=se.Hash=se.concatBytes=se.toBytes=se.utf8ToBytes=se.asyncLoop=se.nextTick=se.hexToBytes=se.bytesToHex=se.isLE=se.rotr=se.createView=se.u32=se.u8=void 0;var Zu=kf(),Rb=n=>new Uint8Array(n.buffer,n.byteOffset,n.byteLength);se.u8=Rb;var Hb=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));se.u32=Hb;var Cb=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);se.createView=Cb;var Lb=(n,e)=>n<<32-e|n>>>e;se.rotr=Lb;se.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!se.isLE)throw new Error("Non little-endian hardware is not supported");var Kb=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function jb(n){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Kb[n[t]];return e}se.bytesToHex=jb;function Db(n){if(typeof n!="string")throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(n.length/2);for(let t=0;t<e.length;t++){let r=t*2,s=n.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[t]=i}return e}se.hexToBytes=Db;var Vb=async()=>{};se.nextTick=Vb;async function Fb(n,e,t){let r=Date.now();for(let s=0;s<n;s++){t(s);let i=Date.now()-r;i>=0&&i<e||(await(0,se.nextTick)(),r+=i)}}se.asyncLoop=Fb;function $f(n){if(typeof n!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof n}`);return new TextEncoder().encode(n)}se.utf8ToBytes=$f;function Qu(n){if(typeof n=="string"&&(n=$f(n)),!(n instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof n})`);return n}se.toBytes=Qu;function Gb(...n){if(!n.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(n.length===1)return n[0];let e=n.reduce((r,s)=>r+s.length,0),t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){let i=n[r];t.set(i,s),s+=i.length}return t}se.concatBytes=Gb;var Yu=class{clone(){return this._cloneInto()}};se.Hash=Yu;var kb=n=>Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object;function $b(n,e){if(e!==void 0&&(typeof e!="object"||!kb(e)))throw new TypeError("Options should be object or undefined");return Object.assign(n,e)}se.checkOpts=$b;function Wb(n){let e=r=>n().update(Qu(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}se.wrapConstructor=Wb;function Xb(n){let e=(r,s)=>n(s).update(Qu(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}se.wrapConstructorWithOpts=Xb;function Zb(n=32){if(Zu.crypto&&typeof Zu.crypto.getRandomValues=="function")return Zu.crypto.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}se.randomBytes=Zb});var Xf=U(Do=>{"use strict";h();y();Object.defineProperty(Do,"__esModule",{value:!0});Do.hmac=void 0;var Ga=jo(),Wf=ns(),ka=class extends Wf.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ga.default.hash(e);let r=(0,Wf.toBytes)(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ga.default.exists(this),this.iHash.update(e),this}digestInto(e){Ga.default.exists(this),Ga.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Yb=(n,e,t)=>new ka(n,e).update(t).digest();Do.hmac=Yb;Do.hmac.create=(n,e)=>new ka(n,e)});var Qf=U(di=>{"use strict";h();y();Object.defineProperty(di,"__esModule",{value:!0});di.pbkdf2Async=di.pbkdf2=void 0;var $a=jo(),Qb=Xf(),li=ns();function Zf(n,e,t,r){$a.default.hash(n);let s=(0,li.checkOpts)({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:a}=s;if($a.default.number(i),$a.default.number(o),$a.default.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");let c=(0,li.toBytes)(e),l=(0,li.toBytes)(t),d=new Uint8Array(o),u=Qb.hmac.create(n,c),g=u._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:d,PRF:u,PRFSalt:g}}function Yf(n,e,t,r,s){return n.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),t}function Jb(n,e,t,r){let{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=Zf(n,e,t,r),l,d=new Uint8Array(4),u=(0,li.createView)(d),g=new Uint8Array(a.outputLen);for(let w=1,m=0;m<i;w++,m+=a.outputLen){let f=o.subarray(m,m+a.outputLen);u.setInt32(0,w,!1),(l=c._cloneInto(l)).update(d).digestInto(g),f.set(g.subarray(0,f.length));for(let b=1;b<s;b++){a._cloneInto(l).update(g).digestInto(g);for(let T=0;T<f.length;T++)f[T]^=g[T]}}return Yf(a,c,o,l,g)}di.pbkdf2=Jb;async function ep(n,e,t,r){let{c:s,dkLen:i,asyncTick:o,DK:a,PRF:c,PRFSalt:l}=Zf(n,e,t,r),d,u=new Uint8Array(4),g=(0,li.createView)(u),w=new Uint8Array(c.outputLen);for(let m=1,f=0;f<i;m++,f+=c.outputLen){let b=a.subarray(f,f+c.outputLen);g.setInt32(0,m,!1),(d=l._cloneInto(d)).update(u).digestInto(w),b.set(w.subarray(0,b.length)),await(0,li.asyncLoop)(s-1,o,T=>{c._cloneInto(d).update(w).digestInto(w);for(let p=0;p<b.length;p++)b[p]^=w[p]})}return Yf(c,l,a,d,w)}di.pbkdf2Async=ep});var tl=U(Wa=>{"use strict";h();y();Object.defineProperty(Wa,"__esModule",{value:!0});Wa.SHA2=void 0;var Ju=jo(),Vo=ns();function tp(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);let s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=r?4:0,l=r?0:4;n.setUint32(e+c,o,r),n.setUint32(e+l,a,r)}var el=class extends Vo.Hash{constructor(e,t,r,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,Vo.createView)(this.buffer)}update(e){Ju.default.exists(this);let{view:t,buffer:r,blockLen:s}=this;e=(0,Vo.toBytes)(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let c=(0,Vo.createView)(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ju.default.exists(this),Ju.default.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let u=o;u<s;u++)t[u]=0;tp(r,s-8,BigInt(this.length*8),i),this.process(r,0);let a=(0,Vo.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,d[u],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(r),e}};Wa.SHA2=el});var Jf=U(fi=>{"use strict";h();y();Object.defineProperty(fi,"__esModule",{value:!0});fi.sha224=fi.sha256=void 0;var np=tl(),Dt=ns(),rp=(n,e,t)=>n&e^~n&t,sp=(n,e,t)=>n&e^n&t^e&t,ip=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ur=new Uint32Array(64),Xa=class extends np.SHA2{constructor(){super(64,32,8,!1),this.A=cr[0]|0,this.B=cr[1]|0,this.C=cr[2]|0,this.D=cr[3]|0,this.E=cr[4]|0,this.F=cr[5]|0,this.G=cr[6]|0,this.H=cr[7]|0}get(){let{A:e,B:t,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,r,s,i,o,a,c]}set(e,t,r,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let u=0;u<16;u++,t+=4)ur[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){let g=ur[u-15],w=ur[u-2],m=(0,Dt.rotr)(g,7)^(0,Dt.rotr)(g,18)^g>>>3,f=(0,Dt.rotr)(w,17)^(0,Dt.rotr)(w,19)^w>>>10;ur[u]=f+ur[u-7]+m+ur[u-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:d}=this;for(let u=0;u<64;u++){let g=(0,Dt.rotr)(a,6)^(0,Dt.rotr)(a,11)^(0,Dt.rotr)(a,25),w=d+g+rp(a,c,l)+ip[u]+ur[u]|0,f=((0,Dt.rotr)(r,2)^(0,Dt.rotr)(r,13)^(0,Dt.rotr)(r,22))+sp(r,s,i)|0;d=l,l=c,c=a,a=o+w|0,o=i,i=s,s=r,r=w+f|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,s,i,o,a,c,l,d)}roundClean(){ur.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},nl=class extends Xa{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};fi.sha256=(0,Dt.wrapConstructor)(()=>new Xa);fi.sha224=(0,Dt.wrapConstructor)(()=>new nl)});var nh=U(Vt=>{"use strict";h();y();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.add=Vt.toBig=Vt.split=Vt.fromBig=void 0;var Za=BigInt(2**32-1),rl=BigInt(32);function sl(n,e=!1){return e?{h:Number(n&Za),l:Number(n>>rl&Za)}:{h:Number(n>>rl&Za)|0,l:Number(n&Za)|0}}Vt.fromBig=sl;function eh(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){let{h:i,l:o}=sl(n[s],e);[t[s],r[s]]=[i,o]}return[t,r]}Vt.split=eh;var op=(n,e)=>BigInt(n>>>0)<<rl|BigInt(e>>>0);Vt.toBig=op;var ap=(n,e,t)=>n>>>t,cp=(n,e,t)=>n<<32-t|e>>>t,up=(n,e,t)=>n>>>t|e<<32-t,lp=(n,e,t)=>n<<32-t|e>>>t,dp=(n,e,t)=>n<<64-t|e>>>t-32,fp=(n,e,t)=>n>>>t-32|e<<64-t,hp=(n,e)=>e,yp=(n,e)=>n,gp=(n,e,t)=>n<<t|e>>>32-t,bp=(n,e,t)=>e<<t|n>>>32-t,pp=(n,e,t)=>e<<t-32|n>>>64-t,wp=(n,e,t)=>n<<t-32|e>>>64-t;function th(n,e,t,r){let s=(e>>>0)+(r>>>0);return{h:n+t+(s/2**32|0)|0,l:s|0}}Vt.add=th;var mp=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),_p=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Ap=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Bp=(n,e,t,r,s)=>e+t+r+s+(n/2**32|0)|0,Tp=(n,e,t,r,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(s>>>0),xp=(n,e,t,r,s,i)=>e+t+r+s+i+(n/2**32|0)|0,Sp={fromBig:sl,split:eh,toBig:Vt.toBig,shrSH:ap,shrSL:cp,rotrSH:up,rotrSL:lp,rotrBH:dp,rotrBL:fp,rotr32H:hp,rotr32L:yp,rotlSH:gp,rotlSL:bp,rotlBH:pp,rotlBL:wp,add:th,add3L:mp,add3H:_p,add4L:Ap,add4H:Bp,add5H:xp,add5L:Tp};Vt.default=Sp});var rh=U(Ft=>{"use strict";h();y();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.sha384=Ft.sha512_256=Ft.sha512_224=Ft.sha512=Ft.SHA512=void 0;var Ep=tl(),J=nh(),Ya=ns(),[vp,Up]=J.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),lr=new Uint32Array(80),dr=new Uint32Array(80),rs=class extends Ep.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:d,Fh:u,Fl:g,Gh:w,Gl:m,Hh:f,Hl:b}=this;return[e,t,r,s,i,o,a,c,l,d,u,g,w,m,f,b]}set(e,t,r,s,i,o,a,c,l,d,u,g,w,m,f,b){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=u|0,this.Fl=g|0,this.Gh=w|0,this.Gl=m|0,this.Hh=f|0,this.Hl=b|0}process(e,t){for(let _=0;_<16;_++,t+=4)lr[_]=e.getUint32(t),dr[_]=e.getUint32(t+=4);for(let _=16;_<80;_++){let S=lr[_-15]|0,v=dr[_-15]|0,x=J.default.rotrSH(S,v,1)^J.default.rotrSH(S,v,8)^J.default.shrSH(S,v,7),z=J.default.rotrSL(S,v,1)^J.default.rotrSL(S,v,8)^J.default.shrSL(S,v,7),I=lr[_-2]|0,j=dr[_-2]|0,L=J.default.rotrSH(I,j,19)^J.default.rotrBH(I,j,61)^J.default.shrSH(I,j,6),M=J.default.rotrSL(I,j,19)^J.default.rotrBL(I,j,61)^J.default.shrSL(I,j,6),Y=J.default.add4L(z,M,dr[_-7],dr[_-16]),Q=J.default.add4H(Y,x,L,lr[_-7],lr[_-16]);lr[_]=Q|0,dr[_]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:d,Eh:u,El:g,Fh:w,Fl:m,Gh:f,Gl:b,Hh:T,Hl:p}=this;for(let _=0;_<80;_++){let S=J.default.rotrSH(u,g,14)^J.default.rotrSH(u,g,18)^J.default.rotrBH(u,g,41),v=J.default.rotrSL(u,g,14)^J.default.rotrSL(u,g,18)^J.default.rotrBL(u,g,41),x=u&w^~u&f,z=g&m^~g&b,I=J.default.add5L(p,v,z,Up[_],dr[_]),j=J.default.add5H(I,T,S,x,vp[_],lr[_]),L=I|0,M=J.default.rotrSH(r,s,28)^J.default.rotrBH(r,s,34)^J.default.rotrBH(r,s,39),Y=J.default.rotrSL(r,s,28)^J.default.rotrBL(r,s,34)^J.default.rotrBL(r,s,39),Q=r&i^r&a^i&a,R=s&o^s&c^o&c;T=f|0,p=b|0,f=w|0,b=m|0,w=u|0,m=g|0,{h:u,l:g}=J.default.add(l|0,d|0,j|0,L|0),l=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;let A=J.default.add3L(L,Y,R);r=J.default.add3H(A,j,M,Q),s=A|0}({h:r,l:s}=J.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=J.default.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=J.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=J.default.add(this.Dh|0,this.Dl|0,l|0,d|0),{h:u,l:g}=J.default.add(this.Eh|0,this.El|0,u|0,g|0),{h:w,l:m}=J.default.add(this.Fh|0,this.Fl|0,w|0,m|0),{h:f,l:b}=J.default.add(this.Gh|0,this.Gl|0,f|0,b|0),{h:T,l:p}=J.default.add(this.Hh|0,this.Hl|0,T|0,p|0),this.set(r,s,i,o,a,c,l,d,u,g,w,m,f,b,T,p)}roundClean(){lr.fill(0),dr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Ft.SHA512=rs;var il=class extends rs{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},ol=class extends rs{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},al=class extends rs{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Ft.sha512=(0,Ya.wrapConstructor)(()=>new rs);Ft.sha512_224=(0,Ya.wrapConstructor)(()=>new il);Ft.sha512_256=(0,Ya.wrapConstructor)(()=>new ol);Ft.sha384=(0,Ya.wrapConstructor)(()=>new al)});var ul=U(wt=>{"use strict";h();y();Object.defineProperty(wt,"__esModule",{value:!0});wt.mnemonicToSeedSync=wt.mnemonicToSeed=wt.validateMnemonic=wt.entropyToMnemonic=wt.mnemonicToEntropy=wt.generateMnemonic=void 0;var sh=jo(),ih=Qf(),Ip=Jf(),oh=rh(),zp=ns(),Qa=Cf(),Pp=n=>n[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function ah(n){if(typeof n!="string")throw new TypeError(`Invalid mnemonic type: ${typeof n}`);return n.normalize("NFKD")}function cl(n){let e=ah(n),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function ch(n){sh.default.bytes(n,16,20,24,28,32)}function Op(n,e=128){if(sh.default.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return dh((0,zp.randomBytes)(e/8),n)}wt.generateMnemonic=Op;var Np=n=>{let e=8-n.length/4;return new Uint8Array([(0,Ip.sha256)(n)[0]>>e<<e])};function uh(n){if(!Array.isArray(n)||n.length!==2048||typeof n[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return n.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),Qa.utils.chain(Qa.utils.checksum(1,Np),Qa.utils.radix2(11,!0),Qa.utils.alphabet(n))}function lh(n,e){let{words:t}=cl(n),r=uh(e).decode(t);return ch(r),r}wt.mnemonicToEntropy=lh;function dh(n,e){return ch(n),uh(e).encode(n).join(Pp(e)?"\u3000":" ")}wt.entropyToMnemonic=dh;function qp(n,e){try{lh(n,e)}catch{return!1}return!0}wt.validateMnemonic=qp;var fh=n=>ah(`mnemonic${n}`);function Mp(n,e=""){return(0,ih.pbkdf2Async)(oh.sha512,cl(n).nfkd,fh(e),{c:2048,dkLen:64})}wt.mnemonicToSeed=Mp;function Rp(n,e=""){return(0,ih.pbkdf2)(oh.sha512,cl(n).nfkd,fh(e),{c:2048,dkLen:64})}wt.mnemonicToSeedSync=Rp});var hi=U(ss=>{"use strict";h();y();Object.defineProperty(ss,"__esModule",{value:!0});ss.hmac=ss.HMAC=void 0;var Ja=Lf(),hh=pt(),Fo=class extends hh.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,Ja.hash)(e);let r=(0,hh.toBytes)(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return(0,Ja.exists)(this),this.iHash.update(e),this}digestInto(e){(0,Ja.exists)(this),(0,Ja.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};ss.HMAC=Fo;var Hp=(n,e,t)=>new Fo(n,e).update(t).digest();ss.hmac=Hp;ss.hmac.create=(n,e)=>new Fo(n,e)});var Go=U(Gt=>{"use strict";h();y();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.sha384=Gt.sha512_256=Gt.sha512_224=Gt.sha512=Gt.SHA512=void 0;var Cp=Kf(),ee=qb(),ec=pt(),[Lp,Kp]=(()=>ee.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),fr=new Uint32Array(80),hr=new Uint32Array(80),is=class extends Cp.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:d,Fh:u,Fl:g,Gh:w,Gl:m,Hh:f,Hl:b}=this;return[e,t,r,s,i,o,a,c,l,d,u,g,w,m,f,b]}set(e,t,r,s,i,o,a,c,l,d,u,g,w,m,f,b){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=u|0,this.Fl=g|0,this.Gh=w|0,this.Gl=m|0,this.Hh=f|0,this.Hl=b|0}process(e,t){for(let _=0;_<16;_++,t+=4)fr[_]=e.getUint32(t),hr[_]=e.getUint32(t+=4);for(let _=16;_<80;_++){let S=fr[_-15]|0,v=hr[_-15]|0,x=ee.default.rotrSH(S,v,1)^ee.default.rotrSH(S,v,8)^ee.default.shrSH(S,v,7),z=ee.default.rotrSL(S,v,1)^ee.default.rotrSL(S,v,8)^ee.default.shrSL(S,v,7),I=fr[_-2]|0,j=hr[_-2]|0,L=ee.default.rotrSH(I,j,19)^ee.default.rotrBH(I,j,61)^ee.default.shrSH(I,j,6),M=ee.default.rotrSL(I,j,19)^ee.default.rotrBL(I,j,61)^ee.default.shrSL(I,j,6),Y=ee.default.add4L(z,M,hr[_-7],hr[_-16]),Q=ee.default.add4H(Y,x,L,fr[_-7],fr[_-16]);fr[_]=Q|0,hr[_]=Y|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:d,Eh:u,El:g,Fh:w,Fl:m,Gh:f,Gl:b,Hh:T,Hl:p}=this;for(let _=0;_<80;_++){let S=ee.default.rotrSH(u,g,14)^ee.default.rotrSH(u,g,18)^ee.default.rotrBH(u,g,41),v=ee.default.rotrSL(u,g,14)^ee.default.rotrSL(u,g,18)^ee.default.rotrBL(u,g,41),x=u&w^~u&f,z=g&m^~g&b,I=ee.default.add5L(p,v,z,Kp[_],hr[_]),j=ee.default.add5H(I,T,S,x,Lp[_],fr[_]),L=I|0,M=ee.default.rotrSH(r,s,28)^ee.default.rotrBH(r,s,34)^ee.default.rotrBH(r,s,39),Y=ee.default.rotrSL(r,s,28)^ee.default.rotrBL(r,s,34)^ee.default.rotrBL(r,s,39),Q=r&i^r&a^i&a,R=s&o^s&c^o&c;T=f|0,p=b|0,f=w|0,b=m|0,w=u|0,m=g|0,{h:u,l:g}=ee.default.add(l|0,d|0,j|0,L|0),l=a|0,d=c|0,a=i|0,c=o|0,i=r|0,o=s|0;let A=ee.default.add3L(L,Y,R);r=ee.default.add3H(A,j,M,Q),s=A|0}({h:r,l:s}=ee.default.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ee.default.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ee.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:d}=ee.default.add(this.Dh|0,this.Dl|0,l|0,d|0),{h:u,l:g}=ee.default.add(this.Eh|0,this.El|0,u|0,g|0),{h:w,l:m}=ee.default.add(this.Fh|0,this.Fl|0,w|0,m|0),{h:f,l:b}=ee.default.add(this.Gh|0,this.Gl|0,f|0,b|0),{h:T,l:p}=ee.default.add(this.Hh|0,this.Hl|0,T|0,p|0),this.set(r,s,i,o,a,c,l,d,u,g,w,m,f,b,T,p)}roundClean(){fr.fill(0),hr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Gt.SHA512=is;var ll=class extends is{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},dl=class extends is{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},fl=class extends is{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Gt.sha512=(0,ec.wrapConstructor)(()=>new is);Gt.sha512_224=(0,ec.wrapConstructor)(()=>new ll);Gt.sha512_256=(0,ec.wrapConstructor)(()=>new dl);Gt.sha384=(0,ec.wrapConstructor)(()=>new fl)});var ph=U(Fe=>{"use strict";h();y();var jp=Fe&&Fe.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.derivePath=Fe.isValidPath=Fe.getPublicKey=Fe.CKDPriv=Fe.getMasterKeyFromSeed=void 0;var Dp=jp(Rf()),yh=hi(),gh=Go(),Vp=pt(),Fp=/^m(\/[0-9]+')+$/,bh=n=>n.replace("'",""),Gp="ed25519 seed",kp=2147483648,$p=n=>{let t=yh.hmac.create(gh.sha512,Gp).update((0,Vp.hexToBytes)(n)).digest(),r=t.slice(0,32),s=t.slice(32);return{key:r,chainCode:s}};Fe.getMasterKeyFromSeed=$p;var Wp=({key:n,chainCode:e},t)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);let s=new Uint8Array(r),i=new Uint8Array([0]),o=new Uint8Array([...i,...n,...s]),a=yh.hmac.create(gh.sha512,e).update(o).digest(),c=a.slice(0,32),l=a.slice(32);return{key:c,chainCode:l}};Fe.CKDPriv=Wp;var Xp=(n,e=!0)=>{let r=Dp.default.sign.keyPair.fromSeed(n).secretKey.subarray(32),s=new Uint8Array([0]);return e?new Uint8Array([...s,...r]):r};Fe.getPublicKey=Xp;var Zp=n=>Fp.test(n)?!n.split("/").slice(1).map(bh).some(Number.isNaN):!1;Fe.isValidPath=Zp;var Yp=(n,e,t=kp)=>{if(!(0,Fe.isValidPath)(n))throw new Error("Invalid derivation path");let{key:r,chainCode:s}=(0,Fe.getMasterKeyFromSeed)(e);return n.split("/").slice(1).map(bh).map(o=>parseInt(o,10)).reduce((o,a)=>(0,Fe.CKDPriv)(o,a+t),{key:r,chainCode:s})};Fe.derivePath=Yp});var wh=U(pn=>{"use strict";h();y();Object.defineProperty(pn,"__esModule",{value:!0});pn.APTOS_COIN=pn.DEFAULT_TXN_TIMEOUT_SEC=pn.DEFAULT_TXN_EXP_SEC_FROM_NOW=pn.DEFAULT_MAX_GAS_AMOUNT=void 0;pn.DEFAULT_MAX_GAS_AMOUNT=2e5;pn.DEFAULT_TXN_EXP_SEC_FROM_NOW=20;pn.DEFAULT_TXN_TIMEOUT_SEC=20;pn.APTOS_COIN="0x1::aptos_coin::AptosCoin"});var Ah=U(yr=>{"use strict";h();y();Object.defineProperty(yr,"__esModule",{value:!0});yr.clear=yr.MemoizeExpiring=yr.Memoize=void 0;function _h(n){let e,t,r;return typeof n=="object"?(e=n.hashFunction,t=n.ttlMs,r=n.tags):e=n,(s,i,o)=>{if(o.value!=null)o.value=mh(o.value,e,t,r);else if(o.get!=null)o.get=mh(o.get,e,t,r);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}yr.Memoize=_h;function Qp(n,e){return _h({ttlMs:n,hashFunction:e})}yr.MemoizeExpiring=Qp;var tc=new Map;function Jp(n){let e=new Set;for(let t of n){let r=tc.get(t);if(r)for(let s of r)e.has(s)||(s.clear(),e.add(s))}return e.size}yr.clear=Jp;function mh(n,e,t=0,r){let s=Symbol("__memoized_map__");return function(...i){let o,a=this;a.hasOwnProperty(s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});let c=a[s];if(Array.isArray(r))for(let l of r)tc.has(l)?tc.get(l).push(c):tc.set(l,[c]);if(e||i.length>0||t>0){let l;e===!0?l=i.map(g=>g.toString()).join("!"):e?l=e.apply(a,i):l=i[0];let d=`${l}__timestamp`,u=!1;if(t>0)if(!c.has(d))u=!0;else{let g=c.get(d);u=Date.now()-g>t}c.has(l)&&!u?o=c.get(l):(o=n.apply(a,i),c.set(l,o),t>0&&c.set(d,Date.now()))}else{let l=a;c.has(l)?o=c.get(l):(o=n.apply(a,i),c.set(l,o))}return o}}});var hl=U(gr=>{"use strict";h();y();var ew=gr&&gr.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Bh=gr&&gr.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ew(e,n,t)};Object.defineProperty(gr,"__esModule",{value:!0});Bh(wh(),gr);Bh(Ah(),gr)});var $o=U(nc=>{"use strict";h();y();Object.defineProperty(nc,"__esModule",{value:!0});nc.AccountAddress=void 0;var ko=kn(),Ge=class{constructor(e){if(e.length!==Ge.LENGTH)throw new Error("Expected address of length 32");this.address=e}static fromHex(e){let t=ko.HexString.ensure(e);t.noPrefix().length%2!==0&&(t=new ko.HexString(`0${t.noPrefix()}`));let r=t.toUint8Array();if(r.length>Ge.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===Ge.LENGTH)return new Ge(r);let s=new Uint8Array(Ge.LENGTH);return s.set(r,Ge.LENGTH-r.length),new Ge(s)}static isValid(e){if(e==="")return!1;let t=ko.HexString.ensure(e);return t.noPrefix().length%2!==0&&(t=new ko.HexString(`0${t.noPrefix()}`)),t.toUint8Array().length<=Ge.LENGTH}toHexString(){return ko.HexString.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(e){return new Ge(e.deserializeFixedBytes(Ge.LENGTH))}static standardizeAddress(e){let t=e.toLowerCase();return`0x${(t.startsWith("0x")?t.slice(2):t).padStart(64,"0")}`}};nc.AccountAddress=Ge;Ge.LENGTH=32;Ge.CORE_CODE_ADDRESS=Ge.fromHex("0x1")});var xh=U(Th=>{"use strict";h();y();Object.defineProperty(Th,"__esModule",{value:!0})});var yl=U(mt=>{"use strict";h();y();Object.defineProperty(mt,"__esModule",{value:!0});mt.MAX_U256_BIG_INT=mt.MAX_U128_BIG_INT=mt.MAX_U64_BIG_INT=mt.MAX_U32_NUMBER=mt.MAX_U16_NUMBER=mt.MAX_U8_NUMBER=void 0;mt.MAX_U8_NUMBER=2**8-1;mt.MAX_U16_NUMBER=2**16-1;mt.MAX_U32_NUMBER=2**32-1;mt.MAX_U64_BIG_INT=BigInt(2**64)-1n;mt.MAX_U128_BIG_INT=BigInt(2**128)-1n;mt.MAX_U256_BIG_INT=BigInt(2**256)-BigInt(1)});var gl=U(yi=>{"use strict";h();y();var os=yi&&yi.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(yi,"__esModule",{value:!0});yi.Serializer=void 0;var wn=yl(),mn=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,r){this.ensureBufferWillHandleSize(t);let s=new DataView(this.buffer,this.offset);e.apply(s,[0,r,!0]),this.offset+=t}serializeStr(e){let t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");let t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let t=BigInt(e.toString())&BigInt(wn.MAX_U32_NUMBER),r=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(r))}serializeU128(e){let t=BigInt(e.toString())&wn.MAX_U64_BIG_INT,r=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(r)}serializeU256(e){let t=BigInt(e.toString())&wn.MAX_U128_BIG_INT,r=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(r)}serializeU32AsUleb128(e){let t=e,r=[];for(;t>>>7!==0;)r.push(t&127|128),t>>>=7;r.push(t),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};os([as(0,wn.MAX_U8_NUMBER)],mn.prototype,"serializeU8",null);os([as(0,wn.MAX_U16_NUMBER)],mn.prototype,"serializeU16",null);os([as(0,wn.MAX_U32_NUMBER)],mn.prototype,"serializeU32",null);os([as(BigInt(0),wn.MAX_U64_BIG_INT)],mn.prototype,"serializeU64",null);os([as(BigInt(0),wn.MAX_U128_BIG_INT)],mn.prototype,"serializeU128",null);os([as(BigInt(0),wn.MAX_U256_BIG_INT)],mn.prototype,"serializeU256",null);os([as(0,wn.MAX_U32_NUMBER)],mn.prototype,"serializeU32AsUleb128",null);yi.Serializer=mn;function as(n,e,t){return(r,s,i)=>{let o=i.value;return i.value=function(c){let l=BigInt(c.toString());if(l>BigInt(e.toString())||l<BigInt(n.toString()))throw new Error(t||"Value is out of range");o.apply(this,[c])},i}}});var Eh=U(rc=>{"use strict";h();y();Object.defineProperty(rc,"__esModule",{value:!0});rc.Deserializer=void 0;var Sh=yl(),bl=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Sh.MAX_U32_NUMBER;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(t),(r&128)===0)break;t+=7}if(e>Sh.MAX_U32_NUMBER)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};rc.Deserializer=bl});var vh=U(ue=>{"use strict";h();y();Object.defineProperty(ue,"__esModule",{value:!0});ue.bcsSerializeFixedBytes=ue.bcsSerializeBytes=ue.bcsSerializeStr=ue.bcsSerializeBool=ue.bcsSerializeU256=ue.bcsSerializeU128=ue.bcsSerializeU32=ue.bcsSerializeU16=ue.bcsSerializeU8=ue.bcsSerializeUint64=ue.bcsToBytes=ue.deserializeVector=ue.serializeVectorWithFunc=ue.serializeVector=void 0;var kt=gl();function tw(n,e){e.serializeU32AsUleb128(n.length),n.forEach(t=>{t.serialize(e)})}ue.serializeVector=tw;function nw(n,e){let t=new kt.Serializer;t.serializeU32AsUleb128(n.length);let r=t[e];return n.forEach(s=>{r.call(t,s)}),t.getBytes()}ue.serializeVectorWithFunc=nw;function rw(n,e){let t=n.deserializeUleb128AsU32(),r=[];for(let s=0;s<t;s+=1)r.push(e.deserialize(n));return r}ue.deserializeVector=rw;function sw(n){let e=new kt.Serializer;return n.serialize(e),e.getBytes()}ue.bcsToBytes=sw;function iw(n){let e=new kt.Serializer;return e.serializeU64(n),e.getBytes()}ue.bcsSerializeUint64=iw;function ow(n){let e=new kt.Serializer;return e.serializeU8(n),e.getBytes()}ue.bcsSerializeU8=ow;function aw(n){let e=new kt.Serializer;return e.serializeU16(n),e.getBytes()}ue.bcsSerializeU16=aw;function cw(n){let e=new kt.Serializer;return e.serializeU32(n),e.getBytes()}ue.bcsSerializeU32=cw;function uw(n){let e=new kt.Serializer;return e.serializeU128(n),e.getBytes()}ue.bcsSerializeU128=uw;function lw(n){let e=new kt.Serializer;return e.serializeU256(n),e.getBytes()}ue.bcsSerializeU256=lw;function dw(n){let e=new kt.Serializer;return e.serializeBool(n),e.getBytes()}ue.bcsSerializeBool=dw;function fw(n){let e=new kt.Serializer;return e.serializeStr(n),e.getBytes()}ue.bcsSerializeStr=fw;function hw(n){let e=new kt.Serializer;return e.serializeBytes(n),e.getBytes()}ue.bcsSerializeBytes=hw;function yw(n){let e=new kt.Serializer;return e.serializeFixedBytes(n),e.getBytes()}ue.bcsSerializeFixedBytes=yw});var An=U(_n=>{"use strict";h();y();var gw=_n&&_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),sc=_n&&_n.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gw(e,n,t)};Object.defineProperty(_n,"__esModule",{value:!0});sc(xh(),_n);sc(gl(),_n);sc(Eh(),_n);sc(vh(),_n)});var ic=U(gi=>{"use strict";h();y();Object.defineProperty(gi,"__esModule",{value:!0});gi.Ed25519Signature=gi.Ed25519PublicKey=void 0;var br=class{constructor(e){if(e.length!==br.LENGTH)throw new Error(`Ed25519PublicKey length should be ${br.LENGTH}`);this.value=e}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(e){let t=e.deserializeBytes();return new br(t)}};gi.Ed25519PublicKey=br;br.LENGTH=32;var pr=class{constructor(e){if(this.value=e,e.length!==pr.LENGTH)throw new Error(`Ed25519Signature length should be ${pr.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(e){let t=e.deserializeBytes();return new pr(t)}};gi.Ed25519Signature=pr;pr.LENGTH=64});var wl=U(bi=>{"use strict";h();y();Object.defineProperty(bi,"__esModule",{value:!0});bi.MultiEd25519Signature=bi.MultiEd25519PublicKey=void 0;var $t=ic(),pl=32,Wo=class{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>pl)throw new Error(`"threshold" cannot be larger than ${pl}`)}toBytes(){let e=new Uint8Array(this.public_keys.length*$t.Ed25519PublicKey.LENGTH+1);return this.public_keys.forEach((t,r)=>{e.set(t.value,r*$t.Ed25519PublicKey.LENGTH)}),e[this.public_keys.length*$t.Ed25519PublicKey.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){let t=e.deserializeBytes(),r=t[t.length-1],s=[];for(let i=0;i<t.length-1;i+=$t.Ed25519PublicKey.LENGTH){let o=i;s.push(new $t.Ed25519PublicKey(t.subarray(o,o+$t.Ed25519PublicKey.LENGTH)))}return new Wo(s,r)}};bi.MultiEd25519PublicKey=Wo;var $n=class{constructor(e,t){if(this.signatures=e,this.bitmap=t,t.length!==$n.BITMAP_LEN)throw new Error(`"bitmap" length should be ${$n.BITMAP_LEN}`)}toBytes(){let e=new Uint8Array(this.signatures.length*$t.Ed25519Signature.LENGTH+$n.BITMAP_LEN);return this.signatures.forEach((t,r)=>{e.set(t.value,r*$t.Ed25519Signature.LENGTH)}),e.set(this.bitmap,this.signatures.length*$t.Ed25519Signature.LENGTH),e}static createBitmap(e){let r=new Uint8Array([0,0,0,0]),s=new Set;return e.forEach(i=>{if(i>=pl)throw new Error(`Invalid bit value ${i}.`);if(s.has(i))throw new Error("Duplicated bits detected.");s.add(i);let o=Math.floor(i/8),a=r[o];a|=128>>i%8,r[o]=a}),r}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(e){let t=e.deserializeBytes(),r=t.subarray(t.length-4),s=[];for(let i=0;i<t.length-r.length;i+=$t.Ed25519Signature.LENGTH){let o=i;s.push(new $t.Ed25519Signature(t.subarray(o,o+$t.Ed25519Signature.LENGTH)))}return new $n(s,r)}};bi.MultiEd25519Signature=$n;$n.BITMAP_LEN=4});var _l=U(Ke=>{"use strict";h();y();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.AccountAuthenticatorMultiEd25519=Ke.AccountAuthenticatorEd25519=Ke.AccountAuthenticator=Ke.TransactionAuthenticatorFeePayer=Ke.TransactionAuthenticatorMultiAgent=Ke.TransactionAuthenticatorMultiEd25519=Ke.TransactionAuthenticatorEd25519=Ke.TransactionAuthenticator=void 0;var wr=An(),ml=$o(),oc=ic(),ac=wl(),cs=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return pi.load(e);case 1:return wi.load(e);case 2:return mi.load(e);case 3:return _i.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}};Ke.TransactionAuthenticator=cs;var pi=class extends cs{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=oc.Ed25519PublicKey.deserialize(e),r=oc.Ed25519Signature.deserialize(e);return new pi(t,r)}};Ke.TransactionAuthenticatorEd25519=pi;var wi=class extends cs{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=ac.MultiEd25519PublicKey.deserialize(e),r=ac.MultiEd25519Signature.deserialize(e);return new wi(t,r)}};Ke.TransactionAuthenticatorMultiEd25519=wi;var mi=class extends cs{constructor(e,t,r){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),(0,wr.serializeVector)(this.secondary_signer_addresses,e),(0,wr.serializeVector)(this.secondary_signers,e)}static load(e){let t=Bn.deserialize(e),r=(0,wr.deserializeVector)(e,ml.AccountAddress),s=(0,wr.deserializeVector)(e,Bn);return new mi(t,r,s)}};Ke.TransactionAuthenticatorMultiAgent=mi;var _i=class extends cs{constructor(e,t,r,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r,this.fee_payer=s}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),(0,wr.serializeVector)(this.secondary_signer_addresses,e),(0,wr.serializeVector)(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let t=Bn.deserialize(e),r=(0,wr.deserializeVector)(e,ml.AccountAddress),s=(0,wr.deserializeVector)(e,Bn),i=ml.AccountAddress.deserialize(e),o=Bn.deserialize(e),a={address:i,authenticator:o};return new _i(t,r,s,a)}};Ke.TransactionAuthenticatorFeePayer=_i;var Bn=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Ai.load(e);case 1:return Bi.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}};Ke.AccountAuthenticator=Bn;var Ai=class extends Bn{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=oc.Ed25519PublicKey.deserialize(e),r=oc.Ed25519Signature.deserialize(e);return new Ai(t,r)}};Ke.AccountAuthenticatorEd25519=Ai;var Bi=class extends Bn{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=ac.MultiEd25519PublicKey.deserialize(e),r=ac.MultiEd25519Signature.deserialize(e);return new Bi(t,r)}};Ke.AccountAuthenticatorMultiEd25519=Bi});var uc=U(cc=>{"use strict";h();y();Object.defineProperty(cc,"__esModule",{value:!0});cc.Identifier=void 0;var Xo=class{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(e){let t=e.deserializeStr();return new Xo(t)}};cc.Identifier=Xo});var dc=U(re=>{"use strict";h();y();Object.defineProperty(re,"__esModule",{value:!0});re.TypeTagParserError=re.TypeTagParser=re.objectStructTag=re.optionStructTag=re.stringStructTag=re.StructTag=re.TypeTagStruct=re.TypeTagVector=re.TypeTagSigner=re.TypeTagAddress=re.TypeTagU256=re.TypeTagU128=re.TypeTagU64=re.TypeTagU32=re.TypeTagU16=re.TypeTagU8=re.TypeTagBool=re.TypeTag=void 0;var us=$o(),Uh=An(),Tn=uc(),Ze=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return ls.load(e);case 1:return ds.load(e);case 2:return ys.load(e);case 3:return gs.load(e);case 4:return _r.load(e);case 5:return Ti.load(e);case 6:return ps.load(e);case 7:return Ar.load(e);case 8:return fs.load(e);case 9:return hs.load(e);case 10:return bs.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}};re.TypeTag=Ze;var ls=class extends Ze{serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new ls}};re.TypeTagBool=ls;var ds=class extends Ze{serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new ds}};re.TypeTagU8=ds;var fs=class extends Ze{serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new fs}};re.TypeTagU16=fs;var hs=class extends Ze{serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new hs}};re.TypeTagU32=hs;var ys=class extends Ze{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new ys}};re.TypeTagU64=ys;var gs=class extends Ze{serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new gs}};re.TypeTagU128=gs;var bs=class extends Ze{serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new bs}};re.TypeTagU256=bs;var _r=class extends Ze{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new _r}};re.TypeTagAddress=_r;var Ti=class extends Ze{serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Ti}};re.TypeTagSigner=Ti;var ps=class extends Ze{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){let t=Ze.deserialize(e);return new ps(t)}};re.TypeTagVector=ps;var Ar=class extends Ze{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){let t=rn.deserialize(e);return new Ar(t)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===us.AccountAddress.CORE_CODE_ADDRESS.toHexString()}};re.TypeTagStruct=Ar;var rn=class{constructor(e,t,r,s){this.address=e,this.module_name=t,this.name=r,this.type_args=s}static fromString(e){let t=new xi(e).parseTypeTag();return new rn(t.value.address,t.value.module_name,t.value.name,t.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),(0,Uh.serializeVector)(this.type_args,e)}static deserialize(e){let t=us.AccountAddress.deserialize(e),r=Tn.Identifier.deserialize(e),s=Tn.Identifier.deserialize(e),i=(0,Uh.deserializeVector)(e,Ze);return new rn(t,r,s,i)}};re.StructTag=rn;re.stringStructTag=new rn(us.AccountAddress.fromHex("0x1"),new Tn.Identifier("string"),new Tn.Identifier("String"),[]);function bw(n){return new rn(us.AccountAddress.fromHex("0x1"),new Tn.Identifier("option"),new Tn.Identifier("Option"),[n])}re.optionStructTag=bw;function pw(n){return new rn(us.AccountAddress.fromHex("0x1"),new Tn.Identifier("object"),new Tn.Identifier("Object"),[n])}re.objectStructTag=pw;function mr(n){throw new lc(n)}function Ih(n){return!!n.match(/\s/)}function zh(n){return!!n.match(/[_A-Za-z0-9]/g)}function ww(n){return!!n.match(/T\d+/g)}function mw(n,e){let t=n[e];if(t===":"){if(n.slice(e,e+2)==="::")return[["COLON","::"],2];mr("Unrecognized token.")}else{if(t==="<")return[["LT","<"],1];if(t===">")return[["GT",">"],1];if(t===",")return[["COMMA",","],1];if(Ih(t)){let r="";for(let s=e;s<n.length;s+=1){let i=n[s];if(Ih(i))r=`${r}${i}`;else break}return[["SPACE",r],r.length]}else if(zh(t)){let r="";for(let s=e;s<n.length;s+=1){let i=n[s];if(zh(i))r=`${r}${i}`;else break}return ww(r)?[["GENERIC",r],r.length]:[["IDENT",r],r.length]}}throw new Error("Unrecognized token.")}function _w(n){let e=0,t=[];for(;e<n.length;){let[r,s]=mw(n,e);r[0]!=="SPACE"&&t.push(r),e+=s}return t}var xi=class{constructor(e,t){this.typeTags=[],this.tokens=_w(e),this.typeTags=t||[]}consume(e){let t=this.tokens.shift();(!t||t[1]!==e)&&mr("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(e,t){let r=[];for(this.tokens.length<=0&&mr("Invalid type tag.");this.tokens[0][1]!==e&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&mr("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&mr("Invalid type tag.");let[e,t]=this.tokens.shift();if(t==="u8")return new ds;if(t==="u16")return new fs;if(t==="u32")return new hs;if(t==="u64")return new ys;if(t==="u128")return new gs;if(t==="u256")return new bs;if(t==="bool")return new ls;if(t==="address")return new _r;if(t==="vector"){this.consume("<");let r=this.parseTypeTag();return this.consume(">"),new ps(r)}if(t==="string")return new Ar(re.stringStructTag);if(e==="IDENT"&&(t.startsWith("0x")||t.startsWith("0X"))){let r=us.AccountAddress.fromHex(t);this.consume("::");let[s,i]=this.tokens.shift();s!=="IDENT"&&mr("Invalid type tag."),this.consume("::");let[o,a]=this.tokens.shift();if(o!=="IDENT"&&mr("Invalid type tag."),us.AccountAddress.CORE_CODE_ADDRESS.toHexString()===r.toHexString()&&i==="object"&&a==="Object")return this.consumeWholeGeneric(),new _r;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));let l=new rn(r,new Tn.Identifier(i),new Tn.Identifier(a),c);return new Ar(l)}if(e==="GENERIC"){this.typeTags.length===0&&mr("Can't convert generic type since no typeTags were specified.");let r=parseInt(t.substring(1),10);return new xi(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}};re.TypeTagParser=xi;var lc=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}};re.TypeTagParserError=lc});var Tl=U(D=>{"use strict";h();y();Object.defineProperty(D,"__esModule",{value:!0});D.UserTransaction=D.Transaction=D.TransactionArgumentBool=D.TransactionArgumentU8Vector=D.TransactionArgumentAddress=D.TransactionArgumentU256=D.TransactionArgumentU128=D.TransactionArgumentU64=D.TransactionArgumentU32=D.TransactionArgumentU16=D.TransactionArgumentU8=D.TransactionArgument=D.ChainId=D.TransactionPayloadMultisig=D.TransactionPayloadEntryFunction=D.TransactionPayloadScript=D.TransactionPayload=D.FeePayerRawTransaction=D.MultiAgentRawTransaction=D.RawTransactionWithData=D.SignedTransaction=D.WriteSet=D.ChangeSet=D.ModuleId=D.Module=D.MultiSig=D.MultiSigTransactionPayload=D.EntryFunction=D.Script=D.RawTransaction=void 0;var Ph=ar(),Aw=kn(),sn=An(),Br=$o(),Bw=_l(),fc=uc(),Oh=dc(),Tr=class{constructor(e,t,r,s,i,o,a){this.sender=e,this.sequence_number=t,this.payload=r,this.max_gas_amount=s,this.gas_unit_price=i,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let t=Br.AccountAddress.deserialize(e),r=e.deserializeU64(),s=ws.deserialize(e),i=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=qi.deserialize(e);return new Tr(t,r,s,i,o,a,c)}};D.RawTransaction=Tr;var Si=class{constructor(e,t,r){this.code=e,this.ty_args=t,this.args=r}serialize(e){e.serializeBytes(this.code),(0,sn.serializeVector)(this.ty_args,e),(0,sn.serializeVector)(this.args,e)}static deserialize(e){let t=e.deserializeBytes(),r=(0,sn.deserializeVector)(e,Oh.TypeTag),s=(0,sn.deserializeVector)(e,Ot);return new Si(t,r,s)}};D.Script=Si;var Wn=class{constructor(e,t,r,s){this.module_name=e,this.function_name=t,this.ty_args=r,this.args=s}static natural(e,t,r,s){return new Wn(xr.fromStr(e),new fc.Identifier(t),r,s)}static natual(e,t,r,s){return Wn.natural(e,t,r,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),(0,sn.serializeVector)(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{e.serializeBytes(t)})}static deserialize(e){let t=xr.deserialize(e),r=fc.Identifier.deserialize(e),s=(0,sn.deserializeVector)(e,Oh.TypeTag),i=e.deserializeUleb128AsU32(),o=[];for(let c=0;c<i;c+=1)o.push(e.deserializeBytes());let a=o;return new Wn(t,r,s,a)}};D.EntryFunction=Wn;var Ei=class{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new Ei(Wn.deserialize(e))}};D.MultiSigTransactionPayload=Ei;var vi=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let t=Br.AccountAddress.deserialize(e),r=e.deserializeBool(),s;return r&&(s=Ei.deserialize(e)),new vi(t,s)}};D.MultiSig=vi;var Zo=class{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(e){let t=e.deserializeBytes();return new Zo(t)}};D.Module=Zo;var xr=class{constructor(e,t){this.address=e,this.name=t}static fromStr(e){let t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new xr(Br.AccountAddress.fromHex(new Aw.HexString(t[0])),new fc.Identifier(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let t=Br.AccountAddress.deserialize(e),r=fc.Identifier.deserialize(e);return new xr(t,r)}};D.ModuleId=xr;var Al=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}};D.ChangeSet=Al;var Bl=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}};D.WriteSet=Bl;var Ui=class{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let t=Tr.deserialize(e),r=Bw.TransactionAuthenticator.deserialize(e);return new Ui(t,r)}};D.SignedTransaction=Ui;var Yo=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Ii.load(e);case 1:return zi.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}};D.RawTransactionWithData=Yo;var Ii=class extends Yo{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),(0,sn.serializeVector)(this.secondary_signer_addresses,e)}static load(e){let t=Tr.deserialize(e),r=(0,sn.deserializeVector)(e,Br.AccountAddress);return new Ii(t,r)}};D.MultiAgentRawTransaction=Ii;var zi=class extends Yo{constructor(e,t,r){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),(0,sn.serializeVector)(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(e){let t=Tr.deserialize(e),r=(0,sn.deserializeVector)(e,Br.AccountAddress),s=Br.AccountAddress.deserialize(e);return new zi(t,r,s)}};D.FeePayerRawTransaction=zi;var ws=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Pi.load(e);case 2:return Oi.load(e);case 3:return Ni.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}};D.TransactionPayload=ws;var Pi=class extends ws{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){let t=Si.deserialize(e);return new Pi(t)}};D.TransactionPayloadScript=Pi;var Oi=class extends ws{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(e){let t=Wn.deserialize(e);return new Oi(t)}};D.TransactionPayloadEntryFunction=Oi;var Ni=class extends ws{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){let t=vi.deserialize(e);return new Ni(t)}};D.TransactionPayloadMultisig=Ni;var qi=class{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(e){let t=e.deserializeU8();return new qi(t)}};D.ChainId=qi;var Ot=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Mi.load(e);case 1:return Ci.load(e);case 2:return Li.load(e);case 3:return ji.load(e);case 4:return Di.load(e);case 5:return Vi.load(e);case 6:return Ri.load(e);case 7:return Hi.load(e);case 8:return Ki.load(e);default:throw new Error(`Unknown variant index for TransactionArgument: ${t}`)}}};D.TransactionArgument=Ot;var Mi=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(e){let t=e.deserializeU8();return new Mi(t)}};D.TransactionArgumentU8=Mi;var Ri=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(e){let t=e.deserializeU16();return new Ri(t)}};D.TransactionArgumentU16=Ri;var Hi=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(e){let t=e.deserializeU32();return new Hi(t)}};D.TransactionArgumentU32=Hi;var Ci=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(e){let t=e.deserializeU64();return new Ci(t)}};D.TransactionArgumentU64=Ci;var Li=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(e){let t=e.deserializeU128();return new Li(t)}};D.TransactionArgumentU128=Li;var Ki=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(e){let t=e.deserializeU256();return new Ki(t)}};D.TransactionArgumentU256=Ki;var ji=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(e){let t=Br.AccountAddress.deserialize(e);return new ji(t)}};D.TransactionArgumentAddress=ji;var Di=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(e){let t=e.deserializeBytes();return new Di(t)}};D.TransactionArgumentU8Vector=Di;var Vi=class extends Ot{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(e){let t=e.deserializeBool();return new Vi(t)}};D.TransactionArgumentBool=Vi;var hc=class{getHashSalt(){let e=Ph.sha3_256.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Fi.load(e);default:throw new Error(`Unknown variant index for Transaction: ${t}`)}}};D.Transaction=hc;var Fi=class extends hc{constructor(e){super(),this.value=e}hash(){let e=Ph.sha3_256.create();return e.update(this.getHashSalt()),e.update((0,sn.bcsToBytes)(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(e){return new Fi(Ui.deserialize(e))}};D.UserTransaction=Fi});var qh=U(yc=>{"use strict";h();y();Object.defineProperty(yc,"__esModule",{value:!0});yc.AuthenticationKey=void 0;var Tw=kn(),Nh=ar(),Nt=class{constructor(e){if(e.length!==Nt.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=e}static fromMultiEd25519PublicKey(e){let t=e.toBytes(),r=new Uint8Array(t.length+1);r.set(t),r.set([Nt.MULTI_ED25519_SCHEME],t.length);let s=Nh.sha3_256.create();return s.update(r),new Nt(s.digest())}static fromEd25519PublicKey(e){let t=e.value,r=new Uint8Array(t.length+1);r.set(t),r.set([Nt.ED25519_SCHEME],t.length);let s=Nh.sha3_256.create();return s.update(r),new Nt(s.digest())}derivedAddress(){return Tw.HexString.fromUint8Array(this.bytes)}};yc.AuthenticationKey=Nt;Nt.LENGTH=32;Nt.MULTI_ED25519_SCHEME=1;Nt.ED25519_SCHEME=0;Nt.DERIVE_RESOURCE_ACCOUNT_SCHEME=255});var Er=U(_t=>{"use strict";h();y();var xw=_t&&_t.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Sr=_t&&_t.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xw(e,n,t)};Object.defineProperty(_t,"__esModule",{value:!0});Sr($o(),_t);Sr(_l(),_t);Sr(Tl(),_t);Sr(dc(),_t);Sr(uc(),_t);Sr(ic(),_t);Sr(wl(),_t);Sr(qh(),_t)});var xl=U(Ye=>{"use strict";h();y();var Sw=Ye&&Ye.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ew=Ye&&Ye.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),vw=Ye&&Ye.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i},Uw=Ye&&Ye.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Sw(e,n,t);return Ew(e,n),e},Iw=Ye&&Ye.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getAddressFromAccountOrAddress=Ye.AptosAccount=void 0;var on=kn(),gc=Iw(Rf()),zw=Uw(ul()),Pw=pt(),Ow=ja(),Nw=ar(),qw=ph(),Mw=hl(),bc=Er(),Rw=An(),Hw=Ob(),xn=class{static fromAptosAccountObject(e){return new xn(on.HexString.ensure(e.privateKeyHex).toUint8Array(),e.address)}static fromPrivateKey(e){return new xn(e.toUint8Array())}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(e,t){if(!xn.isValidPath(e))throw new Error("Invalid derivation path");let r=t.trim().split(/\s+/).map(i=>i.toLowerCase()).join(" "),{key:s}=(0,qw.derivePath)(e,(0,Pw.bytesToHex)(zw.mnemonicToSeedSync(r)));return new xn(s)}constructor(e,t){if(!e||e.length!==32&&e.length!==64)throw new Error("invalid key");e?this.signingKey=gc.default.sign.keyPair.fromSeed(e.slice(0,32)):this.signingKey=gc.default.sign.keyPair(),this.accountAddress=on.HexString.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){let e=new bc.Ed25519PublicKey(this.signingKey.publicKey);return bc.AuthenticationKey.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){let r=(0,Rw.bcsToBytes)(bc.AccountAddress.fromHex(e)),s=new Uint8Array([...r,...t,bc.AuthenticationKey.DERIVE_RESOURCE_ACCOUNT_SCHEME]),i=Nw.sha3_256.create();return i.update(s),on.HexString.fromUint8Array(i.digest())}static getCollectionID(e,t){let r=new Hw.TextEncoder().encode(`${e}::${t}`),s=Ow.sha256.create();return s.update(r),on.HexString.fromUint8Array(s.digest())}pubKey(){return on.HexString.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){let t=gc.default.sign.detached(e,this.signingKey.secretKey);return on.HexString.fromUint8Array(t)}signHexString(e){let t=on.HexString.ensure(e).toUint8Array();return this.signBuffer(t)}verifySignature(e,t){let r=on.HexString.ensure(e).toUint8Array(),s=on.HexString.ensure(t).toUint8Array();return gc.default.sign.detached.verify(r,s,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:on.HexString.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};vw([(0,Mw.Memoize)()],xn.prototype,"authKey",null);Ye.AptosAccount=xn;function Cw(n){return n instanceof xn?n.address():on.HexString.ensure(n)}Ye.getAddressFromAccountOrAddress=Cw});var Mh=U(Wt=>{"use strict";h();y();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.EntryFunctionABI=Wt.TransactionScriptABI=Wt.ScriptABI=Wt.ArgumentABI=Wt.TypeArgumentABI=void 0;var vr=An(),Lw=Tl(),Kw=dc(),ms=class{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(e){let t=e.deserializeStr();return new ms(t)}};Wt.TypeArgumentABI=ms;var _s=class{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(e){let t=e.deserializeStr(),r=Kw.TypeTag.deserialize(e);return new _s(t,r)}};Wt.ArgumentABI=_s;var Qo=class{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case 0:return Gi.load(e);case 1:return ki.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}};Wt.ScriptABI=Qo;var Gi=class extends Qo{constructor(e,t,r,s,i){super(),this.name=e,this.doc=t,this.code=r,this.ty_args=s,this.args=i}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),(0,vr.serializeVector)(this.ty_args,e),(0,vr.serializeVector)(this.args,e)}static load(e){let t=e.deserializeStr(),r=e.deserializeStr(),s=e.deserializeBytes(),i=(0,vr.deserializeVector)(e,ms),o=(0,vr.deserializeVector)(e,_s);return new Gi(t,r,s,i,o)}};Wt.TransactionScriptABI=Gi;var ki=class extends Qo{constructor(e,t,r,s,i){super(),this.name=e,this.module_name=t,this.doc=r,this.ty_args=s,this.args=i}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),(0,vr.serializeVector)(this.ty_args,e),(0,vr.serializeVector)(this.args,e)}static load(e){let t=e.deserializeStr(),r=Lw.ModuleId.deserialize(e),s=e.deserializeStr(),i=(0,vr.deserializeVector)(e,ms),o=(0,vr.deserializeVector)(e,_s);return new ki(t,r,s,i,o)}};Wt.EntryFunctionABI=ki});var Hh=U(Xt=>{"use strict";h();y();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.argToTransactionArgument=Xt.serializeArg=Xt.ensureBigInt=Xt.ensureNumber=Xt.ensureBoolean=void 0;var pc=kn(),oe=Er();function wc(n,e,t){if(!e?.includes(typeof n))throw new Error(t||`Invalid arg: ${n} type should be ${e instanceof Array?e.join(" or "):e}`)}function Sl(n){if(wc(n,["boolean","string"]),typeof n=="boolean")return n;if(n==="true")return!0;if(n==="false")return!1;throw new Error("Invalid boolean string.")}Xt.ensureBoolean=Sl;function As(n){if(wc(n,["number","string"]),typeof n=="number")return n;let e=Number.parseInt(n,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}Xt.ensureNumber=As;function Bs(n){return wc(n,["number","bigint","string"]),BigInt(n)}Xt.ensureBigInt=Bs;function jw(n,e,t){El(n,e,t,0)}Xt.serializeArg=jw;function El(n,e,t,r){if(e instanceof oe.TypeTagBool)t.serializeBool(Sl(n));else if(e instanceof oe.TypeTagU8)t.serializeU8(As(n));else if(e instanceof oe.TypeTagU16)t.serializeU16(As(n));else if(e instanceof oe.TypeTagU32)t.serializeU32(As(n));else if(e instanceof oe.TypeTagU64)t.serializeU64(Bs(n));else if(e instanceof oe.TypeTagU128)t.serializeU128(Bs(n));else if(e instanceof oe.TypeTagU256)t.serializeU256(Bs(n));else if(e instanceof oe.TypeTagAddress)Rh(n,t);else if(e instanceof oe.TypeTagVector)Dw(n,e,t,r);else if(e instanceof oe.TypeTagStruct)Vw(n,e,t,r);else throw new Error("Unsupported arg type.")}function Rh(n,e){let t;if(typeof n=="string"||n instanceof pc.HexString)t=oe.AccountAddress.fromHex(n);else if(n instanceof oe.AccountAddress)t=n;else throw new Error("Invalid account address.");t.serialize(e)}function Dw(n,e,t,r){if(e.value instanceof oe.TypeTagU8){if(n instanceof Uint8Array){t.serializeBytes(n);return}if(n instanceof pc.HexString){t.serializeBytes(n.toUint8Array());return}if(typeof n=="string"){t.serializeStr(n);return}}if(!Array.isArray(n))throw new Error("Invalid vector args.");t.serializeU32AsUleb128(n.length),n.forEach(s=>El(s,e.value,t,r+1))}function Vw(n,e,t,r){let{address:s,module_name:i,name:o,type_args:a}=e.value,c=`${pc.HexString.fromUint8Array(s.address).toShortString()}::${i.value}::${o.value}`;if(c==="0x1::string::String")wc(n,["string"]),t.serializeStr(n);else if(c==="0x1::object::Object")Rh(n,t);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);Fw(n,a[0],t,r)}else throw new Error("Unsupported struct type in function argument")}function Fw(n,e,t,r){n==null?t.serializeU32AsUleb128(0):(t.serializeU32AsUleb128(1),El(n,e,t,r+1))}function Gw(n,e){if(e instanceof oe.TypeTagBool)return new oe.TransactionArgumentBool(Sl(n));if(e instanceof oe.TypeTagU8)return new oe.TransactionArgumentU8(As(n));if(e instanceof oe.TypeTagU16)return new oe.TransactionArgumentU16(As(n));if(e instanceof oe.TypeTagU32)return new oe.TransactionArgumentU32(As(n));if(e instanceof oe.TypeTagU64)return new oe.TransactionArgumentU64(Bs(n));if(e instanceof oe.TypeTagU128)return new oe.TransactionArgumentU128(Bs(n));if(e instanceof oe.TypeTagU256)return new oe.TransactionArgumentU256(Bs(n));if(e instanceof oe.TypeTagAddress){let t;if(typeof n=="string"||n instanceof pc.HexString)t=oe.AccountAddress.fromHex(n);else if(n instanceof oe.AccountAddress)t=n;else throw new Error("Invalid account address.");return new oe.TransactionArgumentAddress(t)}if(e instanceof oe.TypeTagVector&&e.value instanceof oe.TypeTagU8){if(!(n instanceof Uint8Array))throw new Error(`${n} should be an instance of Uint8Array`);return new oe.TransactionArgumentU8Vector(n)}throw new Error("Unknown type for TransactionArgument.")}Xt.argToTransactionArgument=Gw});var Dh=U(At=>{"use strict";h();y();Object.defineProperty(At,"__esModule",{value:!0});At.buildRawTransactionByABI=At.fetchABI=At.TransactionBuilderABI=At.TransactionBuilderMultiEd25519=At.TransactionBuilderEd25519=At.TransactionBuilder=void 0;var kw=ar(),ke=Er(),$i=An(),$w=kn(),Ts=Mh(),Ch=Hh(),Kh=Er(),Lh=hl(),Ww="APTOS::RawTransaction",Xw="APTOS::RawTransactionWithData",xs=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,r)}static getSigningMessage(e){let t=kw.sha3_256.create();if(e instanceof ke.RawTransaction)t.update(Ww);else if(e instanceof ke.MultiAgentRawTransaction)t.update(Xw);else throw new Error("Unknown transaction type.");let r=t.digest(),s=(0,$i.bcsToBytes)(e),i=new Uint8Array(r.length+s.length);return i.set(r),i.set(s,r.length),i}};At.TransactionBuilder=xs;var vl=class extends xs{constructor(e,t,r){super(e,r),this.publicKey=t}rawToSigned(e){let t=xs.getSigningMessage(e),r=this.signingFunction(t),s=new ke.TransactionAuthenticatorEd25519(new ke.Ed25519PublicKey(this.publicKey),r);return new ke.SignedTransaction(e,s)}sign(e){return(0,$i.bcsToBytes)(this.rawToSigned(e))}};At.TransactionBuilderEd25519=vl;var Ul=class extends xs{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){let t=xs.getSigningMessage(e),r=this.signingFunction(t),s=new ke.TransactionAuthenticatorMultiEd25519(this.publicKey,r);return new ke.SignedTransaction(e,s)}sign(e){return(0,$i.bcsToBytes)(this.rawToSigned(e))}};At.TransactionBuilderMultiEd25519=Ul;var Ss=class{constructor(e,t){this.abiMap=new Map,e.forEach(r=>{let s=new $i.Deserializer(r),i=Ts.ScriptABI.deserialize(s),o;if(i instanceof Ts.EntryFunctionABI){let a=i,{address:c,name:l}=a.module_name;o=`${$w.HexString.fromUint8Array(c.address).toShortString()}::${l.value}::${a.name}`}else o=i.name;if(this.abiMap.has(o))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(o,i)}),this.builderConfig={maxGasAmount:BigInt(Lh.DEFAULT_MAX_GAS_AMOUNT),expSecFromNow:Lh.DEFAULT_TXN_EXP_SEC_FROM_NOW,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((r,s)=>{let i=new $i.Serializer;return(0,Ch.serializeArg)(r,e[s].type_tag,i),i.getBytes()})}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map((r,s)=>(0,Ch.argToTransactionArgument)(r,e[s].type_tag))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(e,t,r){let s=t.map(a=>new Kh.TypeTagParser(a).parseTypeTag()),i;if(!this.abiMap.has(e))throw new Error(`Cannot find function: ${e}`);let o=this.abiMap.get(e);if(o instanceof Ts.EntryFunctionABI){let a=o,c=Ss.toBCSArgs(a.args,r);i=new ke.TransactionPayloadEntryFunction(new ke.EntryFunction(a.module_name,new ke.Identifier(a.name),s,c))}else if(o instanceof Ts.TransactionScriptABI){let a=o,c=Ss.toTransactionArguments(a.args,r);i=new ke.TransactionPayloadScript(new ke.Script(a.code,s,c))}else throw new Error("Unknown ABI format.");return i}build(e,t,r){let{sender:s,sequenceNumber:i,gasUnitPrice:o,maxGasAmount:a,expSecFromNow:c,chainId:l}=this.builderConfig;if(!o)throw new Error("No gasUnitPrice provided.");let d=s instanceof ke.AccountAddress?s:ke.AccountAddress.fromHex(s),u=BigInt(Math.floor(Date.now()/1e3)+Number(c)),g=this.buildTransactionPayload(e,t,r);if(g)return new ke.RawTransaction(d,BigInt(i),g,BigInt(a),BigInt(o),u,new ke.ChainId(Number(l)));throw new Error("Invalid ABI.")}};At.TransactionBuilderABI=Ss;function jh(n){let e=n.map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(s=>s.is_entry).map(s=>({fullName:`${r.address}::${r.name}::${s.name}`,...s}))),t=new Map;return e.forEach(r=>{t.set(r.fullName,r)}),t}At.fetchABI=jh;function Zw(n,e,t,r,s){if(t=(f=>f.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");let[a,c]=t.split("::"),l=jh(n);if(!l.has(t))throw new Error(`${t} doesn't exist.`);let d=l.get(t);if(!d)throw Error("abi miss");let g=d.params.filter(f=>f!=="signer"&&f!=="&signer").map((f,b)=>new Ts.ArgumentABI(`var${b}`,new Kh.TypeTagParser(f,r).parseTypeTag())),w=new Ts.EntryFunctionABI(d.name,ke.ModuleId.fromStr(`${a}::${c}`),"",d.generic_type_params.map((f,b)=>new Ts.TypeArgumentABI(`${b}`)),g);return new Ss([(0,$i.bcsToBytes)(w)],e).build(t,r,s)}At.buildRawTransactionByABI=Zw});var Vh=U(Jo=>{"use strict";h();y();Object.defineProperty(Jo,"__esModule",{value:!0});Jo.MoveFunctionVisibility=void 0;var Yw;(function(n){n.PRIVATE="private",n.PUBLIC="public",n.FRIEND="friend"})(Yw=Jo.MoveFunctionVisibility||(Jo.MoveFunctionVisibility={}))});var zl=U($e=>{"use strict";h();y();var Fh=$e&&$e.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Qw=$e&&$e.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),Jw=$e&&$e.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Fh(e,n,t)},Il=$e&&$e.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&Fh(e,n,t);return Qw(e,n),e};Object.defineProperty($e,"__esModule",{value:!0});$e.MoveTypes=$e.TxnBuilderTypes=$e.BCS=void 0;Jw(Dh(),$e);$e.BCS=Il(An());$e.TxnBuilderTypes=Il(Er());$e.MoveTypes=Il(Vh())});var Ol=U(te=>{"use strict";h();y();Object.defineProperty(te,"__esModule",{value:!0});te.validSignedTransaction=te.signMessage=te.createRawTransactionByABI=te.generateBCSSimulateTransaction=te.generateBCSTransaction=te.claimNFTTokenPayload=te.offerNFTTokenPayloadObject=te.offerNFTTokenPayload=te.createNFTTokenPayload=te.createNFTCollectionPayload=te.transferCoinV2=te.transferCoin=te.burnCoin=te.mintCoin=te.registerCoin=te.transferPayload=te.simulateTransaction=te.createRawTransaction=te.transfer=void 0;var em=kn(),tm=xl(),N=zl(),kh=Er(),nm=An(),Gh=Hf();function rm(n,e,t,r,s,i,o,a){let c=$h(e,t),l=Pl(n.address(),c,r,s,i,o,a);return Xh(n,l)}te.transfer=rm;function Pl(n,e,t,r,s,i,o){return new N.TxnBuilderTypes.RawTransaction(N.TxnBuilderTypes.AccountAddress.fromHex(n),t,e,s,i,o,new N.TxnBuilderTypes.ChainId(r))}te.createRawTransaction=Pl;function sm(n,e,t,r,s,i,o){let a=Pl(n.address(),e,t,r,s,i,o);return Zh(n,a)}te.simulateTransaction=sm;function $h(n,e){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::aptos_account","transfer",[],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n)),N.BCS.bcsSerializeUint64(e)]))}te.transferPayload=$h;function im(n){let e=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","register",[e],[]))}te.registerCoin=im;function om(n,e,t){let r=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","mint",[r],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e)),N.BCS.bcsSerializeUint64(t)]))}te.mintCoin=om;function am(n,e){let t=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::managed_coin","burn",[t],[N.BCS.bcsSerializeUint64(e)]))}te.burnCoin=am;function cm(n,e,t){let r=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::coin","transfer",[r],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e)),N.BCS.bcsSerializeUint64(t)]))}te.transferCoin=cm;function um(n,e,t){let r=new N.TxnBuilderTypes.TypeTagStruct(N.TxnBuilderTypes.StructTag.fromString(n));return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::aptos_account","transfer_coins",[r],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e)),N.BCS.bcsSerializeUint64(t)]))}te.transferCoinV2=um;function Wh(n){let e=new N.BCS.Serializer;return e.serializeU32AsUleb128(n.length),n.forEach(t=>{e.serializeBool(t)}),e.getBytes()}function lm(n,e,t){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token","create_collection_script",[],[N.BCS.bcsSerializeStr(n),N.BCS.bcsSerializeStr(e),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeUint64(9007199254740991),Wh([!1,!1,!1])]))}te.createNFTCollectionPayload=lm;function dm(n,e,t,r,s,i){let a=new N.BCS.Serializer;return a.serializeU32AsUleb128(0),new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token","create_token_script",[],[N.BCS.bcsSerializeStr(e),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeStr(r),N.BCS.bcsSerializeUint64(s),N.BCS.bcsSerializeUint64(9007199254740991),N.BCS.bcsSerializeStr(i),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.address())),N.BCS.bcsSerializeUint64(0),N.BCS.bcsSerializeUint64(0),Wh([!1,!1,!1,!1,!1]),a.getBytes(),a.getBytes(),a.getBytes()]))}te.createNFTTokenPayload=dm;function fm(n,e,t,r,s,i){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token_transfers","offer_script",[],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.hex())),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeStr(r),N.BCS.bcsSerializeUint64(s),N.BCS.bcsSerializeUint64(i)]))}te.offerNFTTokenPayload=fm;function hm(n,e,t){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x1::object","transfer",[kh.StructTag.fromString("0x1::object::ObjectCore")],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.hex())),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),N.BCS.bcsSerializeUint64(t)]))}te.offerNFTTokenPayloadObject=hm;function ym(n,e,t,r,s){return new N.TxnBuilderTypes.TransactionPayloadEntryFunction(N.TxnBuilderTypes.EntryFunction.natural("0x3::token_transfers","claim_script",[],[N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(n.hex())),N.BCS.bcsToBytes(N.TxnBuilderTypes.AccountAddress.fromHex(e.hex())),N.BCS.bcsSerializeStr(t),N.BCS.bcsSerializeStr(r),N.BCS.bcsSerializeUint64(s)]))}te.claimNFTTokenPayload=ym;function Xh(n,e){return new N.TransactionBuilderEd25519(r=>{let s=n.signBuffer(E.Buffer.from(r));return new N.TxnBuilderTypes.Ed25519Signature(s.toUint8Array())},n.pubKey().toUint8Array()).sign(e)}te.generateBCSTransaction=Xh;function Zh(n,e){return new N.TransactionBuilderEd25519(r=>{let s=new Uint8Array(64);return new N.TxnBuilderTypes.Ed25519Signature(s)},n.pubKey().toUint8Array()).sign(e)}te.generateBCSSimulateTransaction=Zh;function gm(n,e,t,r,s,i,o,a){let c={sender:n,sequenceNumber:e,gasUnitPrice:s,maxGasAmount:r,expSecFromNow:i.toString(),chainId:t},l=JSON.parse(o),d=JSON.parse(a);return(0,N.buildRawTransactionByABI)(d,c,l.function,l.type_arguments||l.typeArguments,l.arguments||l.functionArguments)}te.createRawTransactionByABI=gm;async function bm(n,e){let t=new TextEncoder,r=E.Buffer.from(t.encode(n)),i=tm.AptosAccount.fromPrivateKey(em.HexString.ensure(e)).signBuffer(r);return Promise.resolve(i.hex())}te.signMessage=bm;function pm(n,e){let t=kh.SignedTransaction.deserialize(new nm.Deserializer(Gh.base.fromHex(n))),r=t.authenticator,s=r.public_key.value,i=r.signature.value,o=N.TransactionBuilder.getSigningMessage(t.raw_txn);if(!e&&!Gh.signUtil.ed25519.verify(o,i,s))throw Error("signature error");return t}te.validSignedTransaction=pm});var mc=U(Bt=>{"use strict";h();y();Object.defineProperty(Bt,"__esModule",{value:!0});Bt.MAX_U256_BIG_INT=Bt.MAX_U128_BIG_INT=Bt.MAX_U64_BIG_INT=Bt.MAX_U32_NUMBER=Bt.MAX_U16_NUMBER=Bt.MAX_U8_NUMBER=void 0;Bt.MAX_U8_NUMBER=255;Bt.MAX_U16_NUMBER=65535;Bt.MAX_U32_NUMBER=4294967295;Bt.MAX_U64_BIG_INT=18446744073709551615n;Bt.MAX_U128_BIG_INT=340282366920938463463374607431768211455n;Bt.MAX_U256_BIG_INT=115792089237316195423570985008687907853269984665640564039457584007913129639935n});var Qh=U(_c=>{"use strict";h();y();Object.defineProperty(_c,"__esModule",{value:!0});_c.Deserializer=void 0;var Yh=mc(),Nl=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Yh.MAX_U32_NUMBER;){let r=this.deserializeU8();if(e|=BigInt(r&127)<<BigInt(t),(r&128)===0)break;t+=7}if(e>Yh.MAX_U32_NUMBER)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}deserialize(e){return e.deserialize(this)}deserializeVector(e){let t=this.deserializeUleb128AsU32(),r=new Array;for(let s=0;s<t;s+=1)r.push(this.deserialize(e));return r}};_c.Deserializer=Nl});var Bc=U(Ac=>{"use strict";h();y();Object.defineProperty(Ac,"__esModule",{value:!0});Ac.ParsingError=void 0;var ql=class extends Error{constructor(e,t){super(e),this.invalidReason=t}};Ac.ParsingError=ql});var an=U(Es=>{"use strict";h();y();Object.defineProperty(Es,"__esModule",{value:!0});Es.Hex=Es.HexInvalidReason=void 0;var Jh=pt(),Ml=Bc(),Tc;(function(n){n.TOO_SHORT="too_short",n.INVALID_LENGTH="invalid_length",n.INVALID_HEX_CHARS="invalid_hex_chars"})(Tc=Es.HexInvalidReason||(Es.HexInvalidReason={}));var Ur=class{constructor(e){this.data=e}toUint8Array(){return this.data}toStringWithoutPrefix(){return(0,Jh.bytesToHex)(this.data)}toString(){return`0x${this.toStringWithoutPrefix()}`}static fromHexString(e){let t=e;if(t.startsWith("0x")&&(t=t.slice(2)),t.length===0)throw new Ml.ParsingError("Hex string is too short, must be at least 1 char long, excluding the optional leading 0x.",Tc.TOO_SHORT);if(t.length%2!==0)throw new Ml.ParsingError("Hex string must be an even number of hex characters.",Tc.INVALID_LENGTH);try{return new Ur((0,Jh.hexToBytes)(t))}catch(r){throw new Ml.ParsingError(`Hex string contains invalid hex characters: ${r?.message}`,Tc.INVALID_HEX_CHARS)}}static fromHexInput(e){return e instanceof Uint8Array?new Ur(e):Ur.fromHexString(e)}static isValid(e){try{return Ur.fromHexString(e),{valid:!0}}catch(t){return{valid:!1,invalidReason:t?.invalidReason,invalidReasonMessage:t?.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((t,r)=>t===e.data[r])}};Es.Hex=Ur});var Me=U(at=>{"use strict";h();y();var vs=at&&at.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(at,"__esModule",{value:!0});at.validateNumberInRange=at.outOfRangeErrorMessage=at.ensureBoolean=at.Serializer=at.Serializable=void 0;var Sn=mc(),wm=an(),Rl=class{bcsToBytes(){let e=new cn;return this.serialize(e),e.toUint8Array()}bcsToHex(){let e=this.bcsToBytes();return wm.Hex.fromHexInput(e)}};at.Serializable=Rl;var cn=class{constructor(e=64){if(e<=0)throw new Error("Length needs to be greater than 0");this.buffer=new ArrayBuffer(e),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}appendToBuffer(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,r){this.ensureBufferWillHandleSize(t);let s=new DataView(this.buffer,this.offset);e.apply(s,[0,r,!0]),this.offset+=t}serializeStr(e){let t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.appendToBuffer(e)}serializeFixedBytes(e){this.appendToBuffer(e)}serializeBool(e){e0(e);let t=e?1:0;this.appendToBuffer(new Uint8Array([t]))}serializeU8(e){this.appendToBuffer(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let t=BigInt(e)&BigInt(Sn.MAX_U32_NUMBER),r=BigInt(e)>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(r))}serializeU128(e){let t=BigInt(e)&Sn.MAX_U64_BIG_INT,r=BigInt(e)>>BigInt(64);this.serializeU64(t),this.serializeU64(r)}serializeU256(e){let t=BigInt(e)&Sn.MAX_U128_BIG_INT,r=BigInt(e)>>BigInt(128);this.serializeU128(t),this.serializeU128(r)}serializeU32AsUleb128(e){let t=e,r=[];for(;t>>>7!==0;)r.push(t&127|128),t>>>=7;r.push(t),this.appendToBuffer(new Uint8Array(r))}toUint8Array(){return new Uint8Array(this.buffer).slice(0,this.offset)}serialize(e){e.serialize(this)}serializeVector(e){this.serializeU32AsUleb128(e.length),e.forEach(t=>{t.serialize(this)})}};vs([Us(0,Sn.MAX_U8_NUMBER)],cn.prototype,"serializeU8",null);vs([Us(0,Sn.MAX_U16_NUMBER)],cn.prototype,"serializeU16",null);vs([Us(0,Sn.MAX_U32_NUMBER)],cn.prototype,"serializeU32",null);vs([Us(BigInt(0),Sn.MAX_U64_BIG_INT)],cn.prototype,"serializeU64",null);vs([Us(BigInt(0),Sn.MAX_U128_BIG_INT)],cn.prototype,"serializeU128",null);vs([Us(BigInt(0),Sn.MAX_U256_BIG_INT)],cn.prototype,"serializeU256",null);vs([Us(0,Sn.MAX_U32_NUMBER)],cn.prototype,"serializeU32AsUleb128",null);at.Serializer=cn;function e0(n){if(typeof n!="boolean")throw new Error(`${n} is not a boolean value`)}at.ensureBoolean=e0;var mm=(n,e,t)=>`${n} is out of range: [${e}, ${t}]`;at.outOfRangeErrorMessage=mm;function t0(n,e,t){let r=BigInt(n);if(r>BigInt(t)||r<BigInt(e))throw new Error((0,at.outOfRangeErrorMessage)(n,e,t))}at.validateNumberInRange=t0;function Us(n,e){return(t,r,s)=>{let i=s.value;return s.value=function(a){return t0(a,n,e),i.apply(this,[a])},s}}});var Hl=U(xc=>{"use strict";h();y();Object.defineProperty(xc,"__esModule",{value:!0});xc.FixedBytes=void 0;var _m=Me(),Am=an(),ea=class extends _m.Serializable{constructor(e){super(),this.value=Am.Hex.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,t){let r=e.deserializeFixedBytes(t);return new ea(r)}};xc.FixedBytes=ea});var Cl=U(Sc=>{"use strict";h();y();Object.defineProperty(Sc,"__esModule",{value:!0});Sc.EntryFunctionBytes=void 0;var Bm=Me(),n0=Hl(),ta=class extends Bm.Serializable{constructor(e){super(),this.value=new n0.FixedBytes(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,t){let r=n0.FixedBytes.deserialize(e,t);return new ta(r.value)}};Sc.EntryFunctionBytes=ta});var s0=U(r0=>{"use strict";h();y();Object.defineProperty(r0,"__esModule",{value:!0})});var je=U(H=>{"use strict";h();y();var Tm=H&&H.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),xm=H&&H.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Tm(e,n,t)};Object.defineProperty(H,"__esModule",{value:!0});H.DeriveScheme=H.SigningSchemeInput=H.SigningScheme=H.RoleType=H.MoveAbility=H.MoveFunctionVisibility=H.isMultiEd25519Signature=H.isFeePayerSignature=H.isMultiAgentSignature=H.isSecp256k1Signature=H.isEd25519Signature=H.isStateCheckpointTransactionResponse=H.isBlockMetadataTransactionResponse=H.isGenesisTransactionResponse=H.isUserTransactionResponse=H.isPendingTransactionResponse=H.TransactionResponseType=H.AnySignatureVariant=H.AnyPublicKeyVariant=H.AccountAuthenticatorVariant=H.TransactionAuthenticatorVariant=H.TransactionVariants=H.TransactionPayloadVariants=H.ScriptTransactionArgumentVariants=H.TypeTagVariants=H.MimeType=void 0;xm(s0(),H);var Sm;(function(n){n.JSON="application/json",n.BCS="application/x-bcs",n.BCS_SIGNED_TRANSACTION="application/x.aptos.signed_transaction+bcs"})(Sm=H.MimeType||(H.MimeType={}));var Em;(function(n){n[n.Bool=0]="Bool",n[n.U8=1]="U8",n[n.U64=2]="U64",n[n.U128=3]="U128",n[n.Address=4]="Address",n[n.Signer=5]="Signer",n[n.Vector=6]="Vector",n[n.Struct=7]="Struct",n[n.U16=8]="U16",n[n.U32=9]="U32",n[n.U256=10]="U256",n[n.Reference=254]="Reference",n[n.Generic=255]="Generic"})(Em=H.TypeTagVariants||(H.TypeTagVariants={}));var vm;(function(n){n[n.U8=0]="U8",n[n.U64=1]="U64",n[n.U128=2]="U128",n[n.Address=3]="Address",n[n.U8Vector=4]="U8Vector",n[n.Bool=5]="Bool",n[n.U16=6]="U16",n[n.U32=7]="U32",n[n.U256=8]="U256"})(vm=H.ScriptTransactionArgumentVariants||(H.ScriptTransactionArgumentVariants={}));var Um;(function(n){n[n.Script=0]="Script",n[n.EntryFunction=2]="EntryFunction",n[n.Multisig=3]="Multisig"})(Um=H.TransactionPayloadVariants||(H.TransactionPayloadVariants={}));var Im;(function(n){n[n.MultiAgentTransaction=0]="MultiAgentTransaction",n[n.FeePayerTransaction=1]="FeePayerTransaction"})(Im=H.TransactionVariants||(H.TransactionVariants={}));var zm;(function(n){n[n.Ed25519=0]="Ed25519",n[n.MultiEd25519=1]="MultiEd25519",n[n.MultiAgent=2]="MultiAgent",n[n.FeePayer=3]="FeePayer",n[n.SingleSender=4]="SingleSender"})(zm=H.TransactionAuthenticatorVariant||(H.TransactionAuthenticatorVariant={}));var Pm;(function(n){n[n.Ed25519=0]="Ed25519",n[n.MultiEd25519=1]="MultiEd25519",n[n.SingleKey=2]="SingleKey",n[n.MultiKey=3]="MultiKey"})(Pm=H.AccountAuthenticatorVariant||(H.AccountAuthenticatorVariant={}));var Om;(function(n){n[n.Ed25519=0]="Ed25519",n[n.Secp256k1=1]="Secp256k1"})(Om=H.AnyPublicKeyVariant||(H.AnyPublicKeyVariant={}));var Nm;(function(n){n[n.Ed25519=0]="Ed25519",n[n.Secp256k1=1]="Secp256k1"})(Nm=H.AnySignatureVariant||(H.AnySignatureVariant={}));var Wi;(function(n){n.Pending="pending_transaction",n.User="user_transaction",n.Genesis="genesis_transaction",n.BlockMetadata="block_metadata_transaction",n.StateCheckpoint="state_checkpoint_transaction"})(Wi=H.TransactionResponseType||(H.TransactionResponseType={}));function qm(n){return n.type===Wi.Pending}H.isPendingTransactionResponse=qm;function Mm(n){return n.type===Wi.User}H.isUserTransactionResponse=Mm;function Rm(n){return n.type===Wi.Genesis}H.isGenesisTransactionResponse=Rm;function Hm(n){return n.type===Wi.BlockMetadata}H.isBlockMetadataTransactionResponse=Hm;function Cm(n){return n.type===Wi.StateCheckpoint}H.isStateCheckpointTransactionResponse=Cm;function Lm(n){return"signature"in n&&n.signature==="ed25519_signature"}H.isEd25519Signature=Lm;function Km(n){return"signature"in n&&n.signature==="secp256k1_ecdsa_signature"}H.isSecp256k1Signature=Km;function jm(n){return n.type==="multi_agent_signature"}H.isMultiAgentSignature=jm;function Dm(n){return n.type==="fee_payer_signature"}H.isFeePayerSignature=Dm;function Vm(n){return n.type==="multi_ed25519_signature"}H.isMultiEd25519Signature=Vm;var Fm;(function(n){n.PRIVATE="private",n.PUBLIC="public",n.FRIEND="friend"})(Fm=H.MoveFunctionVisibility||(H.MoveFunctionVisibility={}));var Gm;(function(n){n.STORE="store",n.DROP="drop",n.KEY="key",n.COPY="copy"})(Gm=H.MoveAbility||(H.MoveAbility={}));var km;(function(n){n.VALIDATOR="validator",n.FULL_NODE="full_node"})(km=H.RoleType||(H.RoleType={}));var $m;(function(n){n[n.Ed25519=0]="Ed25519",n[n.MultiEd25519=1]="MultiEd25519",n[n.SingleKey=2]="SingleKey",n[n.MultiKey=3]="MultiKey"})($m=H.SigningScheme||(H.SigningScheme={}));var Wm;(function(n){n[n.Ed25519=0]="Ed25519",n[n.Secp256k1Ecdsa=2]="Secp256k1Ecdsa"})(Wm=H.SigningSchemeInput||(H.SigningSchemeInput={}));var Xm;(function(n){n[n.DeriveAuid=251]="DeriveAuid",n[n.DeriveObjectAddressFromObject=252]="DeriveObjectAddressFromObject",n[n.DeriveObjectAddressFromGuid=253]="DeriveObjectAddressFromGuid",n[n.DeriveObjectAddressFromSeed=254]="DeriveObjectAddressFromSeed",n[n.DeriveResourceAccountAddress=255]="DeriveResourceAccountAddress"})(Xm=H.DeriveScheme||(H.DeriveScheme={}))});var Ec=U(Qe=>{"use strict";h();y();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.U256=Qe.U128=Qe.U64=Qe.U32=Qe.U16=Qe.U8=Qe.Bool=void 0;var Xi=mc(),Tt=Me(),Is=je(),na=class extends Tt.Serializable{constructor(e){super(),(0,Tt.ensureBoolean)(e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.Bool),e.serialize(this)}static deserialize(e){return new na(e.deserializeBool())}};Qe.Bool=na;var ra=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,0,Xi.MAX_U8_NUMBER),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.U8),e.serialize(this)}static deserialize(e){return new ra(e.deserializeU8())}};Qe.U8=ra;var sa=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,0,Xi.MAX_U16_NUMBER),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.U16),e.serialize(this)}static deserialize(e){return new sa(e.deserializeU16())}};Qe.U16=sa;var ia=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,0,Xi.MAX_U32_NUMBER),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.U32),e.serialize(this)}static deserialize(e){return new ia(e.deserializeU32())}};Qe.U32=ia;var oa=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,BigInt(0),Xi.MAX_U64_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.U64),e.serialize(this)}static deserialize(e){return new oa(e.deserializeU64())}};Qe.U64=oa;var aa=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,BigInt(0),Xi.MAX_U128_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.U128),e.serialize(this)}static deserialize(e){return new aa(e.deserializeU128())}};Qe.U128=aa;var ca=class extends Tt.Serializable{constructor(e){super(),(0,Tt.validateNumberInRange)(e,BigInt(0),Xi.MAX_U256_BIG_INT),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(Is.ScriptTransactionArgumentVariants.U256),e.serialize(this)}static deserialize(e){return new ca(e.deserializeU256())}};Qe.U256=ca});var Kl=U(Ir=>{"use strict";h();y();Object.defineProperty(Ir,"__esModule",{value:!0});Ir.MoveOption=Ir.MoveString=Ir.MoveVector=void 0;var ct=Ec(),Ll=Me(),Zm=je(),Ym=an(),We=class extends Ll.Serializable{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){if(!(this.values[0]instanceof ct.U8)&&this.values[0]!==void 0)throw new Error("Script function arguments only accept u8 vectors");e.serializeU32AsUleb128(Zm.ScriptTransactionArgumentVariants.U8Vector),e.serialize(this)}static U8(e){let t;if(Array.isArray(e)&&typeof e[0]=="number")t=e;else if(typeof e=="string"){let r=Ym.Hex.fromHexInput(e);t=Array.from(r.toUint8Array())}else if(e instanceof Uint8Array)t=Array.from(e);else throw new Error("Invalid input type");return new We(t.map(r=>new ct.U8(r)))}static U16(e){return new We(e.map(t=>new ct.U16(t)))}static U32(e){return new We(e.map(t=>new ct.U32(t)))}static U64(e){return new We(e.map(t=>new ct.U64(t)))}static U128(e){return new We(e.map(t=>new ct.U128(t)))}static U256(e){return new We(e.map(t=>new ct.U256(t)))}static Bool(e){return new We(e.map(t=>new ct.Bool(t)))}static MoveString(e){return new We(e.map(t=>new zs(t)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,t){let r=e.deserializeUleb128AsU32(),s=new Array;for(let i=0;i<r;i+=1)s.push(t.deserialize(e));return new We(s)}};Ir.MoveVector=We;var zs=class extends Ll.Serializable{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){let t=this.bcsToBytes().slice(1);We.U8(t).serializeForScriptFunction(e)}static deserialize(e){return new zs(e.deserializeStr())}};Ir.MoveString=zs;var qt=class extends Ll.Serializable{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new We([e]):this.vec=new We([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new qt(e!=null?new ct.U8(e):void 0)}static U16(e){return new qt(e!=null?new ct.U16(e):void 0)}static U32(e){return new qt(e!=null?new ct.U32(e):void 0)}static U64(e){return new qt(e!=null?new ct.U64(e):void 0)}static U128(e){return new qt(e!=null?new ct.U128(e):void 0)}static U256(e){return new qt(e!=null?new ct.U256(e):void 0)}static Bool(e){return new qt(e!=null?new ct.Bool(e):void 0)}static MoveString(e){return new qt(e!=null?new zs(e):void 0)}static deserialize(e,t){let r=We.deserialize(e,t);return new qt(r.values[0])}};Ir.MoveOption=qt});var Yt=U(Zt=>{"use strict";h();y();var Qm=Zt&&Zt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Zi=Zt&&Zt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Qm(e,n,t)};Object.defineProperty(Zt,"__esModule",{value:!0});Zi(Qh(),Zt);Zi(Me(),Zt);Zi(Cl(),Zt);Zi(Hl(),Zt);Zi(Ec(),Zt);Zi(Kl(),Zt)});var un=U(le=>{"use strict";h();y();Object.defineProperty(le,"__esModule",{value:!0});le.notImplemented=le.bitMask=void 0;le.isBytes=Uc;le.abytes=Ic;le.abool=e1;le.bytesToHex=Fl;le.numberToHexUnpadded=a0;le.hexToNumber=Gl;le.hexToBytes=zc;le.bytesToNumberBE=n1;le.bytesToNumberLE=r1;le.numberToBytesBE=c0;le.numberToBytesLE=s1;le.numberToVarBytesBE=i1;le.ensureBytes=o1;le.concatBytes=u0;le.equalBytes=a1;le.utf8ToBytes=c1;le.inRange=l0;le.aInRange=u1;le.bitLen=l1;le.bitGet=d1;le.bitSet=f1;le.createHmacDrbg=y1;le.validateObject=b1;le.memoized=w1;var Vl=BigInt(0),vc=BigInt(1),Jm=BigInt(2);function Uc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Ic(n){if(!Uc(n))throw new Error("Uint8Array expected")}function e1(n,e){if(typeof e!="boolean")throw new Error(`${n} must be valid boolean, got "${e}".`)}var t1=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Fl(n){Ic(n);let e="";for(let t=0;t<n.length;t++)e+=t1[n[t]];return e}function a0(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function Gl(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}var Xn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i0(n){if(n>=Xn._0&&n<=Xn._9)return n-Xn._0;if(n>=Xn._A&&n<=Xn._F)return n-(Xn._A-10);if(n>=Xn._a&&n<=Xn._f)return n-(Xn._a-10)}function zc(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){let o=i0(n.charCodeAt(i)),a=i0(n.charCodeAt(i+1));if(o===void 0||a===void 0){let c=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function n1(n){return Gl(Fl(n))}function r1(n){return Ic(n),Gl(Fl(Uint8Array.from(n).reverse()))}function c0(n,e){return zc(n.toString(16).padStart(e*2,"0"))}function s1(n,e){return c0(n,e).reverse()}function i1(n){return zc(a0(n))}function o1(n,e,t){let r;if(typeof e=="string")try{r=zc(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Uc(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function u0(...n){let e=0;for(let r=0;r<n.length;r++){let s=n[r];Ic(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){let i=n[r];t.set(i,s),s+=i.length}return t}function a1(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function c1(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}var jl=n=>typeof n=="bigint"&&Vl<=n;function l0(n,e,t){return jl(n)&&jl(e)&&jl(t)&&e<=n&&n<t}function u1(n,e,t,r){if(!l0(e,t,r))throw new Error(`expected valid ${n}: ${t} <= n < ${r}, got ${typeof e} ${e}`)}function l1(n){let e;for(e=0;n>Vl;n>>=vc,e+=1);return e}function d1(n,e){return n>>BigInt(e)&vc}function f1(n,e,t){return n|(t?vc:Vl)<<BigInt(e)}var h1=n=>(Jm<<BigInt(n-1))-vc;le.bitMask=h1;var Dl=n=>new Uint8Array(n),o0=n=>Uint8Array.from(n);function y1(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Dl(n),s=Dl(n),i=0,o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>t(s,r,...u),c=(u=Dl())=>{s=a(o0([0]),u),r=a(),u.length!==0&&(s=a(o0([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,g=[];for(;u<e;){r=a();let w=r.slice();g.push(w),u+=r.length}return u0(...g)};return(u,g)=>{o(),c(u);let w;for(;!(w=g(l()));)c();return o(),w}}var g1={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Uc(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function b1(n,e,t={}){let r=(s,i,o)=>{let a=g1[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=n[s];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(let[s,i]of Object.entries(e))r(s,i,!1);for(let[s,i]of Object.entries(t))r(s,i,!0);return n}var p1=()=>{throw new Error("not implemented")};le.notImplemented=p1;function w1(n){let e=new WeakMap;return(t,...r)=>{let s=e.get(t);if(s!==void 0)return s;let i=n(t,...r);return e.set(t,i),i}}});var Pr=U(_e=>{"use strict";h();y();Object.defineProperty(_e,"__esModule",{value:!0});_e.isNegativeLE=void 0;_e.mod=Mt;_e.pow=h0;_e.pow2=B1;_e.invert=Pc;_e.tonelliShanks=y0;_e.FpSqrt=g0;_e.validateField=S1;_e.FpPow=b0;_e.FpInvertBatch=p0;_e.FpDiv=E1;_e.FpLegendre=w0;_e.FpIsSquare=v1;_e.nLength=$l;_e.Field=U1;_e.FpSqrtOdd=I1;_e.FpSqrtEven=z1;_e.hashToPrivateScalar=P1;_e.getFieldBytesLength=Wl;_e.getMinHashLength=m0;_e.mapHashToField=O1;var Rt=un(),Re=BigInt(0),be=BigInt(1),zr=BigInt(2),m1=BigInt(3),kl=BigInt(4),d0=BigInt(5),f0=BigInt(8),_1=BigInt(9),A1=BigInt(16);function Mt(n,e){let t=n%e;return t>=Re?t:e+t}function h0(n,e,t){if(t<=Re||e<Re)throw new Error("Expected power/modulo > 0");if(t===be)return Re;let r=be;for(;e>Re;)e&be&&(r=r*n%t),n=n*n%t,e>>=be;return r}function B1(n,e,t){let r=n;for(;e-- >Re;)r*=r,r%=t;return r}function Pc(n,e){if(n===Re||e<=Re)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Mt(n,e),r=e,s=Re,i=be,o=be,a=Re;for(;t!==Re;){let l=r/t,d=r%t,u=s-o*l,g=i-a*l;r=t,t=d,s=o,i=a,o=u,a=g}if(r!==be)throw new Error("invert: does not exist");return Mt(s,e)}function y0(n){let e=(n-be)/zr,t,r,s;for(t=n-be,r=0;t%zr===Re;t/=zr,r++);for(s=zr;s<n&&h0(s,e,n)!==n-be;s++);if(r===1){let o=(n+be)/kl;return function(c,l){let d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}let i=(t+be)/zr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,d=a.pow(a.mul(a.ONE,s),t),u=a.pow(c,i),g=a.pow(c,t);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let w=1;for(let f=a.sqr(g);w<l&&!a.eql(f,a.ONE);w++)f=a.sqr(f);let m=a.pow(d,be<<BigInt(l-w-1));d=a.sqr(m),u=a.mul(u,m),g=a.mul(g,d),l=w}return u}}function g0(n){if(n%kl===m1){let e=(n+be)/kl;return function(r,s){let i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%f0===d0){let e=(n-d0)/f0;return function(r,s){let i=r.mul(s,zr),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,zr),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return n%A1,y0(n)}var T1=(n,e)=>(Mt(n,e)&be)===be;_e.isNegativeLE=T1;var x1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function S1(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=x1.reduce((r,s)=>(r[s]="function",r),e);return(0,Rt.validateObject)(n,t)}function b0(n,e,t){if(t<Re)throw new Error("Expected power > 0");if(t===Re)return n.ONE;if(t===be)return e;let r=n.ONE,s=e;for(;t>Re;)t&be&&(r=n.mul(r,s)),s=n.sqr(s),t>>=be;return r}function p0(n,e){let t=new Array(e.length),r=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),s),t}function E1(n,e,t){return n.mul(e,typeof t=="bigint"?Pc(t,n.ORDER):n.inv(t))}function w0(n){let e=(n-be)/zr;return(t,r)=>t.pow(r,e)}function v1(n){let e=w0(n.ORDER);return t=>{let r=e(n,t);return n.eql(r,n.ZERO)||n.eql(r,n.ONE)}}function $l(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function U1(n,e,t=!1,r={}){if(n<=Re)throw new Error(`Expected Field ORDER > 0, got ${n}`);let{nBitLength:s,nByteLength:i}=$l(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=g0(n),a=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:(0,Rt.bitMask)(s),ZERO:Re,ONE:be,create:c=>Mt(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Re<=c&&c<n},is0:c=>c===Re,isOdd:c=>(c&be)===be,neg:c=>Mt(-c,n),eql:(c,l)=>c===l,sqr:c=>Mt(c*c,n),add:(c,l)=>Mt(c+l,n),sub:(c,l)=>Mt(c-l,n),mul:(c,l)=>Mt(c*l,n),pow:(c,l)=>b0(a,c,l),div:(c,l)=>Mt(c*Pc(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Pc(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>p0(a,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>t?(0,Rt.numberToBytesLE)(c,i):(0,Rt.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?(0,Rt.bytesToNumberLE)(c):(0,Rt.bytesToNumberBE)(c)}});return Object.freeze(a)}function I1(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?t:n.neg(t)}function z1(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function P1(n,e,t=!1){n=(0,Rt.ensureBytes)("privateHash",n);let r=n.length,s=$l(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);let i=t?(0,Rt.bytesToNumberLE)(n):(0,Rt.bytesToNumberBE)(n);return Mt(i,e-be)+be}function Wl(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function m0(n){let e=Wl(n);return e+Math.ceil(e/2)}function O1(n,e,t=!1){let r=n.length,s=Wl(e),i=m0(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let o=t?(0,Rt.bytesToNumberBE)(n):(0,Rt.bytesToNumberLE)(n),a=Mt(o,e-be)+be;return t?(0,Rt.numberToBytesLE)(a,s):(0,Rt.numberToBytesBE)(a,s)}});var Yl=U(Oc=>{"use strict";h();y();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.wNAF=M1;Oc.validateBasic=R1;var _0=Pr(),N1=un(),q1=BigInt(0),Xl=BigInt(1),Zl=new WeakMap,A0=new WeakMap;function M1(n,e){let t=(i,o)=>{let a=o.negate();return i?a:o},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error(`Wrong window size=${i}, should be [1..${e}]`)},s=i=>{r(i);let o=Math.ceil(e/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:t,unsafeLadder(i,o){let a=n.ZERO,c=i;for(;o>q1;)o&Xl&&(a=a.add(c)),c=c.double(),o>>=Xl;return a},precomputeWindow(i,o){let{windows:a,windowSize:c}=s(o),l=[],d=i,u=d;for(let g=0;g<a;g++){u=d,l.push(u);for(let w=1;w<c;w++)u=u.add(d),l.push(u);d=u.double()}return l},wNAF(i,o,a){let{windows:c,windowSize:l}=s(i),d=n.ZERO,u=n.BASE,g=BigInt(2**i-1),w=2**i,m=BigInt(i);for(let f=0;f<c;f++){let b=f*l,T=Number(a&g);a>>=m,T>l&&(T-=w,a+=Xl);let p=b,_=b+Math.abs(T)-1,S=f%2!==0,v=T<0;T===0?u=u.add(t(S,o[p])):d=d.add(t(v,o[_]))}return{p:d,f:u}},wNAFCached(i,o,a){let c=A0.get(i)||1,l=Zl.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&Zl.set(i,a(l))),this.wNAF(c,l,o)},setWindowSize(i,o){r(o),A0.set(i,o),Zl.delete(i)}}}function R1(n){return(0,_0.validateField)(n.Fp),(0,N1.validateObject)(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,_0.nLength)(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}});var T0=U(Ql=>{"use strict";h();y();Object.defineProperty(Ql,"__esModule",{value:!0});Ql.twistedEdwards=j1;var B0=Yl(),H1=Pr(),St=un(),Ht=un(),ln=BigInt(0),xt=BigInt(1),Nc=BigInt(2),C1=BigInt(8),L1={zip215:!0};function K1(n){let e=(0,B0.validateBasic)(n);return St.validateObject(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function j1(n){let e=K1(n),{Fp:t,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Nc<<BigInt(a*8)-xt,d=t.create,u=e.uvRatio||((A,B)=>{try{return{isValid:!0,value:t.sqrt(A*t.inv(B))}}catch{return{isValid:!1,value:ln}}}),g=e.adjustScalarBytes||(A=>A),w=e.domain||((A,B,P)=>{if((0,Ht.abool)("phflag",P),B.length||P)throw new Error("Contexts/pre-hash are not supported");return A});function m(A,B){St.aInRange("coordinate "+A,B,ln,l)}function f(A){if(!(A instanceof p))throw new Error("ExtendedPoint expected")}let b=(0,Ht.memoized)((A,B)=>{let{ex:P,ey:O,ez:q}=A,K=A.is0();B==null&&(B=K?C1:t.inv(q));let V=d(P*B),k=d(O*B),G=d(q*B);if(K)return{x:ln,y:xt};if(G!==xt)throw new Error("invZ was invalid");return{x:V,y:k}}),T=(0,Ht.memoized)(A=>{let{a:B,d:P}=e;if(A.is0())throw new Error("bad point: ZERO");let{ex:O,ey:q,ez:K,et:V}=A,k=d(O*O),G=d(q*q),W=d(K*K),ie=d(W*W),he=d(k*B),Be=d(W*d(he+G)),Ee=d(ie+d(P*d(k*G)));if(Be!==Ee)throw new Error("bad point: equation left != right (1)");let ge=d(O*q),Le=d(K*V);if(ge!==Le)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(B,P,O,q){this.ex=B,this.ey=P,this.ez=O,this.et=q,m("x",B),m("y",P),m("z",O),m("t",q),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(B){if(B instanceof p)throw new Error("extended point not allowed");let{x:P,y:O}=B||{};return m("x",P),m("y",O),new p(P,O,xt,d(P*O))}static normalizeZ(B){let P=t.invertBatch(B.map(O=>O.ez));return B.map((O,q)=>O.toAffine(P[q])).map(p.fromAffine)}_setWindowSize(B){v.setWindowSize(this,B)}assertValidity(){T(this)}equals(B){f(B);let{ex:P,ey:O,ez:q}=this,{ex:K,ey:V,ez:k}=B,G=d(P*k),W=d(K*q),ie=d(O*k),he=d(V*q);return G===W&&ie===he}is0(){return this.equals(p.ZERO)}negate(){return new p(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){let{a:B}=e,{ex:P,ey:O,ez:q}=this,K=d(P*P),V=d(O*O),k=d(Nc*d(q*q)),G=d(B*K),W=P+O,ie=d(d(W*W)-K-V),he=G+V,Be=he-k,Ee=G-V,ge=d(ie*Be),Le=d(he*Ee),ze=d(ie*Ee),ve=d(Be*he);return new p(ge,Le,ve,ze)}add(B){f(B);let{a:P,d:O}=e,{ex:q,ey:K,ez:V,et:k}=this,{ex:G,ey:W,ez:ie,et:he}=B;if(P===BigInt(-1)){let If=d((K-q)*(W+G)),zf=d((K+q)*(W-G)),Wu=d(zf-If);if(Wu===ln)return this.double();let Pf=d(V*Nc*he),Of=d(k*Nc*ie),Nf=Of+Pf,qf=zf+If,Mf=Of-Pf,Ub=d(Nf*Wu),Ib=d(qf*Mf),zb=d(Nf*Mf),Pb=d(Wu*qf);return new p(Ub,Ib,Pb,zb)}let Be=d(q*G),Ee=d(K*W),ge=d(k*O*he),Le=d(V*ie),ze=d((q+K)*(G+W)-Be-Ee),ve=Le-ge,bt=Le+ge,bn=d(Ee-P*Be),es=d(ze*ve),Ka=d(bt*bn),Eb=d(ze*bn),vb=d(ve*bt);return new p(es,Ka,vb,Eb)}subtract(B){return this.add(B.negate())}wNAF(B){return v.wNAFCached(this,B,p.normalizeZ)}multiply(B){let P=B;St.aInRange("scalar",P,xt,r);let{p:O,f:q}=this.wNAF(P);return p.normalizeZ([O,q])[0]}multiplyUnsafe(B){let P=B;return St.aInRange("scalar",P,ln,r),P===ln?S:this.equals(S)||P===xt?this:this.equals(_)?this.wNAF(P).p:v.unsafeLadder(this,P)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return v.unsafeLadder(this,r).is0()}toAffine(B){return b(this,B)}clearCofactor(){let{h:B}=e;return B===xt?this:this.multiplyUnsafe(B)}static fromHex(B,P=!1){let{d:O,a:q}=e,K=t.BYTES;B=(0,Ht.ensureBytes)("pointHex",B,K),(0,Ht.abool)("zip215",P);let V=B.slice(),k=B[K-1];V[K-1]=k&-129;let G=St.bytesToNumberLE(V),W=P?l:t.ORDER;St.aInRange("pointHex.y",G,ln,W);let ie=d(G*G),he=d(ie-xt),Be=d(O*ie-q),{isValid:Ee,value:ge}=u(he,Be);if(!Ee)throw new Error("Point.fromHex: invalid y coordinate");let Le=(ge&xt)===xt,ze=(k&128)!==0;if(!P&&ge===ln&&ze)throw new Error("Point.fromHex: x=0 and x_0=1");return ze!==Le&&(ge=d(-ge)),p.fromAffine({x:ge,y:G})}static fromPrivateKey(B){return I(B).point}toRawBytes(){let{x:B,y:P}=this.toAffine(),O=St.numberToBytesLE(P,t.BYTES);return O[O.length-1]|=B&xt?128:0,O}toHex(){return St.bytesToHex(this.toRawBytes())}}p.BASE=new p(e.Gx,e.Gy,xt,d(e.Gx*e.Gy)),p.ZERO=new p(ln,xt,xt,ln);let{BASE:_,ZERO:S}=p,v=(0,B0.wNAF)(p,a*8);function x(A){return(0,H1.mod)(A,r)}function z(A){return x(St.bytesToNumberLE(A))}function I(A){let B=a;A=(0,Ht.ensureBytes)("private key",A,B);let P=(0,Ht.ensureBytes)("hashed private key",i(A),2*B),O=g(P.slice(0,B)),q=P.slice(B,2*B),K=z(O),V=_.multiply(K),k=V.toRawBytes();return{head:O,prefix:q,scalar:K,point:V,pointBytes:k}}function j(A){return I(A).pointBytes}function L(A=new Uint8Array,...B){let P=St.concatBytes(...B);return z(i(w(P,(0,Ht.ensureBytes)("context",A),!!s)))}function M(A,B,P={}){A=(0,Ht.ensureBytes)("message",A),s&&(A=s(A));let{prefix:O,scalar:q,pointBytes:K}=I(B),V=L(P.context,O,A),k=_.multiply(V).toRawBytes(),G=L(P.context,k,K,A),W=x(V+G*q);St.aInRange("signature.s",W,ln,r);let ie=St.concatBytes(k,St.numberToBytesLE(W,t.BYTES));return(0,Ht.ensureBytes)("result",ie,a*2)}let Y=L1;function Q(A,B,P,O=Y){let{context:q,zip215:K}=O,V=t.BYTES;A=(0,Ht.ensureBytes)("signature",A,2*V),B=(0,Ht.ensureBytes)("message",B),K!==void 0&&(0,Ht.abool)("zip215",K),s&&(B=s(B));let k=St.bytesToNumberLE(A.slice(V,2*V)),G,W,ie;try{G=p.fromHex(P,K),W=p.fromHex(A.slice(0,V),K),ie=_.multiplyUnsafe(k)}catch{return!1}if(!K&&G.isSmallOrder())return!1;let he=L(q,W.toRawBytes(),G.toRawBytes(),B);return W.add(G.multiplyUnsafe(he)).subtract(ie).clearCofactor().equals(p.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:M,verify:Q,ExtendedPoint:p,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(t.BYTES),precompute(A=8,B=p.BASE){return B._setWindowSize(A),B.multiply(BigInt(3)),B}}}}});var td=U(Ps=>{"use strict";h();y();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.expand_message_xmd=x0;Ps.expand_message_xof=S0;Ps.hash_to_field=Jl;Ps.isogenyMap=G1;Ps.createHasher=k1;var D1=Pr(),Je=un(),V1=Je.bytesToNumberBE;function Or(n,e){if(n<0||n>=1<<8*e)throw new Error(`bad I2OSP call: value=${n} length=${e}`);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=n&255,n>>>=8;return new Uint8Array(t)}function F1(n,e){let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n[r]^e[r];return t}function ed(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function x0(n,e,t,r){(0,Je.abytes)(n),(0,Je.abytes)(e),ed(t),e.length>255&&(e=r((0,Je.concatBytes)((0,Je.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:i}=r,o=Math.ceil(t/s);if(o>255)throw new Error("Invalid xmd length");let a=(0,Je.concatBytes)(e,Or(e.length,1)),c=Or(0,i),l=Or(t,2),d=new Array(o),u=r((0,Je.concatBytes)(c,n,l,Or(0,1),a));d[0]=r((0,Je.concatBytes)(u,Or(1,1),a));for(let w=1;w<=o;w++){let m=[F1(u,d[w-1]),Or(w+1,1),a];d[w]=r((0,Je.concatBytes)(...m))}return(0,Je.concatBytes)(...d).slice(0,t)}function S0(n,e,t,r,s){if((0,Je.abytes)(n),(0,Je.abytes)(e),ed(t),e.length>255){let i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update((0,Je.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(n).update(Or(t,2)).update(e).update(Or(e.length,1)).digest()}function Jl(n,e,t){(0,Je.validateObject)(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:s,m:i,hash:o,expand:a,DST:c}=t;(0,Je.abytes)(n),ed(e);let l=typeof c=="string"?(0,Je.utf8ToBytes)(c):c,d=r.toString(2).length,u=Math.ceil((d+s)/8),g=e*i*u,w;if(a==="xmd")w=x0(n,l,g,o);else if(a==="xof")w=S0(n,l,g,s,o);else if(a==="_internal_pass")w=n;else throw new Error('expand must be "xmd" or "xof"');let m=new Array(e);for(let f=0;f<e;f++){let b=new Array(i);for(let T=0;T<i;T++){let p=u*(T+f*i),_=w.subarray(p,p+u);b[T]=(0,D1.mod)(V1(_),r)}m[f]=b}return m}function G1(n,e){let t=e.map(r=>Array.from(r).reverse());return(r,s)=>{let[i,o,a,c]=t.map(l=>l.reduce((d,u)=>n.add(n.mul(d,r),u)));return r=n.div(i,o),s=n.mul(s,n.div(a,c)),{x:r,y:s}}}function k1(n,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){let i=Jl(r,2,{...t,DST:t.DST,...s}),o=n.fromAffine(e(i[0])),a=n.fromAffine(e(i[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){let i=Jl(r,1,{...t,DST:t.encodeDST,...s}),o=n.fromAffine(e(i[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);let s=n.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}});var v0=U(rd=>{"use strict";h();y();Object.defineProperty(rd,"__esModule",{value:!0});rd.montgomery=W1;var E0=Pr(),Nr=un(),Yi=BigInt(0),nd=BigInt(1);function $1(n){return(0,Nr.validateObject)(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}function W1(n){let e=$1(n),{P:t}=e,r=p=>(0,E0.mod)(p,t),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(p=>p),c=e.powPminus2||(p=>(0,E0.pow)(p,t-BigInt(2),t));function l(p,_,S){let v=r(p*(_-S));return _=r(_-v),S=r(S+v),[_,S]}let d=(e.a-BigInt(2))/BigInt(4);function u(p,_){(0,Nr.aInRange)("u",p,Yi,t),(0,Nr.aInRange)("scalar",_,Yi,t);let S=_,v=p,x=nd,z=Yi,I=p,j=nd,L=Yi,M;for(let Q=BigInt(s-1);Q>=Yi;Q--){let R=S>>Q&nd;L^=R,M=l(L,x,I),x=M[0],I=M[1],M=l(L,z,j),z=M[0],j=M[1],L=R;let A=x+z,B=r(A*A),P=x-z,O=r(P*P),q=B-O,K=I+j,V=I-j,k=r(V*A),G=r(K*P),W=k+G,ie=k-G;I=r(W*W),j=r(v*r(ie*ie)),x=r(B*O),z=r(q*(B+r(d*q)))}M=l(L,x,I),x=M[0],I=M[1],M=l(L,z,j),z=M[0],j=M[1];let Y=c(z);return r(x*Y)}function g(p){return(0,Nr.numberToBytesLE)(r(p),i)}function w(p){let _=(0,Nr.ensureBytes)("u coordinate",p,i);return o===32&&(_[31]&=127),(0,Nr.bytesToNumberLE)(_)}function m(p){let _=(0,Nr.ensureBytes)("scalar",p),S=_.length;if(S!==i&&S!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${S}`);return(0,Nr.bytesToNumberLE)(a(_))}function f(p,_){let S=w(_),v=m(p),x=u(S,v);if(x===Yi)throw new Error("Invalid private or public key received");return g(x)}let b=g(e.Gu);function T(p){return f(p,b)}return{scalarMult:f,scalarMultBase:T,getSharedSecret:(p,_)=>f(p,_),getPublicKey:p=>T(p),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}});var L0=U(X=>{"use strict";h();y();Object.defineProperty(X,"__esModule",{value:!0});X.hash_to_ristretto255=X.hashToRistretto255=X.RistrettoPoint=X.encodeToCurve=X.hashToCurve=X.edwardsToMontgomery=X.x25519=X.ed25519ph=X.ed25519ctx=X.ed25519=X.ED25519_TORSION_SUBGROUP=void 0;X.edwardsToMontgomeryPub=H0;X.edwardsToMontgomeryPriv=Y1;var Mc=Go(),ua=pt(),cd=T0(),P0=td(),de=Pr(),X1=v0(),Os=un(),la=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),od=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Z1=BigInt(0),En=BigInt(1),qc=BigInt(2),O0=BigInt(3),N0=BigInt(5),ud=BigInt(8);function q0(n){let e=BigInt(10),t=BigInt(20),r=BigInt(40),s=BigInt(80),i=la,a=n*n%i*n%i,c=(0,de.pow2)(a,qc,i)*a%i,l=(0,de.pow2)(c,En,i)*n%i,d=(0,de.pow2)(l,N0,i)*l%i,u=(0,de.pow2)(d,e,i)*d%i,g=(0,de.pow2)(u,t,i)*u%i,w=(0,de.pow2)(g,r,i)*g%i,m=(0,de.pow2)(w,s,i)*w%i,f=(0,de.pow2)(m,s,i)*w%i,b=(0,de.pow2)(f,e,i)*d%i;return{pow_p_5_8:(0,de.pow2)(b,qc,i)*n%i,b2:a}}function M0(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function ld(n,e){let t=la,r=(0,de.mod)(e*e*e,t),s=(0,de.mod)(r*r*e,t),i=q0(n*s).pow_p_5_8,o=(0,de.mod)(n*r*i,t),a=(0,de.mod)(e*o*o,t),c=o,l=(0,de.mod)(o*od,t),d=a===n,u=a===(0,de.mod)(-n,t),g=a===(0,de.mod)(-n*od,t);return d&&(o=c),(u||g)&&(o=l),(0,de.isNegativeLE)(o,t)&&(o=(0,de.mod)(-o,t)),{isValid:d||u,value:o}}X.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var C=(()=>(0,de.Field)(la,void 0,!0))(),da=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:C,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ud,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Mc.sha512,randomBytes:ua.randomBytes,adjustScalarBytes:M0,uvRatio:ld}))();X.ed25519=(()=>(0,cd.twistedEdwards)(da))();function R0(n,e,t){if(e.length>255)throw new Error("Context is too big");return(0,ua.concatBytes)((0,ua.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([t?1:0,e.length]),e,n)}X.ed25519ctx=(()=>(0,cd.twistedEdwards)({...da,domain:R0}))();X.ed25519ph=(()=>(0,cd.twistedEdwards)(Object.assign({},da,{domain:R0,prehash:Mc.sha512})))();X.x25519=(()=>(0,X1.montgomery)({P:la,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{let e=la,{pow_p_5_8:t,b2:r}=q0(n);return(0,de.mod)((0,de.pow2)(t,O0,e)*r,e)},adjustScalarBytes:M0,randomBytes:ua.randomBytes}))();function H0(n){let{y:e}=X.ed25519.ExtendedPoint.fromHex(n),t=BigInt(1);return C.toBytes(C.create((t+e)*C.inv(t-e)))}X.edwardsToMontgomery=H0;function Y1(n){let e=da.hash(n.subarray(0,32));return da.adjustScalarBytes(e).subarray(0,32)}var Q1=(()=>(C.ORDER+O0)/ud)(),J1=(()=>C.pow(qc,Q1))(),U0=(()=>C.sqrt(C.neg(C.ONE)))();function e2(n){let e=(C.ORDER-N0)/ud,t=BigInt(486662),r=C.sqr(n);r=C.mul(r,qc);let s=C.add(r,C.ONE),i=C.neg(t),o=C.sqr(s),a=C.mul(o,s),c=C.mul(r,t);c=C.mul(c,i),c=C.add(c,o),c=C.mul(c,i);let l=C.sqr(a);o=C.sqr(l),l=C.mul(l,a),l=C.mul(l,c),o=C.mul(o,l);let d=C.pow(o,e);d=C.mul(d,l);let u=C.mul(d,U0);o=C.sqr(d),o=C.mul(o,a);let g=C.eql(o,c),w=C.cmov(u,d,g),m=C.mul(i,r),f=C.mul(d,n);f=C.mul(f,J1);let b=C.mul(f,U0),T=C.mul(c,r);o=C.sqr(f),o=C.mul(o,a);let p=C.eql(o,T),_=C.cmov(b,f,p);o=C.sqr(w),o=C.mul(o,a);let S=C.eql(o,c),v=C.cmov(m,i,S),x=C.cmov(_,w,S),z=C.isOdd(x);return x=C.cmov(x,C.neg(x),S!==z),{xMn:v,xMd:s,yMn:x,yMd:En}}var t2=(()=>(0,de.FpSqrtEven)(C,C.neg(BigInt(486664))))();function n2(n){let{xMn:e,xMd:t,yMn:r,yMd:s}=e2(n),i=C.mul(e,s);i=C.mul(i,t2);let o=C.mul(t,r),a=C.sub(e,t),c=C.add(e,t),l=C.mul(o,c),d=C.eql(l,C.ZERO);i=C.cmov(i,C.ZERO,d),o=C.cmov(o,C.ONE,d),a=C.cmov(a,C.ONE,d),c=C.cmov(c,C.ONE,d);let u=C.invertBatch([o,c]);return{x:C.mul(i,u[0]),y:C.mul(a,u[1])}}var C0=(()=>(0,P0.createHasher)(X.ed25519.ExtendedPoint,n=>n2(n[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:C.ORDER,m:1,k:128,expand:"xmd",hash:Mc.sha512}))();X.hashToCurve=(()=>C0.hashToCurve)();X.encodeToCurve=(()=>C0.encodeToCurve)();function sd(n){if(!(n instanceof Pe))throw new Error("RistrettoPoint expected")}var ad=od,r2=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),s2=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),i2=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),o2=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),I0=n=>ld(En,n),a2=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),id=n=>X.ed25519.CURVE.Fp.create((0,Os.bytesToNumberLE)(n)&a2);function z0(n){let{d:e}=X.ed25519.CURVE,t=X.ed25519.CURVE.Fp.ORDER,r=X.ed25519.CURVE.Fp.create,s=r(ad*n*n),i=r((s+En)*i2),o=BigInt(-1),a=r((o-e*s)*r(s+e)),{isValid:c,value:l}=ld(i,a),d=r(l*n);(0,de.isNegativeLE)(d,t)||(d=r(-d)),c||(l=d),c||(o=s);let u=r(o*(s-En)*o2-a),g=l*l,w=r((l+l)*a),m=r(u*r2),f=r(En-g),b=r(En+g);return new X.ed25519.ExtendedPoint(r(w*b),r(f*m),r(m*b),r(w*f))}var Pe=class{constructor(e){this.ep=e}static fromAffine(e){return new Pe(X.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=(0,Os.ensureBytes)("ristrettoHash",e,64);let t=id(e.slice(0,32)),r=z0(t),s=id(e.slice(32,64)),i=z0(s);return new Pe(r.add(i))}static fromHex(e){e=(0,Os.ensureBytes)("ristrettoHex",e,32);let{a:t,d:r}=X.ed25519.CURVE,s=X.ed25519.CURVE.Fp.ORDER,i=X.ed25519.CURVE.Fp.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",a=id(e);if(!(0,Os.equalBytes)((0,Os.numberToBytesLE)(a,32),e)||(0,de.isNegativeLE)(a,s))throw new Error(o);let c=i(a*a),l=i(En+t*c),d=i(En-t*c),u=i(l*l),g=i(d*d),w=i(t*r*u-g),{isValid:m,value:f}=I0(i(w*g)),b=i(f*d),T=i(f*b*w),p=i((a+a)*b);(0,de.isNegativeLE)(p,s)&&(p=i(-p));let _=i(l*T),S=i(p*_);if(!m||(0,de.isNegativeLE)(S,s)||_===Z1)throw new Error(o);return new Pe(new X.ed25519.ExtendedPoint(p,_,En,S))}toRawBytes(){let{ex:e,ey:t,ez:r,et:s}=this.ep,i=X.ed25519.CURVE.Fp.ORDER,o=X.ed25519.CURVE.Fp.create,a=o(o(r+t)*o(r-t)),c=o(e*t),l=o(c*c),{value:d}=I0(o(a*l)),u=o(d*a),g=o(d*c),w=o(u*g*s),m;if((0,de.isNegativeLE)(s*w,i)){let b=o(t*ad),T=o(e*ad);e=b,t=T,m=o(u*s2)}else m=g;(0,de.isNegativeLE)(e*w,i)&&(t=o(-t));let f=o((r-t)*m);return(0,de.isNegativeLE)(f,i)&&(f=o(-f)),(0,Os.numberToBytesLE)(f,32)}toHex(){return(0,Os.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){sd(e);let{ex:t,ey:r}=this.ep,{ex:s,ey:i}=e.ep,o=X.ed25519.CURVE.Fp.create,a=o(t*i)===o(r*s),c=o(r*i)===o(t*s);return a||c}add(e){return sd(e),new Pe(this.ep.add(e.ep))}subtract(e){return sd(e),new Pe(this.ep.subtract(e.ep))}multiply(e){return new Pe(this.ep.multiply(e))}multiplyUnsafe(e){return new Pe(this.ep.multiplyUnsafe(e))}double(){return new Pe(this.ep.double())}negate(){return new Pe(this.ep.negate())}};X.RistrettoPoint=(()=>(Pe.BASE||(Pe.BASE=new Pe(X.ed25519.ExtendedPoint.BASE)),Pe.ZERO||(Pe.ZERO=new Pe(X.ed25519.ExtendedPoint.ZERO)),Pe))();var c2=(n,e)=>{let t=e.DST,r=typeof t=="string"?(0,ua.utf8ToBytes)(t):t,s=(0,P0.expand_message_xmd)(n,r,64,Mc.sha512);return Pe.hashToCurve(s)};X.hashToRistretto255=c2;X.hash_to_ristretto255=X.hashToRistretto255});var Ms=U(qs=>{"use strict";h();y();Object.defineProperty(qs,"__esModule",{value:!0});qs.AccountAddress=qs.AddressInvalidReason=void 0;var dd=pt(),u2=Me(),Ns=Bc(),l2=je(),qr;(function(n){n.INCORRECT_NUMBER_OF_BYTES="incorrect_number_of_bytes",n.INVALID_HEX_CHARS="invalid_hex_chars",n.TOO_SHORT="too_short",n.TOO_LONG="too_long",n.LEADING_ZERO_X_REQUIRED="leading_zero_x_required",n.LONG_FORM_REQUIRED_UNLESS_SPECIAL="long_form_required_unless_special",n.INVALID_PADDING_ZEROES="INVALID_PADDING_ZEROES"})(qr=qs.AddressInvalidReason||(qs.AddressInvalidReason={}));var fe=class extends u2.Serializable{constructor(e){if(super(),e.length!==fe.LENGTH)throw new Ns.ParsingError("AccountAddress data should be exactly 32 bytes long",qr.INCORRECT_NUMBER_OF_BYTES);this.data=e}isSpecial(){return this.data.slice(0,this.data.length-1).every(e=>e===0)&&this.data[this.data.length-1]<16}toString(){return`0x${this.toStringWithoutPrefix()}`}toStringWithoutPrefix(){let e=(0,dd.bytesToHex)(this.data);return this.isSpecial()&&(e=e[e.length-1]),e}toStringLong(){return`0x${this.toStringLongWithoutPrefix()}`}toStringLongWithoutPrefix(){return(0,dd.bytesToHex)(this.data)}toUint8Array(){return this.data}serialize(e){e.serializeFixedBytes(this.data)}serializeForEntryFunction(e){let t=this.bcsToBytes();e.serializeBytes(t)}serializeForScriptFunction(e){e.serializeU32AsUleb128(l2.ScriptTransactionArgumentVariants.Address),e.serialize(this)}static deserialize(e){let t=e.deserializeFixedBytes(fe.LENGTH);return new fe(t)}static fromStringStrict(e){if(!e.startsWith("0x"))throw new Ns.ParsingError("Hex string must start with a leading 0x.",qr.LEADING_ZERO_X_REQUIRED);let t=fe.fromString(e);if(e.length!==fe.LONG_STRING_LENGTH+2)if(t.isSpecial()){if(e.length!==3)throw new Ns.ParsingError(`The given hex string ${e} is a special address not in LONG form, it must be 0x0 to 0xf without padding zeroes.`,qr.INVALID_PADDING_ZEROES)}else throw new Ns.ParsingError(`The given hex string ${e} is not a special address, it must be represented as 0x + 64 chars.`,qr.LONG_FORM_REQUIRED_UNLESS_SPECIAL);return t}static fromString(e){let t=e;if(e.startsWith("0x")&&(t=e.slice(2)),t.length===0)throw new Ns.ParsingError("Hex string is too short, must be 1 to 64 chars long, excluding the leading 0x.",qr.TOO_SHORT);if(t.length>64)throw new Ns.ParsingError("Hex string is too long, must be 1 to 64 chars long, excluding the leading 0x.",qr.TOO_LONG);let r;try{r=(0,dd.hexToBytes)(t.padStart(64,"0"))}catch(s){throw new Ns.ParsingError(`Hex characters are invalid: ${s?.message}`,qr.INVALID_HEX_CHARS)}return new fe(r)}static from(e){return e instanceof fe?e:e instanceof Uint8Array?new fe(e):fe.fromString(e)}static fromStrict(e){return e instanceof fe?e:e instanceof Uint8Array?new fe(e):fe.fromStringStrict(e)}static isValid(e){try{return e.strict?fe.fromStrict(e.input):fe.from(e.input),{valid:!0}}catch(t){return{valid:!1,invalidReason:t?.invalidReason,invalidReasonMessage:t?.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((t,r)=>t===e.data[r])}};qs.AccountAddress=fe;fe.LENGTH=32;fe.LONG_STRING_LENGTH=64;fe.ZERO=fe.from("0x0");fe.ONE=fe.from("0x1");fe.TWO=fe.from("0x2");fe.THREE=fe.from("0x3");fe.FOUR=fe.from("0x4")});var Qi=U(Rc=>{"use strict";h();y();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.AuthenticationKey=void 0;var d2=ar(),f2=Ms(),K0=an(),h2=Me(),vn=class extends h2.Serializable{constructor(e){super();let{data:t}=e,r=K0.Hex.fromHexInput(t);if(r.toUint8Array().length!==vn.LENGTH)throw new Error(`Authentication Key length should be ${vn.LENGTH}`);this.data=r}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeFixedBytes(vn.LENGTH);return new vn({data:t})}toString(){return this.data.toString()}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:t,input:r}=e,s=K0.Hex.fromHexInput(r).toUint8Array(),i=new Uint8Array([...s,t]),o=d2.sha3_256.create();o.update(i);let a=o.digest();return new vn({data:a})}static fromPublicKeyAndScheme(e){let{publicKey:t}=e;return t.authKey()}static fromPublicKey(e){let{publicKey:t}=e;return t.authKey()}derivedAddress(){return new f2.AccountAddress(this.data.toUint8Array())}};Rc.AuthenticationKey=vn;vn.LENGTH=32});var Hc=U(ae=>{"use strict";h();y();var y2=ae&&ae.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),g2=ae&&ae.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),b2=ae&&ae.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&y2(e,n,t);return g2(e,n),e};Object.defineProperty(ae,"__esModule",{value:!0});ae.mnemonicToSeed=ae.splitPath=ae.CKDPriv=ae.deriveKey=ae.isValidHardenedPath=ae.isValidBIP44Path=ae.HARDENED_OFFSET=ae.KeyType=ae.APTOS_BIP44_REGEX=ae.APTOS_HARDENED_REGEX=void 0;var p2=hi(),w2=Go(),m2=b2(ul());ae.APTOS_HARDENED_REGEX=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/;ae.APTOS_BIP44_REGEX=/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/;var _2;(function(n){n.ED25519="ed25519 seed"})(_2=ae.KeyType||(ae.KeyType={}));ae.HARDENED_OFFSET=2147483648;function A2(n){return ae.APTOS_BIP44_REGEX.test(n)}ae.isValidBIP44Path=A2;function B2(n){return ae.APTOS_HARDENED_REGEX.test(n)}ae.isValidHardenedPath=B2;var T2=(n,e)=>{let t=p2.hmac.create(w2.sha512,n).update(e).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}};ae.deriveKey=T2;var x2=({key:n,chainCode:e},t)=>{let r=new ArrayBuffer(4);new DataView(r).setUint32(0,t);let s=new Uint8Array(r),i=new Uint8Array([0]),o=new Uint8Array([...i,...n,...s]);return(0,ae.deriveKey)(e,o)};ae.CKDPriv=x2;var S2=n=>n.replace("'",""),E2=n=>n.split("/").slice(1).map(S2);ae.splitPath=E2;var v2=n=>{let e=n.trim().split(/\s+/).map(t=>t.toLowerCase()).join(" ");return m2.mnemonicToSeedSync(e)};ae.mnemonicToSeed=v2});var Rs=U(Ji=>{"use strict";h();y();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.AccountPublicKey=Ji.PublicKey=void 0;var U2=Yt(),I2=an(),Cc=class extends U2.Serializable{toString(){let e=this.toUint8Array();return I2.Hex.fromHexInput(e).toString()}};Ji.PublicKey=Cc;var fd=class extends Cc{};Ji.AccountPublicKey=fd});var Hs=U(Lc=>{"use strict";h();y();Object.defineProperty(Lc,"__esModule",{value:!0});Lc.Signature=void 0;var z2=Yt(),P2=an(),hd=class extends z2.Serializable{toString(){let e=this.toUint8Array();return P2.Hex.fromHexInput(e).toString()}};Lc.Signature=hd});var yd=U(Kc=>{"use strict";h();y();Object.defineProperty(Kc,"__esModule",{value:!0});Kc.convertSigningMessage=void 0;var O2=an(),N2=n=>typeof n=="string"?O2.Hex.isValid(n).valid?n:E.Buffer.from(n,"utf8"):n;Kc.convertSigningMessage=N2});var Cs=U(Mr=>{"use strict";h();y();Object.defineProperty(Mr,"__esModule",{value:!0});Mr.Ed25519Signature=Mr.Ed25519PrivateKey=Mr.Ed25519PublicKey=void 0;var jc=L0(),q2=Me(),M2=Qi(),fa=an(),R2=je(),eo=Hc(),H2=Rs(),C2=Hs(),D0=yd(),j0=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16],Un=class extends H2.AccountPublicKey{constructor(e){super();let t=fa.Hex.fromHexInput(e);if(t.toUint8Array().length!==Un.LENGTH)throw new Error(`PublicKey length should be ${Un.LENGTH}`);this.key=t}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof In))return!1;let s=(0,D0.convertSigningMessage)(t),i=fa.Hex.fromHexInput(s).toUint8Array(),o=r.toUint8Array(),a=this.key.toUint8Array();return r.isCanonicalSignature()?jc.ed25519.verify(o,i,a):!1}authKey(){return M2.AuthenticationKey.fromSchemeAndBytes({scheme:R2.SigningScheme.Ed25519,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Un(t)}static isPublicKey(e){return e instanceof Un}};Mr.Ed25519PublicKey=Un;Un.LENGTH=32;var Et=class extends q2.Serializable{constructor(e){super();let t=fa.Hex.fromHexInput(e);if(t.toUint8Array().length!==Et.LENGTH)throw new Error(`PrivateKey length should be ${Et.LENGTH}`);this.signingKey=t}static generate(){let e=jc.ed25519.utils.randomPrivateKey();return new Et(e)}static fromDerivationPath(e,t){if(!(0,eo.isValidHardenedPath)(e))throw new Error(`Invalid derivation path ${e}`);return Et.fromDerivationPathInner(e,(0,eo.mnemonicToSeed)(t))}static fromDerivationPathInner(e,t,r=eo.HARDENED_OFFSET){let{key:s,chainCode:i}=(0,eo.deriveKey)(Et.SLIP_0010_SEED,t),o=(0,eo.splitPath)(e).map(c=>parseInt(c,10)),{key:a}=o.reduce((c,l)=>(0,eo.CKDPriv)(c,l+r),{key:s,chainCode:i});return new Et(a)}publicKey(){let e=jc.ed25519.getPublicKey(this.signingKey.toUint8Array());return new Un(e)}sign(e){let t=(0,D0.convertSigningMessage)(e),r=fa.Hex.fromHexInput(t).toUint8Array(),s=jc.ed25519.sign(r,this.signingKey.toUint8Array());return new In(s)}toUint8Array(){return this.signingKey.toUint8Array()}toString(){return this.signingKey.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Et(t)}static isPrivateKey(e){return e instanceof Et}};Mr.Ed25519PrivateKey=Et;Et.LENGTH=32;Et.SLIP_0010_SEED="ed25519 seed";var In=class extends C2.Signature{constructor(e){super();let t=fa.Hex.fromHexInput(e);if(t.toUint8Array().length!==In.LENGTH)throw new Error(`Signature length should be ${In.LENGTH}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new In(t)}isCanonicalSignature(){let e=this.toUint8Array().slice(32);for(let t=e.length-1;t>=0;t-=1){if(e[t]<j0[t])return!0;if(e[t]>j0[t])return!1}return!1}};Mr.Ed25519Signature=In;In.LENGTH=64});var Dc=U(to=>{"use strict";h();y();Object.defineProperty(to,"__esModule",{value:!0});to.MultiEd25519Signature=to.MultiEd25519PublicKey=void 0;var L2=je(),K2=Qi(),Qt=Cs(),j2=Rs(),D2=Hs(),vt=class extends j2.AccountPublicKey{constructor(e){super();let{publicKeys:t,threshold:r}=e;if(t.length>vt.MAX_KEYS||t.length<vt.MIN_KEYS)throw new Error(`Must have between ${vt.MIN_KEYS} and ${vt.MAX_KEYS} public keys, inclusive`);if(r<vt.MIN_THRESHOLD||r>t.length)throw new Error(`Threshold must be between ${vt.MIN_THRESHOLD} and ${t.length}, inclusive`);this.publicKeys=t,this.threshold=r}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof et))return!1;let s=[];for(let i=0;i<4;i+=1)for(let o=0;o<8;o+=1)if((r.bitmap[i]&1<<7-o)!==0){let c=i*8+o;s.push(c)}if(s.length!==r.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(s.length<this.threshold)throw new Error("Not enough signatures");for(let i=0;i<s.length;i+=1)if(!this.publicKeys[s[i]].verifySignature({message:t,signature:r.signatures[i]}))return!1;return!0}authKey(){return K2.AuthenticationKey.fromSchemeAndBytes({scheme:L2.SigningScheme.MultiEd25519,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*Qt.Ed25519PublicKey.LENGTH+1);return this.publicKeys.forEach((t,r)=>{e.set(t.toUint8Array(),r*Qt.Ed25519PublicKey.LENGTH)}),e[this.publicKeys.length*Qt.Ed25519PublicKey.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),r=t[t.length-1],s=[];for(let i=0;i<t.length-1;i+=Qt.Ed25519PublicKey.LENGTH){let o=i;s.push(new Qt.Ed25519PublicKey(t.subarray(o,o+Qt.Ed25519PublicKey.LENGTH)))}return new vt({publicKeys:s,threshold:r})}};to.MultiEd25519PublicKey=vt;vt.MAX_KEYS=32;vt.MIN_KEYS=2;vt.MIN_THRESHOLD=1;var et=class extends D2.Signature{constructor(e){super();let{signatures:t,bitmap:r}=e;if(t.length>et.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${et.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t,!(r instanceof Uint8Array))this.bitmap=et.createBitmap({bits:r});else{if(r.length!==et.BITMAP_LEN)throw new Error(`"bitmap" length should be ${et.BITMAP_LEN}`);this.bitmap=r}}toUint8Array(){let e=new Uint8Array(this.signatures.length*Qt.Ed25519Signature.LENGTH+et.BITMAP_LEN);return this.signatures.forEach((t,r)=>{e.set(t.toUint8Array(),r*Qt.Ed25519Signature.LENGTH)}),e.set(this.bitmap,this.signatures.length*Qt.Ed25519Signature.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes(),r=t.subarray(t.length-4),s=[];for(let i=0;i<t.length-r.length;i+=Qt.Ed25519Signature.LENGTH){let o=i;s.push(new Qt.Ed25519Signature(t.subarray(o,o+Qt.Ed25519Signature.LENGTH)))}return new et({signatures:s,bitmap:r})}static createBitmap(e){let{bits:t}=e,r=128,s=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach((o,a)=>{if(o>=et.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${et.MAX_SIGNATURES_SUPPORTED-1}.`);if(i.has(o))throw new Error("Duplicate bits detected.");if(a>0&&o<=t[a-1])throw new Error("The bits need to be sorted in ascending order.");i.add(o);let c=Math.floor(o/8),l=s[c];l|=r>>o%8,s[c]=l}),s}};to.MultiEd25519Signature=et;et.MAX_SIGNATURES_SUPPORTED=32;et.BITMAP_LEN=4});var bd=U(ut=>{"use strict";h();y();Object.defineProperty(ut,"__esModule",{value:!0});ut.DER=void 0;ut.weierstrassPoints=G0;ut.weierstrass=$2;ut.SWUFpSqrtRatio=k0;ut.mapToCurveSimpleSWU=W2;var gd=Yl(),no=Pr(),ce=un(),Xe=un();function V0(n){n.lowS!==void 0&&(0,Xe.abool)("lowS",n.lowS),n.prehash!==void 0&&(0,Xe.abool)("prehash",n.prehash)}function V2(n){let e=(0,gd.validateBasic)(n);ce.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:F2,hexToBytes:G2}=ce;ut.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=ut.DER;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:F2(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=ut.DER,t=typeof n=="string"?G2(n):n;ce.abytes(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=ut.DER._parseInt(t.subarray(2)),{d:o,l:a}=ut.DER._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let d=l.toString(16);return d.length&1?`0${d}`:d},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,a=t(i),c=t(o);return`30${t(o+i+4)}02${c}${s}02${a}${r}`}};var zn=BigInt(0),ye=BigInt(1),Rr=BigInt(2),Vc=BigInt(3),F0=BigInt(4);function G0(n){let e=V2(n),{Fp:t}=e,r=e.toBytes||((m,f,b)=>{let T=f.toAffine();return ce.concatBytes(Uint8Array.from([4]),t.toBytes(T.x),t.toBytes(T.y))}),s=e.fromBytes||(m=>{let f=m.subarray(1),b=t.fromBytes(f.subarray(0,t.BYTES)),T=t.fromBytes(f.subarray(t.BYTES,2*t.BYTES));return{x:b,y:T}});function i(m){let{a:f,b}=e,T=t.sqr(m),p=t.mul(T,m);return t.add(t.add(p,t.mul(m,f)),b)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return ce.inRange(m,ye,e.n)}function a(m){let{allowedPrivateKeyLengths:f,nByteLength:b,wrapPrivateKey:T,n:p}=e;if(f&&typeof m!="bigint"){if(ce.isBytes(m)&&(m=ce.bytesToHex(m)),typeof m!="string"||!f.includes(m.length))throw new Error("Invalid key");m=m.padStart(b*2,"0")}let _;try{_=typeof m=="bigint"?m:ce.bytesToNumberBE((0,Xe.ensureBytes)("private key",m,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof m}`)}return T&&(_=no.mod(_,p)),ce.aInRange("private key",_,ye,p),_}function c(m){if(!(m instanceof u))throw new Error("ProjectivePoint expected")}let l=(0,Xe.memoized)((m,f)=>{let{px:b,py:T,pz:p}=m;if(t.eql(p,t.ONE))return{x:b,y:T};let _=m.is0();f==null&&(f=_?t.ONE:t.inv(p));let S=t.mul(b,f),v=t.mul(T,f),x=t.mul(p,f);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(x,t.ONE))throw new Error("invZ was invalid");return{x:S,y:v}}),d=(0,Xe.memoized)(m=>{if(m.is0()){if(e.allowInfinityPoint&&!t.is0(m.py))return;throw new Error("bad point: ZERO")}let{x:f,y:b}=m.toAffine();if(!t.isValid(f)||!t.isValid(b))throw new Error("bad point: x or y not FE");let T=t.sqr(b),p=i(f);if(!t.eql(T,p))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class u{constructor(f,b,T){if(this.px=f,this.py=b,this.pz=T,f==null||!t.isValid(f))throw new Error("x required");if(b==null||!t.isValid(b))throw new Error("y required");if(T==null||!t.isValid(T))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:b,y:T}=f||{};if(!f||!t.isValid(b)||!t.isValid(T))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");let p=_=>t.eql(_,t.ZERO);return p(b)&&p(T)?u.ZERO:new u(b,T,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let b=t.invertBatch(f.map(T=>T.pz));return f.map((T,p)=>T.toAffine(b[p])).map(u.fromAffine)}static fromHex(f){let b=u.fromAffine(s((0,Xe.ensureBytes)("pointHex",f)));return b.assertValidity(),b}static fromPrivateKey(f){return u.BASE.multiply(a(f))}_setWindowSize(f){w.setWindowSize(this,f)}assertValidity(){d(this)}hasEvenY(){let{y:f}=this.toAffine();if(t.isOdd)return!t.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){c(f);let{px:b,py:T,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.eql(t.mul(b,v),t.mul(_,p)),z=t.eql(t.mul(T,v),t.mul(S,p));return x&&z}negate(){return new u(this.px,t.neg(this.py),this.pz)}double(){let{a:f,b}=e,T=t.mul(b,Vc),{px:p,py:_,pz:S}=this,v=t.ZERO,x=t.ZERO,z=t.ZERO,I=t.mul(p,p),j=t.mul(_,_),L=t.mul(S,S),M=t.mul(p,_);return M=t.add(M,M),z=t.mul(p,S),z=t.add(z,z),v=t.mul(f,z),x=t.mul(T,L),x=t.add(v,x),v=t.sub(j,x),x=t.add(j,x),x=t.mul(v,x),v=t.mul(M,v),z=t.mul(T,z),L=t.mul(f,L),M=t.sub(I,L),M=t.mul(f,M),M=t.add(M,z),z=t.add(I,I),I=t.add(z,I),I=t.add(I,L),I=t.mul(I,M),x=t.add(x,I),L=t.mul(_,S),L=t.add(L,L),I=t.mul(L,M),v=t.sub(v,I),z=t.mul(L,j),z=t.add(z,z),z=t.add(z,z),new u(v,x,z)}add(f){c(f);let{px:b,py:T,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.ZERO,z=t.ZERO,I=t.ZERO,j=e.a,L=t.mul(e.b,Vc),M=t.mul(b,_),Y=t.mul(T,S),Q=t.mul(p,v),R=t.add(b,T),A=t.add(_,S);R=t.mul(R,A),A=t.add(M,Y),R=t.sub(R,A),A=t.add(b,p);let B=t.add(_,v);return A=t.mul(A,B),B=t.add(M,Q),A=t.sub(A,B),B=t.add(T,p),x=t.add(S,v),B=t.mul(B,x),x=t.add(Y,Q),B=t.sub(B,x),I=t.mul(j,A),x=t.mul(L,Q),I=t.add(x,I),x=t.sub(Y,I),I=t.add(Y,I),z=t.mul(x,I),Y=t.add(M,M),Y=t.add(Y,M),Q=t.mul(j,Q),A=t.mul(L,A),Y=t.add(Y,Q),Q=t.sub(M,Q),Q=t.mul(j,Q),A=t.add(A,Q),M=t.mul(Y,A),z=t.add(z,M),M=t.mul(B,A),x=t.mul(R,x),x=t.sub(x,M),M=t.mul(R,Y),I=t.mul(B,I),I=t.add(I,M),new u(x,z,I)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return w.wNAFCached(this,f,u.normalizeZ)}multiplyUnsafe(f){ce.aInRange("scalar",f,zn,e.n);let b=u.ZERO;if(f===zn)return b;if(f===ye)return this;let{endo:T}=e;if(!T)return w.unsafeLadder(this,f);let{k1neg:p,k1:_,k2neg:S,k2:v}=T.splitScalar(f),x=b,z=b,I=this;for(;_>zn||v>zn;)_&ye&&(x=x.add(I)),v&ye&&(z=z.add(I)),I=I.double(),_>>=ye,v>>=ye;return p&&(x=x.negate()),S&&(z=z.negate()),z=new u(t.mul(z.px,T.beta),z.py,z.pz),x.add(z)}multiply(f){let{endo:b,n:T}=e;ce.aInRange("scalar",f,ye,T);let p,_;if(b){let{k1neg:S,k1:v,k2neg:x,k2:z}=b.splitScalar(f),{p:I,f:j}=this.wNAF(v),{p:L,f:M}=this.wNAF(z);I=w.constTimeNegate(S,I),L=w.constTimeNegate(x,L),L=new u(t.mul(L.px,b.beta),L.py,L.pz),p=I.add(L),_=j.add(M)}else{let{p:S,f:v}=this.wNAF(f);p=S,_=v}return u.normalizeZ([p,_])[0]}multiplyAndAddUnsafe(f,b,T){let p=u.BASE,_=(v,x)=>x===zn||x===ye||!v.equals(p)?v.multiplyUnsafe(x):v.multiply(x),S=_(this,b).add(_(f,T));return S.is0()?void 0:S}toAffine(f){return l(this,f)}isTorsionFree(){let{h:f,isTorsionFree:b}=e;if(f===ye)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:b}=e;return f===ye?this:b?b(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return(0,Xe.abool)("isCompressed",f),this.assertValidity(),r(u,this,f)}toHex(f=!0){return(0,Xe.abool)("isCompressed",f),ce.bytesToHex(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,t.ONE),u.ZERO=new u(t.ZERO,t.ONE,t.ZERO);let g=e.nBitLength,w=(0,gd.wNAF)(u,e.endo?Math.ceil(g/2):g);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:o}}function k2(n){let e=(0,gd.validateBasic)(n);return ce.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function $2(n){let e=k2(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(R){return no.mod(R,r)}function a(R){return no.invert(R,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:u}=G0({...e,toBytes(R,A,B){let P=A.toAffine(),O=t.toBytes(P.x),q=ce.concatBytes;return(0,Xe.abool)("isCompressed",B),B?q(Uint8Array.from([A.hasEvenY()?2:3]),O):q(Uint8Array.from([4]),O,t.toBytes(P.y))},fromBytes(R){let A=R.length,B=R[0],P=R.subarray(1);if(A===s&&(B===2||B===3)){let O=ce.bytesToNumberBE(P);if(!ce.inRange(O,ye,t.ORDER))throw new Error("Point is not on curve");let q=d(O),K;try{K=t.sqrt(q)}catch(G){let W=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+W)}let V=(K&ye)===ye;return(B&1)===1!==V&&(K=t.neg(K)),{x:O,y:K}}else if(A===i&&B===4){let O=t.fromBytes(P.subarray(0,t.BYTES)),q=t.fromBytes(P.subarray(t.BYTES,2*t.BYTES));return{x:O,y:q}}else throw new Error(`Point of length ${A} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=R=>ce.bytesToHex(ce.numberToBytesBE(R,e.nByteLength));function w(R){let A=r>>ye;return R>A}function m(R){return w(R)?o(-R):R}let f=(R,A,B)=>ce.bytesToNumberBE(R.slice(A,B));class b{constructor(A,B,P){this.r=A,this.s=B,this.recovery=P,this.assertValidity()}static fromCompact(A){let B=e.nByteLength;return A=(0,Xe.ensureBytes)("compactSignature",A,B*2),new b(f(A,0,B),f(A,B,2*B))}static fromDER(A){let{r:B,s:P}=ut.DER.toSig((0,Xe.ensureBytes)("DER",A));return new b(B,P)}assertValidity(){ce.aInRange("r",this.r,ye,r),ce.aInRange("s",this.s,ye,r)}addRecoveryBit(A){return new b(this.r,this.s,A)}recoverPublicKey(A){let{r:B,s:P,recovery:O}=this,q=x((0,Xe.ensureBytes)("msgHash",A));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");let K=O===2||O===3?B+e.n:B;if(K>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let V=(O&1)===0?"02":"03",k=c.fromHex(V+g(K)),G=a(K),W=o(-q*G),ie=o(P*G),he=c.BASE.multiplyAndAddUnsafe(k,W,ie);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ce.hexToBytes(this.toDERHex())}toDERHex(){return ut.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ce.hexToBytes(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}let T={isValidPrivateKey(R){try{return l(R),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let R=no.getMinHashLength(e.n);return no.mapHashToField(e.randomBytes(R),e.n)},precompute(R=8,A=c.BASE){return A._setWindowSize(R),A.multiply(BigInt(3)),A}};function p(R,A=!0){return c.fromPrivateKey(R).toRawBytes(A)}function _(R){let A=ce.isBytes(R),B=typeof R=="string",P=(A||B)&&R.length;return A?P===s||P===i:B?P===2*s||P===2*i:R instanceof c}function S(R,A,B=!0){if(_(R))throw new Error("first arg must be private key");if(!_(A))throw new Error("second arg must be public key");return c.fromHex(A).multiply(l(R)).toRawBytes(B)}let v=e.bits2int||function(R){let A=ce.bytesToNumberBE(R),B=R.length*8-e.nBitLength;return B>0?A>>BigInt(B):A},x=e.bits2int_modN||function(R){return o(v(R))},z=ce.bitMask(e.nBitLength);function I(R){return ce.aInRange(`num < 2^${e.nBitLength}`,R,zn,z),ce.numberToBytesBE(R,e.nByteLength)}function j(R,A,B=L){if(["recovered","canonical"].some(Ee=>Ee in B))throw new Error("sign() legacy options not supported");let{hash:P,randomBytes:O}=e,{lowS:q,prehash:K,extraEntropy:V}=B;q==null&&(q=!0),R=(0,Xe.ensureBytes)("msgHash",R),V0(B),K&&(R=(0,Xe.ensureBytes)("prehashed msgHash",P(R)));let k=x(R),G=l(A),W=[I(G),I(k)];if(V!=null&&V!==!1){let Ee=V===!0?O(t.BYTES):V;W.push((0,Xe.ensureBytes)("extraEntropy",Ee))}let ie=ce.concatBytes(...W),he=k;function Be(Ee){let ge=v(Ee);if(!u(ge))return;let Le=a(ge),ze=c.BASE.multiply(ge).toAffine(),ve=o(ze.x);if(ve===zn)return;let bt=o(Le*o(he+ve*G));if(bt===zn)return;let bn=(ze.x===ve?0:2)|Number(ze.y&ye),es=bt;return q&&w(bt)&&(es=m(bt),bn^=1),new b(ve,es,bn)}return{seed:ie,k2sig:Be}}let L={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function Y(R,A,B=L){let{seed:P,k2sig:O}=j(R,A,B),q=e;return ce.createHmacDrbg(q.hash.outputLen,q.nByteLength,q.hmac)(P,O)}c.BASE._setWindowSize(8);function Q(R,A,B,P=M){let O=R;if(A=(0,Xe.ensureBytes)("msgHash",A),B=(0,Xe.ensureBytes)("publicKey",B),"strict"in P)throw new Error("options.strict was renamed to lowS");V0(P);let{lowS:q,prehash:K}=P,V,k;try{if(typeof O=="string"||ce.isBytes(O))try{V=b.fromDER(O)}catch(ze){if(!(ze instanceof ut.DER.Err))throw ze;V=b.fromCompact(O)}else if(typeof O=="object"&&typeof O.r=="bigint"&&typeof O.s=="bigint"){let{r:ze,s:ve}=O;V=new b(ze,ve)}else throw new Error("PARSE");k=c.fromHex(B)}catch(ze){if(ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&V.hasHighS())return!1;K&&(A=e.hash(A));let{r:G,s:W}=V,ie=x(A),he=a(W),Be=o(ie*he),Ee=o(G*he),ge=c.BASE.multiplyAndAddUnsafe(k,Be,Ee)?.toAffine();return ge?o(ge.x)===G:!1}return{CURVE:e,getPublicKey:p,getSharedSecret:S,sign:Y,verify:Q,ProjectivePoint:c,Signature:b,utils:T}}function k0(n,e){let t=n.ORDER,r=zn;for(let m=t-ye;m%Rr===zn;m/=Rr)r+=ye;let s=r,i=Rr<<s-ye-ye,o=i*Rr,a=(t-ye)/o,c=(a-ye)/Rr,l=o-ye,d=i,u=n.pow(e,a),g=n.pow(e,(a+ye)/Rr),w=(m,f)=>{let b=u,T=n.pow(f,l),p=n.sqr(T);p=n.mul(p,f);let _=n.mul(m,p);_=n.pow(_,c),_=n.mul(_,T),T=n.mul(_,f),p=n.mul(_,m);let S=n.mul(p,T);_=n.pow(S,d);let v=n.eql(_,n.ONE);T=n.mul(p,g),_=n.mul(S,b),p=n.cmov(T,p,v),S=n.cmov(_,S,v);for(let x=s;x>ye;x--){let z=x-Rr;z=Rr<<z-ye;let I=n.pow(S,z),j=n.eql(I,n.ONE);T=n.mul(p,b),b=n.mul(b,b),I=n.mul(S,b),p=n.cmov(T,p,j),S=n.cmov(I,S,j)}return{isValid:v,value:p}};if(n.ORDER%F0===Vc){let m=(n.ORDER-Vc)/F0,f=n.sqrt(n.neg(e));w=(b,T)=>{let p=n.sqr(T),_=n.mul(b,T);p=n.mul(p,_);let S=n.pow(p,m);S=n.mul(S,_);let v=n.mul(S,f),x=n.mul(n.sqr(S),T),z=n.eql(x,b),I=n.cmov(v,S,z);return{isValid:z,value:I}}}return w}function W2(n,e){if(no.validateField(n),!n.isValid(e.A)||!n.isValid(e.B)||!n.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=k0(n,e.Z);if(!n.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,c,l,d,u;s=n.sqr(r),s=n.mul(s,e.Z),i=n.sqr(s),i=n.add(i,s),o=n.add(i,n.ONE),o=n.mul(o,e.B),a=n.cmov(e.Z,n.neg(i),!n.eql(i,n.ZERO)),a=n.mul(a,e.A),i=n.sqr(o),l=n.sqr(a),c=n.mul(l,e.A),i=n.add(i,c),i=n.mul(i,o),l=n.mul(l,a),c=n.mul(l,e.B),i=n.add(i,c),d=n.mul(s,o);let{isValid:g,value:w}=t(i,l);u=n.mul(s,r),u=n.mul(u,w),d=n.cmov(d,o,g),u=n.cmov(u,w,g);let m=n.isOdd(r)===n.isOdd(u);return u=n.cmov(n.neg(u),u,m),d=n.div(d,a),{x:d,y:u}}}});var X0=U(Fc=>{"use strict";h();y();Object.defineProperty(Fc,"__esModule",{value:!0});Fc.getHash=W0;Fc.createCurve=Y2;var X2=hi(),$0=pt(),Z2=bd();function W0(n){return{hash:n,hmac:(e,...t)=>(0,X2.hmac)(n,e,(0,$0.concatBytes)(...t)),randomBytes:$0.randomBytes}}function Y2(n,e){let t=r=>(0,Z2.weierstrass)({...n,...W0(r)});return Object.freeze({...t(e),create:t})}});var iy=U(It=>{"use strict";h();y();Object.defineProperty(It,"__esModule",{value:!0});It.encodeToCurve=It.hashToCurve=It.schnorr=It.secp256k1=void 0;var Gc=ja(),Q2=pt(),J2=X0(),Q0=td(),De=Pr(),Ut=un(),e_=bd(),ga=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),kc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ha=BigInt(1),$c=BigInt(2),Z0=(n,e)=>(n+e/$c)/e;function J0(n){let e=ga,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,d=l*l*n%e,u=(0,De.pow2)(d,t,e)*d%e,g=(0,De.pow2)(u,t,e)*d%e,w=(0,De.pow2)(g,$c,e)*l%e,m=(0,De.pow2)(w,s,e)*w%e,f=(0,De.pow2)(m,i,e)*m%e,b=(0,De.pow2)(f,a,e)*f%e,T=(0,De.pow2)(b,c,e)*b%e,p=(0,De.pow2)(T,a,e)*f%e,_=(0,De.pow2)(p,t,e)*d%e,S=(0,De.pow2)(_,o,e)*m%e,v=(0,De.pow2)(S,r,e)*l%e,x=(0,De.pow2)(v,$c,e);if(!Hr.eql(Hr.sqr(x),n))throw new Error("Cannot find square root");return x}var Hr=(0,De.Field)(ga,void 0,void 0,{sqrt:J0});It.secp256k1=(0,J2.createCurve)({a:BigInt(0),b:BigInt(7),Fp:Hr,n:kc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=kc,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ha*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=Z0(i*n,e),c=Z0(-r*n,e),l=(0,De.mod)(n-a*t-c*s,e),d=(0,De.mod)(-a*r-c*i,e),u=l>o,g=d>o;if(u&&(l=e-l),g&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:u,k1:l,k2neg:g,k2:d}}}},Gc.sha256);var ey=BigInt(0),Y0={};function Wc(n,...e){let t=Y0[n];if(t===void 0){let r=(0,Gc.sha256)(Uint8Array.from(n,s=>s.charCodeAt(0)));t=(0,Ut.concatBytes)(r,r),Y0[n]=t}return(0,Gc.sha256)((0,Ut.concatBytes)(t,...e))}var _d=n=>n.toRawBytes(!0).slice(1),wd=n=>(0,Ut.numberToBytesBE)(n,32),pd=n=>(0,De.mod)(n,ga),ya=n=>(0,De.mod)(n,kc),Ad=It.secp256k1.ProjectivePoint,t_=(n,e,t)=>Ad.BASE.multiplyAndAddUnsafe(n,e,t);function md(n){let e=It.secp256k1.utils.normPrivateKeyToScalar(n),t=Ad.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:ya(-e),bytes:_d(t)}}function ty(n){(0,Ut.aInRange)("x",n,ha,ga);let e=pd(n*n),t=pd(e*n+BigInt(7)),r=J0(t);r%$c!==ey&&(r=pd(-r));let s=new Ad(n,r,ha);return s.assertValidity(),s}var ro=Ut.bytesToNumberBE;function ny(...n){return ya(ro(Wc("BIP0340/challenge",...n)))}function n_(n){return md(n).bytes}function r_(n,e,t=(0,Q2.randomBytes)(32)){let r=(0,Ut.ensureBytes)("message",n),{bytes:s,scalar:i}=md(e),o=(0,Ut.ensureBytes)("auxRand",t,32),a=wd(i^ro(Wc("BIP0340/aux",o))),c=Wc("BIP0340/nonce",a,s,r),l=ya(ro(c));if(l===ey)throw new Error("sign failed: k is zero");let{bytes:d,scalar:u}=md(l),g=ny(d,s,r),w=new Uint8Array(64);if(w.set(d,0),w.set(wd(ya(u+g*i)),32),!ry(w,r,s))throw new Error("sign: Invalid signature produced");return w}function ry(n,e,t){let r=(0,Ut.ensureBytes)("signature",n,64),s=(0,Ut.ensureBytes)("message",e),i=(0,Ut.ensureBytes)("publicKey",t,32);try{let o=ty(ro(i)),a=ro(r.subarray(0,32));if(!(0,Ut.inRange)(a,ha,ga))return!1;let c=ro(r.subarray(32,64));if(!(0,Ut.inRange)(c,ha,kc))return!1;let l=ny(wd(a),_d(o),s),d=t_(o,c,ya(-l));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}It.schnorr=(()=>({getPublicKey:n_,sign:r_,verify:ry,utils:{randomPrivateKey:It.secp256k1.utils.randomPrivateKey,lift_x:ty,pointToBytes:_d,numberToBytesBE:Ut.numberToBytesBE,bytesToNumberBE:Ut.bytesToNumberBE,taggedHash:Wc,mod:De.mod}}))();var s_=(()=>(0,Q0.isogenyMap)(Hr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(e=>BigInt(e)))))(),i_=(()=>(0,e_.mapToCurveSimpleSWU)(Hr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Hr.create(BigInt("-11"))}))(),sy=(()=>(0,Q0.createHasher)(It.secp256k1.ProjectivePoint,n=>{let{x:e,y:t}=i_(Hr.create(n[0]));return s_(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Hr.ORDER,m:1,k:128,expand:"xmd",hash:Gc.sha256}))();It.hashToCurve=(()=>sy.hashToCurve)();It.encodeToCurve=(()=>sy.encodeToCurve)()});var uy=U(so=>{"use strict";h();y();Object.defineProperty(so,"__esModule",{value:!0});so.ripemd160=so.RIPEMD160=void 0;var o_=Kf(),ba=pt(),a_=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),ay=new Uint8Array(new Array(16).fill(0).map((n,e)=>e)),c_=ay.map(n=>(9*n+5)%16),Bd=[ay],Td=[c_];for(let n=0;n<4;n++)for(let e of[Bd,Td])e.push(e[n].map(t=>a_[t]));var cy=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),u_=Bd.map((n,e)=>n.map(t=>cy[e][t])),l_=Td.map((n,e)=>n.map(t=>cy[e][t])),d_=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),f_=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function oy(n,e,t,r){return n===0?e^t^r:n===1?e&t|~e&r:n===2?(e|~t)^r:n===3?e&r|t&~r:e^(t|~r)}var Xc=new Uint32Array(16),Zc=class extends o_.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:s,h4:i}=this;return[e,t,r,s,i]}set(e,t,r,s,i){this.h0=e|0,this.h1=t|0,this.h2=r|0,this.h3=s|0,this.h4=i|0}process(e,t){for(let w=0;w<16;w++,t+=4)Xc[w]=e.getUint32(t,!0);let r=this.h0|0,s=r,i=this.h1|0,o=i,a=this.h2|0,c=a,l=this.h3|0,d=l,u=this.h4|0,g=u;for(let w=0;w<5;w++){let m=4-w,f=d_[w],b=f_[w],T=Bd[w],p=Td[w],_=u_[w],S=l_[w];for(let v=0;v<16;v++){let x=(0,ba.rotl)(r+oy(w,i,a,l)+Xc[T[v]]+f,_[v])+u|0;r=u,u=l,l=(0,ba.rotl)(a,10)|0,a=i,i=x}for(let v=0;v<16;v++){let x=(0,ba.rotl)(s+oy(m,o,c,d)+Xc[p[v]]+b,S[v])+g|0;s=g,g=d,d=(0,ba.rotl)(c,10)|0,c=o,o=x}}this.set(this.h1+a+d|0,this.h2+l+g|0,this.h3+u+s|0,this.h4+r+o|0,this.h0+i+c|0)}roundClean(){Xc.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};so.RIPEMD160=Zc;so.ripemd160=(0,ba.wrapConstructor)(()=>new Zc)});var Ls=U(Ae=>{"use strict";h();y();Object.defineProperty(Ae,"__esModule",{value:!0});Ae.bitMask=void 0;Ae.isBytes=Qc;Ae.abytes=Jc;Ae.bytesToHex=Sd;Ae.numberToHexUnpadded=hy;Ae.hexToNumber=Ed;Ae.hexToBytes=eu;Ae.bytesToNumberBE=g_;Ae.bytesToNumberLE=b_;Ae.numberToBytesBE=yy;Ae.numberToBytesLE=p_;Ae.numberToVarBytesBE=w_;Ae.ensureBytes=m_;Ae.concatBytes=gy;Ae.equalBytes=__;Ae.utf8ToBytes=A_;Ae.bitLen=B_;Ae.bitGet=T_;Ae.bitSet=x_;Ae.createHmacDrbg=E_;Ae.validateObject=U_;var fy=BigInt(0),Yc=BigInt(1),h_=BigInt(2);function Qc(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Jc(n){if(!Qc(n))throw new Error("Uint8Array expected")}var y_=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Sd(n){Jc(n);let e="";for(let t=0;t<n.length;t++)e+=y_[n[t]];return e}function hy(n){let e=n.toString(16);return e.length&1?`0${e}`:e}function Ed(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}var Zn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function ly(n){if(n>=Zn._0&&n<=Zn._9)return n-Zn._0;if(n>=Zn._A&&n<=Zn._F)return n-(Zn._A-10);if(n>=Zn._a&&n<=Zn._f)return n-(Zn._a-10)}function eu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);let e=n.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){let o=ly(n.charCodeAt(i)),a=ly(n.charCodeAt(i+1));if(o===void 0||a===void 0){let c=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function g_(n){return Ed(Sd(n))}function b_(n){return Jc(n),Ed(Sd(Uint8Array.from(n).reverse()))}function yy(n,e){return eu(n.toString(16).padStart(e*2,"0"))}function p_(n,e){return yy(n,e).reverse()}function w_(n){return eu(hy(n))}function m_(n,e,t){let r;if(typeof e=="string")try{r=eu(e)}catch(i){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Qc(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);let s=r.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return r}function gy(...n){let e=0;for(let r=0;r<n.length;r++){let s=n[r];Jc(s),e+=s.length}let t=new Uint8Array(e);for(let r=0,s=0;r<n.length;r++){let i=n[r];t.set(i,s),s+=i.length}return t}function __(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function A_(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function B_(n){let e;for(e=0;n>fy;n>>=Yc,e+=1);return e}function T_(n,e){return n>>BigInt(e)&Yc}function x_(n,e,t){return n|(t?Yc:fy)<<BigInt(e)}var S_=n=>(h_<<BigInt(n-1))-Yc;Ae.bitMask=S_;var xd=n=>new Uint8Array(n),dy=n=>Uint8Array.from(n);function E_(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=xd(n),s=xd(n),i=0,o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>t(s,r,...u),c=(u=xd())=>{s=a(dy([0]),u),r=a(),u.length!==0&&(s=a(dy([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,g=[];for(;u<e;){r=a();let w=r.slice();g.push(w),u+=r.length}return gy(...g)};return(u,g)=>{o(),c(u);let w;for(;!(w=g(l()));)c();return o(),w}}var v_={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Qc(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function U_(n,e,t={}){let r=(s,i,o)=>{let a=v_[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=n[s];if(!(o&&c===void 0)&&!a(c,n))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(let[s,i]of Object.entries(e))r(s,i,!1);for(let[s,i]of Object.entries(t))r(s,i,!0);return n}});var io=U(Te=>{"use strict";h();y();Object.defineProperty(Te,"__esModule",{value:!0});Te.isNegativeLE=void 0;Te.mod=Ct;Te.pow=wy;Te.pow2=O_;Te.invert=tu;Te.tonelliShanks=my;Te.FpSqrt=_y;Te.validateField=M_;Te.FpPow=Ay;Te.FpInvertBatch=By;Te.FpDiv=R_;Te.FpIsSquare=H_;Te.nLength=Ud;Te.Field=C_;Te.FpSqrtOdd=L_;Te.FpSqrtEven=K_;Te.hashToPrivateScalar=j_;Te.getFieldBytesLength=Id;Te.getMinHashLength=Ty;Te.mapHashToField=D_;var Lt=Ls(),He=BigInt(0),pe=BigInt(1),Cr=BigInt(2),I_=BigInt(3),vd=BigInt(4),by=BigInt(5),py=BigInt(8),z_=BigInt(9),P_=BigInt(16);function Ct(n,e){let t=n%e;return t>=He?t:e+t}function wy(n,e,t){if(t<=He||e<He)throw new Error("Expected power/modulo > 0");if(t===pe)return He;let r=pe;for(;e>He;)e&pe&&(r=r*n%t),n=n*n%t,e>>=pe;return r}function O_(n,e,t){let r=n;for(;e-- >He;)r*=r,r%=t;return r}function tu(n,e){if(n===He||e<=He)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=Ct(n,e),r=e,s=He,i=pe,o=pe,a=He;for(;t!==He;){let l=r/t,d=r%t,u=s-o*l,g=i-a*l;r=t,t=d,s=o,i=a,o=u,a=g}if(r!==pe)throw new Error("invert: does not exist");return Ct(s,e)}function my(n){let e=(n-pe)/Cr,t,r,s;for(t=n-pe,r=0;t%Cr===He;t/=Cr,r++);for(s=Cr;s<n&&wy(s,e,n)!==n-pe;s++);if(r===1){let o=(n+pe)/vd;return function(c,l){let d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}let i=(t+pe)/Cr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,d=a.pow(a.mul(a.ONE,s),t),u=a.pow(c,i),g=a.pow(c,t);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let w=1;for(let f=a.sqr(g);w<l&&!a.eql(f,a.ONE);w++)f=a.sqr(f);let m=a.pow(d,pe<<BigInt(l-w-1));d=a.sqr(m),u=a.mul(u,m),g=a.mul(g,d),l=w}return u}}function _y(n){if(n%vd===I_){let e=(n+pe)/vd;return function(r,s){let i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%py===by){let e=(n-by)/py;return function(r,s){let i=r.mul(s,Cr),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,Cr),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return n%P_,my(n)}var N_=(n,e)=>(Ct(n,e)&pe)===pe;Te.isNegativeLE=N_;var q_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function M_(n){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=q_.reduce((r,s)=>(r[s]="function",r),e);return(0,Lt.validateObject)(n,t)}function Ay(n,e,t){if(t<He)throw new Error("Expected power > 0");if(t===He)return n.ONE;if(t===pe)return e;let r=n.ONE,s=e;for(;t>He;)t&pe&&(r=n.mul(r,s)),s=n.sqr(s),t>>=pe;return r}function By(n,e){let t=new Array(e.length),r=e.reduce((i,o,a)=>n.is0(o)?i:(t[a]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return e.reduceRight((i,o,a)=>n.is0(o)?i:(t[a]=n.mul(i,t[a]),n.mul(i,o)),s),t}function R_(n,e,t){return n.mul(e,typeof t=="bigint"?tu(t,n.ORDER):n.inv(t))}function H_(n){let e=(n.ORDER-pe)/Cr;return t=>{let r=n.pow(t,e);return n.eql(r,n.ZERO)||n.eql(r,n.ONE)}}function Ud(n,e){let t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function C_(n,e,t=!1,r={}){if(n<=He)throw new Error(`Expected Field ORDER > 0, got ${n}`);let{nBitLength:s,nByteLength:i}=Ud(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=_y(n),a=Object.freeze({ORDER:n,BITS:s,BYTES:i,MASK:(0,Lt.bitMask)(s),ZERO:He,ONE:pe,create:c=>Ct(c,n),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return He<=c&&c<n},is0:c=>c===He,isOdd:c=>(c&pe)===pe,neg:c=>Ct(-c,n),eql:(c,l)=>c===l,sqr:c=>Ct(c*c,n),add:(c,l)=>Ct(c+l,n),sub:(c,l)=>Ct(c-l,n),mul:(c,l)=>Ct(c*l,n),pow:(c,l)=>Ay(a,c,l),div:(c,l)=>Ct(c*tu(l,n),n),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>tu(c,n),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>By(a,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>t?(0,Lt.numberToBytesLE)(c,i):(0,Lt.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?(0,Lt.bytesToNumberLE)(c):(0,Lt.bytesToNumberBE)(c)}});return Object.freeze(a)}function L_(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?t:n.neg(t)}function K_(n,e){if(!n.isOdd)throw new Error("Field doesn't have isOdd");let t=n.sqrt(e);return n.isOdd(t)?n.neg(t):t}function j_(n,e,t=!1){n=(0,Lt.ensureBytes)("privateHash",n);let r=n.length,s=Ud(e).nByteLength+8;if(s<24||r<s||r>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${r}`);let i=t?(0,Lt.bytesToNumberLE)(n):(0,Lt.bytesToNumberBE)(n);return Ct(i,e-pe)+pe}function Id(n){if(typeof n!="bigint")throw new Error("field order must be bigint");let e=n.toString(2).length;return Math.ceil(e/8)}function Ty(n){let e=Id(n);return e+Math.ceil(e/2)}function D_(n,e,t=!1){let r=n.length,s=Id(e),i=Ty(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);let o=t?(0,Lt.bytesToNumberBE)(n):(0,Lt.bytesToNumberLE)(n),a=Ct(o,e-pe)+pe;return t?(0,Lt.numberToBytesLE)(a,s):(0,Lt.numberToBytesBE)(a,s)}});var Sy=U(nu=>{"use strict";h();y();Object.defineProperty(nu,"__esModule",{value:!0});nu.wNAF=G_;nu.validateBasic=k_;var xy=io(),V_=Ls(),F_=BigInt(0),zd=BigInt(1);function G_(n,e){let t=(s,i)=>{let o=i.negate();return s?o:i},r=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=n.ZERO,a=s;for(;i>F_;)i&zd&&(o=o.add(a)),a=a.double(),i>>=zd;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=r(i),c=[],l=s,d=l;for(let u=0;u<o;u++){d=l,c.push(d);for(let g=1;g<a;g++)d=d.add(l),c.push(d);l=d.double()}return c},wNAF(s,i,o){let{windows:a,windowSize:c}=r(s),l=n.ZERO,d=n.BASE,u=BigInt(2**s-1),g=2**s,w=BigInt(s);for(let m=0;m<a;m++){let f=m*c,b=Number(o&u);o>>=w,b>c&&(b-=g,o+=zd);let T=f,p=f+Math.abs(b)-1,_=m%2!==0,S=b<0;b===0?d=d.add(t(_,i[T])):l=l.add(t(S,i[p]))}return{p:l,f:d}},wNAFCached(s,i,o,a){let c=s._WINDOW_SIZE||1,l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function k_(n){return(0,xy.validateField)(n.Fp),(0,V_.validateObject)(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,xy.nLength)(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}});var Od=U(lt=>{"use strict";h();y();Object.defineProperty(lt,"__esModule",{value:!0});lt.DER=void 0;lt.weierstrassPoints=vy;lt.weierstrass=Y_;lt.SWUFpSqrtRatio=Uy;lt.mapToCurveSimpleSWU=Q_;var Pd=Sy(),oo=io(),xe=Ls(),Pn=Ls();function $_(n){let e=(0,Pd.validateBasic)(n);xe.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:r,a:s}=e;if(t){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:W_,hexToBytes:X_}=xe;lt.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){let{Err:e}=lt.DER;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");let t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:W_(r),l:n.subarray(t+2)}},toSig(n){let{Err:e}=lt.DER,t=typeof n=="string"?X_(n):n;xe.abytes(t);let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=lt.DER._parseInt(t.subarray(2)),{d:o,l:a}=lt.DER._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(n){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let d=l.toString(16);return d.length&1?`0${d}`:d},r=e(t(n.s)),s=e(t(n.r)),i=r.length/2,o=s.length/2,a=t(i),c=t(o);return`30${t(o+i+4)}02${c}${s}02${a}${r}`}};var dn=BigInt(0),Ue=BigInt(1),Lr=BigInt(2),ru=BigInt(3),Ey=BigInt(4);function vy(n){let e=$_(n),{Fp:t}=e,r=e.toBytes||((m,f,b)=>{let T=f.toAffine();return xe.concatBytes(Uint8Array.from([4]),t.toBytes(T.x),t.toBytes(T.y))}),s=e.fromBytes||(m=>{let f=m.subarray(1),b=t.fromBytes(f.subarray(0,t.BYTES)),T=t.fromBytes(f.subarray(t.BYTES,2*t.BYTES));return{x:b,y:T}});function i(m){let{a:f,b}=e,T=t.sqr(m),p=t.mul(T,m);return t.add(t.add(p,t.mul(m,f)),b)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(m){return typeof m=="bigint"&&dn<m&&m<e.n}function a(m){if(!o(m))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(m){let{allowedPrivateKeyLengths:f,nByteLength:b,wrapPrivateKey:T,n:p}=e;if(f&&typeof m!="bigint"){if(xe.isBytes(m)&&(m=xe.bytesToHex(m)),typeof m!="string"||!f.includes(m.length))throw new Error("Invalid key");m=m.padStart(b*2,"0")}let _;try{_=typeof m=="bigint"?m:xe.bytesToNumberBE((0,Pn.ensureBytes)("private key",m,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof m}`)}return T&&(_=oo.mod(_,p)),a(_),_}let l=new Map;function d(m){if(!(m instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(f,b,T){if(this.px=f,this.py=b,this.pz=T,f==null||!t.isValid(f))throw new Error("x required");if(b==null||!t.isValid(b))throw new Error("y required");if(T==null||!t.isValid(T))throw new Error("z required")}static fromAffine(f){let{x:b,y:T}=f||{};if(!f||!t.isValid(b)||!t.isValid(T))throw new Error("invalid affine point");if(f instanceof u)throw new Error("projective point not allowed");let p=_=>t.eql(_,t.ZERO);return p(b)&&p(T)?u.ZERO:new u(b,T,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let b=t.invertBatch(f.map(T=>T.pz));return f.map((T,p)=>T.toAffine(b[p])).map(u.fromAffine)}static fromHex(f){let b=u.fromAffine(s((0,Pn.ensureBytes)("pointHex",f)));return b.assertValidity(),b}static fromPrivateKey(f){return u.BASE.multiply(c(f))}_setWindowSize(f){this._WINDOW_SIZE=f,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:f,y:b}=this.toAffine();if(!t.isValid(f)||!t.isValid(b))throw new Error("bad point: x or y not FE");let T=t.sqr(b),p=i(f);if(!t.eql(T,p))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:f}=this.toAffine();if(t.isOdd)return!t.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){d(f);let{px:b,py:T,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.eql(t.mul(b,v),t.mul(_,p)),z=t.eql(t.mul(T,v),t.mul(S,p));return x&&z}negate(){return new u(this.px,t.neg(this.py),this.pz)}double(){let{a:f,b}=e,T=t.mul(b,ru),{px:p,py:_,pz:S}=this,v=t.ZERO,x=t.ZERO,z=t.ZERO,I=t.mul(p,p),j=t.mul(_,_),L=t.mul(S,S),M=t.mul(p,_);return M=t.add(M,M),z=t.mul(p,S),z=t.add(z,z),v=t.mul(f,z),x=t.mul(T,L),x=t.add(v,x),v=t.sub(j,x),x=t.add(j,x),x=t.mul(v,x),v=t.mul(M,v),z=t.mul(T,z),L=t.mul(f,L),M=t.sub(I,L),M=t.mul(f,M),M=t.add(M,z),z=t.add(I,I),I=t.add(z,I),I=t.add(I,L),I=t.mul(I,M),x=t.add(x,I),L=t.mul(_,S),L=t.add(L,L),I=t.mul(L,M),v=t.sub(v,I),z=t.mul(L,j),z=t.add(z,z),z=t.add(z,z),new u(v,x,z)}add(f){d(f);let{px:b,py:T,pz:p}=this,{px:_,py:S,pz:v}=f,x=t.ZERO,z=t.ZERO,I=t.ZERO,j=e.a,L=t.mul(e.b,ru),M=t.mul(b,_),Y=t.mul(T,S),Q=t.mul(p,v),R=t.add(b,T),A=t.add(_,S);R=t.mul(R,A),A=t.add(M,Y),R=t.sub(R,A),A=t.add(b,p);let B=t.add(_,v);return A=t.mul(A,B),B=t.add(M,Q),A=t.sub(A,B),B=t.add(T,p),x=t.add(S,v),B=t.mul(B,x),x=t.add(Y,Q),B=t.sub(B,x),I=t.mul(j,A),x=t.mul(L,Q),I=t.add(x,I),x=t.sub(Y,I),I=t.add(Y,I),z=t.mul(x,I),Y=t.add(M,M),Y=t.add(Y,M),Q=t.mul(j,Q),A=t.mul(L,A),Y=t.add(Y,Q),Q=t.sub(M,Q),Q=t.mul(j,Q),A=t.add(A,Q),M=t.mul(Y,A),z=t.add(z,M),M=t.mul(B,A),x=t.mul(R,x),x=t.sub(x,M),M=t.mul(R,Y),I=t.mul(B,I),I=t.add(I,M),new u(x,z,I)}subtract(f){return this.add(f.negate())}is0(){return this.equals(u.ZERO)}wNAF(f){return w.wNAFCached(this,l,f,b=>{let T=t.invertBatch(b.map(p=>p.pz));return b.map((p,_)=>p.toAffine(T[_])).map(u.fromAffine)})}multiplyUnsafe(f){let b=u.ZERO;if(f===dn)return b;if(a(f),f===Ue)return this;let{endo:T}=e;if(!T)return w.unsafeLadder(this,f);let{k1neg:p,k1:_,k2neg:S,k2:v}=T.splitScalar(f),x=b,z=b,I=this;for(;_>dn||v>dn;)_&Ue&&(x=x.add(I)),v&Ue&&(z=z.add(I)),I=I.double(),_>>=Ue,v>>=Ue;return p&&(x=x.negate()),S&&(z=z.negate()),z=new u(t.mul(z.px,T.beta),z.py,z.pz),x.add(z)}multiply(f){a(f);let b=f,T,p,{endo:_}=e;if(_){let{k1neg:S,k1:v,k2neg:x,k2:z}=_.splitScalar(b),{p:I,f:j}=this.wNAF(v),{p:L,f:M}=this.wNAF(z);I=w.constTimeNegate(S,I),L=w.constTimeNegate(x,L),L=new u(t.mul(L.px,_.beta),L.py,L.pz),T=I.add(L),p=j.add(M)}else{let{p:S,f:v}=this.wNAF(b);T=S,p=v}return u.normalizeZ([T,p])[0]}multiplyAndAddUnsafe(f,b,T){let p=u.BASE,_=(v,x)=>x===dn||x===Ue||!v.equals(p)?v.multiplyUnsafe(x):v.multiply(x),S=_(this,b).add(_(f,T));return S.is0()?void 0:S}toAffine(f){let{px:b,py:T,pz:p}=this,_=this.is0();f==null&&(f=_?t.ONE:t.inv(p));let S=t.mul(b,f),v=t.mul(T,f),x=t.mul(p,f);if(_)return{x:t.ZERO,y:t.ZERO};if(!t.eql(x,t.ONE))throw new Error("invZ was invalid");return{x:S,y:v}}isTorsionFree(){let{h:f,isTorsionFree:b}=e;if(f===Ue)return!0;if(b)return b(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:b}=e;return f===Ue?this:b?b(u,this):this.multiplyUnsafe(e.h)}toRawBytes(f=!0){return this.assertValidity(),r(u,this,f)}toHex(f=!0){return xe.bytesToHex(this.toRawBytes(f))}}u.BASE=new u(e.Gx,e.Gy,t.ONE),u.ZERO=new u(t.ZERO,t.ONE,t.ZERO);let g=e.nBitLength,w=(0,Pd.wNAF)(u,e.endo?Math.ceil(g/2):g);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Z_(n){let e=(0,Pd.validateBasic)(n);return xe.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Y_(n){let e=Z_(n),{Fp:t,n:r}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(A){return dn<A&&A<t.ORDER}function a(A){return oo.mod(A,r)}function c(A){return oo.invert(A,r)}let{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:u,isWithinCurveOrder:g}=vy({...e,toBytes(A,B,P){let O=B.toAffine(),q=t.toBytes(O.x),K=xe.concatBytes;return P?K(Uint8Array.from([B.hasEvenY()?2:3]),q):K(Uint8Array.from([4]),q,t.toBytes(O.y))},fromBytes(A){let B=A.length,P=A[0],O=A.subarray(1);if(B===s&&(P===2||P===3)){let q=xe.bytesToNumberBE(O);if(!o(q))throw new Error("Point is not on curve");let K=u(q),V;try{V=t.sqrt(K)}catch(W){let ie=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+ie)}let k=(V&Ue)===Ue;return(P&1)===1!==k&&(V=t.neg(V)),{x:q,y:V}}else if(B===i&&P===4){let q=t.fromBytes(O.subarray(0,t.BYTES)),K=t.fromBytes(O.subarray(t.BYTES,2*t.BYTES));return{x:q,y:K}}else throw new Error(`Point of length ${B} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),w=A=>xe.bytesToHex(xe.numberToBytesBE(A,e.nByteLength));function m(A){let B=r>>Ue;return A>B}function f(A){return m(A)?a(-A):A}let b=(A,B,P)=>xe.bytesToNumberBE(A.slice(B,P));class T{constructor(B,P,O){this.r=B,this.s=P,this.recovery=O,this.assertValidity()}static fromCompact(B){let P=e.nByteLength;return B=(0,Pn.ensureBytes)("compactSignature",B,P*2),new T(b(B,0,P),b(B,P,2*P))}static fromDER(B){let{r:P,s:O}=lt.DER.toSig((0,Pn.ensureBytes)("DER",B));return new T(P,O)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(B){return new T(this.r,this.s,B)}recoverPublicKey(B){let{r:P,s:O,recovery:q}=this,K=z((0,Pn.ensureBytes)("msgHash",B));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");let V=q===2||q===3?P+e.n:P;if(V>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let k=(q&1)===0?"02":"03",G=l.fromHex(k+w(V)),W=c(V),ie=a(-K*W),he=a(O*W),Be=l.BASE.multiplyAndAddUnsafe(G,ie,he);if(!Be)throw new Error("point at infinify");return Be.assertValidity(),Be}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return xe.hexToBytes(this.toDERHex())}toDERHex(){return lt.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xe.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}let p={isValidPrivateKey(A){try{return d(A),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{let A=oo.getMinHashLength(e.n);return oo.mapHashToField(e.randomBytes(A),e.n)},precompute(A=8,B=l.BASE){return B._setWindowSize(A),B.multiply(BigInt(3)),B}};function _(A,B=!0){return l.fromPrivateKey(A).toRawBytes(B)}function S(A){let B=xe.isBytes(A),P=typeof A=="string",O=(B||P)&&A.length;return B?O===s||O===i:P?O===2*s||O===2*i:A instanceof l}function v(A,B,P=!0){if(S(A))throw new Error("first arg must be private key");if(!S(B))throw new Error("second arg must be public key");return l.fromHex(B).multiply(d(A)).toRawBytes(P)}let x=e.bits2int||function(A){let B=xe.bytesToNumberBE(A),P=A.length*8-e.nBitLength;return P>0?B>>BigInt(P):B},z=e.bits2int_modN||function(A){return a(x(A))},I=xe.bitMask(e.nBitLength);function j(A){if(typeof A!="bigint")throw new Error("bigint expected");if(!(dn<=A&&A<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xe.numberToBytesBE(A,e.nByteLength)}function L(A,B,P=M){if(["recovered","canonical"].some(ge=>ge in P))throw new Error("sign() legacy options not supported");let{hash:O,randomBytes:q}=e,{lowS:K,prehash:V,extraEntropy:k}=P;K==null&&(K=!0),A=(0,Pn.ensureBytes)("msgHash",A),V&&(A=(0,Pn.ensureBytes)("prehashed msgHash",O(A)));let G=z(A),W=d(B),ie=[j(W),j(G)];if(k!=null&&k!==!1){let ge=k===!0?q(t.BYTES):k;ie.push((0,Pn.ensureBytes)("extraEntropy",ge))}let he=xe.concatBytes(...ie),Be=G;function Ee(ge){let Le=x(ge);if(!g(Le))return;let ze=c(Le),ve=l.BASE.multiply(Le).toAffine(),bt=a(ve.x);if(bt===dn)return;let bn=a(ze*a(Be+bt*W));if(bn===dn)return;let es=(ve.x===bt?0:2)|Number(ve.y&Ue),Ka=bn;return K&&m(bn)&&(Ka=f(bn),es^=1),new T(bt,Ka,es)}return{seed:he,k2sig:Ee}}let M={lowS:e.lowS,prehash:!1},Y={lowS:e.lowS,prehash:!1};function Q(A,B,P=M){let{seed:O,k2sig:q}=L(A,B,P),K=e;return xe.createHmacDrbg(K.hash.outputLen,K.nByteLength,K.hmac)(O,q)}l.BASE._setWindowSize(8);function R(A,B,P,O=Y){let q=A;if(B=(0,Pn.ensureBytes)("msgHash",B),P=(0,Pn.ensureBytes)("publicKey",P),"strict"in O)throw new Error("options.strict was renamed to lowS");let{lowS:K,prehash:V}=O,k,G;try{if(typeof q=="string"||xe.isBytes(q))try{k=T.fromDER(q)}catch(ve){if(!(ve instanceof lt.DER.Err))throw ve;k=T.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){let{r:ve,s:bt}=q;k=new T(ve,bt)}else throw new Error("PARSE");G=l.fromHex(P)}catch(ve){if(ve.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&k.hasHighS())return!1;V&&(B=e.hash(B));let{r:W,s:ie}=k,he=z(B),Be=c(ie),Ee=a(he*Be),ge=a(W*Be),Le=l.BASE.multiplyAndAddUnsafe(G,Ee,ge)?.toAffine();return Le?a(Le.x)===W:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:v,sign:Q,verify:R,ProjectivePoint:l,Signature:T,utils:p}}function Uy(n,e){let t=n.ORDER,r=dn;for(let m=t-Ue;m%Lr===dn;m/=Lr)r+=Ue;let s=r,i=Lr<<s-Ue-Ue,o=i*Lr,a=(t-Ue)/o,c=(a-Ue)/Lr,l=o-Ue,d=i,u=n.pow(e,a),g=n.pow(e,(a+Ue)/Lr),w=(m,f)=>{let b=u,T=n.pow(f,l),p=n.sqr(T);p=n.mul(p,f);let _=n.mul(m,p);_=n.pow(_,c),_=n.mul(_,T),T=n.mul(_,f),p=n.mul(_,m);let S=n.mul(p,T);_=n.pow(S,d);let v=n.eql(_,n.ONE);T=n.mul(p,g),_=n.mul(S,b),p=n.cmov(T,p,v),S=n.cmov(_,S,v);for(let x=s;x>Ue;x--){let z=x-Lr;z=Lr<<z-Ue;let I=n.pow(S,z),j=n.eql(I,n.ONE);T=n.mul(p,b),b=n.mul(b,b),I=n.mul(S,b),p=n.cmov(T,p,j),S=n.cmov(I,S,j)}return{isValid:v,value:p}};if(n.ORDER%Ey===ru){let m=(n.ORDER-ru)/Ey,f=n.sqrt(n.neg(e));w=(b,T)=>{let p=n.sqr(T),_=n.mul(b,T);p=n.mul(p,_);let S=n.pow(p,m);S=n.mul(S,_);let v=n.mul(S,f),x=n.mul(n.sqr(S),T),z=n.eql(x,b),I=n.cmov(v,S,z);return{isValid:z,value:I}}}return w}function Q_(n,e){if(oo.validateField(n),!n.isValid(e.A)||!n.isValid(e.B)||!n.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let t=Uy(n,e.Z);if(!n.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,o,a,c,l,d,u;s=n.sqr(r),s=n.mul(s,e.Z),i=n.sqr(s),i=n.add(i,s),o=n.add(i,n.ONE),o=n.mul(o,e.B),a=n.cmov(e.Z,n.neg(i),!n.eql(i,n.ZERO)),a=n.mul(a,e.A),i=n.sqr(o),l=n.sqr(a),c=n.mul(l,e.A),i=n.add(i,c),i=n.mul(i,o),l=n.mul(l,a),c=n.mul(l,e.B),i=n.add(i,c),d=n.mul(s,o);let{isValid:g,value:w}=t(i,l);u=n.mul(s,r),u=n.mul(u,w),d=n.cmov(d,o,g),u=n.cmov(u,w,g);let m=n.isOdd(r)===n.isOdd(u);return u=n.cmov(n.neg(u),u,m),d=n.div(d,a),{x:d,y:u}}}});var Py=U(su=>{"use strict";h();y();Object.defineProperty(su,"__esModule",{value:!0});su.getHash=zy;su.createCurve=tA;var J_=hi(),Iy=pt(),eA=Od();function zy(n){return{hash:n,hmac:(e,...t)=>(0,J_.hmac)(n,e,(0,Iy.concatBytes)(...t)),randomBytes:Iy.randomBytes}}function tA(n,e){let t=r=>(0,eA.weierstrass)({...n,...zy(r)});return Object.freeze({...t(e),create:t})}});var qy=U(Ks=>{"use strict";h();y();Object.defineProperty(Ks,"__esModule",{value:!0});Ks.expand_message_xmd=Oy;Ks.expand_message_xof=Ny;Ks.hash_to_field=Nd;Ks.isogenyMap=iA;Ks.createHasher=oA;var nA=io(),tt=Ls(),rA=tt.bytesToNumberBE;function Kr(n,e){if(n<0||n>=1<<8*e)throw new Error(`bad I2OSP call: value=${n} length=${e}`);let t=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)t[r]=n&255,n>>>=8;return new Uint8Array(t)}function sA(n,e){let t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n[r]^e[r];return t}function qd(n){if(!Number.isSafeInteger(n))throw new Error("number expected")}function Oy(n,e,t,r){(0,tt.abytes)(n),(0,tt.abytes)(e),qd(t),e.length>255&&(e=r((0,tt.concatBytes)((0,tt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:s,blockLen:i}=r,o=Math.ceil(t/s);if(o>255)throw new Error("Invalid xmd length");let a=(0,tt.concatBytes)(e,Kr(e.length,1)),c=Kr(0,i),l=Kr(t,2),d=new Array(o),u=r((0,tt.concatBytes)(c,n,l,Kr(0,1),a));d[0]=r((0,tt.concatBytes)(u,Kr(1,1),a));for(let w=1;w<=o;w++){let m=[sA(u,d[w-1]),Kr(w+1,1),a];d[w]=r((0,tt.concatBytes)(...m))}return(0,tt.concatBytes)(...d).slice(0,t)}function Ny(n,e,t,r,s){if((0,tt.abytes)(n),(0,tt.abytes)(e),qd(t),e.length>255){let i=Math.ceil(2*r/8);e=s.create({dkLen:i}).update((0,tt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:t}).update(n).update(Kr(t,2)).update(e).update(Kr(e.length,1)).digest()}function Nd(n,e,t){(0,tt.validateObject)(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:r,k:s,m:i,hash:o,expand:a,DST:c}=t;(0,tt.abytes)(n),qd(e);let l=typeof c=="string"?(0,tt.utf8ToBytes)(c):c,d=r.toString(2).length,u=Math.ceil((d+s)/8),g=e*i*u,w;if(a==="xmd")w=Oy(n,l,g,o);else if(a==="xof")w=Ny(n,l,g,s,o);else if(a==="_internal_pass")w=n;else throw new Error('expand must be "xmd" or "xof"');let m=new Array(e);for(let f=0;f<e;f++){let b=new Array(i);for(let T=0;T<i;T++){let p=u*(T+f*i),_=w.subarray(p,p+u);b[T]=(0,nA.mod)(rA(_),r)}m[f]=b}return m}function iA(n,e){let t=e.map(r=>Array.from(r).reverse());return(r,s)=>{let[i,o,a,c]=t.map(l=>l.reduce((d,u)=>n.add(n.mul(d,r),u)));return r=n.div(i,o),s=n.mul(s,n.div(a,c)),{x:r,y:s}}}function oA(n,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){let i=Nd(r,2,{...t,DST:t.DST,...s}),o=n.fromAffine(e(i[0])),a=n.fromAffine(e(i[1])),c=o.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){let i=Nd(r,1,{...t,DST:t.encodeDST,...s}),o=n.fromAffine(e(i[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(let i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);let s=n.fromAffine(e(r)).clearCofactor();return s.assertValidity(),s}}}});var Gy=U(zt=>{"use strict";h();y();Object.defineProperty(zt,"__esModule",{value:!0});zt.encodeToCurve=zt.hashToCurve=zt.schnorr=zt.secp256k1=void 0;var iu=ja(),aA=pt(),cA=Py(),Hy=qy(),Ve=io(),nt=Ls(),uA=Od(),uu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ou=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Cy=BigInt(1),au=BigInt(2),My=(n,e)=>(n+e/au)/e;function Ly(n){let e=uu,t=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=n*n*n%e,d=l*l*n%e,u=(0,Ve.pow2)(d,t,e)*d%e,g=(0,Ve.pow2)(u,t,e)*d%e,w=(0,Ve.pow2)(g,au,e)*l%e,m=(0,Ve.pow2)(w,s,e)*w%e,f=(0,Ve.pow2)(m,i,e)*m%e,b=(0,Ve.pow2)(f,a,e)*f%e,T=(0,Ve.pow2)(b,c,e)*b%e,p=(0,Ve.pow2)(T,a,e)*f%e,_=(0,Ve.pow2)(p,t,e)*d%e,S=(0,Ve.pow2)(_,o,e)*m%e,v=(0,Ve.pow2)(S,r,e)*l%e,x=(0,Ve.pow2)(v,au,e);if(!jr.eql(jr.sqr(x),n))throw new Error("Cannot find square root");return x}var jr=(0,Ve.Field)(uu,void 0,void 0,{sqrt:Ly});zt.secp256k1=(0,cA.createCurve)({a:BigInt(0),b:BigInt(7),Fp:jr,n:ou,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{let e=ou,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Cy*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=My(i*n,e),c=My(-r*n,e),l=(0,Ve.mod)(n-a*t-c*s,e),d=(0,Ve.mod)(-a*r-c*i,e),u=l>o,g=d>o;if(u&&(l=e-l),g&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:u,k1:l,k2neg:g,k2:d}}}},iu.sha256);var lu=BigInt(0),Ky=n=>typeof n=="bigint"&&lu<n&&n<uu,lA=n=>typeof n=="bigint"&&lu<n&&n<ou,Ry={};function cu(n,...e){let t=Ry[n];if(t===void 0){let r=(0,iu.sha256)(Uint8Array.from(n,s=>s.charCodeAt(0)));t=(0,nt.concatBytes)(r,r),Ry[n]=t}return(0,iu.sha256)((0,nt.concatBytes)(t,...e))}var Cd=n=>n.toRawBytes(!0).slice(1),Rd=n=>(0,nt.numberToBytesBE)(n,32),Md=n=>(0,Ve.mod)(n,uu),pa=n=>(0,Ve.mod)(n,ou),Ld=zt.secp256k1.ProjectivePoint,dA=(n,e,t)=>Ld.BASE.multiplyAndAddUnsafe(n,e,t);function Hd(n){let e=zt.secp256k1.utils.normPrivateKeyToScalar(n),t=Ld.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:pa(-e),bytes:Cd(t)}}function jy(n){if(!Ky(n))throw new Error("bad x: need 0 < x < p");let e=Md(n*n),t=Md(e*n+BigInt(7)),r=Ly(t);r%au!==lu&&(r=Md(-r));let s=new Ld(n,r,Cy);return s.assertValidity(),s}function Dy(...n){return pa((0,nt.bytesToNumberBE)(cu("BIP0340/challenge",...n)))}function fA(n){return Hd(n).bytes}function hA(n,e,t=(0,aA.randomBytes)(32)){let r=(0,nt.ensureBytes)("message",n),{bytes:s,scalar:i}=Hd(e),o=(0,nt.ensureBytes)("auxRand",t,32),a=Rd(i^(0,nt.bytesToNumberBE)(cu("BIP0340/aux",o))),c=cu("BIP0340/nonce",a,s,r),l=pa((0,nt.bytesToNumberBE)(c));if(l===lu)throw new Error("sign failed: k is zero");let{bytes:d,scalar:u}=Hd(l),g=Dy(d,s,r),w=new Uint8Array(64);if(w.set(d,0),w.set(Rd(pa(u+g*i)),32),!Vy(w,r,s))throw new Error("sign: Invalid signature produced");return w}function Vy(n,e,t){let r=(0,nt.ensureBytes)("signature",n,64),s=(0,nt.ensureBytes)("message",e),i=(0,nt.ensureBytes)("publicKey",t,32);try{let o=jy((0,nt.bytesToNumberBE)(i)),a=(0,nt.bytesToNumberBE)(r.subarray(0,32));if(!Ky(a))return!1;let c=(0,nt.bytesToNumberBE)(r.subarray(32,64));if(!lA(c))return!1;let l=Dy(Rd(a),Cd(o),s),d=dA(o,c,pa(-l));return!(!d||!d.hasEvenY()||d.toAffine().x!==a)}catch{return!1}}zt.schnorr=(()=>({getPublicKey:fA,sign:hA,verify:Vy,utils:{randomPrivateKey:zt.secp256k1.utils.randomPrivateKey,lift_x:jy,pointToBytes:Cd,numberToBytesBE:nt.numberToBytesBE,bytesToNumberBE:nt.bytesToNumberBE,taggedHash:cu,mod:Ve.mod}}))();var yA=(()=>(0,Hy.isogenyMap)(jr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(n=>n.map(e=>BigInt(e)))))(),gA=(()=>(0,uA.mapToCurveSimpleSWU)(jr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:jr.create(BigInt("-11"))}))(),Fy=(()=>(0,Hy.createHasher)(zt.secp256k1.ProjectivePoint,n=>{let{x:e,y:t}=gA(jr.create(n[0]));return yA(e,t)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:jr.ORDER,m:1,k:128,expand:"xmd",hash:iu.sha256}))();zt.hashToCurve=(()=>Fy.hashToCurve)();zt.encodeToCurve=(()=>Fy.encodeToCurve)()});var Zy=U(Jn=>{"use strict";h();y();Object.defineProperty(Jn,"__esModule",{value:!0});Jn.HDKey=Jn.HARDENED_OFFSET=void 0;var ky=hi(),bA=uy(),Xy=ja(),$y=Go(),wa=Lf(),On=pt(),Yn=Gy(),pA=io(),wA=Cf(),du=Yn.secp256k1.ProjectivePoint,Kd=(0,wA.createBase58check)(Xy.sha256);function Wy(n){return BigInt(`0x${(0,On.bytesToHex)(n)}`)}function mA(n){return(0,On.hexToBytes)(n.toString(16).padStart(64,"0"))}var _A=(0,On.utf8ToBytes)("Bitcoin seed"),jd={private:76066276,public:76067358};Jn.HARDENED_OFFSET=2147483648;var AA=n=>(0,bA.ripemd160)((0,Xy.sha256)(n)),BA=n=>(0,On.createView)(n).getUint32(0,!1),fu=n=>{if(!Number.isSafeInteger(n)||n<0||n>2**32-1)throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);let e=new Uint8Array(4);return(0,On.createView)(e).setUint32(0,n,!1),e},Qn=class{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return BA(this.pubHash)}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){let e=this.privateKey;if(!e)throw new Error("No private key");return Kd.encode(this.serialize(this.versions.private,(0,On.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Kd.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=jd){if((0,wa.bytes)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);let r=(0,ky.hmac)($y.sha512,_A,e);return new Qn({versions:t,chainCode:r.slice(32),privateKey:r.slice(0,32)})}static fromExtendedKey(e,t=jd){let r=Kd.decode(e),s=(0,On.createView)(r),i=s.getUint32(0,!1),o={versions:t,depth:r[4],parentFingerprint:s.getUint32(5,!1),index:s.getUint32(9,!1),chainCode:r.slice(13,45)},a=r.slice(45),c=a[0]===0;if(i!==t[c?"private":"public"])throw new Error("Version mismatch");return c?new Qn({...o,privateKey:a.slice(1)}):new Qn({...o,publicKey:a})}static fromJSON(e){return Qn.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||typeof e!="object")throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||jd,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!Yn.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey=typeof e.privateKey=="bigint"?e.privateKey:Wy(e.privateKey),this.privKeyBytes=mA(this.privKey),this.pubKey=Yn.secp256k1.getPublicKey(e.privateKey,!0)}else if(e.publicKey)this.pubKey=du.fromHex(e.publicKey).toRawBytes(!0);else throw new Error("HDKey: no public or private key provided");this.pubHash=AA(this.pubKey)}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;let t=e.replace(/^[mM]'?\//,"").split("/"),r=this;for(let s of t){let i=/^(\d+)('?)$/.exec(s),o=i&&i[1];if(!i||i.length!==3||typeof o!="string")throw new Error(`Invalid child index: ${s}`);let a=+o;if(!Number.isSafeInteger(a)||a>=Jn.HARDENED_OFFSET)throw new Error("Invalid index");i[2]==="'"&&(a+=Jn.HARDENED_OFFSET),r=r.deriveChild(a)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=fu(e);if(e>=Jn.HARDENED_OFFSET){let a=this.privateKey;if(!a)throw new Error("Could not derive hardened child key");t=(0,On.concatBytes)(new Uint8Array([0]),a,t)}else t=(0,On.concatBytes)(this.pubKey,t);let r=(0,ky.hmac)($y.sha512,this.chainCode,t),s=Wy(r.slice(0,32)),i=r.slice(32);if(!Yn.secp256k1.utils.isValidPrivateKey(s))throw new Error("Tweak bigger than curve order");let o={versions:this.versions,chainCode:i,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){let a=(0,pA.mod)(this.privKey+s,Yn.secp256k1.CURVE.n);if(!Yn.secp256k1.utils.isValidPrivateKey(a))throw new Error("The tweak was out of range or the resulted private key is invalid");o.privateKey=a}else{let a=du.fromHex(this.pubKey).add(du.fromPrivateKey(s));if(a.equals(du.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");o.publicKey=a.toRawBytes(!0)}return new Qn(o)}catch{return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,wa.bytes)(e,32),Yn.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,wa.bytes)(e,32),(0,wa.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let r;try{r=Yn.secp256k1.Signature.fromCompact(t)}catch{return!1}return Yn.secp256k1.verify(r,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,wa.bytes)(t,33),(0,On.concatBytes)(fu(e),new Uint8Array([this.depth]),fu(this.parentFingerprint),fu(this.index),this.chainCode,t)}};Jn.HDKey=Qn});var Dd=U(Dr=>{"use strict";h();y();Object.defineProperty(Dr,"__esModule",{value:!0});Dr.Secp256k1Signature=Dr.Secp256k1PrivateKey=Dr.Secp256k1PublicKey=void 0;var Qy=ar(),hu=iy(),TA=Zy(),xA=Yt(),ma=an(),Yy=Hc(),SA=Rs(),EA=Hs(),Jy=yd(),Nn=class extends SA.PublicKey{constructor(e){super();let t=ma.Hex.fromHexInput(e);if(t.toUint8Array().length!==Nn.LENGTH)throw new Error(`PublicKey length should be ${Nn.LENGTH}`);this.key=t}verifySignature(e){let{message:t,signature:r}=e;if(!(r instanceof qn))return!1;let s=(0,Jy.convertSigningMessage)(t),i=ma.Hex.fromHexInput(s).toUint8Array(),o=(0,Qy.sha3_256)(i),a=r.toUint8Array();return hu.secp256k1.verify(a,o,this.key.toUint8Array(),{lowS:!0})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Nn(t)}static isPublicKey(e){return e instanceof Nn}};Dr.Secp256k1PublicKey=Nn;Nn.LENGTH=65;var Jt=class extends xA.Serializable{constructor(e){super();let t=ma.Hex.fromHexInput(e);if(t.toUint8Array().length!==Jt.LENGTH)throw new Error(`PrivateKey length should be ${Jt.LENGTH}`);this.key=t}static generate(){let e=hu.secp256k1.utils.randomPrivateKey();return new Jt(e)}static fromDerivationPath(e,t){if(!(0,Yy.isValidBIP44Path)(e))throw new Error(`Invalid derivation path ${e}`);return Jt.fromDerivationPathInner(e,(0,Yy.mnemonicToSeed)(t))}static fromDerivationPathInner(e,t){let{privateKey:r}=TA.HDKey.fromMasterSeed(t).derive(e);if(r===null)throw new Error("Invalid key");return new Jt(r)}sign(e){let t=(0,Jy.convertSigningMessage)(e),r=ma.Hex.fromHexInput(t),s=(0,Qy.sha3_256)(r.toUint8Array()),i=hu.secp256k1.sign(s,this.key.toUint8Array(),{lowS:!0});return new qn(i.toCompactRawBytes())}publicKey(){let e=hu.secp256k1.getPublicKey(this.key.toUint8Array(),!1);return new Nn(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new Jt(t)}static isPrivateKey(e){return e instanceof Jt}};Dr.Secp256k1PrivateKey=Jt;Jt.LENGTH=32;var qn=class extends EA.Signature{constructor(e){super();let t=ma.Hex.fromHexInput(e);if(t.toUint8Array().length!==qn.LENGTH)throw new Error(`Signature length should be ${qn.LENGTH}, received ${t.toUint8Array().length}`);this.data=t}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let t=e.deserializeBytes();return new qn(t)}};Dr.Secp256k1Signature=qn;qn.LENGTH=64});var Vd=U(uo=>{"use strict";h();y();Object.defineProperty(uo,"__esModule",{value:!0});uo.AnySignature=uo.AnyPublicKey=void 0;var er=je(),vA=Qi(),_a=Cs(),UA=Rs(),Aa=Dd(),IA=Hs(),ao=class extends UA.AccountPublicKey{constructor(e){if(super(),this.publicKey=e,e instanceof _a.Ed25519PublicKey)this.variant=er.AnyPublicKeyVariant.Ed25519;else if(e instanceof Aa.Secp256k1PublicKey)this.variant=er.AnyPublicKeyVariant.Secp256k1;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:t,signature:r}=e;return r instanceof co?this.publicKey.verifySignature({message:t,signature:r.signature}):!1}authKey(){return vA.AuthenticationKey.fromSchemeAndBytes({scheme:er.SigningScheme.SingleKey,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case er.AnyPublicKeyVariant.Ed25519:r=_a.Ed25519PublicKey.deserialize(e);break;case er.AnyPublicKeyVariant.Secp256k1:r=Aa.Secp256k1PublicKey.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${t}`)}return new ao(r)}static isPublicKey(e){return e instanceof ao}isEd25519(){return this.publicKey instanceof _a.Ed25519PublicKey}isSecp256k1PublicKey(){return this.publicKey instanceof Aa.Secp256k1PublicKey}};uo.AnyPublicKey=ao;var co=class extends IA.Signature{constructor(e){if(super(),this.signature=e,e instanceof _a.Ed25519Signature)this.variant=er.AnySignatureVariant.Ed25519;else if(e instanceof Aa.Secp256k1Signature)this.variant=er.AnySignatureVariant.Secp256k1;else throw new Error("Unsupported signature type")}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let t=e.deserializeUleb128AsU32(),r;switch(t){case er.AnySignatureVariant.Ed25519:r=_a.Ed25519Signature.deserialize(e);break;case er.AnySignatureVariant.Secp256k1:r=Aa.Secp256k1Signature.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${t}`)}return new co(r)}};uo.AnySignature=co});var Fd=U(lo=>{"use strict";h();y();Object.defineProperty(lo,"__esModule",{value:!0});lo.MultiKeySignature=lo.MultiKey=void 0;var zA=je(),PA=Qi(),OA=Rs(),NA=Hs(),Vr=Vd();function qA(n){let e=n;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var Ba=class extends OA.AccountPublicKey{constructor(e){super();let{publicKeys:t,signaturesRequired:r}=e;if(r<1)throw new Error("The number of required signatures needs to be greater than 0");if(t.length<r)throw new Error(`Provided ${t.length} public keys is smaller than the ${r} required signatures`);this.publicKeys=t.map(s=>s instanceof Vr.AnyPublicKey?s:new Vr.AnyPublicKey(s)),this.signaturesRequired=r}verifySignature(e){throw new Error("not implemented")}authKey(){return PA.AuthenticationKey.fromSchemeAndBytes({scheme:zA.SigningScheme.MultiKey,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let t=e.deserializeVector(Vr.AnyPublicKey),r=e.deserializeU8();return new Ba({publicKeys:t,signaturesRequired:r})}createBitmap(e){let{bits:t}=e,r=128,s=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach((o,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(i.has(o))throw new Error(`Duplicate bit ${o} detected.`);i.add(o);let c=Math.floor(o/8),l=s[c];l|=r>>o%8,s[c]=l}),s}getIndex(e){let t=e instanceof Vr.AnyPublicKey?e:new Vr.AnyPublicKey(e),r=this.publicKeys.findIndex(s=>s.toString()===t.toString());if(r!==-1)return r;throw new Error("Public key not found in MultiKey")}};lo.MultiKey=Ba;var dt=class extends NA.Signature{constructor(e){super();let{signatures:t,bitmap:r}=e;if(t.length>dt.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${dt.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=t.map(i=>i instanceof Vr.AnySignature?i:new Vr.AnySignature(i)),!(r instanceof Uint8Array))this.bitmap=dt.createBitmap({bits:r});else{if(r.length!==dt.BITMAP_LEN)throw new Error(`"bitmap" length should be ${dt.BITMAP_LEN}`);this.bitmap=r}let s=this.bitmap.reduce((i,o)=>i+qA(o),0);if(s!==this.signatures.length)throw new Error(`Expecting ${s} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:t}=e,r=128,s=new Uint8Array([0,0,0,0]),i=new Set;return t.forEach(o=>{if(o>=dt.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${dt.MAX_SIGNATURES_SUPPORTED-1}.`);if(i.has(o))throw new Error("Duplicate bits detected.");i.add(o);let a=Math.floor(o/8),c=s[a];c|=r>>o%8,s[a]=c}),s}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let t=e.deserializeVector(Vr.AnySignature),r=e.deserializeBytes();return new dt({signatures:t,bitmap:r})}};lo.MultiKeySignature=dt;dt.BITMAP_LEN=4;dt.MAX_SIGNATURES_SUPPORTED=dt.BITMAP_LEN*8});var tg=U(eg=>{"use strict";h();y();Object.defineProperty(eg,"__esModule",{value:!0})});var Fr=U(ft=>{"use strict";h();y();var MA=ft&&ft.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),tr=ft&&ft.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&MA(e,n,t)};Object.defineProperty(ft,"__esModule",{value:!0});tr(Cs(),ft);tr(Hc(),ft);tr(Dc(),ft);tr(Fd(),ft);tr(tg(),ft);tr(Rs(),ft);tr(Dd(),ft);tr(Hs(),ft);tr(Vd(),ft)});var ks=U(en=>{"use strict";h();y();Object.defineProperty(en,"__esModule",{value:!0});en.AccountAuthenticatorMultiKey=en.AccountAuthenticatorSingleKey=en.AccountAuthenticatorMultiEd25519=en.AccountAuthenticatorEd25519=en.AccountAuthenticator=void 0;var RA=Yt(),ng=Fr(),rg=Cs(),sg=Dc(),ig=Fd(),Gr=je(),js=class extends RA.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case Gr.AccountAuthenticatorVariant.Ed25519:return Ds.load(e);case Gr.AccountAuthenticatorVariant.MultiEd25519:return Vs.load(e);case Gr.AccountAuthenticatorVariant.SingleKey:return Fs.load(e);case Gr.AccountAuthenticatorVariant.MultiKey:return Gs.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}isEd25519(){return this instanceof Ds}isMultiEd25519(){return this instanceof Vs}isSingleKey(){return this instanceof Fs}isMultiKey(){return this instanceof Gs}};en.AccountAuthenticator=js;var Ds=class extends js{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.Ed25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=rg.Ed25519PublicKey.deserialize(e),r=rg.Ed25519Signature.deserialize(e);return new Ds(t,r)}};en.AccountAuthenticatorEd25519=Ds;var Vs=class extends js{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.MultiEd25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=sg.MultiEd25519PublicKey.deserialize(e),r=sg.MultiEd25519Signature.deserialize(e);return new Vs(t,r)}};en.AccountAuthenticatorMultiEd25519=Vs;var Fs=class extends js{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.SingleKey),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=ng.AnyPublicKey.deserialize(e),r=ng.AnySignature.deserialize(e);return new Fs(t,r)}};en.AccountAuthenticatorSingleKey=Fs;var Gs=class extends js{constructor(e,t){super(),this.public_keys=e,this.signatures=t}serialize(e){e.serializeU32AsUleb128(Gr.AccountAuthenticatorVariant.MultiKey),this.public_keys.serialize(e),this.signatures.serialize(e)}static load(e){let t=ig.MultiKey.deserialize(e),r=ig.MultiKeySignature.deserialize(e);return new Gs(t,r)}};en.AccountAuthenticatorMultiKey=Gs});var yu=U(Oe=>{"use strict";h();y();Object.defineProperty(Oe,"__esModule",{value:!0});Oe.ProcessorType=Oe.RAW_TRANSACTION_WITH_DATA_SALT=Oe.RAW_TRANSACTION_SALT=Oe.APTOS_COIN=Oe.DEFAULT_TXN_TIMEOUT_SEC=Oe.DEFAULT_TXN_EXP_SEC_FROM_NOW=Oe.DEFAULT_MAX_GAS_AMOUNT=Oe.AptosApiType=void 0;var HA;(function(n){n.FULLNODE="Fullnode",n.INDEXER="Indexer",n.FAUCET="Faucet"})(HA=Oe.AptosApiType||(Oe.AptosApiType={}));Oe.DEFAULT_MAX_GAS_AMOUNT=2e5;Oe.DEFAULT_TXN_EXP_SEC_FROM_NOW=20;Oe.DEFAULT_TXN_TIMEOUT_SEC=20;Oe.APTOS_COIN="0x1::aptos_coin::AptosCoin";Oe.RAW_TRANSACTION_SALT="APTOS::RawTransaction";Oe.RAW_TRANSACTION_WITH_DATA_SALT="APTOS::RawTransactionWithData";var CA;(function(n){n.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",n.DEFAULT="default_processor",n.EVENTS_PROCESSOR="events_processor",n.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",n.STAKE_PROCESSOR="stake_processor",n.TOKEN_V2_PROCESSOR="token_v2_processor",n.USER_TRANSACTION_PROCESSOR="user_transaction_processor"})(CA=Oe.ProcessorType||(Oe.ProcessorType={}))});var Gd=U(gu=>{"use strict";h();y();Object.defineProperty(gu,"__esModule",{value:!0});gu.ChainId=void 0;var LA=Me(),Ta=class extends LA.Serializable{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let t=e.deserializeU8();return new Ta(t)}};gu.ChainId=Ta});var fo=U(bu=>{"use strict";h();y();Object.defineProperty(bu,"__esModule",{value:!0});bu.Identifier=void 0;var KA=Me(),xa=class extends KA.Serializable{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let t=e.deserializeStr();return new xa(t)}};bu.Identifier=xa});var Kt=U(fn=>{"use strict";h();y();var jA=fn&&fn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Sa=fn&&fn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&jA(e,n,t)};Object.defineProperty(fn,"__esModule",{value:!0});Sa(Ms(),fn);Sa(Qi(),fn);Sa(Bc(),fn);Sa(Fr(),fn);Sa(an(),fn)});var kd=U(pu=>{"use strict";h();y();Object.defineProperty(pu,"__esModule",{value:!0});pu.ModuleId=void 0;var DA=Me(),og=Kt(),ag=fo(),ho=class extends DA.Serializable{constructor(e,t){super(),this.address=e,this.name=t}static fromStr(e){let t=e.split("::");if(t.length!==2)throw new Error("Invalid module id.");return new ho(og.AccountAddress.fromString(t[0]),new ag.Identifier(t[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let t=og.AccountAddress.deserialize(e),r=ag.Identifier.deserialize(e);return new ho(t,r)}};pu.ModuleId=ho});var va=U(ne=>{"use strict";h();y();Object.defineProperty(ne,"__esModule",{value:!0});ne.objectStructTag=ne.optionStructTag=ne.stringStructTag=ne.aptosCoinStructTag=ne.StructTag=ne.TypeTagStruct=ne.TypeTagVector=ne.TypeTagGeneric=ne.TypeTagReference=ne.TypeTagSigner=ne.TypeTagAddress=ne.TypeTagU256=ne.TypeTagU128=ne.TypeTagU64=ne.TypeTagU32=ne.TypeTagU16=ne.TypeTagU8=ne.TypeTagBool=ne.TypeTag=void 0;var cg=Me(),kr=Kt(),Mn=fo(),we=je(),Ce=class extends cg.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case we.TypeTagVariants.Bool:return $s.load(e);case we.TypeTagVariants.U8:return $r.load(e);case we.TypeTagVariants.U64:return Zs.load(e);case we.TypeTagVariants.U128:return Ys.load(e);case we.TypeTagVariants.Address:return Js.load(e);case we.TypeTagVariants.Signer:return ei.load(e);case we.TypeTagVariants.Vector:return Wr.load(e);case we.TypeTagVariants.Struct:return ni.load(e);case we.TypeTagVariants.U16:return Ws.load(e);case we.TypeTagVariants.U32:return Xs.load(e);case we.TypeTagVariants.U256:return Qs.load(e);case we.TypeTagVariants.Generic:return ti.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}isBool(){return this instanceof $s}isAddress(){return this instanceof Js}isGeneric(){return this instanceof ti}isSigner(){return this instanceof ei}isVector(){return this instanceof Wr}isStruct(){return this instanceof ni}isU8(){return this instanceof $r}isU16(){return this instanceof Ws}isU32(){return this instanceof Xs}isU64(){return this instanceof Zs}isU128(){return this instanceof Ys}isU256(){return this instanceof Qs}};ne.TypeTag=Ce;var $s=class extends Ce{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Bool)}static load(e){return new $s}};ne.TypeTagBool=$s;var $r=class extends Ce{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.U8)}static load(e){return new $r}};ne.TypeTagU8=$r;var Ws=class extends Ce{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.U16)}static load(e){return new Ws}};ne.TypeTagU16=Ws;var Xs=class extends Ce{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.U32)}static load(e){return new Xs}};ne.TypeTagU32=Xs;var Zs=class extends Ce{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.U64)}static load(e){return new Zs}};ne.TypeTagU64=Zs;var Ys=class extends Ce{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.U128)}static load(e){return new Ys}};ne.TypeTagU128=Ys;var Qs=class extends Ce{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.U256)}static load(e){return new Qs}};ne.TypeTagU256=Qs;var Js=class extends Ce{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Address)}static load(e){return new Js}};ne.TypeTagAddress=Js;var ei=class extends Ce{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Signer)}static load(e){return new ei}};ne.TypeTagSigner=ei;var Ea=class extends Ce{toString(){return`&${this.value.toString()}`}constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Reference)}static load(e){let t=Ce.deserialize(e);return new Ea(t)}};ne.TypeTagReference=Ea;var ti=class extends Ce{toString(){return`T${this.value}`}constructor(e){if(super(),this.value=e,e<0)throw new Error("Generic type parameter index cannot be negative")}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Generic),e.serializeU32(this.value)}static load(e){let t=e.deserializeU32();return new ti(t)}};ne.TypeTagGeneric=ti;var Wr=class extends Ce{toString(){return`vector<${this.value.toString()}>`}constructor(e){super(),this.value=e}static u8(){return new Wr(new $r)}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Vector),this.value.serialize(e)}static load(e){let t=Ce.deserialize(e);return new Wr(t)}};ne.TypeTagVector=Wr;var ni=class extends Ce{toString(){let e="";return this.value.typeArgs.length>0&&(e=`<${this.value.typeArgs.map(t=>t.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${e}`}constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(we.TypeTagVariants.Struct),this.value.serialize(e)}static load(e){let t=Rn.deserialize(e);return new ni(t)}isTypeTag(e,t,r){return this.value.moduleName.identifier===t&&this.value.name.identifier===r&&this.value.address.equals(e)}isString(){return this.isTypeTag(kr.AccountAddress.ONE,"string","String")}isOption(){return this.isTypeTag(kr.AccountAddress.ONE,"option","Option")}isObject(){return this.isTypeTag(kr.AccountAddress.ONE,"object","Object")}};ne.TypeTagStruct=ni;var Rn=class extends cg.Serializable{constructor(e,t,r,s){super(),this.address=e,this.moduleName=t,this.name=r,this.typeArgs=s}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let t=kr.AccountAddress.deserialize(e),r=Mn.Identifier.deserialize(e),s=Mn.Identifier.deserialize(e),i=e.deserializeVector(Ce);return new Rn(t,r,s,i)}};ne.StructTag=Rn;function VA(){return new Rn(kr.AccountAddress.ONE,new Mn.Identifier("aptos_coin"),new Mn.Identifier("AptosCoin"),[])}ne.aptosCoinStructTag=VA;function FA(){return new Rn(kr.AccountAddress.ONE,new Mn.Identifier("string"),new Mn.Identifier("String"),[])}ne.stringStructTag=FA;function GA(n){return new Rn(kr.AccountAddress.ONE,new Mn.Identifier("option"),new Mn.Identifier("Option"),[n])}ne.optionStructTag=GA;function kA(n){return new Rn(kr.AccountAddress.ONE,new Mn.Identifier("object"),new Mn.Identifier("Object"),[n])}ne.objectStructTag=kA});var $d=U(Ne=>{"use strict";h();y();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.MultiSigTransactionPayload=Ne.MultiSig=Ne.Script=Ne.EntryFunction=Ne.TransactionPayloadMultiSig=Ne.TransactionPayloadEntryFunction=Ne.TransactionPayloadScript=Ne.TransactionPayload=Ne.deserializeFromScriptArgument=void 0;var dg=Me(),$A=Cl(),Xr=Ec(),WA=Kl(),fg=Kt(),ug=fo(),lg=kd(),ht=je(),hg=va();function yg(n){let e=n.deserializeUleb128AsU32();switch(e){case ht.ScriptTransactionArgumentVariants.U8:return Xr.U8.deserialize(n);case ht.ScriptTransactionArgumentVariants.U64:return Xr.U64.deserialize(n);case ht.ScriptTransactionArgumentVariants.U128:return Xr.U128.deserialize(n);case ht.ScriptTransactionArgumentVariants.Address:return fg.AccountAddress.deserialize(n);case ht.ScriptTransactionArgumentVariants.U8Vector:return WA.MoveVector.deserialize(n,Xr.U8);case ht.ScriptTransactionArgumentVariants.Bool:return Xr.Bool.deserialize(n);case ht.ScriptTransactionArgumentVariants.U16:return Xr.U16.deserialize(n);case ht.ScriptTransactionArgumentVariants.U32:return Xr.U32.deserialize(n);case ht.ScriptTransactionArgumentVariants.U256:return Xr.U256.deserialize(n);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}Ne.deserializeFromScriptArgument=yg;var yo=class extends dg.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case ht.TransactionPayloadVariants.Script:return go.load(e);case ht.TransactionPayloadVariants.EntryFunction:return bo.load(e);case ht.TransactionPayloadVariants.Multisig:return po.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}};Ne.TransactionPayload=yo;var go=class extends yo{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(ht.TransactionPayloadVariants.Script),this.script.serialize(e)}static load(e){let t=wo.deserialize(e);return new go(t)}};Ne.TransactionPayloadScript=go;var bo=class extends yo{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(ht.TransactionPayloadVariants.EntryFunction),this.entryFunction.serialize(e)}static load(e){let t=Zr.deserialize(e);return new bo(t)}};Ne.TransactionPayloadEntryFunction=bo;var po=class extends yo{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(ht.TransactionPayloadVariants.Multisig),this.multiSig.serialize(e)}static load(e){let t=mo.deserialize(e);return new po(t)}};Ne.TransactionPayloadMultiSig=po;var Zr=class{constructor(e,t,r,s){this.module_name=e,this.function_name=t,this.type_args=r,this.args=s}static build(e,t,r,s){return new Zr(lg.ModuleId.fromStr(e),new ug.Identifier(t),r,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForEntryFunction(e)})}static deserialize(e){let t=lg.ModuleId.deserialize(e),r=ug.Identifier.deserialize(e),s=e.deserializeVector(hg.TypeTag),i=e.deserializeUleb128AsU32(),o=new Array;for(let a=0;a<i;a+=1){let c=e.deserializeUleb128AsU32(),l=$A.EntryFunctionBytes.deserialize(e,c);o.push(l)}return new Zr(t,r,s,o)}};Ne.EntryFunction=Zr;var wo=class{constructor(e,t,r){this.bytecode=e,this.type_args=t,this.args=r}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(t=>{t.serializeForScriptFunction(e)})}static deserialize(e){let t=e.deserializeBytes(),r=e.deserializeVector(hg.TypeTag),s=e.deserializeUleb128AsU32(),i=new Array;for(let o=0;o<s;o+=1){let a=yg(e);i.push(a)}return new wo(t,r,i)}};Ne.Script=wo;var mo=class{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let t=fg.AccountAddress.deserialize(e),r=e.deserializeBool(),s;return r&&(s=_o.deserialize(e)),new mo(t,s)}};Ne.MultiSig=mo;var _o=class extends dg.Serializable{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new _o(Zr.deserialize(e))}};Ne.MultiSigTransactionPayload=_o});var Ia=U(Hn=>{"use strict";h();y();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.FeePayerRawTransaction=Hn.MultiAgentRawTransaction=Hn.RawTransactionWithData=Hn.RawTransaction=void 0;var gg=Me(),XA=Gd(),wu=Kt(),ZA=$d(),mu=je(),ri=class extends gg.Serializable{constructor(e,t,r,s,i,o,a){super(),this.sender=e,this.sequence_number=t,this.payload=r,this.max_gas_amount=s,this.gas_unit_price=i,this.expiration_timestamp_secs=o,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let t=wu.AccountAddress.deserialize(e),r=e.deserializeU64(),s=ZA.TransactionPayload.deserialize(e),i=e.deserializeU64(),o=e.deserializeU64(),a=e.deserializeU64(),c=XA.ChainId.deserialize(e);return new ri(t,r,s,i,o,a,c)}};Hn.RawTransaction=ri;var Ua=class extends gg.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case mu.TransactionVariants.MultiAgentTransaction:return Ao.load(e);case mu.TransactionVariants.FeePayerTransaction:return Bo.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}};Hn.RawTransactionWithData=Ua;var Ao=class extends Ua{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(mu.TransactionVariants.MultiAgentTransaction),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let t=ri.deserialize(e),r=e.deserializeVector(wu.AccountAddress);return new Ao(t,r)}};Hn.MultiAgentRawTransaction=Ao;var Bo=class extends Ua{constructor(e,t,r){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=r}serialize(e){e.serializeU32AsUleb128(mu.TransactionVariants.FeePayerTransaction),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let t=ri.deserialize(e),r=e.deserializeVector(wu.AccountAddress),s=wu.AccountAddress.deserialize(e);return new Bo(t,r,s)}};Hn.FeePayerRawTransaction=Bo});var Xd=U(Au=>{"use strict";h();y();Object.defineProperty(Au,"__esModule",{value:!0});Au.RotationProofChallenge=void 0;var YA=Me(),QA=Ms(),_u=Yt(),Wd=class extends YA.Serializable{constructor(e){super(),this.accountAddress=QA.AccountAddress.ONE,this.moduleName=new _u.MoveString("account"),this.structName=new _u.MoveString("RotationProofChallenge"),this.sequenceNumber=new _u.U64(e.sequenceNumber),this.originator=e.originator,this.currentAuthKey=e.currentAuthKey,this.newPublicKey=_u.MoveVector.U8(e.newPublicKey.toUint8Array())}serialize(e){e.serialize(this.accountAddress),e.serialize(this.moduleName),e.serialize(this.structName),e.serialize(this.sequenceNumber),e.serialize(this.originator),e.serialize(this.currentAuthKey),e.serialize(this.newPublicKey)}};Au.RotationProofChallenge=Wd});var Bu=U(Pt=>{"use strict";h();y();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.TransactionAuthenticatorSingleSender=Pt.TransactionAuthenticatorFeePayer=Pt.TransactionAuthenticatorMultiAgent=Pt.TransactionAuthenticatorMultiEd25519=Pt.TransactionAuthenticatorEd25519=Pt.TransactionAuthenticator=void 0;var To=ks(),JA=Yt(),Zd=Kt(),bg=Cs(),pg=Dc(),Cn=je(),Yr=class extends JA.Serializable{static deserialize(e){let t=e.deserializeUleb128AsU32();switch(t){case Cn.TransactionAuthenticatorVariant.Ed25519:return xo.load(e);case Cn.TransactionAuthenticatorVariant.MultiEd25519:return So.load(e);case Cn.TransactionAuthenticatorVariant.MultiAgent:return Eo.load(e);case Cn.TransactionAuthenticatorVariant.FeePayer:return vo.load(e);case Cn.TransactionAuthenticatorVariant.SingleSender:return Uo.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}};Pt.TransactionAuthenticator=Yr;var xo=class extends Yr{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Cn.TransactionAuthenticatorVariant.Ed25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=bg.Ed25519PublicKey.deserialize(e),r=bg.Ed25519Signature.deserialize(e);return new xo(t,r)}};Pt.TransactionAuthenticatorEd25519=xo;var So=class extends Yr{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(Cn.TransactionAuthenticatorVariant.MultiEd25519),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let t=pg.MultiEd25519PublicKey.deserialize(e),r=pg.MultiEd25519Signature.deserialize(e);return new So(t,r)}};Pt.TransactionAuthenticatorMultiEd25519=So;var Eo=class extends Yr{constructor(e,t,r){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r}serialize(e){e.serializeU32AsUleb128(Cn.TransactionAuthenticatorVariant.MultiAgent),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let t=To.AccountAuthenticator.deserialize(e),r=e.deserializeVector(Zd.AccountAddress),s=e.deserializeVector(To.AccountAuthenticator);return new Eo(t,r,s)}};Pt.TransactionAuthenticatorMultiAgent=Eo;var vo=class extends Yr{constructor(e,t,r,s){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=r,this.fee_payer=s}serialize(e){e.serializeU32AsUleb128(Cn.TransactionAuthenticatorVariant.FeePayer),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let t=To.AccountAuthenticator.deserialize(e),r=e.deserializeVector(Zd.AccountAddress),s=e.deserializeVector(To.AccountAuthenticator),i=Zd.AccountAddress.deserialize(e),o=To.AccountAuthenticator.deserialize(e),a={address:i,authenticator:o};return new vo(t,r,s,a)}};Pt.TransactionAuthenticatorFeePayer=vo;var Uo=class extends Yr{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(Cn.TransactionAuthenticatorVariant.SingleSender),this.sender.serialize(e)}static load(e){let t=To.AccountAuthenticator.deserialize(e);return new Uo(t)}};Pt.TransactionAuthenticatorSingleSender=Uo});var Yd=U(Tu=>{"use strict";h();y();Object.defineProperty(Tu,"__esModule",{value:!0});Tu.SignedTransaction=void 0;var eB=Bu(),tB=Me(),nB=Ia(),za=class extends tB.Serializable{constructor(e,t){super(),this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let t=nB.RawTransaction.deserialize(e),r=eB.TransactionAuthenticator.deserialize(e);return new za(t,r)}};Tu.SignedTransaction=za});var mg=U(wg=>{"use strict";h();y();Object.defineProperty(wg,"__esModule",{value:!0})});var Qd=U(xu=>{"use strict";h();y();Object.defineProperty(xu,"__esModule",{value:!0});xu.SimpleTransaction=void 0;var rB=Me(),sB=Kt(),iB=Ia(),Pa=class extends rB.Serializable{constructor(e,t){super(),this.rawTransaction=e,this.feePayerAddress=t}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=iB.RawTransaction.deserialize(e),r=e.deserializeBool(),s;return r&&(s=sB.AccountAddress.deserialize(e)),new Pa(t,s)}};xu.SimpleTransaction=Pa});var Jd=U(Su=>{"use strict";h();y();Object.defineProperty(Su,"__esModule",{value:!0});Su.MultiAgentTransaction=void 0;var oB=Me(),_g=Kt(),aB=Ia(),Oa=class extends oB.Serializable{constructor(e,t,r){super(),this.rawTransaction=e,this.feePayerAddress=r,this.secondarySignerAddresses=t}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let t=aB.RawTransaction.deserialize(e),r=e.deserializeVector(_g.AccountAddress),s=e.deserializeBool(),i;return s&&(i=_g.AccountAddress.deserialize(e)),new Oa(t,r,i)}};Su.MultiAgentTransaction=Oa});var Eu=U(rt=>{"use strict";h();y();var cB=rt&&rt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ln=rt&&rt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cB(e,n,t)};Object.defineProperty(rt,"__esModule",{value:!0});Ln(Gd(),rt);Ln(fo(),rt);Ln(kd(),rt);Ln(Ia(),rt);Ln(Xd(),rt);Ln(Yd(),rt);Ln(mg(),rt);Ln($d(),rt);Ln(Qd(),rt);Ln(Jd(),rt)});var vu=U(Kn=>{"use strict";h();y();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.generateSigningMessageForTransaction=Kn.generateSigningMessageForSerializable=Kn.generateSigningMessage=Kn.deriveTransactionType=void 0;var uB=ar(),ef=yu(),Ag=Eu();function Bg(n){return n.feePayerAddress?new Ag.FeePayerRawTransaction(n.rawTransaction,n.secondarySignerAddresses??[],n.feePayerAddress):n.secondarySignerAddresses?new Ag.MultiAgentRawTransaction(n.rawTransaction,n.secondarySignerAddresses):n.rawTransaction}Kn.deriveTransactionType=Bg;function Na(n,e){let t=uB.sha3_256.create();if(!e.startsWith("APTOS::"))throw new Error(`Domain separator needs to start with 'APTOS::'.  Provided - ${e}`);t.update(e);let r=t.digest(),s=n,i=new Uint8Array(r.length+s.length);return i.set(r),i.set(s,r.length),i}Kn.generateSigningMessage=Na;function lB(n){return Na(n.bcsToBytes(),`APTOS::${n.constructor.name}`)}Kn.generateSigningMessageForSerializable=lB;function dB(n){let e=Bg(n);return n.feePayerAddress||n.secondarySignerAddresses?Na(e.bcsToBytes(),ef.RAW_TRANSACTION_WITH_DATA_SALT):Na(e.bcsToBytes(),ef.RAW_TRANSACTION_SALT)}Kn.generateSigningMessageForTransaction=dB});var tf=U(Uu=>{"use strict";h();y();Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Ed25519Account=void 0;var Tg=ks(),fB=je(),hB=Ms(),xg=Fr(),yB=vu(),Io=class{constructor(e){this.signingScheme=fB.SigningScheme.Ed25519;let{privateKey:t,address:r}=e;this.privateKey=t,this.publicKey=t.publicKey(),this.accountAddress=r?hB.AccountAddress.from(r):this.publicKey.authKey().derivedAddress()}static generate(){let e=xg.Ed25519PrivateKey.generate();return new Io({privateKey:e})}static fromDerivationPath(e){let{path:t,mnemonic:r}=e,s=xg.Ed25519PrivateKey.fromDerivationPath(t,r);return new Io({privateKey:s})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){return new Tg.AccountAuthenticatorEd25519(this.publicKey,this.privateKey.sign(e))}signTransactionWithAuthenticator(e){return new Tg.AccountAuthenticatorEd25519(this.publicKey,this.signTransaction(e))}sign(e){return this.privateKey.sign(e)}signTransaction(e){return this.sign((0,yB.generateSigningMessageForTransaction)(e))}};Uu.Ed25519Account=Io});var nf=U(Iu=>{"use strict";h();y();Object.defineProperty(Iu,"__esModule",{value:!0});Iu.SingleKeyAccount=void 0;var Sg=ks(),si=je(),gB=Ms(),zo=Fr(),bB=vu(),Po=class{constructor(e){this.signingScheme=si.SigningScheme.SingleKey;let{privateKey:t,address:r}=e;this.privateKey=t,this.publicKey=new zo.AnyPublicKey(t.publicKey()),this.accountAddress=r?gB.AccountAddress.from(r):this.publicKey.authKey().derivedAddress()}static generate(e={}){let{scheme:t=si.SigningSchemeInput.Ed25519}=e,r;switch(t){case si.SigningSchemeInput.Ed25519:r=zo.Ed25519PrivateKey.generate();break;case si.SigningSchemeInput.Secp256k1Ecdsa:r=zo.Secp256k1PrivateKey.generate();break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new Po({privateKey:r})}static fromDerivationPath(e){let{scheme:t=si.SigningSchemeInput.Ed25519,path:r,mnemonic:s}=e,i;switch(t){case si.SigningSchemeInput.Ed25519:i=zo.Ed25519PrivateKey.fromDerivationPath(r,s);break;case si.SigningSchemeInput.Secp256k1Ecdsa:i=zo.Secp256k1PrivateKey.fromDerivationPath(r,s);break;default:throw new Error(`Unsupported signature scheme ${t}`)}return new Po({privateKey:i})}verifySignature(e){return this.publicKey.verifySignature(e)}signWithAuthenticator(e){return new Sg.AccountAuthenticatorSingleKey(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new Sg.AccountAuthenticatorSingleKey(this.publicKey,this.signTransaction(e))}sign(e){return new zo.AnySignature(this.privateKey.sign(e))}signTransaction(e){return this.sign((0,bB.generateSigningMessageForTransaction)(e))}};Iu.SingleKeyAccount=Po});var Eg=U(Pu=>{"use strict";h();y();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.Account=void 0;var zu=je(),pB=Fr(),rf=tf(),sf=nf(),of=class{static generate(e={}){let{scheme:t=zu.SigningSchemeInput.Ed25519,legacy:r=!0}=e;return t===zu.SigningSchemeInput.Ed25519&&r?rf.Ed25519Account.generate():sf.SingleKeyAccount.generate({scheme:t})}static fromPrivateKey(e){let{privateKey:t,address:r,legacy:s=!0}=e;return t instanceof pB.Ed25519PrivateKey&&s?new rf.Ed25519Account({privateKey:t,address:r}):new sf.SingleKeyAccount({privateKey:t,address:r})}static fromPrivateKeyAndAddress(e){return this.fromPrivateKey(e)}static fromDerivationPath(e){let{scheme:t=zu.SigningSchemeInput.Ed25519,mnemonic:r,path:s,legacy:i=!0}=e;return t===zu.SigningSchemeInput.Ed25519&&i?rf.Ed25519Account.fromDerivationPath({mnemonic:r,path:s}):sf.SingleKeyAccount.fromDerivationPath({scheme:t,mnemonic:r,path:s})}static authKey(e){let{publicKey:t}=e;return t.authKey()}verifySignature(e){return this.publicKey.verifySignature(e)}};Pu.Account=of});var Ug=U(Ou=>{"use strict";h();y();Object.defineProperty(Ou,"__esModule",{value:!0});Ou.MultiKeyAccount=void 0;var af=Fr(),wB=je(),vg=ks(),Oo=class{constructor(e){let{multiKey:t,signers:r}=e;this.publicKey=t,this.signingScheme=wB.SigningScheme.MultiKey,this.accountAddress=this.publicKey.authKey().derivedAddress();let s=[];for(let o of r)s.push(this.publicKey.getIndex(o.publicKey));let i=r.map((o,a)=>[o,s[a]]);i.sort((o,a)=>o[1]-a[1]),this.signers=i.map(o=>o[0]),this.signerIndicies=i.map(o=>o[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:s})}static fromPublicKeysAndSigners(e){let{publicKeys:t,signaturesRequired:r,signers:s}=e,i=new af.MultiKey({publicKeys:t,signaturesRequired:r});return new Oo({multiKey:i,signers:s})}static isMultiKeySigner(e){return e instanceof Oo}signWithAuthenticator(e){return new vg.AccountAuthenticatorMultiKey(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new vg.AccountAuthenticatorMultiKey(this.publicKey,this.signTransaction(e))}sign(e){let t=[];for(let r of this.signers)t.push(r.sign(e));return new af.MultiKeySignature({signatures:t,bitmap:this.signaturesBitmap})}signTransaction(e){let t=[];for(let r of this.signers)t.push(r.signTransaction(e));return new af.MultiKeySignature({signatures:t,bitmap:this.signaturesBitmap})}verifySignature(e){let{message:t,signature:r}=e;if(!this.signerIndicies.every((i,o)=>o===0||i>=this.signerIndicies[o-1]))return!1;for(let i=0;i<r.signatures.length;i+=1){let o=r.signatures[i];if(!this.publicKey.publicKeys[this.signerIndicies[i]].verifySignature({message:t,signature:o}))return!1}return!0}};Ou.MultiKeyAccount=Oo});var cf=U(jn=>{"use strict";h();y();var mB=jn&&jn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Nu=jn&&jn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&mB(e,n,t)};Object.defineProperty(jn,"__esModule",{value:!0});Nu(tf(),jn);Nu(Eg(),jn);Nu(nf(),jn);Nu(Ug(),jn)});var qu=U(nr=>{"use strict";h();y();Object.defineProperty(nr,"__esModule",{value:!0});nr.NetworkToNetworkName=nr.NetworkToChainId=nr.Network=void 0;var No;(function(n){n.MAINNET="mainnet",n.TESTNET="testnet",n.DEVNET="devnet",n.LOCAL="local",n.CUSTOM="custom"})(No=nr.Network||(nr.Network={}));nr.NetworkToChainId={mainnet:1,testnet:2};nr.NetworkToNetworkName={mainnet:No.MAINNET,testnet:No.TESTNET,devnet:No.DEVNET,local:No.LOCAL,custom:No.CUSTOM}});var Ig=U(Mu=>{"use strict";h();y();Object.defineProperty(Mu,"__esModule",{value:!0});Mu.AptosConfig=void 0;var _B=qu(),uf=class{constructor(e){this.network=e?.network??_B.Network.DEVNET,this.moveModule=e?.moveModule}};Mu.AptosConfig=uf});var lf=U(Ru=>{"use strict";h();y();Object.defineProperty(Ru,"__esModule",{value:!0});Ru.normalizeBundle=void 0;var AB=Yt();function BB(n,e){let t=e.bcsToBytes(),r=new AB.Deserializer(t);return n.deserialize(r)}Ru.normalizeBundle=BB});var df=U(rr=>{"use strict";h();y();Object.defineProperty(rr,"__esModule",{value:!0});rr.parseTypeTag=rr.TypeTagParserError=rr.TypeTagParserErrorType=void 0;var yt=va(),TB=Kt(),zg=fo();function Pg(n){return!!n.match(/^[_a-zA-Z0-9]+$/)}function Og(n){return!!n.match(/\s/)}function xB(n){return!!n.match(/^T[0-9]+$/)}function SB(n,e){let t=e;for(;t<n.length;t+=1){let r=n[t];if(!Og(r))break}return t}var Se;(function(n){n.InvalidTypeTag="unknown type",n.UnexpectedGenericType="unexpected generic type",n.UnexpectedTypeArgumentClose="unexpected '>'",n.UnexpectedWhitespaceCharacter="unexpected whitespace character",n.UnexpectedComma="unexpected ','",n.TypeArgumentCountMismatch="type argument count doesn't match expected amount",n.MissingTypeArgumentClose="no matching '>' for '<'",n.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",n.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",n.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",n.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",n.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters"})(Se=rr.TypeTagParserErrorType||(rr.TypeTagParserErrorType={}));var me=class extends Error{constructor(e,t){super(`Failed to parse typeTag '${e}', ${t}`)}};rr.TypeTagParserError=me;function EB(n,e){let t=e?.allowGenerics??!1,r=[],s=[],i=[],o=0,a="",c=1;for(;o<n.length;){let l=n[o];if(l==="<")r.push({savedExpectedTypes:c,savedStr:a,savedTypes:i}),a="",i=[],c=1;else if(l===">"){if(a!==""){let m=Hu(a,s,t);i.push(m)}let d=r.pop();if(d===void 0)throw new me(n,Se.UnexpectedTypeArgumentClose);if(c!==i.length)throw new me(n,Se.TypeArgumentCountMismatch);let{savedStr:u,savedTypes:g,savedExpectedTypes:w}=d;s=i,i=g,a=u,c=w}else if(l===","){if(a.length!==0){let d=Hu(a,s,t);s=[],i.push(d),a="",c+=1}}else if(Og(l)){let d=!1;if(a.length!==0){let g=Hu(a,s,t);s=[],i.push(g),a="",d=!0}o=SB(n,o);let u=n[o];if(o<n.length&&d&&u!==","&&u!==">")throw new me(n,Se.UnexpectedWhitespaceCharacter);continue}else a+=l;o+=1}if(r.length>0)throw new me(n,Se.MissingTypeArgumentClose);switch(i.length){case 0:return Hu(a,s,t);case 1:if(a==="")return i[0];throw new me(n,Se.UnexpectedComma);default:throw new me(n,Se.UnexpectedWhitespaceCharacter)}}rr.parseTypeTag=EB;function Hu(n,e,t){switch(n){case"&signer":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagReference(new yt.TypeTagSigner);case"signer":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagSigner;case"bool":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagBool;case"address":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagAddress;case"u8":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagU8;case"u16":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagU16;case"u32":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagU32;case"u64":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagU64;case"u128":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagU128;case"u256":if(e.length>0)throw new me(n,Se.UnexpectedPrimitiveTypeArguments);return new yt.TypeTagU256;case"vector":if(e.length!==1)throw new me(n,Se.UnexpectedVectorTypeArgumentCount);return new yt.TypeTagVector(e[0]);default:if(xB(n)){if(t)return new yt.TypeTagGeneric(Number(n.split("T")[1]));throw new me(n,Se.UnexpectedGenericType)}if(!n.match(/:/))throw new me(n,Se.InvalidTypeTag);let r=n.split("::");if(r.length!==3)throw new me(n,Se.UnexpectedStructFormat);if(!Pg(r[1]))throw new me(n,Se.InvalidModuleNameCharacter);if(!Pg(r[2]))throw new me(n,Se.InvalidStructNameCharacter);return new yt.TypeTagStruct(new yt.StructTag(TB.AccountAddress.fromString(r[0]),new zg.Identifier(r[1]),new zg.Identifier(r[2]),e))}}});var Cu=U(Z=>{"use strict";h();y();Object.defineProperty(Z,"__esModule",{value:!0});Z.getFunctionParts=Z.findFirstNonSignerArg=Z.throwTypeMismatch=Z.isScriptDataInput=Z.isBcsU256=Z.isBcsU128=Z.isBcsU64=Z.isBcsU32=Z.isBcsU16=Z.isBcsU8=Z.isBcsFixedBytes=Z.isBcsString=Z.isBcsAddress=Z.isBcsBool=Z.isEncodedEntryFunctionArgument=Z.isNull=Z.isLargeNumber=Z.isNumber=Z.isString=Z.isBool=void 0;var hn=Yt(),vB=Kt();function UB(n){return typeof n=="boolean"}Z.isBool=UB;function IB(n){return typeof n=="string"}Z.isString=IB;function zB(n){return typeof n=="number"}Z.isNumber=zB;function PB(n){return typeof n=="number"||typeof n=="bigint"||typeof n=="string"}Z.isLargeNumber=PB;function OB(n){return n==null}Z.isNull=OB;function NB(n){return Ng(n)||Hg(n)||Cg(n)||Lg(n)||Kg(n)||jg(n)||Dg(n)||qg(n)||Mg(n)||Rg(n)||n instanceof hn.MoveVector||n instanceof hn.MoveOption}Z.isEncodedEntryFunctionArgument=NB;function Ng(n){return n instanceof hn.Bool}Z.isBcsBool=Ng;function qg(n){return n instanceof vB.AccountAddress}Z.isBcsAddress=qg;function Mg(n){return n instanceof hn.MoveString}Z.isBcsString=Mg;function Rg(n){return n instanceof hn.FixedBytes}Z.isBcsFixedBytes=Rg;function Hg(n){return n instanceof hn.U8}Z.isBcsU8=Hg;function Cg(n){return n instanceof hn.U16}Z.isBcsU16=Cg;function Lg(n){return n instanceof hn.U32}Z.isBcsU32=Lg;function Kg(n){return n instanceof hn.U64}Z.isBcsU64=Kg;function jg(n){return n instanceof hn.U128}Z.isBcsU128=jg;function Dg(n){return n instanceof hn.U256}Z.isBcsU256=Dg;function qB(n){return"bytecode"in n}Z.isScriptDataInput=qB;function MB(n,e){throw new Error(`Type mismatch for argument ${e}, expected '${n}'`)}Z.throwTypeMismatch=MB;function RB(n){let e=n.params.findIndex(t=>t!=="signer"&&t!=="&signer");return e<0?n.params.length:e}Z.findFirstNonSignerArg=RB;function HB(n){let e=n.split("::");if(e.length!==3)throw new Error(`Invalid function ${n}`);let t=e[0],r=e[1],s=e[2];return{moduleAddress:t,moduleName:r,functionName:s}}Z.getFunctionParts=HB});var hf=U(Dn=>{"use strict";h();y();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.checkOrConvertArgument=Dn.convertArgument=Dn.fetchEntryFunctionAbi=Dn.standardizeTypeTags=void 0;var Fg=df(),CB=va(),st=Yt(),Vg=Kt(),$=Cu();function LB(n){return n?.map(e=>(0,$.isString)(e)?(0,Fg.parseTypeTag)(e):e)??[]}Dn.standardizeTypeTags=LB;async function KB(n,e,t,r){let i=JSON.parse(r?.moveModule)?.abi?.exposed_functions.find(c=>c.name===t);if(!i)throw new Error(`Could not find entry function ABI for '${n}::${e}::${t}'`);if(!i.is_entry)throw new Error(`'${n}::${e}::${t}' is not an entry function`);let o=(0,$.findFirstNonSignerArg)(i),a=[];for(let c=o;c<i.params.length;c+=1)a.push((0,Fg.parseTypeTag)(i.params[c],{allowGenerics:!0}));return{typeParameters:i.generic_type_params,parameters:a}}Dn.fetchEntryFunctionAbi=KB;function jB(n,e,t,r,s){if(r>=e.parameters.length)throw new Error(`Too many arguments for '${n}', expected ${e.parameters.length}`);let i=e.parameters[r];return qa(t,i,r,s)}Dn.convertArgument=jB;function qa(n,e,t,r){return(0,$.isEncodedEntryFunctionArgument)(n)?(ff(e,n,t),n):DB(n,e,t,r)}Dn.checkOrConvertArgument=qa;function DB(n,e,t,r){if(e.isBool()){if((0,$.isBool)(n))return new st.Bool(n);(0,$.throwTypeMismatch)("boolean",t)}if(e.isAddress()){if((0,$.isString)(n))return Vg.AccountAddress.fromString(n);(0,$.throwTypeMismatch)("string | AccountAddress",t)}if(e.isU8()){if((0,$.isNumber)(n))return new st.U8(n);(0,$.throwTypeMismatch)("number",t)}if(e.isU16()){if((0,$.isNumber)(n))return new st.U16(n);(0,$.throwTypeMismatch)("number",t)}if(e.isU32()){if((0,$.isNumber)(n))return new st.U32(n);(0,$.throwTypeMismatch)("number",t)}if(e.isU64()){if((0,$.isLargeNumber)(n))return new st.U64(BigInt(n));(0,$.throwTypeMismatch)("bigint | number | string",t)}if(e.isU128()){if((0,$.isLargeNumber)(n))return new st.U128(BigInt(n));(0,$.throwTypeMismatch)("bigint | number | string",t)}if(e.isU256()){if((0,$.isLargeNumber)(n))return new st.U256(BigInt(n));(0,$.throwTypeMismatch)("bigint | number | string",t)}if(e.isGeneric()){let s=e.value;if(s<0||s>=r.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${t}`);return qa(n,r[s],t,r)}if(e.isVector()){if(e.value.isU8()){if((0,$.isString)(n)){let s=new TextEncoder;return st.MoveVector.U8(s.encode(n))}if(n instanceof Uint8Array)return st.MoveVector.U8(n);if(n instanceof ArrayBuffer)return st.MoveVector.U8(new Uint8Array(n))}if(Array.isArray(n))return new st.MoveVector(n.map(s=>qa(s,e.value,t,r)));throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if((0,$.isString)(n))return new st.MoveString(n);(0,$.throwTypeMismatch)("string",t)}if(e.isObject()){if((0,$.isString)(n))return Vg.AccountAddress.fromString(n);(0,$.throwTypeMismatch)("string | AccountAddress",t)}if(e.isOption())return(0,$.isNull)(n)?new st.MoveOption(null):new st.MoveOption(qa(n,e.value.typeArgs[0],t,r));throw new Error(`Unsupported struct input type for argument ${t}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${t}, type '${e.toString()}'`)}function ff(n,e,t){if(n.isBool()){if((0,$.isBcsBool)(e))return;(0,$.throwTypeMismatch)("Bool",t)}if(n.isAddress()){if((0,$.isBcsAddress)(e))return;(0,$.throwTypeMismatch)("AccountAddress",t)}if(n.isU8()){if((0,$.isBcsU8)(e))return;(0,$.throwTypeMismatch)("U8",t)}if(n.isU16()){if((0,$.isBcsU16)(e))return;(0,$.throwTypeMismatch)("U16",t)}if(n.isU32()){if((0,$.isBcsU32)(e))return;(0,$.throwTypeMismatch)("U32",t)}if(n.isU64()){if((0,$.isBcsU64)(e))return;(0,$.throwTypeMismatch)("U64",t)}if(n.isU128()){if((0,$.isBcsU128)(e))return;(0,$.throwTypeMismatch)("U128",t)}if(n.isU256()){if((0,$.isBcsU256)(e))return;(0,$.throwTypeMismatch)("U256",t)}if(n.isVector()){if(e instanceof st.MoveVector){e.values.length>0&&ff(n.value,e.values[0],t);return}(0,$.throwTypeMismatch)("MoveVector",t)}if(n instanceof CB.TypeTagStruct){if(n.isString()){if((0,$.isBcsString)(e))return;(0,$.throwTypeMismatch)("MoveString",t)}if(n.isObject()){if((0,$.isBcsAddress)(e))return;(0,$.throwTypeMismatch)("AccountAddress",t)}if(n.isOption()){if(e instanceof st.MoveOption){e.value!==void 0&&ff(n.value.typeArgs[0],e.value,t);return}(0,$.throwTypeMismatch)("MoveOption",t)}}throw new Error(`Type mismatch for argument ${t}, expected '${n.toString()}'`)}});var Gg=U(Mo=>{"use strict";h();y();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.memoize=Mo.memoizeAsync=void 0;var qo=new Map;function VB(n,e,t){return async(...r)=>{if(qo.has(e)){let{value:i,timestamp:o}=qo.get(e);if(t===void 0||Date.now()-o<=t)return i}let s=await n(...r);return qo.set(e,{value:s,timestamp:Date.now()}),s}}Mo.memoizeAsync=VB;function FB(n,e,t){return(...r)=>{if(qo.has(e)){let{value:i,timestamp:o}=qo.get(e);if(t===void 0||Date.now()-o<=t)return i}let s=n(...r);return qo.set(e,{value:s,timestamp:Date.now()}),s}}Mo.memoize=FB});var pf=U(qe=>{"use strict";h();y();Object.defineProperty(qe,"__esModule",{value:!0});qe.generateUserTransactionHash=qe.hashValues=qe.generateSignedTransaction=qe.getAuthenticatorForSimulation=qe.generateSignedTransactionForSimulation=qe.buildTransaction=qe.generateRawTransaction=qe.generateTransactionPayloadWithABI=qe.generateTransactionPayload=void 0;var GB=ar(),ii=Kt(),Ma=Fr(),Lu=Cs(),kg=yu(),kB=lf(),oi=ks(),Qr=Bu(),yn=Eu(),Ku=Yd(),yf=hf(),$B=Gg(),gf=Cu(),WB=Qd(),XB=Jd();async function ZB(n){if((0,gf.isScriptDataInput)(n))return YB(n);let{moduleAddress:e,moduleName:t,functionName:r}=(0,gf.getFunctionParts)(n.function),s=await nT({key:"entry-function",moduleAddress:e,moduleName:t,functionName:r,aptosConfig:n.aptosConfig,abi:n.abi,fetch:yf.fetchEntryFunctionAbi});return $g({...n,abi:s})}qe.generateTransactionPayload=ZB;function $g(n){let e=n.abi,{moduleAddress:t,moduleName:r,functionName:s}=(0,gf.getFunctionParts)(n.function),i=(0,yf.standardizeTypeTags)(n.typeArguments);if(i.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${i.length}`);let o=n.functionArguments.map((c,l)=>(0,yf.convertArgument)(n.function,e,c,l,i));if(o.length!==e.parameters.length)throw new Error(`Too few arguments for '${t}::${r}::${s}', expected ${e.parameters.length} but got ${o.length}`);let a=yn.EntryFunction.build(`${t}::${r}`,s,i,o);if("multisigAddress"in n){let c=ii.AccountAddress.from(n.multisigAddress);return new yn.TransactionPayloadMultiSig(new yn.MultiSig(c,new yn.MultiSigTransactionPayload(a)))}return new yn.TransactionPayloadEntryFunction(a)}qe.generateTransactionPayloadWithABI=$g;function YB(n){return new yn.TransactionPayloadScript(new yn.Script(ii.Hex.fromHexInput(n.bytecode).toUint8Array(),n.typeArguments??[],n.functionArguments))}async function Wg(n){let{aptosConfig:e,sender:t,payload:r,options:s,feePayerAddress:i}=n,o;o=s?.accountSequenceNumber;let a;a=s?.gasUnitPrice;let c;c=s?.chainId;let{maxGasAmount:l,gasUnitPrice:d,expireTimestamp:u,chainId:g}={maxGasAmount:s?.maxGasAmount?BigInt(s.maxGasAmount):BigInt(kg.DEFAULT_MAX_GAS_AMOUNT),gasUnitPrice:BigInt(s?.gasUnitPrice),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+kg.DEFAULT_TXN_EXP_SEC_FROM_NOW),...s};return new yn.RawTransaction(ii.AccountAddress.from(t),BigInt(o),r,BigInt(l),BigInt(d),BigInt(u),new yn.ChainId(g))}qe.generateRawTransaction=Wg;async function QB(n){let{aptosConfig:e,sender:t,payload:r,options:s,feePayerAddress:i}=n,o=await Wg({aptosConfig:e,sender:t,payload:r,options:s,feePayerAddress:i});if("secondarySignerAddresses"in n){let a=n.secondarySignerAddresses?.map(c=>ii.AccountAddress.from(c))??[];return new XB.MultiAgentTransaction(o,a,n.feePayerAddress?ii.AccountAddress.from(n.feePayerAddress):void 0)}return new WB.SimpleTransaction(o,n.feePayerAddress?ii.AccountAddress.from(n.feePayerAddress):void 0)}qe.buildTransaction=QB;function JB(n){let{signerPublicKey:e,transaction:t,secondarySignersPublicKeys:r,feePayerPublicKey:s}=n,i=Ra(e);if(t.feePayerAddress){let a=new yn.FeePayerRawTransaction(t.rawTransaction,t.secondarySignerAddresses??[],t.feePayerAddress),c=[];r&&(c=r.map(u=>Ra(u)));let l=Ra(s),d=new Qr.TransactionAuthenticatorFeePayer(i,t.secondarySignerAddresses??[],c,{address:t.feePayerAddress,authenticator:l});return new Ku.SignedTransaction(a.raw_txn,d).bcsToBytes()}if(t.secondarySignerAddresses){let a=new yn.MultiAgentRawTransaction(t.rawTransaction,t.secondarySignerAddresses),c=[];c=r.map(d=>Ra(d));let l=new Qr.TransactionAuthenticatorMultiAgent(i,t.secondarySignerAddresses,c);return new Ku.SignedTransaction(a.raw_txn,l).bcsToBytes()}let o;if(i instanceof oi.AccountAuthenticatorEd25519)o=new Qr.TransactionAuthenticatorEd25519(i.public_key,i.signature);else if(i instanceof oi.AccountAuthenticatorSingleKey)o=new Qr.TransactionAuthenticatorSingleSender(i);else throw new Error("Invalid public key");return new Ku.SignedTransaction(t.rawTransaction,o).bcsToBytes()}qe.generateSignedTransactionForSimulation=JB;function Ra(n){if(n instanceof Ma.AnyPublicKey){if(n.publicKey instanceof Lu.Ed25519PublicKey)return new oi.AccountAuthenticatorSingleKey(n,new Ma.AnySignature(new Lu.Ed25519Signature(new Uint8Array(64))));if(n.publicKey instanceof Ma.Secp256k1PublicKey)return new oi.AccountAuthenticatorSingleKey(n,new Ma.AnySignature(new Ma.Secp256k1Signature(new Uint8Array(64))))}return new oi.AccountAuthenticatorEd25519(new Lu.Ed25519PublicKey(n.toUint8Array()),new Lu.Ed25519Signature(new Uint8Array(64)))}qe.getAuthenticatorForSimulation=Ra;function Xg(n){let{transaction:e,feePayerAuthenticator:t,additionalSignersAuthenticators:r}=n,s=(0,kB.normalizeBundle)(oi.AccountAuthenticator,n.senderAuthenticator),i;if(e.feePayerAddress){if(!t)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");i=new Qr.TransactionAuthenticatorFeePayer(s,e.secondarySignerAddresses??[],r??[],{address:e.feePayerAddress,authenticator:t})}else if(e.secondarySignerAddresses){if(!r)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");i=new Qr.TransactionAuthenticatorMultiAgent(s,e.secondarySignerAddresses,r)}else s instanceof oi.AccountAuthenticatorEd25519?i=new Qr.TransactionAuthenticatorEd25519(s.public_key,s.signature):i=new Qr.TransactionAuthenticatorSingleSender(s);return new Ku.SignedTransaction(e.rawTransaction,i).bcsToBytes()}qe.generateSignedTransaction=Xg;function bf(n){let e=GB.sha3_256.create();for(let t of n)e.update(t);return e.digest()}qe.hashValues=bf;var eT=bf(["APTOS::Transaction"]);function tT(n){let e=Xg(n);return new ii.Hex(bf([eT,new Uint8Array([0]),e])).toString()}qe.generateUserTransactionHash=tT;async function nT({key:n,moduleAddress:e,moduleName:t,functionName:r,aptosConfig:s,abi:i,fetch:o}){return i!==void 0?i:(0,$B.memoizeAsync)(async()=>o(e,t,r,s),`${n}-${s.network}-${e}-${t}-${r}`,1e3*60*5)()}});var Yg=U(Jr=>{"use strict";h();y();var rT=Jr&&Jr.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Zg=Jr&&Jr.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&rT(e,n,t)};Object.defineProperty(Jr,"__esModule",{value:!0});Zg(ks(),Jr);Zg(Bu(),Jr)});var Qg=U(Vn=>{"use strict";h();y();var sT=Vn&&Vn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ju=Vn&&Vn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sT(e,n,t)};Object.defineProperty(Vn,"__esModule",{value:!0});ju(Cu(),Vn);ju(pf(),Vn);ju(hf(),Vn);ju(vu(),Vn)});var eb=U(Jg=>{"use strict";h();y();Object.defineProperty(Jg,"__esModule",{value:!0})});var Du=U(tn=>{"use strict";h();y();var iT=tn&&tn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ro=tn&&tn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&iT(e,n,t)};Object.defineProperty(tn,"__esModule",{value:!0});Ro(Yg(),tn);Ro(Eu(),tn);Ro(Qg(),tn);Ro(va(),tn);Ro(df(),tn);Ro(eb(),tn)});var ci=U(Ie=>{"use strict";h();y();Object.defineProperty(Ie,"__esModule",{value:!0});Ie.rotateAuthKey=Ie.publicPackageTransaction=Ie.signAndSubmitTransaction=Ie.submitTransaction=Ie.simulateTransaction=Ie.signTransaction=Ie.getSigningMessage=Ie.buildRawTransaction=Ie.buildTransactionPayload=Ie.generateTransaction=void 0;var sr=Yt(),oT=cf(),wf=Ms(),aT=Xd(),ai=pf(),Fn=Du();async function mf(n){let e=await tb(n);return nb(n,e)}Ie.generateTransaction=mf;async function tb(n){let{aptosConfig:e,data:t}=n,r,s;return"bytecode"in t?s=await(0,ai.generateTransactionPayload)(t):"multisigAddress"in t?(r={aptosConfig:e,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},s=await(0,ai.generateTransactionPayload)(r)):(r={aptosConfig:e,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},s=await(0,ai.generateTransactionPayload)(r)),s}Ie.buildTransactionPayload=tb;async function nb(n,e){let{aptosConfig:t,sender:r,options:s}=n,i;if(cT(n)&&(i=wf.AccountAddress.ZERO.toString()),uT(n)){let{secondarySignerAddresses:o}=n;return(0,ai.buildTransaction)({aptosConfig:t,sender:r,payload:e,options:s,secondarySignerAddresses:o,feePayerAddress:i})}return(0,ai.buildTransaction)({aptosConfig:t,sender:r,payload:e,options:s,feePayerAddress:i})}Ie.buildRawTransaction=nb;function cT(n){return n.withFeePayer===!0}function uT(n){return"secondarySignerAddresses"in n}function lT(n){let{transaction:e}=n;return(0,Fn.generateSigningMessageForTransaction)(e)}Ie.getSigningMessage=lT;function rb(n){let{signer:e,transaction:t}=n;return e.signTransactionWithAuthenticator(t)}Ie.signTransaction=rb;async function dT(n){let{aptosConfig:e,transaction:t,signerPublicKey:r,secondarySignersPublicKeys:s,feePayerPublicKey:i,options:o}=n;return(0,ai.generateSignedTransactionForSimulation)({transaction:t,signerPublicKey:r,secondarySignersPublicKeys:s,feePayerPublicKey:i,options:o})}Ie.simulateTransaction=dT;async function sb(n){return(0,ai.generateSignedTransaction)({...n})}Ie.submitTransaction=sb;async function ib(n){let{aptosConfig:e,signer:t,transaction:r}=n,s=rb({signer:t,transaction:r});return sb({aptosConfig:e,transaction:r,senderAuthenticator:s})}Ie.signAndSubmitTransaction=ib;var fT={typeParameters:[],parameters:[Fn.TypeTagVector.u8(),new Fn.TypeTagVector(Fn.TypeTagVector.u8())]};async function hT(n){let{aptosConfig:e,account:t,metadataBytes:r,moduleBytecode:s,options:i}=n,o=s.map(a=>sr.MoveVector.U8(a));return mf({aptosConfig:e,sender:wf.AccountAddress.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[sr.MoveVector.U8(r),new sr.MoveVector(o)],abi:fT},options:i})}Ie.publicPackageTransaction=hT;var yT={typeParameters:[],parameters:[new Fn.TypeTagU8,Fn.TypeTagVector.u8(),new Fn.TypeTagU8,Fn.TypeTagVector.u8(),Fn.TypeTagVector.u8(),Fn.TypeTagVector.u8()]};async function gT(n){let{aptosConfig:e,fromAccount:t,toNewPrivateKey:r,sequenceNumber:s,authenticationKey:i}=n,o=oT.Account.fromPrivateKey({privateKey:r,legacy:!0}),c=new aT.RotationProofChallenge({sequenceNumber:BigInt(s),originator:t.accountAddress,currentAuthKey:wf.AccountAddress.from(i),newPublicKey:o.publicKey}).bcsToBytes(),l=t.sign(c),d=o.sign(c),u=await mf({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new sr.U8(t.signingScheme),sr.MoveVector.U8(t.publicKey.toUint8Array()),new sr.U8(o.signingScheme),sr.MoveVector.U8(o.publicKey.toUint8Array()),sr.MoveVector.U8(l.toUint8Array()),sr.MoveVector.U8(d.toUint8Array())],abi:yT}});return ib({aptosConfig:e,signer:t,transaction:u})}Ie.rotateAuthKey=gT});var ab=U(Vu=>{"use strict";h();y();Object.defineProperty(Vu,"__esModule",{value:!0});Vu.Build=void 0;var ob=ci(),_f=class{constructor(e){this.config=e}async simple(e){return(0,ob.generateTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,ob.generateTransaction)({aptosConfig:this.config,...e})}};Vu.Build=_f});var Af=U(Ho=>{"use strict";h();y();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ValidateFeePayerDataOnSimulation=Ho.ValidateFeePayerDataOnSubmission=void 0;function bT(n,e,t){let r=t.value;return t.value=async function(...s){let[i]=s;if(i.transaction.feePayerAddress&&!i.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator");return r.apply(this,s)},t}Ho.ValidateFeePayerDataOnSubmission=bT;function pT(n,e,t){let r=t.value;return t.value=async function(...s){let[i]=s;if(i.transaction.feePayerAddress&&!i.feePayerPublicKey)throw new Error("You are simulating a Fee Payer transaction but missing the feePayerPublicKey");return r.apply(this,s)},t}Ho.ValidateFeePayerDataOnSimulation=pT});var db=U(Co=>{"use strict";h();y();var ub=Co&&Co.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(Co,"__esModule",{value:!0});Co.Simulate=void 0;var cb=ci(),lb=Af(),Ha=class{constructor(e){this.config=e}async simple(e){return(0,cb.simulateTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,cb.simulateTransaction)({aptosConfig:this.config,...e})}};ub([lb.ValidateFeePayerDataOnSimulation],Ha.prototype,"simple",null);ub([lb.ValidateFeePayerDataOnSimulation],Ha.prototype,"multiAgent",null);Co.Simulate=Ha});var gb=U(Lo=>{"use strict";h();y();var hb=Lo&&Lo.__decorate||function(n,e,t,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(s<3?o(i):s>3?o(e,t,i):o(e,t))||i);return s>3&&i&&Object.defineProperty(e,t,i),i};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.Submit=void 0;var fb=ci(),yb=Af(),Ca=class{constructor(e){this.config=e}async simple(e){return(0,fb.submitTransaction)({aptosConfig:this.config,...e})}async multiAgent(e){return(0,fb.submitTransaction)({aptosConfig:this.config,...e})}};hb([yb.ValidateFeePayerDataOnSubmission],Ca.prototype,"simple",null);hb([yb.ValidateFeePayerDataOnSubmission],Ca.prototype,"multiAgent",null);Lo.Submit=Ca});var bb=U(Fu=>{"use strict";h();y();Object.defineProperty(Fu,"__esModule",{value:!0});Fu.Transaction=void 0;var Ko=ci(),wT=ab(),mT=db(),_T=gb(),Bf=class{constructor(e){this.config=e,this.build=new wT.Build(this.config),this.simulate=new mT.Simulate(this.config),this.submit=new _T.Submit(this.config)}getSigningMessage(e){return(0,Ko.getSigningMessage)(e)}async publishPackageTransaction(e){return(0,Ko.publicPackageTransaction)({aptosConfig:this.config,...e})}async rotateAuthKey(e){return(0,Ko.rotateAuthKey)({aptosConfig:this.config,...e})}sign(e){return(0,Ko.signTransaction)({...e})}signAsFeePayer(e){let{signer:t,transaction:r}=e;if(!r.feePayerAddress)throw new Error(`Transaction ${r} is not a Fee Payer transaction`);return r.feePayerAddress=t.accountAddress,(0,Ko.signTransaction)({signer:t,transaction:r})}async signAndSubmitTransaction(e){let{signer:t,transaction:r}=e;return(0,Ko.signAndSubmitTransaction)({aptosConfig:this.config,signer:t,transaction:r})}};Fu.Transaction=Bf});var pb=U(Gu=>{"use strict";h();y();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.transferFungibleAsset=void 0;var Tf=Du(),AT=ci(),BT={typeParameters:[{constraints:[]}],parameters:[(0,Tf.parseTypeTag)("0x1::object::Object"),new Tf.TypeTagAddress,new Tf.TypeTagU64]};async function TT(n){let{aptosConfig:e,sender:t,fungibleAssetMetadataAddress:r,recipient:s,amount:i,options:o}=n;return(0,AT.generateTransaction)({aptosConfig:e,sender:t.accountAddress,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[r,s,i],abi:BT},options:o})}Gu.transferFungibleAsset=TT});var wb=U(ku=>{"use strict";h();y();Object.defineProperty(ku,"__esModule",{value:!0});ku.FungibleAsset=void 0;var xT=pb(),xf=class{constructor(e){this.config=e}async transferFungibleAsset(e){return(0,xT.transferFungibleAsset)({aptosConfig:this.config,...e})}};ku.FungibleAsset=xf});var mb=U(ir=>{"use strict";h();y();var ST=ir&&ir.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Sf=ir&&ir.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ST(e,n,t)};Object.defineProperty(ir,"__esModule",{value:!0});Sf(Ig(),ir);Sf(bb(),ir);Sf(wb(),ir)});var _b=U(or=>{"use strict";h();y();var ET=or&&or.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ef=or&&or.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ET(e,n,t)};Object.defineProperty(or,"__esModule",{value:!0});Ef(qu(),or);Ef(yu(),or);Ef(lf(),or)});var Ab=U(jt=>{"use strict";h();y();var vT=jt&&jt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),ui=jt&&jt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vT(e,n,t)};Object.defineProperty(jt,"__esModule",{value:!0});ui(cf(),jt);ui(mb(),jt);ui(Yt(),jt);ui(Kt(),jt);ui(Du(),jt);ui(je(),jt);ui(_b(),jt)});var xb=U(Gn=>{"use strict";h();y();var UT=Gn&&Gn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),IT=Gn&&Gn.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),zT=Gn&&Gn.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&UT(e,n,t);return IT(e,n),e};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.AptosWallet=void 0;var nn=Nb(),gt=Hf(),F=Sb(),vf=zT(Ol()),it=Ab(),$u=qu(),PT=ci(),Bb=Er(),Tb=An(),Uf=class extends nn.BaseWallet{async getDerivedPath(e){return`m/44'/637'/${e.index}'/0'/0'`}async getRandomPrivateKey(){try{return Promise.resolve("0x"+gt.signUtil.ed25519.ed25519_getRandomPrivateKey(!1,"hex"))}catch{return Promise.reject(nn.GenPrivateKeyError)}}async getDerivedPrivateKey(e){try{let t=await gt.signUtil.ed25519.ed25519_getDerivedPrivateKey(e.mnemonic,e.hdPath,!1,"hex");return Promise.resolve("0x"+t)}catch{return Promise.reject(nn.GenPrivateKeyError)}}checkPrivateKey(e){if(!gt.base.validateHexString(e))return!1;let t=gt.base.fromHex(e.toLowerCase());return t.length==32||t.length==64}GetTransactionHash(e){let t=gt.base.fromHex(e),r=gt.base.sha3_256(E.Buffer.from("APTOS::Transaction")),s=E.Buffer.concat([E.Buffer.from(r),E.Buffer.of(0),E.Buffer.from(t)]),i=gt.base.sha3_256(s);return gt.base.toHex(i,!0)}getNewAddress(e){try{if(!this.checkPrivateKey(e.privateKey))return Promise.reject(nn.NewAddressError);let t=F.AptosAccount.fromPrivateKey(F.HexString.ensure(e.privateKey)),r=t.address().hex();e.addressType&&e.addressType==="short"&&(r=t.address().toShortString());let s={address:r||"",publicKey:t.pubKey().hex()};return Promise.resolve(s)}catch{return Promise.reject(nn.NewAddressError)}}validPrivateKey(e){let r={isValid:this.checkPrivateKey(e.privateKey),privateKey:e.privateKey};return Promise.resolve(r)}signTransaction(e){try{let t=F.AptosAccount.fromPrivateKey(F.HexString.ensure(e.privateKey)),r=e.data,s=t.address();r.base.sender&&(s=F.HexString.ensure(r.base.sender));let i=F.HexString.ensure(e.privateKey).toString(),o=new it.Ed25519PrivateKey(i.slice(2,66)),a=it.Account.fromPrivateKey({privateKey:o}),c=a.accountAddress,l=r.type,d;switch(l){case"transfer":{let u=r.base,g=r.data,w=(0,F.transferPayload)(g.recipientAddress,BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"tokenTransfer":{let u=r.base,g=r.data,w=(0,F.transferCoin)(g.tyArg,g.recipientAddress,BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"tokenTransferV2":{let u=r.base,g=r.data,w=(0,F.transferCoinV2)(g.tyArg,g.recipientAddress,BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"tokenMint":{let u=r.base,g=r.data,w=(0,F.mintCoin)(g.tyArg,g.recipientAddress,BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"tokenBurn":{let u=r.base,g=r.data,w=(0,F.burnCoin)(g.tyArg,BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"tokenRegister":{let u=r.base,g=r.data,w=(0,F.registerCoin)(g.tyArg),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"dapp":{let u=r.base,g=r.data;if(g.type==2){let w=new Tb.Deserializer(gt.base.fromHex(g.data)),m=Bb.TransactionPayload.deserialize(w),f=(0,F.createRawTransaction)(s,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,f)}else{let w=(0,F.createRawTransactionByABI)(s,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs),g.data,g.abi);d=(0,F.generateBCSTransaction)(t,w)}break}case"simulate":{let u=r.base,g=r.data;if(g.type==2){let w=new Tb.Deserializer(gt.base.fromHex(g.data)),m=Bb.TransactionPayload.deserialize(w),f=(0,F.createRawTransaction)(s,m,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSSimulateTransaction)(t,f)}else{let w=(0,F.createRawTransactionByABI)(s,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs),g.data,g.abi);d=(0,F.generateBCSSimulateTransaction)(t,w)}break}case"offerNftObject":{let u=r.base,g=r.data,w=(0,F.offerNFTTokenPayloadObject)(F.HexString.ensure(g.nftObject),F.HexString.ensure(g.receiver),BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"offerNft":{let u=r.base,g=r.data,w=(0,F.offerNFTTokenPayload)(F.HexString.ensure(g.receiver),F.HexString.ensure(g.creator),g.collectionName,g.tokenName,BigInt(g.version),BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"claimNft":{let u=r.base,g=r.data,w=(0,F.claimNFTTokenPayload)(F.HexString.ensure(g.sender),F.HexString.ensure(g.creator),g.collectionName,g.tokenName,BigInt(g.version)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSTransaction)(t,m);break}case"offerNft_simulate":{let u=r.base,g=r.data,w=(0,F.offerNFTTokenPayload)(F.HexString.ensure(g.receiver),F.HexString.ensure(g.creator),g.collectionName,g.tokenName,BigInt(g.version),BigInt(g.amount)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSSimulateTransaction)(t,m);break}case"claimNft_simulate":{let u=r.base,g=r.data,w=(0,F.claimNFTTokenPayload)(F.HexString.ensure(g.sender),F.HexString.ensure(g.creator),g.collectionName,g.tokenName,BigInt(g.version)),m=(0,F.createRawTransaction)(s,w,BigInt(u.sequenceNumber),u.chainId,BigInt(u.maxGasAmount),BigInt(u.gasUnitPrice),BigInt(u.expirationTimestampSecs));d=(0,F.generateBCSSimulateTransaction)(t,m);break}case"simple_transaction":{let u=r.base,g=r.data,w=u.chainId==1?$u.Network.MAINNET:$u.Network.TESTNET,m='{"abi":{"address":"0x1","name":"aptos_account","friends":["0x1::genesis","0x1::resource_account"],"exposed_functions":[{"name":"assert_account_exists","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"assert_account_is_registered_for_apt","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"batch_transfer","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","vector<address>","vector<u64>"],"return":[]},{"name":"batch_transfer_coins","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","vector<address>","vector<u64>"],"return":[]},{"name":"can_receive_direct_coin_transfers","visibility":"public","is_entry":false,"is_view":true,"generic_type_params":[],"params":["address"],"return":["bool"]},{"name":"create_account","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["address"],"return":[]},{"name":"deposit_coins","visibility":"public","is_entry":false,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["address","0x1::coin::Coin<T0>"],"return":[]},{"name":"set_allow_direct_coin_transfers","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","bool"],"return":[]},{"name":"transfer","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[],"params":["&signer","address","u64"],"return":[]},{"name":"transfer_coins","visibility":"public","is_entry":true,"is_view":false,"generic_type_params":[{"constraints":[]}],"params":["&signer","address","u64"],"return":[]}],"structs":[{"name":"DirectCoinTransferConfigUpdatedEvent","is_native":false,"abilities":["drop","store"],"generic_type_params":[],"fields":[{"name":"new_allow_direct_transfers","type":"bool"}]},{"name":"DirectTransferConfig","is_native":false,"abilities":["key"],"generic_type_params":[],"fields":[{"name":"allow_arbitrary_coin_transfers","type":"bool"},{"name":"update_coin_transfer_events","type":"0x1::event::EventHandle<0x1::aptos_account::DirectCoinTransferConfigUpdatedEvent>"}]}]}}',f=g.moveModule==null?m:g.moveModule,b=new it.AptosConfig({network:w,moveModule:f}),T=new it.Transaction(b);if(g.signAsFeePayer){let S=g.rawTransaction,v=new it.Deserializer(gt.base.fromHex(S)),x=it.RawTransaction.deserialize(v),z=new it.SimpleTransaction(x,it.AccountAddress.ZERO),I=T.signAsFeePayer({signer:a,transaction:z}),j={rawTransaction:z.rawTransaction.bcsToHex().toString(),sponsorSignature:I.bcsToHex().toString()};return Promise.resolve(j)}let p=g.functionArguments===void 0?[g.recipientAddress,g.amount]:g.functionArguments;return T.build.simple({sender:c,withFeePayer:g.withFeePayer,data:{function:g.function,typeArguments:g.tyArg,functionArguments:p},options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(S=>{let v=T.sign({signer:a,transaction:S});return{rawTransaction:S.rawTransaction.bcsToHex().toString(),senderSignature:v.bcsToHex().toString()}})}case"fungible_asset_transfer":{let u=r.base,g=r.data,w=new it.AptosConfig({network:$u.Network.MAINNET}),m=new it.FungibleAsset(w),f=g.fungibleAssetMetadataAddress,b=BigInt(g.amount);return m.transferFungibleAsset({sender:a,fungibleAssetMetadataAddress:it.AccountAddress.from(f),recipient:g.recipientAddress,amount:b,options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(p=>{let _=(0,PT.signTransaction)({signer:a,transaction:p}),S=(0,it.generateSignedTransaction)({transaction:p,senderAuthenticator:_});return gt.base.toHex(S)})}case"simulate_fungible_asset_transfer":{let u=r.base,g=r.data,w=new it.AptosConfig({network:$u.Network.MAINNET}),m=new it.FungibleAsset(w),f=g.fungibleAssetMetadataAddress,b=BigInt(g.amount);return m.transferFungibleAsset({sender:a,fungibleAssetMetadataAddress:it.AccountAddress.from(f),recipient:g.recipientAddress,amount:b,options:{maxGasAmount:Number(u.maxGasAmount),gasUnitPrice:Number(u.gasUnitPrice),expireTimestamp:Number(u.expirationTimestampSecs),chainId:Number(u.chainId),accountSequenceNumber:Number(u.sequenceNumber)}}).then(p=>{let _=(0,it.generateSignedTransactionForSimulation)({transaction:p,signerPublicKey:a.publicKey});return gt.base.toHex(_)})}default:return Promise.reject(nn.SignTxError)}return Promise.resolve(gt.base.toHex(d))}catch{return Promise.reject(nn.SignTxError)}}validAddress(e){let t;try{e.address.match(/^0x[0-9A-Fa-f]{62,64}$/)||e.address.match(/^[0-9A-Fa-f]{64}$/)?t=!0:t=!1}catch{t=!1}let r={isValid:t,address:e.address};return Promise.resolve(r)}async signMessage(e){try{let t=e.data,r=await vf.signMessage(t,e.privateKey);return r.startsWith("0x")&&(r=r.substring(2)),Promise.resolve(r)}catch{return Promise.reject(nn.SignTxError)}}async signMessageByPayload(e){try{let t=e.data,r="APTOS",s,i,o,a=r;t?.address&&(s=new F.AptosAccount(gt.base.fromHex(e.privateKey)).address().hex(),a=a.concat(`
address: `,s)),t?.application&&(i=t.dAppDomain==null?"":t.dAppDomain,a=a.concat(`
application: `,i)),t.chainId&&(o=t.chain_id==null?0:t.chain_id,a=a.concat(`
chainId: `,o.toString())),a=a.concat(`
message: `,t.message),a=a.concat(`
nonce: `,t.nonce);let c=await vf.signMessage(a,e.privateKey);c.startsWith("0x")&&(c=c.substring(2));let l={address:s,application:i,chainId:o,fullMessage:a,message:t.message,nonce:t.nonce,prefix:r,signature:c};return Promise.resolve(l)}catch{return Promise.reject(nn.SignMsgError)}}async calcTxHash(e){try{return Promise.resolve(this.GetTransactionHash(e.data))}catch{return Promise.reject(nn.CalcTxHashError)}}async validSignedTransaction(e){try{let t=e.data?e.data.skipCheckSign:void 0,r=vf.validSignedTransaction(e.tx,t||!1);return Promise.resolve((0,nn.jsonStringifyUniform)(r))}catch{return Promise.reject(nn.validSignedTransactionError)}}};Gn.AptosWallet=Uf});var Sb=U(gn=>{h();y();var OT=gn&&gn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,s)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),La=gn&&gn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&OT(e,n,t)};Object.defineProperty(gn,"__esModule",{value:!0});La(Ol(),gn);La(kn(),gn);La(xl(),gn);La(zl(),gn);La(xb(),gn)});export{Sb as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-T64IYVNG.js.map
