import{a as R,b as y,c as O}from"./chunk-4PQXB46K.js";import"./chunk-GNWL7PD3.js";import"./chunk-5BOMXKNH.js";import{a as _}from"./chunk-ABRHAPNW.js";import"./chunk-NWUTPD36.js";import"./chunk-UJ7MX4VL.js";import{a as M,b as S}from"./chunk-L2NVTMS2.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import{a as H}from"./chunk-JTGFDHLS.js";import"./chunk-PMGQLREC.js";import"./chunk-RK4XZYBE.js";import"./chunk-YSHDEOBZ.js";import"./chunk-HXUMX2S7.js";import"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import"./chunk-VGT27A4M.js";import"./chunk-R4G6BEPF.js";import"./chunk-2333N6PK.js";import{a as f}from"./chunk-AYCAVTPT.js";import"./chunk-OG46YTNN.js";import"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import"./chunk-CYOQISC6.js";import"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{Fa as u,Jb as D,Vb as K}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import"./chunk-LDKM7IQF.js";import"./chunk-6O63U2D6.js";import"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import"./chunk-O337TVCZ.js";import"./chunk-BWEIB2OY.js";import"./chunk-EJP3AYQB.js";import"./chunk-TZ33IXYR.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-Y2L2VAJY.js";import"./chunk-5AYYZJMV.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as g,m as E,o as I}from"./chunk-GLD6H5Q5.js";E();I();var v=g(R()),P=g(_()),o=g(K());D();var w=v.default.HardwareWebSdk,T=class extends O{async signTransaction(l,e,p){return new Promise((r,n)=>{(async()=>{let{onekeyInfo:s,hdPathMap:t}=l,i;try{i=await this.initOneKey({onekeyInfo:s,onUiCancel(){n(new Error(f))}})}catch(m){return n(this.handleErrors(m))}e=H(e);let c=await M(e),d=t[u],{success:h,payload:a}=await w.evmSignTransaction(s?.connectId,i,{path:d,transaction:{...c.toJSON(),to:(0,o.bufferToHex)(c.to).toString(),chainId:e.chainId}});if(y.closeModal(),h){let m=await S(c,a);return r(p?m:{rawTxResult:m})}return n(this.handleErrors(a))})()})}async signPersonalMessage(l,e={}){return new Promise((p,r)=>{(async()=>{let{onekeyInfo:n,hdPathMap:s}=l,t;try{t=await this.initOneKey({onekeyInfo:n,onUiCancel(){r(new Error(f))}})}catch(a){return r(this.handleErrors(a))}let{data:i=""}=e||{},c=s[u],{success:d,payload:h}=await w.evmSignMessage(n?.connectId,t,{path:c,messageHex:(0,o.stripHexPrefix)(i)});if(y.closeModal(),d){let{signature:a=""}=h||{};return p((0,o.addHexPrefix)(a))}return r(this.handleErrors(h))})()})}async signTypedData(l,e={}){return new Promise((p,r)=>{(async()=>{let{onekeyInfo:n,hdPathMap:s}=l,t;try{t=await this.initOneKey({onekeyInfo:n,onUiCancel(){r(new Error(f))}})}catch(k){return r(this.handleErrors(k))}let i=s[u];if(!(e.version==="V4"))return y.closeModal(),r(new Error("OneKey: Only version 4 of typed data signing is supported"));let d=JSON.parse(e.data),{domain_separator_hash:h,message_hash:a}=(0,P.default)(d,!0),{success:m,payload:x}=await w.evmSignTypedData(n?.connectId,t,{path:i,data:d,metamask_v4_compat:!0,domainHash:h,messageHash:a});return y.closeModal(),m?p((0,o.addHexPrefix)(x?.signature)):r(this.handleErrors(x))})()})}},J=new T;export{J as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ethAdapter-SA2U7JIY.js.map
