import{a as Mg,b as Qu,g as ef}from"./chunk-S2HMMJL3.js";import{K as tf}from"./chunk-EZ33Y5AH.js";import{e as rf}from"./chunk-Z2O34Z77.js";import{h as nf,i as of}from"./chunk-T5N2XEUZ.js";import{a as Aa}from"./chunk-PIDQJ6J5.js";import{j as Zu}from"./chunk-QTFYEPZ5.js";import{a as Ju,v as Xu}from"./chunk-M4YCAMAJ.js";import{a as Vr}from"./chunk-NT2W7G7Y.js";import{A as zu,a as Yu}from"./chunk-CFXFWVCZ.js";import{a as Vt}from"./chunk-NIVBOS5R.js";import"./chunk-C4AEIBFI.js";import{a as fi}from"./chunk-HMORTYXM.js";import{a as Eu,b as Tu}from"./chunk-JR3YM2BU.js";import{a as lu}from"./chunk-XX6E3LAM.js";import{a as $u,d as Vu}from"./chunk-5EAA4KU7.js";import{a as Fu}from"./chunk-OEIE6KE4.js";import{a as su}from"./chunk-GSWZ5NE6.js";import"./chunk-65M54JVO.js";import{b as Uu}from"./chunk-PNVAA2YG.js";import{c as ju}from"./chunk-GNUZCK62.js";import{e as Hu}from"./chunk-NVJFLL3D.js";import"./chunk-XIDZSPWD.js";import{a as ye}from"./chunk-KCZXE3TB.js";import{h as Bu,o as Wu}from"./chunk-VVCHQHKB.js";import"./chunk-N3OY7GLG.js";import{a as Ku}from"./chunk-M7KSOUDU.js";import{i as Gu}from"./chunk-CVKIATYP.js";import"./chunk-HFZH6ZWL.js";import"./chunk-D6XWIX4H.js";import{c as Oa,d as Za,e as Qa,f as es}from"./chunk-VUP2VQVP.js";import{a as Cs,c as vt,d as rt,e as Ps}from"./chunk-ORJ3QBGC.js";import{a as uu}from"./chunk-QF25V5YC.js";import{e as au}from"./chunk-VVL4IZMM.js";import"./chunk-ONV3ODOM.js";import"./chunk-ZI4ZHHA3.js";import{b as ru,c as nu}from"./chunk-3545CIHX.js";import{a as ou}from"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-3DI6NEAD.js";import{a as nt,b as Ce,c as Yt,d as tn,e as xu,f as Cu}from"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import{a as ui}from"./chunk-5KSRM7B2.js";import{a as ku}from"./chunk-PPHSAQ52.js";import{f as qu}from"./chunk-JUOUD4EO.js";import{d as $t}from"./chunk-4W35J5OQ.js";import{c as Mu,i as Nu}from"./chunk-GPJC633M.js";import"./chunk-YC6W5MPL.js";import{a as Ou,b as Au}from"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import{a as mu}from"./chunk-IQQANR3G.js";import"./chunk-2VRILCVI.js";import{g as Ql}from"./chunk-IRMGOW5H.js";import{a as Iu}from"./chunk-CQ64XZTP.js";import{i as yu,n as bu}from"./chunk-UXLFUD7T.js";import"./chunk-2HEOW3XO.js";import"./chunk-DLRFA5AU.js";import{a as gu,b as wu}from"./chunk-OC3IFNJW.js";import{a as eu,d as tu}from"./chunk-UI7PAU35.js";import"./chunk-SMZ64QW3.js";import{a as de}from"./chunk-DQTTI4XL.js";import{a as Lu}from"./chunk-FF6KJRSH.js";import{a as Ru,b as Du}from"./chunk-CQ7YBDUS.js";import{a as _u,b as vu}from"./chunk-GSYNHSX4.js";import"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import{b as iu}from"./chunk-HXUMX2S7.js";import{a as Pu}from"./chunk-JD37M3VX.js";import{f as hu}from"./chunk-4HCF54KG.js";import"./chunk-WMYLGW5C.js";import"./chunk-GUVHO63M.js";import{a as cu,b as li}from"./chunk-X6SX7DLM.js";import{a as pu}from"./chunk-FYACTIEH.js";import{s as Su}from"./chunk-7ZRI3S6Z.js";import"./chunk-QKXA7YNE.js";import"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import"./chunk-M2F2X65U.js";import{b as fu,c as du}from"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import{$ as pl,$a as ql,A as js,B as Fs,C as Hs,D as Ks,E as Gs,F as $s,Fa as Al,G as Vs,H as Ys,I as Xr,J as zs,K as Js,Ka as Rl,L as Xs,M as Zs,N as Qs,O as el,P as tl,Pa as Ml,Q as rl,R as nl,Ra as Il,S as il,Sa as Dl,T as ol,Ta as Nl,U as al,V as sl,W as ll,Wa as Zr,X as ul,Y as fl,Z as dl,Za as kl,_ as cl,_a as Ll,a as fe,aa as hl,ab as Bl,b as Yr,ba as ml,bb as Wl,c as zr,ca as gl,cb as Ul,d as Os,da as wl,db as jl,e as Jr,ea as yl,eb as Fl,f as As,fa as si,fb as Hl,g as Rs,ga as bl,h as Ms,ha as _l,i as Is,ia as vl,k as Ds,l as Ns,m as ks,ma as Sl,oa as El,pa as Tl,qa as xl,ra as Cl,sa as Pl,ta as Ol,u as Ls,v as qs,w as Bs,x as Ws,y as Us,z as St}from"./chunk-S5DGV5WL.js";import{b as oe}from"./chunk-AOXUSYRH.js";import"./chunk-WKBC6JL3.js";import{b as ts,c as rs,d as ns,e as Fr}from"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import{X as $r}from"./chunk-VPDRXROE.js";import{$ as gs,C as cs,Ca as vs,D as ps,Da as Ss,R as hs,_ as ms,ga as ws,ha as ys,ja as Ye,ka as bt,sa as bs,u as wt,w as ge,ya as _s,z as ds}from"./chunk-JLIPSIRU.js";import"./chunk-CIDV5VJQ.js";import{a as Ee}from"./chunk-VX55KNI4.js";import{a as en,b as Yl,c as Wg,f as zl,g as Jl,j as Xl,m as Zl}from"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import{G as Va,H as Ya,R as za,S as Ja,T as Xa,V as Ng,b as qa,e as Ba,f as Wa,g as Ua,h as ja,i as Fa,j as Ha,k as Ka,n as Ga,o as $a}from"./chunk-TS5DNQFS.js";import{A as ls,C as us,D as fs,E as oi,a as Ra,b as Ma,i as is,j as qg,k as yt,l as ii,x as as,y as ss,z as Bg}from"./chunk-656GFN7J.js";import"./chunk-VGT27A4M.js";import{b as os,d as Ie,f as Gt}from"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import{b as Qr,d as Kl,f as Gl,g as $l,i as Vl}from"./chunk-OG46YTNN.js";import{c as ni}from"./chunk-RXNDJ7P3.js";import{a as Hr}from"./chunk-YM7II27E.js";import{a as _t,b as ai}from"./chunk-CYOQISC6.js";import{a as Es,c as Kr,f as Ts,g as xs,h as Gr}from"./chunk-TKYTZF2K.js";import{a as kg,b as Lg}from"./chunk-RY27BWZR.js";import{a as Ta,b as xa,d as Ca,e as Pa,f as jt,g as Qn}from"./chunk-WIWWLEBZ.js";import{Aa as Ur,Kc as Rg,Y as Ve,Z as Zn,_ as Me,a as he,b as Ut,c as me,d as $e,da as va,e as zn,ea as Wr,f as Re,i as Jn,j as Lr,k as wa,l as ya,m as Xn,n as qr,o as ba,p as _a,r as Br,v as mt,ya as Sa,yc as Ea,za as gt}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{D as ka,G as ie,H as La,I as Kt,a as Da,b as Na,f as ti,j as jr,n as Dg,o as we,r as ri,y as xe}from"./chunk-LDKM7IQF.js";import{f as Se,j as ha,la as ga,m as kr,n as ma,pa as ht}from"./chunk-6O63U2D6.js";import{B as pa,C as Y,M as ve,l as fa,o as da,v as ca,x as N}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import{a as pt}from"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{A as Ht,c as Ia,ca as Te}from"./chunk-OSCGYMLH.js";import{a as Ft}from"./chunk-ADWO6K2C.js";import{a as R}from"./chunk-O337TVCZ.js";import{b as ei,c as Ig}from"./chunk-6TJXSJ4R.js";import"./chunk-BWEIB2OY.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-ZVYHIM2Y.js";import{d as Vn,g as Z,h as dt,i as Ge,j as Q,w as ct,x as Yn}from"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{c as T,f as g,h as Ke,l as process,m as a,n as f,o as s}from"./chunk-GLD6H5Q5.js";var zt=T((Qv,di)=>{"use strict";a();s();!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?di.exports=Ug:di.exports=process.nextTick;function Ug(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,l;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),l=0;l<o.length;)o[l++]=arguments[l];return process.nextTick(function(){e.apply(null,o)})}}});var sf=T((rS,af)=>{a();s();var jg={}.toString;af.exports=Array.isArray||function(e){return jg.call(e)=="[object Array]"}});var ci=T((oS,lf)=>{a();s();lf.exports=dt().EventEmitter});var Jt=T((pi,ff)=>{a();s();var rn=Vn(),De=rn.Buffer;function uf(e,t){for(var r in e)t[r]=e[r]}De.from&&De.alloc&&De.allocUnsafe&&De.allocUnsafeSlow?ff.exports=rn:(uf(rn,pi),pi.Buffer=Et);function Et(e,t,r){return De(e,t,r)}uf(De,Et);Et.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return De(e,t,r)};Et.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=De(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Et.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return De(e)};Et.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return rn.SlowBuffer(e)}});var pf=T((fS,cf)=>{"use strict";a();s();function Fg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var df=Jt().Buffer;function Hg(e,t,r){e.copy(t,r)}cf.exports=function(){function e(){Fg(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return df.alloc(0);if(this.length===1)return this.head.data;for(var n=df.allocUnsafe(r>>>0),i=this.head,o=0;i;)Hg(i.data,n,o),o+=i.data.length,i=i.next;return n},e}()});var hi=T((pS,gf)=>{"use strict";a();s();var hf=zt();function Kg(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(n||i){t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&hf(mf,this,e);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(hf(mf,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)})}function Gg(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function mf(e,t){e.emit("error",t)}gf.exports={destroy:Kg,undestroy:Gg}});var gi=T((gS,Tf)=>{"use strict";a();s();var it=zt();Tf.exports=V;function yf(e){var t=this;this.next=null,this.entry=null,this.finish=function(){uw(t,e)}}var $g=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:it,Tt;V.WritableState=Zt;var bf=Q();bf.inherits=Z();var Vg={deprecate:Yn()},_f=ci(),on=Jt().Buffer,Yg=globalThis.Uint8Array||function(){};function zg(e){return on.from(e)}function Jg(e){return on.isBuffer(e)||e instanceof Yg}var vf=hi();bf.inherits(V,_f);function Xg(){}function Zt(e,t){Tt=Tt||ot(),e=e||{},this.objectMode=!!e.objectMode,t instanceof Tt&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){iw(t,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new yf(this)}Zt.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(Zt.prototype,"buffer",{get:Vg.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var nn;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(nn=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(e){return nn.call(this,e)?!0:e&&e._writableState instanceof Zt}})):nn=function(e){return e instanceof this};function V(e){if(Tt=Tt||ot(),!nn.call(V,this)&&!(this instanceof Tt))return new V(e);this._writableState=new Zt(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),_f.call(this)}V.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Zg(e,t){var r=new Error("write after end");e.emit("error",r),it(t,r)}function Qg(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),it(n,o),i=!1),i}V.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=Jg(e)&&!n.objectMode;return o&&!on.isBuffer(e)&&(e=zg(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Xg),n.ended?Zg(this,r):(o||Qg(this,n,e,r))&&(n.pendingcb++,i=tw(this,n,o,e,t,r)),i};V.prototype.cork=function(){var e=this._writableState;e.corked++};V.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Sf(this,e))};V.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function ew(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=on.from(t,r)),t}function tw(e,t,r,n,i,o){if(!r){var l=ew(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var m=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},m?m.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else mi(e,t,!1,u,n,i,o);return d}function mi(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function rw(e,t,r,n,i){--t.pendingcb,r?(it(i,n),it(Xt,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),Xt(e,t))}function nw(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function iw(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(nw(r),t)rw(e,r,n,t,i);else{var o=Ef(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Sf(e,r),n?$g(wf,e,r,o,i):wf(e,r,o,i)}}function wf(e,t,r,n){r||ow(e,t),t.pendingcb--,n(),Xt(e,t)}function ow(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Sf(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,u=!0;r;)i[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;i.allBuffers=u,mi(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new yf(t)}else{for(;r;){var d=r.chunk,m=r.encoding,S=r.callback,E=t.objectMode?1:d.length;if(mi(e,t,!1,E,d,m,S),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}V.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};V.prototype._writev=null;V.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&lw(this,n,r)};function Ef(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function aw(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Xt(e,t)})}function sw(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,it(aw,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Xt(e,t){var r=Ef(t);return r&&(sw(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function lw(e,t,r){t.ending=!0,Xt(e,t),r&&(t.finished?it(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function uw(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(V.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});V.prototype.destroy=vf.destroy;V.prototype._undestroy=vf.undestroy;V.prototype._destroy=function(e,t){this.end(),t(e)}});var ot=T((bS,Af)=>{"use strict";a();s();var Cf=zt(),fw=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Af.exports=ze;var Pf=Q();Pf.inherits=Z();var Of=yi(),wi=gi();Pf.inherits(ze,Of);var xf=fw(wi.prototype);for(an=0;an<xf.length;an++)sn=xf[an],ze.prototype[sn]||(ze.prototype[sn]=wi.prototype[sn]);var sn,an;function ze(e){if(!(this instanceof ze))return new ze(e);Of.call(this,e),wi.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",dw)}function dw(){this.allowHalfOpen||this._writableState.ended||Cf(cw,this)}function cw(e){e.end()}Object.defineProperty(ze.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});ze.prototype._destroy=function(e,t){this.push(null),this.end(),Cf(t,e)}});var vi=T(Mf=>{"use strict";a();s();var _i=Jt().Buffer,Rf=_i.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function pw(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function hw(e){var t=pw(e);if(typeof t!="string"&&(_i.isEncoding===Rf||!Rf(e)))throw new Error("Unknown encoding: "+e);return t||e}Mf.StringDecoder=Qt;function Qt(e){this.encoding=hw(e);var t;switch(this.encoding){case"utf16le":this.text=_w,this.end=vw,t=4;break;case"utf8":this.fillLast=ww,t=4;break;case"base64":this.text=Sw,this.end=Ew,t=3;break;default:this.write=Tw,this.end=xw;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=_i.allocUnsafe(t)}Qt.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Qt.prototype.end=bw;Qt.prototype.text=yw;Qt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function bi(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function mw(e,t,r){var n=t.length-1;if(n<r)return 0;var i=bi(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=bi(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=bi(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function gw(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD".repeat(r);if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD".repeat(r+1);if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD".repeat(r+2)}}function ww(e){var t=this.lastTotal-this.lastNeed,r=gw(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function yw(e,t){var r=mw(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function bw(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD".repeat(this.lastTotal-this.lastNeed):t}function _w(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function vw(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Sw(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Ew(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Tw(e){return e.toString(this.encoding)}function xw(e){return e&&e.length?this.write(e):""}});var yi=T((CS,Hf)=>{"use strict";a();s();var Ct=zt();Hf.exports=j;var Cw=sf(),er;j.ReadableState=Bf;var xS=dt().EventEmitter,kf=function(e,t){return e.listeners(t).length},Ci=ci(),tr=Jt().Buffer,Pw=globalThis.Uint8Array||function(){};function Ow(e){return tr.from(e)}function Aw(e){return tr.isBuffer(e)||e instanceof Pw}var Lf=Q();Lf.inherits=Z();var Si=ct(),M=void 0;Si&&Si.debuglog?M=Si.debuglog("stream"):M=function(){};var Rw=pf(),qf=hi(),xt;Lf.inherits(j,Ci);var Ei=["error","close","destroy","pause","resume"];function Mw(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Cw(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Bf(e,t){er=er||ot(),e=e||{},this.objectMode=!!e.objectMode,t instanceof er&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Rw,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(xt||(xt=vi().StringDecoder),this.decoder=new xt(e.encoding),this.encoding=e.encoding)}function j(e){if(er=er||ot(),!(this instanceof j))return new j(e);this._readableState=new Bf(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Ci.call(this)}Object.defineProperty(j.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});j.prototype.destroy=qf.destroy;j.prototype._undestroy=qf.undestroy;j.prototype._destroy=function(e,t){this.push(null),t(e)};j.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=tr.from(e,t),t=""),n=!0),Wf(this,e,t,!1,n)};j.prototype.unshift=function(e){return Wf(this,e,null,!0,!1)};function Wf(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,kw(e,o);else{var l;i||(l=Iw(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==tr.prototype&&(t=Ow(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Ti(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?Ti(e,o,t,!1):Uf(e,o)):Ti(e,o,t,!1))):n||(o.reading=!1)}return Dw(o)}function Ti(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&ln(e)),Uf(e,t)}function Iw(e,t){var r;return!Aw(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Dw(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}j.prototype.isPaused=function(){return this._readableState.flowing===!1};j.prototype.setEncoding=function(e){return xt||(xt=vi().StringDecoder),this._readableState.decoder=new xt(e),this._readableState.encoding=e,this};var If=8388608;function Nw(e){return e>=If?e=If:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Df(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Nw(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}j.prototype.read=function(e){M("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return M("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?xi(this):ln(this),null;if(e=Df(e,t),e===0&&t.ended)return t.length===0&&xi(this),null;var n=t.needReadable;M("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,M("length less than watermark",n)),t.ended||t.reading?(n=!1,M("reading or ended",n)):n&&(M("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Df(r,t)));var i;return e>0?i=jf(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&xi(this)),i!==null&&this.emit("data",i),i};function kw(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,ln(e)}}function ln(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(M("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ct(Nf,e):Nf(e))}function Nf(e){M("emit readable"),e.emit("readable"),Pi(e)}function Uf(e,t){t.readingMore||(t.readingMore=!0,Ct(Lw,e,t))}function Lw(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(M("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}j.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};j.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,M("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?u:y;n.endEmitted?Ct(o):r.once("end",o),e.on("unpipe",l);function l(b,v){M("onunpipe"),b===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,S())}function u(){M("onend"),e.end()}var d=qw(r);e.on("drain",d);var m=!1;function S(){M("cleanup"),e.removeListener("close",x),e.removeListener("finish",c),e.removeListener("drain",d),e.removeListener("error",h),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",O),m=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&d()}var E=!1;r.on("data",O);function O(b){M("ondata"),E=!1;var v=e.write(b);v===!1&&!E&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Ff(n.pipes,e)!==-1)&&!m&&(M("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,E=!0),r.pause())}function h(b){M("onerror",b),y(),e.removeListener("error",h),kf(e,"error")===0&&e.emit("error",b)}Mw(e,"error",h);function x(){e.removeListener("finish",c),y()}e.once("close",x);function c(){M("onfinish"),e.removeListener("close",x),y()}e.once("finish",c);function y(){M("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(M("pipe resume"),r.resume()),e};function qw(e){return function(){var t=e._readableState;M("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&kf(e,"data")&&(t.flowing=!0,Pi(e))}}j.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=Ff(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};j.prototype.on=function(e,t){var r=Ci.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ln(this):Ct(Bw,this))}return r};j.prototype.addListener=j.prototype.on;function Bw(e){M("readable nexttick read 0"),e.read(0)}j.prototype.resume=function(){var e=this._readableState;return e.flowing||(M("resume"),e.flowing=!0,Ww(this,e)),this};function Ww(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ct(Uw,e,t))}function Uw(e,t){t.reading||(M("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Pi(e),t.flowing&&!t.reading&&e.read(0)}j.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Pi(e){var t=e._readableState;for(M("flow",t.flowing);t.flowing&&e.read()!==null;);}j.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(M("wrapped end"),t.decoder&&!t.ended){var l=t.decoder.end();l&&l.length&&n.push(l)}n.push(null)}),e.on("data",function(l){if(M("wrapped data"),t.decoder&&(l=t.decoder.write(l)),!(t.objectMode&&l==null)&&!(!t.objectMode&&(!l||!l.length))){var u=n.push(l);u||(r=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<Ei.length;o++)e.on(Ei[o],n.emit.bind(n,Ei[o]));return n._read=function(l){M("wrapped _read",l),r&&(r=!1,e.resume())},n};j._fromList=jf;function jf(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=jw(e,t.buffer,t.decoder),r}function jw(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Fw(e,t):Hw(e,t),n}function Fw(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function Hw(e,t){var r=tr.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function xi(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ct(Kw,t,e))}function Kw(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Ff(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var Oi=T((AS,$f)=>{"use strict";a();s();$f.exports=Ne;var un=ot(),Gf=Q();Gf.inherits=Z();Gf.inherits(Ne,un);function Gw(e){this.afterTransform=function(t,r){return $w(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function $w(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Ne(e){if(!(this instanceof Ne))return new Ne(e);un.call(this,e),this._transformState=new Gw(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r,n){Kf(t,r,n)}):Kf(t)})}Ne.prototype.push=function(e,t){return this._transformState.needTransform=!1,un.prototype.push.call(this,e,t)};Ne.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Ne.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ne.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Ne.prototype._destroy=function(e,t){var r=this;un.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function Kf(e,t,r){if(t)return e.emit("error",t);r!=null&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Jf=T((IS,zf)=>{"use strict";a();s();zf.exports=rr;var Vf=Oi(),Yf=Q();Yf.inherits=Z();Yf.inherits(rr,Vf);function rr(e){if(!(this instanceof rr))return new rr(e);Vf.call(this,e)}rr.prototype._transform=function(e,t,r){r(null,e)}});var Zf=T((Pe,Xf)=>{a();s();Pe=Xf.exports=yi();Pe.Stream=Pe;Pe.Readable=Pe;Pe.Writable=gi();Pe.Duplex=ot();Pe.Transform=Oi();Pe.PassThrough=Jf()});var id=T((jS,nd)=>{a();s();nd.exports=ir;ir.default=ir;ir.stable=td;ir.stableStringify=td;var ke=[],Je=[];function ir(e,t,r){Ai(e,"",[],void 0);var n;for(Je.length===0?n=JSON.stringify(e,t,r):n=JSON.stringify(e,rd(t),r);ke.length!==0;){var i=ke.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}return n}function Ai(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var o=Object.getOwnPropertyDescriptor(n,t);o.get!==void 0?o.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),ke.push([n,t,e,o])):Je.push([e,t]):(n[t]="[Circular]",ke.push([n,t,e]));return}if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)Ai(e[i],i,r,e);else{var l=Object.keys(e);for(i=0;i<l.length;i++){var u=l[i];Ai(e[u],u,r,e)}}r.pop()}}function Vw(e,t){return e<t?-1:e>t?1:0}function td(e,t,r){var n=Ri(e,"",[],void 0)||e,i;for(Je.length===0?i=JSON.stringify(n,t,r):i=JSON.stringify(n,rd(t),r);ke.length!==0;){var o=ke.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return i}function Ri(e,t,r,n){var i;if(typeof e=="object"&&e!==null){for(i=0;i<r.length;i++)if(r[i]===e){var o=Object.getOwnPropertyDescriptor(n,t);o.get!==void 0?o.configurable?(Object.defineProperty(n,t,{value:"[Circular]"}),ke.push([n,t,e,o])):Je.push([e,t]):(n[t]="[Circular]",ke.push([n,t,e]));return}if(typeof e.toJSON=="function")return;if(r.push(e),Array.isArray(e))for(i=0;i<e.length;i++)Ri(e[i],i,r,e);else{var l={},u=Object.keys(e).sort(Vw);for(i=0;i<u.length;i++){var d=u[i];Ri(e[d],d,r,e),l[d]=e[d]}if(n!==void 0)ke.push([n,t,e]),n[t]=l;else return l}r.pop()}}function rd(e){return e=e!==void 0?e:function(t,r){return r},function(t,r){if(Je.length>0)for(var n=0;n<Je.length;n++){var i=Je[n];if(i[1]===t&&i[0]===r){r="[Circular]",Je.splice(n,1);break}}return e.call(this,t,r)}}});var dn=T(Pt=>{"use strict";a();s();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.EthereumProviderError=Pt.EthereumRpcError=void 0;var Yw=id(),fn=class extends Error{constructor(t,r,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string.');super(r),this.code=t,n!==void 0&&(this.data=n)}serialize(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Yw.default(this.serialize(),Jw,2)}};Pt.EthereumRpcError=fn;var Mi=class extends fn{constructor(t,r,n){if(!zw(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,r,n)}};Pt.EthereumProviderError=Mi;function zw(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Jw(e,t){if(t!=="[Circular]")return t}});var cn=T(Ot=>{"use strict";a();s();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.errorValues=Ot.errorCodes=void 0;Ot.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Ot.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}});var Ni=T(be=>{"use strict";a();s();Object.defineProperty(be,"__esModule",{value:!0});be.serializeError=be.isValidCode=be.getMessageFromCode=be.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var pn=cn(),Xw=dn(),od=pn.errorCodes.rpc.internal,Zw="Unspecified error message. This is a bug, please report it.",Qw={code:od,message:Di(od)};be.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function Di(e,t=Zw){if(Number.isInteger(e)){let r=e.toString();if(Ii(pn.errorValues,r))return pn.errorValues[r].message;if(ld(e))return be.JSON_RPC_SERVER_ERROR_MESSAGE}return t}be.getMessageFromCode=Di;function sd(e){if(!Number.isInteger(e))return!1;let t=e.toString();return!!(pn.errorValues[t]||ld(e))}be.isValidCode=sd;function ey(e,{fallbackError:t=Qw,shouldIncludeStack:r=!1}={}){var n,i;if(!t||!Number.isInteger(t.code)||typeof t.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof Xw.EthereumRpcError)return e.serialize();let o={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Ii(e,"code")&&sd(e.code)){let u=e;o.code=u.code,u.message&&typeof u.message=="string"?(o.message=u.message,Ii(u,"data")&&(o.data=u.data)):(o.message=Di(o.code),o.data={originalError:ad(e)})}else{o.code=t.code;let u=(n=e)===null||n===void 0?void 0:n.message;o.message=u&&typeof u=="string"?u:t.message,o.data={originalError:ad(e)}}let l=(i=e)===null||i===void 0?void 0:i.stack;return r&&e&&l&&typeof l=="string"&&(o.stack=l),o}be.serializeError=ey;function ld(e){return e>=-32099&&e<=-32e3}function ad(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Ii(e,t){return Object.prototype.hasOwnProperty.call(e,t)}});var dd=T(hn=>{"use strict";a();s();Object.defineProperty(hn,"__esModule",{value:!0});hn.ethErrors=void 0;var ki=dn(),ud=Ni(),J=cn();hn.ethErrors={rpc:{parse:e=>ce(J.errorCodes.rpc.parse,e),invalidRequest:e=>ce(J.errorCodes.rpc.invalidRequest,e),invalidParams:e=>ce(J.errorCodes.rpc.invalidParams,e),methodNotFound:e=>ce(J.errorCodes.rpc.methodNotFound,e),internal:e=>ce(J.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("RPC Server errors must provide single object argument.");let{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return ce(t,e)},invalidInput:e=>ce(J.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>ce(J.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>ce(J.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>ce(J.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>ce(J.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>ce(J.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>or(J.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>or(J.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>or(J.errorCodes.provider.unsupportedMethod,e),disconnected:e=>or(J.errorCodes.provider.disconnected,e),chainDisconnected:e=>or(J.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Provider custom errors must provide single object argument.");let{code:t,message:r,data:n}=e;if(!r||typeof r!="string")throw new Error('"message" must be a nonempty string');return new ki.EthereumProviderError(t,r,n)}}};function ce(e,t){let[r,n]=fd(t);return new ki.EthereumRpcError(e,r||ud.getMessageFromCode(e),n)}function or(e,t){let[r,n]=fd(t);return new ki.EthereumProviderError(e,r||ud.getMessageFromCode(e),n)}function fd(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:t,data:r}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}});var hd=T(te=>{"use strict";a();s();Object.defineProperty(te,"__esModule",{value:!0});te.getMessageFromCode=te.serializeError=te.EthereumProviderError=te.EthereumRpcError=te.ethErrors=te.errorCodes=void 0;var cd=dn();Object.defineProperty(te,"EthereumRpcError",{enumerable:!0,get:function(){return cd.EthereumRpcError}});Object.defineProperty(te,"EthereumProviderError",{enumerable:!0,get:function(){return cd.EthereumProviderError}});var pd=Ni();Object.defineProperty(te,"serializeError",{enumerable:!0,get:function(){return pd.serializeError}});Object.defineProperty(te,"getMessageFromCode",{enumerable:!0,get:function(){return pd.getMessageFromCode}});var ty=dd();Object.defineProperty(te,"ethErrors",{enumerable:!0,get:function(){return ty.ethErrors}});var ry=cn();Object.defineProperty(te,"errorCodes",{enumerable:!0,get:function(){return ry.errorCodes}})});var bd=T((uE,yd)=>{a();s();var iy={}.toString;yd.exports=Array.isArray||function(e){return iy.call(e)=="[object Array]"}});var qi=T((cE,_d)=>{a();s();_d.exports=dt().EventEmitter});var ar=T((Bi,Sd)=>{a();s();var mn=Vn(),Le=mn.Buffer;function vd(e,t){for(var r in e)t[r]=e[r]}Le.from&&Le.alloc&&Le.allocUnsafe&&Le.allocUnsafeSlow?Sd.exports=mn:(vd(mn,Bi),Bi.Buffer=At);function At(e,t,r){return Le(e,t,r)}vd(Le,At);At.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Le(e,t,r)};At.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Le(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};At.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Le(e)};At.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return mn.SlowBuffer(e)}});var Td=T((wE,Wi)=>{"use strict";a();s();function oy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ed=ar().Buffer,sr=ct();function ay(e,t,r){e.copy(t,r)}Wi.exports=function(){function e(){oy(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return Ed.alloc(0);if(this.length===1)return this.head.data;for(var n=Ed.allocUnsafe(r>>>0),i=this.head,o=0;i;)ay(i.data,n,o),o+=i.data.length,i=i.next;return n},e}();sr&&sr.inspect&&sr.inspect.custom&&(Wi.exports.prototype[sr.inspect.custom]=function(){var e=sr.inspect({length:this.length});return this.constructor.name+" "+e})});var Ui=T((_E,Pd)=>{"use strict";a();s();var xd=Ge();function sy(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&xd.nextTick(Cd,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(xd.nextTick(Cd,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function ly(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Cd(e,t){e.emit("error",t)}Pd.exports={destroy:sy,undestroy:ly}});var Fi=T((EE,kd)=>{"use strict";a();s();var at=Ge();kd.exports=K;function Ad(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Cy(t,e)}}var uy=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:at.nextTick,Rt;K.WritableState=ur;var Rd=Object.create(Q());Rd.inherits=Z();var fy={deprecate:Yn()},Md=qi(),wn=ar().Buffer,dy=globalThis.Uint8Array||function(){};function cy(e){return wn.from(e)}function py(e){return wn.isBuffer(e)||e instanceof dy}var Id=Ui();Rd.inherits(K,Md);function hy(){}function ur(e,t){Rt=Rt||st(),e=e||{};var r=t instanceof Rt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){vy(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ad(this)}ur.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(ur.prototype,"buffer",{get:fy.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var gn;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(gn=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(e){return gn.call(this,e)?!0:this!==K?!1:e&&e._writableState instanceof ur}})):gn=function(e){return e instanceof this};function K(e){if(Rt=Rt||st(),!gn.call(K,this)&&!(this instanceof Rt))return new K(e);this._writableState=new ur(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Md.call(this)}K.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function my(e,t){var r=new Error("write after end");e.emit("error",r),at.nextTick(t,r)}function gy(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),at.nextTick(n,o),i=!1),i}K.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&py(e);return o&&!wn.isBuffer(e)&&(e=cy(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=hy),n.ended?my(this,r):(o||gy(this,n,e,r))&&(n.pendingcb++,i=yy(this,n,o,e,t,r)),i};K.prototype.cork=function(){var e=this._writableState;e.corked++};K.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Dd(this,e))};K.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function wy(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=wn.from(t,r)),t}Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function yy(e,t,r,n,i,o){if(!r){var l=wy(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var m=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},m?m.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else ji(e,t,!1,u,n,i,o);return d}function ji(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function by(e,t,r,n,i){--t.pendingcb,r?(at.nextTick(i,n),at.nextTick(lr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),lr(e,t))}function _y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function vy(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(_y(r),t)by(e,r,n,t,i);else{var o=Nd(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Dd(e,r),n?uy(Od,e,r,o,i):Od(e,r,o,i)}}function Od(e,t,r,n){r||Sy(e,t),t.pendingcb--,n(),lr(e,t)}function Sy(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Dd(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,u=!0;r;)i[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;i.allBuffers=u,ji(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new Ad(t),t.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,m=r.encoding,S=r.callback,E=t.objectMode?1:d.length;if(ji(e,t,!1,E,d,m,S),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}K.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};K.prototype._writev=null;K.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&xy(this,n,r)};function Nd(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Ey(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),lr(e,t)})}function Ty(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,at.nextTick(Ey,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function lr(e,t){var r=Nd(t);return r&&(Ty(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function xy(e,t,r){t.ending=!0,lr(e,t),r&&(t.finished?at.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Cy(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(K.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});K.prototype.destroy=Id.destroy;K.prototype._undestroy=Id.undestroy;K.prototype._destroy=function(e,t){this.end(),t(e)}});var st=T((CE,Wd)=>{"use strict";a();s();var Ld=Ge(),Py=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Wd.exports=qe;var qd=Object.create(Q());qd.inherits=Z();var Bd=Gi(),Ki=Fi();qd.inherits(qe,Bd);for(Hi=Py(Ki.prototype),yn=0;yn<Hi.length;yn++)bn=Hi[yn],qe.prototype[bn]||(qe.prototype[bn]=Ki.prototype[bn]);var Hi,bn,yn;function qe(e){if(!(this instanceof qe))return new qe(e);Bd.call(this,e),Ki.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Oy)}Object.defineProperty(qe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Oy(){this.allowHalfOpen||this._writableState.ended||Ld.nextTick(Ay,this)}function Ay(e){e.end()}Object.defineProperty(qe.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});qe.prototype._destroy=function(e,t){this.push(null),this.end(),Ld.nextTick(t,e)}});var Yi=T(jd=>{"use strict";a();s();var Vi=ar().Buffer,Ud=Vi.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ry(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function My(e){var t=Ry(e);if(typeof t!="string"&&(Vi.isEncoding===Ud||!Ud(e)))throw new Error("Unknown encoding: "+e);return t||e}jd.StringDecoder=fr;function fr(e){this.encoding=My(e);var t;switch(this.encoding){case"utf16le":this.text=qy,this.end=By,t=4;break;case"utf8":this.fillLast=Ny,t=4;break;case"base64":this.text=Wy,this.end=Uy,t=3;break;default:this.write=jy,this.end=Fy;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Vi.allocUnsafe(t)}fr.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};fr.prototype.end=Ly;fr.prototype.text=ky;fr.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function $i(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Iy(e,t,r){var n=t.length-1;if(n<r)return 0;var i=$i(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=$i(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=$i(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Dy(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Ny(e){var t=this.lastTotal-this.lastNeed,r=Dy(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function ky(e,t){var r=Iy(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Ly(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function qy(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function By(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function Wy(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Uy(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function jy(e){return e.toString(this.encoding)}function Fy(e){return e&&e.length?this.write(e):""}});var Gi=T((DE,Qd)=>{"use strict";a();s();var It=Ge();Qd.exports=W;var Hy=bd(),dr;W.ReadableState=Yd;var IE=dt().EventEmitter,Gd=function(e,t){return e.listeners(t).length},Qi=qi(),cr=ar().Buffer,Ky=globalThis.Uint8Array||function(){};function Gy(e){return cr.from(e)}function $y(e){return cr.isBuffer(e)||e instanceof Ky}var $d=Object.create(Q());$d.inherits=Z();var zi=ct(),I=void 0;zi&&zi.debuglog?I=zi.debuglog("stream"):I=function(){};var Vy=Td(),Vd=Ui(),Mt;$d.inherits(W,Qi);var Ji=["error","close","destroy","pause","resume"];function Yy(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Hy(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Yd(e,t){dr=dr||st(),e=e||{};var r=t instanceof dr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Vy,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Mt||(Mt=Yi().StringDecoder),this.decoder=new Mt(e.encoding),this.encoding=e.encoding)}function W(e){if(dr=dr||st(),!(this instanceof W))return new W(e);this._readableState=new Yd(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Qi.call(this)}Object.defineProperty(W.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});W.prototype.destroy=Vd.destroy;W.prototype._undestroy=Vd.undestroy;W.prototype._destroy=function(e,t){this.push(null),t(e)};W.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=cr.from(e,t),t=""),n=!0),zd(this,e,t,!1,n)};W.prototype.unshift=function(e){return zd(this,e,null,!0,!1)};function zd(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,Zy(e,o);else{var l;i||(l=zy(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==cr.prototype&&(t=Gy(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Xi(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?Xi(e,o,t,!1):Jd(e,o)):Xi(e,o,t,!1))):n||(o.reading=!1)}return Jy(o)}function Xi(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&_n(e)),Jd(e,t)}function zy(e,t){var r;return!$y(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Jy(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}W.prototype.isPaused=function(){return this._readableState.flowing===!1};W.prototype.setEncoding=function(e){return Mt||(Mt=Yi().StringDecoder),this._readableState.decoder=new Mt(e),this._readableState.encoding=e,this};var Fd=8388608;function Xy(e){return e>=Fd?e=Fd:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Hd(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Xy(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}W.prototype.read=function(e){I("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Zi(this):_n(this),null;if(e=Hd(e,t),e===0&&t.ended)return t.length===0&&Zi(this),null;var n=t.needReadable;I("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,I("length less than watermark",n)),t.ended||t.reading?(n=!1,I("reading or ended",n)):n&&(I("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Hd(r,t)));var i;return e>0?i=Xd(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Zi(this)),i!==null&&this.emit("data",i),i};function Zy(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,_n(e)}}function _n(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?It.nextTick(Kd,e):Kd(e))}function Kd(e){I("emit readable"),e.emit("readable"),eo(e)}function Jd(e,t){t.readingMore||(t.readingMore=!0,It.nextTick(Qy,e,t))}function Qy(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}W.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};W.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,I("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?u:y;n.endEmitted?It.nextTick(o):r.once("end",o),e.on("unpipe",l);function l(b,v){I("onunpipe"),b===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,S())}function u(){I("onend"),e.end()}var d=eb(r);e.on("drain",d);var m=!1;function S(){I("cleanup"),e.removeListener("close",x),e.removeListener("finish",c),e.removeListener("drain",d),e.removeListener("error",h),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",O),m=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&d()}var E=!1;r.on("data",O);function O(b){I("ondata"),E=!1;var v=e.write(b);v===!1&&!E&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Zd(n.pipes,e)!==-1)&&!m&&(I("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,E=!0),r.pause())}function h(b){I("onerror",b),y(),e.removeListener("error",h),Gd(e,"error")===0&&e.emit("error",b)}Yy(e,"error",h);function x(){e.removeListener("finish",c),y()}e.once("close",x);function c(){I("onfinish"),e.removeListener("close",x),y()}e.once("finish",c);function y(){I("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(I("pipe resume"),r.resume()),e};function eb(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Gd(e,"data")&&(t.flowing=!0,eo(e))}}W.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=Zd(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};W.prototype.on=function(e,t){var r=Qi.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&_n(this):It.nextTick(tb,this))}return r};W.prototype.addListener=W.prototype.on;function tb(e){I("readable nexttick read 0"),e.read(0)}W.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,rb(this,e)),this};function rb(e,t){t.resumeScheduled||(t.resumeScheduled=!0,It.nextTick(nb,e,t))}function nb(e,t){t.reading||(I("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),eo(e),t.flowing&&!t.reading&&e.read(0)}W.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function eo(e){var t=e._readableState;for(I("flow",t.flowing);t.flowing&&e.read()!==null;);}W.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(I("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(I("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var u=t.push(l);u||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<Ji.length;o++)e.on(Ji[o],this.emit.bind(this,Ji[o]));return this._read=function(l){I("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});W._fromList=Xd;function Xd(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=ib(e,t.buffer,t.decoder),r}function ib(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?ob(e,t):ab(e,t),n}function ob(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function ab(e,t){var r=cr.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function Zi(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,It.nextTick(sb,t,e))}function sb(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Zd(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var to=T((LE,rc)=>{"use strict";a();s();rc.exports=Be;var vn=st(),tc=Object.create(Q());tc.inherits=Z();tc.inherits(Be,vn);function lb(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Be(e){if(!(this instanceof Be))return new Be(e);vn.call(this,e),this._transformState={afterTransform:lb.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",ub)}function ub(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){ec(e,t,r)}):ec(this,null,null)}Be.prototype.push=function(e,t){return this._transformState.needTransform=!1,vn.prototype.push.call(this,e,t)};Be.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Be.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Be.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Be.prototype._destroy=function(e,t){var r=this;vn.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function ec(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var ac=T((WE,oc)=>{"use strict";a();s();oc.exports=pr;var nc=to(),ic=Object.create(Q());ic.inherits=Z();ic.inherits(pr,nc);function pr(e){if(!(this instanceof pr))return new pr(e);nc.call(this,e)}pr.prototype._transform=function(e,t,r){r(null,e)}});var lc=T((Oe,sc)=>{a();s();Oe=sc.exports=Gi();Oe.Stream=Oe;Oe.Readable=Oe;Oe.Writable=Fi();Oe.Duplex=st();Oe.Transform=to();Oe.PassThrough=ac()});var ro=T((KE,fc)=>{a();s();var fb=ei(),db=function(){},cb=function(e){return e.setHeader&&typeof e.abort=="function"},pb=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},uc=function(e,t,r){if(typeof t=="function")return uc(e,null,t);t||(t={}),r=fb(r||db);var n=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,l=t.writable||t.writable!==!1&&e.writable,u=!1,d=function(){e.writable||m()},m=function(){l=!1,o||r.call(e)},S=function(){o=!1,l||r.call(e)},E=function(y){r.call(e,y?new Error("exited with error code: "+y):null)},O=function(y){r.call(e,y)},h=function(){process.nextTick(x)},x=function(){if(!u){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(e,new Error("premature close"));if(l&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},c=function(){e.req.on("finish",m)};return cb(e)?(e.on("complete",m),e.on("abort",h),e.req?c():e.on("request",c)):l&&!n&&(e.on("end",d),e.on("close",d)),pb(e)&&e.on("exit",E),e.on("end",S),e.on("finish",m),t.error!==!1&&e.on("error",O),e.on("close",h),function(){u=!0,e.removeListener("complete",m),e.removeListener("abort",h),e.removeListener("request",c),e.req&&e.req.removeListener("finish",m),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",m),e.removeListener("exit",E),e.removeListener("end",S),e.removeListener("error",O),e.removeListener("close",h)}};fc.exports=uc});var mc=T((VE,hc)=>{a();s();var{Duplex:pc}=lc(),dc=ro(),hb=ei(),cc={},no=class extends pc{constructor(t={}){let r=Object.assign({},t,{objectMode:!0});super(r),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');let r=new io({parent:this,name:t});return this._substreams[t]=r,mb(this,n=>{r.destroy(n)}),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');this._substreams[t]=cc}_read(){}_write(t,r,n){let i=t.name,o=t.data;if(!i)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();let l=this._substreams[i];if(!l)return console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),n();l!==cc&&l.push(o),n()}},io=class extends pc{constructor({parent:t,name:r}){super({objectMode:!0}),this._parent=t,this._name=r}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}};hc.exports=no;function mb(e,t){let r=hb(t);dc(e,{readable:!1},r),dc(e,{writable:!1},r)}});var yc=T((JE,wc)=>{a();s();var gb=ei(),wb=ro(),oo=Ig(),hr=function(){},yb=/^v?\.0/.test(process.version),Sn=function(e){return typeof e=="function"},bb=function(e){return!yb||!oo?!1:(e instanceof(oo.ReadStream||hr)||e instanceof(oo.WriteStream||hr))&&Sn(e.close)},_b=function(e){return e.setHeader&&Sn(e.abort)},vb=function(e,t,r,n){n=gb(n);var i=!1;e.on("close",function(){i=!0}),wb(e,{readable:t,writable:r},function(l){if(l)return n(l);i=!0,n()});var o=!1;return function(l){if(!i&&!o){if(o=!0,bb(e))return e.close(hr);if(_b(e))return e.abort();if(Sn(e.destroy))return e.destroy();n(l||new Error("stream was destroyed"))}}},gc=function(e){e()},Sb=function(e,t){return e.pipe(t)},Eb=function(){var e=Array.prototype.slice.call(arguments),t=Sn(e[e.length-1]||hr)&&e.pop()||hr;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(i,o){var l=o<e.length-1,u=o>0;return vb(i,l,u,function(d){r||(r=d),d&&n.forEach(gc),!l&&(n.forEach(gc),t(r))})});return e.reduce(Sb)};wc.exports=Eb});var Tc=T((dT,Ec)=>{a();s();var xb={}.toString;Ec.exports=Array.isArray||function(e){return xb.call(e)=="[object Array]"}});var ao=T((hT,xc)=>{a();s();xc.exports=dt().EventEmitter});var gr=T((so,Pc)=>{a();s();var En=Vn(),We=En.Buffer;function Cc(e,t){for(var r in e)t[r]=e[r]}We.from&&We.alloc&&We.allocUnsafe&&We.allocUnsafeSlow?Pc.exports=En:(Cc(En,so),so.Buffer=Dt);function Dt(e,t,r){return We(e,t,r)}Cc(We,Dt);Dt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return We(e,t,r)};Dt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=We(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Dt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return We(e)};Dt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return En.SlowBuffer(e)}});var Ac=T((bT,lo)=>{"use strict";a();s();function Cb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Oc=gr().Buffer,wr=ct();function Pb(e,t,r){e.copy(t,r)}lo.exports=function(){function e(){Cb(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return Oc.alloc(0);if(this.length===1)return this.head.data;for(var n=Oc.allocUnsafe(r>>>0),i=this.head,o=0;i;)Pb(i.data,n,o),o+=i.data.length,i=i.next;return n},e}();wr&&wr.inspect&&wr.inspect.custom&&(lo.exports.prototype[wr.inspect.custom]=function(){var e=wr.inspect({length:this.length});return this.constructor.name+" "+e})});var uo=T((ST,Ic)=>{"use strict";a();s();var Rc=Ge();function Ob(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Rc.nextTick(Mc,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(Rc.nextTick(Mc,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function Ab(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Mc(e,t){e.emit("error",t)}Ic.exports={destroy:Ob,undestroy:Ab}});var co=T((xT,Uc)=>{"use strict";a();s();var lt=Ge();Uc.exports=$;function Nc(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Vb(t,e)}}var Rb=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:lt.nextTick,Nt;$.WritableState=br;var kc=Object.create(Q());kc.inherits=Z();var Mb={deprecate:Yn()},Lc=ao(),xn=gr().Buffer,Ib=globalThis.Uint8Array||function(){};function Db(e){return xn.from(e)}function Nb(e){return xn.isBuffer(e)||e instanceof Ib}var qc=uo();kc.inherits($,Lc);function kb(){}function br(e,t){Nt=Nt||ut(),e=e||{};var r=t instanceof Nt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){Fb(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Nc(this)}br.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(br.prototype,"buffer",{get:Mb.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Tn;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Tn=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(e){return Tn.call(this,e)?!0:this!==$?!1:e&&e._writableState instanceof br}})):Tn=function(e){return e instanceof this};function $(e){if(Nt=Nt||ut(),!Tn.call($,this)&&!(this instanceof Nt))return new $(e);this._writableState=new br(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Lc.call(this)}$.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Lb(e,t){var r=new Error("write after end");e.emit("error",r),lt.nextTick(t,r)}function qb(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),lt.nextTick(n,o),i=!1),i}$.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&Nb(e);return o&&!xn.isBuffer(e)&&(e=Db(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=kb),n.ended?Lb(this,r):(o||qb(this,n,e,r))&&(n.pendingcb++,i=Wb(this,n,o,e,t,r)),i};$.prototype.cork=function(){var e=this._writableState;e.corked++};$.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Bc(this,e))};$.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Bb(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=xn.from(t,r)),t}Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Wb(e,t,r,n,i,o){if(!r){var l=Bb(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var u=t.objectMode?1:n.length;t.length+=u;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var m=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},m?m.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else fo(e,t,!1,u,n,i,o);return d}function fo(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Ub(e,t,r,n,i){--t.pendingcb,r?(lt.nextTick(i,n),lt.nextTick(yr,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),yr(e,t))}function jb(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Fb(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(jb(r),t)Ub(e,r,n,t,i);else{var o=Wc(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Bc(e,r),n?Rb(Dc,e,r,o,i):Dc(e,r,o,i)}}function Dc(e,t,r,n){r||Hb(e,t),t.pendingcb--,n(),yr(e,t)}function Hb(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function Bc(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,u=!0;r;)i[l]=r,r.isBuf||(u=!1),r=r.next,l+=1;i.allBuffers=u,fo(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new Nc(t),t.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,m=r.encoding,S=r.callback,E=t.objectMode?1:d.length;if(fo(e,t,!1,E,d,m,S),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}$.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};$.prototype._writev=null;$.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&$b(this,n,r)};function Wc(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Kb(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),yr(e,t)})}function Gb(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,lt.nextTick(Kb,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function yr(e,t){var r=Wc(t);return r&&(Gb(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function $b(e,t,r){t.ending=!0,yr(e,t),r&&(t.finished?lt.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Vb(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty($.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});$.prototype.destroy=qc.destroy;$.prototype._undestroy=qc.undestroy;$.prototype._destroy=function(e,t){this.end(),t(e)}});var ut=T((OT,Kc)=>{"use strict";a();s();var jc=Ge(),Yb=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Kc.exports=Ue;var Fc=Object.create(Q());Fc.inherits=Z();var Hc=mo(),ho=co();Fc.inherits(Ue,Hc);for(po=Yb(ho.prototype),Cn=0;Cn<po.length;Cn++)Pn=po[Cn],Ue.prototype[Pn]||(Ue.prototype[Pn]=ho.prototype[Pn]);var po,Pn,Cn;function Ue(e){if(!(this instanceof Ue))return new Ue(e);Hc.call(this,e),ho.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",zb)}Object.defineProperty(Ue.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function zb(){this.allowHalfOpen||this._writableState.ended||jc.nextTick(Jb,this)}function Jb(e){e.end()}Object.defineProperty(Ue.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Ue.prototype._destroy=function(e,t){this.push(null),this.end(),jc.nextTick(t,e)}});var yo=T($c=>{"use strict";a();s();var wo=gr().Buffer,Gc=wo.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Xb(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Zb(e){var t=Xb(e);if(typeof t!="string"&&(wo.isEncoding===Gc||!Gc(e)))throw new Error("Unknown encoding: "+e);return t||e}$c.StringDecoder=_r;function _r(e){this.encoding=Zb(e);var t;switch(this.encoding){case"utf16le":this.text=i_,this.end=o_,t=4;break;case"utf8":this.fillLast=t_,t=4;break;case"base64":this.text=a_,this.end=s_,t=3;break;default:this.write=l_,this.end=u_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=wo.allocUnsafe(t)}_r.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};_r.prototype.end=n_;_r.prototype.text=r_;_r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function go(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Qb(e,t,r){var n=t.length-1;if(n<r)return 0;var i=go(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=go(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=go(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function e_(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function t_(e){var t=this.lastTotal-this.lastNeed,r=e_(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function r_(e,t){var r=Qb(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function n_(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function i_(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function o_(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function a_(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function s_(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l_(e){return e.toString(this.encoding)}function u_(e){return e&&e.length?this.write(e):""}});var mo=T((kT,ip)=>{"use strict";a();s();var Lt=Ge();ip.exports=U;var f_=Tc(),vr;U.ReadableState=Qc;var NT=dt().EventEmitter,Jc=function(e,t){return e.listeners(t).length},Eo=ao(),Sr=gr().Buffer,d_=globalThis.Uint8Array||function(){};function c_(e){return Sr.from(e)}function p_(e){return Sr.isBuffer(e)||e instanceof d_}var Xc=Object.create(Q());Xc.inherits=Z();var bo=ct(),D=void 0;bo&&bo.debuglog?D=bo.debuglog("stream"):D=function(){};var h_=Ac(),Zc=uo(),kt;Xc.inherits(U,Eo);var _o=["error","close","destroy","pause","resume"];function m_(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):f_(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Qc(e,t){vr=vr||ut(),e=e||{};var r=t instanceof vr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new h_,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(kt||(kt=yo().StringDecoder),this.decoder=new kt(e.encoding),this.encoding=e.encoding)}function U(e){if(vr=vr||ut(),!(this instanceof U))return new U(e);this._readableState=new Qc(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Eo.call(this)}Object.defineProperty(U.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});U.prototype.destroy=Zc.destroy;U.prototype._undestroy=Zc.undestroy;U.prototype._destroy=function(e,t){this.push(null),t(e)};U.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Sr.from(e,t),t=""),n=!0),ep(this,e,t,!1,n)};U.prototype.unshift=function(e){return ep(this,e,null,!0,!1)};function ep(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,b_(e,o);else{var l;i||(l=g_(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==Sr.prototype&&(t=c_(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):vo(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?vo(e,o,t,!1):tp(e,o)):vo(e,o,t,!1))):n||(o.reading=!1)}return w_(o)}function vo(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&On(e)),tp(e,t)}function g_(e,t){var r;return!p_(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function w_(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}U.prototype.isPaused=function(){return this._readableState.flowing===!1};U.prototype.setEncoding=function(e){return kt||(kt=yo().StringDecoder),this._readableState.decoder=new kt(e),this._readableState.encoding=e,this};var Vc=8388608;function y_(e){return e>=Vc?e=Vc:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Yc(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=y_(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}U.prototype.read=function(e){D("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return D("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?So(this):On(this),null;if(e=Yc(e,t),e===0&&t.ended)return t.length===0&&So(this),null;var n=t.needReadable;D("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,D("length less than watermark",n)),t.ended||t.reading?(n=!1,D("reading or ended",n)):n&&(D("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Yc(r,t)));var i;return e>0?i=rp(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&So(this)),i!==null&&this.emit("data",i),i};function b_(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,On(e)}}function On(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(D("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Lt.nextTick(zc,e):zc(e))}function zc(e){D("emit readable"),e.emit("readable"),To(e)}function tp(e,t){t.readingMore||(t.readingMore=!0,Lt.nextTick(__,e,t))}function __(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(D("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}U.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};U.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,D("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?u:y;n.endEmitted?Lt.nextTick(o):r.once("end",o),e.on("unpipe",l);function l(b,v){D("onunpipe"),b===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,S())}function u(){D("onend"),e.end()}var d=v_(r);e.on("drain",d);var m=!1;function S(){D("cleanup"),e.removeListener("close",x),e.removeListener("finish",c),e.removeListener("drain",d),e.removeListener("error",h),e.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",O),m=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&d()}var E=!1;r.on("data",O);function O(b){D("ondata"),E=!1;var v=e.write(b);v===!1&&!E&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&np(n.pipes,e)!==-1)&&!m&&(D("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,E=!0),r.pause())}function h(b){D("onerror",b),y(),e.removeListener("error",h),Jc(e,"error")===0&&e.emit("error",b)}m_(e,"error",h);function x(){e.removeListener("finish",c),y()}e.once("close",x);function c(){D("onfinish"),e.removeListener("close",x),y()}e.once("finish",c);function y(){D("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(D("pipe resume"),r.resume()),e};function v_(e){return function(){var t=e._readableState;D("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Jc(e,"data")&&(t.flowing=!0,To(e))}}U.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=np(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};U.prototype.on=function(e,t){var r=Eo.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&On(this):Lt.nextTick(S_,this))}return r};U.prototype.addListener=U.prototype.on;function S_(e){D("readable nexttick read 0"),e.read(0)}U.prototype.resume=function(){var e=this._readableState;return e.flowing||(D("resume"),e.flowing=!0,E_(this,e)),this};function E_(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Lt.nextTick(T_,e,t))}function T_(e,t){t.reading||(D("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),To(e),t.flowing&&!t.reading&&e.read(0)}U.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function To(e){var t=e._readableState;for(D("flow",t.flowing);t.flowing&&e.read()!==null;);}U.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(D("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(D("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var u=t.push(l);u||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<_o.length;o++)e.on(_o[o],this.emit.bind(this,_o[o]));return this._read=function(l){D("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});U._fromList=rp;function rp(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=x_(e,t.buffer,t.decoder),r}function x_(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?C_(e,t):P_(e,t),n}function C_(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function P_(e,t){var r=Sr.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function So(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Lt.nextTick(O_,t,e))}function O_(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function np(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var xo=T((BT,sp)=>{"use strict";a();s();sp.exports=je;var An=ut(),ap=Object.create(Q());ap.inherits=Z();ap.inherits(je,An);function A_(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function je(e){if(!(this instanceof je))return new je(e);An.call(this,e),this._transformState={afterTransform:A_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",R_)}function R_(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){op(e,t,r)}):op(this,null,null)}je.prototype.push=function(e,t){return this._transformState.needTransform=!1,An.prototype.push.call(this,e,t)};je.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};je.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};je.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};je.prototype._destroy=function(e,t){var r=this;An.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function op(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var dp=T((jT,fp)=>{"use strict";a();s();fp.exports=Er;var lp=xo(),up=Object.create(Q());up.inherits=Z();up.inherits(Er,lp);function Er(e){if(!(this instanceof Er))return new Er(e);lp.call(this,e)}Er.prototype._transform=function(e,t,r){r(null,e)}});var pp=T((Ae,cp)=>{a();s();Ae=cp.exports=mo();Ae.Stream=Ae;Ae.Readable=Ae;Ae.Writable=co();Ae.Duplex=ut();Ae.Transform=xo();Ae.PassThrough=dp()});var mp=T(($T,Oo)=>{a();s();var hp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);hp?(Co=new Uint8Array(16),Oo.exports=function(){return hp(Co),Co}):(Po=new Array(16),Oo.exports=function(){for(var t=0,r;t<16;t++)(t&3)===0&&(r=Math.random()*4294967296),Po[t]=r>>>((t&3)<<3)&255;return Po});var Co,Po});var yp=T((zT,wp)=>{a();s();var gp=[];for(Tr=0;Tr<256;++Tr)gp[Tr]=(Tr+256).toString(16).substr(1);var Tr;function M_(e,t){var r=t||0,n=gp;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}wp.exports=M_});var _p=T((ZT,bp)=>{a();s();var I_=mp(),D_=yp();function N_(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||I_)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||D_(i)}bp.exports=N_});var Ep=T((t0,Sp)=>{a();s();var vp=pp().Duplex,k_=ct().inherits,L_=_p();Sp.exports=Xe;k_(Xe,vp);function Xe(){vp.call(this,{objectMode:!0}),this._payloads={}}Xe.prototype.send=function(e){throw new Error('StreamProvider - does not support synchronous RPC calls. called: "'+e.method+'"')};Xe.prototype.sendAsync=function(e,t){let r=e.id,n=L_();if(e.id=n,Array.isArray(e)&&e.length===0)return t(null,[]);this._payloads[n]=[t,r],this.push(e)};Xe.prototype.isConnected=function(){return!0};Xe.prototype._onResponse=function(e){let t=e.id,r=this._payloads[t];if(!r)throw new Error(`StreamProvider - Unknown response id for response: ${e}`);delete this._payloads[t];let n=r[0];e.id=r[1],setTimeout(function(){n(null,e)})};Xe.prototype._read=q_;Xe.prototype._write=function(e,t,r){this._onResponse(e),r()};function q_(){}});a();s();a();s();Ut();globalThis.setupSentry=async()=>await Oa();globalThis.setupSentry();globalThis.sentry=he;globalThis.Sentry=he;a();s();(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";function e(c,y){if(!(c instanceof y))throw new TypeError("Cannot call a class as a function")}function t(c,y){for(var b=0;b<y.length;b++){var v=y[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}function r(c,y,b){return y&&t(c.prototype,y),b&&t(c,b),c}function n(c,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(y&&y.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),y&&o(c,y)}function i(c){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},i(c)}function o(c,y){return o=Object.setPrototypeOf||function(v,k){return v.__proto__=k,v},o(c,y)}function l(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function u(c,y){return y&&(typeof y=="object"||typeof y=="function")?y:l(c)}function d(c,y){for(;!Object.prototype.hasOwnProperty.call(c,y)&&(c=i(c),c!==null););return c}function m(c,y,b){return typeof Reflect<"u"&&Reflect.get?m=Reflect.get:m=function(k,L,C){var A=d(k,L);if(!!A){var P=Object.getOwnPropertyDescriptor(A,L);return P.get?P.get.call(C):P.value}},m(c,y,b||c)}var S=function(){function c(){e(this,c),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(c,[{key:"addEventListener",value:function(b,v){b in this.listeners||(this.listeners[b]=[]),this.listeners[b].push(v)}},{key:"removeEventListener",value:function(b,v){if(b in this.listeners){for(var k=this.listeners[b],L=0,C=k.length;L<C;L++)if(k[L]===v){k.splice(L,1);return}}}},{key:"dispatchEvent",value:function(b){var v=this;if(b.type in this.listeners){for(var k=function(F){setTimeout(function(){return F.call(v,b)})},L=this.listeners[b.type],C=0,A=L.length;C<A;C++)k(L[C]);return!b.defaultPrevented}}}]),c}(),E=function(c){n(y,c);function y(){var b;return e(this,y),b=u(this,i(y).call(this)),b.listeners||S.call(l(b)),Object.defineProperty(l(b),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(b),"onabort",{value:null,writable:!0,configurable:!0}),b}return r(y,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(v){v.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,v)),m(i(y.prototype),"dispatchEvent",this).call(this,v)}}]),y}(S),O=function(){function c(){e(this,c),Object.defineProperty(this,"signal",{value:new E,writable:!0,configurable:!0})}return r(c,[{key:"abort",value:function(){var b;try{b=new Event("abort")}catch{typeof document<"u"?document.createEvent?(b=document.createEvent("Event"),b.initEvent("abort",!1,!1)):(b=document.createEventObject(),b.type="abort"):b={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(b)}},{key:"toString",value:function(){return"[object AbortController]"}}]),c}();typeof Symbol<"u"&&Symbol.toStringTag&&(O.prototype[Symbol.toStringTag]="AbortController",E.prototype[Symbol.toStringTag]="AbortSignal");function h(c){return c.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof c.Request=="function"&&!c.Request.prototype.hasOwnProperty("signal")||!c.AbortController}function x(c){typeof c=="function"&&(c={fetch:c});var y=c,b=y.fetch,v=y.Request,k=v===void 0?b.Request:v,L=y.AbortController,C=y.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,A=C===void 0?!1:C;if(!h({fetch:b,Request:k,AbortController:L,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:A}))return{fetch:b,Request:P};var P=k;(P&&!P.prototype.hasOwnProperty("signal")||A)&&(P=function(ue,H){var pe;H&&H.signal&&(pe=H.signal,delete H.signal);var He=new k(ue,H);return pe&&Object.defineProperty(He,"signal",{writable:!1,enumerable:!1,configurable:!0,value:pe}),He},P.prototype=k.prototype);var F=b,ee=function(ue,H){var pe=P&&P.prototype.isPrototypeOf(ue)?ue.signal:H?H.signal:void 0;if(pe){var He;try{He=new DOMException("Aborted","AbortError")}catch{He=new Error("Aborted"),He.name="AbortError"}if(pe.aborted)return Promise.reject(He);var Pg=new Promise(function(Og,Ag){pe.addEventListener("abort",function(){return Ag(He)},{once:!0})});return H&&H.signal&&delete H.signal,Promise.race([Pg,F(ue,H)])}return F(ue,H)};return{fetch:ee,Request:P}}(function(c){if(!!h(c)){if(!c.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var y=x(c),b=y.fetch,v=y.Request;c.fetch=b,c.Request=v,Object.defineProperty(c,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:O}),Object.defineProperty(c,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:E})}})(typeof self<"u"?self:globalThis)});a();s();var Qf=g(pt()),ed=g(Zf());var nr=class extends ed.Duplex{constructor(r){super({objectMode:!0});Ke(this,"onMessage",r=>{if(f.Buffer.isBuffer(r)){let n=f.Buffer.from(r);this.push(n)}else this.push(r)});Ke(this,"onDisconnect",()=>{let{lastError:r}=Qf.default.runtime;r&&typeof this.opts.port=="function"?this.init():this.destroy()});this.opts={port:r},this.init()}init(){this.removePortListener(),this.port=typeof this.opts.port=="function"?this.opts.port():this.opts.port,this.port.onMessage.addListener(this.onMessage),this.port.onDisconnect.addListener(this.onDisconnect)}removePortListener(){this.port&&(this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.onDisconnect))}_read(){}_write(r,n,i){try{if(f.Buffer.isBuffer(r)){let o=r.toJSON();o._isBuffer=!0,this.port.postMessage(o)}else this.port.postMessage(r)}catch{return i(new Error("PortDuplexStream - disconnected"))}return i()}};a();s();var md=g(hd()),gd=g(Mg());var Li=class{constructor(t){this.connectionStream=t,this.notificationChannel=new gd.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(t){this.notificationChannel.addListener("notification",r=>{t(r)})}close(){this.notificationChannel.removeAllListeners()}handleResponse(t){let{id:r,result:n,error:i,method:o,params:l}=t,u=this.requests.get(r);if(!(o&&l&&r)){if(o&&l&&!r){this.notificationChannel.emit("notification",t);return}if(!!u){if(i){let d=new md.EthereumRpcError(i.code,i.message,i.data);d.stack=i.stack,this.requests.delete(r),u(d);return}this.requests.delete(r),typeof u=="function"&&u(null,n)}}}},ny=e=>{let t=new Li(e);return new Proxy(t,{get:(r,n)=>r[n]?r[n]:(...i)=>{let o=i[i.length-1],l=i.slice(0,-1),u=Aa();r.requests.set(u,o),r.connectionStream.write({jsonrpc:"2.0",method:n,params:l,id:u})}})},wd=ny;a();s();var bc=g(mc()),_c=g(yc()),Tb=()=>{};function vc(e){let t=new bc.default;return(0,_c.default)(e,t,e,r=>{r&&Tb(r)}),t}Wr();a();s();a();s();var G=g(pt());mt();Wr();var mr=class{reload(){G.default.runtime.reload()}openTab(t){return new Promise((r,n)=>{G.default.tabs.create(t).then(i=>{let o=me();return o?n(o):r(i)}).catch(i=>{n(i)})})}openWindow(t){return new Promise((r,n)=>{G.default.windows.create(t).then(i=>{let o=me();return o?n(o):(this.lastOkPopupId=i.id,r(i))}).catch(i=>{n(i)})})}closeWindow(t){return new Promise((r,n)=>{G.default.windows.remove(t).then(()=>{let i=me();return i?n(i):r()}).catch(i=>{n(i)})})}focusLastOkPopup(){this.lastOkPopupId&&this.getAllWindows().then(t=>{t.some(r=>r.id===this.lastOkPopupId)?this.focusWindow(this.lastOkPopupId):this.lastOkPopupId=""}).catch(()=>{})}async focusCurrentWindow(){let r=(await this.currentTab())?.windowId;await this.focusWindow(r)}focusWindow(t){return new Promise((r,n)=>{G.default.windows.update(t,{focused:!0}).then(()=>{let i=me();return i?n(i):r()}).catch(i=>{n(i)})})}updateWindowPosition(t,r,n){return new Promise((i,o)=>{G.default.windows.update(t,{left:r,top:n}).then(()=>{let l=me();return l?o(l):i()}).catch(l=>{o(l)})})}getLastFocusedWindow(t){return new Promise((r,n)=>{G.default.windows.getLastFocused(t).then(i=>{let o=me();return o?n(o):r(i)}).catch(i=>{n(i)})})}closeCurrentWindow(){return G.default?.windows?.getCurrent?G.default.windows.getCurrent().then(t=>G.default.windows.remove(t.id)):Promise.resolve()}getVersion(){return G.default.runtime.getManifest().version}openExtensionInBrowser(t=null,r=null){let n=G.default.runtime.getURL("/home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`),this.openTab({url:n}),Me()!==Xn&&window.close()}async openExtensionInPopup(t=null,r=null,n=!0){let i=G.default.runtime.getURL("/notification.html");r&&(i+=`?${r}`),t&&(i+=`#${t}`);let o=0,l=0;try{let d=await this.getLastFocusedWindow();l=d.top,o=Math.max(d.left+(d.width-360),0)}catch{let{screenX:m,screenY:S,outerWidth:E}=window;l=Math.max(S,0),o=Math.max(m+(E-360),0)}let u=await va();this.openWindow({url:i,type:"popup",width:u?.width||360,height:700,top:l,left:o}),Me()!==Xn&&n&&window.close()}getPlatformInfo(){return new Promise((t,r)=>{try{G.default.runtime.getPlatformInfo().then(n=>{t(n)}).catch(n=>{r(n)})}catch(n){r(n)}})}getAllWindows(){return new Promise((t,r)=>{G.default.windows.getAll().then(n=>{let i=me();return i?r(i):t(n)}).catch(n=>{r(n)})})}getActiveTabs(){return new Promise((t,r)=>{G.default.tabs.query({active:!0}).then(n=>{let i=me();return i?r(i):t(n)}).catch(n=>{r(n)})})}currentTab(){return new Promise((t,r)=>{G.default.tabs.getCurrent().then(n=>{let i=me();i?r(i):t(n)}).catch(n=>{r(n)})})}closeTab(t){return new Promise((r,n)=>{G.default.tabs.remove(t).then(()=>{let i=me();i?n(i):r()}).catch(i=>{n(i)})})}getCpuInfoName(){return new Promise((t,r)=>{try{G.default.system.cpu.getInfo(n=>{t(n.modelName)})}catch(n){r(n)}})}setPanelBehavior(t){return new Promise((r,n)=>{try{chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:t}),r()}catch(i){n(i)}})}setSidepanelPath(t){return new Promise((r,n)=>{t?chrome.sidePanel.setOptions({path:t},()=>{r()}):n()})}openSidepanelWithWindowId(t){return new Promise((r,n)=>{t?chrome.sidePanel.open({windowId:t},()=>{r()}):n()})}async openSidepanel(t){let n=(await this.getLastFocusedWindow())?.id;t&&await this.setSidepanelPath(`sidepanel.html#${t}`),await this.openSidepanelWithWindowId(n),t&&await this.setSidepanelPath("sidepanel.html")}};var Sc=mr;mt();var Tg=g(Ra()),xg=g(Ep()),ua=g(pt());a();s();a();s();var vg=g(R());a();s();var le=g(R()),Zo=g(ge()),Zm=g(Ee()),Qm=g(Ft());ve();Ut();Ur();a();s();var _e=g(R()),Rn=g(ge()),xp=g(Ft());ve();Jn();var Ao={fetchConfig:{project:"okx_extension_wallet",site:"okx"}};var Ro=0,W_=1,Mo=null;function Cp(){return e=>(Ao.fetchConfig.locale=e.locale,_e.default.createElement(pa,{localeData:e.localeData,isDev:!0,noRemoteData:!0,fetchConfig:Ao.fetchConfig},e.children))}var U_=Cp(),j_=Cp(),F_=process.env.ASSETS_BUILD_TYPE===Re.DEV||process.env.ASSETS_BUILD_TYPE===Re.DAILY,Tp=(0,_e.createContext)(e=>`[${e}]`),xr=e=>{let t=window.localStorage.getItem("languageKeyMode"),r=F_&&t==="multilingualMode",n=(0,Rn.useSelector)(Fr),i=ts(n),o=(0,Rn.useSelector)(Qa),l=(0,Rn.useSelector)(es),u=(0,_e.useMemo)(()=>(rs(n,window),Mo=Mo===Ro?W_:Ro,Object.keys(o).reduce((d,m)=>{let S=o[m].message;return d[m]=r?`${S}${S}${S}`:S,d},{})),[i,o,r]);return(0,_e.useMemo)(()=>{Ht.setConfig({frozenScroll:!1,localeProviderProps:{fetchConfig:{noFetch:!0},isDev:!0,localeData:l}})},[n]),Mo===Ro?_e.default.createElement(U_,{localeData:u,locale:i},_e.default.createElement(Tp.Provider,{value:Y},e.children)):_e.default.createElement(j_,{localeData:u,locale:i},_e.default.createElement(Tp.Provider,{value:Y},e.children))};xr.propTypes={children:xp.default.node};xr.defaultProps={children:void 0};a();s();a();s();var z=g(R());var Pp=g(Ia()),Io=g(Ft()),Op=g(pt());ve();Zn();Wr();mt();ai();Gr();Gt();var Cr=class extends z.PureComponent{constructor(){super(...arguments);Ke(this,"state",{downloadUrl:!1})}renderErrorDetail(r){return z.default.createElement("li",null,z.default.createElement("p",null,r))}renderErrorStack(r,n){return z.default.createElement("li",null,z.default.createElement("span",null,r),z.default.createElement("pre",{className:"error-page__stack"},n))}componentDidMount(){Kr(_t.getExtensionVersion).then(({data:r})=>{let n=Ve(),i=Op.default.runtime.getManifest().version;if(n===ba&&r.edge!==i){this.setState({downloadUrl:"https://microsoftedge.microsoft.com/addons/detail/pbpjkcldjiffchgbbndmhojiacbgflha"});return}r.chrome!==i&&this.setState({downloadUrl:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge?hl=zh-CN"})}).catch(r=>{console.log(r)})}render(){let{error:r}=this.props,{downloadUrl:n}=this.state,o=Me()===Lr?N("wallet_home_subtitle_errortip_error_popup_message"):N("wallet_home_subtitle_errortip_errorpage_message"),l=jr(),u=xe.State.getImgMap(l),d=`${Hr()}${u[xe.State.TYPE.systemError]}`;return z.default.createElement("div",{className:"error-page"},z.default.createElement("div",{className:"error-page__header"},N("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&z.default.createElement(oe,{className:"okx-wallet-plugin-close error-page__right",onClick:async()=>{await Ie().clearDappData(),window.location.href=window.location.pathname}})),z.default.createElement("div",{className:"error-page__details"},z.default.createElement(xe.State,{type:xe.State.TYPE.systemError,title:n?N("extension_wallet_mid_text_update_latest_version"):o,imgSrc:d,renderButton:()=>z.default.createElement(Te,{category:Te.CATEGORY.fill,type:Te.TYPE.primary,size:Te.SIZE.s,onClick:()=>{globalThis.platform.openTab({url:n})}},N("extension_wallet_mid_btn_goto_store")," ")}),z.default.createElement(Da,{className:"error-page__accordion",titleClass:"error-page__accordion-title",customHeaderIcon:m=>z.default.createElement(oe,{icon:"okds-arrow-chevron-down-md",size:oe.SIZE.xs,className:(0,Pp.default)("error-page__icon",{"okui-accordion-header-icon-expanded":m})}),title:N("wallet_home_subtitle_errortip_errordetail"),onToggle:m=>{this.setState({expand:m})}}),this.state.expand?z.default.createElement("ul",{className:"error-page__list"},r.message?this.renderErrorDetail(N("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(N("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(N("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(N("wallet_home_subtitle_errortip_error_stack"),r.stack):null):null))}};Cr.contextTypes={t:Io.default.func.isRequired};Cr.propTypes={error:Io.default.object.isRequired};var Do=Cr;a();s();var ft=g(R()),et=g(ge()),Vm=g(Ee()),Ym=g($r()),zm=g(Ia());ht();ve();a();s();a();s();var No=()=>{};a();s();var H_=document.documentElement,K_={en:"en",zh_CN:"zh-hans",zh_TW:"zh-hant",fr:"fr",ru:"ru",vi:"vi",id:"id",tr:"tr",de:"de",it:"it",pl:"pl",en_IN:"en-in",pt_BR:"pt",pt_PT:"pt-pt",es:"es-es",es_419:"es",cs:"cs",ro:"ro",uk:"uk",ar_EH:"ar"},G_=e=>{H_.setAttribute("lang",K_[e])},Ap=G_;a();s();a();s();var Rp=g(R()),Mp=g(Ee());ht();Zn();mt();var $_=()=>{let e=(0,Mp.useHistory)();(0,Rp.useEffect)(()=>{if(Ve()!==Br)return Se;if(!rt.isSupported())return Se;let r=()=>{e.push(Xr)};return rt.mount(),rt.onClick(r),rt.show(),()=>{rt.hide(),rt.offClick(r)}},[e])},Ip=$_;a();s();var Np=g(R());ht();Zn();mt();var Dp=e=>{let t=e?"#000000":"#ffffff";vt.setBackgroundColor.isSupported()&&vt.setBackgroundColor(t),vt.setHeaderColor.isSupported()&&vt.setHeaderColor(t)},V_=()=>{let e=Ps(vt.isDark);(0,Np.useEffect)(()=>Ve()!==Br?Se:(Cs("theme_changed",()=>{Dp(e)}),Dp(e),Se),[e])},kp=V_;function ko(){Ip(),kp()}a();s();ii();var Y_={mostRecentOverviewPage:fe},z_="history",J_=yt({name:z_,initialState:Y_,reducers:{pageChanged:(e,t)=>{let r=t.payload;(r===fe||r.startsWith(Jr))&&(e.mostRecentOverviewPage=r)}}}),{actions:X_,reducer:Z_}=J_,Lp=Z_;var{pageChanged:qp}=X_;ai();Jn();Gr();a();s();var q=g(R()),In=g($r());a();s();a();s();var Bp=e=>de("allowShowComponent",{...ye,componentName:e,location:window.location.href})?.data;var Lo=g(R()),Mn=({children:e,componentName:t})=>Bp(t)?Lo.default.createElement(Lo.default.Fragment,null,e):null;zn();var ae=g(kg());a();s();var qo={"wallet-helper":"_wallet-helper_4h5lm_1",walletHelper:"_wallet-helper_4h5lm_1","wallet-helper-enter":"_wallet-helper-enter_4h5lm_11",walletHelperEnter:"_wallet-helper-enter_4h5lm_11"};var Q_=[{label:ae.default.development_environment,value:"http://forked-test2-cat20.defi.swim.env"},{label:ae.default.pre_environment,value:"https://beta.okex.org"},{label:ae.default.prod_environment,value:"https://wallet.okex.org"}],ev=[{label:ae.default.normalMode,value:"normalMode"},{label:ae.default.keyMode,value:"keyMode"},{label:ae.default.multilingualMode,value:"multilingualMode"}],tv=()=>{let{width:e}=(0,In.useSize)(document.querySelector("body")),[t,r]=(0,q.useState)("https://beta.okex.org");(0,q.useEffect)(()=>{(async()=>{let{envApiDomain:h}=await $e.get("envApiDomain");h&&r(h)})()},[]);let n=()=>{window.location.reload()},i=window.localStorage,o=i.getItem("languageKeyMode")||"normalMode",l=(0,q.useCallback)(h=>{h==="normalMode"?(i.removeItem("languageKeyMode"),wt(!1)):h==="keyMode"?(i.setItem("languageKeyMode",h),wt(!0)):(i.setItem("languageKeyMode",h),wt(!1)),n()},[o]),u=(0,In.useUpdate)(),d=()=>{let h=Kl()===Qr.LIGHT?Qr.DARK:Qr.LIGHT;Gl(h),u()},m=i.getItem("speedUp")||!1,[S,E]=(0,q.useState)(m);(0,q.useEffect)(()=>{E(m)},[m]);let O=(0,q.useCallback)(()=>{m?(i.removeItem("speedUp"),E(!1)):(i.setItem("speedUp",!0),E(!0)),chrome.runtime.reload()},[m]);return q.default.createElement(Mn,{componentName:"walletHelper"},q.default.createElement(ni.Box,{className:qo["wallet-helper"]},q.default.createElement(Kt,{description:q.default.createElement(ni.Space,{space:"8px"},q.default.createElement(oe.IconButton,{icon:"okx-wallet-plugin-slow",tooltip:ae.default.select_language_mode,onClick:()=>{we.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:q.default.createElement($t,{dataSource:ev,renderItem:({label:h,value:x})=>q.default.createElement($t.Cell,{title:h,onClick:()=>{l(x)}},o===x&&q.default.createElement(ri.Circle,{checked:!0}))})})}}),q.default.createElement(oe.IconButton,{icon:"okx-wallet-plugin-fast",tooltip:`${ae.default.current_api_environment}${t}`,onClick:()=>{we.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:q.default.createElement($t,{dataSource:Q_,renderItem:({label:h,value:x})=>q.default.createElement($t.Cell,{title:h,onClick:async()=>{await $e.set({envApiDomain:x}),n()}},t===x&&q.default.createElement(ri.Circle,{checked:!0}))})})}}),q.default.createElement(oe.IconButton,{icon:"okx-wallet-plugin-swap",tooltip:ae.default.switchRtl,onClick:()=>{let x=document.documentElement.getAttribute("dir");Vr(x==="rtl"?void 0:"rtl")}}),e>360&&q.default.createElement(oe.IconButton,{icon:"okx-wallet-plugin-switch",tooltip:ae.default.fullscreenMode,onClick:()=>{let h=document.querySelector("#app");["notification","popup"].includes(h.className)?h.className="fullscreen":h.className="popup"}}),q.default.createElement(oe.IconButton,{style:{color:S?"orange":"unset"},icon:"okx-wallet-plugin-coin-quick-withdraw",tooltip:ae.default.accelerateSetInterval,onClick:O}),q.default.createElement(oe.IconButton,{icon:"okx-wallet-plugin-swap-1",tooltip:ae.default.theme,onClick:()=>{d()}})),trigger:Kt.TRIGGER.click,placement:document.documentElement.getAttribute("dir")==="rtl"?Kt.DIRECTION.topLeft:Kt.DIRECTION.topRight,autoHeight:{marginBottom:50},smartMode:!1},q.default.createElement(oe,{bordered:!0,size:oe.SIZE.lg,className:qo["wallet-helper-enter"],icon:"okx-wallet-plugin-wrenches"}))))},Wp=tv;a();s();a();s();var Qe=g(R());a();s();var Dn=g(R());Qn();a();s();var Bo={noRadius:"_noRadius_e5d59_1",scale:"_scale_e5d59_15"};var Up=()=>Dn.default.createElement(Mn,{componentName:"EnvAlert"},Dn.default.createElement(Na,{className:Bo.noRadius,type:"warn",showIcon:!1,title:Dn.default.createElement("div",{className:Bo.scale},`${process.env.ASSETS_BUILD_TYPE}-${process.env.COMMIT_HASH}, API: ${xa()} WSS: ${Pa()} STATIC: ${jt()}`),closable:!1}));a();s();var Nn=g(R()),jp=g($r()),Pr=g(ge());var kn=g(Ee());function rv(e){return e}var Fp=()=>{let e=(0,Pr.useSelector)(rv),t=(0,jp.useLatest)(e),r=(0,kn.useHistory)(),n=(0,Pr.useSelector)(bt),i=(0,Pr.useSelector)(Ye),o=(0,Pr.useSelector)(nu),l=(0,Nn.useRef)(o),d=(0,kn.useLocation)()?.pathname;return(0,Nn.useEffect)(()=>{if(o!==l.current){if(n&&i&&![fe,Yr].includes(d)){let m=t.current,S={isRpcMode:tu(m)?.isRpcMode,permissionsRequestId:Ql(m),isNotBackup:Ss(m),lastOptType:ru(m)},E=su(S);E&&r.replace(E)}l.current=o}},[d,o,n,i]),null};Zl();var jn=g(ge());a();s();a();s();var p=g(R());a();s();var Gp=g(R()),X=g(Ft()),nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ov=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),av=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},sv=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},Wo=(typeof window>"u"||typeof window>"u"?"undefined":nv(window))==="object",lv=Wo?document:{},uv=["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"],Uo=function(e){function t(r){iv(this,t);var n=sv(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));if(n.state={idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null,pageX:null,pageY:null},n.tId=null,n._handleEvent=function(i){var o=n.state,l=o.remaining,u=o.pageX,d=o.pageY,m=o.idle,S=n.props,E=S.timeout,O=S.onAction,h=S.debounce,x=S.throttle,c=S.stopOnIdle;if(h>0?n.debouncedAction(i):x>0?n.throttledAction(i):O(i),!l){if(i.type==="mousemove"&&(i.pageX===u&&i.pageY===d||i.pageX===void 0&&i.pageY===void 0||n.getElapsedTime()<200))return;clearTimeout(n.tId),n.tId=null,m&&!c&&n.toggleIdleState(i),n.setState({lastActive:+new Date,pageX:i.pageX,pageY:i.pageY}),m&&c||(n.tId=setTimeout(n.toggleIdleState,E))}},r.debounce>0&&r.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return r.debounce>0&&(n.debouncedAction=Hp(r.onAction,r.debounce)),r.throttle>0&&(n.throttledAction=Kp(r.onAction,r.throttle)),r.startOnMount||(n.state.idle=!0),n.toggleIdleState=n._toggleIdleState.bind(n),n.reset=n._reset.bind(n),n.pause=n._pause.bind(n),n.resume=n._resume.bind(n),n.getRemainingTime=n._getRemainingTime.bind(n),n.getElapsedTime=n._getElapsedTime.bind(n),n.getLastActiveTime=n._getLastActiveTime.bind(n),n.isIdle=n._isIdle.bind(n),n}return av(t,Gp.Component),ov(t,[{key:"componentWillMount",value:function(){this._bindEvents()}},{key:"componentDidMount",value:function(){this.props.startOnMount&&this.reset()}},{key:"componentDidUpdate",value:function(r){r.debounce!==this.props.debounce&&(this.debouncedAction=Hp(this.props.onAction,this.props.debounce)),r.throttle!==this.props.throttle&&(this.throttledAction=Kp(this.props.onAction,this.props.throttle))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents()}},{key:"render",value:function(){return this.props.children||null}},{key:"_bindEvents",value:function(){var r=this;if(Wo){var n=this.state.eventsBound,i=this.props,o=i.element,l=i.events,u=i.passive,d=i.capture;n||(l.forEach(function(m){o.addEventListener(m,r._handleEvent,{capture:d,passive:u})}),this.setState({eventsBound:!0}))}}},{key:"_unbindEvents",value:function(){var r=this;if(Wo){var n=this.props,i=n.element,o=n.events,l=n.passive,u=n.capture;this.state.eventsBound&&(o.forEach(function(d){i.removeEventListener(d,r._handleEvent,{capture:u,passive:l})}),this.setState({eventsBound:!1}))}}},{key:"_toggleIdleState",value:function(r){var n=this,i=this.state.idle,o=this.props,l=o.onActive,u=o.onIdle,d=o.stopOnIdle;this.setState({idle:!i},function(){i?d||(n._bindEvents(),l(r)):(d&&(clearTimeout(n.tId),n.tId=null,n._unbindEvents()),u(r))})}},{key:"_reset",value:function(){clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:this.state.oldDate,remaining:null});var r=this.props.timeout;this.tId=setTimeout(this.toggleIdleState,r)}},{key:"_pause",value:function(){this.state.remaining===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.setState({remaining:this.getRemainingTime()}))}},{key:"_resume",value:function(){var r=this.state,n=r.remaining,i=r.idle;n!==null&&(this._bindEvents(),i||(this.setState({remaining:null}),this.tId=setTimeout(this.toggleIdleState,n)))}},{key:"_getRemainingTime",value:function(){var r=this.state,n=r.remaining,i=r.idle,o=r.lastActive;if(i)return 0;if(n!==null)return n;var l=this.props.timeout-(+new Date-o);return l<0&&(l=0),l}},{key:"_getElapsedTime",value:function(){var r=this.state.oldDate;return+new Date-r}},{key:"_getLastActiveTime",value:function(){return this.state.lastActive}},{key:"_isIdle",value:function(){return this.state.idle}}]),t}();function Hp(e,t){var r=void 0;return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,i),r=null},t)}}function Kp(e,t){var r=0;return function(){var n=new Date().getTime();if(!(n-r<t))return r=n,e.apply(void 0,arguments)}}Uo.propTypes={timeout:X.default.number,events:X.default.arrayOf(X.default.string),onIdle:X.default.func,onActive:X.default.func,onAction:X.default.func,debounce:X.default.number,throttle:X.default.number,element:X.default.oneOfType([X.default.object,X.default.element]),startOnMount:X.default.bool,stopOnIdle:X.default.bool,passive:X.default.bool,capture:X.default.bool},Uo.defaultProps={timeout:12e5,element:lv,events:uv,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,startOnMount:!0,stopOnIdle:!1,capture:!0,passive:!0};var $p=Uo;var se=g(Ee());a();s();var re=g(R()),zp=g(ge()),Jp=g(Ee());ve();Gt();a();s();var Ln=g(R()),Vp=g(Ee()),Ze=({preload:e=[],...t})=>((0,Ln.useEffect)(()=>{e.forEach(r=>{typeof r=="function"&&r()})},[e]),Ln.default.createElement(Vp.Route,{...t}));a();s();var jo={dialog:"_dialog_18vnm_1",mask:"_mask_18vnm_6"};a();s();var qn=g(R()),Yp=()=>{let[e,t]=(0,qn.useState)(0);return(0,qn.useEffect)(()=>{function r(){let n=window.visualViewport?.height<window?.innerHeight?window?.innerHeight-window.visualViewport?.height:0;t(n)}return window?.visualViewport?.addEventListener("resize",r),()=>{window?.visualViewport?.removeEventListener("resize",r)}},[]),{keyboardHeight:e}};function fv(e){return e.metamask.needPassword}var Fo=e=>{let[t,r]=(0,re.useState)(!1),n=(0,zp.useSelector)(fv),[i]=du(fu.passwordType),o=ka.useForm(),l=(0,Jp.useLocation)(),{onSubmit:u}=Eu({form:o}),d=(0,re.useCallback)(async()=>{await Ie().rejectPassword(),r(!1)},[]);(0,re.useEffect)(()=>{r(n)},[n]),(0,re.useEffect)(()=>()=>{t&&d()},[l]);let{keyboardHeight:m}=Yp(),S=()=>i===2?re.default.createElement(hu,{onPass:async E=>{o.setFieldsValue({password:E}),await u()},onCancel:d,noContent:!0}):re.default.createElement(we,{onClose:d,visible:t,title:N("wallet_extension_tg_enter_password"),noMargin:!0,alignBottom:!0,maskClosable:!0,noTopRadius:!1,windowStyle:{padding:"0",overflow:"hidden",bottom:`${m}px`,height:`${600-m}px`,width:"100%",touchAction:"none"},zIndex:40001,className:jo.dialog,scrollBoxClassName:jo.mask,transitionProps:{type:"slide",placement:"bottom",timeout:300}},re.default.createElement(Tu,null));return re.default.createElement(re.default.Fragment,null,re.default.createElement(Ze,{...e}),t&&S())};a();s();var B=g(R()),Mr=g(ge()),Ir=g(Ee()),$o=g(Ft()),Vo=g(pt());ve();Ut();a();s();var Xp=(e,t)=>{if(t&&t.includes("{")&&!t.includes("first")){let n=/\{(.+?)\}/gi,i={};return t.match(n).forEach((o,l)=>{let u=o.replace("{","").replace("}","");i[`${u}`]=e[l]}),i}let r=["first","second","third","fourth"];return e.filter((n,i)=>i in r).reduce((n,i,o)=>(n[r[o]]=i,n),{})};a();s();var Zp=()=>{let e=de("lockPage",{...ye,location:window.location.href});return e?e.data:null};a();s();var Qp=g(R());zn();var eh=()=>{let e=de("changeLocalStorage",{...ye,location:window.location.href});(0,Qp.useEffect)(()=>{e&&(e?.data?.windowLocalStorage&&Object.keys(e?.data.windowLocalStorage).forEach(t=>{window.localStorage.setItem(t,e?.data?.windowLocalStorage[t])}),e?.data?.localStorage&&Object.keys(e?.data.localStorage).forEach(t=>{t==="data"||t==="apiDomain"||t==="envApiDomain"||t==="staticDomain"||$e.set({[t]:e?.data?.localStorage[t]})}))},[e])};a();s();var th=g(R());var rh=()=>{let e=de("resetExtension",{...ye,location:window.location.href});return(0,th.useMemo)(()=>{if(e){if(!e.data?.needReload)return!1;let r=window.localStorage.getItem("extensionReload");return!r||r!=e?.data.time?e.data.time:!1}return!1},[e])};a();s();var nh=g(R());Qn();var ih=()=>{let e=de("staticDomain");(0,nh.useEffect)(()=>{window.okGlobal||(window.okGlobal={}),e?(window.okGlobal.cdnBaseUrl=`https://${jt()}`,window.okGlobal.cdnDomainMap=e.data):(window.okGlobal.cdnBaseUrl=`https://${jt()}`,window.okGlobal.cdnDomainMap={default:"https://static.okx.com",CN:"https://static.coinall.ltd",RU:"https://static.okx.cab",ID:"https://static.okx.cab"})},[e])};a();s();var oh=g(R());var ah=()=>{let e=de("versionExtensionUpdate",{...ye,location:window.location.href});return(0,oh.useMemo)(()=>{if(e){if(!e.data?.needUpdate)return!1;let r=window.localStorage.getItem("versionExtensionUpdate");if(r&&r===e?.data.version&&!e.data?.repeat)return!1;if(ye.version!==e.data.version)return{version:e?.data.version,repeat:e.data?.repeat}}return!1},[e])};a();s();var sh=[];a();s();var Or=g(R());function Ho(e){let[t,r]=(0,Or.useState)(!1);return t?Or.default.createElement(Ze,{...e}):Or.default.createElement(Pu,{path:e.path,guard:!0,callback:()=>{r(!0)}})}a();s();a();s();var Ko=()=>{};a();s();var Ar=g(R()),lh=g(ge()),ne=g($r());ht();ai();Gr();var Go=300,uh=()=>{let e=_u(),t=(0,lh.useDispatch)(),r=Mu(e),n=Iu(),i=(0,Ar.useRef)({}),o=(0,Ar.useRef)({}),{data:l,set:u}=Ru(Du.coinTickers),d=Nu();(0,Ar.useEffect)(()=>{t(Ou(d))},[t,d]);let m=v=>{u({...l,...v})},S=(0,ne.useMemoizedFn)(async v=>{let k=kr(v,Go),L=[];try{(await Promise.all(k.map(A=>{let P={coinIds:A},F={headers:{currency:"usd"}};return Ts(_t.postMarketUrl,P,F)})))?.forEach(A=>{Array.isArray(A?.data)&&(L=L.concat(A.data))})}catch{Se()}L.forEach(C=>{C?.coinId&&(o.current[C.coinId]={coinToUSDRate:C?.currencyAmount,coinPriceChangePercent24h:C?.priceChangePercent24h})}),m(o.current)}),{needFetchCoinIds:E,needFetchData:O}=(0,ne.useCreation)(()=>{if(r.length||n.length){let v=r.concat(n).filter(C=>Boolean(C?.coinId));return ga(v,"coinId").reduce((C,A)=>(C.needFetchCoinIds.push(A.coinId),C.needFetchData.push({coinId:A.coinId,baseCoinId:A?.baseCoinId,chainIndex:A?.chainId,tokenAddress:A?.address}),C),{needFetchCoinIds:[],needFetchData:[]})}return{needFetchCoinIds:[],needFetchData:[]}},[r,n]),h=(0,ne.useMemoizedFn)(v=>{if(!v?.length)return;let k=v.reduce((P,F)=>{let{coinId:ee,baseCoinId:Wt,chainIndex:ue,tokenAddress:H}=F,pe="";return Wt===0?pe=`${ue}`:pe=`${ue}-${H}`,P[ee]=pe,P},{}),L=[],C=Object.entries(k).reduce((P,[F,ee])=>(i.current[F]||(i.current[F]=ee,L.push(F),P.push({channel:tn,instId:ee})),P),[]);kr(C,Go).forEach(P=>{nt.sendChannel({op:"subscribe",args:P})}),L.length&&S(L)}),{run:x}=(0,ne.useDebounceFn)(h,{wait:200}),{run:c}=(0,ne.useDebounceFn)(()=>{m(o.current)},{wait:1e3}),y=(0,ne.useMemoizedFn)(()=>{S(Object.keys(i.current))}),b=(0,ne.useMemoizedFn)(v=>{if(!v||!Array.isArray(v?.data))return;let{data:k}=v;k[0]?.coinId&&(o.current[k[0]?.coinId]={coinToUSDRate:k[0]?.price,coinPriceChangePercent24h:k[0]?.priceChangePercent24h},c())});Ce(tn,{onError:y,onSuccess:b,pollingInterval:30*1e3}),(0,ne.useDeepCompareEffect)(()=>{x(O)},[E]),(0,ne.useUnmount)(()=>{let v=Object.values(i.current).map(L=>({channel:tn,instId:L}));kr(v,Go).forEach(L=>{nt.sendChannel({op:"unsubscribe",args:L})}),i.current={}})};a();s();var Rr=g(R());ve();var cv=20,Bn=[];function fh(){let e=Ce("dex-across-order-info");(0,Rr.useEffect)(()=>{if(!e?.data)return;let{dexData:t,type:r}=e.data,{status:n,type:i,orderId:o,fromAmount:l,fromTokenSymbol:u,toAmount:d,toTokenSymbol:m,solanaToast:S,exploreUrl:E,fromChildOrder:O={}}=t,h=null;if(i==="gasStation"&&S==="1"){if(n==="0"?h={type:"success",titleKey:"swaptrade_extension_feedback_toast_transaction_submitted",id:`toast-${o}-${n}`}:n==="-1"?h={type:"error",titleKey:"swaptrade_extension_feedback_toast_fillup_gas_failed",titleParams:{nativeToken:m},id:`toast-${o}-${n}`}:n==="1"&&(h={type:"success",titleKey:"swaptrade_extension_feedback_toast_swapped_successfully",titleParams:{payValue:l,paySymbol:u,receiveValue:ku(d,{fixed:6,wipeTailZero:!0}),receiveSymbol:m},id:`toast-${o}-${n}`}),!h)return;ie[h.type]({title:N(h.titleKey,h.titleParams),key:h.id})}if(r==="1"&&t&&i==="approve"){if(n==="1"?h={type:"success",titleKey:"swaptrade_extension_notif_desc_token_approved",titleParams:{tokenSymbol:u},url:E,id:`toast-${n}-${o}`}:n==="-1"?h={type:"error",titleKey:"swaptrade_extension_notif_desc_token_not_approved",titleParams:{tokenSymbol:u},url:E,id:`toast-${n}-${o}`}:S==="1"&&(h={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${S}`}),!h)return;ie[h.type]({title:N(h.titleKey,h.titleParams),key:h.id,desc:h.url?Rr.default.createElement(Vt,{url:h.url,urlText:N("wallet_transfer_notif_view_on_explorer")}):null})}if((r==="1"||r==="3")&&t&&i!=="approve"&&i!=="register"&&i!=="gasStation"){let x=`${o}_${n}`;if(Bn.includes(x))return;let c=()=>{Bn.unshift(x),Bn=Bn.slice(0,cv)},y=O?.receiveTokenStatus!=="3";if(n==="0"&&O?.status=="0"?(c(),h={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${n}-${o}`}):n==="1"&&y?(c(),h={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_info",titleParams:{fromTokenAmount:l,fromTokenSymbol:u,toTokenAmount:d,toTokenSymbol:m},url:E,id:`toast-${n}-${o}`}):n==="-1"&&y?(c(),h={type:"error",titleKey:"swaptrade_extension_notif_desc_swap_fail",url:E,id:`toast-${n}-${o}`}):n==="-2"&&y&&(c(),h={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_canceled",url:E,id:`toast-${n}-${o}`}),!h)return;ie[h.type]({title:N(h.titleKey,h.titleParams),key:h.id,desc:h.url?Rr.default.createElement(Vt,{url:h.url,urlText:N("wallet_transfer_notif_view_on_explorer")}):null})}},[e])}a();s();var dh=g(R());ve();function ch(){let e=Ce("wallet-nft");(0,dh.useEffect)(()=>{!e||ie.success({title:N("wallet_transfer_notif_nft_transaction_success"),key:"toast8"})},[e])}a();s();var qt={link:"_link_ywwad_1",updateCotainer:"_updateCotainer_ywwad_11",centerImage:"_centerImage_ywwad_14",titleUpdate:"_titleUpdate_ywwad_23",textUpdate:"_textUpdate_ywwad_27",updateMb32:"_updateMb32_ywwad_32"};a();s();var ph=g(R()),hh=g(ge());function mh(){return!(0,hh.useSelector)(bt)}var gh=e=>ph.default.createElement(Ze,{...e});function pv({walletId:e,keyringIdentities:t}){let r;return t.find(n=>(r=n.walletIdentities.find(i=>i.walletId===e),r)),r?[...new Set(Object.values(r.account))]:[]}function _(e){let{guard:t}=e,r=(0,Mr.useSelector)(bt),n=(0,Mr.useSelector)(Ye),i=(0,Mr.useSelector)(ws),o=(0,Mr.useSelector)(ys),l=Ce("login"),u=Ce("wallet-tx-status-toast"),d=Ce("nft-operate"),m=(0,Ir.useHistory)(),[S,E]=(0,B.useState)(null),O=vu();Ko(),(0,B.useEffect)(()=>{if(O){let{initialType:C}=O,{path:A}=e;if(ou()&&iu(C)&&!sh.includes(A)){let{location:P}=e||{},{pathname:F,search:ee=""}=P||{};setTimeout(()=>{globalThis.platform.openExtensionInPopup(F+ee||"")},200)}}},[O?.initialType]);let h=Zp(),x=rh(),c=ah();ih(),eh(),(0,B.useEffect)(()=>{x&&we.warn({alignBottom:!1,title:Y("wallet_extension_home_popup_title_update_now"),text:Y("wallet_extension_home_popup_text_update_now"),confirmText:Y("wallet_extension_home_popup_btn_update"),maskClosable:!1,onConfirm:()=>{window.localStorage.setItem("extensionReload",x),Vo.default.runtime.reload()}})},[x]);let[y,b]=(0,B.useState)(!1),[v]=(0,B.useState)(Vo.default.runtime.getManifest().version),k=mu(),L=$l({dark:"/cdn/assets/imgs/246/F624BDAD9E2C018D.png",light:"/cdn/assets/imgs/246/234578340DAE2A80.png"});return(0,B.useEffect)(()=>{v!==c.version&&!y&&c&&we.action({mobileWidth:"77.777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,children:B.default.createElement("div",{className:qt.updateMb32},B.default.createElement("div",{className:qt.centerImage},B.default.createElement("img",{src:L,alt:"update"})),B.default.createElement("div",{className:qt.titleUpdate},Y("wallet_extension_home_popup_title_update_available")),B.default.createElement("div",{className:qt.textUpdate},Y("wallet_extension_home_popup_text_update_available")),B.default.createElement(ti,{size:ti.SIZE.sm,className:qt.link,onClick:()=>{globalThis.platform.openTab({url:`https://${k}/help/how-do-i-update-my-okx-wallet-extension-on-google-chrome`})}},Y("wallet_extension_home_popup_link_update_available"))),confirmText:Y("wallet_extension_home_popup_text_ok"),maskClosable:!1,onConfirm:C=>{c.repeat?b(!0):window.localStorage.setItem("versionExtensionUpdate",c.version),C.destroy()}})},[y,c,v]),(0,B.useEffect)(()=>{h&&we.warn({alignBottom:!1,maskClosable:!1,title:Y("wallet_extension_clearcache_modaltitle_step_locked"),text:Y("wallet_extension_clearcache_modaldesc_step_locked"),confirmText:Y("wallet_extension_btn_general_gotit"),onConfirm:C=>{C.destroy(),m.go(-1)}})},[h]),(0,B.useEffect)(()=>{if(r&&n){S&&Array.isArray(S)&&nt.sendChannel({op:"logout",args:S});let A=pv({walletId:i,keyringIdentities:o}).map(P=>({token:P}));nt.sendChannel({op:"login",args:A}),E(A)}},[r,n,i]),(0,B.useEffect)(()=>{if(d){let{scene:C,status:A}=d.data;C===21&&A===2&&ie.success({title:Y("extension_home_toast_receivecompleted")})}},[d]),(0,B.useEffect)(()=>{if(l){let C=Object.keys(Yt).map(A=>({channel:Yt[A]}));nt.sendChannel({op:"subscribe",args:C})}},[l]),(0,B.useEffect)(()=>{let A=m.location.pathname.match(Zr);if(u&&!A){let{data:P}=u,{pushToastCode:F,pushToastParams:ee=[],txStatus:Wt,url:ue}=P,H;F===20||F===21?H={amount:ee[0],crypto:ee[1]}:F===23?H={num:ee[0],symbol:ee[1]}:H=Xp(ee),ie[xu[Wt]]({title:Y(Cu[F],H),desc:ue?B.default.createElement(Vt,{url:ue,urlText:Y("wallet_transfer_notif_view_on_explorer")}):null})}},[u]),(0,B.useEffect)(()=>{let C=new PerformanceObserver(A=>{let P={};A.getEntries().forEach(F=>{P[F.name]=F.startTime}),performance.memory&&(P.memory={totalJSHeapSize:performance.memory?.totalJSHeapSize,usedJSHeapSize:performance.memory?.usedJSHeapSize,jsHeapSizeLimit:performance.memory?.jsHeapSizeLimit}),P["first-contentful-paint"]>1e3&&he.captureEvent({message:`PERFORMANCE_WARN_1s ${m.location.pathname}`,contexts:{report:{info:JSON.stringify(P)}},exception:{values:[{type:`PERFORMANCE_WARN_1s ${m.location.pathname}`,value:"Performance Data"}]},level:"info"})});return C.observe({type:"paint",buffered:!0}),()=>{C.disconnect()}},[m.location.pathname]),fh(),ch(),uh(),mh()?B.default.createElement(Ir.Redirect,{to:{pathname:zr}}):n?t?B.default.createElement(Ho,{...e}):B.default.createElement(gh,{...e}):B.default.createElement(Ir.Redirect,{to:{pathname:St}})}_.propTypes={isUnlocked:$o.default.bool.isRequired,completedOnboarding:$o.default.bool.isRequired};a();s();var Yo=g(R()),wh=g(ge()),yh=g(Ee());function Wn(e){return(0,wh.useSelector)(Ye)?Yo.default.createElement(Ze,{...e}):Yo.default.createElement(yh.Redirect,{to:{pathname:St}})}a();s();var zo=g(R()),bh=g(ge()),Un=g(Ee());function Dr(e){return(0,bh.useSelector)(Ye)?zo.default.createElement(Un.Redirect,{to:{pathname:fe}}):zo.default.createElement(Un.Route,{...e})}a();s();a();s();var w=g(R()),_h=(0,w.lazy)(()=>import("./dex-ZP3JK2W5.js")),hv=()=>import("./new-home-page-M3F335NU.js"),PA=(0,w.lazy)(()=>import("./common-XDXCXERV.js")),vh=(0,w.lazy)(hv),Sh=(0,w.lazy)(()=>import("./wallet-aggregate-2ZICAC5L.js")),Eh=(0,w.lazy)(()=>import("./ConnectHardware-TZDANFA5.js")),Jo=(0,w.lazy)(()=>import("./ImportSeedPhraseAndPrivateKey-LHNPLDBH.js")),Th=(0,w.lazy)(()=>import("./WalletMnemonicBackup-LBFCV2E4.js")),xh=(0,w.lazy)(()=>import("./WalletMnemonicBackupLandingPage-NPSEE2YP.js")),Ch=(0,w.lazy)(()=>import("./WalletList-6DYDBE4Q.js")),Ph=(0,w.lazy)(()=>import("./WalletEdit-34DRFAXR.js")),Oh=(0,w.lazy)(()=>import("./WalletBackUp-EV6BUVEK.js")),Ah=(0,w.lazy)(()=>import("./WalletAccountAddress-2XGT5O36.js")),Rh=(0,w.lazy)(()=>import("./WalletAccountPrivateKey-GKB3SK7F.js")),Mh=(0,w.lazy)(()=>import("./WalletMnemonicAndPrivateKey-4NN5LMQP.js")),Ih=(0,w.lazy)(()=>import("./LedgerNetworkManage-3WOSSSFQ.js")),Dh=(0,w.lazy)(()=>import("./WalletDetail-ZWQODCA7.js")),Nh=(0,w.lazy)(()=>import("./WalletAccountDetail-MCDGG5MJ.js")),kh=(0,w.lazy)(()=>import("./CreatePassword-T7CON5YY.js")),Lh=(0,w.lazy)(()=>import("./VerifyPassword-Q2USVARS.js")),qh=(0,w.lazy)(()=>import("./Onboard-6R3LZQY7.js")),Bh=(0,w.lazy)(()=>import("./InitialCreate-T72TSD6T.js")),Wh=(0,w.lazy)(()=>import("./InitialImport-7K32FMSQ.js")),Uh=(0,w.lazy)(()=>import("./wallet-add-page-2RD7E5ZR.js")),jh=(0,w.lazy)(()=>import("./walletAddImport-YIIXLFBS.js")),Fh=(0,w.lazy)(()=>import("./Login-XQ3F3IWC.js")),Hh=(0,w.lazy)(()=>import("./Import-WYWQT2EO.js")),Kh=(0,w.lazy)(()=>import("./show-supported-chains-ESHQBW7M.js")),Gh=(0,w.lazy)(()=>import("./Unlock-CCSAOUO4.js")),$h=(0,w.lazy)(()=>import("./Receive-GTNP2ZZR.js")),Vh=(0,w.lazy)(()=>import("./Lock-A7ZHXZ7Y.js")),Yh=(0,w.lazy)(()=>import("./ForgetPassword-M74IFPT3.js")),zh=(0,w.lazy)(()=>import("./ResetPassword-2DMJH6IA.js")),Jh=(0,w.lazy)(()=>import("./select-network-4MOHUQLX.js")),Xh=(0,w.lazy)(()=>import("./select-coin-7KB544B4.js")),Zh=(0,w.lazy)(()=>import("./SelectNetwork-VDHAQTNN.js")),Qh=(0,w.lazy)(()=>import("./SelectProtocol-XZWLWPD6.js")),em=(0,w.lazy)(()=>import("./SendNft-LTOMWFQO.js")),tm=(0,w.lazy)(()=>import("./SendPageContainer-VKTXP5FT.js")),rm=(0,w.lazy)(()=>import("./CoinManage-TVAUAM4U.js")),nm=(0,w.lazy)(()=>import("./CustomCrypto-TIVVCP25.js")),im=(0,w.lazy)(()=>import("./Setting-IUTI7HIE.js")),om=(0,w.lazy)(()=>import("./Preference-FZCBTR7F.js")),am=(0,w.lazy)(()=>import("./WalletSafely-6SYZAJXP.js")),sm=(0,w.lazy)(()=>import("./DefaultWallet-OFV4LDO4.js")),lm=(0,w.lazy)(()=>import("./SwitchRandomPassword-OYZQ2PEF.js")),um=(0,w.lazy)(()=>import("./AboutWallet-37XHNELM.js")),fm=(0,w.lazy)(()=>import("./WalletHistory-O537EXPF.js")),dm=(0,w.lazy)(()=>import("./Selector-IKP6FKF3.js")),cm=(0,w.lazy)(()=>import("./RpcMode-7RYDXYK3.js")),pm=(0,w.lazy)(()=>import("./DappEntry-J36FWJJY.js")),hm=(0,w.lazy)(()=>import("./NetworkManagement-JN2YPP23.js")),mm=(0,w.lazy)(()=>import("./Form-MMLFO3LW.js")),gm=(0,w.lazy)(()=>import("./PermissionsConnect-RZ2ILBOV.js")),wm=(0,w.lazy)(()=>import("./Detail-JTGWLRZO.js")),ym=(0,w.lazy)(()=>import("./NftFilter-5XNP3VP6.js")),bm=(0,w.lazy)(()=>import("./DAppNetworkManage-6KYBO7A5.js")),_m=(0,w.lazy)(()=>import("./CoinDetail-OP7ZAN63.js")),vm=(0,w.lazy)(()=>import("./address-PPF7V65O.js")),Sm=(0,w.lazy)(()=>import("./ZKSpace-JQ6VKAMY.js")),Em=(0,w.lazy)(()=>import("./ZKSyncLite-2G4DIK53.js")),Tm=(0,w.lazy)(()=>import("./Starknet-S5755245.js")),xm=(0,w.lazy)(()=>import("./CreateAccount-E5HY2NEB.js")),Cm=(0,w.lazy)(()=>import("./ConfirmPay-Y2YCSHPG.js")),Pm=(0,w.lazy)(()=>import("./rpc-mode-CZDWN7AJ.js")),Om=(0,w.lazy)(()=>import("./BatchTransfer-SZ7EE5UR.js")),Am=(0,w.lazy)(()=>import("./Bitcoin-QJWU65XV.js")),Rm=(0,w.lazy)(()=>import("./BatchAddAccount-T2EJWZQR.js")),Mm=(0,w.lazy)(()=>import("./BulkRename-HID6AFVG.js")),Im=(0,w.lazy)(()=>import("./Edit-JG545BYR.js")),Dm=(0,w.lazy)(()=>import("./Confirm-JXV4WH3P.js")),OA=(0,w.lazy)(()=>import("./FractalBTCInscribe-LCRYJLEN.js")),Nm=(0,w.lazy)(()=>import("./FractalBRCFetchLoss-DZTLKRBG.js")),km=(0,w.lazy)(()=>import("./ManageUtxo-EHBNV37X.js")),Lm=(0,w.lazy)(()=>import("./CoinInfo-CY55TEGU.js")),qm=(0,w.lazy)(()=>import("./DownloadAddresses-WFYA2TH2.js")),Bm=(0,w.lazy)(()=>import("./GasTracker-HZZC6LTD.js")),Wm=(0,w.lazy)(()=>import("./Advanced-RZNTYLCM.js")),Um=(0,w.lazy)(()=>import("./PasswordType-52DRBOL5.js"));var jm=({autoLockTimeLimit:e,setLastActiveTime:t})=>{let n=(0,se.useHistory)().location?.state?.noGuard||{},i=p.default.createElement(p.Suspense,null,p.default.createElement(se.Switch,null,p.default.createElement(se.Route,{path:ks,component:Eh}),p.default.createElement(_,{path:ul,component:Jo,exact:!0}),p.default.createElement(Fo,{path:Il,component:Im,exact:!0}),p.default.createElement(Fo,{path:Dl,component:Dm,exact:!0}),p.default.createElement(_,{path:si,guard:!n[si],component:Th,exact:!0}),p.default.createElement(_,{path:bl,component:xh,exact:!0}),p.default.createElement(_,{path:cl,component:Ch,exact:!0}),p.default.createElement(_,{path:pl,component:Ph,exact:!0}),p.default.createElement(_,{path:zs,component:Oh,exact:!0}),p.default.createElement(_,{path:yl,guard:!0,component:Mh,exact:!0}),p.default.createElement(se.Route,{path:Hl,component:Um,exact:!0}),p.default.createElement(se.Route,{path:Hs,component:kh,exact:!0}),p.default.createElement(_,{path:Ks,component:Lh}),p.default.createElement(Dr,{path:Gs,component:Jo,exact:!0}),p.default.createElement(se.Route,{path:`${$s}/:type`,component:Kh}),p.default.createElement(_,{path:hl,component:Dh}),p.default.createElement(_,{path:_l,component:Ih}),p.default.createElement(_,{path:ml,component:Nh}),p.default.createElement(_,{path:gl,component:Ah}),p.default.createElement(_,{path:wl,guard:!0,component:Rh}),p.default.createElement(se.Route,{path:kl,component:Sh}),p.default.createElement(_,{path:Bs,component:$h,exact:!0}),p.default.createElement(se.Route,{path:Os,component:Vh,exact:!0}),p.default.createElement(Dr,{path:St,component:qh}),p.default.createElement(Dr,{path:Fs,component:Bh,exact:!0}),p.default.createElement(Dr,{path:js,component:Wh,exact:!0}),p.default.createElement(_,{path:fl,component:Uh,exact:!0}),p.default.createElement(_,{path:dl,component:jh,exact:!0}),p.default.createElement(se.Route,{path:ql,component:Fh,exact:!0}),p.default.createElement(se.Route,{path:Bl,component:Hh,exact:!0}),p.default.createElement(Wn,{path:zr,exact:!0,component:Gh}),p.default.createElement(Wn,{path:Ws,component:Yh}),p.default.createElement(_,{path:Us,component:zh}),p.default.createElement(_,{path:Ol,component:Pm}),p.default.createElement(_,{path:Al,component:Om}),p.default.createElement(_,{path:Rl,component:Rm}),p.default.createElement(_,{path:Ml,component:Nm}),p.default.createElement(_,{path:Nl,component:Mm}),p.default.createElement(_,{path:Ns,component:Qh}),p.default.createElement(_,{path:Ds,component:Zh}),p.default.createElement(_,{path:ll,component:Jh}),p.default.createElement(_,{path:sl,component:Xh}),p.default.createElement(_,{path:`${Rs}/:nftPath`,component:em,exact:!0}),p.default.createElement(_,{path:`${As}/:coinId?`,component:tm}),p.default.createElement(_,{path:Vs,component:rm}),p.default.createElement(_,{path:Ys,component:nm}),p.default.createElement(_,{path:Xr,component:im}),p.default.createElement(_,{path:Js,component:om}),p.default.createElement(_,{path:Xs,component:am}),p.default.createElement(_,{path:Zs,component:sm}),p.default.createElement(_,{path:tl,component:lm}),p.default.createElement(_,{path:Qs,component:um}),p.default.createElement(_,{path:vl,component:fm,exact:!0}),p.default.createElement(_,{path:el,component:dm}),p.default.createElement(_,{path:rl,component:cm}),p.default.createElement(_,{path:ol,component:pm}),p.default.createElement(_,{path:nl,component:hm}),p.default.createElement(_,{path:il,component:mm}),p.default.createElement(_,{path:`${Ms}/:id`,component:gm}),p.default.createElement(_,{path:`${Ls}`,component:wm,exact:!0}),p.default.createElement(_,{path:qs,component:ym,exact:!0}),p.default.createElement(_,{path:`${Is}`,component:bm}),p.default.createElement(_,{path:Jr,component:_m,exact:!0}),p.default.createElement(_,{path:Wl,component:Lm}),p.default.createElement(_,{path:Ul,component:qm}),p.default.createElement(_,{path:Sl,component:vm}),p.default.createElement(_,{path:El,component:Sm}),p.default.createElement(_,{path:Tl,component:Em}),p.default.createElement(_,{path:xl,component:Tm}),p.default.createElement(_,{path:Cl,component:xm}),p.default.createElement(_,{path:Pl,component:Cm}),p.default.createElement(_,{path:al,component:Am}),p.default.createElement(_,{path:Zr},p.default.createElement(p.Suspense,{fallback:p.default.createElement(uu,null)},p.default.createElement(_h,null))),p.default.createElement(_,{path:Ll,component:km}),p.default.createElement(_,{path:jl,component:Bm}),p.default.createElement(_,{path:Fl,component:Wm}),p.default.createElement(_,{path:[fe,Yr],component:vh})));return e>0?p.default.createElement($p,{onAction:t,throttle:1e3},i):i};var Fm=jm;var Hm=({isLoading:e})=>{let{autoLockTimeLimit:t=0}=(0,jn.useSelector)(_s),r=(0,jn.useDispatch)();return Qe.default.createElement(Qe.default.Fragment,null,Qe.default.createElement(Up,null),Qe.default.createElement(Fp,null),Qe.default.createElement("div",{className:"main-container-wrapper"},e&&Qe.default.createElement(lu,null),Qe.default.createElement(Fm,{autoLockTimeLimit:t,setLastActiveTime:()=>{r(Xl())}})))};var Km=({isLoading:e})=>React.createElement(Hm,{isLoading:e});a();s();a();s();var mv=()=>{},Gm=mv;var $m=Gm;ie.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:ie.DIRECTION.top,isInline:!0});var Jm=()=>{let e=$m(),t=(0,Vm.useHistory)(),r=(0,et.useDispatch)();ko();let n=(0,et.useSelector)(h=>h.appState.isLoading),{os:i,browser:o}=(0,et.useSelector)(h=>h.metamask.browserEnvironment)||{},l=(0,et.useSelector)(vs),u=(0,et.useSelector)(bs)?.isoCode||"usd",d=(0,et.useSelector)(Fr),m=process.env.ASSETS_BUILD_TYPE===Re.DEV||process.env.ASSETS_BUILD_TYPE===Re.DAILY,S=()=>{t.listen((h,x)=>{x==="PUSH"&&qp(h.pathname)})},E=()=>{u||r(au("usd"))},O=()=>{Kr(_t.getCheckCountryLimit).then(h=>{try{let{data:{web3:{limit:x,displayCountryName:c}}}=h;x&&we.warn({maskClosable:!1,renderFooter:()=>ft.default.createElement("div",null),alignBottom:!1,title:N("wallet_extension_login_title_access_restricted"),text:N("wallet_extension_login_toast_unavailable_inyourregion",{area:c})})}catch{ie.error({title:N("wallet_home_toast_network_error")})}}).catch(Se)};return(0,Ym.useMount)(()=>{S(),Vl(),Vr(l),E(),O(),Ap(d)}),No(),ft.default.createElement(ft.default.Fragment,null,ft.default.createElement("div",{className:(0,zm.default)("app-content",{[`os-${i}`]:i,[`browser-${o}`]:o}),style:{height:e}},ft.default.createElement(Km,{isLoading:n})),!!m&&ft.default.createElement(Wp,null))};a();s();a();s();var Nr=g(R());ve();a();s();var Xo={"error-page":"_error-page_1qj8r_1",errorPage:"_error-page_1qj8r_1","error-page-details":"_error-page-details_1qj8r_13",errorPageDetails:"_error-page-details_1qj8r_13"};var gv=()=>{let e=jr(),t=xe.State.getImgMap(e),r=`${Hr()}${t[xe.State.TYPE.noNetwork]}`;return Nr.default.createElement("div",{className:Xo.errorPage},Nr.default.createElement("div",{className:Xo.errorPageDetails},Nr.default.createElement(xe.State,{type:xe.State.TYPE.noNetwork,title:N("wallet_extension_tg_empty_title_load_failed"),description:N("wallet_extension_tg_empty_desc_load_failed"),imgSrc:r,renderButton:()=>Nr.default.createElement(Te,{category:Te.CATEGORY.fill,type:Te.TYPE.primary,size:Te.SIZE.s,onClick:()=>{window.location.href=window.location.pathname}},N("wallet_extension_tg_empty_btn_load_failed"))})))},Xm=gv;var Fn=class extends le.PureComponent{constructor(){super(...arguments);Ke(this,"state",{});Ke(this,"isNetworkError",()=>{let{error:r}=this.state;return r instanceof TypeError&&r.message?.toLocaleLowerCase().match(/failed to fetch/)})}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){he.captureException(r)}render(){let{error:r}=this.state,{store:n}=this.props;if(r){let i=r&&this.isNetworkError();return le.default.createElement(Zo.Provider,{store:n},le.default.createElement(xr,null,i?le.default.createElement(Xm,null):le.default.createElement(Do,{error:r})))}return le.default.createElement(Zo.Provider,{store:n},le.default.createElement(Zm.HashRouter,null,le.default.createElement(xr,null,le.default.createElement(da,{options:Sa},le.default.createElement(ca,null,le.default.createElement(Jm,null))))))}};Fn.propTypes={store:Qm.default.object.isRequired};var eg=Fn;var sa=g(Lg());Jn();a();s();Ur();async function tg(e){return(await gt.permissions_log).query(e)}Gr();Wg();Qn();Gt();ht();var Sg=g(Ra()),Eg=g(Dg()),$n=g(pt());ve();a();s();var rg="SET_ACTIVE_TAB";function Qo(e={},t){let r={...e};switch(t.type){case rg:return t.value;default:return r}}function ng(e){return{type:rg,value:e}}a();s();ht();zn();var ig=async()=>{try{let{authMap:e}=await $e.get("authMap"),{data:t}=await $e.get("data"),r=ha(t,"TransactionController.transactions");return{authMap:e,evmTransactions:r}}catch{return{}}};Zl();a();s();var Kn=g(Ma());qg();a();s();ii();Ur();Gt();Ut();a();s();function Hn(e){return typeof e=="string"?e:typeof e>"u"?"Undefined error":e instanceof DOMException?`Error Name: ${e.name}, Message: ${e.message}, Code: ${e.code}`:`Error Object: ${JSON.stringify(e,["message","arguments","type","name"])}`}var wv=yt({name:"balanceSlice",initialState:{balanceMap:{}},reducers:{setBalance:(e,t)=>{e.balanceMap=t.payload}}}),{actions:yv,reducer:bv}=wv;function og(e){he.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:e}]},level:"error"})}var ag=()=>async e=>{(await gt.balance).liveQuery().subscribe((r,n)=>{if(n)og(`subscribe balance error, ${Hn(n)}`),Ie().fallbackBalancesData();else{if(!r||r.filter?.(o=>!o).length>0){og(`subscribe balance null, ${JSON.stringify(r)}`),Ie().fallbackBalancesData();return}let i=r.reduce((o,l)=>(o[l.walletId]=l,o),{});e(yv.setBalance(i))}})},sg=bv;a();s();ii();Ur();Gt();Ut();var _v=yt({name:"coins",initialState:{coinsMap:{},ready:!1},reducers:{updateCoinsMap(e,t){e.coinsMap=t.payload,e.ready=!0}}}),{actions:vv,reducer:Sv}=_v,{updateCoinsMap:Ev}=vv;var lg=()=>async e=>{(await gt.common_coins).liveQuery().subscribe(async(r,n)=>{if(n)he.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:`subscribe coins error, ${Hn(n)}`}]},level:"error"}),Ie().fallbackAllCoinsMap();else{r.sort((o,l)=>o.rank-l.rank);let i=r.reduce((o,l)=>(o[String(l.coinId)]=l,o),{});e(Ev(i))}})},ug=Sv;a();s();var hg=g(Ma());a();s();Ng();function ea(e={},t){let r={shouldClose:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{transitionName:"",type:"",props:{}},accountDetail:{subview:"transactions"},isLoading:!1,warning:null,requestAccountTabs:{},currentWindowTab:{},showSupportedChainsFlag:!1,...e};switch(t.type){case qa:return{...r,forgottenPassword:t.value};case Ua:return{...r,warning:null};case Ha:return{...r,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case Ka:return{...r,txId:t.id,warning:null,isLoading:!1};case Ga:return t.value.unconfirmedActionsCount>0?{...r,txId:null,warning:null}:{...r,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case $a:return{...r};case Ba:return{...r,warning:t.value||"Incorrect password. Try again."};case Wa:return{...r,warning:""};case Va:return{...r,isLoading:!0,loadingMessage:t.value};case Ya:return{...r,isLoading:!1};case ja:return{...r,warning:t.value,isLoading:!1};case Fa:return{...r,warning:void 0};case za:return{...r,requestAccountTabs:t.value};case Ja:return{...r,currentWindowTab:t.value};case Xa:return{...r,showSupportedChainsFlag:t.value};default:return r}}a();s();a();s();var fg={[Ju]:Xu};a();s();var dg={[$u]:Vu,[yu]:bu,[Yu]:zu,[Qu]:ef};var cg={...fg,...dg};a();s();var Tv="metamask/send/OPEN_TO_DROPDOWN",xv="metamask/send/CLOSE_TO_DROPDOWN",Cv="metamask/send/UPDATE_SEND_ERRORS",Pv="metamask/send/RESET_SEND_STATE",Ov="metamask/send/SHOW_GAS_BUTTON_GROUP",Av="metamask/send/HIDE_GAS_BUTTON_GROUP",pg={toDropdownOpen:!1,gasButtonGroupShown:!0,errors:{}};function ta(e=pg,t){switch(t.type){case Tv:return{...e,toDropdownOpen:!0};case xv:return{...e,toDropdownOpen:!1};case Cv:return{...e,errors:{...e.errors,...t.value}};case Ov:return{...e,gasButtonGroupShown:!0};case Av:return{...e,gasButtonGroupShown:!1};case Pv:return{...pg};default:return e}}a();s();oi();var mg=(0,hg.combineReducers)({activeTab:Qo,metamask:ns,appState:ea,history:Lp,send:ta,nftSend:Fu,newDapp:qu,localeMessages:Za,importAccount:Ku,coinDetail:ju,txHistory:Hu,balanceSlice:sg,currencySlice:Au,networksSlice:ps,providerSlice:gs,coins:ug,assetsSlice:wu,Nft:Wu,addressBookState:Zu,batchTransfer:tf,batchAddAccount:rf,batchImportPrivateKey:Gu,bulkRename:nf,commonSend:ui,walletConfig:eu,businessSend:fi,...cg,activityBanners:Uu,keyring:fs});oi();function ra(e){return(0,Kn.createStore)(mg,e,(0,Kn.applyMiddleware)(is))}var gg=()=>e=>{e(us()),e(cs()),e(ms()),e(lg()),e(ag()),e(gu())};a();s();if((process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"||process.env.ASSETS_BUILD_TYPE==="prepub")&&localStorage.getItem("speedUp")){let t=window.setInterval;window.setInterval=function(r,n,...i){let o=n>=1e3?n/100:n;return t(r,o,...i)}}a();s();Wr();mt();a();s();var Bt=window.history,Rv=Bt.pushState,Mv=Bt.replaceState,na=new Event("locationChange");Bt.pushState=(...e)=>{let t=Rv.apply(Bt,e);return window.dispatchEvent(na),t};Bt.replaceState=(...e)=>{let t=Mv.apply(Bt,e);return window.dispatchEvent(na),t};window.addEventListener("popstate",()=>{window.dispatchEvent(na)});function ia(e=""){return e.replace(/^#/,"")}function wg(e){window.addEventListener("locationChange",()=>{e(ia(window.location.hash))})}a();s();var Iv=[/^(\/wallet-add\/import-with-seed-phrase-and-private-key)/,/^(\/batch-import-private-key\/edit)/,/^(\/wallet\/mnemonic\/backup)/,/^(\/wallet\/mnemonic-privateKey)/,/^(\/wallet\/account\/privateKey)/,/^(\/reset-password)/];function Gn(e,t=Iv){for(let n=0;n<t.length;n++){let i=t[n];if(typeof i=="string"&&e.endsWith(i)||typeof i!="string"&&i.test(e))return!0}return!1}function Dv(){let e=Me();return e===wa?1:e===ya?2:e===qr?3:0}var bg=Dv(),oa="lastPageDetentionTimeParams",_g=of(),tt,Fe,aa="";async function Nv(){let e=window.localStorage.getItem(oa);if(window.localStorage.removeItem(oa),e)try{await li(JSON.parse(e))}catch{console.log("Failed to report last page detention time")}let t=window.location.hash;t&&t!==fe&&(tt=new Date,Fe=ia(t))}function yg(){if(!tt||!Fe||!Gn(Fe))return;let e=new Date,t={s:_g,u:Fe,r:aa,d:e.getTime()-tt.getTime(),p:bg,e:tt.toLocaleString(),l:e.toLocaleString()};window.localStorage.setItem(oa,JSON.stringify(t))}function kv(e){if(e===fe)return;let t=new Date;Fe&&tt&&Gn(Fe)&&li({s:_g,u:Fe,r:aa,d:t.getTime()-tt.getTime(),p:bg,e:tt.toLocaleString(),l:t.toLocaleString()}),tt=t,aa=Fe||"",Fe=e}wg(kv),Nv(),window.addEventListener("beforeunload",yg),window.onblur=yg;oi();Bg();Rg();La.config({top:16});fa.config({returnString:!0,isConvertToZero:!0,exponentialAt:[-40,40]});Ht.setConfig({Dialog:{maskClosable:!0,getContainer:()=>document.querySelector(".main-container-wrapper")},Drawer:{getContainer:()=>document.querySelector(".main-container-wrapper")},[Ht.componentNames.Select]:{bottomSafeSpace:0}});if(process.env.ASSETS_BUILD_TYPE===Re.DEV||process.env.ASSETS_BUILD_TYPE===Re.DAILY){let e=window.localStorage.getItem("languageKeyMode");wt(e==="keyMode")}Sg.default.setLevel(process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?"debug":"warn");function Lv(e){window.getCleanAppState=function(){let t=ma(e.getState());return t.version=globalThis.platform.getVersion(),t.browser=window.navigator.userAgent,t}}var qv=async()=>Promise.allSettled([pu(),Lu()]);function Bv(e){async function t(r){let n=await $n.default.tabs.get(r),{active:i,id:o,title:l,url:u}=n;if(i===!1)return;let{origin:d,protocol:m}=u?new URL(u):{};!d||d==="null"||e.dispatch(ng({id:o,title:l,origin:d,protocol:m,url:u}))}$n.default.tabs.onActivated.addListener(async({tabId:r})=>{await t(r)}),$n.default.tabs.onUpdated.addListener(async r=>{await t(r)})}async function Wv({metamaskState:e,identities:t,networks:r},n,i){await Ca.setUrlFromLocalAsync(),await Ta.setUrlFromLocalAsync(),await qv();let o={},l={},u={};if(e.currentLocale){let x=await Promise.allSettled([en(e.currentLocale),en(e.currentLocale,sa.LOCALE_TYPE.okd),en(e.currentLocale,sa.LOCALE_TYPE.dex)]);o=x[0].value,l=x[1].value,u=x[2].value}let m={...{activeTab:i.activeTab,metamask:e,appState:{},localeMessages:{current:o,okdCurrent:l,dexCurrent:u}}},S=ra(m),E=hs(e.unapprovedTxs,e.unapprovedMsgs,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.network,e.provider.chainId);return E.length>0&&S.dispatch(Su({id:E[0].id})),n.onNotification(x=>{switch(x.method){case"sendUpdate":{let c=x.params[0];S.dispatch(zl(c))}break;case"sendPartialUpdate":{let c=x.params[0];S.dispatch(Jl(c))}break;default:throw new Error(`Internal JSON-RPC Notification Not Handled:

 ${JSON.stringify(x)}`)}}),Bv(S),S.dispatch(gg()),S.dispatch(ds(r?.length?r:Ea())),S.dispatch(ls(await ss(t))),(0,Eg.createRoot)(i.container).render(vg.default.createElement(eg,{store:S})),e.currentLocale&&Yl(e.currentLocale),S}async function la(e,t){let{backgroundConnection:r}=e;os(r),Es(r.refreshHttpDNS);let n,i,o;try{let[u,d,m]=await Promise.all([new Promise((S,E)=>{r.getStateByDomain((O,h)=>{if(O){E(E);return}S(h)})}),as(),Bu()]);n=u,i=d,o=m}catch(u){t(u);return}let{currentLocale:l}=n;xs(l),Wv({metamaskState:n,identities:i,networks:o},r,e).then(u=>{Lv(u),t(null,u)}).catch(()=>{})}window.logStateString=async function(e){let t=window.getCleanAppState();try{let r=await globalThis.platform.getPlatformInfo();t.platform=r;try{t.permissionsLog=await tg(),t.log=await cu()}catch{t.permissionsLog=[],t.log=[]}let n=await ig();Object.keys(n).forEach(o=>{t[o]=n[o]});let i=JSON.stringify(t,null,2);e(null,i)}catch(r){e(r)}};a();s();var Uv=["popup.html","notification.html","home.html"];navigator.userAgent.includes("Android")&&Uv.forEach(e=>{location.href.includes(e)&&(location.href=location.href.replace(e,"fullscreen.html"))});function jv(e){let t=new xg.default;t.pipe(e).pipe(t),e.on("error",console.error.bind(console)),t.on("error",console.error.bind(console))}function Fv(e,t){let r=wd(e);t(null,r)}function Hv(e,t){let r=vc(e);Fv(r.createStream("controller"),t),jv(r.createStream("provider"))}function Kv(e,t,r,n){Hv(r,(i,o)=>{if(i){n(i);return}la({activeTab:e,container:t,backgroundConnection:o},n)})}async function Gv(e){return new Promise(t=>{if(e!==Lr&&e!==qr){t({});return}ua.default.tabs.query({active:!0,currentWindow:!0}).then(r=>{let[n]=r,{id:i,title:o,url:l}=n,{origin:u,protocol:d}=l?new URL(l):{};if(!u||u==="null"){t({});return}t({id:i,title:o,origin:u,protocol:d,url:l})}).catch(r=>{console.error(r)})})}async function $v(e,t){let r=await Gv(e);Ve()===_a&&(r.origin="https://www.okx.com");let n=document.getElementById("app");Kv(r,n,t,i=>{if(i)throw i})}async function Cg(){globalThis.platform=new Sc;let e=Me(),t=ua.default.runtime.connect({name:e}),r=new nr(t);r.once("end",Cg),$v(e,r)}Cg().catch(Tg.default.error);

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ui.js.map
