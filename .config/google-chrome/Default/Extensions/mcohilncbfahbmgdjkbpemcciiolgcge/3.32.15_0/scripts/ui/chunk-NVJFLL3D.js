import{b as m}from"./chunk-XIDZSPWD.js";import{C as R,E as V}from"./chunk-YC6W5MPL.js";import{k as w,l as M}from"./chunk-656GFN7J.js";import{d as I,f as P}from"./chunk-R4G6BEPF.js";import{F as d,Q as L,pa as y}from"./chunk-6O63U2D6.js";import{m as c,o as u}from"./chunk-GLD6H5Q5.js";c();u();y();P();var D="txHistoryRejectValues",$={hideValuelessNft:"hideValuelessNft"},et={NORMAL:0,RISKY:1,VALUELESS:2},S={[$.hideValuelessNft]:!0},T=async()=>{try{return await I().getSelectedWallet()}catch{return null}},F=()=>{try{let t=localStorage.getItem(D);return t?JSON.parse(t)??{}??{}:{}}catch{return{}}},N=(t={})=>{try{let e=JSON.stringify(t);return localStorage.setItem(D,e),!0}catch{return!1}},rt=async(t,e)=>{try{let r=await T();if(!r)return!1;let s=F(),o={[r]:{[t]:e}};return N(L({},s,o))}catch{return!1}},j=async()=>{let t=await T();if(!t)return{};let e=F(),r=e?.[t]??{};if(d(r)){let s={[t]:S};return N(L({},e,s)),S}return r};c();u();M();y();var n=w({name:"txHistory",initialState:{filters:{status:[1,2,3,4],dates:m().stringDates,mainCoinId:"",init:!0},txList:[],initLoading:!0,scrollLoading:!1,filterLoading:!1,lastRowId:""},reducers:{setInitLoading:(t,e)=>{t.initLoading=e.payload},setScrollLoading:(t,e)=>{t.scrollLoading=e.payload},setFilterLoading:(t,e)=>{t.filterLoading=e.payload},setFilters:(t,e)=>{t.filters={...t.filters,...e.payload,init:!1}},setLastRowId:(t,e)=>{t.lastRowId=e.payload},setTxList:(t,e)=>{t.txList=e.payload},mergeTxList:(t,e)=>{t.txList=[...t.txList,...e.payload]},resetFilters(t){t.filters={status:[1,2,3,4],dates:m().stringDates,mainCoinId:"",init:!0}},resetTxHistory:t=>{t.txList=[],t.initLoading=!1,t.scrollLoading=!1,t.filterLoading=!1,t.lastRowId=""}}}),{actions:k,reducer:B}=n,dt=B,ft=t=>t[n.name].txList,G=t=>t[n.name].filters,U=t=>{let e=G(t),{dates:[r,s],mainCoinId:o}=e;return{startDate:new Date(`${r} 00:00:00`).getTime(),endDate:new Date(`${s} 23:59:59`).getTime(),mainCoinId:o,status:[1,2,3,4]}},_=t=>t[n.name].initLoading,b=t=>t[n.name].scrollLoading,z=t=>t[n.name].lastRowId,gt=t=>t[n.name].filterLoading,{setFilters:Q,setTxList:E,mergeTxList:h,setInitLoading:C,setScrollLoading:H,setFilterLoading:A,resetTxHistory:Lt,setLastRowId:O,resetFilters:mt}=k;var X=(t,e={initLoad:!1,scrollLoad:!1,autoRefresh:!1,fromCoinDetail:!1})=>async(r,s)=>{let o={...t},{initLoad:f,scrollLoad:i,fromCoinDetail:x}=e,q=x?V:R,g=s(),p=z(g),v=_(g),W=b(g);if(!(i&&(!p||W||v))){if(f&&r(C(!0)),i&&r(H(!0)),f&&r(O("")),i&&(o.lastRowId=p),!x)try{let a=await j();o.hideValuelessNft=a?.hideValuelessNft??!0}catch(a){console.error(a)}try{let a=await q(o),l=a?.content;d(l)&&(l=[]),r(i?h(l):E(l));let J=l.length,K=a.hasViewMore?l[J-1]?.rowId:"";r(O(K))}catch{r(i?h([]):E([]))}f&&r(C(!1)),i&&r(H(!1)),r(A(!1))}};function xt(t){return async(e,r)=>{await e(Q(t)),await e(A(!0));let s=r();e(X(U(s)))}}export{$ as a,et as b,rt as c,j as d,dt as e,ft as f,G as g,U as h,_ as i,b as j,z as k,gt as l,Q as m,E as n,C as o,Lt as p,O as q,mt as r,X as s,xt as t};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-NVJFLL3D.js.map
