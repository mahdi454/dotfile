import{a as g,c as v}from"./chunk-YQGNRWCJ.js";import{a as h,b as U}from"./chunk-RIWLOEHK.js";import{X as R}from"./chunk-VPDRXROE.js";import{F as C,Q as W,pa as N}from"./chunk-6O63U2D6.js";import{a as P}from"./chunk-O337TVCZ.js";import{f as l,m as t,o as r}from"./chunk-GLD6H5Q5.js";t();r();var A=l(P());N();t();r();var x=l(R());var L=(n,f)=>{let{coinId:o,address:s}=n||{},i=g(),{ready:c=!0,...p}=f||{},a={retryCount:3,ready:!!c&&!!o&&!!s,...p},{data:d,loading:u,error:e}=(0,x.useRequest)(async()=>await i(n),a);return[u,d,e]},D=L;t();r();var B=l(P()),b=l(R());N();t();r();var F=(n={})=>n?JSON.parse(JSON.stringify(n)):{};var _=7e3,O="wallet-gas-price",k=(n,f)=>{let{chainId:o,coinId:s,address:i,...c}=n||{},{onError:p,onSuccess:a,pollingInterval:d,ready:u=!0}=f||{},e=o!==void 0&&u,m=g(),E=U(O,{ready:e,pollingInterval:d||_,onError:async()=>{let S=await m({coinId:s,address:i,chainId:o,...c});a?.(S),p?.()}});(0,b.useDeepCompareEffect)(()=>{let S=E?.data?.[0]||{},I=F(S);!C(I)&&Number(I?.chainIndex)===Number(o)&&a?.(I)},[E]),(0,B.useEffect)(()=>{if(e)return h.sendChannel({op:"subscribe",args:[{chainId:o,channel:O}]}),()=>{h.sendChannel({op:"unsubscribe",args:[{chainId:o,channel:O}]})}},[e])},w=k;var J=(n,f)=>{let[o,s]=(0,A.useState)({}),{onSuccess:i,pollingInterval:c,...p}=f||{},[a,,d]=D(n,{onSuccess:e=>{s(e),i?.(e)},...p}),u=o?.supportPush;return v(n,{pollingInterval:c,ready:u===!1,onSuccess:e=>{s(e),i?.(e)}}),w(n,{pollingInterval:c,ready:u===!0,onSuccess:(e={})=>{let m=W({},o,e);s(m),i?.(m)}}),[a,o,d]},ce=J;export{ce as a};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-445ZV7VL.js.map
