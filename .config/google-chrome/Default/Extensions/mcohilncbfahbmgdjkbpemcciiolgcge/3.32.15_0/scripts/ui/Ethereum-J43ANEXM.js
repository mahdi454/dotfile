import{b as Go,f as Do,g as Oo,h as Wo}from"./chunk-YEFA6IK7.js";import{a as vo,b as ot,c as W,d as Lo,e as Mo}from"./chunk-W4RN7Y3B.js";import{m as So}from"./chunk-63F6WMW7.js";import"./chunk-J5JIFWF4.js";import{a as bo}from"./chunk-4AGVCDBO.js";import{a as Bo}from"./chunk-RZVKOSLL.js";import{a as tt}from"./chunk-TC3YAW4K.js";import"./chunk-YKXOTYDR.js";import{a as No}from"./chunk-EJPYWFCE.js";import{a as ut}from"./chunk-HOCK327A.js";import{a as Ao}from"./chunk-R4GTXV6N.js";import"./chunk-RE7CXNX6.js";import{a as wo}from"./chunk-226IQWB4.js";import{g as Po}from"./chunk-V4GLNYXT.js";import{f as Eo}from"./chunk-TK3POT64.js";import{a as ko}from"./chunk-IHRKU3VB.js";import"./chunk-PKCAYJL7.js";import"./chunk-D7IU2MQB.js";import{d as $e,e as Fo}from"./chunk-HTCS5UFP.js";import{a as _o,b as To,c as xo,e as ho}from"./chunk-5TIJ4M5X.js";import{g as ve,h as go,i as yo,l as ge}from"./chunk-P52TMJKP.js";import"./chunk-ZH5Z2RVX.js";import"./chunk-P4KG7HC3.js";import{a as Co}from"./chunk-2YRNNTO4.js";import{a as oe}from"./chunk-FCM3KMN7.js";import{a as Z,e as fo}from"./chunk-SVCSAZ2J.js";import{a as lo,b as po,d as uo}from"./chunk-AHU7BCIL.js";import"./chunk-C6JR2GZU.js";import"./chunk-EZ5WRJOA.js";import"./chunk-WMPWBUW7.js";import"./chunk-WXXVKHTN.js";import"./chunk-O4KI5ERK.js";import"./chunk-6D2WFU2O.js";import"./chunk-U2UKW4WG.js";import"./chunk-445ZV7VL.js";import{d as co}from"./chunk-YQGNRWCJ.js";import"./chunk-X4Z4JMVV.js";import"./chunk-RMSE4KTO.js";import"./chunk-Y4Q624TF.js";import"./chunk-A4CVLGFS.js";import"./chunk-ALNQKIUN.js";import{a as Je}from"./chunk-XZFOTB6K.js";import"./chunk-ZGE3YU4L.js";import{d as X,e as Be,g as Ce}from"./chunk-R5U3NPEX.js";import"./chunk-JDZSGQWQ.js";import"./chunk-XY66VBX7.js";import"./chunk-GZFI5G46.js";import{a as to,q as b}from"./chunk-UAHUXCQX.js";import"./chunk-73OZ5IYN.js";import"./chunk-BWRHBLYR.js";import{c as mo}from"./chunk-XTOYI7P4.js";import"./chunk-KSCP4BJT.js";import"./chunk-3MIEWVTZ.js";import{f as eo}from"./chunk-J2H2J7IS.js";import{a as pt}from"./chunk-SJIEUX3S.js";import"./chunk-L7LFNDLE.js";import{a as Io}from"./chunk-NEFZK4RT.js";import"./chunk-FBTKKNCQ.js";import{d as et}from"./chunk-UBFVE3Q4.js";import{a as xe}from"./chunk-STMKIE2Z.js";import"./chunk-GUQJR5VF.js";import"./chunk-MI6YHDAD.js";import"./chunk-ZAW6Z544.js";import"./chunk-SVAMZON6.js";import"./chunk-MF4732CU.js";import{a as $t}from"./chunk-F52H34ZH.js";import"./chunk-3RNOIYOK.js";import"./chunk-OQFQ7WFP.js";import"./chunk-MFN67L7C.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import{a as zt}from"./chunk-JTGFDHLS.js";import"./chunk-PMGQLREC.js";import"./chunk-W6OF57RJ.js";import"./chunk-HRZ4SZVQ.js";import"./chunk-ECPXLKIL.js";import"./chunk-RK4XZYBE.js";import"./chunk-CFXFWVCZ.js";import"./chunk-NIVBOS5R.js";import"./chunk-C4AEIBFI.js";import"./chunk-5EAA4KU7.js";import{b as Qt}from"./chunk-QF25V5YC.js";import{b as Vt}from"./chunk-VVL4IZMM.js";import"./chunk-ONV3ODOM.js";import"./chunk-ZI4ZHHA3.js";import{a as qt,b as jt}from"./chunk-3545CIHX.js";import"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-3DI6NEAD.js";import"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import"./chunk-5KSRM7B2.js";import"./chunk-PPHSAQ52.js";import{a as Ze,c as no,d as ao,g as lt,h as io,i as so}from"./chunk-JUOUD4EO.js";import"./chunk-4W35J5OQ.js";import"./chunk-GPJC633M.js";import{e as Jt}from"./chunk-YC6W5MPL.js";import"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import"./chunk-2VRILCVI.js";import"./chunk-IRMGOW5H.js";import"./chunk-CQ64XZTP.js";import{h as Xt,p as Zt}from"./chunk-UXLFUD7T.js";import"./chunk-2HEOW3XO.js";import"./chunk-DLRFA5AU.js";import"./chunk-OC3IFNJW.js";import"./chunk-UI7PAU35.js";import"./chunk-SMZ64QW3.js";import"./chunk-DQTTI4XL.js";import{P as oo,fa as ro}from"./chunk-FF6KJRSH.js";import"./chunk-CQ7YBDUS.js";import{a as Ke}from"./chunk-GSYNHSX4.js";import"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import{n as Qe}from"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import"./chunk-HXUMX2S7.js";import{l as Kt}from"./chunk-FYACTIEH.js";import"./chunk-QKXA7YNE.js";import{a as Xe}from"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import{a as Te}from"./chunk-M2F2X65U.js";import"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import{a as Ut}from"./chunk-S5DGV5WL.js";import"./chunk-AOXUSYRH.js";import{o as Bt,q as ct}from"./chunk-WKBC6JL3.js";import"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import{X as Se}from"./chunk-VPDRXROE.js";import{V as Wt,W as Ve,w as it}from"./chunk-JLIPSIRU.js";import"./chunk-CIDV5VJQ.js";import{a as Ar}from"./chunk-VX55KNI4.js";import{i as _e,m as Yt}from"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import{T as Mt,Z as Gt,ca as mt,d as Lt,ea as Dt,n as je,ta as ze}from"./chunk-VGT27A4M.js";import{d as vt,f as Nr}from"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import"./chunk-OG46YTNN.js";import{c as E}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import{a as Rt,b as Sr}from"./chunk-CYOQISC6.js";import{f as Ht,h as Br}from"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{$ as Ft,B as Et,D as V,E as Ue,F as ke,Fa as Ae,G as wt,Jb as kt,Kc as kr,L as Pt,Mb as At,Pb as Ne,Ub as Nt,Uc as Ot,X as pe,Xb as O,Yb as ue,Zb as nt,ea as Fr,gd as br,jc as at,t as te,v as Pr,w as Re,y as le,z as He}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{H as K,b as Q,o as St,q as st,r as qe}from"./chunk-LDKM7IQF.js";import{K as Fe,a as yt,b as ht,o as It,pa as We}from"./chunk-6O63U2D6.js";import{M as D,l as Pe,x as l}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{T as Ye,c as bt,ca as be}from"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import{a as M}from"./chunk-O337TVCZ.js";import"./chunk-EJP3AYQB.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-WRBXETR5.js";import"./chunk-RBB7LL2V.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as h,m,o as c}from"./chunk-GLD6H5Q5.js";m();c();var ae=h(M());Pr();ze();m();c();var Le=h(M()),Yo=h(it()),qo=h(Ar()),jo=h(Se());m();c();We();var vr=e=>{let t=W(e?.chainId),n=e?.image;return yt(n)?e.image=n[0]:ht(n)&&(e.image=null),{token:e,baseCoin:t}},Ro=vr;m();c();var Ho=h(it());D();Yt();var Lr=(e={},t={},n=!0)=>{let r=(0,Ho.useDispatch)(),i=e.address,p=Ke(),u=vo(),a=oe(),d={actionType:b.ACTION_TYPE.CANCEL,async onClick(){a({all_confirmation:"cancel",trade:"add_token"}),await u(i,!1),await _e(r)},btnText:l("wallet_dapp_connection_btn_reject")},o={actionType:b.ACTION_TYPE.CONFIRM,disabled:!n,async onClick(){try{a({all_confirmation:"confirm",trade:"add_token"});let s=await Ze(t.localType,p),T={...e,contractAddress:i,blockChain:s.shortName,localType:t.localType};await Vt(T),await u(i,!0),await _e(r)}catch(s){K.error(s?.data?.originalError?.msg||l("wallet_extenshion_toast_add_failed"))}}};return[d,o]},Uo=Lr;var Mr=({unapproved:e})=>{let t=(0,Yo.useSelector)(jt),{token:n,baseCoin:r}=Ro(e),[i,p]=(0,Le.useState)(!0),u=Ke();(0,jo.useMount)(async()=>{let d=await Ze(r.localType,u);p(!!d)});let a=Uo(n,r,i);return!n||t!==qt.addToken?Le.default.createElement(qo.Redirect,{to:Ut}):Le.default.createElement(Bo,{token:n,supported:i,buttonGroup:a,networkName:r.chainName})},zo=Mr;m();c();var S=h(M()),$o=h(Se());D();nt();m();c();We();var Vo=h(M());pe();ze();var Gr=({unapproved:e,walletAccount:t,customGasInfo:n={}})=>{let{params:r}=e,{walletId:i}=t,p=W(),{coinId:u}=p,a=eo(u,i)?.coinAmountInt,{gasType:d,isNetworkFeeLoading:o,networkFee:s,getLimit:T}=n,{minGasFee:f}=lo(n),_=po(n),x=(0,Vo.useMemo)(()=>{if(Fe(a))return r;let N=a,I=[];return r.forEach(G=>{N=He(N,s),V(N,0)&&I.push(G)}),I},[a,r,s]),g=o&&ke(T,0),y={level:d||Gt.STANDARD,loading:o,coinId:p?.coinId,networkFee:g?void 0:f,maxNetworkFee:g?void 0:s,estimateFailed:_},F=o||x.length&&x.length===r.length,w=Fe(a)||Ue(a,s);return{isNetworkFeeLoading:o,estimateFailed:_,networkFeeProps:y,canApproveTxs:x,isSufficientGas:w,canApproveAll:F}},Qo=Gr;m();c();var Xo=h(M());D();pe();kr();Sr();br();Fr();Br();nt();ze();var Ko=100,Dr=({unapproved:e,walletAccount:t,isSufficientGas:n,canApproveTxs:r,customGasInfo:i,isNetworkFeeLoading:p})=>{let{id:u}=e,{walletId:a,address:d}=t,o=Qe(a),s=oe(a),{coinId:T}=W(),f=bo(),_=tt(),x=(0,Xo.useCallback)(async()=>{s({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await f({id:u})},[f,s,u]),g={onClick:x,actionType:b.ACTION_TYPE.CANCEL,btnText:l("wallet_dapp_connection_btn_reject")},y=o||p,{gasPrice:F,supportEip1559:w,gasLimitInfo:N={},gasLimit:I,maxFeePerGas:G,maxPriorityFeePerGas:L,networkFee:H}=i,$=co({fromAddr:r[0]?.txParams?.from,walletId:a,localType:at}),ie=async()=>{try{let Y=r.length,se=r[0],{from:q,to:me,value:ce}=se.txParams;if(s({trade:"sendEvmInscriptions",all_confirmation:"confirm"}),!await xe({callback:x,walletId:a}))return;let{data:Ee}=await Jt({checkTypes:[mt.OVERWRITTEN],coinId:T,from:q,to:me,amount:O(ce||0),gasPrice:F}),we=Ee.find(({checkType:de})=>de===mt.OVERWRITTEN)||{},{newNonce:ee,toastType:j,pendingNum:z}=we;if(j===Dt.FAILED){K.error(l("wallet_extension_function_toast_failed_single")),await pt(1500),await f({id:u});return}let De=le(z,Y);if(V(De,Ko)){K.error(l("wallet_extension_function_toast_pending",{TotalNum:De,ExceededNum:Ko}));return}let Tt=[],xt=[];for(let de=0;de<r.length;de++){let Oe=r[de],{txParams:k}=Oe,{from:yr,to:hr}=k;k.nonce=Ft(ue(le(ee,de))),w?(delete Oe.gasPrice,k.maxFeePerGas=ue(G),k.maxPriorityFeePerGas=ue(L),k.type=je.FEE_MARKET):(delete k.maxFeePerGas,delete k.maxPriorityFeePerGas,delete k.type,k.gasPrice=ue(F)),k.gas=ue(I),k.gasLimit=ue(I),k.gasLimitInfo=N,k.gasType=i.gasType;let Ir=zt(Oe.txParams),Ct=await $({params:Ir}),gt=await to(at,Ct),Er={...k,value:O(k.value),gas:I,gasPrice:O(w?k.maxFeePerGas:k.gasPrice),priorityFee:O(w?k.maxPriorityFeePerGas:0),nonce:O(k.nonce),repeatTxType:Lt.CONFIRMING,oldTxHash:"",inscriptionType:1},wr={extJson:JSON.stringify(Er),signedTx:Ct,coinId:T,coinAmount:O(k.value||0),fromAdr:yr,toAdr:hr,serviceCharge:H,txHash:gt,txSource:Ot.DAPP,inputData:k.data,accountId:a,txType:1,walletType:t?.serverWalletType};xt.push(wr),Tt.push({id:Oe.id,txHash:gt})}await Ht(Rt.postSendEvmInscriptions,{txList:xt}),await _({id:u,result:Tt})}catch(Y){K.error(Y.msg||l("wallet_home_toast_network_error")),await pt(1500),await _({id:u,error:"Failed"})}},U={disabled:y,actionType:b.ACTION_TYPE.CONFIRM,onClick:ie};return y?[g,U]:(n||(U={actionType:b.ACTION_TYPE.FILL_UP,txId:u,coinId:T,walletId:a,address:d,receiveOnly:n}),[g,U])},Zo=Dr;m();c();D();var Or=e=>{for(let t=0;t<e.length;t++){let n=e[t],r=n();if(r)return r}return null},Wr=({walletAccount:e,canApproveTxs:t,canApproveAll:n,isSufficientGas:r})=>{let i=Qe(e.walletId),p=()=>i?{type:Q.TYPE.error,message:l("wallet_extension_function_alert_wallet_unsupported")}:null,u=W(),a=Po({baseCoin:u,isSufficientGas:r});return Or([p,a,()=>n?null:{type:Q.TYPE.warn,message:l("wallet_extension_function_alert_available_balance",{gasToken:u.symbol,num:t.length})}])},Jo=Wr;var Rr=({unapproved:e})=>{let{coinId:t}=W(),{txParams:n={}}=e?.params?.[0],{from:r,to:i,data:p,value:u}=n,{walletId:a}=e,d=Io(e),o=oe(a),s=$e(e),[T,f]=(0,S.useState)({}),_=(0,S.useCallback)($=>{f($)},[]),{networkFeeProps:x,canApproveTxs:g,canApproveAll:y,isSufficientGas:F,isNetworkFeeLoading:w}=Qo({unapproved:e,walletAccount:d,customGasInfo:T}),N=Zo({unapproved:e,walletAccount:d,canApproveTxs:g,customGasInfo:T,isSufficientGas:F,isNetworkFeeLoading:w}),I=Jo({walletAccount:d,canApproveTxs:g,canApproveAll:y,isSufficientGas:F}),[G,{setTrue:L,setFalse:H}]=(0,$o.useBoolean)(!1);return S.default.createElement(E.Container,null,S.default.createElement(Xe,{title:l("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),S.default.createElement(X,null,S.default.createElement(Fo,{...s})),S.default.createElement(X,null,S.default.createElement(Je,{onClick:L,...x})),S.default.createElement(X,{bordered:!1},S.default.createElement(Be,{title:l("wallet_extension_network_address_title_walletused"),address:d.address,walletId:d.walletId,onCopyCallback:()=>{o({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),S.default.createElement(Te,{placeholder:!0,offsetBottom:0,borderTop:!0},S.default.createElement(Ce,{...I}),S.default.createElement(b,{buttonGroup:N})),S.default.createElement(uo,{visible:G,coinId:t,address:r,inputData:p,tokenAddress:i,value:O(u),onBack:H,onClose:null,onGasChange:_}))},er=Rr;m();c();var J=h(M());kt();pe();m();c();var mr=h(M()),Me=h(it()),rt=h(Se());D();nt();Yt();m();c();var R=h(M());m();c();Nr();var ye=()=>(0,R.useCallback)(async(t,n)=>{await vt().updateReportTimestamp(t,n)},[]);var Hr=()=>{let e=ye();return(0,R.useCallback)(async n=>{await e(n,"CAN_CONFIRM")},[e])},tr=(e,t)=>{let n=Hr(),r=(0,R.useRef)(!1);(0,R.useEffect)(()=>{!t&&!r.current&&(r.current=!0,n(e))},[e,t,n])},or=()=>{let e=ye();return(0,R.useCallback)(async n=>{await e(n,"CLICK_CONFIRM")},[e])},rr=()=>{let e=ye();return(0,R.useCallback)(async t=>{await e(t,"SIGN")},[e])},nr=()=>{let e=ye();return(0,R.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},ar=()=>{let e=ye();return(0,R.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},ir=()=>{let e=ye();return(0,R.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};m();c();We();ze();var sr=({isMev:e,mevInfo:t,unapproved:n,modifiedData:r,customGasInfo:i,updateData:p,gasReturnActivity:u})=>{let{nonce:a,updateGasInfo:d}=p,o=It(n);o.txParams=o.params,delete o.params;let{supportEip1559:s,gasLimitInfo:T={},gasLimit:f,maxFeePerGas:_,gasPrice:x,maxPriorityFeePerGas:g}=i;if(r&&o.txParams&&(o.txParams.data=r),o.txParams.supportEip1559=s,s?(delete o?.txParams.gasPrice,o.txParams.maxFeePerGas=Z(_),o.txParams.maxPriorityFeePerGas=Z(g),o.txParams.type=je.FEE_MARKET):(delete o?.txParams.maxFeePerGas,delete o?.txParams.maxPriorityFeePerGas,delete o?.txParams.type,o.txParams.gasPrice=Z(x)),d){let y=Object.entries(d).reduce((F,[w,N])=>(F[w]=Z(N),F),{});o.txParams={...o.txParams,...y}}return o.txParams.gas=Z(f),o.txParams.gasLimit=Z(f),o.txParams.nonce=Z(a),o.txParams.chainId=Z(o.chainId),o.gasLimitInfo=T||{},o.mev=e?t.name:"",o.activityId=u?.activityId,o.gasType=i.gasType,o?.txParams?.data||(o.isBaseCoinTransfer=!0),o};var Ur=(e,t)=>{let n=(0,Me.useSelector)(i=>ao(i,e)),r=(0,Me.useSelector)(i=>no(i,e)??t??!1);return{mevInfo:n,isMev:r}},Yr=({unapproved:e})=>{let{id:t,params:n={},extParams:r={},chainId:i}=e,p=(0,Me.useDispatch)(),u=W(i),a=$e(e),{from:d,to:o,value:s}=n,{coinId:T,chainName:f}=u,{walletId:_}=ot(e.origin,d)||{},{isMev:x,mevInfo:g}=Ur(t,r?.isMev),y=or(),F=rr(),w=nr(),N=ar(),I=ir(),G=(0,rt.useMemoizedFn)((se,q)=>{p(lt.setIsMev({isMev:se,id:t})),p(lt.setMevInfo({mevInfo:q,id:t}))});tr();let L=oe(_),H=fo({walletId:_,fromAddr:d,coinId:T}),$=(0,rt.useMemoizedFn)(async()=>{L({trade:"contract_interaction",all_confirmation:"cancel",network:f,dapp_url:e.origin}),oo(),await p(io(t)),await _e(p)}),ie=_o(),U=tt(),Y=(0,rt.useMemoizedFn)(async({modifiedData:se,customGasInfo:q,gasReturnActivity:me,reportGasReturnActivityDataInConfirm:ce})=>{let{gasPrice:Ie}=q;if(y(t),await xe({callback:$,walletId:_})){L({all_confirmation:"confirm",trade:"contract_interaction",network:f,dapp_url:e.origin});let we=await ie({to:o,from:d,coinId:T,gasPrice:Ie,userGasInfo:q,amount:O(s||0),baseCoinAmountUse:O(s||0)});ce();try{let ee=sr({isMev:x,mevInfo:g,unapproved:e,updateData:we,modifiedData:se,customGasInfo:q,gasReturnActivity:me});F(t);let j=await H(ee.txParams);w(t);let z=await p(so(t,{...ee,signedTx:j,walletId:_,coinId:T}));if(N(t),ut(z?.code))me?.clear(),K.error({title:z?.msg||l("wallet_home_toast_network_error"),duration:3});else{let{serverTxId:De}=z||{};Kt({tx_id:De}),I(t)}}catch(ee){let j=ee?.data?.originalError;ut(j?.code)?(me?.clear(),K.error({title:j?.msg||l("wallet_home_toast_network_error"),duration:3})):U({id:t,error:j?.msg||"Failed"})}await _e(p)}});return mr.default.createElement(ho,{needMev:!0,coinId:T,openMev:x,onConfirmReplace:!0,dappInfo:a,txParams:n,txType:e?.type,walletId:_,isShowBlockSwapMevTooltip:r?.isShowBlockSwapMevTooltip,onMevChange:G,onCancel:$,onConfirm:Y})},ft=Yr;m();c();var A=h(M());D();pe();m();c();var fe=h(M()),dt=h(bt());We();D();pe();m();c();var he={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function qr({nonce:e,suggestedNonce:t,setNonce:n}){let r=p=>{n(p)},i;return e&&(V(e,t)?i=l("developer_mode_send_tooltip_higher",{num:t}):Et(e,t)&&(i=l("developer_mode_send_tooltip_lower",{num:t}))),fe.default.createElement(No.Row,{className:he.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},fe.default.createElement("div",{className:he.content},fe.default.createElement("div",{className:he.inner},fe.default.createElement(st.Number,{innerClassName:(0,dt.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:l("developer_mode_send_maintitle_nonce"),placeholder:`${Fe(t)?"":Pe.thousandFormat(t)}`,size:st.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(r(le(t,1)),!1):!0,onSub:()=>!e&&V(t,0)?(r(He(t-1)),!1):!0,onChange:r})),i&&fe.default.createElement("div",{className:he.warningText},fe.default.createElement(Ye,{className:(0,dt.default)(he.icon,"okx-wallet-plugin-warning-circle")}),i)))}var cr=qr;m();c();var re=h(M());D();Nt();pe();m();c();var C=h(M()),Ge=h(Se()),lr=h(bt());D();m();c();var B={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var jr=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},zr=({txTypeInfo:e,approve:t,onUpdateAuthAmount:n})=>{let{tokenInfo:r,amount:i}=t||{},{decimals:p,symbol:u}=r,a=ve(u,12),[d,o]=(0,C.useState)(!1),[s,{toggle:T,setFalse:f,setTrue:_}]=(0,Ge.useBoolean)(!1),[x,g]=(0,C.useState)(0),y=(0,C.useMemo)(()=>s?{type:B.danger,text:l("wallet_extension_approve_alert_high_risk_unlimited")}:!s&&Pe.eq(x||0,0)?{type:B.info,text:l("wallet_extension_approve_cannot_zero")}:null,[s,x]),F=(0,Ge.useMemoizedFn)((I=i)=>{Ve(I)?(g(0),_()):(g(Co(I,p)),f()),o(!0)}),w=(0,C.useMemo)(()=>s?!1:x===""?!0:!Pe.gt(`${x||0}`,0),[s,x]),N=(0,Ge.useMemoizedFn)(()=>{o(!1),n(s?Wt:x)});return C.default.createElement(E.Box,{className:B.root},C.default.createElement(E.Box,{className:B.icon,onClick:()=>{F()}},C.default.createElement(Ye,{className:"okx-wallet-plugin-draw-20"})),C.default.createElement(St.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:d},C.default.createElement(E.Box,{className:B.editApproveAmountModal},C.default.createElement(E.Box,{className:B.content},C.default.createElement(ge,{txTypeInfo:e,bordered:!1}),C.default.createElement(E.Box,{className:B.editArea},s?C.default.createElement(ct.Text,{className:B.unlimitedText},l("wallet_extension_transfer_title_unlimited_amount",{token:C.default.createElement(ct.Text,{className:B.unlimitedSymbol},a)})):C.default.createElement(mo,{symbol:a,autoSize:jr,placeholder:"0",decimals:p,value:x,onChange:g,style:{fontWeight:700,height:"42px"},symbolClassName:B.symbolClassName})),C.default.createElement(E.Box,{className:B.quickHandler},C.default.createElement(E.Box,{onClick:T,className:B.unlimited},C.default.createElement(E.Box,{className:B.text},l("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),C.default.createElement(qe,{checked:s}))),!!y&&C.default.createElement(E.Box,{className:(0,lr.default)(B.authQuantityWarnTip,y.type)},y.text)),C.default.createElement(E.Box,{className:B.approveTip},l("wallet_extension_approve_desc_dapp_right")),C.default.createElement(Te,{affixStyle:{position:"none"},placeholder:!1,className:B.footerActions},C.default.createElement(be,{block:!0,disabled:w,category:be.CATEGORY.fill,type:be.TYPE.primary,size:be.SIZE.lg,onClick:N},l("wallet_extension_approve_btn_amount_confirmation"))))))},pr=zr;var Vr=({onUpdateAuthAmount:e,dappInfo:t,loading:n,approveToken:r,title:i})=>{let{isApprove:p,isRevoke:u,address:a,customApproveAmount:d=0,symbol:o=Ne,decimals:s=0,icon:T=At}=r,f=Re(d,wt.pow(10,s)),_=Eo(o,12);if(n)return re.default.createElement(ko,null);if(p){let x={title:{text:i},subTitle:t.host};if(u){let y={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},...x};return re.default.createElement(ge,{txTypeInfo:{baseInfo:y}},re.default.createElement(go,{imageUrl:T,text:_}))}let g={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},...x};return re.default.createElement(ge,{txTypeInfo:{baseInfo:g}},re.default.createElement(yo,{isRpcMode:!0,approveInfoList:[{amount:f,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:a,decimals:s,symbol:o}}],renderEditApproveAmount:y=>re.default.createElement(pr,{txTypeInfo:{baseInfo:g},approve:y,onUpdateAuthAmount:e})}))}return re.default.createElement(ge,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:l("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},ur=Vr;m();c();var fr=h(M());D();var Qr=({chainGasLoadFailed:e,isSufficientBalance:t,transaction:n,actions:r,modifiedDataError:i,walletInfo:p,params:u,rpcInfo:a})=>{let{chain:d,nonce:o,loading:s,gas:T}=n,{sign:f,cancel:_}=r,{chainGasLoading:x}=T,g=(0,fr.useCallback)(async()=>{await _()},[_]),y={actionType:b.ACTION_TYPE.CANCEL,onClick:g},F=async()=>{try{if(!await xe({walletId:p?.walletId,callback:_}))return}catch(L){console.error(L)}let G=L=>{let H=Xt[p?.keyringIdentityType];ro({tx_source:"dapp",from_addr:u.from,to_addr:u.to,main_token_symbol:a?.symbol,token_symbol:L?.extraParams?.coinSymbol||"",contract_address:u?.to,volume_token:u?.value,volume_usdt:"",tx_hash_unique:L?.txHash,wallet_type:H,chain_id:parseInt(d.chainId,16)})};f(p?.walletId,G,a)},w=()=>{globalThis.open(a.faucetUrl)},I={disabled:x||e||!t&&!a?.faucetUrl||o.pending||s.sign||s.token||i,actionType:b.ACTION_TYPE.CONFIRM,onClick:F};return!t&&a?.faucetUrl&&(I.actionType=b.ACTION_TYPE.FILL_UP,I.onClick=w,I.btnText=l("wallet_extension_transfer_btn_via_faucet")),[y,I]},dr=Qr;m();c();D();Nt();pe();var Kr=({customGasInfo:e,chainGasLoadFailed:t,modifiedDataError:n,isSufficientBalance:r,isRevokeTx:i,transaction:p,loading:u})=>{let{auth:a,chain:d}=p,o=ve(a.name||Ne),s=ve(a.symbol||Ne),T=()=>e?.baseFeePerGas==="0"?{type:Q.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,f=()=>n?{}:null,_=()=>r?null:{type:Q.TYPE.warn,message:l("wallet_extension_popup_insufficient_network_fee",{token:d.symbol})},x=()=>t?{type:Ce.TIP_TYPE.FEE_ERROR}:null,g=()=>i?{type:Q.TYPE.info,message:l("extension_revoke_approval_alert_evoke_authorization",{contract:o,asset:s})}:null,y=()=>Ve(a.customApproveAmount)?{type:Q.TYPE.warn,message:l("wallet_extension_popup_unlimited_transfer",{contract:o,asset:s})}:V(a.customApproveAmount,0)?{type:Q.TYPE.warn,message:l("extension_approve_alert_authorized_tips",{contract:o,asset:s})}:null;if(u)return null;let F=[f,_,g,y,x,T];for(let w=0;w<F.length;w++){let N=F[w],I=N();if(I)return I}return null},_r=Kr;var _t=({unapproved:e,rpcInfo:t})=>{let{origin:n,params:r}=e,{from:i,value:p,to:u}=r,[a,d]=(0,A.useState)(""),[o,s]=(0,A.useState)(!1),T=xo(a),f=ot(n,i),[_,x]=So({...r,...e,walletId:f?.walletId},t),{title:g,auth:y,meta:F,nonce:w,gas:N,loading:I,data:G}=_,{setNonce:L,setAuthAmount:H}=x,{chainGasInfo:$,customGasInfo:ie,chainGasLoading:U,chainGasLoadFailed:Y,stopPollingGasPrice:se,updateCustomGasInfo:q,chainGasLimitLoadFailed:me}=N,ce=Zt(void 0,void 0,t),Ie=Go(ie);Ao(t),Do(i,t),Wo();let Ee=Ue(ce?.balance,le(Ie,Pt(p||0))),we=_r({customGasInfo:ie,chainGasLoadFailed:Y,isSufficientBalance:Ee,isRevokeTx:y.isRevoke,modifiedDataError:T,transaction:_,loading:U}),ee=dr({chainGasLoadFailed:Y,isSufficientBalance:Ee,transaction:_,actions:x,modifiedDataError:T,walletInfo:f,params:r,rpcInfo:t}),j=z=>{q(z),s(!1)};return A.default.createElement(E.Container,null,A.default.createElement(ur,{title:g,confirmBuryPointFn:()=>{},onUpdateAuthAmount:z=>{H(z)},dappInfo:F.originInfo,loading:I.token,approveToken:y}),A.default.createElement(X,null,A.default.createElement(Je,{onClick:()=>{s(!0)},injectCoin:ce,loading:U,estimateFailed:Y,networkFee:U?void 0:Re(Ie,10**ce?.decimals)})),A.default.createElement(X,null,A.default.createElement(Be,{title:l("wallet_extension_network_address_title_walletused"),address:f.address,walletId:f.walletId}),!!u&&A.default.createElement(Be,{title:l("wallet_extension_popup_text_interact_with"),address:u})),A.default.createElement(cr,{nonce:w.custom,suggestedNonce:w.suggested,setNonce:L}),G?A.default.createElement(X,{bordered:!1},A.default.createElement(wo,{data:G,copyable:{hideDesc:!0}})):A.default.createElement(X,{bordered:!1},A.default.createElement(To,{value:a,error:T,onChange:d})),A.default.createElement(Te,{placeholder:!0,offsetBottom:0,borderTop:!0},!T&&A.default.createElement(Ce,{...we}),A.default.createElement(b,{buttonGroup:ee})),o?A.default.createElement(Oo,{onBack:()=>{s(!1)},rpcInfo:t,chainGasInfo:$,customGasInfo:ie,updateCustomGasInfo:j,stopPollingGasPrice:se,chainGasLimitLoadFailed:me}):null)};m();c();var v=h(M()),xr=h(Se());D();kt();m();c();var ne={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var Tr={uniqueId:Ae,rpcUrl:l("wallet_extension_rpc_title_official")},Xr=({targetRpcChain:e,targetMainChain:t,handleSelect:n})=>{let[r,i]=(0,v.useState)({}),p=[...e],u=!!t.length;u&&p.unshift(Tr);let[a,d]=(0,v.useState)(!1),{updateRpcNetwork:o}=et(),s=(0,v.useCallback)(async()=>{try{d(!0);let f=e.find(_=>!!_.isDefaultRpc);if(r.isDefaultRpc||r.uniqueId===Ae&&!f)return;f&&await o({...f,isDefaultRpc:!1}),await o({...r,isDefaultRpc:!0})}catch(f){console.log(f)}finally{d(!1)}},[r,e,o]),T=(0,v.useCallback)(async()=>{await s(),n(r)},[r,n,s]);return(0,xr.useMount)(()=>{let f=e.find(_=>_.isDefaultRpc);f?i(f):u&&i(Tr)}),v.default.createElement(E.FlexBox,{className:ne.root,direction:E.DIRECTION.vertical},v.default.createElement(Xe,{backable:!1,closeable:!1,title:l("wallet_extension_rpc_title_select_rpc")}),v.default.createElement(E.Box,{className:ne.main},v.default.createElement(E.Box,{className:ne.tips},l("wallet_extension_rpc_desc_select_rpc_current")),v.default.createElement(E.Box,{className:ne.list},p.map(f=>v.default.createElement(E.Box,{className:ne.item,onClick:()=>{i(f)}},v.default.createElement(Bt,{ellipsis:!0,className:ne.title},f.rpcUrl),v.default.createElement(qe.Circle,{checked:f.uniqueId===r.uniqueId}))))),v.default.createElement(E.Box,{className:ne.footer},v.default.createElement(b,{buttonGroup:[{loading:a,disabled:!r.uniqueId,actionType:b.ACTION_TYPE.CONFIRM,onClick:T}]})))},Cr=Xr;var Zr=e=>{let{unapproved:t}=e,{rpcNetworks:n,status:r}=et(),i=$t({appBaseChain:"ethereum"})||[],p=i.filter(o=>ke(o.realChainIdHex,t.chainId)),u=n.filter(o=>ke(o.chainId,t.chainId)),[a,d]=(0,J.useState)(null);return r==="loading"||!i?.length?J.default.createElement(Qt,null):p.length+u.length>1?a?a.uniqueId===Ae?J.default.createElement(ft,{...e}):J.default.createElement(_t,{...e,rpcInfo:a}):J.default.createElement(Cr,{networkType:t.networkType,targetRpcChain:u,targetMainChain:p,handleSelect:d}):p.length?J.default.createElement(ft,{...e}):J.default.createElement(_t,{...e,rpcInfo:u[0]})},gr=Zr;var Hm=(0,ae.memo)(({unapproved:e})=>{switch(e.method){case Mt.SEND_EVM_INSCRIPTIONS:return ae.default.createElement(er,{unapproved:e});default:break}switch(e.type){case te.ETH_SIGN:case te.PERSONAL_SIGN:case te.ETH_SIGN_TYPED_DATA:case te.ETH_GET_ENCRYPTION_PUBLIC_KEY:case te.ETH_DECRYPT:return ae.default.createElement(Lo,{unapproved:e});case te.WATCH_ASSET:return ae.default.createElement(zo,{unapproved:e});case te.ADD_ETHEREUM_CHAIN:return ae.default.createElement(Mo,{unapproved:e});default:return ae.default.createElement(gr,{unapproved:e})}});export{Hm as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Ethereum-J43ANEXM.js.map
