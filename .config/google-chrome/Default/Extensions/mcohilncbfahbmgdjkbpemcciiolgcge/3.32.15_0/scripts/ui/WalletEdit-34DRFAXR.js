import{a as k,b as se,d as H}from"./chunk-7QPQTXCW.js";import{a as z}from"./chunk-PK2CDXEP.js";import"./chunk-RCR6NTPG.js";import{e as te,w as le,x as ne,y as me}from"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import{f as oe}from"./chunk-HXUMX2S7.js";import"./chunk-QKXA7YNE.js";import{a as ie}from"./chunk-PAER4Z2U.js";import{a as ae}from"./chunk-M2F2X65U.js";import"./chunk-TBLUUKKO.js";import{_ as R,aa as ee,ba as re}from"./chunk-S5DGV5WL.js";import{b as E}from"./chunk-AOXUSYRH.js";import{q as S}from"./chunk-WKBC6JL3.js";import"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import"./chunk-VPDRXROE.js";import"./chunk-JLIPSIRU.js";import{a as K}from"./chunk-CIDV5VJQ.js";import{a as xe}from"./chunk-VX55KNI4.js";import"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import"./chunk-VGT27A4M.js";import"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import"./chunk-OG46YTNN.js";import{c as n}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import"./chunk-CYOQISC6.js";import"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{Tc as D,gd as X}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{H as O,u as F}from"./chunk-LDKM7IQF.js";import{f as Z,o as J,pa as Q}from"./chunk-6O63U2D6.js";import{M as $,x as I}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{c as q,ca as M}from"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import{a as W}from"./chunk-O337TVCZ.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-LCKQ7YKT.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as L,m as t,o as l}from"./chunk-GLD6H5Q5.js";t();l();var w=L(W()),Ne=L(xe());$();t();l();var V=L(W());$();var De=({isLoading:o,onDone:m})=>V.default.createElement(ae.FooterActions,{placeholder:!0},V.default.createElement(M,{onClick:m,category:M.CATEGORY.fill,type:M.TYPE.primary,size:M.SIZE.lg,block:!0,disabled:o},I("wallet_manage_btn_edit_done"))),ce=De;t();l();var r=L(W()),v=L(q());X();t();l();var G=L(W()),ge=L(q());t();l();var A={handler:"_handler_3jcug_1",disabled:"_disabled_3jcug_4",keyring:"_keyring_3jcug_7",wallet:"_wallet_3jcug_11",icon:"_icon_3jcug_16",noHandler:"_noHandler_3jcug_23"};var he=({type:o,canDrag:m,listeners:c,disabled:h,getHandlerRef:N})=>m?G.default.createElement(n.Box,{ref:N,...c,className:(0,ge.default)(A.handler,A[o],{[A.disabled]:h})},G.default.createElement(E.IconButton,{className:A.icon,icon:"okx-wallet-plugin-hamburger"})):G.default.createElement(n.Box,{ref:N,...c,className:A.noHandler}),P=he;t();l();var i=L(W()),pe=L(q());Q();X();t();l();var x={item:"_item_1e2ax_1",dragging:"_dragging_1e2ax_8",children:"_children_1e2ax_12",wrapper:"_wrapper_1e2ax_15",wallet:"_wallet_1e2ax_19",canDrag:"_canDrag_1e2ax_22",delete:"_delete_1e2ax_25",avatar:"_avatar_1e2ax_33",name:"_name_1e2ax_37",draw:"_draw_1e2ax_43",text:"_text_1e2ax_46",more:"_more_1e2ax_60"};var we=({keyringIdentity:o,editIdentityName:m,onDragWalletStart:c,onDragWalletEnd:h,editKeyringIdentities:N})=>{let g=o?.walletIdentities||[],f=(0,i.useCallback)(()=>{c(o.keyringId)},[c,o]),s=(0,i.useCallback)(a=>{let _=J(N),T=_.find(({keyringId:B})=>B===o.keyringId);T.walletIdentities=a,h(_)},[N,o,h]),p=H(),d=(0,i.useMemo)(()=>o.keyringIdentityType!==D.MNEMONIC&&o.keyringIdentityType!==D.TON_MNEMONIC&&o.keyringIdentityType!==D.MPC,[o]),y=g.length>1;return i.default.createElement(F.Sortable,{uniqueKey:"walletId",itemClassName:x.item,onDragStart:f,itemChildrenClassName:x.children,itemDraggingClassName:x.dragging,itemWrapperClassName:x.wrapper,onDragEnd:s,dataSource:g,withOverlay:!1,renderHandler:({getHandlerRef:a,listeners:_})=>i.default.createElement(P,{type:"wallet",canDrag:y,listeners:_,getHandlerRef:a})},g.map(a=>i.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:(0,pe.default)(x.wallet,{[x.canDrag]:y}),key:a.walletId},d?i.default.createElement(n.Box,{className:x.delete},i.default.createElement(E,{className:"okx-wallet-plugin-delete",onClick:()=>p({walletId:a.walletId,keyringType:o.keyringIdentityType})})):null,i.default.createElement(z,{size:z.SIZE.sm,className:x.avatar,walletIdentity:a}),i.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:x.name,onClick:()=>{m({type:k.WALLETACCOUNT,identity:a,initialName:a.walletName,otherNames:g.map(({walletName:_,walletId:T})=>a.keyringId===T?"":_).filter(Boolean)})}},i.default.createElement(S.Text,{ellipsis:!0,className:x.text},a.walletName),i.default.createElement(n.Box,{className:x.draw},i.default.createElement(E,{className:"okx-wallet-plugin-draw"}))),i.default.createElement(K,{className:x.more,to:`${re}?walletId=${a?.walletId}`},i.default.createElement(E.IconButton,{icon:"okx-wallet-plugin-more"})))))},de=we;t();l();var u={item:"_item_1chg9_1",children:"_children_1chg9_8",dragging:"_dragging_1chg9_11",wrap:"_wrap_1chg9_15",disabled:"_disabled_1chg9_22",showBottomLine:"_showBottomLine_1chg9_25",keyring:"_keyring_1chg9_35",canDrag:"_canDrag_1chg9_38",delete:"_delete_1chg9_41",name:"_name_1chg9_49",canEdit:"_canEdit_1chg9_53",draw:"_draw_1chg9_56",text:"_text_1chg9_59",more:"_more_1chg9_74"};var ye=({editIdentityName:o,editKeyringIdentities:m,setEditKeyringIdentities:c})=>{let h=H(),N=(0,r.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||e===D.MPC||e===D.TON_MNEMONIC,[]),g=(0,r.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||oe(e)||e===D.MPC||e===D.TON_MNEMONIC,[]),[f,s]=(0,r.useState)(""),p=(0,r.useCallback)(({id:e})=>{s(e)},[]),d=(0,r.useCallback)(e=>{s(""),c(e)},[c]),[y,a]=(0,r.useState)(""),_=(0,r.useCallback)(e=>{a(e)},[]),T=(0,r.useCallback)(e=>{a(""),c(e)},[c]),B=m.length>1;return r.default.createElement(F.Sortable,{uniqueKey:"keyringId",itemClassName:u.item,itemChildrenClassName:u.children,itemDraggingClassName:u.dragging,onDragStart:p,onDragEnd:d,dataSource:m,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:b})=>r.default.createElement(P,{type:"keyring",canDrag:B,listeners:b,disabled:y,getHandlerRef:e})},m.map((e,b)=>r.default.createElement(n.Box,{className:(0,v.default)(u.wrap,{[u.disabled]:y&&y!==e.keyringId,[u.showBottomLine]:b!==m.length-1}),key:e.keyringId},r.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:(0,v.default)(u.keyring,{[u.canDrag]:B})},N(e)?r.default.createElement(n.Box,{className:u.delete},r.default.createElement(E,{icon:"okx-wallet-plugin-delete",onClick:()=>h({keyringId:e.keyringId,keyringType:e.keyringIdentityType})})):null,r.default.createElement(n.FlexBox,{align:n.ALIGN.center,className:(0,v.default)(u.name,{[u.canEdit]:g(e)}),onClick:()=>{g(e)&&o({type:k.WALLET,identity:e,initialName:e.keyringName,otherNames:m.map(({keyringName:j,keyringId:Y})=>e.keyringId===Y?"":j).filter(Boolean)})}},r.default.createElement(S.Text,{ellipsis:!0,className:u.text},e.keyringName),g(e)?r.default.createElement(n.Box,{className:u.draw},r.default.createElement(E,{icon:"okx-wallet-plugin-draw"})):null),[D.PRIVATE_KEY].includes(e.keyringIdentityType)?null:r.default.createElement(K,{className:u.more,to:`${ee}?keyringId=${e?.keyringId}`},r.default.createElement(E.IconButton,{icon:"okx-wallet-plugin-more"}))),f===e.keyringId?null:r.default.createElement(de,{keyringIdentity:e,editIdentityName:o,onDragWalletStart:_,onDragWalletEnd:T,editKeyringIdentities:m}))))},_e=ye;t();l();var U=L(W());Q();$();var Le=o=>{let m=se(),c=le(),h=ne(),N=(0,U.useMemo)(()=>({async[k.WALLET](g,f){let s=g?.keyringId;if(s)try{await c(s,f),o(p=>p.map(d=>d.keyringId===s?{...d,keyringName:f}:d)),O.success(I("wallet_edit_wallet_toast_renamed_success"))}catch(p){console.log(p)}},async[k.WALLETACCOUNT](g,f){let s=g?.walletId;if(s)try{await h(s,f),o(p=>p.map(d=>{let y=d?.walletIdentities??[];return{...d,walletIdentities:y.map(a=>a.walletId===s?{...a,walletName:f}:a)}})),O.success(I("wallet_edit_wallet_toast_renamed_success"))}catch(p){console.log(p)}}}),[h,c,o]);return(0,U.useCallback)(({identity:g,...f})=>{m(f).then(s=>{let{type:p}=f,d=N[p];d&&d(g,s)}).catch(Z)},[N,m])},ue=Le;t();l();var fe={root:"_root_nqk5m_1",headerDone:"_headerDone_nqk5m_1"};var Ee=()=>{let o=te(),[m,c]=(0,w.useState)(o),h=ue(c),[N,g]=(0,w.useState)(!1),f=_=>{c(_),g(!0)},s=(0,Ne.useHistory)(),p=me(),[d,y]=(0,w.useState)(!1),a=(0,w.useCallback)(async()=>{if(N){y(!0);try{let _={},T={};m.forEach(({keyringId:B,walletIdentities:e},b)=>{_[B]=b,e.forEach(({walletId:j},Y)=>{T[j]=Y})}),await p(_,T)}catch(_){console.log(_),O.error({title:I("extension_wallet_toast_sorting_failure")})}}s.push(`${R}?from=seedVerify`)},[s,p,m,N]);return w.default.createElement(n.Container,{className:fe.root},w.default.createElement(ie,{backable:{icon:"okds-close"},bordered:!1,closeable:!1}),w.default.createElement(_e,{editIdentityName:h,editKeyringIdentities:m,setEditKeyringIdentities:f}),w.default.createElement(ce,{isLoading:d,onDone:a}))},ao=Ee;export{ao as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletEdit-34DRFAXR.js.map
