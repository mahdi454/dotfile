import{a as ut}from"./chunk-SZX7JZFP.js";import{b as lt,c as ft,d as pt}from"./chunk-7OLZATXG.js";import{d as rt}from"./chunk-AHU7BCIL.js";import"./chunk-C6JR2GZU.js";import"./chunk-EZ5WRJOA.js";import"./chunk-WMPWBUW7.js";import{b as at,i as ct,k as nt,m as it,r as mt,s as st}from"./chunk-GL5KZF23.js";import"./chunk-WXXVKHTN.js";import"./chunk-O4KI5ERK.js";import"./chunk-6D2WFU2O.js";import"./chunk-U2UKW4WG.js";import{a as ot}from"./chunk-445ZV7VL.js";import"./chunk-YQGNRWCJ.js";import"./chunk-X4Z4JMVV.js";import"./chunk-RMSE4KTO.js";import"./chunk-W7APXTAD.js";import"./chunk-A4CVLGFS.js";import"./chunk-ALNQKIUN.js";import"./chunk-ZGE3YU4L.js";import"./chunk-JDZSGQWQ.js";import"./chunk-XY66VBX7.js";import"./chunk-GZFI5G46.js";import{a as me,p as tt}from"./chunk-UAHUXCQX.js";import"./chunk-73OZ5IYN.js";import{a as M}from"./chunk-BWRHBLYR.js";import"./chunk-XTOYI7P4.js";import"./chunk-KSCP4BJT.js";import"./chunk-3MIEWVTZ.js";import{a as je,c as Re}from"./chunk-J2H2J7IS.js";import"./chunk-SJIEUX3S.js";import{a as et}from"./chunk-L7LFNDLE.js";import"./chunk-STMKIE2Z.js";import"./chunk-GUQJR5VF.js";import"./chunk-MI6YHDAD.js";import"./chunk-ZAW6Z544.js";import"./chunk-SVAMZON6.js";import{a as Qe}from"./chunk-MF4732CU.js";import"./chunk-F52H34ZH.js";import"./chunk-3RNOIYOK.js";import"./chunk-OQFQ7WFP.js";import"./chunk-YW7TPMAR.js";import"./chunk-PGKED42N.js";import"./chunk-KSAOBFIR.js";import"./chunk-OJURW5TU.js";import"./chunk-PMGQLREC.js";import"./chunk-W6OF57RJ.js";import"./chunk-HRZ4SZVQ.js";import"./chunk-ECPXLKIL.js";import"./chunk-RK4XZYBE.js";import{a as Ke}from"./chunk-ZI4ZHHA3.js";import"./chunk-KWBWAA7R.js";import"./chunk-GJCTNUAU.js";import"./chunk-OCCQLMQL.js";import"./chunk-3DI6NEAD.js";import"./chunk-RIWLOEHK.js";import"./chunk-TRBDC433.js";import"./chunk-5KSRM7B2.js";import"./chunk-PPHSAQ52.js";import"./chunk-JUOUD4EO.js";import{d as D}from"./chunk-4W35J5OQ.js";import"./chunk-GPJC633M.js";import{c as Je}from"./chunk-YC6W5MPL.js";import"./chunk-ABBYZM2I.js";import"./chunk-KNUMOXQD.js";import"./chunk-JJ3ARLVE.js";import"./chunk-ZLD5XTE5.js";import"./chunk-2VRILCVI.js";import"./chunk-IRMGOW5H.js";import"./chunk-CQ64XZTP.js";import"./chunk-UXLFUD7T.js";import"./chunk-2HEOW3XO.js";import"./chunk-DLRFA5AU.js";import"./chunk-OC3IFNJW.js";import"./chunk-UI7PAU35.js";import"./chunk-SMZ64QW3.js";import"./chunk-DQTTI4XL.js";import"./chunk-FF6KJRSH.js";import"./chunk-CQ7YBDUS.js";import{a as Xe}from"./chunk-GSYNHSX4.js";import"./chunk-Y6SGFHFT.js";import"./chunk-V4NJDTLC.js";import"./chunk-OFKAKQXT.js";import{f as $e}from"./chunk-IQUFOLSA.js";import"./chunk-KA5XDNKC.js";import"./chunk-HXUMX2S7.js";import"./chunk-QKXA7YNE.js";import{a as ie}from"./chunk-PAER4Z2U.js";import"./chunk-LBVWUYQX.js";import{a as ne}from"./chunk-M2F2X65U.js";import"./chunk-ZYEEMVIP.js";import"./chunk-BOOOUD52.js";import"./chunk-TBLUUKKO.js";import{a as ce}from"./chunk-S5DGV5WL.js";import{b as Z}from"./chunk-AOXUSYRH.js";import{q as s}from"./chunk-WKBC6JL3.js";import"./chunk-3EO5SKIF.js";import"./chunk-LMIOM5QK.js";import{X as Ce}from"./chunk-VPDRXROE.js";import{m as _e,p as ve,r as Oe,w as ro}from"./chunk-JLIPSIRU.js";import"./chunk-CIDV5VJQ.js";import{a as De}from"./chunk-VX55KNI4.js";import"./chunk-4TYAYDA2.js";import"./chunk-LDX3S2CG.js";import"./chunk-TS5DNQFS.js";import"./chunk-656GFN7J.js";import{b as Ye,d as Ge,n as Ze,ta as Me}from"./chunk-VGT27A4M.js";import{d as G,f as ae}from"./chunk-R4G6BEPF.js";import"./chunk-S3MY46XE.js";import"./chunk-2333N6PK.js";import"./chunk-AYCAVTPT.js";import"./chunk-OG46YTNN.js";import{c as T}from"./chunk-RXNDJ7P3.js";import"./chunk-YM7II27E.js";import"./chunk-CYOQISC6.js";import"./chunk-TKYTZF2K.js";import"./chunk-RY27BWZR.js";import"./chunk-WIWWLEBZ.js";import{Cc as ke,E as be,Ha as Fe,Jb as Be,Kc as oo,Mc as He,Pc as de,Rc as Ve,Uc as qe,Wa as Ee,X as eo,Xb as X,Yb as q,Zb as to,gd as ao,hb as Se,ib as Ne,jc as Le,tb as ye}from"./chunk-YT2MPR4E.js";import"./chunk-R4ZXRZL6.js";import{D as Y,G as xe,a as Ue,o as re}from"./chunk-LDKM7IQF.js";import{F as Pe,pa as Rt}from"./chunk-6O63U2D6.js";import{M as v,l as ue,x as d}from"./chunk-RIOWPXBZ.js";import"./chunk-BAWLRI3I.js";import"./chunk-USKTQDCY.js";import"./chunk-B2L2MSSC.js";import"./chunk-OIIWKMG6.js";import{c as ze,ca as b}from"./chunk-OSCGYMLH.js";import"./chunk-ADWO6K2C.js";import{a as N}from"./chunk-O337TVCZ.js";import"./chunk-EJP3AYQB.js";import"./chunk-QOGOEJFG.js";import"./chunk-TZ33IXYR.js";import"./chunk-BTK364VD.js";import"./chunk-2T657SRL.js";import"./chunk-QJAZEJHH.js";import"./chunk-IMZNFJSN.js";import"./chunk-LCKQ7YKT.js";import"./chunk-WRBXETR5.js";import"./chunk-RBB7LL2V.js";import"./chunk-ZVYHIM2Y.js";import"./chunk-VBARKITZ.js";import"./chunk-NCANHNXF.js";import{f as A,m as i,o as m}from"./chunk-GLD6H5Q5.js";i();m();var C=A(N());v();var Yt=A(De()),se=A(Ce());Be();ae();i();m();var H=A(N()),yt=A(ze());i();m();var x={"retina-border-basic":"_retina-border-basic_t6cnr_1",retinaBorderBasic:"_retina-border-basic_t6cnr_1","wax-create-account-confirm":"_wax-create-account-confirm_t6cnr_29",waxCreateAccountConfirm:"_wax-create-account-confirm_t6cnr_29","wax-create-account-confirm-form":"_wax-create-account-confirm-form_t6cnr_32",waxCreateAccountConfirmForm:"_wax-create-account-confirm-form_t6cnr_32","wax-create-account-confirm-form-select":"_wax-create-account-confirm-form-select_t6cnr_35",waxCreateAccountConfirmFormSelect:"_wax-create-account-confirm-form-select_t6cnr_35","wax-create-account-confirm-form-select-disabled":"_wax-create-account-confirm-form-select-disabled_t6cnr_42",waxCreateAccountConfirmFormSelectDisabled:"_wax-create-account-confirm-form-select-disabled_t6cnr_42","wax-create-account-confirm-form-select-free":"_wax-create-account-confirm-form-select-free_t6cnr_46",waxCreateAccountConfirmFormSelectFree:"_wax-create-account-confirm-form-select-free_t6cnr_46","wax-create-account-confirm-form-select-free-text":"_wax-create-account-confirm-form-select-free-text_t6cnr_49",waxCreateAccountConfirmFormSelectFreeText:"_wax-create-account-confirm-form-select-free-text_t6cnr_49","wax-create-account-confirm-form-select-free-amount":"_wax-create-account-confirm-form-select-free-amount_t6cnr_53",waxCreateAccountConfirmFormSelectFreeAmount:"_wax-create-account-confirm-form-select-free-amount_t6cnr_53","wax-create-account-confirm-form-select-space":"_wax-create-account-confirm-form-select-space_t6cnr_57",waxCreateAccountConfirmFormSelectSpace:"_wax-create-account-confirm-form-select-space_t6cnr_57","wax-create-account-confirm-form-payInfo":"_wax-create-account-confirm-form-payInfo_t6cnr_60",waxCreateAccountConfirmFormPayInfo:"_wax-create-account-confirm-form-payInfo_t6cnr_60","wax-create-account-confirm-form-payInfo-icon":"_wax-create-account-confirm-form-payInfo-icon_t6cnr_65",waxCreateAccountConfirmFormPayInfoIcon:"_wax-create-account-confirm-form-payInfo-icon_t6cnr_65","wax-create-account-confirm-form-payCrypto-dialog":"_wax-create-account-confirm-form-payCrypto-dialog_t6cnr_69",waxCreateAccountConfirmFormPayCryptoDialog:"_wax-create-account-confirm-form-payCrypto-dialog_t6cnr_69","wax-create-account-confirm-form-payCrypto-title":"_wax-create-account-confirm-form-payCrypto-title_t6cnr_72",waxCreateAccountConfirmFormPayCryptoTitle:"_wax-create-account-confirm-form-payCrypto-title_t6cnr_72","wax-create-account-confirm-form-payCrypto-list":"_wax-create-account-confirm-form-payCrypto-list_t6cnr_78",waxCreateAccountConfirmFormPayCryptoList:"_wax-create-account-confirm-form-payCrypto-list_t6cnr_78","wax-create-account-confirm-form-payWallet":"_wax-create-account-confirm-form-payWallet_t6cnr_81",waxCreateAccountConfirmFormPayWallet:"_wax-create-account-confirm-form-payWallet_t6cnr_81","wax-create-account-confirm-form-payWallet-navigator":"_wax-create-account-confirm-form-payWallet-navigator_t6cnr_84",waxCreateAccountConfirmFormPayWalletNavigator:"_wax-create-account-confirm-form-payWallet-navigator_t6cnr_84","wax-create-account-confirm-form-payWallet-wallet-item":"_wax-create-account-confirm-form-payWallet-wallet-item_t6cnr_87",waxCreateAccountConfirmFormPayWalletWalletItem:"_wax-create-account-confirm-form-payWallet-wallet-item_t6cnr_87","wax-create-account-confirm-form-payWallet-accordion":"_wax-create-account-confirm-form-payWallet-accordion_t6cnr_90",waxCreateAccountConfirmFormPayWalletAccordion:"_wax-create-account-confirm-form-payWallet-accordion_t6cnr_90","wax-create-account-confirm-form-payWallet-accordion-header":"_wax-create-account-confirm-form-payWallet-accordion-header_t6cnr_96",waxCreateAccountConfirmFormPayWalletAccordionHeader:"_wax-create-account-confirm-form-payWallet-accordion-header_t6cnr_96","wax-create-account-confirm-form-payWallet-accordion-content":"_wax-create-account-confirm-form-payWallet-accordion-content_t6cnr_130",waxCreateAccountConfirmFormPayWalletAccordionContent:"_wax-create-account-confirm-form-payWallet-accordion-content_t6cnr_130","wax-create-account-confirm-form-payWallet-accordion-icon":"_wax-create-account-confirm-form-payWallet-accordion-icon_t6cnr_133",waxCreateAccountConfirmFormPayWalletAccordionIcon:"_wax-create-account-confirm-form-payWallet-accordion-icon_t6cnr_133","wax-create-account-confirm-form-payWallet-account-item":"_wax-create-account-confirm-form-payWallet-account-item_t6cnr_136",waxCreateAccountConfirmFormPayWalletAccountItem:"_wax-create-account-confirm-form-payWallet-account-item_t6cnr_136","wax-create-account-confirm-form-payWallet-account-item-main":"_wax-create-account-confirm-form-payWallet-account-item-main_t6cnr_140",waxCreateAccountConfirmFormPayWalletAccountItemMain:"_wax-create-account-confirm-form-payWallet-account-item-main_t6cnr_140","wax-create-account-confirm-form-payWallet-tag":"_wax-create-account-confirm-form-payWallet-tag_t6cnr_143",waxCreateAccountConfirmFormPayWalletTag:"_wax-create-account-confirm-form-payWallet-tag_t6cnr_143","wax-create-account-confirm-form-payWallet-selected-icon":"_wax-create-account-confirm-form-payWallet-selected-icon_t6cnr_152",waxCreateAccountConfirmFormPayWalletSelectedIcon:"_wax-create-account-confirm-form-payWallet-selected-icon_t6cnr_152","wax-create-account-confirm-form-payWallet-footer":"_wax-create-account-confirm-form-payWallet-footer_t6cnr_155",waxCreateAccountConfirmFormPayWalletFooter:"_wax-create-account-confirm-form-payWallet-footer_t6cnr_155","wax-create-account-confirm-form-insufficient-error":"_wax-create-account-confirm-form-insufficient-error_t6cnr_158",waxCreateAccountConfirmFormInsufficientError:"_wax-create-account-confirm-form-insufficient-error_t6cnr_158","wax-create-account-confirm-form-fill-up":"_wax-create-account-confirm-form-fill-up_t6cnr_161",waxCreateAccountConfirmFormFillUp:"_wax-create-account-confirm-form-fill-up_t6cnr_161"};var co=({type:t,value:e,disabled:a,placeholder:n,onClick:o})=>H.default.createElement(T.FlexBox,{align:T.ALIGN.center,onClick:()=>{o?.(t)},className:(0,yt.default)(x["wax-create-account-confirm-form-select"],{[x["wax-create-account-confirm-form-select-disabled"]]:a})},H.default.createElement(T.Space,{className:x["wax-create-account-confirm-form-select-space"],space:0,direction:T.DIRECTION.vertical},!e&&n&&H.default.createElement(s.Text,{type:s.TYPE.secondary},n),!!e&&H.default.createElement(s.Text,null,e?.label||e),!!e?.desc&&H.default.createElement(s.Text,{size:s.SIZE.xs,type:s.TYPE.secondary},e?.desc||e)),!a&&H.default.createElement(Z,{icon:"okds-arrow-chevron-right-centered-md",size:Z.SIZE.xs})),we=H.default.memo(co);i();m();var j=A(N());v();var _t=A(ze());var no=({coinAmount:t,decimals:e,symbol:a})=>j.default.createElement(T.FlexBox,{align:T.ALIGN.center,className:(0,_t.default)(x["wax-create-account-confirm-form-select"],x["wax-create-account-confirm-form-select-free"])},j.default.createElement(T.Space,{space:6,align:T.ALIGN.center,direction:T.DIRECTION.horizontal},j.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-select-free-text"]},d("wallet_extension_mid_colored_free")),j.default.createElement(s.DisplayAmount,{className:x["wax-create-account-confirm-form-select-free-amount"],mode:s.CRYPTO,size:s.SIZE.sm,symbol:a,amount:t,decimals:e}))),xt=j.default.memo(no);i();m();var V=A(N());v();var io=({symbol:t,decimals:e,value:a={}})=>{let n=[{symbol:t,decimals:e,label:"extension_wallet_create_colored_cpu",value:a?.cpuAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_network",value:a?.netAmount},{decimals:0,symbol:"bytes",label:"extension_wallet_create_colored_ram",value:a?.ramAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_price",value:a?.sumAmount,icon:{icon:"okds-information-circle",tooltip:"extension_wallet_create_tooltip_20percent_transferfee"}}];return V.default.createElement(D,{space:20,className:x["wax-create-account-confirm-form-payInfo"],dataSource:n,renderItem:({icon:o,label:c,value:y,symbol:l,decimals:f})=>V.default.createElement(D.Line,{size:s.SIZE.sm,label:V.default.createElement(V.default.Fragment,null,d(c),!!o&&V.default.createElement(Z,{className:x["wax-create-account-confirm-form-payInfo-icon"],icon:o?.icon,size:Z.SIZE.xs,tooltip:o?.tooltip?d(o?.tooltip):!1})),value:V.default.createElement(s.DisplayAmount,{symbol:l,decimals:f,mode:s.CRYPTO,size:s.SIZE.sm},y)})})},dt=V.default.memo(io);i();m();var z=A(N());v();var mo=({name:t,value:e,visible:a,options:n,onChange:o,onClose:c})=>z.default.createElement(re,{windowClass:x["wax-create-account-confirm-form-payCrypto-dialog"],alignBottom:!0,onClose:()=>{c?.(t)},visible:a},z.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-payCrypto-title"],strong:700,ellipsis:{tooltip:!0}},d("extension_wallet_popup_maintitle_select_crypto")),z.default.createElement(D,{className:x["wax-create-account-confirm-form-payCrypto-list"],space:16,dataSource:n,renderItem:y=>{let{icon:l}=y;return z.default.createElement(D.Card,{icon:{src:l},onClick:()=>{o?.({[t]:y}),c?.(t)},selected:e?.coinId===y.coinId},z.default.createElement(T.Space,{space:2,direction:T.DIRECTION.vertical},z.default.createElement(s.Text,null,y.label),z.default.createElement(s.Text,{type:s.TYPE.secondary,size:s.SIZE.sm},y.message)))}})),Ct=z.default.memo(mo);i();m();var R=A(N());v();i();m();i();m();i();m();var wt=A(N()),so=({coinId:t,sendAmount:e,fromAddr:a,toAddr:n})=>{let[o,c]=(0,wt.useState)({});return{props:{visible:!1,coinId:t,address:a,inputData:"",tokenAddress:n,value:e,onGasChange:c},ethereumGasInfo:o}},gt=so;i();m();var lo=({coinId:t,coinAmount:e,fromAddr:a,toAddr:n,ethereumGasInfo:o,btnProps:c,beforeClick:y,onClick:l})=>{let g={fetchParams:{coinId:t,from:a,to:n,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:e};return{props:{beforeClick:y,dataForCheck:g,btnProps:c,onClick:l}}},ht=lo;i();m();var Tt=A(ro());Me();oo();to();ao();ae();var fo=({coinId:t,walletId:e,sendAmount:a,fromAddr:n,toAddr:o,ethereumGasInfo:c,onPublish:y})=>{let l=(0,Tt.useDispatch)(),{coin:f}=M(t,!1),g=_=>{let{updateGasInfo:u}=_;return u?{...u,gasLimit:c.gasLimit,supportEip1559:c.supportEip1559,networkFee:c.networkFee}:{...c}},r=({updateData:_,finallyGasInfo:u})=>{let{nonce:W}=_,h=ke(f.localType)?.realChainIdHex,P={from:n,gasLimit:q(u.gasLimit),nonce:q(W),chainId:h};return u.supportEip1559?(P.maxFeePerGas=q(u.maxFeePerGas),P.maxPriorityFeePerGas=q(u.maxPriorityFeePerGas),P.type=Ze.FEE_MARKET):P.gasPrice=q(u.gasPrice),P.value=q(a),P.to=o,ve(P)},p=({txParams:_,finallyGasInfo:u})=>{let W=X(_.value),h=X(_.gasLimit),P=X(c.supportEip1559?_.maxFeePerGas:_.gasPrice),S={..._,value:W,from:n,to:o,gas:h,gasPrice:P,priorityFee:X(c.supportEip1559?_.maxPriorityFeePerGas:0),nonce:X(_.nonce),repeatTxType:Ge.CONFIRMING,oldTxHash:""};return{coinId:f.coinId,coinAmount:a,fromAdr:n,toAdr:o,serviceCharge:u.networkFee,extJson:JSON.stringify(S),txSource:qe.NORMAL,inputData:_.data?_.data:""}};return async _=>{let u=g(_),W=r({updateData:_,finallyGasInfo:u}),h={...W,walletId:e},P=p({txParams:W,finallyGasInfo:u});await l(Ke({txParams:h,walletId:e}));let S=await G().signAndGetEthereumPublishParams({signParams:h,from:W.from,baseChain:Le,publishParams:P});typeof y=="function"&&await y(S)}},It=fo;var po=({toAddr:t,coinId:e,walletId:a,fromAddr:n,sendAmount:o,btnProps:c,onBeforeClick:y=()=>{},onPublishTrascation:l=()=>{},onClickWrap:f=()=>{}})=>{let{props:g,ethereumGasInfo:r}=gt({coinId:e,toAddr:t,fromAddr:n,sendAmount:o}),p=r?.networkFee,w=It({coinId:e,walletId:a,sendAmount:o,fromAddr:n,toAddr:t,ethereumGasInfo:r,onPublish:l}),{props:_}=ht({toAddr:t,coinId:e,fromAddr:n,ethereumGasInfo:r,coinAmount:o,btnProps:c,beforeClick:()=>y?.(p),onClick:(...u)=>{f(async()=>{await w(...u)})}});return R.default.createElement(R.default.Fragment,null,R.default.createElement(rt,{...g}),R.default.createElement(ut,{..._},d("wallet_extension_btn_general_confirm")))},Wt=po;i();m();var At=A(N());v();Me();var uo=({fromAddr:t,coinId:e,toAddr:a,disabled:n,loading:o,walletId:c,walletType:y,sendAmount:l,hideLoading:f,onBeforeClick:g=()=>{},onPublishTrascation:r=()=>{},onClickWrap:p=()=>{}})=>{let{coin:w}=M(e,!1),_=ot({coinId:e,address:t,chainId:w?.chainId},{pollingInterval:20*1e3}),u=_?.normal,[,W]=nt({coinId:e,walletId:c,address:t},{refreshDeps:[c,t]}),[,h]=mt({coinId:e,toAddr:a,walletId:c,fromAddr:t,satBytes:u,coinAmount:l,canTransferAmount:W}),P=st({coinId:e,toAddr:a,walletId:c,fromAddr:t,satBytes:u,networkFee:h,coinAmount:l,localType:w?.localType,dustSize:_?.minOutput}),S=ct({coinId:e,walletId:c,address:t,utxoType:at.TRANSFER}),B=it({coinId:e,txType:Ye.TRANS_OUT,address:t}),L=async()=>{p(async()=>{g&&await g(h,W);let I=await S(l,h);await B(I,()=>{f?.()});let O=await P({utxoList:I}),U=await me(w.localType,O);r?.({coinId:e,txHash:U,signedTx:O,walletId:c,walletType:y,toAdr:a,serviceCharge:h,fromAdr:t,coinAmount:l})})};return At.default.createElement(b,{loading:o,disabled:n,size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:L},d("wallet_extension_btn_general_confirm"))},Pt=uo;i();m();var bt=A(N());v();ae();var yo=({fromAddr:t,coinId:e,toAddr:a,disabled:n,loading:o,walletId:c,walletType:y,sendAmount:l,onBeforeClick:f=()=>{},onPublishTrascation:g=()=>{},onClickWrap:r=()=>{}})=>{let{coin:p}=M(e,!1),w=async()=>{r(async()=>{typeof f=="function"&&f("0");let _=await Je({coinId:e,address:t},{fromAddr:t,toAddr:a}),{info:u}=_||{},{chainid:W,compression:h,refBlockNumber:P,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}=u,I={type:0,from:t,to:a,amount:l,memo:"",common:{chainId:W,compression:h,refBlockNumber:P,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}},O=await G().signTransaction(I,t,p.localType),U=await me(p.localType,O);typeof g=="function"&&await g({coinId:e,txHash:U,signedTx:O,walletId:c,walletType:y,toAdr:a,serviceCharge:"0",fromAdr:t,coinAmount:l})})};return bt.default.createElement(b,{loading:o,disabled:n,size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:w},d("wallet_extension_btn_general_confirm"))},Ft=yo;i();m();var Et=A(N());v();var St=A(De());var _o=600001,xo=({loading:t,disabled:e,fromPage:a,retryCreateAccount:n,onPublishTrascation:o=()=>{}})=>{let c=(0,St.useHistory)(),y=async()=>{let l=await o?.();if(Number(l?.code)===_o){let f=re.warn({alignBottom:!1,title:d("wallet_extension_wax_modaltitle_account_unavailable"),text:d("wallet_extension_wax_modaldesc_free_account_unsupported"),cancelText:d("wallet_extension_btn_general_cancel"),confirmText:d("wallet_extension_mid_btn_retry"),onCancel:()=>{f.destroy(),c.push(a||ce)},onConfirm:()=>{f.destroy(),n?.()}})}};return Et.default.createElement(b,{loading:t,disabled:e,size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:y},d("wallet_extension_btn_general_confirm"))},Nt=xo;i();m();var E=A(N());Ve();v();var Co=({name:t,value:e,visible:a,options:n=[],onChange:o,onClose:c})=>{let[y,l]=(0,E.useState)(e);return(0,E.useEffect)(()=>{l(e)},[e]),a?E.default.createElement(T.Portal,{component:T.Container,className:x["wax-create-account-confirm-form-payWallet"]},E.default.createElement(ie,{className:x["wax-create-account-confirm-form-payWallet-navigator"],title:d("extension_wallet_header_title_select_wallet"),closeable:!1,onBack:()=>{c?.(t)}}),E.default.createElement(D,{className:x["wax-create-account-confirm-form-payWallet-wallet-item"],space:12,dataSource:n||[],renderItem:({keyringName:f,keyringColor:g,walletIdentities:r})=>E.default.createElement(Ue,{defaultExpanded:!0,iconClassName:x["wax-create-account-confirm-form-payWallet-accordion-icon"],title:E.default.createElement(s.Text,{strong:!0,size:s.SIZE.lg,style:{color:g}},f),className:x["wax-create-account-confirm-form-payWallet-accordion"],headerClassName:x["wax-create-account-confirm-form-payWallet-accordion-header"],contentClassName:x["wax-create-account-confirm-form-payWallet-accordion-content"]},E.default.createElement(D,{dataSource:r,renderItem:p=>E.default.createElement(T.FlexBox,{className:x["wax-create-account-confirm-form-payWallet-account-item"],align:T.ALIGN.center,onClick:()=>{l(p)}},E.default.createElement(T.Space,{className:x["wax-create-account-confirm-form-payWallet-account-item-main"],space:0,direction:T.DIRECTION.vertical},E.default.createElement(T.Space,{space:8,align:T.ALIGN.center},E.default.createElement(s.Text,{size:s.SIZE.md},p?.walletName),!!p.addressType&&E.default.createElement(T.Box,{className:x["wax-create-account-confirm-form-payWallet-tag"]},d(He[p.addressType]))),E.default.createElement(s.DisplayAmount,{mode:s.CRYPTO,decimals:p?.decimals,symbol:p?.symbol,size:s.SIZE.xs,type:s.TYPE.secondary},p?.coinAmountInt)),y?.address===p?.address&&E.default.createElement(Z,{className:x["wax-create-account-confirm-form-payWallet-selected-icon"],icon:"okds-success-circle-fill"}))}))}),E.default.createElement(ne.FooterActions,{zIndex:101,className:x["wax-create-account-confirm-form-payWallet-footer"]},E.default.createElement(b,{size:b.SIZE.lg,category:b.CATEGORY.fill,type:b.TYPE.highlight,onClick:()=>{c?.(t),o?.({[t]:y})}},d("wallet_extension_btn_general_confirm")))):null},Bt=Co;i();m();var Lt=A(Ce());ae();Be();Ve();eo();var wo=()=>{let t=Re(),e=$e({hasBackup:!0}),a=je();return(0,Lt.useMemoizedFn)(async(n,o)=>{let c=await t(n),y=c?.localType;if(!n||!y)return null;let l=await G().getCreatedWalletIds(),f=await a({walletIds:l,chainId:c.chainId,coinId:n,flatten:!0});return(e?.map(r=>{let{walletIdentities:p}=r;return{...r,walletIdentities:p.map(w=>{let _=f[w?.walletId]||[];return{...w,coins:_.filter(u=>u?.coinId===n&&be(u.coinAmountInt,o))}}).filter(({coins:w})=>w?.length)}}).filter(({walletIdentities:r})=>r?.some(({coins:p})=>p?.length))).map(r=>{let p=r?.walletIdentities;return Oe({coinId:n})?p=p?.reduce((w,{coins:_,walletName:u,addressType:W,...h})=>[...w,..._.map(({coinAmountInt:P,addressType:S,...B})=>{let L=W?.[Fe]?.find(I=>I?.addressType===de[S])?.address;return{...h,...B,walletName:u,coinAmountInt:P,label:`${r?.keyringName} - ${u}`,desc:_e(L),addressType:de[S],address:L}})],[]):p=p.map(({account:w,walletName:_,coins:u,...W})=>{let h=w?.[y];return{...u[0],...W,address:h,walletName:_,label:`${r?.keyringName} - ${_}`,desc:_e(h)}}),{...r,walletIdentities:p}})},[e])},kt=wo;i();m();var J=A(N()),go=()=>{let t=Y.useForm(),[e,a]=(0,J.useState)({}),[n,o]=(0,J.useState)({payCrypto:!1,payWallet:!1}),c=(0,J.useCallback)(l=>{o(f=>({...f,[l]:!f[l]}))},[]),y=(0,J.useCallback)(l=>{t.setFieldsValue(l),a((f={})=>({...f,...l}))},[]);return{form:t,visible:n,payValues:e,onPayValuesChange:y,onToggleSelectPanel:c}},vt=go;i();m();var Q=A(N()),ho=({form:t,payInfo:e,payValues:a,isFreeCreate:n,walletOptions:o,payCryptoOptions:c,onPayValuesChange:y,setPayWalletError:l})=>{let f=(0,Q.useRef)({payCrypto:!1,payWallet:!1}),g=r=>{y?.(r),t.setFieldsValue(r)};(0,Q.useEffect)(()=>{g({payInfo:e})},[e]),(0,Q.useEffect)(()=>{if(!f.current.payCrypto&&c?.length){let r=c.find(({recommend:p})=>p);g({payCrypto:r}),f.current={...f.current,payCrypto:!0}}if(f.current.payCrypto&&c?.length){let r=c.find(({coinId:p})=>p===a?.payCrypto?.coinId);r&&g({payCrypto:r})}},[c]),(0,Q.useEffect)(()=>{if(!n){if(!f.current.payWallet&&o?.length){let[{walletIdentities:[r]}]=o;g({payWallet:r}),f.current={...f.current,payWallet:!0}}if(f.current.payWallet){o?.length||(g({payWallet:null}),l?.(!1));let{coinId:r}=a?.payCrypto||{},{coinId:p}=a?.payWallet||{};if(o?.length&&r!==p){let[{walletIdentities:[w]}]=o;g({payWallet:w}),l?.(!1)}}}},[n,o])},Ot=ho;i();m();Rt();var K=A(Ce());var $=A(N());var To=60*1e3,Io=t=>{let[e,a]=(0,$.useState)({}),[n,{set:o}]=(0,K.useBoolean)(!1),[c,{set:y}]=(0,K.useBoolean)(),[l,f]=(0,$.useState)([]),g=Qe(),r=(0,$.useMemo)(()=>Pe(g)?[]:l.map(u=>{let{coinId:W,coinAmount:h}=u,P=g[W]||{},{image:S,symbol:B,decimals:L}=P;return{...P,...u,icon:S,label:$.default.createElement(s.DisplayAmount,{noStyle:!0,symbol:B,decimals:L,mode:s.CRYPTO},h)}}),[g,l]),p=async()=>{let{eosMarket:u,coins:W,freeAccount:h}=await lt({coinId:t});a(u),f(W),y(h)},{runAsync:w,refreshAsync:_}=(0,K.useRequest)(p,{manual:!0,pollingInterval:To,pollingWhenHidden:!1,pollingErrorRetryCount:3});return(0,K.useMount)(()=>{(async()=>{try{o(!0),await w()}catch(u){console.log(u)}finally{o(!1)}})()}),[n,c,e,r,_]},Dt=Io;i();m();v();var zt=A(N()),Wo=({sendAmount:t,availableBalance:e="0",onCheckCallback:a})=>(0,zt.useCallback)((n="0",o)=>ue.gt(ue.add(t,n),o!==void 0?o:e)?a?.(!0):a?.(!1),[t,e]),Ut=Wo;var Ao=()=>{let t=et(),e=(0,Yt.useHistory)(),[a,n]=(0,C.useState)(null),o=Number(t.get("coinId"))||ye,{coin:c}=M(o,!1),y=Xe(),[l,f]=(0,C.useState)(!1),[g,r,p,w,_]=Dt(o),[u,W]=(0,C.useState)(!1),[h,{setTrue:P,setFalse:S}]=(0,se.useBoolean)(!1),{form:B,visible:L,payValues:I,onPayValuesChange:O,onToggleSelectPanel:U}=vt({payInfo:p,payCryptoOptions:w}),le=kt();(0,se.useUpdateEffect)(()=>{(async()=>{if(!r&&I?.payCrypto?.coinId){let k=await le(I?.payCrypto?.coinId,I?.payCrypto?.coinAmount);n(k)}})()},[r,I?.payCrypto?.coinId,I?.payCrypto?.coinAmount]),Ot({form:B,payInfo:p,payValues:I,isFreeCreate:r,walletOptions:a,payCryptoOptions:w,setPayWalletError:f,onPayValuesChange:O});let{coinId:ee,coinAmount:ge,toAddress:Gt}=I?.payCrypto||{},{walletId:Zt,serverWalletType:he,address:Te,coinAmountInt:Ie}=I?.payWallet||{},Mt=async k=>{try{P(),await k()}catch(oe){let pe=oe?.msg||d("extension_wallet_transaction_notif_waxaccount_failed");xe.error({title:pe})}finally{S()}},Ht=Ut({sendAmount:ge,availableBalance:Ie,onCheckCallback:k=>(f(k),k?Promise.reject():Promise.resolve())}),We=async k=>{let oe=await G().getPublicKeyByWalletId(y,Ee),{coinAmount:pe,symbol:qt}=I?.payCrypto||{},{ramBytes:Kt,cpuAmount:$t,ramAmount:Xt,netAmount:jt,sumAmount:Jt}=I?.payInfo||{},Qt={transaction:k,order:{payCoin:qt,ramBytes:Kt,payAmount:pe,eosAmount:Jt,cpuAmount:$t,ramAmount:Xt,netAmount:jt,ownerKey:oe,activeKey:oe,payAddress:Te,account:t.get("account"),coinId:c?.coinId,chainId:c?.chainId}},Ae=await(r?pt:ft)(Qt,y);return Number(Ae.code)===0&&(xe.success({title:d("extension_wallet_transaction_notif_waxaccount_created"),desc:t.get("account")}),e.push(t.get("from")||ce)),Ae},fe={coinId:ee,toAddr:Gt,walletId:Zt,fromAddr:Te,sendAmount:ge,onBeforeClick:Ht,onPublishTrascation:We,onClickWrap:Mt},te=!r&&(!I?.payCrypto||!I?.payWallet),Vt=(0,C.useMemo)(()=>r?w.find(k=>k?.coinId===o)||w?.[0]:{},[r,o,w]);return C.default.createElement(T.Container,{loading:g,className:x["wax-create-account-confirm"]},C.default.createElement(ie,{closeable:!1,title:d("extension_wallet_header_title_waxaccount_opening")}),C.default.createElement(Y,{form:B,className:x["wax-create-account-confirm-form"]},C.default.createElement(Y.Item,{name:"payCrypto",label:d("extension_wallet_create_text_payment_crypto")},r?C.default.createElement(xt,{...Vt}):C.default.createElement(we,{type:"payCrypto",onClick:U})),!r&&C.default.createElement(Y.Item,{name:"payWallet",extra:!!l&&C.default.createElement(T.Space,{space:7},C.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-insufficient-error"],size:s.SIZE.sm},d("extension_wallet_create_errortip_insufficient_balance")),C.default.createElement(s.Text,{className:x["wax-create-account-confirm-form-fill-up"],size:s.SIZE.sm,onClick:()=>{W(!0)}},d("extension_wallet_create_textbtn_fill_up",{crypto:I?.payCrypto?.symbol}))),label:d("extension_wallet_create_text_payment_wallet")},C.default.createElement(we,{type:"payWallet",onClick:U,disabled:!a?.length,placeholder:d("extension_wallet_create_input_no_available_wallets")})),C.default.createElement(Y.Item,{name:"payInfo",label:d("extension_wallet_create_text_pay_toopen")},C.default.createElement(dt,{symbol:c?.symbol,decimals:c.decimals})),C.default.createElement(Y.Item,null,C.default.createElement(ne.FooterActions,{placeholder:!1},!r&&ee===Ne&&C.default.createElement(Pt,{loading:h,disabled:te,walletType:he,hideLoading:S,availableAmount:Ie,...fe}),!r&&ee===Se&&C.default.createElement(Wt,{btnProps:{loading:h,disabled:te},...fe}),!r&&ee===ye&&C.default.createElement(Ft,{loading:h,disabled:te,walletType:he,...fe}),r&&C.default.createElement(Nt,{loading:h,disabled:te,fromPage:t.get("from"),retryCreateAccount:_,onPublishTrascation:We})))),C.default.createElement(Ct,{name:"payCrypto",value:I.payCrypto,visible:L.payCrypto,options:w,onChange:O,onClose:U}),C.default.createElement(Bt,{name:"payWallet",value:I?.payWallet,visible:L?.payWallet,options:a,onClose:U,onChange:O}),C.default.createElement(tt,{visible:u,closeCallback:()=>W(!1),address:I?.payWallet?.address,coinId:I?.payCrypto?.coinId,receiveOnly:!0}))},vc=C.default.memo(Ao);export{vc as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ConfirmPay-Y2YCSHPG.js.map
