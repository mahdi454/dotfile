import{d as Ko}from"./chunk-XY66VBX7.js";import{a as Qo}from"./chunk-GZFI5G46.js";import{f as Q,g as z}from"./chunk-73OZ5IYN.js";import{a as J}from"./chunk-BWRHBLYR.js";import{a as Xo}from"./chunk-STMKIE2Z.js";import{E as jo,N as Jo,b as ko,d as vo,e as Po,f as N,g as wo,h as Mo,i as Oo,j as Uo,l as Vo,m as $o,n as Ho,o as Go,p as qo,r as zo,s as K,u as Wo,v as Zo,y as Yo}from"./chunk-5KSRM7B2.js";import{d as Do}from"./chunk-PPHSAQ52.js";import{f as Bo,g as Lo}from"./chunk-GPJC633M.js";import{g as Ro}from"./chunk-YC6W5MPL.js";import{a as _o}from"./chunk-Y6SGFHFT.js";import{a as No}from"./chunk-QKXA7YNE.js";import{a as yo,f as q,ka as To,la as So}from"./chunk-S5DGV5WL.js";import{l as go}from"./chunk-WKBC6JL3.js";import{X as _}from"./chunk-VPDRXROE.js";import{sa as ho,w as I}from"./chunk-JLIPSIRU.js";import{a as P}from"./chunk-VX55KNI4.js";import{ha as C,ta as G}from"./chunk-VGT27A4M.js";import{a as bo}from"./chunk-AYCAVTPT.js";import{B as Ao,C as b,D as j,Q as Eo,R as Fo,V as xo,X as x,w as F,x as Co,z as H}from"./chunk-YT2MPR4E.js";import{H as Io}from"./chunk-LDKM7IQF.js";import{F as $,K as lo,pa as po}from"./chunk-6O63U2D6.js";import{M as Ne,x as fo}from"./chunk-RIOWPXBZ.js";import{a as S}from"./chunk-O337TVCZ.js";import{f as u,m as t,o as s}from"./chunk-GLD6H5Q5.js";t();s();var le=u(I()),pe=u(_());Ne();t();s();po();var me=u(P());t();s();var l=u(I());x();t();s();var W=u(S());x();var Be=(0,W.createContext)({coinId:null,fromAddress:""});function oe(){return(0,W.useContext)(Be)}function ee(){let{coinId:o}=oe();return o}function B(){let{fromAddress:o}=oe();return o}function g(){return(o,e,r)=>{if(!o)return o;let n;return r?n=Fo(o,e.orderDecimalNum):n=Eo(o,e.orderDecimalNum),xo(n)}}function re(){return(o,e,r)=>{if(!o)return o;typeof r=="boolean"&&(r={isFee:r});let{isFee:n,useApproximate:i=!0,...a}=r||{};return Do(o,{fixed:e.orderDecimalNum,isFixedUp:n,useApproximate:i,...a})}}var ne=()=>(0,l.useSelector)(ko),ir=()=>(0,l.useSelector)(N),E=()=>{let o=g(),e=(0,l.useSelector)(Oo),{coin:r}=c();return o(e,r,!1)},te=()=>(0,l.useSelector)(Uo),ur=()=>{let o=E(),{coin:e}=c();return F(o,10**e.decimals)},X=()=>(0,l.useSelector)(qo),oo=()=>(0,l.useSelector)($o),eo=()=>{let o=g(),e=oo(),r=A();return o(Co(e,10**r.decimals),r,!0)},se=()=>(0,l.useSelector)(Go),ro=()=>(0,l.useSelector)(Ho),ie=()=>{let o=(0,l.useSelector)(ho),e=(0,l.useSelector)(zo);return e===-1?o.currencyId:e},ue=()=>{let o=(0,l.useSelector)(Vo),{baseCoin:e}=c();return o===-1?e.coinId:o},no=()=>(0,l.useSelector)(Wo),ce=()=>(0,l.useSelector)(Zo);var to={vdecimalNum:0,decimals:0,symbol:""};function h(){let{coinId:o}=(0,me.useParams)(),e=ee();return Number(e)||Number(o)}var c=()=>{let o=h(),{coin:e,baseCoin:r}=J(o,!0),n=$(e)?to:e,i=$(r)?to:r;return{coin:n,baseCoin:i}},A=()=>{let o=ue(),{coin:e}=J(o,!1);return $(e)?to:e};G();t();s();var so=u(I()),ae=u(P());var fe=()=>{let o=(0,ae.useHistory)(),e=(0,so.useSelector)(Mo),r=(0,so.useSelector)(N),{coin:n}=c();return async()=>{await Ko(n.localType,{name:e?.name,type:e?.type,address:r}),o.go(-3)}};var Le="DontShowError";function kr(){let o=(0,le.useSelector)(K),e=se(),r=ro(),{coin:n}=c();return(!!o.key||!!o.text)&&o.type!==C.COMMON_TIP||e||r||!n.coinId}function vr(o){let[e,{setTrue:r,setFalse:n}]=(0,pe.useBoolean)(),i=fe();return{loading:e,onClick:async(...a)=>{r();try{if(!await Xo()){n();return}if(o){let p=await o(...a),{pause:d}=p||{};d||await i()}}catch(f){if(f?.message===bo||f?.message===Le)n();else{let d=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||fo("wallet_home_toast_network_error");Io.error({title:d})}}n()}}}t();s();t();s();var w=u(_()),M=u(S());var L=Symbol("UNSET_INPUT");function De(){let[o,e]=(0,M.useState)(L),r=(0,w.useLatest)(o);return(0,M.useEffect)(()=>{Yo(o!==L)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function Re({domainInputValue:o,coinId:e},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:a}=De(),f=(0,w.useLatest)(o),{run:p,cancel:d}=(0,w.useDebounceFn)(v=>{Ro({coinId:e,domain:v}).then(({data:y})=>{v===f.current&&y?.address&&r({address:y?.address,domain:v})}).catch(y=>{console.log(y)}).finally(()=>{i.current===v&&a(L)})},{wait:800});return(0,M.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(a(o),p(o)):a(L),()=>{d&&d()}),[o,n]),{loading:i.current!==L,abort:()=>{d&&d(),a(L)}}}var ke=Re;t();s();var de=u(P());function ve(){let o=(0,de.useHistory)(),e=ne();return()=>{o.push(e||yo)}}var Pe=ve;t();s();var Kr=()=>{let o=B(),{baseCoin:e}=c(),r=_o(e.localType);return e.localType?o||r:""};t();s();var O=u(I()),Ce=u(P()),Ae=u(_());function un(){return(0,O.useSelector)(vo)}function cn(){let o=(0,O.useSelector)(Po),e=(0,O.useSelector)(N),r=(0,O.useSelector)(wo);return!e||o||!!r.key}function mn(){let o=h(),e=(0,Ce.useHistory)(),r=B(),{amount:n}=No(e?.location.search.slice(1));return(0,Ae.useMemoizedFn)(()=>{let i={pathname:`${q}/${o}${To}`};r&&(i.search=`?from=${r}`),n&&(i.search=i.search?`${i.search}&acount=${n}`:`?amount=${n}`),e.push(i)})}t();s();t();s();var D=u(S());var Ee=u(_());function we(o,e){let[r,n]=(0,D.useState)(0),i=(0,D.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let a=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,D.useCallback)((p,d)=>{(async()=>{let y=++i.current;n(T=>T+1);try{let T={key:"",args:{}};for(let _e of a){let ao=await _e(p);if(ao){T=ao;break}}y===i.current&&d(T)}finally{n(T=>T-1)}})()},a);return{isCheckingError:r>0,runErrorFns:f}}function dn(o,e,r){let n=E();(0,Ee.useDebounceEffect)(()=>{(async()=>{r||o(n,e)})()},[o,n,r],{wait:100})}var U=we;t();s();var io=u(_());function Me(){return(0,io.useMemoizedFn)(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function Oe(){let{baseCoin:o}=c();return(0,io.useMemoizedFn)(async e=>await Qo(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function In(){let o=Me(),e=Oe();return[o,e]}t();s();var R=u(S()),Ie=u(I());t();s();var Fe=u(S());x();var Ue=o=>{let e=Bo(o),r=Lo();return(0,Fe.useCallback)((n,i,a)=>{let{useApproximate:f=!0}=a||{},p=r?.[n]?.coinToUSDRate;return go(F(i,F(p,e.usdToThisRate)),{useApproximate:f,symbol:e.symbol})},[r,e.symbol,e.usdToThisRate])},xe=Ue;G();x();function Ve(){let{coin:o}=c(),e=Z();return(0,R.useCallback)(()=>o.baseCoinId===0&&b(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT}:null,[e])}function uo(){let o=mo();return(0,R.useCallback)(e=>j(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:C.BALANCE_INSUFFICIENT}:null,[o])}function co(){let o=ie(),e=re(),r=xe(o),{coin:n}=c(),i=Z();return(0,R.useCallback)(a=>{if(j(a,i)){let f=r(n.coinId,i,{useApproximate:!1}),p=`${e(i,n,{useApproximate:!1})} ${n.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:f,cryptoamount:p},type:C.BALANCE_INSUFFICIENT}}return null},[i])}var Mn=o=>{let e=(0,Ie.useDispatch)(),r=Ve(),n=uo(),i=co(),a=[r,n,i],{runErrorFns:f}=U(a,o),p=Y();(0,R.useEffect)(()=>{f(p,d=>{e(jo(d))})},[f,p])};t();s();var k=u(S()),ge=u(I());G();x();t();s();var V={AMOUNT:"amount",FEE:"fee"};function $e(){let o=A(),e=he();return(0,k.useCallback)(()=>b(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT,highlight:V.FEE}:null,[e,o.symbol])}function He(){let o=uo();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:V.AMOUNT}:null},[o])}function Ge(){let o=co();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:V.AMOUNT}:null},[o])}function qe(){let o=$e(),e=He(),r=Ge();return[o,e,r]}function Jn(o){let e=(0,ge.useDispatch)(),r=qe(),{runErrorFns:n}=U(r,o),i=Y();(0,k.useEffect)(()=>{n(i,a=>{e(Jo(a))})},[n,i])}t();s();var ye=u(P()),Te=u(_());x();G();po();function dt(){let o=te(),e=E();return!!o.key&&o.type!==C.COMMON_TIP||lo(e)||e===""||b(e,0)}function Ct(){let o=h(),e=(0,ye.useHistory)(),r=B();return(0,Te.useMemoizedFn)(()=>{let n={pathname:`${q}/${o}${So}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();x();var Se=()=>{let o=h();return Q(o)},Tt=()=>{let o=g(),e=Se(),{coin:r}=c();return o(z(e,r.decimals),r,!1)},be=()=>{let o=Se(),e=no();return e===null?o:e},mo=()=>{let o=g(),e=be(),{coin:r}=c();return o(z(e,r.decimals),r,!1)},ze=()=>{let{coin:o}=c(),e=A(),r=oo(),n=be();return o.coinId===e.coinId?H(n,r):n},Z=()=>{let{coin:o}=c(),e=A(),r=eo(),n=mo();return o.coinId===e.coinId?H(n,r):n},Y=()=>{let o=X(),e=Z(),r=E();return o?Ao(e,0)?"0":e:r},We=()=>{let o=A();return Q(o.coinId)},Ze=()=>{let{coin:o}=c(),e=A(),r=We(),n=ce(),i=no();return n!==null?n:o.coinId===e.coinId&&i!==null?i:r},Ye=()=>{let o=g(),e=Ze(),r=A();return o(z(e,r.decimals),r,!1)},he=()=>{let o=Ye(),e=eo();return H(o,e)},St=()=>{let{coin:o}=c(),e=X(),r=E(),n=ze();return e?n:F(r,10**o.decimals)};t();s();t();s();var je=u(I());export{ke as a,Be as b,B as c,re as d,h as e,c as f,A as g,ir as h,E as i,te as j,ur as k,X as l,oo as m,eo as n,se as o,ro as p,ie as q,ue as r,no as s,ce as t,Pe as u,Kr as v,fe as w,un as x,cn as y,mn as z,dn as A,U as B,Me as C,Oe as D,In as E,Ve as F,uo as G,Mn as H,V as I,$e as J,He as K,qe as L,Jn as M,dt as N,Ct as O,Se as P,Tt as Q,be as R,mo as S,Z as T,We as U,Ze as V,he as W,St as X,Le as Y,kr as Z,vr as _};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-JDZSGQWQ.js.map
