import{a as co}from"./chunk-65M54JVO.js";import{a as j}from"./chunk-KCZXE3TB.js";import{a as _o}from"./chunk-D6XWIX4H.js";import{a as po}from"./chunk-IQQANR3G.js";import{B as lo}from"./chunk-UXLFUD7T.js";import{a as io}from"./chunk-SMZ64QW3.js";import{a as Q}from"./chunk-DQTTI4XL.js";import{a as mo}from"./chunk-GSYNHSX4.js";import{a as ro,d as no,f as ao}from"./chunk-4HCF54KG.js";import{b as so}from"./chunk-FYACTIEH.js";import{k as uo}from"./chunk-7ZRI3S6Z.js";import{a as oo}from"./chunk-M2F2X65U.js";import{b as to,c as eo}from"./chunk-ZYEEMVIP.js";import{a as P,x as J,y as X}from"./chunk-S5DGV5WL.js";import{q as a}from"./chunk-WKBC6JL3.js";import{X as No}from"./chunk-VPDRXROE.js";import{ka as q,w as Io}from"./chunk-JLIPSIRU.js";import{a as K}from"./chunk-CIDV5VJQ.js";import{a as Y}from"./chunk-VX55KNI4.js";import{r as R,s as V,t as So}from"./chunk-656GFN7J.js";import{g as $}from"./chunk-OG46YTNN.js";import{_ as H,ea as bo,k as z,v as xo}from"./chunk-YT2MPR4E.js";import{D as y,H as G,f as I,o as Z,q as v}from"./chunk-LDKM7IQF.js";import{M as A,x as r,y as B}from"./chunk-RIOWPXBZ.js";import{c as Po,ca as w}from"./chunk-OSCGYMLH.js";import{a as F}from"./chunk-O337TVCZ.js";import{f as m,m as t,o as e}from"./chunk-GLD6H5Q5.js";t();e();var o=m(F()),go=m(Y()),ho=m(Po());A();t();e();t();e();var h=m(F()),T=m(Io()),yo=m(Y()),S=m(No());A();t();e();var fo=()=>Q("passwordSecurity",{...j,location:window.location.href})?.data;bo();xo();So();t();e();var f=m(F());A();t();e();var g={updateMb32:"_updateMb32_2kuwm_1",centerImage:"_centerImage_2kuwm_4",titleUpdate:"_titleUpdate_2kuwm_11",textUpdate:"_textUpdate_2kuwm_16"};var wo=(s,d)=>{Z.action({mobileWidth:"77.777777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,btnFull:!0,children:f.default.createElement("div",{className:g.updateMb32},f.default.createElement("div",{className:g.centerImage},f.default.createElement("img",{src:d,alt:"updatePassword"})),f.default.createElement("div",{className:g.titleUpdate},r("wallet_extension_password_popup_title_wallet_security_tip")),f.default.createElement("div",{className:g.textUpdate},r("wallet_extension_password_popup_text_wallet_security_tip"))),confirmText:r("wallet_extension_password_popup_btn_update_password"),cancelText:r("wallet_extension_password_popup_btn_maybe_later"),maskClosable:!1,onConfirm:c=>{window.localStorage.pss=1,s.push(X),c.destroy()},cancelBtnProps:{category:"text",type:"primary"},onCancel:c=>{window.localStorage.pss=1,c.destroy()}})};var Uo=s=>`https://${s}/help/how-to-solve-the-problem-of-encountering-password-errors-when-logging-in-to`,D=()=>(0,T.useSelector)(q),O=({form:s})=>{let d=(0,yo.useHistory)(),c=(0,T.useDispatch)(),E=mo(),[p,k]=(0,h.useState)(!1),[l,n]=(0,h.useState)(null),[{walletAsset:N=0}]=lo(),U=fo(),x=(0,T.useSelector)(co),M=H()===z;(0,S.useMount)(()=>{so({islogin:"no",isbydapp:M?" yes":"no",dapp_url:x,wallet_id:E})});let C=po(),To=io()?.passwordNotice||Uo(C),Eo=$({dark:"/cdn/assets/imgs/246/74D87A474619BCFE.png",light:"/cdn/assets/imgs/246/696DAB049D0A9095.png"}),ko=(0,S.useMemoizedFn)(async W=>{let L=s.getFieldValue("password");if(L&&!p&&!l)try{let b=window.localStorage.pss;k(!0),await c(uo(L)),U&&L.length<_o&&Number(N)>100&&!b&&wo(d,Eo),d.push(P)}catch({message:b}){b===R?n(B("wallet_set_password_errortip_password_wrong_see_notice",{notice:h.default.createElement(I,{size:I.SIZE.sm,weight:I.WEIGHT.muted,target:"_blank",href:To,underline:!0},r("wallet_set_password_errortip_password_wrong_see_notice_icu"))})):b===V&&G.error(r("wallet_home_toast_version_error")),W&&W()}finally{k(!1)}},[s,p,l]);return{submitting:p,passwordError:l,setPasswordError:n,onSubmit:ko}};t();e();var u={password:"_password_1tu71_1",error:"_error_1tu71_5",forgotPassword:"_forgotPassword_1tu71_8",input:"_input_1tu71_19",btn:"_btn_1tu71_25",footer:"_footer_1tu71_28"};var Co=()=>{let s=y.useForm(),d=D(),c=(0,go.useHistory)();o.default.useLayoutEffect(()=>{d&&c.push(P)},[d]);let{submitting:E,passwordError:p,setPasswordError:k,onSubmit:l}=O({form:s}),n=(0,o.useRef)(null),[N]=eo(to.passwordType),{open:U}=no(),x=(0,o.useCallback)(async i=>{(i?.key==="Enter"||i?.keyCode===13)&&await l(()=>{n.current&&setTimeout(()=>{n.current.focus()})})},[]);return(0,o.useEffect)(()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}),[]),N===2?o.default.createElement(o.default.Fragment,null,o.default.createElement(ao,{onPass:async i=>{s.setFieldsValue({password:i}),await l()}}),o.default.createElement(a.Text,{className:u.forgotPassword,strong:!0,align:a.ALIGN.center,size:a.SIZE.sm,type:a.TYPE.secondary,onClick:()=>{U()}},r("wallet_extension_biometrics_dialog_title_cant_unlock"))):o.default.createElement(y,{form:s,onChange:()=>{k(null)},onSubmit:async()=>{await l(()=>{n.current&&setTimeout(()=>{n.current.focus()})})}},o.default.createElement(y.Item,{useChildError:!0,name:"password",className:u.password,extra:!!p&&o.default.createElement(a.Text,{size:a.SIZE.sm,className:u.error},p)},o.default.createElement(ro,{elementName:"u",autoFocus:"autoFocus",inputClassName:u.input,className:(0,ho.default)({error:!!p}),size:v.SIZE.xl,autoComplete:"off",errorType:v.TIP_TYPE.always,disabled:E,placeholder:r("wallet_home_lock_wallet_placeholder_input_password"),onRef:i=>{n.current=i}})),o.default.createElement(y.Item,{shouldUpdate:!0,className:u.btn},({getFieldValue:i})=>{let C=!i("password")||!!p;return o.default.createElement(oo,{usePortal:!0,placeholder:!0,offsetBottom:0,className:u.footer,style:{zIndex:1e4}},o.default.createElement(K,{to:J,className:u.forgotPassword},o.default.createElement(a.Text,{strong:!0,size:a.SIZE.sm,type:a.TYPE.secondary},r("wallet_footer_subtitle_forgot_password"))),o.default.createElement(w,{block:!0,htmlType:"submit",disabled:C,category:w.CATEGORY.fill,type:w.TYPE.highlight,size:w.SIZE.xl,loading:E,loadingText:r("wallet_home_btn_unlock"),onClick:async()=>{await l(()=>{n.current&&setTimeout(()=>{n.current.focus()})})}},r("wallet_home_btn_unlock")))}))};t();e();export{O as a,Co as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-JR3YM2BU.js.map
