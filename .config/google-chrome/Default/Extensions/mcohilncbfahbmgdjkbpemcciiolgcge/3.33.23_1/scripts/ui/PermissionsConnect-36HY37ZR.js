import{b as qt}from"./chunk-PQRUDR4H.js";import{c as ve}from"./chunk-72HNLK2F.js";import{a as be,b as We}from"./chunk-4BMEYGDL.js";import{a as xe}from"./chunk-X6LGMUFV.js";import{d as Ie}from"./chunk-6M2GCKDH.js";import{a as Ee}from"./chunk-KTRYKYE5.js";import{a as rt}from"./chunk-V2A2AEVZ.js";import{a as Se,d as k,e as Dt,g as P}from"./chunk-SIIB3XCZ.js";import{f as Ae,q as M}from"./chunk-UTVBVZWC.js";import"./chunk-4MDR2IS2.js";import"./chunk-GZN3TPOZ.js";import"./chunk-ZN3567SM.js";import"./chunk-SJCGLHGC.js";import"./chunk-GQYTOJVD.js";import"./chunk-7HZMPY3W.js";import"./chunk-QTEBOXIQ.js";import{a as Ne,b as Me}from"./chunk-SK33Q2T3.js";import{a as Pe,c as wt,d as Oe}from"./chunk-BBVLJ4T3.js";import"./chunk-K4WB5MMU.js";import"./chunk-YLJ56YQC.js";import{e as we}from"./chunk-YVC4CAU2.js";import"./chunk-K4MSA5MN.js";import{a as Ce}from"./chunk-4HBLPFAF.js";import"./chunk-TJW4EUGS.js";import"./chunk-SJRV5U24.js";import"./chunk-PUMQ7BEU.js";import"./chunk-4OKCKO5L.js";import"./chunk-75OW6LUI.js";import"./chunk-W4IULSMQ.js";import"./chunk-UXRYSOKP.js";import"./chunk-ABSI53HE.js";import"./chunk-JJIQEHOY.js";import{b as vt}from"./chunk-C77TCOTM.js";import{a as pe,b as le}from"./chunk-KA5VAELR.js";import{a as ue}from"./chunk-4BUFJ3ZT.js";import{e as S,g as Ct}from"./chunk-A3B5II6P.js";import"./chunk-XVPROSYE.js";import"./chunk-E2MXYP3A.js";import"./chunk-FPV6XIHQ.js";import"./chunk-MZXFJMVC.js";import"./chunk-46PSZUMN.js";import"./chunk-MYY7DCIN.js";import"./chunk-AHIMORZ4.js";import{e as me}from"./chunk-XZ6AHFH2.js";import"./chunk-3DEZPDXQ.js";import"./chunk-6UFIPREK.js";import"./chunk-G4OIO3Z6.js";import"./chunk-JEIYTQ5E.js";import"./chunk-TOO5SEJU.js";import"./chunk-DUWPYFAS.js";import"./chunk-CA4PB6NG.js";import"./chunk-SCXRHDUG.js";import{B as ye,D as he}from"./chunk-5STCPPZU.js";import"./chunk-ZVXDJZSD.js";import"./chunk-56SDY6L3.js";import"./chunk-PXWV5LKL.js";import"./chunk-M5PVKGM6.js";import"./chunk-AK34CZMZ.js";import{f as de,h as Tt,j as _e}from"./chunk-QHZHYX4V.js";import"./chunk-FLFVNMKM.js";import"./chunk-YJ2NGJXA.js";import{a as Te}from"./chunk-ZUBNNPBM.js";import{j as ge}from"./chunk-2SHHGXPQ.js";import"./chunk-UK4SAM7E.js";import{a as fe}from"./chunk-LXIBKSOK.js";import"./chunk-C53RLQYB.js";import"./chunk-72NGWMH2.js";import"./chunk-VRXSSD45.js";import{$a as ae,a as Wt,b as ie,h as b,j as B}from"./chunk-DUKP4BLI.js";import"./chunk-S3O4LR55.js";import"./chunk-FZCNSMLW.js";import"./chunk-WANYNTD6.js";import"./chunk-QMGTBJAL.js";import{o as se}from"./chunk-KCWFMCND.js";import{Aa as re,Va as ne,ga as $,ia as oe,w as I}from"./chunk-3TDWET6C.js";import{z as ee}from"./chunk-EBR3PGFZ.js";import"./chunk-UDGUBKMO.js";import{a as dt}from"./chunk-VPGNJAK6.js";import{Na as R,Pa as te,Ra as gt,ra as _t,sa as qo}from"./chunk-W6Q44ZHW.js";import{d as ot,f as zt}from"./chunk-3HS6AHPS.js";import"./chunk-JUXPONKW.js";import{f as Kt}from"./chunk-WSUAESF2.js";import"./chunk-O2FUKKO3.js";import"./chunk-GQJVAWGG.js";import"./chunk-WO5B666G.js";import"./chunk-GCXT25LW.js";import{g as ce}from"./chunk-TW63K7CB.js";import{c as et}from"./chunk-FDCWN4NG.js";import"./chunk-5YGMD6KK.js";import{D as Ut,Mc as Zt,Na as lt,Nb as ft,Qc as Qt,R as Gt,T as $t,U as Ft,Uc as Lo,Ya as ut,dc as Yt,gc as Ot,mc as Wo,n as Pt,qa as tt,wc as Xt,xc as Jt,y as bo}from"./chunk-O3CM75EN.js";import"./chunk-ZGRAPBBU.js";import{H as jt,b as Vt,d as Ht}from"./chunk-J3CEQI22.js";import{K as pt,f as mt,pa as Mt}from"./chunk-VFHYER2K.js";import{L,w as _}from"./chunk-KJIO572I.js";import"./chunk-HJXNXGYU.js";import"./chunk-77ECUYXV.js";import"./chunk-4BZBCAHV.js";import{Z as bt,c as Do}from"./chunk-KALFZBR5.js";import{a as vo}from"./chunk-V55FEIYE.js";import{a as w}from"./chunk-EAZTJZU7.js";import"./chunk-YTRW5WTJ.js";import"./chunk-VOT7VHG3.js";import"./chunk-SYQUJKIR.js";import"./chunk-WPMHLM7C.js";import"./chunk-3MRE2BAK.js";import"./chunk-CSLLQXN7.js";import"./chunk-P7DU4NJA.js";import"./chunk-KW7JYBDS.js";import"./chunk-224G4QSH.js";import{f as p,m as e,o}from"./chunk-ZCHLW7CF.js";e();o();var v=p(w()),X=p(I()),D=p(dt()),xo=p(se());Wo();bo();gt();e();o();var De=p(w()),qe=(0,De.lazy)(()=>import("./Comp-UVOYRB4E.js"));e();o();e();o();var Le=p(I());gt();function Re(){let t=(0,Le.useDispatch)();return()=>t(te())}var Be=Re;e();o();e();o();var W=p(w());Ft();e();o();var Je=p(w());e();o();var x=p(w()),Fe=p(I()),Ye=p(dt());L();Zt();e();o();var E=p(w()),ke=p(dt());Mt();var Ue=p(vo());L();Ft();e();o();var yt={root:"_root_oli0p_1",multiAccount:"_multiAccount_oli0p_4",count:"_count_oli0p_9"};var Bo="account-selector",Ge=t=>{let r=(0,ke.useHistory)(),{permissionsRequestId:n,request:s,dappSelectAccount:a,walletInfo:i={},connectable:c=!0,hiddenAddress:m=!1,disableSelectAccount:u=!1}=t,{method:d,provider:g,status:T}=wt({dappUrl:s?.metadata?.origin}),f=()=>{r.push({pathname:`${b}/${n}${B}`})},C=(0,E.useMemo)(()=>m?"":s?.providerType===Ut?_("wallet_extension_cosmos_text_cosmos_network"):i.address,[m,s?.providerType,i.address]),y=Pe({provider:g,method:d}),h=()=>a.length<=1?y?E.default.createElement(k,{bordered:!1},E.default.createElement(Dt,{onClick:u?void 0:mt,hiddenAddress:m,copyable:!1,title:_("wallet_dapp_conncetion_requesr_subtitle_current_account"),walletId:i.walletId,address:_("wallet_extension_expand_all_networks")})):E.default.createElement(k,{bordered:!1},E.default.createElement(Dt,{onClick:u?void 0:mt,copyable:!1,title:_("wallet_dapp_conncetion_requesr_subtitle_current_account"),walletId:i.walletId,address:C,hiddenAddress:m,connectable:c})):E.default.createElement(k,{bordered:!1},E.default.createElement(Se,{title:_("wallet_dapp_conncetion_requesr_subtitle_current_account")},E.default.createElement(et.Box,{className:yt.multiAccount},E.default.createElement(et.Box,{className:yt.count},_("wallet_extension_mid_text_accounts",{num:a.length})),E.default.createElement(qt,{className:`${Bo}__info-arrow`,side:qt.SIDE.RIGHT}))));return E.default.createElement("div",{className:yt.root,onClick:u?mt:f},T!=="PENDING"&&h())};Ge.propTypes={permissionsRequestId:Ue.default.string.isRequired};var $e=Ge;function ko({targetDomainMetadata:t,permissionsRequestId:r,request:n,walletInfo:s,connectable:a,tipMessage:i,buttonGroup:c,hiddenAddress:m,disableSelectAccount:u,RequestedNetworks:d,children:g,title:T}){let f=(0,Ye.useHistory)(),C=(0,Fe.useSelector)(S),y=de();return x.default.createElement(et.Container,null,x.default.createElement(Te,{backable:!1,closeable:!1,title:T??_("wallet_dapp_conncetion_maintitle_conncet_account")}),x.default.createElement(k,null,x.default.createElement(Ie,{...t})),x.default.createElement($e,{targetDomainMetadata:t,permissionsRequestId:r,request:n,dappSelectAccount:C,walletInfo:s,disableSelectAccount:u,hiddenAddress:m,connectable:a}),d&&x.default.createElement(d,{request:n}),g,x.default.createElement(fe,{placeholder:!0,offsetBottom:0,borderTop:!0},x.default.createElement(P,{...i}),x.default.createElement(M,{buttonGroup:c})),s?.keyringIdentityType===Jt.MPC&&x.default.createElement(be,{keyringId:s.keyringId,customConfig:y?.length===1?{confirmText:_("wallet_extension_btn_general_gotit")}:{},actionMap:{["RECOVER"]:()=>{f.push(`${ae}?action=${Ce.RECOVER}&walletId=${s.walletId}`)},["SWITCH_WALLET"]:async()=>y?.length===1?(await c[0]?.onClick(),f.push(ie)):f.push({pathname:`${b}/${r}${B}`})}}))}var F=ko;e();o();var Ve=p(I());function Uo(t){let r=Tt(),s=(0,Ve.useSelector)(S)[0]||r,{walletInfo:a,connectable:i,chainName:c,status:m}=Oe({dappUrl:t,walletId:s}),u=We(s);return{targetWalletId:s,walletInfo:a,connectable:i,chainName:c,mpcConnectable:u,status:m}}var Y=Uo;e();o();var V=p(I()),He=p(dt());L();gt();function Lt({disabled:t,request:r,targetDomainMetadata:n,cancelPermissionsRequest:s,approvePermissionsRequest:a,connectSource:i,connectChains:c}){let m=(0,V.useDispatch)(),u=n?.origin,d=rt(),g=(0,V.useSelector)(S),T=wt({dappUrl:u});return async()=>{if(t)return;d({trade:"connect_wallet",all_confirmation:"confirm"});let C={...r,permissions:{...r.permissions}};if(Object.keys(C.permissions).length>0){if(await a(C,g),g.length===1&&await m(ge(g[0],!0)),he({dapp_url:u}),T?.dappUrl&&T?.provider){let y={dappurl:T.dappUrl,connect_method:i||T.provider,dappname:n?.name};c&&(y.chain=c),ye(y)}}else await s(C.metadata.id);await R(m)}}var Go=({props:t,isMpcError:r,connectable:n,confirmBtnText:s,onConfirm:a,onCancel:i,connectSource:c,connectChains:m,disabledConfirmBtn:u=!1})=>{let d=(0,V.useDispatch)(),g=(0,He.useHistory)(),T=(0,V.useSelector)(S),{permissionsRequestId:f,targetDomainMetadata:C,cancelPermissionsRequest:y,approvePermissionsRequest:h,request:U}=t,q=rt(),N={actionType:M.ACTION_TYPE.CANCEL,async onClick(){q({trade:"connect_wallet",all_confirmation:"cancel"}),i?await i(f):await y(f),await R(d)}},J=Lt({request:U,targetDomainMetadata:C,approvePermissionsRequest:h,cancelPermissionsRequest:y,connectSource:c,connectChains:m}),Z={actionType:M.ACTION_TYPE.CONFIRM,disabled:u||n&&(T.length===0||r),btnText:n?s||_("wallet_extension_connect_btn_connect"):_("wallet_extension_connect_btn_switch_wallet"),async onClick(){n?a?await a():await J():g.push({pathname:`${b}/${f}${B}`})}};return[N,Z]},H=Go;e();o();var je=p(w());var ht=p(I());function $o(t,r){let n=(0,ht.useDispatch)(),s=(0,ht.useSelector)(S),{connectable:a,mpcConnectable:i}=t;(0,je.useEffect)(()=>{if(!s.length&&a&&i&&r){let c=Array.isArray(r)?r:[r];n(Ct.setSelectAccounts(c))}},[s,a,i,r])}var j=$o;e();o();var Ke=p(w());L();function Fo({isMpcError:t,connectable:r,chainName:n}){return(0,Ke.useMemo)(()=>t?{type:P.TIP_TYPE.COMMON_ERROR,message:_("extension_wallet_error_toast_not_supported")}:r?{type:P.TIP_TYPE.NORMAL,message:_("wallet_dapp_conncetion_notify_conncet_permission")}:{type:P.TIP_TYPE.COMMON_WARN,message:_("wallet_extension_connect_alert_text_doesnt_support_network",{network:n})},[t,r,n])}var At=Fo;e();o();var Xe=p(w()),Rt=p(I());Zt();e();o();var St=p(w());var ze=(t,r)=>{let[n,s]=(0,St.useState)(!1);return(0,St.useEffect)(()=>{(async()=>{if(t&&r){let{data:a}=await we({dappUrl:t});s(a.result)}})()},[t,r]),n};function Yo(t){let r=(0,Rt.useSelector)(S),n=(0,Rt.useSelector)(oe),s=(0,Xe.useMemo)(()=>r.some(i=>n.find(c=>c.walletId===i)?.initialType===Xt.MPC_KEYRING),[r,n]),a=ze(t?.host,s);return s&&!a}var K=Yo;function Vo(t){let{targetDomainMetadata:r,permissionsRequestId:n,request:s}=t,a=Tt(),i=Y(r?.origin),{walletInfo:c,connectable:m,chainName:u,status:d}=i,g=K(r),T=At({isMpcError:g,connectable:m,chainName:u}),f=H({props:t,isMpcError:g,connectable:m});return j(i,a),d==="PENDING"?null:Je.default.createElement(F,{targetDomainMetadata:r,permissionsRequestId:n,request:s,walletInfo:c,connectable:m,tipMessage:T,buttonGroup:f})}var Ze=Vo;e();o();var oo=p(w()),ro=p(I());ut();e();o();Mt();ut();Yt();var Ho=({props:t,isMpcError:r,connectable:n,walletInfo:s={},nearAmount:a})=>{let{walletId:i,address:c}=s,m=H({props:t,isMpcError:r,connectable:n});return!pt(a)&&ft(a,0)&&(m[1]={actionType:M.ACTION_TYPE.FILL_UP,coinId:lt,walletId:i,address:c,receiveOnly:!0}),m},Qe=Ho;e();o();var to=p(w());Mt();L();Yt();function jo({nearAmount:t,isMpcError:r,connectable:n,chainName:s}){return(0,to.useMemo)(()=>!pt(t)&&ft(t,0)?{type:Vt.TYPE.warn,message:_("wallet_extension_conncetion_alert_add_more")}:r?{type:P.TIP_TYPE.COMMON_ERROR,message:_("extension_wallet_error_toast_not_supported")}:n?{type:P.TIP_TYPE.NORMAL,message:_("wallet_extension_conncetion_alert_check_balance")}:{type:P.TIP_TYPE.COMMON_WARN,message:_("wallet_extension_connect_alert_text_doesnt_support_network",{network:s})},[t,r,n,s])}var eo=jo;var Ko=t=>{let{targetDomainMetadata:r,permissionsRequestId:n,request:s}=t,a=(0,ro.useSelector)($),i=Y(r?.origin),{walletInfo:c,connectable:m,chainName:u,targetWalletId:d}=i,g=K(r),T=Ee(lt,d)?.coinAmountInt,f=eo({targetWalletId:d,isMpcError:g,connectable:m,chainName:u,nearAmount:T}),C=Qe({props:t,isMpcError:g,connectable:m,walletInfo:c,nearAmount:T});return j(i,a),oo.default.createElement(F,{targetDomainMetadata:r,permissionsRequestId:n,request:s,walletInfo:c,connectable:m,tipMessage:f,buttonGroup:C})},no=Ko;e();o();e();o();var zo=()=>null,so=zo;var io=so;e();o();var it=p(w());L();e();o();var nt=p(w()),co=p(Do());e();o();var ao={item:"_item_11fx7_1"};function Xo({className:t,message:r}){return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement(k,{bordered:!1,className:(0,co.default)(ao.item,t)},nt.default.createElement(xe,{message:r})))}var mo=Xo;e();o();var go=p(w());L();zt();ut();qo();e();o();var po=p(I());gt();function Jo({disabledSubmit:t,confirmBtnLoading:r,permissionsRequestId:n,cancelPermissionsRequest:s,request:a,targetDomainMetadata:i,approvePermissionsRequest:c}){let m=(0,po.useDispatch)(),u=rt(),d={actionType:M.ACTION_TYPE.CANCEL,async onClick(){u({trade:"connect_wallet",all_confirmation:"cancel"}),await s(n),await R(m)}},g=Lt({request:a,targetDomainMetadata:i,approvePermissionsRequest:c,cancelPermissionsRequest:s}),T={loading:r,disabled:t,actionType:M.ACTION_TYPE.CONFIRM,onClick:g};return[d,T]}var lo=Jo;e();o();var Et=p(w()),uo=p(se());ut();Lo();function Zo(t,r){let n=(0,Et.useRef)(r?.origin),a=(t?.providersExts?.[tt]??t?.exts)?.message?.manifestUrl,[i,c]=(0,Et.useState)(!0);return(0,uo.useMount)(()=>{(async()=>{if(a)try{let u=await Qt(a);if(u?.status===200){let d=u.data;typeof d?.url=="string"&&(n.current=d.url)}}finally{c(!1)}else c(!1)})()}),{loading:i,domain:n.current}}var fo=Zo;e();o();var xt=p(w()),It=p(I());function Qo(t){let r=(0,It.useSelector)($),n=(0,It.useSelector)(S),s=(0,It.useSelector)(ne),a=ue(t?.origin,s),[i,c]=(0,xt.useState)(null);return(0,xt.useEffect)(()=>{(async()=>{r&&n.includes(r)?c(r):a&&n.includes(a)?c(a):c(n[0])})()},[r,n,a]),i}var _o=Qo;var tr=({request:t,targetDomainMetadata:r,permissionsRequestId:n,approvePermissionsRequest:s,cancelPermissionsRequest:a,isSilentConnected:i})=>{let c=_o(r),{loading:m,domain:u}=fo(t,r),d=_e(c,tt),f=((t?.providersExts?.[tt]??t?.exts)?.message?.items||[]).filter(({name:h})=>h===Ae.TON_PROOF),C=f.length===1?`${f[0].payload||""}`:f.map(({payload:h})=>({value:h}));(0,go.useEffect)(()=>{_t("Sign Ton Proof UI",{tonAddress:d})},[d]);let y=lo({disabledSubmit:m,permissionsRequestId:n,request:t,targetDomainMetadata:r,approvePermissionsRequest:async(h,U,q)=>{try{let N=Math.round(Date.now()/1e3),J=new URL(u).host,Z=await Promise.all(f.map(async({payload:Q})=>{let at;try{_t("Call Sign Ton Proof",{tonAddress:d}),at=await ot().signTonProof({proof:{timestamp:N,domain:J,payload:Q}},d,c)}catch(ct){throw _t("Error Sign Ton Proof",{tonAddress:d,isReject:ct?.message===ee}),ct}return{payload:Q,signature:at}}));h.resultParams={domain:u,timestamp:N,signatures:Z}}catch{return jt.error({title:_("wallet_extension_ton_error_signature_support")}),null}return s(h,U,q,!i)},cancelPermissionsRequest:a});return{tonProofs:f,message:C,buttonGroup:y}},To=tr;e();o();var st=p(w()),Co=p(I());zt();function er({targetDomainMetadata:t,dappMetadata:r,alwaysNeedProof:n}){let s=(0,Co.useSelector)($),[a,i]=(0,st.useState)(null),[c,m]=(0,st.useState)(!0);return(0,st.useEffect)(()=>{(async()=>{if(!n){m(!1);return}try{(await ot().getPermittedWallets(t?.origin,!1)).length>0&&i(await ot().getPermittedWallets(t?.origin,!0))}finally{m(!1)}})()},[n]),j(r,c?null:a||s),{loading:c,isSilentConnected:!!a}}var wo=er;e();o();var yo={loading:"_loading_po7pc_1"};function or(t){let{alwaysNeedProof:r,targetDomainMetadata:n,permissionsRequestId:s,request:a}=t,i=Y(n?.origin),{walletInfo:c,connectable:m,chainName:u}=i,d=K(n),g=At({isMpcError:d,connectable:m,chainName:u}),T={props:t,isMpcError:d,connectable:m,connectSource:a?.exts?.connectSource},f=H(T),{loading:C,isSilentConnected:y}=wo({targetDomainMetadata:n,dappMetadata:i,alwaysNeedProof:r}),{tonProofs:h,message:U,buttonGroup:q}=To({...t,isSilentConnected:y}),N=h?.length>0;return C?it.default.createElement("div",{className:yo.loading},it.default.createElement(bt.Circle,{size:bt.SIZE.lg})):it.default.createElement(F,{targetDomainMetadata:{...n,host:n.origin||n.host},permissionsRequestId:s,request:a,walletInfo:c,connectable:m,tipMessage:g,buttonGroup:N?q:f,title:N?_("wallet_extension_header_connect_sign"):void 0},it.default.createElement(mo,{message:U}))}var ho=or;e();o();e();o();var rr=()=>null,Ao=rr;var So=Ao;e();o();var z=p(w());L();e();o();var Nt={root:"_root_h6iyb_1",animation:"_animation_h6iyb_14",text:"_text_h6iyb_17"};var nr=({onComplete:t})=>{let[r,n]=(0,z.useState)(!1),s=ce({dark:"/static/images/dapp/connected-success-dark.json",light:"/static/images/dapp/connected-success-light.json"});return z.default.createElement("div",{className:Nt.root},z.default.createElement(Ht,{className:Nt.animation,path:s,loop:!1,onDataReady:()=>{n(!0)},onComplete:t}),r?z.default.createElement("span",{className:Nt.text},_("wallet_home_foot_dapp_connceted")):null)},Eo=nr;var Io=({chooseAccountProps:t,showAni:r})=>{let n=t?.request?.providerTypes,s=t?.request?.providersExts,a=t?.request?.exts?.alwaysNeedProof,i=t?.request?.providerType,c=!!n,m=t?.request?.exts?.isShowWalletConnect;return W.default.createElement(W.default.Fragment,null,(()=>{switch(!0){case m:return W.default.createElement(So,{providerTypes:n,providersExts:s,...t});case c:return W.default.createElement(io,{providerTypes:n,providersExts:s,...t});case(i===Gt&&a):return W.default.createElement(no,{...t});case i===$t:return W.default.createElement(ho,{alwaysNeedProof:a,...t});default:return W.default.createElement(Ze,{...t})}})(),r&&W.default.createElement(Eo,{onComplete:()=>{t?.onComplete()}}))};var Xa=()=>{let t=(0,X.useDispatch)(),r=(0,D.useHistory)(),s=(0,D.useRouteMatch)().params.id,i=(0,X.useSelector)(me).find(A=>A.metadata.id===s),c=i?.providerTypes,[m,u]=(0,v.useState)(!1),d=(0,X.useSelector)(le),g=(0,X.useSelector)(re),{metadata:T={}}=i||{},{origin:f}=T,C=null;if(f)if(g[f])C={...g[f],origin:f},C.icon??=Kt;else{let A=new URL(f);C={host:A.host,name:A.hostname,origin:f}}let y=`${b}/${s}`,h=`${b}/${s}${B}`,U=async(A,O,G)=>{await t(Ne(A,O,G))},q=async(A,O,G)=>{await t(Me(A,O,G)),await t(vt())},N=()=>t(ve()),J=Be(),Z=()=>t(Ct.setSelectAccounts([])),Q=()=>{s&&d===pe.connect&&q(s,f)},at=()=>{Ot()===Pt&&window.addEventListener("beforeunload",Q)},ct=()=>{Ot()===Pt&&window.removeEventListener("beforeunload",Q)},Bt=()=>(ct(),r.push(Wt)),No=async(A,O)=>{A&&(await q(A,f,O),await R(t),Bt())},kt=()=>{u(!1),Bt(),t(vt())};(0,xo.useMount)(()=>{if(J(),N(),!i){r.push(Wt);return}at(),Z()});let Mo=c;return v.default.createElement("div",{className:"page-container permissions-connect"},v.default.createElement(D.Switch,null,v.default.createElement(D.Route,{path:h,exact:!0,render:()=>v.default.createElement(qe,{request:i||{},multi:!Mo})}),v.default.createElement(D.Route,{path:y,exact:!0,render:()=>v.default.createElement(Io,{chooseAccountProps:{request:i||{},cancelPermissionsRequest:(O,G)=>No(O,G),permissionsRequestId:s,targetDomainMetadata:C,onComplete:kt,approvePermissionsRequest:async(O,G,Po,Oo=!0)=>{await U(O,G,Po),await R(t),Oo?u(!0):kt()}},showAni:m})})))};export{Xa as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=PermissionsConnect-36HY37ZR.js.map
