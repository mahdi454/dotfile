import{a as Cr}from"./chunk-KXIOITHX.js";import{a as z}from"./chunk-CDVXLQA3.js";import{a as xr}from"./chunk-JBU7IWTZ.js";import{a as _r}from"./chunk-V2A2AEVZ.js";import{a as wo}from"./chunk-Z2M3JODD.js";import{a as Po}from"./chunk-UTGDPJGB.js";import{b as mr,c as ce,m as ur,o as cr,p as pr}from"./chunk-D6NWGDM6.js";import{a as Lo}from"./chunk-NJJL64HF.js";import{a as Oo}from"./chunk-ZVUQCOMJ.js";import{g as Bo}from"./chunk-TSGQQ5QA.js";import{a as fr}from"./chunk-UUX3UNZW.js";import{a as ct,b as lr,d as Ct,e as dr,f as pe,g as gt}from"./chunk-SIIB3XCZ.js";import{A as ne,B as se,F as rr,I as nr,J as sr,N as ie,O as ir,Q as ar,S as ae,T as me,Y as ue,b as Qo,c as tr,d as er,e as Ot,f as $,g as ee,i as Pt,k as oe,l as or,q as re,v as wt}from"./chunk-GUGRL7WK.js";import{a as bo,b as Fo,p as No,q as k}from"./chunk-UTVBVZWC.js";import{a as Eo}from"./chunk-4MDR2IS2.js";import{e as ho}from"./chunk-GZN3TPOZ.js";import{d as j,g as So,j as Bt}from"./chunk-GQYTOJVD.js";import{b as xo}from"./chunk-VAJR5FGA.js";import{A as yr,da as Tr}from"./chunk-2AX7AESG.js";import{D as De,E as Ho,F as Yo,G as zo,I as Go,J as Vo,L as Xo,M as Zo,N as Ko,O as qo,P as Jo,Q as jo,b as vo,f as Mo,j as Do,k as ko,n as Uo,q as Ro,t as $o,x as Wo}from"./chunk-JMTMYFWR.js";import{k as go}from"./chunk-E2MXYP3A.js";import{H as Ao,i as Io}from"./chunk-FPV6XIHQ.js";import{a as Qt,g as Co}from"./chunk-56SDY6L3.js";import{a as Hn,m as yo,n as To}from"./chunk-QHZHYX4V.js";import{a as te}from"./chunk-ZUBNNPBM.js";import{a as jt}from"./chunk-LXIBKSOK.js";import{_a as _o,a as po,f as lo,ja as fo}from"./chunk-DUKP4BLI.js";import{b as Me}from"./chunk-S3O4LR55.js";import{l as ro,m as no,q as A}from"./chunk-FZCNSMLW.js";import{o as ut}from"./chunk-KCWFMCND.js";import{sa as Jt,w as Y}from"./chunk-3TDWET6C.js";import{T as Kt,V as h,X as qt,Y as co,b as B,da as J,j as uo}from"./chunk-EBR3PGFZ.js";import{a as Le}from"./chunk-VPGNJAK6.js";import{d as Vt,f as so}from"./chunk-3HS6AHPS.js";import{c as F}from"./chunk-FDCWN4NG.js";import{Eb as K,Fb as Pe,Gb as at,Jb as Yt,Kb as je,Lb as we,Mc as Wn,Sc as Xt,Ub as Qe,Uc as ao,Vc as Zt,Wc as mo,X as Rt,Ya as $t,Zb as zt,ac as yt,dc as mt,ya as it,yc as io}from"./chunk-O3CM75EN.js";import{B as eo,H as oo,b as to,o as Gt,q as Tt}from"./chunk-J3CEQI22.js";import{K as Ut,pa as Oe,s as Je}from"./chunk-VFHYER2K.js";import{L as M,l as xt,w as f}from"./chunk-KJIO572I.js";import{c as ve,ca as q}from"./chunk-KALFZBR5.js";import{a as x}from"./chunk-EAZTJZU7.js";import{f as u,m as r,o as n}from"./chunk-ZCHLW7CF.js";r();n();var _e=u(x()),Er=u(Y()),br=u(ut());r();n();var le=u(x());mt();var ke=(0,le.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:Kt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function Q(){return(0,le.useContext)(ke)}function Lt(){let{signInfo:t}=Q();return t}function fe(){let{currencyId:t}=Q();return t}function ot(){let{params:t}=Q();return t}function Ue(){let{feeData:t}=Q();return t}function de(){let{onFeeDataChange:t}=Q();return t}function tt(){let t=Lt(),{inscriptions:e}=ot(),{inscriptionOutput:o}=Ue(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:K(i,e.length)}}function It(){let{feeData:t}=Q();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>at(e,o),"0")}}function At(){let{feeData:t}=Q();return t.commitTxFee}function X(){let{feeData:{feeSelectedSat:t={}}}=Q(),{type:e}=t,o=Lt(),i;return e===h.CUSTOM?i=t.satBytes:i=o?.[co[e]],{...t,satBytes:i||o?.normal||0}}function gr(){let{feeData:t}=Q();return t.canTransferAmount}function Ir(){let{lifecycle:t}=Q();return t}r();n();var Ar=u(x());function Yn(t,e){let o=j(e),[,i]=Oo({coinId:e,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Ar.useMemo)(()=>i||{},[i])}var Sr=Yn;function zn({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:c,...l}=o,p=(0,Er.useSelector)(Jt),y=Sr(m,c),[_,C]=(0,_e.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:h.STANDARD},canTransferAmount:"0"}),v=(0,br.useMemoizedFn)((I,T)=>{C(S=>({...S,[I]:T}))});return _e.default.createElement(ke.Provider,{value:{signInfo:y,currencyId:e??p.currencyId,params:{...l,netWorkCoinId:c,from:m,to:a||m},lifecycle:i,feeData:_,onFeeDataChange:v}},s)}var Re=zn;r();n();r();n();var L=u(x()),Se=u(ut());M();r();n();var St=u(x()),$e=u(ve());r();n();var vt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Gn({className:t,loading:e,slot:o={},children:i,contentClassName:s}){let{header:m,footer:a,top:c}=o;return St.default.createElement(F.Container,{loading:e,className:(0,$e.default)(vt.root,t)},St.default.createElement(F.Box,{className:vt["send-page-base-container__header"]},m),St.default.createElement(F.Box,{className:vt["send-page-base-container__wrapper"]},c,St.default.createElement(F.Box,{className:vt["send-page-base-container__inner-wrapper"]},St.default.createElement(F.Box,{className:(0,$e.default)(vt["send-page-base-container__content"],s)},i),St.default.createElement(jt,{usePortal:!0,offsetBottom:0,placeholder:!0},a))))}var xe=Gn;r();n();var He=u(x());Oe();r();n();var G=u(x());M();r();n();var Fr=u(x()),We=u(Y());mt();var hr=(t,e)=>{let o=t.coinId,i=go(o),s=(0,We.useSelector)(Jt),m=(0,We.useSelector)(({metamask:l})=>l.currencies),a=(0,Fr.useMemo)(()=>e&&m?.find(l=>l.currencyId===e)||s,[e]),c=K(i,a?.usdToThisRate);return Lo(Qe,l=>{let p=no(l,{symbol:t.symbol}),y=ro(K(l,c),{useApproximate:!1,symbol:a.symbol});return`${p}(${y})`})};$t();mt();var Nr=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m})=>{let a=wo(),{coin:c,baseCoin:l}=Eo(i,!0),[p,y]=(0,G.useState)(e?.customSatBytes),_=hr(l,s),C=f("extension_wallet_transaction_text_minute");(0,G.useEffect)(()=>{!p&&o?.normal&&y(o?.normal)},[o]);let v=(0,G.useCallback)(g=>{y(g)},[]),I=(0,G.useCallback)(()=>{m?.({customSatBytes:p,type:h.CUSTOM,satBytes:p})},[p]),T=c.localType===Rt?f("wallet_extension_transfer_unit_sat_b"):"",S=(0,G.useMemo)(()=>{let{min:g,mempoolMin:O}=o,E=O||g||0;return Yt(p,E)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:E}):""},[p,o]);return(0,G.useMemo)(()=>[h.SLOW,h.STANDARD,h.FAST,h.CUSTOM].map(g=>{switch(g){case h.SLOW:return{data:{type:h.SLOW,satBytes:o.min,estimatedTime:`${yt(o.maxCost)} ${C}`},unitPrice:`${o.min} ${T}`,totalPrice:_(K(o.min,t),s),type:f(qt[h.SLOW]),typeKey:h.SLOW,estimatedTime:`${yt(o.maxCost)} ${C}`};case h.STANDARD:return{data:{type:h.STANDARD,satBytes:o.normal,estimatedTime:`${yt(o.normalCost)} ${C}`},unitPrice:`${o.normal} ${T}`,totalPrice:_(K(o.normal,t),s),type:f(qt[h.STANDARD]),typeKey:h.STANDARD,estimatedTime:`${yt(o.normalCost)} ${C}`};case h.FAST:return{data:{type:h.FAST,satBytes:o.max,estimatedTime:`${yt(o.minCost)} ${C}`},unitPrice:`${o.max} ${T}`,totalPrice:_(K(o.max,t),s),type:f(qt[h.FAST]),typeKey:h.FAST,estimatedTime:`${yt(o.minCost)} ${C}`};default:return{unitPrice:`${o.max} ${T}`,totalPrice:_(K(p,t),s),estimatedTime:a(o,p),canConfirm:!S,onConfirm:I,components:()=>G.default.createElement(Tt.Number,{enableMinus:!1,precision:0,error:S,errorType:Tt.TIP_TYPE.always,onChange:v,value:p,size:Tt.SIZE.sm,title:T,className:"custom-network-fee__satb"})}}}),[t,o,p])};var Vn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:c})=>{let l=Nr({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m});return He.default.createElement(Po,{feeType:t?.type,feeDataList:l?.slice(0,3),onBack:a,visible:c,custom:Je(l),onChange:({data:p})=>{s?.(p)}})},Br=He.default.memo(Vn);$t();r();n();var rt=u(x());$t();M();var Pr=u(ut());r();n();var w=u(x());M();r();n();var Et={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var ye=330,Te=1e4,Xn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,c]=(0,w.useState)(String(o));(0,w.useEffect)(()=>{c(String(o))},[o]),(0,w.useEffect)(()=>{e&&c(String(o))},[o,e]);let l=Bt(t,a,{currencyId:i,useApproximate:!1});return w.default.createElement(Gt.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:e,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},w.default.createElement(F.Box,{className:Et["output-panel__content"]},w.default.createElement(Tt.Number,{precision:0,value:a,max:Te,min:ye,size:Tt.SIZE.xl,onChange:p=>{c(p)},suffix:w.default.createElement(A.Text,{size:A.SIZE.sm},"sats")}),w.default.createElement(A.Text,{className:Et["output-panel__compare"],type:A.TYPE.secondary,size:A.SIZE.sm},l),w.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},w.default.createElement(eo,{value:a,min:ye,max:Te,contentClassName:Et["output-panel-slider__content"],onChange:p=>{c(String(p))}}),w.default.createElement(F.FlexBox,{justify:"space-between"},w.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${ye} sats`),w.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${Te} sats`)))),w.default.createElement(F.Box,{className:Et["output-panel__button"]},w.default.createElement(q,{disabled:!a||!a?.trim(),category:q.CATEGORY.fill,type:q.TYPE.highlight,size:q.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,ye),Te)),s?.()}},f("extension_transactions_btn_confirm"))))},Or=Xn;var Zn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=it,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[c,{toggle:l}]=(0,Pr.useBoolean)(!1),p=xt.gt(m,0)?m:"0",y=Bt(s,p,{currencyId:e,useApproximate:!0}),_=(0,rt.useMemo)(()=>uo(t),[t]);return rt.default.createElement(rt.default.Fragment,null,rt.default.createElement(ct,{clickable:t===B.RUNES_ETCH?!1:void 0,onClick:()=>{xt.gt(i,0)&&l()},title:f(_)},rt.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&rt.default.createElement(A.Text,{className:Et["output-tag"]},"x",o),y)),rt.default.createElement(Or,{coinId:s,visible:c,currencyId:e,outputValue:i,onClose:l,onChange:a}))},wr=Zn;r();n();M();var Ce=u(x()),Kn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=j(t),s=Bt(t,o,{currencyId:e,useApproximate:!0});return Ce.default.createElement(ct,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},Ce.default.createElement(A.Text,{inherit:!0,strong:700},Ce.default.createElement(A.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},Lr=Kn;r();n();var kr=u(x()),Ur=u(Le()),Rr=u(ut()),$r=u(Hn());M();r();n();M();so();r();n();var vr=u(x());Oe();so();$t();mo();ao();function qn({walletId:t,utxoType:e=1,coinId:o=it}={}){let i=Qt();return(0,vr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:c})=>{let l=await Vt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),p={address:s,coinAmount:m,serviceCharge:a,utxoType:e};Ut(c);let y={coinId:o,utxoRequests:[p]};try{let{data:_}=await Xt(Zt.getBTCUTXO,y,{headers:l});return _?.[0]||{}}catch(_){return{error:!0,errorResp:_}}},[o,i,e,t])}var ge=qn;$t();mt();r();n();var Mr=u(x());function Jn(t){let{inscriptionOutput:e}=tt(),{satBytes:o}=X(),{walletId:i,from:s,to:m,inscriptions:a,txType:c,mintType:l}=ot(),p=cr(t),y=pr();return(0,Mr.useCallback)(async _=>{let C={};return c===B.RUNES_ETCH?(C={input:_.map(({txHash:T,vout:S,coinAmount:g})=>({vOut:S,txId:T,amount:g})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:T})=>JSON.parse(T))},await y({walletId:i,address:s,tx:C,txType:c,mintType:l})):(C={commitTxPrevOutputList:_.map(({txHash:I,vout:T,coinAmount:S})=>({vOut:T,txId:I,amount:S})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:I,body:T})=>({contentType:I,body:T})),revealOutValue:e,changeAddress:s,toAddr:m},await p({walletId:i,address:s,tx:C,txType:c}))},[s,m,a,e,o])}var Ie=Jn;function jn(t=it){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:c,mintType:l}=ot(),p=Lt(),y=fe(),_=ur({address:o,coinId:t,currencyId:y,txType:a,protocolId:c}),C=Ie(ce.CONFIRM),v=ge({walletId:e,utxoType:s,coinId:t}),{beforePostTx:I}=Ir(),{inscriptionOutput:T,total:S}=tt(),{totalFee:g}=It(),O=At(),{satBytes:E}=X(),D=async N=>{let{commitTx:b,revealTxs:P,commitAddrs:U,commitTxFee:H,revealTxFees:et}=await C(N.utxoList||[]),Z=await bo(Rt,b),ft=await Fo(Rt,P),Nt=[Z,...ft],dt={signedTx:b,fromAdr:o,serviceCharge:H,toAdr:i||o,itemId:"commitTx",txHash:Z,txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e},R=P.map((Ht,_t)=>({signedTx:Ht,fromAdr:U?.[_t]||o,serviceCharge:et?.[_t],toAdr:i||o,itemId:`revealTx${_t}`,txHash:ft[_t],dependTx:l===Kt.serial?[Nt[_t]]:[Z],txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e})),st=!1;if(I&&(st=I(dt,R)),st)return{commitParams:dt,revealParams:R,commitTx:b,revealTxs:P,commitAddrs:U,commitTxFee:H,revealTxFees:et,feeRate:parseInt(E,10),size:parseInt(T,10)};let kt=await Vt().getRequestHeaders({walletId:e,needSign:!0,currency:"usd"});return{txIds:await Io({txList:[dt,...R]},{headers:kt}),commitTx:b,revealTxs:P,commitAddrs:U,commitTxFee:H,revealTxFees:et,feeRate:parseInt(E,10),size:parseInt(T,10)}},lt=async()=>{let N=await v({from:o,coinAmount:at(S,g),serviceCharge:O,feeRate:E}),b=N.utxoList||[];return await _(b,()=>{}),await D(N)};return()=>new Promise((N,b)=>{if(typeof p?.txSizeLimit=="number"&&m.length>p.txSizeLimit){let P=Gt.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let U=await lt();N(U)}catch(U){b(U)}P.destroy()},onConfirm:()=>{b(new Error(ue)),P.destroy()}})}else(async()=>{try{let P=await lt();N(P)}catch(P){b(P)}})()})}var Dr=jn;var Qn=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:c,addressType:l,useTipMessageFillUp:p,onFillUp:y,netWorkCoinId:_},C)=>{let v=(0,Ur.useHistory)(),I=Dr(_),T=Bo(o,a),S=(0,Rr.useMemoizedFn)(async()=>{try{await T();let g=await I();m&&await m(g)}catch(g){if(!(g?.message===ue)){let E=g?.data?.msg||g?.msg||g?.data?.originalError?.msg||f("wallet_home_toast_network_error");oo.error({title:E})}}},[m]);return(0,kr.useMemo)(()=>{let g=a?{actionType:k.ACTION_TYPE.CANCEL,onClick:a}:null,O={disabled:c,actionType:k.ACTION_TYPE.CONFIRM,onClick:S};return!i&&[J.BALANCE_INSUFFICIENT,J.FEE_BALANCE_INSUFFICIENT].includes(C)&&(g=g||{actionType:k.ACTION_TYPE.CANCEL,onClick:()=>{v.goBack()}},p?O={actionType:k.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{y&&await y();let E=$r.default.stringify({addressType:l,coinId:e},{skipEmptyString:!0,skipNull:!0}),D=E?`?${E}`:"";v.push(_o+D)}}:O={txId:t,coinId:e,address:s,walletId:o,actionType:k.ACTION_TYPE.FILL_UP}),[g,O]},[a,c,S,i,C,p,v,l,t,e,s,o,y])},Wr=Qn;r();n();M();r();n();var Hr=u(x());mt();function Yr(){let{totalFee:t}=It(),{satBytes:e}=X();return zt(Pe(t,e),0)}function zr(){let t=At(),{satBytes:e}=X();return zt(Pe(t,e),0)}function Gr(){let{totalFee:t}=It(),e=At();return(0,Hr.useMemo)(()=>at(t,e),[t,e])}r();n();r();n();var bt=u(x());mt();function ts(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=ot(),[a,c]=(0,bt.useState)(!0),[l,p]=(0,bt.useState)(!0),[y,_]=(0,bt.useState)(null),[C,v]=(0,bt.useState)([]),I=ge({walletId:o,utxoType:s,coinId:m}),T=Ie(ce.CAL_FEE),{satBytes:S}=X(),{total:g}=tt(),O=de(),{totalFee:E}=It(),D=At();return(0,bt.useEffect)(()=>{!e&&(async()=>{if(!je(g,0))try{p(!0);let N=await I({from:i,coinAmount:at(g,E),serviceCharge:D,feeRate:S});if(!N?.utxoList?.length){_(z.BALANCE_NOT_ENOUGH);return}if(N.error){let U=N.errorResp.code,H=z.COMMON_ERROR;[z.BALANCE_NOT_ENOUGH,z.PURE_UTXO_NOT_ENOUGH].includes(U)&&(H=U),_(H);return}O("canTransferAmount",N.canTransferAmount||"0"),_(null);let{commitTxFee:b,revealTxFees:P}=await T(N.utxoList);v(N.utxoList),O("commitTxFee",b),O("revealTxFees",P)}catch{_(z.COMMON_ERROR),O("commitTxFee","0"),O("revealTxFees",[])}finally{c(!1),p(!1)}})()},[i,S,g,E,D,T,e]),{isInitLoading:a,isLoading:l,error:y,utxoList:C}}var Vr=ts;function es(t){let{disabled:e=!1}=t||{},o=Gr(),{total:i}=tt(),s=gr(),m=Ue(),{isInitLoading:a,isLoading:c,error:l,utxoList:p}=Vr({disabled:e});return{isInitLoading:a,isLoading:c,error:l,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:p}}var Ae=es;var os=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=Ae(),m=Lt(),a=zr(),c=Yr(),l=xt.add(a,c),p=X(),y=de();return{bytes:l,signInfo:m,feeError:o,selectedSat:p,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:y}},Xr=os;r();n();var Kr=u(x());M();r();n();var rs=[B.BRC20_DEPLOY,B.BRC20_MINT,B.BRC20_INSCRIBE,B.ORDINAL_NFT,B.ORDINAL_TEXT,B.EARN_BRC30_DEPLOY,B.EARN_BRC30_APPLY,B.EARN_BRC30_REDEEM,B.EARN_BRC30_CLAIM,B.BRC30_INSCRIBE,B.RUNES_ETCH];function Zr(t){return rs.indexOf(t)>-1}var ns=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a})=>(0,Kr.useMemo)(()=>Zr(t)?i&&t===B.RUNES_ETCH?{type:gt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:gt.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===z.COMMON_ERROR?{type:gt.TIP_TYPE.FEE_ERROR}:e===z.BALANCE_NOT_ENOUGH?{type:pe.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===z.PURE_UTXO_NOT_ENOUGH?{type:pe.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:pe.BALANCE_INSUFFICIENT}:{message:m}:{type:gt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m]),qr=ns;r();n();var Ye={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function ss({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=it}){let{from:m,walletId:a,txType:c}=ot(),l=To(a),p=yo(a),[y,{toggle:_}]=(0,Se.useBoolean)(!1),C=fe(),I=Co()[m],{bytes:T,signInfo:S,feeError:g,selectedSat:O,feeLoading:E,networkFee:D,canTransferAmount:lt,utxoListCount:N,onFeeDataChange:b}=Xr(),{title:P,...U}=e,{inscriptionOutput:H,inscriptionsCount:et,total:Z}=tt(),ft=(0,L.useMemo)(()=>xt.add(D,Z),[D,Z]),Nt=j(s),{showManageUTXO:dt}=Cr(Nt||{},I,!0),R=dt&&g!==z.PURE_UTXO_NOT_ENOUGH,{type:st,message:kt}=qr({txType:c,feeError:g,feeLoading:E,utxoListCount:N,isHardware:l,isMpcWallet:p,canTransferAmount:lt,networkFee:D,totalUsedCoinAmount:ft,coin:Nt}),qe=Wr({txId:t,walletId:a,coinId:s,addressType:I,disabled:!!st||!!g||!!E||l||N>100,useTipMessageFillUp:R,netWorkCoinId:s,...i},st),Ht=_r(a),_t=(0,Se.useMemoizedFn)(Be=>{b("commitTxFee","0"),b("revealTxFees",[]),b("inscriptionOutput",Be)},[]),{top:Rn,footer:$n}=o;return L.default.createElement(xe,{slot:{header:L.default.createElement(te,{title:P||f("extension_wallet_header_maintitle_inscribe"),...U}),footer:$n||L.default.createElement("div",{className:Ye.actions},L.default.createElement(gt,{type:st||to.TYPE.warn,address:m,message:kt,coinId:s,walletId:a,fillUpAble:R}),L.default.createElement(k,{buttonGroup:qe}))}},Rn,L.default.createElement(Ct,null,L.default.createElement(ct,{title:f("wallet_info_title_inscribe_service_fee")},L.default.createElement(A.Text,{className:Ye["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),L.default.createElement(fr,{coinId:s,loading:E,currencyId:C,networkFee:E&&D==="0"?void 0:D,estimateFailed:!E&&!Number(D),onClick:()=>{_?.(),Ht({trade:"brc20",all_confirmation:"network_fee"})}}),L.default.createElement(wr,{txType:c,currencyId:C,inscriptionsCount:et,inscriptionOutput:H,totalInscriptionCoinAmount:Z,onInscriptionOutputChange:_t,coinId:s})),L.default.createElement(Ct,null,L.default.createElement(Lr,{coinId:s,currencyId:C,totalCoinAmount:ft})),L.default.createElement(Ct,{bordered:!1},L.default.createElement(dr,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Ht({trade:"brc20",all_confirmation:"wallet_used_address"})}})),L.default.createElement(Br,{bytes:T,currencyId:C,value:O,coinId:s,onClose:_,signInfo:S,visible:y,onChange:Be=>{b("commitTxFee","0"),b("revealTxFees",[]),b("feeSelectedSat",Be)}}))}var ze=ss;r();n();var ht=u(x());M();r();n();var Qr=u(x()),tn=u(Y());Wn();r();n();var Jr=u(x());function is(){let{coin:t}=$(),e=Pt();return(0,Jr.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var jr=is;function as({walletId:t,txSource:e,children:o}){let i=jr(),s=re(),m=oe(),{coin:a}=$(),c=ee(),l=wt(),p=Qt(),y=B.BRC20_INSCRIBE,_=(0,tn.useSelector)(yr),C=(I,T)=>{I.coinAmount=m,I.coinId=T?c.coinId:a.coinId,I.txSource=e||io.NORMAL},v=(I,T)=>{I&&C(I,!0),Array.isArray(T)&&T.forEach(S=>{C(S,!1)})};return Qr.default.createElement(Re,{defaultFeeData:_,currencyId:s,params:{walletId:t||p,from:l,inscriptions:i,utxoType:mr.INSCRIPTION_USE_NFT_UTXO,txType:y,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:v}},o)}var Ee=as;r();n();var W=u(x()),Dt=u(Y()),bn=u(ve());Oe();M();r();n();var on=u(x()),rn=u(Le()),nn=u(ve());r();n();var en={root:"_root_ryl3e_1"};function ms({onBack:t,onClose:e,pageIndex:o,...i}){let s=(0,rn.useHistory)(),m=()=>{t&&t(),s.goBack()},a=()=>{e&&e(),s.go(-o)};return on.default.createElement(te,{className:(0,nn.default)(en.root,i.className),onClose:a,onBack:m,...i})}var sn=ms;r();n();var an=u(Le()),Ge=u(Y());var mn=u(ut());function us(t){let e=(0,an.useHistory)(),o=(0,Ge.useSelector)(vo),i=Ot(),{coin:s}=$(),m=(0,Ge.useSelector)(Mo),a=tr();(0,mn.useMount)(()=>{if(!!t){if(xo(s))e.replace(o||po);else if(!m){let c={pathname:`${lo}/${i}${fo}`};a&&(c.search=`?from=${a}`),e.replace(c)}}})}var un=us;r();n();var yn=u(x()),Tn=u(Y());r();n();var Ft=u(x());M();r();n();var fn=u(x());r();n();var nt=u(x()),pn=u(ut());M();r();n();var cn={root:"_root_26a1b_1"};var cs=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s})=>{let[m,{setTrue:a,setFalse:c}]=(0,pn.useBoolean)();(0,nt.useEffect)(()=>{e&&e(m)},[m]);let l=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("div",{className:cn.root,onClick:a,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:l})),nt.default.createElement(No,{address:i,visible:m,closeCallback:c,coinId:t.coinId,receiveOnly:o}))},ln=(0,nt.memo)(cs);var dn=u(Y());function ps(t){let e=(0,dn.useDispatch)(),o=wt();return fn.default.createElement(ln,{address:o,...t,onVisible:s=>{e(qo(s))}})}var Ve=ps;var ls=()=>{let{coin:t}=$(),e=ee();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===J.BALANCE_INSUFFICIENT?Ft.default.createElement(Ft.default.Fragment,null,s," ",Ft.default.createElement(Ve,{coin:t,receiveOnly:!0})):i?.type===J.FEE_BALANCE_INSUFFICIENT?Ft.default.createElement(Ft.default.Fragment,null,s," ",Ft.default.createElement(Ve,{coin:e})):s}},_n=ls;r();n();var xn={root:"_root_g697e_1"};function fs({renderError:t}){let e=(0,Tn.useSelector)(Do),o=_n(),i=t||o;if(!e.key)return null;let s=i(e);return yn.default.createElement("div",{className:xn.root},s)}var Cn=fs;r();n();var pt=u(x());M();r();n();var Mt={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var ds=(t,e)=>{let{coin:o}=$(),i=er(),s=ar(),m=ae(),a=me(),l={total:s,amount:m,available:a}[t];return`${i(e||l,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},gn=ds;function _s(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function xs({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},...c}){let{coin:l}=$(),p=gn(t,i),{bottom:y}=a;return pt.default.createElement(F.Box,{className:Mt.container},pt.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Mt.totalAmount,...c},pt.default.createElement(Me,{size:Me.SIZE.lg,src:l?.image,text:l?.symbol}),pt.default.createElement(F.Box,{className:Mt["totalAmount-content"]},pt.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs,className:Mt["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),pt.default.createElement(A.Text,{ellipsis:{tooltip:!0},className:Mt["totalAmount-amount"],style:{fontSize:_s(p)}},p)),!s&&pt.default.createElement(q,{category:q.CATEGORY.fill,type:q.TYPE.gray,size:q.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),y)}var In=xs;r();n();mt();var ys=()=>{let t=me();return Yt(t,0)&&(t="0"),t},An=ys;r();n();var Sn=u(ut());M();var Ts=({loading:t,disabled:e,onClick:o,...i})=>(0,Sn.useCreation)(()=>[{loading:!e&&t,disabled:e,onClick:o,actionType:k.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_send_btn_continue"),...i}],[e,t,o,i]),Cs=({disabled:t,onClick:e,...o})=>{let i=ir(),s=ie();return Ts({...o,disabled:t||s,onClick:e||i})},En=Cs;r();n();var Xe={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function gs({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:c={},checkEmpty:l=!0,inputAmount:p,customMaxAmount:y}){let _=(0,Dt.useDispatch)(),{content:C}=c,{header:v,bottom:I,footer:T}=a,S=(0,W.useRef)(),g=(0,Dt.useSelector)($o),O=Ot(),E=Pt(),D=(0,Dt.useSelector)(ko),lt=(0,Dt.useSelector)(Ro),N=re(),b=or(),P=An(),U=y||P,{amount:H}=xr(),et=(0,W.useRef)(!!E),Z=R=>{_(Xo(R))},ft=()=>{_(De(U)),Z(!0)},Nt=m.onMax||ft;un(l),(0,W.useEffect)(()=>{Ut(p)||S.current?.setInputAmount(p.toString()),Ut(H)||S.current?.setInputAmount(H)},[p,H]);let dt=En(i);return W.default.createElement(xe,{loading:t,slot:{header:v||W.default.createElement(sn,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:t?null:T||W.default.createElement(k,{buttonGroup:dt})}},W.default.createElement("div",{className:(0,bn.default)(C,Xe.content)},W.default.createElement(ho,{ref:S,...s,autoFocus:!g,coinId:O,maximumMode:b,maximumAmount:b?U:null,initialValue:{value:[E||"0",D||"0"],mode:lt,flatCurrencyId:N},onAmountChange:([R,st],kt)=>{_(Yo(st)),_(De(R)),kt&&(Z(!1),et.current=!0)},onModeChnage:R=>{_(zo(R))},onFlatChange:R=>{R&&_(Zo(R.currencyId))}}),et.current&&W.default.createElement(Cn,{renderError:e}),W.default.createElement(jt,{usePortal:!0,offsetBottom:m?.fixBottom?80:104,className:Xe.totalAmountWrap},W.default.createElement(In,{...m,onMax:()=>{Nt(),et.current=!0}})),I))}var Fn=gs;r();n();var hn=u(x());mt();var Nn=u(Y());function Ze(){let t=ae();return(0,hn.useCallback)(e=>we(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:J.COMMON_ERROR}:null,[t])}function Is(){let t=(0,Nn.useDispatch)(),e=rr(),o=Ze(),i=[e,o],{runErrorFns:s}=se(i);ne(s,m=>{t(Ho(m))})}var Bn=Is;r();n();var On=u(Y()),be=u(x());ao();mo();function As(){let t=(0,On.useDispatch)(),e=wt(),{coin:o}=$(),[i,s]=(0,be.useState)(!0);return(0,be.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await Xt(Zt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(Jo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Pn=As;r();n();var Wt=u(x());var wn=u(Y());function Ss(){let t=(0,wn.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=Ae();return(0,Wt.useEffect)(()=>{t(jo(m))},[m]),(0,Wt.useEffect)(()=>{t(Go(i))},[i]),(0,Wt.useEffect)(()=>{t(Tr(s))},[s]),(0,Wt.useEffect)(()=>{t(Vo(!!o))},[o]),e}var Fe=Ss;function Es({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=ie(),a=Fe(),c=Pn(),l=(0,ht.useMemo)(()=>{let p=null;return typeof e=="function"&&(p={actionType:k.ACTION_TYPE.CANCEL,onClick:e}),[p,{actionType:k.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[a,m,e,o]);return Bn(),ht.default.createElement(Fn,{...s,inputAmount:t,isGlobalLoading:c,slot:{...i||{},footer:ht.default.createElement(k,{buttonGroup:l})},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function bs({walletId:t,...e}){return ht.default.createElement(Ee,{walletId:t},ht.default.createElement(Es,{...e}))}var Ll=bs;r();n();var V=u(x()),kn=u(Y());M();r();n();var he=u(x()),vn=u(ut());M();r();n();var Ln={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var Fs=({coinId:t,amount:e})=>{let o=j(t),{loading:i,data:s}=(0,vn.useRequest)(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await Ao(m))?.brcJson||""});return he.default.createElement(ct,{title:f("extension_wallet_transaction_item_inscribe_preview")},he.default.createElement(F.Spin,{loading:i},he.default.createElement(A.Text,{className:Ln["preview-json"]},s)))},Mn=Fs;r();n();var Ke=u(x()),Ne=u(Y());function hs(t){let e=(0,Ne.useSelector)(Uo);return(0,Ke.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:J.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Ns(){let t=Ze();return(0,Ke.useCallback)(e=>{let o=t(e);return o?{...o,highlight:nr.AMOUNT}:null},[t])}function Bs(t,e){let o=(0,Ne.useDispatch)(),i=j(e),s=hs(i),m=sr(),a=Ns(),c=[s,m,a],{runErrorFns:l}=se(c);ne(l,p=>{o(Ko(p))},t)}var Dn=Bs;function Os({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let s=(0,kn.useDispatch)(),m=Pt(),a=Ot(),[,c]=So(a),l=oe(),p=Fe(),y=(0,V.useCallback)(async()=>{await s(Wo(!1))},[s]);return Dn(p,a),V.default.createElement(ze,{walletId:i,slot:{top:V.default.createElement(V.default.Fragment,null,V.default.createElement(Ct,null,V.default.createElement(lr,{summaryList:[{coinId:a,coinAmount:l}],title:f("extension_wallet_transaction_item_inscribe")})),V.default.createElement(Ct,null,V.default.createElement(Mn,{coinId:a,amount:m})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:y},netWorkCoinId:c?.coinId})}function Ps({txSource:t,walletId:e,...o}){return V.default.createElement(Ee,{txSource:t,walletId:e},V.default.createElement(Os,{walletId:e,...o}))}var If=Ps;r();n();var Un=u(x());function ws({children:t,...e}){return Un.default.createElement(Qo.Provider,{value:e},t)}var Ff=ws;export{xe as a,sn as b,un as c,Ve as d,Ts as e,Fn as f,ge as g,Br as h,ot as i,ze as j,Re as k,Ll as l,If as m,Ff as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-JAXPFHLZ.js.map
