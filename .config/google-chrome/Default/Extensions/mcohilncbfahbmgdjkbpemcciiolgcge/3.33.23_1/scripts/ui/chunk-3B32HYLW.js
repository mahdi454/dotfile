import{j as I}from"./chunk-A3B5II6P.js";import{d as b}from"./chunk-E2MXYP3A.js";import{c as B,v as h,w as C}from"./chunk-FPV6XIHQ.js";import{o as _}from"./chunk-KCWFMCND.js";import{d as P,f as R}from"./chunk-3HS6AHPS.js";import{Eb as y,Vb as w,Ya as W,da as d,dc as v,ub as m,wb as k}from"./chunk-O3CM75EN.js";import{a as M}from"./chunk-EAZTJZU7.js";import{f as x,m as F,o as S}from"./chunk-ZCHLW7CF.js";F();S();var s=x(M()),N=x(_());R();k();W();v();async function j({coinId:t,address:o,transaction:n}){let e={type:"simulate",base:{sequenceNumber:"",chainId:0,maxGasAmount:"",gasUnitPrice:"",expirationTimestampSecs:""},data:{abi:"[]",data:JSON.stringify(n)}},a=n.function.split("::")[0],r={coinId:t||m,address:o},i={fromAddr:o,toAddr:a},{info:u}=await B(r,i);e.base=u;let c=n.function.split("::")[1],p=await C({address:a,name:c});return e.data.abi=JSON.stringify(p),await P().signTransaction(e,o,d)}async function Y({address:t,transaction:o}){let n={coinId:m,address:t},e={fromAddr:t},a=await j({address:t,transaction:o}),{fee:r}=await h(n,e,a);return r}var Z=({coinId:t,address:o,requestId:n,gasUnitPrice:e,maxGasAmount:a}={})=>{let[r,i]=(0,s.useState)({}),[u,c]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),l=(0,N.useLatest)(t),O=()=>{c(!0),f(!1),i({})};function E(){i({gasUnitPrice:e,maxGasAmount:a,fee:y(e,a)}),f(!1),c(!1)}async function J(){try{let A={coinId:t,address:o},L={fromAddr:o},g="";n&&(g=await I(n));let T=await h(A,L,g);T&&l.current===t&&(i(T),f(!1))}catch{l.current===t&&f(!0)}finally{l.current===t&&c(!1)}}return(0,s.useEffect)(()=>{(async()=>{if(e&&a){E();return}!t||!o||await J()})()},[t,o,n,e,a]),{loading:u,aptosFee:r,estimateFailed:p,resetState:O}},$=()=>{let t=b();return(0,s.useMemo)(()=>{let n=t.find(e=>e.coinId==m)?.coinAmountInt||0;return w(n)},[m])};export{Y as a,Z as b,$ as c};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-3B32HYLW.js.map
