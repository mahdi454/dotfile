import{b as Bo,f as vo,g as Lo,h as Mo}from"./chunk-4A36HNCI.js";import{a as No,b as tt,c as W,d as bo,e as So}from"./chunk-4M6JJEH3.js";import{m as ko}from"./chunk-SAKTBF4N.js";import"./chunk-5GDA7ZVW.js";import{a as Fo}from"./chunk-HOITYUNE.js";import{a as Ao}from"./chunk-M7DGEDWH.js";import{a as et}from"./chunk-3OHPQNDG.js";import"./chunk-H3WNV4JD.js";import{a as Po}from"./chunk-KREYO6N2.js";import{a as lt}from"./chunk-SZXMH4IF.js";import{a as wo}from"./chunk-BYVVOWXW.js";import"./chunk-ZCIPA4CD.js";import{a as yo}from"./chunk-V2C2H4YP.js";import{h as ho}from"./chunk-ID2G3YUZ.js";import{a as Eo}from"./chunk-7KXE5PFN.js";import"./chunk-F7YYSTTZ.js";import{a as Je}from"./chunk-SYQTAGUC.js";import"./chunk-X6LGMUFV.js";import{d as Io}from"./chunk-6M2GCKDH.js";import{a as lo,b as uo,c as fo,e as Co}from"./chunk-JWQGMLG5.js";import{d as To,e as xo,h as ye}from"./chunk-SUU55JAC.js";import{d as fe}from"./chunk-4RVQOPYQ.js";import{a as _o}from"./chunk-CCXOIJJY.js";import"./chunk-EU22H7NN.js";import{a as po}from"./chunk-KTRYKYE5.js";import{a as oe}from"./chunk-V2A2AEVZ.js";import{a as Z,e as co}from"./chunk-5NP5YBP7.js";import{a as io,b as so,d as mo}from"./chunk-AFGI3MHV.js";import"./chunk-Z2M3JODD.js";import"./chunk-XVRO6N6T.js";import"./chunk-UTGDPJGB.js";import"./chunk-NV3OX353.js";import"./chunk-3QYKNWJE.js";import"./chunk-NJJL64HF.js";import"./chunk-CK5YETQI.js";import"./chunk-ZVUQCOMJ.js";import{d as ao}from"./chunk-TSGQQ5QA.js";import"./chunk-KU3DITYD.js";import"./chunk-7CWLH6ZR.js";import"./chunk-3YTH2U6Q.js";import"./chunk-TN557PDS.js";import"./chunk-SYF5MRVO.js";import{a as Ze}from"./chunk-UUX3UNZW.js";import"./chunk-QCTV4R7X.js";import{d as X,e as ve,g as ge}from"./chunk-SIIB3XCZ.js";import"./chunk-GUGRL7WK.js";import"./chunk-6ZHQ2QLX.js";import"./chunk-S4NIXE4H.js";import{a as Zt,q as b}from"./chunk-UTVBVZWC.js";import"./chunk-GL4YYTXQ.js";import"./chunk-4MDR2IS2.js";import{c as no}from"./chunk-GZN3TPOZ.js";import"./chunk-ZN3567SM.js";import"./chunk-SJCGLHGC.js";import"./chunk-GQYTOJVD.js";import{a as ct}from"./chunk-7HZMPY3W.js";import"./chunk-QTEBOXIQ.js";import{a as go}from"./chunk-K4WB5MMU.js";import"./chunk-FWZNHZQB.js";import{d as $e}from"./chunk-FXQ35K27.js";import{a as Ce}from"./chunk-FSQDFL3V.js";import"./chunk-YLJ56YQC.js";import"./chunk-YVC4CAU2.js";import"./chunk-K4MSA5MN.js";import"./chunk-4HBLPFAF.js";import"./chunk-TJW4EUGS.js";import{a as Xt}from"./chunk-SJRV5U24.js";import"./chunk-PUMQ7BEU.js";import"./chunk-4OKCKO5L.js";import"./chunk-VAJR5FGA.js";import"./chunk-SKK4O3IC.js";import"./chunk-L4BR2EHM.js";import"./chunk-AQH6QKNE.js";import"./chunk-6IVHTBSR.js";import{a as Yt}from"./chunk-5IJLIHE4.js";import"./chunk-75OW6LUI.js";import"./chunk-W4IULSMQ.js";import"./chunk-UXRYSOKP.js";import"./chunk-ABSI53HE.js";import"./chunk-JJIQEHOY.js";import"./chunk-VWSK5RHD.js";import"./chunk-E4XNFX7S.js";import"./chunk-6VTLAKSD.js";import"./chunk-L6WH2C7V.js";import{b as jt}from"./chunk-HC6T2TFK.js";import"./chunk-FAJ2Q5PZ.js";import{b as qt}from"./chunk-5U7ZXBMP.js";import"./chunk-C77TCOTM.js";import"./chunk-EBBN5EW3.js";import{a as Ht,b as Ut}from"./chunk-KA5VAELR.js";import"./chunk-JOXGYPV7.js";import"./chunk-RUFGCIXT.js";import"./chunk-4BUFJ3ZT.js";import"./chunk-2IQIJXLO.js";import"./chunk-T37NLQBV.js";import"./chunk-U5WRMXFD.js";import"./chunk-JMTMYFWR.js";import"./chunk-RE5SSELD.js";import{a as Xe,c as eo,d as to,g as mt,h as oo,i as ro}from"./chunk-A3B5II6P.js";import"./chunk-XVPROSYE.js";import"./chunk-E2MXYP3A.js";import{e as Kt}from"./chunk-FPV6XIHQ.js";import"./chunk-MZXFJMVC.js";import"./chunk-46PSZUMN.js";import"./chunk-MYY7DCIN.js";import"./chunk-AHIMORZ4.js";import"./chunk-M2ZE7N7H.js";import"./chunk-XZ6AHFH2.js";import"./chunk-3DEZPDXQ.js";import{h as Vt,p as Qt}from"./chunk-6UFIPREK.js";import"./chunk-G4OIO3Z6.js";import"./chunk-JEIYTQ5E.js";import"./chunk-TOO5SEJU.js";import"./chunk-DUWPYFAS.js";import"./chunk-CA4PB6NG.js";import"./chunk-SCXRHDUG.js";import{P as Jt,fa as $t}from"./chunk-5STCPPZU.js";import"./chunk-ZVXDJZSD.js";import{a as Qe}from"./chunk-56SDY6L3.js";import"./chunk-PXWV5LKL.js";import"./chunk-M5PVKGM6.js";import"./chunk-AK34CZMZ.js";import{n as Ve}from"./chunk-QHZHYX4V.js";import"./chunk-FLFVNMKM.js";import"./chunk-YJ2NGJXA.js";import{l as zt}from"./chunk-TUUPYEC6.js";import"./chunk-DQ2UEFEE.js";import{a as Ke}from"./chunk-ZUBNNPBM.js";import"./chunk-2SHHGXPQ.js";import"./chunk-UK4SAM7E.js";import{a as xe}from"./chunk-LXIBKSOK.js";import"./chunk-C53RLQYB.js";import"./chunk-72NGWMH2.js";import"./chunk-VRXSSD45.js";import{a as Rt}from"./chunk-DUKP4BLI.js";import"./chunk-S3O4LR55.js";import{o as Nt,q as st}from"./chunk-FZCNSMLW.js";import"./chunk-WANYNTD6.js";import"./chunk-QMGTBJAL.js";import{o as Be}from"./chunk-KCWFMCND.js";import{V as Wt,W as ze,w as nt}from"./chunk-3TDWET6C.js";import{Q as Gt,V as Dt,_ as it,aa as Ot,d as Mt,m as je}from"./chunk-EBR3PGFZ.js";import"./chunk-UDGUBKMO.js";import{a as wr}from"./chunk-VPGNJAK6.js";import{Na as Te,Ra as Lt}from"./chunk-W6Q44ZHW.js";import{d as bt,f as Pr}from"./chunk-3HS6AHPS.js";import"./chunk-VGEPKX55.js";import{a as O,b as ue}from"./chunk-JUXPONKW.js";import{e as At,h as Se}from"./chunk-WSUAESF2.js";import"./chunk-O2FUKKO3.js";import"./chunk-GQJVAWGG.js";import"./chunk-WO5B666G.js";import"./chunk-GCXT25LW.js";import"./chunk-TW63K7CB.js";import{c as E}from"./chunk-FDCWN4NG.js";import"./chunk-5YGMD6KK.js";import{Eb as Re,Gb as le,Hb as He,Jb as It,Lb as V,Mb as Ue,Mc as Fr,Nb as Ne,Ob as Et,Sc as Bt,Tb as wt,Uc as kr,V as Ae,Vc as vt,Wc as Ar,Ya as ht,Za as rt,dc as pe,hc as Pt,mc as Er,w as te,wb as Ir,y as hr,yc as St}from"./chunk-O3CM75EN.js";import"./chunk-ZGRAPBBU.js";import{H as K,b as Q,o as kt,q as at,r as qe}from"./chunk-J3CEQI22.js";import{K as Fe,a as Ct,b as gt,o as yt,pa as We}from"./chunk-VFHYER2K.js";import{L as D,l as ke,w as l}from"./chunk-KJIO572I.js";import"./chunk-HJXNXGYU.js";import"./chunk-77ECUYXV.js";import"./chunk-4BZBCAHV.js";import{T as Ye,c as Ft,ca as be}from"./chunk-KALFZBR5.js";import"./chunk-V55FEIYE.js";import{a as M}from"./chunk-EAZTJZU7.js";import"./chunk-YTRW5WTJ.js";import"./chunk-3AN5FAZD.js";import"./chunk-CJ3MW6GG.js";import"./chunk-AKCHCVUS.js";import"./chunk-VOT7VHG3.js";import"./chunk-SYQUJKIR.js";import"./chunk-UYGNKZ5P.js";import"./chunk-KZFZROAL.js";import"./chunk-WPMHLM7C.js";import"./chunk-3MRE2BAK.js";import"./chunk-CSLLQXN7.js";import"./chunk-P7DU4NJA.js";import"./chunk-KW7JYBDS.js";import"./chunk-224G4QSH.js";import{f as h,m,o as c}from"./chunk-ZCHLW7CF.js";m();c();var ae=h(M());hr();m();c();var Le=h(M()),Wo=h(nt()),Ro=h(wr()),Ho=h(Be());m();c();We();var Nr=e=>{let t=W(e?.chainId),n=e?.image;return Ct(n)?e.image=n[0]:gt(n)&&(e.image=null),{token:e,baseCoin:t}},Go=Nr;m();c();var Do=h(nt());D();Lt();var br=(e={},t={},n=!0)=>{let r=(0,Do.useDispatch)(),i=e.address,p=Qe(),u=No(),a=oe(),d={actionType:b.ACTION_TYPE.CANCEL,async onClick(){a({all_confirmation:"cancel",trade:"add_token"}),await u(i,!1),await Te(r)},btnText:l("wallet_dapp_connection_btn_reject")},o={actionType:b.ACTION_TYPE.CONFIRM,disabled:!n,async onClick(){try{a({all_confirmation:"confirm",trade:"add_token"});let s=await Xe(t.localType,p),T={...e,contractAddress:i,blockChain:s.shortName,localType:t.localType};await qt(T),await u(i,!0),await Te(r)}catch(s){K.error(s?.data?.originalError?.msg||l("wallet_extenshion_toast_add_failed"))}}};return[d,o]},Oo=br;var Sr=({unapproved:e})=>{let t=(0,Wo.useSelector)(Ut),{token:n,baseCoin:r}=Go(e),[i,p]=(0,Le.useState)(!0),u=Qe();(0,Ho.useMount)(async()=>{let d=await Xe(r.localType,u);p(!!d)});let a=Oo(n,r,i);return!n||t!==Ht.addToken?Le.default.createElement(Ro.Redirect,{to:Rt}):Le.default.createElement(Ao,{token:n,supported:i,buttonGroup:a,networkName:r.chainName})},Uo=Sr;m();c();var S=h(M()),Ko=h(Be());D();m();c();var Yo=h(M());We();pe();var Br=({unapproved:e,walletAccount:t,customGasInfo:n={}})=>{let{params:r}=e,{walletId:i}=t,p=W(),{coinId:u}=p,a=po(u,i)?.coinAmountInt,{gasType:d,isNetworkFeeLoading:o,networkFee:s,getLimit:T}=n,{minGasFee:f}=io(n),_=so(n),x=(0,Yo.useMemo)(()=>{if(Fe(a))return r;let N=a,I=[];return r.forEach(G=>{N=He(N,s),V(N,0)&&I.push(G)}),I},[a,r,s]),g=o&&Ne(T,0),y={level:d||Dt.STANDARD,loading:o,coinId:p?.coinId,networkFee:g?void 0:f,maxNetworkFee:g?void 0:s,estimateFailed:_},F=o||x.length&&x.length===r.length,w=Fe(a)||Ue(a,s);return{isNetworkFeeLoading:o,estimateFailed:_,networkFeeProps:y,canApproveTxs:x,isSufficientGas:w,canApproveAll:F}},qo=Br;m();c();var zo=h(M());D();pe();Ir();Ar();Fr();Er();kr();var jo=100,vr=({unapproved:e,walletAccount:t,isSufficientGas:n,canApproveTxs:r,customGasInfo:i,isNetworkFeeLoading:p})=>{let{id:u}=e,{walletId:a,address:d}=t,o=Ve(a),s=oe(a),{coinId:T}=W(),f=Fo(),_=et(),x=(0,zo.useCallback)(async()=>{s({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await f({id:u})},[f,s,u]),g={onClick:x,actionType:b.ACTION_TYPE.CANCEL,btnText:l("wallet_dapp_connection_btn_reject")},y=o||p,{gasPrice:F,supportEip1559:w,gasLimitInfo:N={},gasLimit:I,maxFeePerGas:G,maxPriorityFeePerGas:L,networkFee:H}=i,$=ao({fromAddr:r[0]?.txParams?.from,walletId:a,localType:rt}),ie=async()=>{try{let Y=r.length,se=r[0],{from:q,to:me,value:ce}=se.txParams;if(s({trade:"sendEvmInscriptions",all_confirmation:"confirm"}),!await Ce({callback:x,walletId:a}))return;let{data:we}=await Kt({checkTypes:[it.OVERWRITTEN],coinId:T,from:q,to:me,amount:O(ce||0),gasPrice:F}),Pe=we.find(({checkType:_e})=>_e===it.OVERWRITTEN)||{},{newNonce:ee,toastType:j,pendingNum:z}=Pe;if(j===Ot.FAILED){K.error(l("wallet_extension_function_toast_failed_single")),await ct(1500),await f({id:u});return}let De=le(z,Y);if(V(De,jo)){K.error(l("wallet_extension_function_toast_pending",{TotalNum:De,ExceededNum:jo}));return}let dt=[],_t=[];for(let _e=0;_e<r.length;_e++){let Oe=r[_e],{txParams:k}=Oe,{from:Tr,to:xr}=k;k.nonce=Pt(ue(le(ee,_e))),w?(delete Oe.gasPrice,k.maxFeePerGas=ue(G),k.maxPriorityFeePerGas=ue(L),k.type=je.FEE_MARKET):(delete k.maxFeePerGas,delete k.maxPriorityFeePerGas,delete k.type,k.gasPrice=ue(F)),k.gas=ue(I),k.gasLimit=ue(I),k.gasLimitInfo=N,k.gasType=i.gasType;let Cr=Yt(Oe.txParams),Tt=await $({params:Cr}),xt=await Zt(rt,Tt),gr={...k,value:O(k.value),gas:I,gasPrice:O(w?k.maxFeePerGas:k.gasPrice),priorityFee:O(w?k.maxPriorityFeePerGas:0),nonce:O(k.nonce),repeatTxType:Mt.CONFIRMING,oldTxHash:"",inscriptionType:1},yr={extJson:JSON.stringify(gr),signedTx:Tt,coinId:T,coinAmount:O(k.value||0),fromAdr:Tr,toAdr:xr,serviceCharge:H,txHash:xt,txSource:St.DAPP,inputData:k.data,accountId:a,txType:1,walletType:t?.serverWalletType};_t.push(yr),dt.push({id:Oe.id,txHash:xt})}await Bt(vt.postSendEvmInscriptions,{txList:_t}),await _({id:u,result:dt})}catch(Y){K.error(Y.msg||l("wallet_home_toast_network_error")),await ct(1500),await _({id:u,error:"Failed"})}},U={disabled:y,actionType:b.ACTION_TYPE.CONFIRM,onClick:ie};return y?[g,U]:(n||(U={actionType:b.ACTION_TYPE.FILL_UP,txId:u,coinId:T,walletId:a,address:d,receiveOnly:n}),[g,U])},Vo=vr;m();c();D();var Lr=e=>{for(let t=0;t<e.length;t++){let n=e[t],r=n();if(r)return r}return null},Mr=({walletAccount:e,canApproveTxs:t,canApproveAll:n,isSufficientGas:r})=>{let i=Ve(e.walletId),p=()=>i?{type:Q.TYPE.error,message:l("wallet_extension_function_alert_wallet_unsupported")}:null,u=W(),a=ho({baseCoin:u,isSufficientGas:r});return Lr([p,a,()=>n?null:{type:Q.TYPE.warn,message:l("wallet_extension_function_alert_available_balance",{gasToken:u.symbol,num:t.length})}])},Qo=Mr;var Gr=({unapproved:e})=>{let{coinId:t}=W(),{txParams:n={}}=e?.params?.[0],{from:r,to:i,data:p,value:u}=n,{walletId:a}=e,d=go(e),o=oe(a),s=Je(e),[T,f]=(0,S.useState)({}),_=(0,S.useCallback)($=>{f($)},[]),{networkFeeProps:x,canApproveTxs:g,canApproveAll:y,isSufficientGas:F,isNetworkFeeLoading:w}=qo({unapproved:e,walletAccount:d,customGasInfo:T}),N=Vo({unapproved:e,walletAccount:d,canApproveTxs:g,customGasInfo:T,isSufficientGas:F,isNetworkFeeLoading:w}),I=Qo({walletAccount:d,canApproveTxs:g,canApproveAll:y,isSufficientGas:F}),[G,{setTrue:L,setFalse:H}]=(0,Ko.useBoolean)(!1);return S.default.createElement(E.Container,null,S.default.createElement(Ke,{title:l("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),S.default.createElement(X,null,S.default.createElement(Io,{...s})),S.default.createElement(X,null,S.default.createElement(Ze,{onClick:L,...x})),S.default.createElement(X,{bordered:!1},S.default.createElement(ve,{title:l("wallet_extension_network_address_title_walletused"),address:d.address,walletId:d.walletId,onCopyCallback:()=>{o({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),S.default.createElement(xe,{placeholder:!0,offsetBottom:0,borderTop:!0},S.default.createElement(ge,{...I}),S.default.createElement(b,{buttonGroup:N})),S.default.createElement(mo,{visible:G,coinId:t,address:r,inputData:p,tokenAddress:i,value:O(u),onBack:H,onClose:null,onGasChange:_}))},Xo=Gr;m();c();var J=h(M());ht();pe();m();c();var nr=h(M()),Me=h(nt()),ot=h(Be());D();Lt();m();c();var R=h(M());m();c();Pr();var he=()=>(0,R.useCallback)(async(t,n)=>{await bt().updateReportTimestamp(t,n)},[]);var Dr=()=>{let e=he();return(0,R.useCallback)(async n=>{await e(n,"CAN_CONFIRM")},[e])},Zo=(e,t)=>{let n=Dr(),r=(0,R.useRef)(!1);(0,R.useEffect)(()=>{!t&&!r.current&&(r.current=!0,n(e))},[e,t,n])},Jo=()=>{let e=he();return(0,R.useCallback)(async n=>{await e(n,"CLICK_CONFIRM")},[e])},$o=()=>{let e=he();return(0,R.useCallback)(async t=>{await e(t,"SIGN")},[e])},er=()=>{let e=he();return(0,R.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},tr=()=>{let e=he();return(0,R.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},or=()=>{let e=he();return(0,R.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};m();c();We();var rr=({isMev:e,mevInfo:t,unapproved:n,modifiedData:r,customGasInfo:i,updateData:p,gasReturnActivity:u})=>{let{nonce:a,updateGasInfo:d}=p,o=yt(n);o.txParams=o.params,delete o.params;let{supportEip1559:s,gasLimitInfo:T={},gasLimit:f,maxFeePerGas:_,gasPrice:x,maxPriorityFeePerGas:g}=i;if(r&&o.txParams&&(o.txParams.data=r),o.txParams.supportEip1559=s,s?(delete o?.txParams.gasPrice,o.txParams.maxFeePerGas=Z(_),o.txParams.maxPriorityFeePerGas=Z(g),o.txParams.type=je.FEE_MARKET):(delete o?.txParams.maxFeePerGas,delete o?.txParams.maxPriorityFeePerGas,delete o?.txParams.type,o.txParams.gasPrice=Z(x)),d){let y=Object.entries(d).reduce((F,[w,N])=>(F[w]=Z(N),F),{});o.txParams={...o.txParams,...y}}return o.txParams.gas=Z(f),o.txParams.gasLimit=Z(f),o.txParams.nonce=Z(a),o.txParams.chainId=Z(o.chainId),o.gasLimitInfo=T||{},o.mev=e?t.name:"",o.activityId=u?.activityId,o.gasType=i.gasType,o?.txParams?.data||(o.isBaseCoinTransfer=!0),o};var Or=(e,t)=>{let n=(0,Me.useSelector)(i=>to(i,e)),r=(0,Me.useSelector)(i=>eo(i,e)??t??!1);return{mevInfo:n,isMev:r}},Wr=({unapproved:e})=>{let{id:t,params:n={},extParams:r={},chainId:i}=e,p=(0,Me.useDispatch)(),u=W(i),a=Je(e),{from:d,to:o,value:s}=n,{coinId:T,chainName:f}=u,{walletId:_}=tt(e.origin,d)||{},{isMev:x,mevInfo:g}=Or(t,r?.isMev),y=Jo(),F=$o(),w=er(),N=tr(),I=or(),G=(0,ot.useMemoizedFn)((se,q)=>{p(mt.setIsMev({isMev:se,id:t})),p(mt.setMevInfo({mevInfo:q,id:t}))});Zo();let L=oe(_),H=co({walletId:_,fromAddr:d,coinId:T}),$=(0,ot.useMemoizedFn)(async()=>{L({trade:"contract_interaction",all_confirmation:"cancel",network:f,dapp_url:e.origin}),Jt(),await p(oo(t)),await Te(p)}),ie=lo(),U=et(),Y=(0,ot.useMemoizedFn)(async({modifiedData:se,customGasInfo:q,gasReturnActivity:me,reportGasReturnActivityDataInConfirm:ce})=>{let{gasPrice:Ee}=q;if(y(t),await Ce({callback:$,walletId:_})){L({all_confirmation:"confirm",trade:"contract_interaction",network:f,dapp_url:e.origin});let Pe=await ie({to:o,from:d,coinId:T,gasPrice:Ee,userGasInfo:q,amount:O(s||0),baseCoinAmountUse:O(s||0)});ce();try{let ee=rr({isMev:x,mevInfo:g,unapproved:e,updateData:Pe,modifiedData:se,customGasInfo:q,gasReturnActivity:me});F(t);let j=await H(ee.txParams);w(t);let z=await p(ro(t,{...ee,signedTx:j,walletId:_,coinId:T}));if(N(t),lt(z?.code))me?.clear(),K.error({title:z?.msg||l("wallet_home_toast_network_error"),duration:3});else{let{serverTxId:De}=z||{};zt({tx_id:De}),I(t)}}catch(ee){let j=ee?.data?.originalError;lt(j?.code)?(me?.clear(),K.error({title:j?.msg||l("wallet_home_toast_network_error"),duration:3})):U({id:t,error:j?.msg||"Failed"})}await Te(p)}});return nr.default.createElement(Co,{needMev:!0,coinId:T,openMev:x,onConfirmReplace:!0,dappInfo:a,txParams:n,txType:e?.type,walletId:_,isShowBlockSwapMevTooltip:r?.isShowBlockSwapMevTooltip,onMevChange:G,onCancel:$,onConfirm:Y})},pt=Wr;m();c();var A=h(M());D();pe();m();c();var de=h(M()),ut=h(Ft());We();D();pe();m();c();var Ie={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Rr({nonce:e,suggestedNonce:t,setNonce:n}){let r=p=>{n(p)},i;return e&&(V(e,t)?i=l("developer_mode_send_tooltip_higher",{num:t}):It(e,t)&&(i=l("developer_mode_send_tooltip_lower",{num:t}))),de.default.createElement(Po.Row,{className:Ie.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},de.default.createElement("div",{className:Ie.content},de.default.createElement("div",{className:Ie.inner},de.default.createElement(at.Number,{innerClassName:(0,ut.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:l("developer_mode_send_maintitle_nonce"),placeholder:`${Fe(t)?"":ke.thousandFormat(t)}`,size:at.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(r(le(t,1)),!1):!0,onSub:()=>!e&&V(t,0)?(r(He(t-1)),!1):!0,onChange:r})),i&&de.default.createElement("div",{className:Ie.warningText},de.default.createElement(Ye,{className:(0,ut.default)(Ie.icon,"okx-wallet-plugin-warning-circle")}),i)))}var ar=Rr;m();c();var re=h(M());D();pe();m();c();var C=h(M()),Ge=h(Be()),ir=h(Ft());D();m();c();var B={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var Hr=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},Ur=({txTypeInfo:e,approve:t,onUpdateAuthAmount:n})=>{let{tokenInfo:r,amount:i}=t||{},{decimals:p,symbol:u}=r,a=fe(u,12),[d,o]=(0,C.useState)(!1),[s,{toggle:T,setFalse:f,setTrue:_}]=(0,Ge.useBoolean)(!1),[x,g]=(0,C.useState)(0),y=(0,C.useMemo)(()=>s?{type:B.danger,text:l("wallet_extension_approve_alert_high_risk_unlimited")}:!s&&ke.eq(x||0,0)?{type:B.info,text:l("wallet_extension_approve_cannot_zero")}:null,[s,x]),F=(0,Ge.useMemoizedFn)((I=i)=>{ze(I)?(g(0),_()):(g(_o(I,p)),f()),o(!0)}),w=(0,C.useMemo)(()=>s?!1:x===""?!0:!ke.gt(`${x||0}`,0),[s,x]),N=(0,Ge.useMemoizedFn)(()=>{o(!1),n(s?Wt:x)});return C.default.createElement(E.Box,{className:B.root},C.default.createElement(E.Box,{className:B.icon,onClick:()=>{F()}},C.default.createElement(Ye,{className:"okx-wallet-plugin-draw-20"})),C.default.createElement(kt.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:d},C.default.createElement(E.Box,{className:B.editApproveAmountModal},C.default.createElement(E.Box,{className:B.content},C.default.createElement(ye,{txTypeInfo:e,bordered:!1}),C.default.createElement(E.Box,{className:B.editArea},s?C.default.createElement(st.Text,{className:B.unlimitedText},l("wallet_extension_transfer_title_unlimited_amount",{token:C.default.createElement(st.Text,{className:B.unlimitedSymbol},a)})):C.default.createElement(no,{symbol:a,autoSize:Hr,placeholder:"0",decimals:p,value:x,onChange:g,style:{fontWeight:700,height:"42px"},symbolClassName:B.symbolClassName})),C.default.createElement(E.Box,{className:B.quickHandler},C.default.createElement(E.Box,{onClick:T,className:B.unlimited},C.default.createElement(E.Box,{className:B.text},l("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),C.default.createElement(qe,{checked:s}))),!!y&&C.default.createElement(E.Box,{className:(0,ir.default)(B.authQuantityWarnTip,y.type)},y.text)),C.default.createElement(E.Box,{className:B.approveTip},l("wallet_extension_approve_desc_dapp_right")),C.default.createElement(xe,{affixStyle:{position:"none"},placeholder:!1,className:B.footerActions},C.default.createElement(be,{block:!0,disabled:w,category:be.CATEGORY.fill,type:be.TYPE.primary,size:be.SIZE.lg,onClick:N},l("wallet_extension_approve_btn_amount_confirmation"))))))},sr=Ur;var Yr=({onUpdateAuthAmount:e,dappInfo:t,loading:n,approveToken:r,title:i})=>{let{isApprove:p,isRevoke:u,address:a,customApproveAmount:d=0,symbol:o=Se,decimals:s=0,icon:T=At}=r,f=Re(d,Et.pow(10,s)),_=fe(o,12);if(n)return re.default.createElement(Eo,null);if(p){let x={title:{text:i},subTitle:t.host};if(u){let y={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},...x};return re.default.createElement(ye,{txTypeInfo:{baseInfo:y}},re.default.createElement(To,{imageUrl:T,text:_}))}let g={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},...x};return re.default.createElement(ye,{txTypeInfo:{baseInfo:g}},re.default.createElement(xo,{isRpcMode:!0,approveInfoList:[{amount:f,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:a,decimals:s,symbol:o}}],renderEditApproveAmount:y=>re.default.createElement(sr,{txTypeInfo:{baseInfo:g},approve:y,onUpdateAuthAmount:e})}))}return re.default.createElement(ye,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:l("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},mr=Yr;m();c();var cr=h(M());D();var qr=({chainGasLoadFailed:e,isSufficientBalance:t,transaction:n,actions:r,modifiedDataError:i,walletInfo:p,params:u,rpcInfo:a})=>{let{chain:d,nonce:o,loading:s,gas:T}=n,{sign:f,cancel:_}=r,{chainGasLoading:x}=T,g=(0,cr.useCallback)(async()=>{await _()},[_]),y={actionType:b.ACTION_TYPE.CANCEL,onClick:g},F=async()=>{try{if(!await Ce({walletId:p?.walletId,callback:_}))return}catch(L){console.error(L)}let G=L=>{let H=Vt[p?.keyringIdentityType];$t({tx_source:"dapp",from_addr:u.from,to_addr:u.to,main_token_symbol:a?.symbol,token_symbol:L?.extraParams?.coinSymbol||"",contract_address:u?.to,volume_token:u?.value,volume_usdt:"",tx_hash_unique:L?.txHash,wallet_type:H,chain_id:parseInt(d.chainId,16)})};f(p?.walletId,G,a)},w=()=>{globalThis.open(a.faucetUrl)},I={disabled:x||e||!t&&!a?.faucetUrl||o.pending||s.sign||s.token||i,actionType:b.ACTION_TYPE.CONFIRM,onClick:F};return!t&&a?.faucetUrl&&(I.actionType=b.ACTION_TYPE.FILL_UP,I.onClick=w,I.btnText=l("wallet_extension_transfer_btn_via_faucet")),[y,I]},lr=qr;m();c();D();pe();var jr=({customGasInfo:e,chainGasLoadFailed:t,modifiedDataError:n,isSufficientBalance:r,isRevokeTx:i,transaction:p,loading:u})=>{let{auth:a,chain:d}=p,o=fe(a.name||Se),s=fe(a.symbol||Se),T=()=>e?.baseFeePerGas==="0"?{type:Q.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,f=()=>n?{}:null,_=()=>r?null:{type:Q.TYPE.warn,message:l("wallet_extension_popup_insufficient_network_fee",{token:d.symbol})},x=()=>t?{type:ge.TIP_TYPE.FEE_ERROR}:null,g=()=>i?{type:Q.TYPE.info,message:l("extension_revoke_approval_alert_evoke_authorization",{contract:o,asset:s})}:null,y=()=>ze(a.customApproveAmount)?{type:Q.TYPE.warn,message:l("wallet_extension_popup_unlimited_transfer",{contract:o,asset:s})}:V(a.customApproveAmount,0)?{type:Q.TYPE.warn,message:l("extension_approve_alert_authorized_tips",{contract:o,asset:s})}:null;if(u)return null;let F=[f,_,g,y,x,T];for(let w=0;w<F.length;w++){let N=F[w],I=N();if(I)return I}return null},pr=jr;var ft=({unapproved:e,rpcInfo:t})=>{let{origin:n,params:r}=e,{from:i,value:p,to:u}=r,[a,d]=(0,A.useState)(""),[o,s]=(0,A.useState)(!1),T=fo(a),f=tt(n,i),[_,x]=ko({...r,...e,walletId:f?.walletId},t),{title:g,auth:y,meta:F,nonce:w,gas:N,loading:I,data:G}=_,{setNonce:L,setAuthAmount:H}=x,{chainGasInfo:$,customGasInfo:ie,chainGasLoading:U,chainGasLoadFailed:Y,stopPollingGasPrice:se,updateCustomGasInfo:q,chainGasLimitLoadFailed:me}=N,ce=Qt(void 0,void 0,t),Ee=Bo(ie);wo(t),vo(i,t),Mo();let we=Ue(ce?.balance,le(Ee,wt(p||0))),Pe=pr({customGasInfo:ie,chainGasLoadFailed:Y,isSufficientBalance:we,isRevokeTx:y.isRevoke,modifiedDataError:T,transaction:_,loading:U}),ee=lr({chainGasLoadFailed:Y,isSufficientBalance:we,transaction:_,actions:x,modifiedDataError:T,walletInfo:f,params:r,rpcInfo:t}),j=z=>{q(z),s(!1)};return A.default.createElement(E.Container,null,A.default.createElement(mr,{title:g,confirmBuryPointFn:()=>{},onUpdateAuthAmount:z=>{H(z)},dappInfo:F.originInfo,loading:I.token,approveToken:y}),A.default.createElement(X,null,A.default.createElement(Ze,{onClick:()=>{s(!0)},injectCoin:ce,loading:U,estimateFailed:Y,networkFee:U?void 0:Re(Ee,10**ce?.decimals)})),A.default.createElement(X,null,A.default.createElement(ve,{title:l("wallet_extension_network_address_title_walletused"),address:f.address,walletId:f.walletId}),!!u&&A.default.createElement(ve,{title:l("wallet_extension_popup_text_interact_with"),address:u})),A.default.createElement(ar,{nonce:w.custom,suggestedNonce:w.suggested,setNonce:L}),G?A.default.createElement(X,{bordered:!1},A.default.createElement(yo,{data:G,copyable:{hideDesc:!0}})):A.default.createElement(X,{bordered:!1},A.default.createElement(uo,{value:a,error:T,onChange:d})),A.default.createElement(xe,{placeholder:!0,offsetBottom:0,borderTop:!0},!T&&A.default.createElement(ge,{...Pe}),A.default.createElement(b,{buttonGroup:ee})),o?A.default.createElement(Lo,{onBack:()=>{s(!1)},rpcInfo:t,chainGasInfo:$,customGasInfo:ie,updateCustomGasInfo:j,stopPollingGasPrice:se,chainGasLimitLoadFailed:me}):null)};m();c();var v=h(M()),fr=h(Be());D();ht();m();c();var ne={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var ur={uniqueId:Ae,rpcUrl:l("wallet_extension_rpc_title_official")},zr=({targetRpcChain:e,targetMainChain:t,handleSelect:n})=>{let[r,i]=(0,v.useState)({}),p=[...e],u=!!t.length;u&&p.unshift(ur);let[a,d]=(0,v.useState)(!1),{updateRpcNetwork:o}=$e(),s=(0,v.useCallback)(async()=>{try{d(!0);let f=e.find(_=>!!_.isDefaultRpc);if(r.isDefaultRpc||r.uniqueId===Ae&&!f)return;f&&await o({...f,isDefaultRpc:!1}),await o({...r,isDefaultRpc:!0})}catch(f){console.log(f)}finally{d(!1)}},[r,e,o]),T=(0,v.useCallback)(async()=>{await s(),n(r)},[r,n,s]);return(0,fr.useMount)(()=>{let f=e.find(_=>_.isDefaultRpc);f?i(f):u&&i(ur)}),v.default.createElement(E.FlexBox,{className:ne.root,direction:E.DIRECTION.vertical},v.default.createElement(Ke,{backable:!1,closeable:!1,title:l("wallet_extension_rpc_title_select_rpc")}),v.default.createElement(E.Box,{className:ne.main},v.default.createElement(E.Box,{className:ne.tips},l("wallet_extension_rpc_desc_select_rpc_current")),v.default.createElement(E.Box,{className:ne.list},p.map(f=>v.default.createElement(E.Box,{className:ne.item,onClick:()=>{i(f)}},v.default.createElement(Nt,{ellipsis:!0,className:ne.title},f.rpcUrl),v.default.createElement(qe.Circle,{checked:f.uniqueId===r.uniqueId}))))),v.default.createElement(E.Box,{className:ne.footer},v.default.createElement(b,{buttonGroup:[{loading:a,disabled:!r.uniqueId,actionType:b.ACTION_TYPE.CONFIRM,onClick:T}]})))},dr=zr;var Vr=e=>{let{unapproved:t}=e,{rpcNetworks:n,status:r}=$e(),i=Xt({appBaseChain:"ethereum"})||[],p=i.filter(o=>Ne(o.realChainIdHex,t.chainId)),u=n.filter(o=>Ne(o.chainId,t.chainId)),[a,d]=(0,J.useState)(null);return r==="loading"||!i?.length?J.default.createElement(jt,null):p.length+u.length>1?a?a.uniqueId===Ae?J.default.createElement(pt,{...e}):J.default.createElement(ft,{...e,rpcInfo:a}):J.default.createElement(dr,{networkType:t.networkType,targetRpcChain:u,targetMainChain:p,handleSelect:d}):p.length?J.default.createElement(pt,{...e}):J.default.createElement(ft,{...e,rpcInfo:u[0]})},_r=Vr;var Dm=(0,ae.memo)(({unapproved:e})=>{switch(e.method){case Gt.SEND_EVM_INSCRIPTIONS:return ae.default.createElement(Xo,{unapproved:e});default:break}switch(e.type){case te.ETH_SIGN:case te.PERSONAL_SIGN:case te.ETH_SIGN_TYPED_DATA:case te.ETH_GET_ENCRYPTION_PUBLIC_KEY:case te.ETH_DECRYPT:return ae.default.createElement(bo,{unapproved:e});case te.WATCH_ASSET:return ae.default.createElement(Uo,{unapproved:e});case te.ADD_ETHEREUM_CHAIN:return ae.default.createElement(So,{unapproved:e});default:return ae.default.createElement(_r,{unapproved:e})}});export{Dm as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Ethereum-SSBEEDHT.js.map
