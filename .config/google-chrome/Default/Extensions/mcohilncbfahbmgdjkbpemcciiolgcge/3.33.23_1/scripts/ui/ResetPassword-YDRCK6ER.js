import{a as N}from"./chunk-I4H4MPEY.js";import{a as f,b as A}from"./chunk-AXG7YOIX.js";import{a as P,b as C}from"./chunk-4HHM4J4U.js";import"./chunk-CA4PB6NG.js";import"./chunk-SCXRHDUG.js";import"./chunk-ZUBNNPBM.js";import{p as T}from"./chunk-2SHHGXPQ.js";import{a as x}from"./chunk-LXIBKSOK.js";import{a as S}from"./chunk-DUKP4BLI.js";import"./chunk-S3O4LR55.js";import"./chunk-FZCNSMLW.js";import"./chunk-WANYNTD6.js";import"./chunk-QMGTBJAL.js";import{o as D}from"./chunk-KCWFMCND.js";import"./chunk-3TDWET6C.js";import"./chunk-EBR3PGFZ.js";import"./chunk-UDGUBKMO.js";import"./chunk-VPGNJAK6.js";import"./chunk-W6Q44ZHW.js";import{d as F,f as Y}from"./chunk-3HS6AHPS.js";import"./chunk-WSUAESF2.js";import"./chunk-O2FUKKO3.js";import"./chunk-FDCWN4NG.js";import"./chunk-O3CM75EN.js";import"./chunk-ZGRAPBBU.js";import{D as t,H as b,q as e}from"./chunk-J3CEQI22.js";import"./chunk-VFHYER2K.js";import{L as M,w as r}from"./chunk-KJIO572I.js";import"./chunk-HJXNXGYU.js";import"./chunk-77ECUYXV.js";import"./chunk-4BZBCAHV.js";import{ca as m}from"./chunk-KALFZBR5.js";import"./chunk-V55FEIYE.js";import{a as V}from"./chunk-EAZTJZU7.js";import"./chunk-YTRW5WTJ.js";import"./chunk-VOT7VHG3.js";import"./chunk-SYQUJKIR.js";import"./chunk-WPMHLM7C.js";import"./chunk-P7DU4NJA.js";import"./chunk-KW7JYBDS.js";import"./chunk-224G4QSH.js";import{f as E,m as u,o as w}from"./chunk-ZCHLW7CF.js";u();w();var s=E(V()),a=E(D());M();Y();u();w();var B={root:"_root_1r48s_1"};var ns=({history:v})=>{let n=t.useForm(),[o,z]=s.default.useState({}),[Z,h]=s.default.useState(null),[O,{setTrue:k,setFalse:I}]=(0,a.useBoolean)(!1),c=(0,s.useRef)(),y=(0,a.useMemoizedFn)(()=>{c.current=T(o.oldPassword).then(()=>(h(null),n.cleanErrors("oldPassword"),!0)).catch(()=>{let l=r("wallet_set_password_errortip_password_wrong");return h(l),n.setErrors({oldPassword:l}),!1})});(0,a.useThrottleEffect)(()=>{!o.oldPassword||y()},[o.oldPassword],{wait:500});let g=!!Z||!o.oldPassword||!o.password||!o.confirm||o.password?.length<P||o.confirm?.length<P,L=(0,a.useMemoizedFn)(async()=>{let{password:l,confirm:p}=o;if(g)return;if(l!==p){n.setErrors({confirm:r("wallet_settings_reset_passord_errortip_input_error")});return}if(k(),c.current||y(),!await c.current){I();return}await F().modifyPassword(p)&&(b.success(r("wallet_edit_wallet_toast_renamed_success")),v.push(S)),I()},[g,o]),U=N();return s.default.createElement(A,{className:B.root,title:r("wallet_settings_reset_passord_maintitle_reset_password"),desc:r("wallet_extension_subtitle_password_unlock")},({formClass:l,formErrorClass:p,itemClass:_})=>s.default.createElement(t,{form:n,size:e.SIZE.lg,validateTrigger:["onChange","onBlur"],className:l,errorClassName:p,onSubmit:L,onValuesChange:(i,d)=>{z(d)}},s.default.createElement(t.Item,{name:"oldPassword",style:{marginBottom:0},label:r("wallet_settings_reset_passord_subtitle_old_password"),className:_},s.default.createElement(e.Password,{autoFocus:!0,autoComplete:"off",size:e.SIZE.xl,inputClassName:f.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(t.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:_,label:r("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(e.Password,{autoComplete:"off",size:e.SIZE.xl,inputClassName:f.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(t.Item,{noStyle:!0,shouldUpdate:(i,d)=>i.password!==d.password},({getFieldValue:i})=>{let d=i("password");return s.default.createElement(C,{password:d})}),s.default.createElement(t.Item,{name:"confirm",className:_,label:r("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(e.Password,{autoComplete:"off",size:e.SIZE.xl,inputClassName:f.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{n.cleanErrors("confirm")}})),s.default.createElement(x.FooterActions,{usePortal:!0,affixStyle:U},s.default.createElement(t.Item,{noStyle:!0},s.default.createElement(m,{block:!0,htmlType:"submit",loading:O,disabled:g,category:m.CATEGORY.fill,type:m.TYPE.highlight,size:m.SIZE.lg},r("wallet_set_password_btn_confirm"))))))};export{ns as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-YDRCK6ER.js.map
