import{a as Ct,b as Tt,d as St,e as Dt}from"./chunk-4ETSF44D.js";import{d as E}from"./chunk-K6OKNCUH.js";import{a as Lt}from"./chunk-AYMFQHBN.js";import"./chunk-BADUO7EG.js";import"./chunk-PQRUDR4H.js";import"./chunk-YI2BHXGP.js";import"./chunk-CDVXLQA3.js";import"./chunk-SVM67SS3.js";import"./chunk-5NP5YBP7.js";import"./chunk-D6NWGDM6.js";import"./chunk-NV3OX353.js";import"./chunk-3QYKNWJE.js";import"./chunk-NJJL64HF.js";import"./chunk-CK5YETQI.js";import"./chunk-ZVUQCOMJ.js";import"./chunk-TSGQQ5QA.js";import"./chunk-KU3DITYD.js";import"./chunk-7CWLH6ZR.js";import"./chunk-3YTH2U6Q.js";import"./chunk-Q5HW75TA.js";import"./chunk-TN557PDS.js";import"./chunk-SYF5MRVO.js";import"./chunk-GUGRL7WK.js";import"./chunk-6ZHQ2QLX.js";import"./chunk-S4NIXE4H.js";import"./chunk-UTVBVZWC.js";import"./chunk-GL4YYTXQ.js";import"./chunk-4MDR2IS2.js";import"./chunk-GZN3TPOZ.js";import"./chunk-ZN3567SM.js";import"./chunk-SJCGLHGC.js";import"./chunk-GQYTOJVD.js";import"./chunk-7HZMPY3W.js";import"./chunk-QTEBOXIQ.js";import"./chunk-AB2B4P3R.js";import"./chunk-FWZNHZQB.js";import"./chunk-FSQDFL3V.js";import"./chunk-YLJ56YQC.js";import"./chunk-YVC4CAU2.js";import"./chunk-K4MSA5MN.js";import"./chunk-4HBLPFAF.js";import"./chunk-TJW4EUGS.js";import"./chunk-SJRV5U24.js";import"./chunk-PUMQ7BEU.js";import"./chunk-4OKCKO5L.js";import"./chunk-SKK4O3IC.js";import"./chunk-L4BR2EHM.js";import"./chunk-AQH6QKNE.js";import"./chunk-6IVHTBSR.js";import"./chunk-ZZ2GLIOF.js";import"./chunk-CJ24R5OH.js";import"./chunk-75OW6LUI.js";import"./chunk-W4IULSMQ.js";import"./chunk-UXRYSOKP.js";import"./chunk-ABSI53HE.js";import"./chunk-JJIQEHOY.js";import{a as mt}from"./chunk-YV5YBENX.js";import{a as k,c as pt,d as P,f as ht,g as F,h as v,i as dt,m as xt,n as Z,o as $,p as gt,q as _t,r as yt,s as J,t as V}from"./chunk-JMH6N6IP.js";import{b as M}from"./chunk-ODKQ5CCQ.js";import"./chunk-FAJ2Q5PZ.js";import"./chunk-5U7ZXBMP.js";import"./chunk-C77TCOTM.js";import"./chunk-EBBN5EW3.js";import"./chunk-KA5VAELR.js";import"./chunk-JOXGYPV7.js";import"./chunk-RUFGCIXT.js";import"./chunk-4BUFJ3ZT.js";import"./chunk-T37NLQBV.js";import"./chunk-U5WRMXFD.js";import"./chunk-JMTMYFWR.js";import"./chunk-RE5SSELD.js";import"./chunk-A3B5II6P.js";import"./chunk-XVPROSYE.js";import"./chunk-E2MXYP3A.js";import{C as ut}from"./chunk-FPV6XIHQ.js";import"./chunk-MZXFJMVC.js";import"./chunk-46PSZUMN.js";import"./chunk-MYY7DCIN.js";import"./chunk-AHIMORZ4.js";import"./chunk-RPBC7DID.js";import"./chunk-M2ZE7N7H.js";import"./chunk-XZ6AHFH2.js";import"./chunk-3DEZPDXQ.js";import"./chunk-6UFIPREK.js";import"./chunk-G4OIO3Z6.js";import"./chunk-JEIYTQ5E.js";import"./chunk-TOO5SEJU.js";import"./chunk-DUWPYFAS.js";import"./chunk-CA4PB6NG.js";import"./chunk-SCXRHDUG.js";import"./chunk-5STCPPZU.js";import"./chunk-ZVXDJZSD.js";import"./chunk-56SDY6L3.js";import"./chunk-PXWV5LKL.js";import"./chunk-M5PVKGM6.js";import"./chunk-AK34CZMZ.js";import"./chunk-QHZHYX4V.js";import"./chunk-FLFVNMKM.js";import"./chunk-YJ2NGJXA.js";import"./chunk-DQ2UEFEE.js";import{a as ft}from"./chunk-ZUBNNPBM.js";import"./chunk-2SHHGXPQ.js";import"./chunk-UK4SAM7E.js";import"./chunk-LXIBKSOK.js";import"./chunk-C53RLQYB.js";import"./chunk-72NGWMH2.js";import"./chunk-VRXSSD45.js";import"./chunk-DUKP4BLI.js";import"./chunk-S3O4LR55.js";import{q as N}from"./chunk-FZCNSMLW.js";import{f as at}from"./chunk-WANYNTD6.js";import"./chunk-QMGTBJAL.js";import{o as q}from"./chunk-KCWFMCND.js";import{w as O}from"./chunk-3TDWET6C.js";import{a as D}from"./chunk-EBR3PGFZ.js";import"./chunk-UDGUBKMO.js";import{a as zt}from"./chunk-VPGNJAK6.js";import{ja as ct,oa as Gt}from"./chunk-W6Q44ZHW.js";import"./chunk-3HS6AHPS.js";import"./chunk-VGEPKX55.js";import"./chunk-JUXPONKW.js";import"./chunk-WSUAESF2.js";import"./chunk-O2FUKKO3.js";import"./chunk-GQJVAWGG.js";import"./chunk-WO5B666G.js";import"./chunk-GCXT25LW.js";import"./chunk-TW63K7CB.js";import{c as h}from"./chunk-FDCWN4NG.js";import"./chunk-5YGMD6KK.js";import"./chunk-O3CM75EN.js";import"./chunk-ZGRAPBBU.js";import{A as Y,C as lt,o as it,w as nt}from"./chunk-J3CEQI22.js";import"./chunk-VFHYER2K.js";import{L as I,m as rt,w as g}from"./chunk-KJIO572I.js";import"./chunk-HJXNXGYU.js";import"./chunk-77ECUYXV.js";import"./chunk-4BZBCAHV.js";import{T as st,c as Wt}from"./chunk-KALFZBR5.js";import"./chunk-V55FEIYE.js";import{a as y}from"./chunk-EAZTJZU7.js";import"./chunk-YTRW5WTJ.js";import"./chunk-3AN5FAZD.js";import"./chunk-CJ3MW6GG.js";import"./chunk-AKCHCVUS.js";import"./chunk-VOT7VHG3.js";import"./chunk-SYQUJKIR.js";import"./chunk-UYGNKZ5P.js";import"./chunk-KZFZROAL.js";import"./chunk-WPMHLM7C.js";import"./chunk-3MRE2BAK.js";import"./chunk-CSLLQXN7.js";import"./chunk-P7DU4NJA.js";import"./chunk-KW7JYBDS.js";import"./chunk-224G4QSH.js";import{f as l,m as e,o}from"./chunk-ZCHLW7CF.js";e();o();var i=l(y()),z=l(O()),Ot=l(zt());I();Gt();e();o();var L=l(y()),b=l(O());e();o();var H=l(y());I();e();o();var A={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var _=l(y());var Nt=l(Wt());I();var Bt=l(q());var Kt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},bt="hasReadTxHistoryFilterEntryTooltip",Yt=()=>{try{return localStorage.getItem(bt)??!1}catch{return!0}},qt=()=>{try{localStorage.setItem(bt,!0)}catch(s){console.error(s)}};function Zt({onClick:s}){let t=(0,_.useRef)();(0,_.useEffect)(()=>{Yt()||(t.current.setVisible(!0),qt())},[]);let n=c=>{t.current=c},r=(0,_.useRef)();return(0,Bt.useClickAway)(()=>{t.current.setVisible(!1)},r),_.default.createElement(Y,{popupRef:n,placement:Y.DIRECTION.bottomRight,title:g(Kt.tooltip)},_.default.createElement(h.Box,{ref:r},_.default.createElement(st,{onClick:s,className:(0,Nt.default)("okds-filter",A.filter)})))}var wt=Zt;e();o();var B=l(y());I();e();o();var j={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};e();o();var U=l(y());function $t({onChange:s,reject:t}){let[n,r]=(0,U.useState)(t);return(0,U.useEffect)(()=>{r(t)},[t]),{currentReject:n,onChangeReject:d=>m=>{let f=t,x={...f,[d]:m};r(x),pt(d,m).then(p=>{p?(r(x),s?.(x)):r(f)}).catch(()=>{r(f)})}}}var It=$t;var kt={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},Jt=s=>{let{currentReject:t,onChangeReject:n}=It(s);return B.default.createElement(h.Box,{className:j.root},B.default.createElement(h.Box,{className:j.textBox},B.default.createElement(N.Text,{warp:!0,strong:!0,size:N.SIZE.md,className:j.text},g(kt.hideValuelessNftTittle)),B.default.createElement(N.Text,{warp:!0,size:N.SIZE.xs,className:j.text,type:N.TYPE.secondary},g(kt.hideValuelessNftSubtitle))),B.default.createElement(lt,{onChange:n(k.hideValuelessNft),checked:t?.[k.hideValuelessNft]}))},Ft=Jt;e();o();var R=l(y()),Vt=l(O());function Qt(){let s=(0,Vt.useDispatch)(),[t,n]=(0,R.useState)({[k.hideValuelessNft]:!1}),[r,c]=(0,R.useState)(!1),d=()=>P().then(p=>{n(p)}).catch(()=>{});(0,R.useEffect)(()=>{d()},[]);let m=()=>{c(!0)},f=()=>{c(!1)};return{reject:t,onChangeShowValueLess:p=>{n(p),s(V({})),setTimeout(()=>{f()},200)},openDialog:m,closeDialog:f,showRejectDialog:r}}var Et=Qt;function Xt(){let{reject:s,onChangeShowValueLess:t,openDialog:n,closeDialog:r,showRejectDialog:c}=Et();return H.default.createElement(h.Box,{className:A.root},H.default.createElement(wt,{onClick:n}),H.default.createElement(it,{title:g("wallet_extension_history_title_filter"),visible:c,onClose:r,onCancel:r,alignBottom:!0,noMargin:!0},H.default.createElement(Ft,{onChange:t,reject:s})))}var jt=Xt;e();o();var Q={"retina-border-basic":"_retina-border-basic_12hb5_1",retinaBorderBasic:"_retina-border-basic_12hb5_1",root:"_root_12hb5_29",left:"_left_12hb5_68"};I();function te(){let s=(0,b.useDispatch)(),t=(0,b.useSelector)(F);return L.default.createElement(Lt,{align:nt.DIRECTION.left,value:t.mainCoinId,searchable:!0,onChange:n=>{s(V({mainCoinId:n}))}})}function ee(){let s=(0,b.useDispatch)(),t=(0,b.useSelector)(F),n=M(rt.subtract(3,"M"))?.stringDates?.[0];return L.default.createElement(E.DateRangeSelection,{dates:t.dates,mainCoinId:t.mainCoinId,customMinDate:n,setDate:r=>{s(xt({dates:r}))},onChange:r=>{s(V({dates:r}))}})}function oe(){return L.default.createElement(h.Box,{className:Q.root},L.default.createElement(h.Box,{className:Q.left},L.default.createElement(te,null),L.default.createElement(ee,null)),L.default.createElement(jt,null))}var Rt=oe;e();o();var a=l(y()),C=l(O()),w=l(q());var re=({txData:s,setTxData:t,explorerUrl:n})=>{let r=(0,C.useDispatch)(),c=(0,C.useSelector)(F),d=(0,C.useSelector)(ht),m=(0,C.useSelector)(at),f=(0,C.useSelector)(dt),x=(0,C.useSelector)(v),[p,W]=(0,a.useState)(null),{run:S}=(0,w.useDebounceFn)(()=>{r(J({...x}))},{wait:200}),G=(0,a.useCallback)(()=>{r(J({...x},{scrollLoad:!0}))},[c]);Dt({scrollContainer:p},S),(0,w.useInfiniteScroll)(G,{target:p,threshold:150});let[X,K]=(0,a.useMemo)(()=>Ct(d,m),[d,m]),T=(0,w.useMemoizedFn)(()=>{t(null)});return a.default.createElement(a.default.Fragment,null,a.default.createElement(St.HistoryList,{completedList:K,pendingList:X,isLoading:f,onClick:t,onRepeat:S,onContainer:W,explorerUrl:n}),a.default.createElement(Tt,{visible:!!s,params:s,onRefresh:S,onClose:T}))},Ht=(0,a.memo)(re);e();o();var Mt=l(q()),se=()=>{let s=(0,Ot.useHistory)(),t=(0,z.useDispatch)(),n=(0,z.useSelector)(v),r=M()?.stringDates?.[0],[c,d]=(0,i.useState)(!0),[m,f]=(0,i.useState)(null),x=(0,Mt.useLatest)(m),[p,W]=(0,i.useState)([]);(0,i.useEffect)(()=>{let K=[(async()=>{let T=await P()??{};return await ut({startDate:new Date(`${r} 00:00:00`).getTime(),...n,hideValuelessNft:T?.hideValuelessNft??!0,status:[D.PENDING,D.CONFIRMING,D.ERROR,D.SUCCESS,D.WITHDRAWING]})})()];Promise.all(K).then(([T])=>{let tt=(ot,vt)=>{let At=ot.length,Ut=vt?ot[At-1]?.rowId:"";t(_t(Ut)),t($(!1))},et=T.content||[],Pt=T.hasViewMore;t(Z(et)),W(T?.explorerUrl||[]),tt(et,Pt)}).catch(()=>{t(Z([])),t($(!1))}).finally(()=>{d(!1)})},[]);let S=()=>{s.goBack(),t(yt()),t(gt()),t(ct())},G=(0,i.useCallback)(()=>{x.current?f(null):S()},[m]);return i.default.createElement(E.PageContainer,{className:"tx-history__container"},i.default.createElement(ft,{sticky:!1,className:"tx-history__navigator",title:g("wallet_extension_header_text_history"),onBack:S,closeable:!1,bordered:!1,customizeBackFn:G}),c?i.default.createElement(mt,null):i.default.createElement(i.default.Fragment,null,i.default.createElement(E.FilterContainer,null,i.default.createElement(Rt,null)),i.default.createElement(Ht,{txData:m,setTxData:f,explorerUrl:p})))},Go=(0,i.memo)(se);export{Go as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-WVODOET3.js.map
