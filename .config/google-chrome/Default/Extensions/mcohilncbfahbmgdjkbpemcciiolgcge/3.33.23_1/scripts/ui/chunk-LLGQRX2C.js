import{a as qo,b as jo,c as rr,d as Ke,e as sr,f as _r,g as gr}from"./chunk-MU6M6MUS.js";import{a as Yo}from"./chunk-ZEQQZDJ3.js";import{a as lr,b as mr,c as yr,d as Er}from"./chunk-KQQQS5YI.js";import{a as Xo}from"./chunk-4BMEYGDL.js";import{a as Jo,b as Qo}from"./chunk-L735PIVH.js";import{a as cr,b as pr}from"./chunk-JJFCX6E6.js";import{a as Zo}from"./chunk-4F6ME4CN.js";import{a as ir}from"./chunk-BKLCNPZA.js";import{a as dr}from"./chunk-TRT2IZSW.js";import{a as fr}from"./chunk-TEMJUCWO.js";import{a as tr,b as or}from"./chunk-VUEUNEEZ.js";import{a as zo,b as ar}from"./chunk-FLUKN5KJ.js";import{a as Ir}from"./chunk-GT3WJZQB.js";import{a as Ho}from"./chunk-4MDR2IS2.js";import{a as nr}from"./chunk-MRL6NMG2.js";import{a as Ge,b as Vo}from"./chunk-KYH5PEB7.js";import{a as _e}from"./chunk-RZP4RECK.js";import{a as $o}from"./chunk-4HBLPFAF.js";import{a as Wo,c as Do}from"./chunk-SJRV5U24.js";import{a as Et,c as er}from"./chunk-6EZPSLUO.js";import{b as ur}from"./chunk-E2TUKCQ2.js";import{m as Ve}from"./chunk-JMH6N6IP.js";import{n as Ue,p as Go,w as Ko}from"./chunk-6HACCOUO.js";import{b as _o}from"./chunk-RUFGCIXT.js";import{b as de}from"./chunk-T37NLQBV.js";import{d as _t}from"./chunk-XVPROSYE.js";import{g as Fo,h as Mo}from"./chunk-E2MXYP3A.js";import{x as Po}from"./chunk-FPV6XIHQ.js";import{g as gt,h as No,i as So,j as Bo,k as Lo,l as Ro,m as Oo,n as vo}from"./chunk-MZXFJMVC.js";import{a as xo}from"./chunk-RPBC7DID.js";import{f as po}from"./chunk-XZ6AHFH2.js";import{a as Ao}from"./chunk-G4OIO3Z6.js";import{d as uo}from"./chunk-DUWPYFAS.js";import{a as Co}from"./chunk-CA4PB6NG.js";import{O as yt,R as He,T as Uo,V as $e}from"./chunk-5STCPPZU.js";import{a as bo,e as ko}from"./chunk-56SDY6L3.js";import{f as To,h as X,i as fe}from"./chunk-QHZHYX4V.js";import{a as fo}from"./chunk-YJ2NGJXA.js";import{b as be}from"./chunk-DQ2UEFEE.js";import{b as wo}from"./chunk-2SHHGXPQ.js";import{b as yo,c as Eo,d as ho}from"./chunk-C53RLQYB.js";import{g as go}from"./chunk-72NGWMH2.js";import{a as Io}from"./chunk-VRXSSD45.js";import{$a as co,G as ft,V as dt,Ya as mo,_ as We,e as Ae,i as lo,ia as De}from"./chunk-DUKP4BLI.js";import{b as $}from"./chunk-S3O4LR55.js";import{b as qt,q as K}from"./chunk-FZCNSMLW.js";import{o as Te}from"./chunk-KCWFMCND.js";import{B as Jt,Da as Pe,E as Qt,F as eo,Ta as io,Ua as ao,ga as xe,m as Ut,ma as Me,na as to,qa as oo,s as Gt,sa as ro,t as Kt,va as no,w as B,x as jt,za as so}from"./chunk-3TDWET6C.js";import{a as q}from"./chunk-VPGNJAK6.js";import{Ha as Xt,Ra as ss}from"./chunk-W6Q44ZHW.js";import{d as M,f as Oe}from"./chunk-3HS6AHPS.js";import{e as Yt,k as pt}from"./chunk-WSUAESF2.js";import{c as f}from"./chunk-FDCWN4NG.js";import{Eb as Ht,Gb as oe,Hb as $t,Mb as Le,Mc as ut,Pc as Zt,Sc as ue,Uc as ve,V as he,Vc as Z,Wc as Fe,X as le,Ya as Be,a as Rt,b as os,d as Se,dc as mt,e as rs,rb as Dt,wb as ns,xc as pe}from"./chunk-O3CM75EN.js";import{G,K as re,M as Ce,b as Re,i as ct,m as zt,o as me,y as ce}from"./chunk-J3CEQI22.js";import{E as Ot,G as vt,ka as Ft,pa as lt}from"./chunk-VFHYER2K.js";import{K as Wt,L as v,d as Mt,l as Pt,w as E}from"./chunk-KJIO572I.js";import{T as j,c as Vt,ca as N}from"./chunk-KALFZBR5.js";import{a as h}from"./chunk-EAZTJZU7.js";import{f as m,m as o,o as r}from"./chunk-ZCHLW7CF.js";o();r();var C=m(h()),nt=m(B()),Dn=m(q()),st=m(Te());v();ss();o();r();lt();var ge=m(jt());mt();var is=(0,ge.createSelectorCreator)(ge.defaultMemoize,vt),It=is(e=>{let{createdMap:n={},needSyncMap:t={}}=e.metamask;return{createdMap:n,needSyncMap:t}},xe,({createdMap:e,needSyncMap:n},t)=>{let s=Boolean(e[t]),i=Boolean(n[t]);return!(!s||i)}),as=(0,ge.createSelector)(It,So,xe,e=>e.metamask?.walletConfig?.currentNetworkUniqueId||"",ro,Ko,No,Qt,eo,Jt,so,(e,n,t,s,i,c,l,p,d,_,a)=>{let g=null;_?.length&&n?.[t]&&(g=Bo({isReady:n[t]?.coins&&e,defaultBaseCoinsCoinIds:l.size>0?Array.from(l):[],addedCoins:p[t]??[],reducedCoins:d[t]??[],balanceCoins:n[t]?.coins??[],defi:n[t]?.defi,nft:n[t]?.nft,networks:_.map(L=>({chainId:L})),hiddenSmallAssets:a,customFilter:({chainId:L})=>s===""||L===Number(s)}));let y="0",T="0",b="0",I="0",x="0",H="0";if(g){let{tokenTotalAssetsUSD:L,defiTotalAssetsUSD:Y,nftTotalAssetsUSD:R,smallTotalAssetsUSD:ee,platformTotalAssetsUSD:te}=g;I=R,x=Y,H=L,b=te,y=L,y=$t(y,ee),c&&(y=oe(y,I)),y=oe(y,Y),T=y,y=Ht(y,i?.usdToThisRate??"1")}else return{walletAsset:"--",walletAssetUSD:"--",platformAssetUSD:"--",nftBalanceUSD:"--"};return{walletAsset:y,walletAssetUSD:T,platformAssetUSD:b,nftBalanceUSD:I,defiBalanceUSD:x,tokenBalanceUSD:H}}),hr=as;o();r();var P=m(h()),br=m(B()),kr=m(Te());o();r();var ht=(t=>(t.ERR_NETWORK="ERR_NETWORK",t.ERR_SERVER_LIMIT="ERR_SERVER_LIMIT",t))(ht||{});Oe();o();r();var Cr=m(h());os();var xr=()=>(0,Cr.useCallback)(e=>{try{let n=e===A.CREATE_FAIL_FROM_SERVER_ERROR?"Server":"Local";Rt.captureException(`CreateWalletToServerInHomePage-${n}`)}catch(n){console.log(n)}},[]);o();r();Oe();ut();Fe();ve();var ze=m(h()),Tr=m(B());var Ar=()=>{let e=To({keyringType:pe.MPC}),n=(0,Tr.useSelector)(io),t=(0,ze.useCallback)(async()=>{Promise.all(e.map(s=>{let i=s?.mpcId||"",c=s?.walletIdentities?.length-1;return ue(Z.syncMpcwallet,{mpcId:i,deriveIndex:c})})).then(s=>{M().setIsNeedSyncMpcIndex(!1)}).catch(s=>{console.log("syncMpcWallet error:")})},[e?.length]);(0,ze.useEffect)(()=>{e?.length&&n&&t()},[e?.length,t,n])};var wr=(i=>(i.CREATE_FAIL_FROM_NETWORK_ERROR="CREATE_FAIL_FROM_NETWORK_ERROR",i.CREATE_FAIL_FROM_SERVER_ERROR="CREATE_FAIL_FROM_SERVER_ERROR",i.CREATE_FAIL_FROM_SERVER_LIMIT="CREATE_FAIL_FROM_SERVER_LIMIT",i.PENDING="PENDING",i))(wr||{}),A={...wr,...ht},Nr=()=>{let e=X();Ar();let{needSyncMap:n={},createdMap:t={}}=(0,br.useSelector)(({metamask:I})=>I),s=Boolean(t[e]),i=Boolean(n[e]),c=xr(),l=Zo(),[p,d]=(0,P.useState)(!s||i||l?A.PENDING:""),[_,a]=(0,P.useState)(""),g=(0,P.useCallback)(async()=>{try{await wo()}catch(I){d(I?.message)}},[]),y=(0,P.useCallback)(async()=>{let I=await M().getWalletTypeCreated(e);d(A.PENDING);try{await M().createWalletToServer({walletId:e,walletType:I,noticeBackend:!0})}catch(x){switch(x?.message){case"ERR_NETWORK":d(A.CREATE_FAIL_FROM_NETWORK_ERROR),c();break;case"ERR_SERVER_LIMIT":d(A.CREATE_FAIL_FROM_SERVER_LIMIT),c(A.CREATE_FAIL_FROM_SERVER_LIMIT);break;default:d(A.CREATE_FAIL_FROM_SERVER_ERROR),a(x?.message);break}}},[c,e]),T=(0,P.useCallback)(async()=>{try{await M().syncWalletToServer(e)}catch{console.log("sync wallet error")}},[e]),b=(0,P.useCallback)(async()=>{s?i&&await T():await y()},[y,s,i,T]);return(0,P.useEffect)(()=>{(async()=>s&&!i&&(await g(),await M().getAccountKeys()))()},[g,s,i,e]),(0,kr.useUpdateEffect)(()=>{d(A.PENDING)},[e]),(0,P.useEffect)(()=>{b()},[b]),(0,P.useEffect)(()=>{!l&&s&&!i&&d("")},[l,s,i]),[{errorType:p,errorMsg:_},{createWalletToServer:y}]};o();r();o();r();v();var O=m(h());o();r();var Sr={btn:"_btn_l5kiz_1"};o();r();var Ct=m(h());Oe();var Br=({walletIds:e})=>{let n=(0,Ct.useCallback)(async()=>await M().fetchApprovalRisk({accountIds:e}),[e]),t=(0,Ct.useCallback)(async()=>{await M().setApprovalRiskRemindLater()},[]);return{fetchApprovalRisk:n,remindLater:t}};var Lr=({walletId:e})=>{let[n,t]=O.default.useState(!1),s=Co(),i=xo(),c=(0,O.useMemo)(()=>({walletIds:[e]}),[e]),{fetchApprovalRisk:l,remindLater:p}=Br(c);(0,O.useEffect)(()=>{(async()=>{let{approvalProjectList:a}=await l();a?.length>0&&t(!0)})()},[l]);let d=(0,O.useCallback)(()=>{t(!1),yt({go_to_website:!1}),p()},[p]),_=(0,O.useCallback)(()=>{let a=s.web3||`https://${i}/web3`;globalThis.open(a),t(!1),yt({go_to_website:!0})},[i,s.web3]);return O.default.createElement(me.Prompt,{visible:n,title:E("wallet_extension_risk_modaltitle_risk_warning"),text:E("wallet_extension_risk_modalsubtitle_risk_warning"),infoType:me.Prompt.INFO_TYPE.warn,hideCloseBtn:!0,alignBottom:!1,footer:O.default.createElement(O.default.Fragment,null,O.default.createElement(N,{category:N.CATEGORY.fill,type:N.TYPE.highlight,size:N.SIZE.lg,block:!0,onClick:_},E("wallet_extension_risk_btn_official_website")),O.default.createElement(N,{category:N.CATEGORY.outline,type:N.TYPE.default,size:N.SIZE.lg,className:Sr.btn,block:!0,onClick:d},E("wallet_extension_risk_btn_remind_later")))})};o();r();v();var ye=m(h()),Fr=m(B());o();r();var Or=m(h());v();o();r();var Rr={blue:"_blue_1j2vu_1"};var vr=()=>{let e=Jo();return Or.default.createElement("span",{className:Rr.blue,onClick:()=>{Qo(e)}},E("wallet_extension_home_notification_btn_switch_servers"))};var Mr=()=>{let e=X(),n=(0,Fr.useSelector)(Me)||{},t=Boolean(n[e]),s=(0,ye.useCallback)((l=5)=>{G.error({key:"networkError",title:E("wallet_extension_toast_asset_error_try_again"),duration:l,placement:G.DIRECTION.top,desc:ye.default.createElement(vr,null)})},[]),i=(0,ye.useCallback)((l=5)=>{G.error({key:"serverLimitError",title:E("wallet_extension_home_notif_network_high_traffic"),duration:l,placement:G.DIRECTION.top})},[]),c=(0,ye.useCallback)((l,p=5)=>{G.error({key:"customAlert",title:l,duration:p,placement:G.DIRECTION.top})},[]);return{isWalletCreated:t,networkAlert:s,serverLimitAlert:i,customAlert:c}};o();r();var k=m(h());o();r();var xt=m(h());o();r();var Ye={main:"_main_1li3n_1",line:"_line_1li3n_5",dot:"_dot_1li3n_11"};var Pr=({total:e,activeIndex:n,className:t})=>xt.default.createElement(f.FlexBox,{align:f.ALIGN.center,className:`${Ye.main} ${t}`},Array(e).fill("").map((s,i)=>xt.default.createElement("div",{className:n===i?Ye.line:Ye.dot})));o();r();var qe=m(h());o();r();var ke={main:"_main_si9mr_1",icon:"_icon_si9mr_1",left:"_left_si9mr_11"};var Wr=({handlePrev:e,handleNext:n,className:t})=>qe.default.createElement(f.FlexBox,{align:f.ALIGN.center,className:`${ke.main} ${t}`},qe.default.createElement($,{size:$.SIZE.xxs,onClick:e,icon:"okx-wallet-plugin-left",className:`${ke.icon} ${ke.left} `}),qe.default.createElement($,{size:$.SIZE.xxs,onClick:n,icon:"okx-wallet-plugin-right",className:ke.icon}));o();r();var J=m(h()),je=m(B());lt();rs();Fe();ve();var Dr=()=>{let[e,n]=(0,J.useState)([]),t=(0,je.useSelector)(er),s=(0,je.useDispatch)(),i=zt();(0,J.useEffect)(()=>{(async()=>{let{data:p=[]}=await Zt(Z.getBannerConfig),{uiData:d}=await Se.get("uiData"),_=d?.closedBannerStore||[];s(Et({allData:p,closedBanners:_,theme:i})),n(p)})()},[i]);let c=(0,J.useMemo)(()=>t.length,[t]),l=(0,J.useCallback)(async p=>{let{uiData:d}=await Se.get("uiData"),{closedBannerStore:_=[]}=d;_.push(p?.id);let a=Ot(_,e,(g,y)=>g===y?.id);await Se.set({uiData:{...d??{},closedBannerStore:a}}),s(Et({allData:e,closedBanners:a,theme:i}))},[e,i]);return{bannerList:t,total:c,handleClose:l}};o();r();var Hr=m(h()),$r=m(q());var Ur=()=>{let e=(0,$r.useHistory)();return{link:(0,Hr.useCallback)(t=>{switch(He({click_close:!1,banner_id:t.id}),t.urlType){case 2:{let s=t.url.replace("wallet://","");e.push(s);break}case 1:globalThis.open(t.url);break;default:break}},[])}};o();r();var U={"retina-border-basic":"_retina-border-basic_60npk_1",retinaBorderBasic:"_retina-border-basic_60npk_1",main:"_main_60npk_29",carousel:"_carousel_60npk_63",closeWrapper:"_closeWrapper_60npk_67",banner:"_banner_60npk_75",content:"_content_60npk_80",left:"_left_60npk_83",title:"_title_60npk_87",icon:"_icon_60npk_90",buttonIndex:"_buttonIndex_60npk_95",switch:"_switch_60npk_100"};var Gr=()=>{let[e,n]=(0,k.useState)(0),[t,s]=(0,k.useState)(!1),i=k.default.useRef(null),{link:c}=Ur(),{bannerList:l,total:p,handleClose:d}=Dr();return p===0?null:k.default.createElement(f.FlexBox,{className:U.main,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},k.default.createElement(ct,{touchSwitch:p>1,className:U.carousel,autoplay:p>1?5e3:!1,ref:i,loop:p>1,navigation:!1,showIndicators:!1,onChange:_=>{n(_)}},l?.map(_=>k.default.createElement(ct.Slide,null,k.default.createElement(f.FlexBox,{className:U.banner},k.default.createElement(f.FlexBox,{onClick:()=>c(_),className:U.content,align:p===1?f.ALIGN.center:f.ALIGN.start},k.default.createElement("div",{className:U.left},k.default.createElement(K.Text,{ellipsis:{rows:2},size:K.SIZE.sm,strong:500,className:U.title},_.title)),k.default.createElement($,{type:$.TYPE.image,className:U.icon,src:_.img})),k.default.createElement(f.FlexBox,{align:f.ALIGN.center,className:U.closeWrapper,onClick:()=>{He({click_close:!0,banner_id:_.id}),d(_)}},k.default.createElement(j,{className:"okx-wallet-plugin-close"})))))),p>1&&k.default.createElement("div",null,t?k.default.createElement(Wr,{className:U.switch,handlePrev:()=>i.current?.prev(),handleNext:()=>i.current?.next()}):k.default.createElement(Pr,{total:p,activeIndex:e,className:U.buttonIndex})))};o();r();var Ze=m(h());o();r();var Kr={content:"_content_o6jn4_1",wrapper:"_wrapper_o6jn4_9",img:"_img_o6jn4_12",title:"_title_o6jn4_16",text:"_text_o6jn4_19"};o();r();var D=m(h());o();r();var W={skeletonWrapper:"_skeletonWrapper_k76ne_1",tab:"_tab_k76ne_5",tokenList:"_tokenList_k76ne_10",token:"_token_k76ne_10",logo:"_logo_k76ne_18",symbol:"_symbol_k76ne_23",chain:"_chain_k76ne_28",middle:"_middle_k76ne_32",number:"_number_k76ne_35",currency:"_currency_k76ne_40"};var ls=()=>D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,align:f.ALIGN.unset,className:W.skeletonWrapper},D.default.createElement(re.Input,{active:!0,className:W.tab}),D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,justify:"space-around",className:W.tokenList},Array(5).fill("").map((e,n)=>D.default.createElement(f.FlexBox,{className:W.token,align:f.ALIGN.center,key:n},D.default.createElement(re.Avatar,{active:!0,className:W.logo}),D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,className:W.middle},D.default.createElement(re.Input,{active:!0,className:W.symbol}),D.default.createElement(re.Input,{active:!0,className:W.chain})),D.default.createElement(f.FlexBox,{direction:f.DIRECTION.vertical,align:f.ALIGN.end,className:W.right},D.default.createElement(re.Input,{active:!0,className:W.number}),D.default.createElement(re.Input,{active:!0,className:W.currency})))))),Vr=ls;o();r();var Yr=m(h());v();o();r();var zr={wrapper:"_wrapper_16oot_1"};var qr=({tryAgain:e})=>Yr.default.createElement(ce.State,{title:E("wallet_extension_home_title_network_unavailable"),type:ce.State.TYPE.noNetwork,description:E("wallet_extension_home_text_check_network_error"),buttonText:E("wallet_extension_home_btn_try_again"),onButtonClick:()=>{e&&e()},className:zr.wrapper});var jr=({errorType:e,tryAgain:n})=>{let t=e===A.CREATE_FAIL_FROM_NETWORK_ERROR||e===A.CREATE_FAIL_FROM_SERVER_ERROR;if(!t&&e!==A.PENDING)return null;let s=()=>{switch(e){case A.CREATE_FAIL_FROM_NETWORK_ERROR:case A.CREATE_FAIL_FROM_SERVER_ERROR:return Ze.default.createElement(qr,{tryAgain:n});case A.PENDING:return Ze.default.createElement(Vr,null);default:return null}};return Ze.default.createElement(f.FlexBox,{align:f.ALIGN.center,justify:t?f.ALIGN.center:f.ALIGN.unset,direction:f.DIRECTION.vertical,className:Kr.content},s())};o();r();var S=m(h()),In=m(B());o();r();var Xe=m(h());var Xr=m(B());var Jr=()=>{let[e,n]=(0,Xe.useState)([]),t=de("nft-operate"),i=(0,Xr.useSelector)(to)?.account?.aptos||"",c=tr();return or(),(0,Xe.useEffect)(()=>{(!t||t.data.status===2)&&i&&Po(i).then(l=>{n(l.list)}),t?.data?.status===2&&setTimeout(()=>{c()},3e3)},[t,c]),{aptosNftOffers:e,aptosAddress:i,fetchNftListData:c}};o();r();var w=m(h()),_n=m(B()),gn=m(q());v();o();r();var en=m(jt());o();r();mt();var Qr=({addedCoinIdsSet:e,defaultBaseCoinsCoinIdsSet:n,balanceCoin:t,isDefault:s})=>{let i=e.has(t.coinId),c=n.has(t.coinId)||s||t.isDefault,l=i||c,p=Le(t.currencyAmountUSD,"1");return l||p};var ms={showCoins:[],hiddenCoins:[]},tn=(0,en.createSelector)(Ro,Lo,vo,Oo,(e,n,t,s)=>{if(!e.length)return ms;let i=gt(e,p=>!t.has(p.coinId),{sort:!1}).results,{results:c,uselessResults:l}=gt(i,(p,d)=>Qr({defaultBaseCoinsCoinIdsSet:s,addedCoinIdsSet:n,balanceCoin:p,isDefault:d}));return{showCoins:c,hiddenCoins:l}});o();r();var on=m(B());function cs(){let e=(0,on.useDispatch)(),[n]=Eo(yo.hiddenSmallAssets),t=l=>{e(go(l))};return[n,{toggle:()=>{t(!n)},hide:()=>{t(!0)},show:()=>{t(!1)},setValue:t}]}var rn=cs;o();r();var sn=m(h()),Tt=m(B());v();mt();var ps=e=>e.map(n=>({...n,coinAmount:null})),nn=e=>e.map(n=>{try{let t=new Wt(n.image),{query:s}=t;if(!s.get("x-oss-process"))return s.set("x-oss-process","image/resize,m_lfit,w_100,h_100/ignore-error,1"),{...n,image:t.get()}}catch{}return n}),At=e=>{let n=bo(),{currentNetworkUniqueId:t}=_e(),s=(0,Tt.useSelector)(Me),i=(0,Tt.useSelector)(ao),c=Boolean(s[n]),l=Boolean(i[n]);return(!c||l)&&(e=ps(e)),(0,sn.useMemo)(()=>{if(t==="")return nn(e);let d=e.filter(a=>(a?.childrenCoin||[]).find(g=>g.chainId===Number(t))||a.chainId===Number(t)),_=[];return d.forEach(a=>{if(a?.aggregation){let g=(a?.childrenCoin||[]).filter(I=>I.chainId===Number(t)),y=g.reduce((I,x)=>oe(I,x.coinAmount),"0"),T=g.reduce((I,x)=>oe(I,x.currencyAmount),"0"),b=g.reduce((I,x)=>oe(I,x.currencyAmountUSD),"0");_.push({...a,childrenCoin:g,coinAmount:y,currencyAmount:T,currencyAmountUSD:b})}else _.push(a)}),_=_.map(a=>({...a,coinAmount:a?.coinAmount===null?"--":Pt.truncate(a?.coinAmount,6,!1)})).sort((a,g)=>Le(g.currencyAmount,a.currencyAmount)?1:-1),nn(_)},[e,t])};o();r();var Ee=m(h()),mn=m(Te());o();r();var bt=m(B()),an=m(q());var ln=()=>{let{currentNetworkUniqueId:e}=(0,bt.useSelector)(uo),n=Mo(),t=(0,an.useHistory)(),s=(0,bt.useSelector)(ur),i=X(),c=s?.[i],l=a=>{if(c?.[`${a.symbol}-${a.coinId}`])return c[`${a.symbol}-${a.coinId}`];let g=be({nearAggregation:!0,coinSymbol:a.symbol,coinId:a.coinId,addressType:""});return`${Ae}${g}`},p=a=>{if(c?.[`${a.symbol}-${a.coinId}`])return c[`${a.symbol}-${a.coinId}`];let g=be({btcAggregation:!0,coinSymbol:a.symbol,coinId:a.coinId,addressType:""});return`${Ae}${g}`},d=async a=>{if(e===""&&c?.[a.symbol])return c[a.symbol];let y=(e!==""?a.childrenCoin.find(b=>b.chainId===Number(e)):null)?.coinId||"",T=be({aggregation:!0,coinSymbol:a.symbol,coinId:y});return`${Ae}${T}`};return{jumpCoinDetailPage:async a=>{let g="";if(a.aggregation)g=await d(a);else if(Gt(a))g=p(a);else if(Kt(a))g=l(a);else{let y=be({coinId:a.coinId});g=`${Ae}${y}`}g&&t.push(g)},coinToCurrencyRate:n}};function us({dataSource:e,hiddenAssets:n,onMount:t}){let{jumpCoinDetailPage:s,coinToCurrencyRate:i}=ln(),c=pr(),l=Fo(),p=(0,mn.useMemoizedFn)(()=>{t?.()});return(0,Ee.useLayoutEffect)(()=>{p()},[p]),Ee.default.createElement(_t,{renderEmpty:!1,dataSource:e,renderItem:d=>{let{image:_,symbol:a,coinAmount:g,currencyAmount:y,coinId:T,riskType:b}=d,I=c(d),x=i?.[T]||"0",H=l?.[T]?.coinPriceChangePercent24h??void 0;return Ee.default.createElement(_t.Coin,{icon:{lazyload:!0,src:_,type:qt.image,defaultIcon:Yt},price:x,pricePercent:H,symbol:a,hidden:n,balance:I?g:void 0,market:I?y:void 0,onClick:async()=>{I&&await s(d)},riskType:b},!I&&Ee.default.createElement(cr,{coinId:d?.coinId}))}})}var kt=us;o();r();var V=m(h());var pn=m(q());ve();Fe();Be();v();o();r();var cn={root:"_root_qmbez_1",alert:"_alert_qmbez_4"};function fs(){let[e,n]=(0,V.useState)(!1),[t,s]=(0,V.useState)({}),i=(0,pn.useHistory)(),c=Ao(he),l=de("dex-across-order-info"),{currentNetworkUniqueId:p}=_e(),d=Wo({localType:he})||[],_=Number(p)===d?.[0]?.realChainId||p==="";return(0,V.useEffect)(()=>{(()=>{ue(Z.postPendingFacetOrder,{userWalletAddresses:c,chainId:d?.[0]?.realChainId||1}).then(g=>{if(g.data?.length>0){if(_)n(!0);else{n(!1);return}let y=g.data.filter(T=>Number(T.status)===11&&Number(T.specialOrderType)===3);y?.length>0?(s({orderId:y[0].orderId,toAmount:y[0].toAmount,toTokenSymbol:y[0].toTokenSymbol}),n(!0)):(s(""),n(!1))}else s({}),n(!1)}).catch(g=>{console.log("err",g),s({}),n(!1)})})()},[l,p,_]),e?V.default.createElement(f.Box,{className:cn.root},V.default.createElement(Re,{desc:V.default.createElement("div",null,E("swaptrade_extension_reminder_desc_pending_withdrawal",{token:t?.toTokenSymbol,amount:t?.toAmount}),V.default.createElement(Re.Link,{onClick:a=>{a.preventDefault(),i.push(`${mo}/${t?.orderId}`)}},E("swaptrade_extension_cell_btn_confirm_withdrawal"))),type:Re.TYPE.info,onClose:()=>{n(!1)}})):null}var un=fs;o();r();var Je=m(h()),fn=m(Vt());v();o();r();var wt={root:"_root_1e5k7_1",icon:"_icon_1e5k7_12"};function ds({length:e,toggle:n,value:t}){let s=t?"okds-arrow-chevron-down-md":"okds-arrow-chevron-up-md",i=E("wallet_extension_main_toggle_hide",{num:Mt.formatNumber(e)});return Je.default.createElement("div",{onClick:n,className:wt.root},Je.default.createElement("div",null,i),Je.default.createElement(j,{className:(0,fn.default)(s,wt.icon)}))}var dn=ds;o();r();var Ie={button:"_button_blxw2_1",showButton:"_showButton_blxw2_5",coinList:"_coinList_blxw2_13",icon:"_icon_blxw2_16",empty:"_empty_blxw2_20"};var _s=190,Nt=({scrollTop:e,hiddenAssets:n,backupHeight:t,changeScrollTop:s})=>{let{showCoins:i,hiddenCoins:c}=(0,_n.useSelector)(tn),l=At(i),p=At(c),[d,{toggle:_}]=rn(),a=(0,w.useRef)(e),g=()=>{a.current=e,_()},y=()=>{requestAnimationFrame(()=>{s(a.current)})},{fetch:T}=mr();ir(T,{cacheKey:lr,staleTime:1e3*60*10});let b=(0,gn.useHistory)(),I=l.length,x=p.length,H=(0,w.useMemo)(()=>e<=_s?!1:I+(d?0:x)>8,[d,x,I,e]),{paddingBottom:L,buttonPaddingBottom:Y,absoluteBottom:R}=ar({isButtonAbsolute:H,backupHeight:t});return I===0&&x===0?w.default.createElement("div",{style:{paddingBottom:L+t}},w.default.createElement(ce.State,{className:Ie.empty,type:ce.State.TYPE.noRecord,title:E("extension_wallet_home_text_no_added_currencies"),buttonText:E("extension_wallet_home_btn_add_now"),onButtonClick:()=>{b.push(ft)}})):w.default.createElement("div",null,w.default.createElement("div",{style:{paddingBottom:L},className:Ie.coinList},w.default.createElement(un,null),w.default.createElement(kt,{dataSource:l,hiddenAssets:n}),x>0&&w.default.createElement(w.default.Fragment,null,w.default.createElement(dn,{length:x,toggle:g,value:d}),!d&&w.default.createElement(kt,{onMount:y,dataSource:p,hiddenAssets:n}))),w.default.createElement("div",{className:`${H?Ie.showButton:""} ${Ie.button}`,style:{bottom:R,paddingBottom:Y}},w.default.createElement(N,{circle:!0,category:N.CATEGORY.outline,type:N.TYPE.secondary,size:N.SIZE.md,onClick:()=>{b.push(ft)}},w.default.createElement(j,{className:`okx-wallet-plugin-edit-wallet ${Ie.icon}`}),E("wallet_home_btn_manage_crypto"))))};o();r();var ne=m(h());v();var et=m(B());o();r();var Qe={homeTabs:"_homeTabs_o2bwr_1",homeTab:"_homeTab_o2bwr_1",active:"_active_o2bwr_13"};var yn=({aptosNftOffers:e})=>{let n=(0,et.useSelector)(Ue),t=(0,et.useDispatch)(),s=Ke($e),i=(0,ne.useMemo)(()=>[E("wallet_extension_nft_tab_coins"),ne.default.createElement("div",null,E("wallet_extension_nft_tab_nfts"),e.length>0&&ne.default.createElement("span",{className:"new-home-nft-aptos-notify"})),E("wallet_extension_tab_defi")],[e]);return ne.default.createElement(Ce,{noLine:!0,className:Qe.homeTabs,activeId:n,size:Ce.SIZE.lg,color:Ce.COLOR.grey,paneSpacing:0,onChange:c=>{let l;switch(c){case 1:l="crypto";break;case 2:l="nfts";break;case 3:l="defi";break;default:break}s({homepage:l}),t(Go.setActiveId({id:c}))}},i.map((c,l)=>ne.default.createElement(Ce.TabPane,{className:`${Qe.homeTab} ${+n===l+1?Qe.active:""}`,tab:c,key:l,id:l+1})))};o();r();var En={main:"_main_bbmgq_1"};var gs=(0,S.lazy)(()=>import("./Nft-AQX7PVRS.js")),ys=(0,S.lazy)(()=>import("./DefiList-FCJAVSXX.js")),hn=({scrollTop:e,hiddenAssets:n,backupHeight:t,isWalletCreated:s,changeScrollTop:i})=>{let c=(0,In.useSelector)(Ue),{aptosNftOffers:l,aptosAddress:p}=Jr(),d=(0,S.useMemo)(()=>{switch(c){case 1:return S.default.createElement(Nt,{scrollTop:e,hiddenAssets:n,backupHeight:t,changeScrollTop:i});case 2:return S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(gs,{scrollTop:e,aptosNftOffers:l,aptosAddress:p,backupHeight:t}));case 3:return S.default.createElement(S.Suspense,{fallback:null},S.default.createElement(ys,{scrollTop:e,hiddenAssets:n,backupHeight:t,isWalletCreated:s}));default:return S.default.createElement(Nt,{scrollTop:e,hiddenAssets:n,backupHeight:t})}},[c,p,l,t,n,e,s]);return S.default.createElement("div",{className:En.main},S.default.createElement(yn,{aptosNftOffers:l}),d)};o();r();var Q=m(h());v();o();r();var se={iconAniWrapper:"_iconAniWrapper_piy3e_20",iconItem:"_iconItem_piy3e_29",text:"_text_piy3e_35",moveOutAnimation:"_moveOutAnimation_piy3e_38",moveOut:"_moveOut_piy3e_38",moveInAnimation:"_moveInAnimation_piy3e_42",moveIn:"_moveIn_piy3e_42",iconTitle:"_iconTitle_piy3e_54"};var Cn=({width:e})=>Q.default.createElement(f.FlexBox,{align:f.ALIGN.center,direction:f.DIRECTION.vertical,style:{width:e}},Q.default.createElement(f.Box,{className:se.iconAniWrapper},Q.default.createElement(f.FlexBox,{align:f.ALIGN.center,justify:f.ALIGN.center,className:`${se.iconItem} ${se.moveInAnimation}`},Q.default.createElement($,{className:"okx-wallet-plugin-toolkit"})),Q.default.createElement(f.FlexBox,{align:f.ALIGN.center,justify:f.ALIGN.center,direction:f.DIRECTION.vertical,className:`${se.iconItem} ${se.moveOutAnimation}`},Q.default.createElement($,{className:"okx-wallet-plugin-swap-for-gas"}))),Q.default.createElement(K.Text,{className:se.iconTitle,ellipsis:!0,size:K.SIZE.xs},E("wallet_extension_home_text_toolkit")));o();r();var F=m(h()),ot=m(B()),kn=m(q()),wn=m(Te()),Nn=m(Vt());v();ns();o();r();var tt={"retina-border-basic":"_retina-border-basic_1a6hn_1",retinaBorderBasic:"_retina-border-basic_1a6hn_1",main:"_main_1a6hn_29",dot:"_dot_1a6hn_64",title:"_title_1a6hn_73",icon:"_icon_1a6hn_77"};o();r();var xn=m(h());Be();Fe();ve();var Tn=m(Te());Oe();var An=m(B());var bn=()=>{let e=ko(le),n=(0,xn.useMemo)(()=>e?.map(i=>i.address)||[],[e]),t=(0,An.useSelector)(xe);return(0,Tn.useMemoizedFn)(async()=>{try{let i=await M().getRequestHeaders({walletId:t,needSign:!0,currency:"usd"}),{data:c=[]}=await ue(Z.getBtcPendingTx,{txPendingCountReqList:[{addressList:n,chainId:0}]},{headers:i});return c[0]}catch{return{}}})};var Sn=()=>{let[e,n]=(0,F.useState)({}),t=(0,ot.useSelector)(It),s=(0,kn.useHistory)(),i=(0,ot.useDispatch)(),c=bn(),l=(0,wn.useMemoizedFn)(async()=>{let a=await c();n(a)});(0,F.useEffect)(()=>{t&&l()},[t]);let p=de("wallet-notice");(0,F.useEffect)(()=>{p&&l()},[p,l]);let d=(0,F.useMemo)(()=>!e||typeof e?.pendingCount!="number"?"":e?.hasMoreCount?E("extension_defi_mid_notif_btc_over100_receive",{minAmt:"100"}):e?.pendingCount&&e?.pendingCount>0?E("extension_defi_mid_notif_btc100_receive",{extension_defi_mid_notif_btc100_receive:e?.pendingCount,maxAmt:e?.pendingCount}):"",[e]),_=()=>{i(Ve({mainCoinId:Dt})),s.push(`${De}?filterByChain=${0}`)};return!e||typeof e?.pendingCount!="number"||e?.pendingCount===0?null:F.default.createElement(f.FlexBox,{className:tt.main,align:"center",justify:"space-between",onClick:_},F.default.createElement(f.FlexBox,{align:"center"},F.default.createElement("div",{className:tt.dot}),F.default.createElement(K.Text,{type:K.TYPE.default,size:K.SIZE.xs},d)),F.default.createElement(j,{className:(0,Nn.default)("okx-wallet-plugin-right",tt.icon)}))};o();r();var z=m(h());var Ln=m(q());var we=m(B());Be();o();r();var Bn=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"wallet_extension_homepage_feature_name_swap",icon:"okx-wallet-plugin-swap-2",type:"DEX",disabledText:""},{text:"wallet_extension_header_text_history",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Rn=()=>{let e=(0,we.useSelector)(Pe),n=Ge(),t=(0,Ln.useHistory)(),s=(0,we.useDispatch)(),i=dr(),l=Do({networkId:i?.id?String(i?.id):void 0})?.coinId,{baseCoin:p={}}=Ho(l,!0),d=Er(p,"",yr.home),_=(0,we.useSelector)(oo),a=(0,z.useMemo)(()=>{let{initialType:R,accountMap:ee}=_;if(fo(R)){let te=Object.keys(ee);return![le,he].some(it=>te.includes(it))}return!1},[_]),g=(0,z.useCallback)(()=>{e?n():t.push(`${dt}?type=${pt.RECEIVE}`)},[t,e,n]),y=(0,z.useCallback)(()=>{p?.coinId&&s(Ve({mainCoinId:p?.coinId})),t.push(De)},[p?.coinId,s,t]),{hasNewFeature:T}=nr(),b=(0,z.useCallback)(()=>{t.push(lo)},[t]),I=(0,z.useCallback)(()=>{t.push(`${dt}?type=${pt.SEND}`)},[t]),x=Ke($e),{impactHaptic:H}=Io(),L=(0,z.useCallback)(R=>{switch(H(),R.type){case"SEND":{x({homepage:"send"}),I();break}case"RECEIVE":{x({homepage:"receive"}),g();break}case"DEX":{x({homepage:"trade"}),d();break}case"HISTORY":{x({homepage:"history"}),y();break}case"DAPP_CONNECT":{b();break}default:break}},[g,d,y,b,I]),Y=(0,z.useMemo)(()=>Bn.map(R=>R.type==="DEX"?{...R,disabled:a}:R.type==="MORE"?{...R,hasNewFeature:T}:R),[a,T]);return{clickHandle:L,iconOptions:Y}};o();r();var rt=m(h()),vn=m(B());o();r();var On=m(h());lt();ut();Be();function St(){let e=fe();return(0,On.useMemo)(()=>{let n=Ir.find(t=>{let s=e?.account?.[t],i=Ft(Object.values(e?.account??{}));return t===le?!1:s&&e.keyringIdentityType===pe.PRIVATE_KEY&&i.length===1&&i[0]===s});return n?{isFactionPKAccount:!0,chain:n}:{isFactionPKAccount:!1}},[e])}var Fn=()=>{let e=fe(),{isFactionPKAccount:n,chain:t}=St(),{currentNetworkUniqueId:s}=_e(),{addresses:i=[],hotAddresses:c=[]}=(0,vn.useSelector)(_o),l=(0,rt.useCallback)(a=>n?a.localType===t:s===""?!0:a.chainId===Number(s),[s,n,t]),{filterAddress:p,filterHotAddress:d}=(0,rt.useMemo)(()=>({filterAddress:i.filter(l),filterHotAddress:c.filter(l)}),[i,l,c]),_=p.length===1;return{filterAddress:p,filterHotAddress:d,address:_?p[0]?.address:"",chainName:_?p[0]?.chainName:"",titleLeft:e?.keyringName,titleRight:_?e?.walletName:"",subTitle:_?Ut(p[0]?.address):e?.walletName,isFactionPKAccount:n}};o();r();var Mn=m(h()),Pn=m(q());v();ut();var Wn=({address:e})=>{let n=(0,Pn.useHistory)(),t=fe(),s=()=>{n.push(`${We}?fromHome=1`)};return t?.keyringIdentityType===pe.PRIVATE_KEY&&e==="UQCiCTSKMQTIF8VSGc3F7DxWxJrV09SAbJzc1YvWZ5pgiQAP"?Mn.default.createElement(me.Prompt,{visible:!0,infoType:me.Prompt.INFO_TYPE.warn,title:E("wallet_extension_errormsg_unavailable_address"),confirmText:E("wallet_extension_connect_btn_switch_wallet"),onConfirm:s,hideCloseBtn:!0,alignBottom:!1,maskClosable:!1,confirmBtnProps:{type:N.TYPE.highlight,size:N.SIZE.lg}}):null};var Is=()=>{let{firstPermissionsRequestId:e}=(0,nt.useSelector)(ae=>{let es=no(ae),at=po(ae),ts=at&&at.metadata?at.metadata.id:null;return{totalUnapprovedCount:es,firstPermissionsRequestId:ts}}),{isWalletCreated:n,networkAlert:t,serverLimitAlert:s,customAlert:i}=Mr(),c=X(),{walletAsset:l,platformAssetUSD:p,nftBalanceUSD:d,defiBalanceUSD:_,tokenBalanceUSD:a}=(0,nt.useSelector)(hr),g=Ge(),[{errorType:y,errorMsg:T},{createWalletToServer:b}]=Nr(),I=qo(),[x,H]=ho(),L=(0,C.useRef)(null),[Y,R]=(0,C.useState)(0),{isNeedShowDisconnectUpgrade:ee,setDisconnectUpgrade:te}=Yo(),it=(0,C.useCallback)(()=>{ee&&(G.success({title:E("wallet_extension_card_subtitle_disconnect_update")}),te())},[ee,te]),ie=(0,nt.useSelector)(Pe),Ne=(0,C.useRef)(null),Bt=(0,Dn.useHistory)(),[Hn,$n]=(0,C.useState)(0),{clickHandle:Un,iconOptions:Gn}=Rn();(0,C.useEffect)(()=>{switch(y){case A.CREATE_FAIL_FROM_NETWORK_ERROR:case A.ERR_NETWORK:t();break;case A.CREATE_FAIL_FROM_SERVER_LIMIT:case A.ERR_SERVER_LIMIT:s();break;case A.CREATE_FAIL_FROM_SERVER_ERROR:i(T);break;default:break}},[i,T,y,t,s]),(0,C.useEffect)(()=>{p!=="--"&&Uo({wallet_id:c,coin_balance:a,nft_balance:d,defi_balance:_,platform_coin_balance:p})},[c,p,d,a,_]);(0,C.useEffect)(()=>{e&&ie&&g({text:E("wallet_dapp_conncetion_alert_backup_wallet")},e)},[ie,e]),(0,st.useMount)(()=>{Xt()});let{run:Kn}=(0,st.useDebounceFn)(()=>{$n(Ne.current?.scrollTop||0)},{wait:50,maxWait:50}),{titleLeft:Vn,titleRight:zn,subTitle:Yn,address:Lt,chainName:qn,filterAddress:jn,filterHotAddress:Zn,isFactionPKAccount:Xn}=Fn(),Jn=async()=>{y!==A.PENDING&&(G.destroyAll(),await b())};(0,C.useLayoutEffect)(()=>{L.current&&ie&&n&&R(L.current?.clientHeight||0)},[ie,n]);let Qn=ae=>{Ne.current&&(Ne.current.scrollTop=ae)};return C.default.createElement("div",{id:fr,className:"ok-home-page main-container",ref:Ne,onScroll:()=>{Kn()}},C.default.createElement(_r,{titleLeft:Vn,titleRight:zn,subTitle:Yn,address:Lt,chainName:qn,filterAddress:jn,filterHotAddress:Zn,isNotBackupWallet:ie,isFactionPKAccount:Xn}),C.default.createElement(rr,{balance:l,hiddenAssets:x,onToggleHiddenAssets:H}),C.default.createElement(sr,{clickHandle:Un,iconOptions:Gn,customMore:ae=>C.default.createElement(Cn,{width:ae})}),C.default.createElement(Sn,null),C.default.createElement(Gr,null),C.default.createElement(hn,{scrollTop:Hn,hiddenAssets:x,backupHeight:ie?Y+24:0,isWalletCreated:n,changeScrollTop:Qn}),n&&C.default.createElement("div",{ref:L},C.default.createElement(Vo,{offsetBottom:24+zo})),C.default.createElement(jo,{disconnectCallback:it}),n&&C.default.createElement(gr,{showBackup:()=>{g({text:E("wallet_dapp_conncetion_alert_backup_wallet")},e)}}),I&&C.default.createElement(Xo,{actionMap:{["RECOVER"]:()=>{Bt.push(`${co}?action=${$o.RECOVER}&walletId=${c}`)},["SWITCH_WALLET"]:()=>{Bt.push(`${We}?fromHome=1`)}}}),C.default.createElement(Lr,{walletId:c}),C.default.createElement(jr,{tryAgain:Jn,errorType:y}),C.default.createElement(Wn,{address:Lt}))},$f=Is;export{It as a,$f as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-LLGQRX2C.js.map
