import{d as We}from"./chunk-4RVQOPYQ.js";import{f as dt}from"./chunk-EU22H7NN.js";import{a as ct,e as fe}from"./chunk-SIIB3XCZ.js";import{p as ut,q as $}from"./chunk-UTVBVZWC.js";import{d as lt,g as mt}from"./chunk-GQYTOJVD.js";import{d as nt}from"./chunk-XVPROSYE.js";import{k as st}from"./chunk-FPV6XIHQ.js";import{a as at}from"./chunk-CA4PB6NG.js";import{c as pt,t as _t}from"./chunk-5STCPPZU.js";import{a as me}from"./chunk-LXIBKSOK.js";import{a as it}from"./chunk-C53RLQYB.js";import{b as Me}from"./chunk-S3O4LR55.js";import{l as Xe,m as Ne,n as Pe,q as T}from"./chunk-FZCNSMLW.js";import{a as Zt}from"./chunk-QMGTBJAL.js";import{o as le}from"./chunk-KCWFMCND.js";import{W as tt,Y as ot,m as qe}from"./chunk-3TDWET6C.js";import{b as ie,ca as Re,da as et}from"./chunk-EBR3PGFZ.js";import{e as Qe}from"./chunk-WSUAESF2.js";import{g as rt,h as Ie}from"./chunk-TW63K7CB.js";import{c as o}from"./chunk-FDCWN4NG.js";import{A as ne,G as Je,K as H,M as he,a as Ke,c as X,f as de,o as Te}from"./chunk-J3CEQI22.js";import{F as ue,K as $e,Q as Ze,e as He,f as _e,pa as ge}from"./chunk-VFHYER2K.js";import{L as re,l as J,w as c}from"./chunk-KJIO572I.js";import{E as Ve,T as Q,c as ce,ca as Y}from"./chunk-KALFZBR5.js";import{a as w}from"./chunk-EAZTJZU7.js";import{c as $t,f as x,m as r,o as n}from"./chunk-ZCHLW7CF.js";var Ue=$t((Ln,wt)=>{r();n();function ro(){}wt.exports=ro});r();n();var h=x(w()),ze=x(le());ge();re();r();n();var N=x(w()),xt=x(le()),yt=x(ce());ge();re();r();n();var C={NORMAL:"NORMAL",FEE_ERROR:"FEE_ERROR",...et,...Re},ft={[C.BALANCE_INSUFFICIENT]:"wallet_transfer_errortip_insufficient_balance",[C.FEE_ERROR]:"wallet_extension_alert_estimate_unavailable",[C.DEFRAUD]:"wallet_extension_protocol_toast_risk_warning_desc",[C.SIMILAR]:"wallet_extension_modaldesc_riskaddress"};r();n();var pe={"retina-border-basic":"_retina-border-basic_1itfd_1",retinaBorderBasic:"_retina-border-basic_1itfd_1",headerTip:"_headerTip_1itfd_29","tip-message-link":"_tip-message-link_1itfd_65",tipMessageLink:"_tip-message-link_1itfd_65",headerTipWarning:"_headerTipWarning_1itfd_68",headerTipMsg:"_headerTipMsg_1itfd_72",headerTipAction:"_headerTipAction_1itfd_77"};var qt=({text:t,track:e})=>{let i=at();return N.default.createElement(N.default.Fragment,null,t,N.default.createElement(de,{className:pe["tip-message-link"],type:de.TYPE.primary,weight:de.WEIGHT.muted,size:de.SIZE.xs,onClick:()=>{He(e)&&e(),setTimeout(()=>{globalThis.platform.openTab({url:i?.scamsUrl})},100)}},c("wallet_extension_scam_toast_link_view_scams")))},Vt=({type:t,coinId:e,inherit:i,address:a,walletId:p,className:l,message:m,hidden:u,actions:_=[],renderActions:f,renderMessage:s,blockAddressInfo:y,supportGasStation:B=!0})=>{let[I,{toggle:L}]=(0,xt.useBoolean)(!1),[E,Z]=(0,N.useState)(e),[P,D]=mt(e),ae=P?.baseCoinId===0,b=(0,N.useMemo)(()=>{if(s&&typeof s=="function"){let z=s(t);if(z)return z}if(P?.symbol&&t===C.FEE_BALANCE_INSUFFICIENT)return c(ae?"wallet_extension_popup_adjust_add":"wallet_extension_popup_insufficient_network_fee",{token:D?.symbol,symbol:D?.symbol});if(P?.symbol&&t===C.BALANCE_INSUFFICIENT)return c("wallet_transfer_errortip_insufficient_balance",{chainSymbol:P?.symbol});if(m)return m;let M=ft[t];if([C.DEFRAUD,C.SIMILAR].includes(t)){let z=!!a&&qe(a),ve=t===C.DEFRAUD?y?.msg:c(M,{contractaddress:z});return N.default.createElement(qt,{track:pt,text:ve})}return c(M,{chainSymbol:P?.symbol})},[s,P?.symbol,t,m,ae,D?.symbol,a,y?.msg]),te=(0,N.useMemo)(()=>f&&typeof f=="function"?f(t)||[]:_,[_,f]),se=(0,N.useMemo)(()=>{let M=[];if([C.BALANCE_INSUFFICIENT,C.FEE_BALANCE_INSUFFICIENT].includes(t)&&B&&!i){let z=t===C.FEE_BALANCE_INSUFFICIENT?D?.symbol:P?.symbol;return M=[{btnText:c("wallet_extension_placeorder_textbtn_replenish",{token:z}),onClick:()=>{L(),Z(t===C.FEE_BALANCE_INSUFFICIENT?D?.coinId:e)}}],[...M,...te]}return te},[i,t,B,te,D?.symbol,D?.coinId,P?.symbol,L,e]);return u||!b?null:N.default.createElement(N.default.Fragment,null,N.default.createElement(me,{offsetTop:0},N.default.createElement(o.FlexBox,{className:(0,yt.default)(pe.headerTip,l),align:o.ALIGN.center},N.default.createElement(Q,{iconName:"okx-wallet-plugin-error",className:pe.headerTipWarning}),N.default.createElement(o.Box,null,N.default.createElement(T.Text,{block:!0,className:pe.headerTipMsg},b),!ue(se)&&N.default.createElement(o.Space,{wrap:!0,space:12,style:{marginTop:"4px"}},se.map(({btnText:M,onClick:z})=>N.default.createElement(T.Text,{strong:700,className:pe.headerTipAction,onClick:z},M)))))),B&&N.default.createElement(ut,{address:a,visible:I,walletId:p,coinId:E,closeCallback:L}))},gt=N.default.memo(Vt);r();n();var A=x(w()),Tt=x(ce()),ht=x(Zt());re();r();n();var O={root:"_root_w4981_1",header:"_header_w4981_4",title:"_title_w4981_10",content:"_content_w4981_14",contractAddress:"_contractAddress_w4981_18",tabContent:"_tabContent_w4981_21",data:"_data_w4981_24",abi:"_abi_w4981_27",icon:"_icon_w4981_37",copyableText:"_copyableText_w4981_41"};var Kt=({children:t=null,advanced:e={},title:i=c("wallet_extension_transaction_tab_advanced"),tooltipZIndex:a})=>{let{data:p,contractList:l,methodName:m,methodParameter:u}=e,_=s=>{(0,ht.default)(s),Je.success({title:c("wallet_receive_toast_address_copied")})},f=(0,A.useMemo)(()=>m&&u?JSON.stringify({[c("wallet_extension_transaction_tab_func")]:m,[c("wallet_extension_transaction_tab_params")]:u},null,2):"",[m,u]);return!p&&!t?null:A.default.createElement(Ke,{className:O.root,headerClassName:O.header,titleClass:O.title,contentClassName:O.content,customHeaderIcon:s=>A.default.createElement(Q,{className:(0,Tt.default)(O.icon,"okds-arrow-chevron-down-md",{"okui-accordion-header-icon-expanded":s})}),title:i},l?.length?l.map(s=>A.default.createElement(o.Box,{className:O.contractAddress},A.default.createElement(fe,{title:s.title,address:s.address}))):null,A.default.createElement(he.Underline,{size:Ve.xs,noLine:!0,noPadding:!0,paneSpacing:24},A.default.createElement(he.TabPane,{tab:c("wallet_dapp_connection_subtitle_data_label"),id:"wallet_dapp_connection_subtitle_data_label"},A.default.createElement(o.Box,{className:O.tabContent},t||A.default.createElement(ne,{graspBaseDom:!0,title:c("wallet_receive_btn_copy_address"),type:ne.TYPES.neutral,trigger:ne.TRIGGER_TYPES.hover,zIndex:a},A.default.createElement(T.Text,{forceWrap:!0,onClick:()=>{_(p)},size:T.SIZE.sm,className:O.data},p)))),f?A.default.createElement(he.TabPane,{tab:c("wallet_extension_transaction_tab_abi"),id:"wallet_extension_transaction_tab_abi"},A.default.createElement(o.Box,{className:O.tabContent,onClick:()=>{_(f)}},A.default.createElement(ne,{noWrapper:!0,graspBaseDom:!0,title:c("wallet_receive_btn_copy_address"),type:ne.TYPES.neutral,trigger:ne.TRIGGER_TYPES.hover,zIndex:a},A.default.createElement("pre",{className:O.abi},f)))):null))},Nt=Kt;r();n();var W=x(w()),It=x(le()),bt=x(ce());re();r();n();var Be=x(w());r();n();var be={root:"_root_195s5_1",image:"_image_195s5_7",text:"_text_195s5_13"};var Jt=({imageUrl:t,text:e})=>Be.default.createElement(o.Box,{className:be.root},Be.default.createElement(X,{src:t,className:be.image,errorImg:Qe}),Be.default.createElement(T.Text,{ellipsis:{tooltip:e},className:be.text},e)),Le=Jt;r();n();var G={root:"_root_1g5ne_1",approve:"_approve_1g5ne_1",token:"_token_1g5ne_4",amount:"_amount_1g5ne_10",amountWrap:"_amountWrap_1g5ne_15",number:"_number_1g5ne_18",symbol:"_symbol_1g5ne_19",expiration:"_expiration_1g5ne_31",foldSwitch:"_foldSwitch_1g5ne_37",fold:"_fold_1g5ne_37"};var Qt=({amount:t,decimals:e,isRpcMode:i})=>i?tt(t)?c("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):Pe(t,{decimals:e}):ot(t)?c("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):Pe(t,{decimals:e}),Xt=t=>{t&&typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=12?28:e<=14?26:e>14&&e<=16?24:e>16&&e<=18?22:e>18&&e<=20?20:e>20&&e<=22?18:16},Rt=({approveInfoList:t,renderEditApproveAmount:e,updateApproveInfo:i,isRpcMode:a=!1})=>{let p=t.length>3,[l,{toggle:m}]=(0,It.useBoolean)(p),u=l?t.slice(0,3):t;if(t.length===1){let[_]=t,{tokenInfo:f,spender:s}=_,{symbol:y,imageUrl:B}=f||{},I=We(y,12);if([ie.CANCEL_AUTHORIZATION,ie.NFT_CANCEL_AUTHORIZATION,ie.DECREASE_ALLOWANCE].includes(s?.approvalType))return W.default.createElement(Le,{imageUrl:B,text:I})}return W.default.createElement(o.Box,{className:G.root},u.map(_=>{let{amount:f,tokenInfo:s,expiration:y}=_,{decimals:B,symbol:I}=s||{},L=We(I,12),E=Qt({amount:f,decimals:B,isRpcMode:a});return W.default.createElement(o.Box,{className:G.approve},W.default.createElement(o.Box,{className:G.token},W.default.createElement(o.Box,{className:G.amount},W.default.createElement(T.AdaptiveText,{nowrap:!0,ellipsis:{tooltip:`${E} ${L}`},autoSize:Xt,text:`${E}${L}`,className:G.amountWrap},W.default.createElement(T.Text,{inherit:!0,className:G.number},E),W.default.createElement(T.Text,{inherit:!0,className:G.symbol},L))),e(_,i)),y?W.default.createElement(o.Box,{className:G.expiration},c("wallet_extension_permitapproval_variable_days",{num:y})):null)}),p&&W.default.createElement(o.Box,{align:o.ALIGN.center,className:(0,bt.default)(G.foldSwitch,{[G.fold]:l}),onClick:m},W.default.createElement(o.Box,null,c(l?"extension_defi_card_textbtn_view_all":"extension_defi_card_textbtn_view_less")),W.default.createElement(Q,{className:"okx-wallet-plugin-add-arrow-chevrons"})))},Bt=Rt;r();n();var Ae=x(w());r();n();var Ee=x(w()),Et=x(le());r();n();var k=x(w()),Ct=x(ce());re();r();n();var Lt=t=>{t&&typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=12?28:e<=14?26:e>14&&e<=16?24:e>16&&e<=18?22:e>18&&e<=20?20:e>20&&e<=22?18:16};r();n();var R={singleChangeSummary:"_singleChangeSummary_163a5_1",cryptoWrap:"_cryptoWrap_163a5_4",cryptoNumber:"_cryptoNumber_163a5_9",cryptoSymbol:"_cryptoSymbol_163a5_15",currencyNumber:"_currencyNumber_163a5_20",coinLogo:"_coinLogo_163a5_26",singleChangeSummaryWithLogo:"_singleChangeSummaryWithLogo_163a5_30"};var eo=({coinId:t,injectCoin:e,currencyId:i,assetChange:a,justify:p="center",currencyAssetChange:l,withCoinLogo:m=!1,useMinPrecision:u=!0,needSwapCurrency:_=!1})=>{let f=lt(t,{withPrice:!0}),s=(0,k.useMemo)(()=>e||f,[f,e]),y=it(i),B=s?.usdPrice?J.mul(s?.usdPrice,y?.usdToThisRate):0,I=(0,k.useMemo)(()=>{let b;return a!==void 0&&!u&&(b=a),b===void 0&&a!==void 0&&s?.decimals!==void 0&&u&&(b=J.div(a,10**s?.decimals)),b===void 0&&l!==void 0&&B&&(b=J.div(l,B)),b},[a,l,B,s?.decimals,u]),L=(0,k.useMemo)(()=>{let b;return l!==void 0&&(b=J.mul(l,_?y?.usdToThisRate:1)),b===void 0&&I!==void 0&&(b=J.mul(I,B||0)),b===void 0&&J.lt(b,0)&&(b=J.mul(b,-1)),b},[B,I,_,l,y?.usdToThisRate]),E=(0,k.useMemo)(()=>I!==void 0?Ne(I,{validDigit:0,signDisplay:!0,precision:s?.orderDecimalNum||s?.decimals}):null,[s?.decimals,s?.orderDecimalNum,I]),Z=(0,k.useMemo)(()=>L!==void 0?Xe(L,{useApproximate:!1,symbol:y?.symbol}):null,[y?.symbol,L]),P=(0,k.useMemo)(()=>s?.image?{src:s?.image}:s?.symbol?{text:s?.symbol}:null,[s?.image,s?.symbol]),D=m?o.FlexBox:k.default.Fragment,ae=m?{align:o.ALIGN.center}:{};return k.default.createElement(D,{...ae},!!m&&!!P&&k.default.createElement(Me,{...P,size:Me.SIZE.lg,className:R.coinLogo}),k.default.createElement(o.FlexBox,{wrap:!0,justify:p,align:o.ALIGN.end,className:(0,Ct.default)(R.singleChangeSummary,{[R.singleChangeSummaryWithLogo]:m})},k.default.createElement(T.AdaptiveText,{strong:!0,nowrap:!0,ellipsis:{tooltip:`${E} ${s?.symbol}`},component:"span",autoSize:Lt,className:R.cryptoWrap,text:`${E}${s?.symbol}`},k.default.createElement(T.Text,{inherit:!0,className:R.cryptoNumber,component:"span"},E),k.default.createElement(T.Text,{inherit:!0,className:R.cryptoSymbol,component:"span"},s?.symbol)),k.default.createElement(T.Text,{component:"span",className:R.currencyNumber},Z)))},Ce=eo;var to=({title:t,space:e=24,tooltip:i,currencyId:a,summaryList:p,useMinPrecision:l,needSwapCurrency:m})=>{let u=(0,Et.useMemoizedFn)(_=>Ee.default.createElement(Ce,{withCoinLogo:!0,justify:"flex-start",coinId:_?.coinId,injectCoin:_?.injectCoin,assetChange:_?.assetChange,currencyId:_?.currencyId||a,currencyAssetChange:_?.currencyAssetChange,useMinPrecision:_?.useMinPrecision||l,needSwapCurrency:_?.needSwapCurrency||m}));return Ee.default.createElement(ct,{title:t,tooltip:i,space:8},Ee.default.createElement(nt,{space:e,renderEmpty:!1,dataSource:p,renderItem:u}))},At=to;r();n();var kt={sendToken:"_sendToken_r2evm_1"};var oo=({preExecRet:t})=>{let{assetDiffList:e,sendToken:i}=t||{};if(e?.length){let a=e.map(p=>({title:p.title,summaryList:p.tokenAssetDifflist.map(l=>{let{tokenInfo:m,type:u,amount:_,usdAmount:f}=l;return{injectCoin:{...m,image:m.imageUrl},withCoinLogo:!0,assetChange:_?`${u}${_}`:void 0,currencyAssetChange:f||void 0,needSwapCurrency:!0}})}));return Ae.default.createElement(o.Space,{space:24,direction:o.DIRECTION.vertical},a.map(At))}if(i?.length){let[{tokenInfo:a,type:p,amount:l,usdAmount:m}]=i,u={injectCoin:{...a,image:a.imageUrl},assetChange:l?`${p}${l}`:void 0,currencyAssetChange:m||void 0};return Ae.default.createElement(o.Box,{className:kt.sendToken},Ae.default.createElement(Ce,{...u}))}return null},vt=oo;r();n();var S=x(w()),St=x(Ue());r();n();var U={root:"_root_ud6a5_1",main:"_main_ud6a5_8",icon:"_icon_ud6a5_14",title:"_title_ud6a5_19",subTitle:"_subTitle_ud6a5_24",txInfo:"_txInfo_ud6a5_29",content:"_content_ud6a5_38",line:"_line_ud6a5_42",field:"_field_ud6a5_46"};var no=({handleCancel:t})=>{let e=[{onClick:t,actionType:$.ACTION_TYPE.CANCEL},{onClick:St.default,disabled:!0,actionType:$.ACTION_TYPE.CONFIRM}];return S.default.createElement(o.Box,{className:U.root},S.default.createElement(o.Box,{className:U.main},S.default.createElement(H.Input,{active:!0,className:U.icon}),S.default.createElement(H.Input,{active:!0,className:U.title}),S.default.createElement(H.Input,{active:!0,className:U.subTitle}),S.default.createElement(o.Box,{className:U.txInfo},S.default.createElement(H.Input,{active:!0,className:U.title}),S.default.createElement(H.Input,{active:!0,className:U.content})),S.default.createElement(H.Input,{active:!0,className:U.line}),S.default.createElement(H.Input,{active:!0,className:U.field}),S.default.createElement(H.Input,{active:!0,className:U.field}),S.default.createElement(H.Input,{active:!0,className:U.field})),S.default.createElement(me,{placeholder:!0,offsetBottom:0,borderTop:!0},S.default.createElement($,{buttonGroup:e})))},Ft=no;r();n();var K=x(w());r();n();var ee=x(w()),De=x(ce());ge();r();n();re();var je="UNKNOWN",Pt={[je]:{title:c("wallet_extension_transaction_page_title_unknown_transaction"),image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"}},[ie.TRANS_OUT]:{title:c("wallet_extension_send_title_send"),image:{light:"/cdn/assets/imgs/2411/CB43D95ECC4204BB.png",dark:"/cdn/assets/imgs/2411/07EBF82A7C4E6ABA.png"}},[ie.REGISTRATION]:{title:c("wallet_dapp_conncetion_notify_signature_request"),image:{light:"/cdn/assets/imgs/2411/32C073438B555887.png",dark:"/cdn/assets/imgs/2411/F0FFC2576F5F3139.png"}}};r();n();var V={"retina-border-basic":"_retina-border-basic_uvlo7_1",retinaBorderBasic:"_retina-border-basic_uvlo7_1",txType:"_txType_uvlo7_29",bordered:"_bordered_uvlo7_33",txTypeLogo:"_txTypeLogo_uvlo7_66",txTypeTitle:"_txTypeTitle_uvlo7_70",txTypeSubTitle:"_txTypeSubTitle_uvlo7_77",txTypeDesc:"_txTypeDesc_uvlo7_85",content:"_content_uvlo7_93",needChildrenPadding:"_needChildrenPadding_uvlo7_96"};var io=({className:t,txType:e=je,injectInfo:i={},children:a,bordered:p=!0,needChildrenPadding:l})=>{let m=Ze({},Pt[e],i),u=rt(m?.image);return ee.default.createElement(o.FlexBox,{justify:"center",align:o.ALIGN.center,direction:o.DIRECTION.vertical,className:(0,De.default)(V.txType,{[V.bordered]:p},t)},ee.default.createElement(X,{src:u,className:V.txTypeLogo}),ee.default.createElement(T.Text,{strong:500,className:V.txTypeTitle},m?.title),ee.default.createElement(T.Text,{strong:500,className:V.txTypeSubTitle},m?.subTitle),ee.default.createElement(T.Text,{className:V.txTypeDesc},m?.desc),ee.default.createElement(o.Box,{className:(0,De.default)(V.content,{[V.needChildrenPadding]:l})},a))},Mt=ee.default.memo(io);r();n();var F=x(w()),Wt=x(le());r();n();var j={root:"_root_1ixys_1",txExplain:"_txExplain_1ixys_1",txExplainModal:"_txExplainModal_1ixys_7",main:"_main_1ixys_20",image:"_image_1ixys_28",title:"_title_1ixys_33",infoList:"_infoList_1ixys_40",info:"_info_1ixys_40",subTitle:"_subTitle_1ixys_46",text:"_text_1ixys_53",footWrap:"_footWrap_1ixys_58"};var ao=({txExplain:t})=>{let[e,{toggle:i}]=(0,Wt.useBoolean)(!1),{image:a,descList:p,title:l,confirmBtnText:m}=t,u=Ie(a);return F.default.createElement(o.Box,{className:j.root},F.default.createElement(o.Box,{onClick:i,className:j.txExplain},F.default.createElement(Q,{className:"okds-question-mark-circle"})),F.default.createElement(Te.Action,{noContentPadding:!0,visible:e,onClose:i},F.default.createElement(o.Box,{className:j.txExplainModal},F.default.createElement(o.Box,{className:j.main},F.default.createElement(X,{src:u,className:j.image}),F.default.createElement(o.Box,{className:j.title},l),p?.length?F.default.createElement(o.Box,{className:j.infoList},p.map(_=>F.default.createElement(o.Box,{className:j.info},F.default.createElement(o.Box,{className:j.subTitle},_.text),F.default.createElement(o.Box,{className:j.text},_.desc)))):null),F.default.createElement(o.Box,{className:j.footWrap},F.default.createElement(Y,{block:!0,onClick:i,size:Y.SIZE.lg,type:Y.TYPE.highlight,category:Y.CATEGORY.fill},m)))))},Ut=ao;r();n();var xe={root:"_root_1gj3g_1",tools:"_tools_1gj3g_1",mevWrap:"_mevWrap_1gj3g_9",txExplainWrap:"_txExplainWrap_1gj3g_12",data:"_data_1gj3g_15"};var so=({txTypeInfo:t,children:e,...i})=>{let{txExplain1:a={},baseInfo:p={}}=t,l;p?.title?.text&&(l={...p,title:p.title.text});let u=K.Children.toArray(e)?.filter(Boolean)?.length;return K.default.createElement(Mt,{injectInfo:l,needChildrenPadding:u,...i},K.default.createElement(o.Box,{className:xe.root},K.default.createElement(o.Box,{className:xe.tools},a?.title?K.default.createElement(o.Box,{className:xe.txExplainWrap},K.default.createElement(Ut,{txExplain:a})):null),K.default.createElement(o.Box,{className:xe.data},e)))},jt=so;r();n();var Dt=x(w());re();var lo=({txState:{txId:t="",baseCoin:e={},estimateFailed:i=!1,isSufficientBalance:a=!0,isSufficientGas:p=!0,baseCoinAmount:l="",isBalanceLoadError:m,requestBalance:u},loading:_,walletAccount:f,preExecRet:s={}})=>{let{tipMessageInfo:y}=s,B=(0,Dt.useMemo)(()=>{let L=e?.coinId,{address:E,walletId:Z}=f;return m?{message:c("wallet_extension_transfer_error_text_wallet_balance_unavailable"),level:750,actions:[{btnText:c("wallet_extension_transfer_error_text_reload"),onClick:u}]}:p?a?i?{type:C.FEE_ERROR,level:770}:null:{type:C.BALANCE_INSUFFICIENT,txId:t,coinId:L,address:E,walletId:Z,level:760}:{type:C.FEE_BALANCE_INSUFFICIENT,renderMessage:()=>c("wallet_extension_toast_insufficient_balance_amount",{token:e?.symbol,balance:Ne(l)}),txId:t,coinId:L,address:E,walletId:Z,level:765}},[e?.coinId,e?.symbol,f,p,a,i,t,l,m,u]),I=y?.tipMessage?{message:y.tipMessage,level:y.level}:null;return _?null:[B,I].filter(Boolean).sort((L,E)=>L.level-E.level).pop()||null},Ot=lo;r();n();var ye=x(w()),ke=x(le()),zt=x(Ue());r();n();var g=x(w());ge();r();n();var v={root:"_root_ajyhg_1",main:"_main_ajyhg_14",image:"_image_ajyhg_23",title:"_title_ajyhg_27",desc:"_desc_ajyhg_36",descRaw:"_descRaw_ajyhg_37",extLink:"_extLink_ajyhg_44",descList:"_descList_ajyhg_50",addressItem:"_addressItem_ajyhg_53",assressTitle:"_assressTitle_ajyhg_56",assressInfo:"_assressInfo_ajyhg_62",assressGray:"_assressGray_ajyhg_69",footerWrap:"_footerWrap_ajyhg_72",verticalButtons:"_verticalButtons_ajyhg_75",extButton:"_extButton_ajyhg_79"};var mo={vertical:"vertical",horizontal:"horizontal"},Oe=({evtType:t,btnType:e}={})=>{t&&_t({specific_risk_scenarios:t,interaction_after_popup_window:e})},po=t=>{let{descRaw:e,desc:i,descList:a,evtType:p}=t;return e?g.default.createElement(T.Text,{className:v.descRaw},e):ue(i)?ue(a)?null:g.default.createElement(o.Box,{className:v.descList},a.map(l=>{let{text:m,highLightLogic:u}=l,_=[];if(u){let[f=6,s=4]=u?.split(":")||[];_.push(l?.desc?.slice(0,f)),_.push(l?.desc?.slice(f,-s)),_.push(l?.desc?.slice(-s))}return g.default.createElement(o.Box,{className:v.addressItem},g.default.createElement(o.Box,{className:v.assressTitle},m),g.default.createElement(o.Box,{className:v.assressInfo},g.default.createElement("span",null,_[0]),g.default.createElement("span",{className:v.assressGray},_[1]),g.default.createElement("span",null,_[2])))})):g.default.createElement(T.Text,{className:v.desc},g.default.createElement("span",null,i.text),g.default.createElement("span",{className:v.extLink,onClick:()=>{Oe({evtType:p,btnType:"click_on_the_risk_link"}),globalThis.platform.openTab({url:i.link.href})}},i.link?.text))},_o=t=>{let{btnLayout:e,evtType:i,handleClickHighLightButton:a,handleClickGrayButton:p,highlightBtnText:l,grayBtnText:m}=t,[u,_]=(0,g.useState)(!1),f=async()=>{Oe({evtType:i,btnType:"click_cancel"}),_(!0),await a(),_(!1)},s=()=>{Oe({evtType:i,btnType:"after_clicking_advanced_click_continue"}),p()};return e===mo.vertical?g.default.createElement(o.Box,{className:v.verticalButtons},g.default.createElement(Y,{block:!0,loading:u,size:Y.SIZE.lg,onClick:f,type:Y.TYPE.highlight,category:Y.CATEGORY.fill},l),m?g.default.createElement(o.Box,{className:v.extButton,onClick:s},m):null):g.default.createElement($,{buttonGroup:[m&&{loading:u,actionType:$.ACTION_TYPE.CANCEL,btnText:m,onClick:s},{actionType:$.ACTION_TYPE.CONFIRM,btnText:l,onClick:f}].filter(Boolean)})},uo=t=>{let{title:e,image:i}=t,a=Ie(i);return g.default.createElement(o.Box,{className:v.root},g.default.createElement(o.Box,{className:v.main},g.default.createElement(X,{className:v.image,src:a}),g.default.createElement(T.Text,{className:v.title},e),g.default.createElement(po,{...t})),g.default.createElement(o.Box,{className:v.footerWrap},g.default.createElement(_o,{...t})))},co=({handleCancel:t,handleCloseModal:e,popupInfoList:i})=>{let[a,p]=(0,g.useState)(0),l=i[a],m=a===i.length-1,u=()=>{p(s=>s+1)};return g.default.createElement(uo,{...l,handleClickGrayButton:()=>m?e():u(),handleClickHighLightButton:()=>t()})},Gt=co;var fo=({handleCancel:t=zt.default}={})=>{let e=(0,ye.useRef)(),i=(0,ye.useRef)(),a=()=>{e.current&&(e.current.destroy(),e.current=null,i.current=null)},p=(0,ke.useMemoizedFn)(l=>(i.current||(i.current=new Promise((m,u)=>{e.current=Te.action({hideCloseBtn:!0,maskClosable:!1,noContentPadding:!0,children:ye.default.createElement(Gt,{popupInfoList:l,handleCancel:async()=>{await t(),u(),a()},handleCloseModal:()=>{m(),a()}})})})),i.current));return(0,ke.useUnmount)(a),p},Yt=fo;r();n();var Ge={root:"_root_aunqi_1",txTypeExtInfo:"_txTypeExtInfo_aunqi_6","section-wrap":"_section-wrap_aunqi_12",sectionWrap:"_section-wrap_aunqi_12"};var Ye={signMessage:"signMessage",signTransaction:"signTransaction"},xo=({txType:t,preExecParams:e})=>{let i=e?.dappInfo,p={[Ye.signMessage]:{dappInfo:i,txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/32C073438B555887.png",dark:"/cdn/assets/imgs/2411/F0FFC2576F5F3139.png"},title:{text:c("wallet_dapp_conncetion_notify_signature_request")}}}},[Ye.signTransaction]:{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:c("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:i.host}}}}[t];return{defaultPreExecRet:{tipMessageInfo:{tipMessage:c("wallet_extension_transaction_error_general_check_network"),level:780},...p,canConfirm:!1},defaultTxTypeInfo:p}},yo=(0,h.memo)(({txType:t=Ye.signTransaction,preExecParams:e={},slot:i={},walletAccount:a={},handleCancel:p=_e,buttonGroup:l,txState:m={},renderEditApproveAmount:u=_e,onUpdatePreExecInfo:_=_e})=>{let{defaultPreExecRet:f,defaultTxTypeInfo:s}=xo({txType:t,preExecParams:e}),[y,B]=(0,h.useState)({}),[I,L]=(0,h.useState)(!0),[E,Z]=(0,h.useState)(!0),P=Yt({handleCancel:p}),D=(0,ze.useMemoizedFn)(async()=>{try{Z(!0);let q=await st(e);q.txTypeInfo||(q.txTypeInfo=s.txTypeInfo,q.dappInfo=s.dappInfo);let{approveInfoList:we}=q;if(we?.forEach((oe,Se)=>{oe.id=Se}),I){let{popupInfoList:oe}=q;oe?.length&&await P(oe).catch(_e)}B(q)}catch{B(f)}finally{L(!1),Z(!1)}});(0,h.useEffect)(()=>{_({...y,loading:I,silentLoading:E})},[y,I,_,E]),(0,h.useEffect)(()=>{$e(e.chainIndex)||D()},[e]);let ae=(0,ze.useMemoizedFn)((q,we)=>{B(oe=>{let{approveInfoList:Se}=oe;return{...oe,approveInfoList:Se.map(Fe=>q===Fe.id?{...Fe,...we}:Fe)}})}),b=y.txTypeInfo||{},te=y.dappInfo||{},se=y.approveInfoList||[],M=se[0]?.spender,{assetDiffList:z,sendToken:ve}=y||{},Ht=Ot({txState:m,walletAccount:a,preExecRet:y,loading:I});return h.default.createElement(o.Container,{className:Ge.root},I?h.default.createElement(Ft,{handleCancel:p}):h.default.createElement(h.default.Fragment,null,h.default.createElement(gt,{...Ht}),h.default.createElement(jt,{txTypeInfo:b},z?.length||ve?.length?h.default.createElement(vt,{preExecRet:y}):null,se.length?h.default.createElement(Bt,{approveInfoList:se,renderEditApproveAmount:u,updateApproveInfo:ae}):null,te?.host?h.default.createElement(Le,{imageUrl:te.icon,text:te.host}):null),h.default.createElement(o.FlexBox,{className:Ge["section-wrap"],direction:o.DIRECTION.vertical},i.mev,i.networkFeeEntry,M?h.default.createElement(fe,{address:M.address,connectable:M.addressType!=="eoa",title:c(dt(M.approvalType)?"wallet_extension_approve_header_dapp_contract_address":"wallet_extension_permitapproval_text_approved")}):null,i.network,h.default.createElement(fe,{address:a?.address,walletId:a?.walletId,title:c("wallet_extension_network_address_title_walletused")}),M?null:i.interactWith,i.advanced?i.advanced:h.default.createElement(Nt,{tooltipZIndex:101,advanced:y?.txExtInfo||{}})),h.default.createElement(me,{borderTop:!0,placeholder:!0,offsetBottom:0,style:{zIndex:205}},h.default.createElement($,{buttonGroup:l}))))}),Fa=yo;export{C as a,gt as b,Nt as c,Le as d,Bt as e,Ce as f,Mt as g,jt as h,Yt as i,Ye as j,Fa as k};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-SUU55JAC.js.map
