import{b as P,c as Y}from"./chunk-M5PVKGM6.js";import{o as B}from"./chunk-QHZHYX4V.js";import{b,c as K}from"./chunk-C53RLQYB.js";import{a as W}from"./chunk-DUKP4BLI.js";import{w as g,za as U}from"./chunk-3TDWET6C.js";import{a as X}from"./chunk-VPGNJAK6.js";import{aa as C,da as D,ea as Z}from"./chunk-W6Q44ZHW.js";import{d as _}from"./chunk-O2FUKKO3.js";import{Eb as R,Gb as f,Hb as x,Mc as $,V as I,Ya as J,dc as V,wc as A}from"./chunk-O3CM75EN.js";import{H as N}from"./chunk-J3CEQI22.js";import{L as z,w as T}from"./chunk-KJIO572I.js";import{a as j}from"./chunk-EAZTJZU7.js";import{f as u,m as l,o as n}from"./chunk-ZCHLW7CF.js";l();n();var F=u(j()),O=u(g()),q=u(X());z();l();n();var G=u(g());l();n();Z();var tt=D({name:"assetsSlice",initialState:{assets:[]},reducers:{setAssets:(t,r)=>{t.assets=r.payload}}}),{actions:et,reducer:st}=tt,rt=[],k=C(t=>t.assetsSlice.assets??rt,t=>t.reduce((r,s)=>r.set(s.walletId,s),new Map)),mt=()=>async t=>{(await _.assets).liveQuery().subscribe((s,m)=>{m||t(et.setAssets(s))})},ct=st;function H(){return(0,G.useSelector)(k)}l();n();$();J();V();var L=({walletAccounts:t,rpcData:r,assetsMap:s,showNftAmount:m,selectedCurrency:d,hiddenSmallAsset:i})=>{let c=t.map(e=>{if(!e)return{walletAsset:"0",platformAsset:"0"};let{walletId:o}=e;if(!!r){let{chainTokensAccountMap:M}=r,p=e?.account?.[I];if(!p||[A.HD_KEYRING,A.SIMPLE_KEYRING,A.MPC_KEYRING].indexOf(e?.initialType)<0)return{unsupported:!0,walletAsset:"0",platformAsset:"0",...e};let{balance:v="0"}=M[p]?.filter(({address:Q})=>!Q)[0]||{};return{walletAsset:v,platformAsset:"0",...e}}let a=s.get(o),E=(a?[a.tokenTotalAssetsUSD,a.defiTotalAssetsUSD,m?a.nftTotalAssetsUSD:"0"]:[]).reduce((M,p)=>f(M,p),"0");return{walletAsset:a?R(i?x(E,a.smallTotalAssetsUSD):E,d.usdToThisRate):"--",platformAsset:a?a.platformTotalAssetsUSD:"--",...e}}),{walletAsset:S,platformAsset:w}=c.reduce((e,o)=>({walletAsset:f(e.walletAsset,o.walletAsset==="--"?"0":o.walletAsset),platformAsset:f(e.platformAsset,o.platformAsset==="--"?"0":o.platformAsset)}),{walletAsset:"0",platformAsset:"0"});return{walletAccountsWidthBalance:c,walletAsset:S,platformAsset:w}};var ot=t=>{let r=(0,q.useHistory)(),s=B(t),[m]=K(b.showNftAmount),d=P(),i=Y(d),c=H(),S=(0,O.useSelector)(U);return s||(N.error(T("wallet_extension_top_error_parameters")),r.push(W)),(0,F.useMemo)(()=>{let{walletIdentities:w}=s,{walletAccountsWidthBalance:e,walletAsset:o,platformAsset:y}=L({walletAccounts:w,showNftAmount:m,rpcData:null,selectedCurrency:i,assetsMap:c,hiddenSmallAsset:S});return{...s,walletAsset:o,platformAsset:y,walletIdentities:e}},[s,m,i,c])},Kt=ot;export{mt as a,ct as b,H as c,L as d,Kt as e};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-TOO5SEJU.js.map
