import{a as hs,b as rd,c as zi,d as sd}from"./chunk-2NTNJVAS.js";import{a as Mt,b as $u,c as Xu,d as bo}from"./chunk-O4PAAVR4.js";import{a as Ts,b as Yu,c as zu,d as ue,e as Zu,f as X,g as Ss,h as Qu,l as od,m as td,n as Bo}from"./chunk-JAXPFHLZ.js";import{a as xs,b as ju}from"./chunk-KXIOITHX.js";import{a as nd}from"./chunk-FHYCI7EC.js";import{a as Zt}from"./chunk-KREYO6N2.js";import{a as ed}from"./chunk-GMIVMIOG.js";import{a as Is}from"./chunk-YI2BHXGP.js";import"./chunk-CDVXLQA3.js";import{a as Au}from"./chunk-OLSPOVRK.js";import"./chunk-CPUZRLUF.js";import"./chunk-JBU7IWTZ.js";import{a as ae,b as Iu}from"./chunk-I3YYO6Y3.js";import{a as Cu,b as Tu}from"./chunk-F46AEGKF.js";import{a as Su}from"./chunk-SZXMH4IF.js";import{b as fu,k as lu}from"./chunk-NHNDGUWA.js";import{a as pu,b as gu}from"./chunk-AQPMJGF5.js";import{a as nu,b as su,c as ts,e as uu}from"./chunk-JWQGMLG5.js";import{a as fn,b as iu,f as au,g as cu,i as mu}from"./chunk-SUU55JAC.js";import"./chunk-4RVQOPYQ.js";import"./chunk-CCXOIJJY.js";import"./chunk-EU22H7NN.js";import"./chunk-KTRYKYE5.js";import{a as ru}from"./chunk-V2A2AEVZ.js";import"./chunk-5NP5YBP7.js";import{a as qn,b as es}from"./chunk-ELKHXPPU.js";import{a as du}from"./chunk-45NOBBNS.js";import{a as fm,d as lm,m as eu}from"./chunk-AFGI3MHV.js";import"./chunk-Z2M3JODD.js";import"./chunk-XVRO6N6T.js";import"./chunk-UTGDPJGB.js";import{b as $o,c as Xr,d as Jm,f as Ym,h as zm,i as Gn,j as jr,k as Hn,m as un,q as Zm,r as Qr,s as $m,t as Xm}from"./chunk-D6NWGDM6.js";import"./chunk-NV3OX353.js";import"./chunk-3QYKNWJE.js";import{c as fo}from"./chunk-NJJL64HF.js";import"./chunk-CK5YETQI.js";import{a as Ne}from"./chunk-ZVUQCOMJ.js";import{a as at,d as ko,e as kt,f as um,g as dm}from"./chunk-TSGQQ5QA.js";import{a as am,b as cm,c as mm}from"./chunk-KU3DITYD.js";import"./chunk-7CWLH6ZR.js";import"./chunk-3YTH2U6Q.js";import"./chunk-Q5HW75TA.js";import{a as Gi}from"./chunk-TN557PDS.js";import"./chunk-SYF5MRVO.js";import{a as No}from"./chunk-RFD2FBBX.js";import{a as os}from"./chunk-UUX3UNZW.js";import{c as tm,e as em}from"./chunk-QCTV4R7X.js";import{a as Vn,d as Tt,e as Vi,g as tu}from"./chunk-SIIB3XCZ.js";import{A as Yr,B as rn,C as Lt,D as Lm,E as Dm,F as Mm,G as Om,H as to,I as Be,J as Rm,K as Um,L as Wm,M as eo,O as Zr,P as sn,R as Hm,T as Zo,U as an,V as cn,W as Vm,X as uo,Y as $r,Z as qm,_ as Km,a as bm,d as Vr,e as Oo,f as S,g as Nt,h as B,i as Bt,j as Em,k as q,l as re,m as $,n as Pm,o as km,p as qr,q as wo,r as se,s as Kr,t as nn,u as wm,v as _,w as Nm,x as Bm,y as Jr,z as vt}from"./chunk-GUGRL7WK.js";import"./chunk-6ZHQ2QLX.js";import{a as ie,e as zr,f as vm}from"./chunk-S4NIXE4H.js";import{a as So,e as tn,o as rm,p as im,q as Pt}from"./chunk-UTVBVZWC.js";import{h as Gm}from"./chunk-GL4YYTXQ.js";import{a as Mr}from"./chunk-4MDR2IS2.js";import{b as sm}from"./chunk-GZN3TPOZ.js";import"./chunk-ZN3567SM.js";import"./chunk-SJCGLHGC.js";import{d as Ko,f as Yt,g as Qc,j as om}from"./chunk-GQYTOJVD.js";import"./chunk-7HZMPY3W.js";import{a as it}from"./chunk-QTEBOXIQ.js";import{b as jm,d as Qm,e as ou}from"./chunk-AB2B4P3R.js";import{a as dn}from"./chunk-FWZNHZQB.js";import{a as mn}from"./chunk-FSQDFL3V.js";import"./chunk-YLJ56YQC.js";import"./chunk-YVC4CAU2.js";import"./chunk-K4MSA5MN.js";import"./chunk-4HBLPFAF.js";import{a as jc}from"./chunk-TJW4EUGS.js";import{a as on}from"./chunk-SJRV5U24.js";import"./chunk-PUMQ7BEU.js";import"./chunk-4OKCKO5L.js";import"./chunk-VAJR5FGA.js";import{a as Br}from"./chunk-SKK4O3IC.js";import{b as Ct,c as Ec,d as Pc}from"./chunk-L4BR2EHM.js";import{b as Ic,d as Sc,f as xc,g as hc,h as _c,i as yc,j as Fc,n as bc}from"./chunk-AQH6QKNE.js";import"./chunk-6IVHTBSR.js";import{a as Tc,b as Un}from"./chunk-75OW6LUI.js";import"./chunk-W4IULSMQ.js";import"./chunk-UXRYSOKP.js";import"./chunk-ABSI53HE.js";import"./chunk-JJIQEHOY.js";import{a as fT}from"./chunk-6SD3HIRD.js";import{$ as Ki,B as Cn,C as ms,D as us,E as Tn,F as me,G as dt,H as Nu,I as In,J as Bu,K as vu,L as ft,M as Lu,N as Du,O as ds,P as qi,Q as Mu,R as Ou,S as Ru,T as fs,U as Uu,V as Wu,W as Gu,X as Jn,Y as ls,Z as Yn,_ as ps,aa as Hu,b as xu,ba as Vu,c as ln,ca as It,d as hu,e as _u,ea as gs,f as yu,fa as qu,g as pn,ga as As,h as ns,ha as Ku,i as gn,ia as Cs,j as An,ja as zt,k as Fu,ka as Ji,l as mt,la as Yi,m as bu,ma as Ju,n as rs,o as ss,p as is,q as ce,r as as,s as Dt,t as Kn,u as Eu,v as Pu,w as ku,x as ut,y as wu,z as cs}from"./chunk-2AX7AESG.js";import"./chunk-FAJ2Q5PZ.js";import"./chunk-5U7ZXBMP.js";import"./chunk-C77TCOTM.js";import{a as Nc,b as Bc}from"./chunk-EBBN5EW3.js";import"./chunk-KA5VAELR.js";import"./chunk-JOXGYPV7.js";import"./chunk-RUFGCIXT.js";import"./chunk-4BUFJ3ZT.js";import"./chunk-2IQIJXLO.js";import"./chunk-T37NLQBV.js";import"./chunk-U5WRMXFD.js";import{A as Hi,B as Gr,C as Wn,D as hm,E as _m,H as ee,I as z,J as R,K as co,L as ym,N as Fm,P as Mo,Q as ne,R as Hr,b as Or,c as pm,f as ao,g as Rr,h as Ur,k as gm,l as Am,m as ct,n as Cm,o as Wr,p as wt,q as Tm,s as Im,w as Sm,x as en,z as xm}from"./chunk-JMTMYFWR.js";import"./chunk-RE5SSELD.js";import"./chunk-A3B5II6P.js";import{d as Ui}from"./chunk-XVPROSYE.js";import"./chunk-E2MXYP3A.js";import{A as Zc,B as $c,P as Xc,b as je,c as Qe,d as Dr,k as Gc,m as Hc,n as Vc,q as qc,r as Kc,s as Jc,t as Yc,v as zc}from"./chunk-FPV6XIHQ.js";import"./chunk-MZXFJMVC.js";import"./chunk-46PSZUMN.js";import"./chunk-MYY7DCIN.js";import"./chunk-AHIMORZ4.js";import"./chunk-M2ZE7N7H.js";import"./chunk-XZ6AHFH2.js";import"./chunk-3DEZPDXQ.js";import"./chunk-6UFIPREK.js";import{e as we}from"./chunk-G4OIO3Z6.js";import"./chunk-JEIYTQ5E.js";import"./chunk-TOO5SEJU.js";import"./chunk-DUWPYFAS.js";import{a as Lc}from"./chunk-CA4PB6NG.js";import"./chunk-SCXRHDUG.js";import{s as Wi,w as nm}from"./chunk-5STCPPZU.js";import"./chunk-ZVXDJZSD.js";import{a as st,b as Rc,j as Uc}from"./chunk-56SDY6L3.js";import{c as Oc}from"./chunk-PXWV5LKL.js";import"./chunk-M5PVKGM6.js";import"./chunk-AK34CZMZ.js";import{a as Dc,f as Mc,h as Co,i as vr,m as Lr}from"./chunk-QHZHYX4V.js";import"./chunk-FLFVNMKM.js";import{c as kc,f as wc}from"./chunk-YJ2NGJXA.js";import{m as io}from"./chunk-TUUPYEC6.js";import"./chunk-DQ2UEFEE.js";import{a as Wc}from"./chunk-ZUBNNPBM.js";import"./chunk-2SHHGXPQ.js";import"./chunk-UK4SAM7E.js";import{a as vc}from"./chunk-LXIBKSOK.js";import"./chunk-C53RLQYB.js";import"./chunk-72NGWMH2.js";import"./chunk-VRXSSD45.js";import{_a as Nr,a as Ac,f as qo,ja as wr,ka as Ze,la as $e}from"./chunk-DUKP4BLI.js";import{b as ze}from"./chunk-S3O4LR55.js";import{m as be,n as On,q as Y}from"./chunk-FZCNSMLW.js";import"./chunk-WANYNTD6.js";import"./chunk-QMGTBJAL.js";import{o as K}from"./chunk-KCWFMCND.js";import{Q as br,g as nc,ga as bt,m as Oi,p as Sr,r as tt,w as E}from"./chunk-3TDWET6C.js";import{$ as gc,V as Vo,Y as pc,_ as ke,b as Fo,ca as Jt,d as fc,da as no,m as lc,n as Ri,r as Er,s as te,t as Pr,u as Je,v as Ye,w as kr}from"./chunk-EBR3PGFZ.js";import{a as cc}from"./chunk-UDGUBKMO.js";import{a as Po}from"./chunk-VPGNJAK6.js";import"./chunk-W6Q44ZHW.js";import{d as so,f as Do}from"./chunk-3HS6AHPS.js";import"./chunk-VGEPKX55.js";import{a as Xe,b as Et}from"./chunk-JUXPONKW.js";import{e as _r}from"./chunk-WSUAESF2.js";import{a as dT}from"./chunk-O2FUKKO3.js";import"./chunk-GQJVAWGG.js";import"./chunk-WO5B666G.js";import"./chunk-GCXT25LW.js";import{g as Cc}from"./chunk-TW63K7CB.js";import{c as H}from"./chunk-FDCWN4NG.js";import"./chunk-5YGMD6KK.js";import{$ as Ar,$a as ja,Dc as U,Eb as Wo,Fa as Va,Fb as _o,Fc as Rn,Ga as qa,Gb as mo,Hb as qt,Ia as Ka,Ja,Jb as Go,Jc as Fr,Ka as Ya,Kb as Mn,La as za,Lb as ot,Ma as Za,Mc as yo,Na as $a,Nb as Ir,Oa as Xa,Pc as dc,Sc as rt,Uc as Ee,Vc as Ho,Wc as Pe,X as gr,Ya as Io,Zb as oc,a as wa,aa as Ua,ab as Di,b as cT,dc as lo,ga as Wa,ha as Ga,hb as Mi,hc as tc,ia as Li,jc as ec,mc as uT,pa as Ha,pb as Qa,sc as yr,ta as Cr,tb as Tr,vc as mc,wb as He,xc as uc,yc as nt}from"./chunk-O3CM75EN.js";import"./chunk-ZGRAPBBU.js";import{E as hr,G as ac,H as oe,M as Ke,c as rc,e as xr,o as et,q as Kt,r as sc,s as ic}from"./chunk-J3CEQI22.js";import{F as We,K as pr,d as Na,e as vi,ea as Oa,f as Ba,ga as Dn,j as va,ka as Ra,pa as zo,s as La,w as Da,y as Ma}from"./chunk-VFHYER2K.js";import{L as J,l as M,v as Ge,w as F}from"./chunk-KJIO572I.js";import{b as mT}from"./chunk-HJXNXGYU.js";import"./chunk-77ECUYXV.js";import"./chunk-4BZBCAHV.js";import{T as Ve,Z as qe,c as Ft,ca as go}from"./chunk-KALFZBR5.js";import"./chunk-V55FEIYE.js";import{a as h}from"./chunk-EAZTJZU7.js";import"./chunk-YTRW5WTJ.js";import"./chunk-3AN5FAZD.js";import"./chunk-CJ3MW6GG.js";import"./chunk-AKCHCVUS.js";import"./chunk-VOT7VHG3.js";import"./chunk-SYQUJKIR.js";import"./chunk-UYGNKZ5P.js";import"./chunk-KZFZROAL.js";import"./chunk-WPMHLM7C.js";import"./chunk-3MRE2BAK.js";import"./chunk-CSLLQXN7.js";import"./chunk-OXNCWA4Z.js";import"./chunk-Y2IFB4P6.js";import"./chunk-P7DU4NJA.js";import"./chunk-3COZNTED.js";import"./chunk-AGPXVFMO.js";import"./chunk-FGSHVA46.js";import"./chunk-FMFDUPSA.js";import"./chunk-GAJPJAPC.js";import"./chunk-KW7JYBDS.js";import"./chunk-224G4QSH.js";import{f as u,m as s,n as p,o as i}from"./chunk-ZCHLW7CF.js";s();i();var At=u(h()),ye=u(Po());zo();s();i();var Sn=u(h()),_s=u(E()),id=u(Po());var lT=()=>{let o=(0,id.useHistory)(),t=(0,_s.useDispatch)(),e=(0,_s.useSelector)(pm),n=(0,Sn.useRef)(e);return n.current=e,(0,Sn.useEffect)(()=>{let{fromPage:r}=o.location?.state||{};return r&&t(Sm(r)),t(en(!0)),()=>{n.current&&(t(Hr()),t(Cs()))}},[]),null},ad=(0,Sn.memo)(lT);s();i();s();i();s();i();var pd=u(h());s();i();var fe=u(h());J();s();i();var cd=u(h()),md=u(K());J();Do();var pT=()=>{let o=st(),[t,e]=(0,cd.useState)(!1);return[(0,md.useMemoizedFn)(async r=>{try{e(!0);let a=await so().getRequestHeaders({currency:"usd",walletId:o,needSign:!0}),{data:c}=await Xc(r,{txSource:1},{headers:a}),m="";if(c?.canRecharge||(m=c.rechargeMsg),c?.canWithdraw||(m=c.withdrawMsg),m){let d=et.warn({text:m,confirmText:F("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{d.destroy()}});return!1}return!0}catch{return oe.error(F("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},ud=pT;s();i();s();i();var de=u(h());J();function gT({loading:o,tag:t,customRender:e,focus:n,noMargin:r,noPadding:a,onChange:c,onRef:m,...d}){let g=(0,de.useRef)(null);(0,de.useLayoutEffect)(()=>{n&&g.current?.focus()},[]);let l=F("wallet_extension_transaction_placeholder_input_address");return de.default.createElement(Zt.Row,{noMargin:r,noPadding:a},de.default.createElement(Kt.TextArea,{placeholder:l,errorType:Kt.TIP_TYPE.always,size:Kt.SIZE.xl,autoResize:!0,...d,onRef:f=>{g.current=f,m&&m(f)},onChange:f=>{c&&c(f.target.value)},customRender:({inputComponent:f})=>{let A=de.default.createElement(Zt.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var Zi=gT;s();i();var xo=u(h()),ve=u(E()),ys=u(K()),fd=u(Ft());zo();J();s();i();var dd={selected:"_selected_1gvyw_1"};function AT({value:o,network:t}){let e=(0,ve.useDispatch)(),n=(0,ve.useSelector)(Or),[r,a]=(0,xo.useState)(!1),[c,m]=(0,xo.useState)({}),[d,g]=(0,xo.useState)(""),l=ou(()=>{g(Is.TYPE.ADD),m({address:o,network:t}),a(!0)}),f=(I={})=>{a(!1),m({}),g(""),I.name&&e(Wn({name:I.name,type:Ri.ADDRESS_BOOK}))},A=I=>{a(!1),setTimeout(()=>{g(Is.TYPE.EDIT),m({...I,network:t}),a(!0)})};return xo.default.createElement(xo.default.Fragment,null,xo.default.createElement(Zt.InputBottomBar,{title:F("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:F("wallet_extension_send_anchor_add_now"),buttonClick:l}),xo.default.createElement(Is,{visible:r,type:d,data:c,onClose:f,onChangeToEdit:A,onBackToHome:()=>n}))}function CT({visible:o,options:t,onSelect:e,onChange:n}){let r=(0,ve.useDispatch)();if(!o)return null;let a=({walletId:c,address:m,name:d,type:g,group:l,addressType:f})=>{if(e(),n(m),d){let A=l?`${l} - ${d}`:d;r(Wn({name:A,type:g,extra:{walletId:c,group:l,name:d,addressType:f}}))}};return xo.default.createElement(Zt.SelectAddress,{options:t,onSelect:a})}function TT(o,t,e){let n=e?.matchAddress||((r,a)=>Dn(a.address).includes(Dn(r))||a.name&&Dn(a.name).includes(Dn(r)));return(0,xo.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let r=[];return o.forEach(({group:a,list:c})=>{let m=[];c.forEach(d=>{n(t,d)&&m.push(d)}),m.length&&r.push({group:a,list:m})}),r},[o,t])}function IT({value:o,error:t,onChange:e,isCheckingError:n,extraProps:r,onBlur:a,onFocus:c,...m}){let d=(0,ve.useDispatch)(),g=Oo(),{coin:l}=S(),{localType:f}=l,A=(0,ve.useSelector)(Ur),I=_(),{filterAddress:T,disableRequestDomain:C}=r||{},x=!o,b=!!o&&!t&&!A?.name&&!n,y=Qm(f,I),k=(0,xo.useMemo)(()=>T?T(y):y,[y,T]),[v,N]=(0,xo.useState)((!o||!!t)&&!b&&k?.length>0),P=TT(k,o,r),w=jm(f),O=W=>{e(W);let G=w(W),oo=Boolean(W&&G);d(Wn(oo?G:null))},{loading:L,abort:D}=bm({domainInputValue:o,coinId:g},({address:W,domain:G})=>{d(Gr({key:"",args:{}})),e(W),d(Wn({name:G,type:Ri.ENS}))},C),V=(0,ys.useDebounce)(!!L||!!m.loading||!!n,{wait:200});return(0,ys.useThrottleEffect)(()=>{n||(!!o&&!t&&P.length===0?N(!1):!!t&&P?.length>0&&N(!0))},[o,t,n,P?.length],{wait:100}),xo.default.createElement("div",{className:(0,fd.default)({[dd.selected]:v})},xo.default.createElement(Zt.Row,{noMargin:v},xo.default.createElement(Zi,{...m,noMargin:!0,noPadding:!0,loading:V,tag:A?.name,focus:x,value:o,error:!V&&t,onChange:O,onBlur:W=>{o&&!t&&setTimeout(()=>{N(!1)},100),a&&a(W)},onFocus:W=>{P?.length>0&&N(!0),c&&c(W)}}),b&&xo.default.createElement(AT,{network:f,value:o})),xo.default.createElement(CT,{visible:v,extraProps:r,value:o,options:P,onSelect:()=>{D(),N(!1)},onChange:e}))}var $i=IT;s();i();var zn=u(h()),Zn=u(E());J();function ST({Component:o=$i,loading:t=!1,extraProps:e,errorFns:n={fns:[],override:!1}}){let r=(0,Zn.useDispatch)(),c=it().get("address"),m=(0,Zn.useSelector)(ao),d=(0,Zn.useSelector)(Rr),g=Dm(),{isCheckingError:l,runErrorFns:f}=rn(g,n),A=T=>{f(T,C=>{r(Gr(C))})},I=T=>{A(T),r(Hi(T))};return(0,zn.useEffect)(()=>{c&&r(Hi(c))},[]),(0,zn.useEffect)(()=>{r(xm(l))},[l]),zn.default.createElement(o,{value:m,onChange:I,loading:t,isCheckingError:l,error:d?.key?F(d?.key,d?.args):null,extraProps:e||{}})}var Xi=ST;s();i();var ld={content:"_content_12kl2_1"};function xT({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let n=Oo(),r=Jr(),a=Bm(),c=vt(),[m,d]=ud(),g=(0,fe.useMemo)(()=>{let{disabled:l,loading:f,onClick:A,...I}=e||{},T=l||r,C=async()=>{let x=A||c;await m(n)&&await x()};return[{disabled:T,btnText:F("wallet_extension_send_btn_next_step"),actionType:Pt.ACTION_TYPE.CONFIRM,loading:!T&&(f||a||d),onClick:C,...I}]},[e,r,a,c,m,d,n]);return fe.default.createElement(Ts,{slot:{header:fe.default.createElement(Yu,{...o,title:F("wallet_extension_send_title_recipient_address"),pageIndex:1}),footer:fe.default.createElement(Pt,{buttonGroup:g})}},fe.default.createElement("div",{className:ld.content},fe.default.createElement(Xi,{...t})))}var j=xT;var hT=()=>pd.default.createElement(j,null),gd=hT;s();i();var Sd=u(h());s();i();var Ad=u(h()),Cd=u(E()),Td=u(K());var _T=()=>{let[o,{setFalse:t}]=(0,Td.useBoolean)(!0),{coin:e}=S(),n=_(),r=(0,Cd.useDispatch)(),{chainId:a,coinId:c}=e;return(0,Ad.useEffect)(()=>{a&&n&&(async()=>{try{let d={coinId:c,chainId:a,address:n},g={fromAddr:n},{maxGasAmount:l,gasUnitPrice:f,fee:A}=await zc(d,g);r(z(A)),r(Bu({maxGasAmount:l,gasUnitPrice:f})),r(R(!1))}catch{r(R(!0))}finally{t()}})()},[a,n]),o},Id=_T;function yT(){let o=Id();return to(),Sd.default.createElement(X,{confirmButtonProps:{loading:o}})}var xd=yT;s();i();var Ld=u(h());s();i();var vo=u(h()),$n=u(E());zo();J();s();i();var hd=u(h()),_d=u(E());lo();function yd(){let o=(0,_d.useDispatch)(),t=re(),e=Zo();(0,hd.useEffect)(()=>{if(t){let n=e;Go(n,0)&&(n="0"),o(hm(n))}},[t,e])}s();i();var Fd=u(Po()),bd=u(K());var FT=({disabled:o,onSubmit:t,feeLoading:e,loading:n,onClick:r,networkFee:a,renderActions:c,...m},d)=>{let g=(0,Fd.useHistory)(),l=Nt(),{coin:f}=S(),A=_(),{loading:I,onClick:T}=Km(t),C=qm();return(0,bd.useCreation)(()=>{if(c&&typeof c=="function"){let x=c(d);if(x)return x}return[{actionType:Pt.ACTION_TYPE.CANCEL,onClick:()=>{g.goBack()}},{loading:n||I,disabled:o||C||e,actionType:Pt.ACTION_TYPE.CONFIRM,onClick:r||T,...m}]},[e,n,f?.coinId,C,T,o,d,l?.coinId,A,I,r,m])},Ed=FT;s();i();var Pd=u(h());var bT=({loading:o,chainName:t,feeLevel:e,onClick:n,...r},a)=>{let c=$(),m=se(),d=wo(),g=km(),l=qr(),f=ae(),A=n?()=>{n(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,I=(0,Pd.useMemo)(()=>e!==void 0?e:Vo?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:g&&c==="0"?void 0:c,loading:o||g,level:I,coinId:m,estimateFailed:!!l,onClick:A,...r}},kd=bT;s();i();var ji=u(E()),wd=u(K());J();var ET=()=>{let o=re(),t=S(),e=(0,ji.useSelector)(Tm),n=wo(),r=t?.coin?.coinId,a=q(),c=om(r,a,{currencyId:n,formatted:!1}),m=(0,ji.useSelector)(gm);return(0,wd.useCreation)(()=>{let d=0,g=0;return e===sm?o?(g=M.mul(c,-1),d=M.mul(a,-1)):(d=void 0,g=M.mul(m,-1)):(d=M.mul(a,-1),g=void 0),{currencyId:n,coinId:r,assetChange:d,useMinPrecision:!0,currencyAssetChange:g}},[e,n,r,o,c,m,a])},Nd=ET;s();i();var Bd={coinSummaryItem:"_coinSummaryItem_12y02_1",coinSummaryItemTitle:"_coinSummaryItemTitle_12y02_1"};function PT({loading:o,networkFeeProps:t={},confirmButtonProps:e={},containerProps:n={},tipMessageProps:r={},slot:a={},checkEmpty:c=!0,addressType:m,renderMessage:d,renderTipActions:g,defaultMessage:l,canTransferAmount:f,tipActions:A=[]}){let I=(0,$n.useSelector)(ao),T=(0,$n.useSelector)(Ur),C=st(),x=ru(C),b=(0,$n.useSelector)(Im),y=(0,$n.useSelector)(hu),k=_(),v=Nd(),{coin:N,baseCoin:P}=S(),w=kd({...t,chainName:N?.chainName},x),{loading:O,estimateFailed:L}=w,V=w?.gasReturn?.activity?.errorCode,{bottom:W,networkFee:G,footer:oo}=a,Z=vo.default.createElement(Tt,{bordered:!1,verticalPadding:!1},vo.default.createElement(os,{...w}));G&&vi(G)&&(Z=G(w)),G&&!vi(G)&&(Z=G),zu(c),yd(),(0,vo.useEffect)(()=>{V===0&&nm({wallet_address:k,chain_id:P.chainId,transaction_type:"transfer"})},[V]);let To=Ed({...e,feeLoading:O},b?.type||y);return vo.default.createElement(Ts,{...n,loading:o,className:Bd.root,slot:{header:vo.default.createElement(iu,{...r,address:k,coinId:N?.coinId,actions:A,renderActions:g,renderMessage:d,type:b?.type||y||L&&tu.TIP_TYPE.FEE_ERROR,message:b?.text||!!b?.key&&F(b.key,b?.args)||!L&&l}),footer:oo||vo.default.createElement(Pt,{buttonGroup:To})}},vo.default.createElement(H.Space,{space:24,direction:H.DIRECTION.vertical},vo.default.createElement(cu,{txType:Fo.TRANS_OUT},vo.default.createElement(H.FlexBox,{justify:"center"},vo.default.createElement(au,{...v}))),Z,vo.default.createElement(Tt,{bordered:!1,verticalPadding:!1},vo.default.createElement(Vi,{address:k,addressType:m,title:F("extension_send_mid_text_from"),walletId:C,onCopyCallback:()=>{x({trade:"send",network:N?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&vo.default.createElement(Cu,{coinBalance:f,coinId:P.coinId})),vo.default.createElement(Vi,{tags:T?.name?[T?.name]:null,address:I,title:F("extension_send_mid_text_to"),onCopyCallback:()=>{x({trade:"send",all_confirmation:"to_address",network:N?.chainName})}})),W))}var Q=PT;s();i();var Qi=u(E());yo();He();lo();var vd=()=>{let{coin:o}=S(),t=_(),e=uo(),n=(0,Qi.useSelector)(ao),r=(0,Qi.useSelector)(xu),a=Co(),{gasUnitPrice:c,maxGasAmount:m}=r,d=at(),g=ko({fromAddr:t,walletId:a,localType:Mi}),l=kt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,networkFee:Wo(c,m),localType:Mi});return fo(async()=>await d({coinId:o.coinId,address:t,fromAddr:t,toAddr:n}),async(x={})=>{let{sequenceNumber:b,chainId:y,expirationTimestampSecs:k,tyArg:v}=x,N={sequenceNumber:b,chainId:y,maxGasAmount:m,gasUnitPrice:c,expirationTimestampSecs:k},P={recipientAddress:n,amount:e},w={base:{...N}};o.baseCoinId===0&&(w.type=Pr.TRANSFER,w.data={...P}),o?.baseCoinId!==0&&o?.protocolType===Rn.APTOS_FUNGIBLE_TOKEN&&(w.type=Pr.FUNGIBLE_ASSET_TRANSFER,w.data={...P,fungibleAssetMetadataAddress:o?.address}),o?.baseCoinId!==0&&o?.protocolType===Rn.APTOS_TOKEN&&(w.type=Pr.TOKEN_TRANSFER_V2,w.data={...P,tyArg:v});let O=await g({params:w});return{signInfo:x,signedTx:O}},async({signInfo:x,signedTx:b})=>{let{sequenceNumber:y}=x,k={nonce:y},v={extJson:JSON.stringify(k)};return await l(b,v)},x=>(io({tx_id:x}),x))};function kT(){let o=vd(),t=async()=>{await o()};return eo(),Ld.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}var Dd=kT;var wT={match:o=>_c(o),pages:{AddressPage:gd,AmountPage:xd,ConfirmPage:Dd}},Md=wT;s();i();yo();s();i();var Ud=u(h()),Fs=u(Po());s();i();function Ot(){return it().get("type")||Mt.SEND}s();i();function NT(){let o=Lt(),t=Lm();return[o,t]}var Od=NT;s();i();var Xn=u(h()),Rd=u(Po());yo();Io();var BT=()=>{let{coinId:o}=(0,Rd.useParams)(),e=Ko(o)?.protocolId,n=Object.values(U),r=Mc(),a=r.filter(({keyringIdentityType:f})=>wc(f)),c=r.filter(({keyringIdentityType:f})=>f===uc.MPC),m=(f,A)=>!f.some(({walletIdentities:I})=>I.some(({addressType:T={}})=>{let C=T[gr];return C?C.some(({address:x})=>A.address===x):!1})),d=(0,Xn.useCallback)(f=>n.includes(e)?m(a,f):!0,[a,e,n]),g=(0,Xn.useCallback)(f=>[U.BRC_20,U.FRACTAL_BRC20].includes(e)?!0:n.includes(e)?m(c,f):!0,[c,e,n]),l=(0,Xn.useCallback)((f=[])=>f.filter(A=>d(A)&&g(A)),[d,g]);return(0,Xn.useCallback)(f=>f.map(A=>({...A,list:l(A?.list)})).filter(A=>A?.list?.length),[l])},xn=BT;function vT(){let{coinId:o}=(0,Fs.useParams)(),t=_(),e=(0,Fs.useHistory)(),n=Ot(),r=Od(),a=xn();return Ud.default.createElement(j,{addressProps:{errorFns:{fns:r,override:!0},extraProps:{filterAddress:a}},confirmButtonProps:{onClick:()=>{e.push(`${qo}/${o}${$e}?type=${n}&from=${t}`)}}})}var Wd=vT;s();i();var If=u(h());s();i();var Xo=u(h()),Ps=u(E()),pf=u(Po()),gf=u(Ft());J();lo();s();i();var ro=u(h()),Le=u(Ft());J();s();i();var lt={container:"_container_c35iq_1",link:"_link_c35iq_6","pending-assets":"_pending-assets_c35iq_11",pendingAssets:"_pending-assets_c35iq_11",amount:"_amount_c35iq_14"};var LT=({lockedAmount:o,lockedAmountDisplay:t,catTotalAmount:e,pendingXrc:n,pendingXrcDisplay:r,availableWithoutSpending:a,availableWithoutSpendingDisplay:c,availableReceiving:m,availableReceivingDisplay:d,goToInscribe:g,addressType:l,coinId:f})=>{let{handleClick:A}=$u(l,f);return ro.default.createElement(ro.default.Fragment,null,ro.default.createElement(H.Box,{className:(0,Le.default)(lt.container)},Number(o)>0&&ro.default.createElement(H.FlexBox,{justify:"space-between"},ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_in_use"))),ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{className:lt.amount},t),ro.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,Le.default)(lt.link),onClick:A},F("extension_wallet_btc_btn_unlock_use")))),Number(n)>0&&ro.default.createElement(H.FlexBox,{justify:"space-between",className:(0,Le.default)(lt.pendingAssets)},ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_select_receiving"))),ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{className:lt.amount},r))),Number(a)>0&&ro.default.createElement(H.FlexBox,{justify:"space-between"},ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{className:lt.amount},F("extension_wallet_btc_to_be_inscribed"))),ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},c),ro.default.createElement(Y.Text,{size:Y.SIZE.xs,className:(0,Le.default)(lt.link),onClick:g},F("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&ro.default.createElement(H.FlexBox,{justify:"space-between",className:(0,Le.default)(lt.pendingAssets)},ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("extension_wallet_btc_select_receiving"))),ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{className:lt.amount},d))),Number(e)>0&&ro.default.createElement(H.FlexBox,{justify:"space-between",className:(0,Le.default)(lt.pendingAssets)},ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{type:Y.TYPE.secondary,size:Y.SIZE.xs},F("wallet_extension_cat_desc_total_amount"))),ro.default.createElement(H.Box,null,ro.default.createElement(Y.Text,{className:lt.amount},e)))))},hn=LT;s();i();function DT(){let o=_(),{coin:t}=S();return Xu(t,o)}var le=DT;s();i();var Ao=u(h()),qd=u(E()),Kd=u(Ft());J();s();i();var St=u(h()),oa=u(Ft());J();s();i();var MT="md",OT="lg",Gd=o=>{let{className:t,size:e,disabled:n,checked:r,coinImage:a,coinAmountText:c,inscriptionId:m,onChange:d}=o,g=`inscription-select-container-${e}`,l=n?"inscription-select-disabled":null;return St.default.createElement("div",{className:(0,oa.default)("inscription-select-container",g),onClick:d},n?St.default.createElement("div",{className:"inscription-select-confirm"},F("extension_wallet_send_tag_confirming")):null,St.default.createElement("div",{className:(0,oa.default)("inscription-select",l,t)},n?null:St.default.createElement("div",{className:"inscription-select-radio-container"},St.default.createElement(sc.Circle,{checked:r})),St.default.createElement("div",{className:"inscription-select-coin"},St.default.createElement(hr,{className:"inscription-select-coin-image",src:a,errorImg:_r,width:14,height:14}),St.default.createElement(Gi,{text:c,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),St.default.createElement("div",{className:"inscription-select-id"},St.default.createElement(Gi,{text:m,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Gd.size={md:MT,lg:OT};var _n=Gd;s();i();var Eo=u(h()),Hd=u(K());J();s();i();var pe={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function RT(){let{coin:o}=S(),t=le();return Eo.default.createElement("div",{className:pe.header},Eo.default.createElement("div",{className:pe.amount},Eo.default.createElement(hr,{className:pe.logo,src:o.image,errorImg:_r,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function UT({loading:o,list:t,visible:e,onClose:n,value:r,onSelected:a,request:c}){let{coin:m}=S(),[d,g]=(0,Eo.useState)({}),{run:l}=(0,Hd.useThrottleFn)(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&c&&c()},{wait:300});return(0,Eo.useEffect)(()=>{e&&g(r)},[e]),Eo.default.createElement(et,{isFull:!0,topContent:Eo.default.createElement(RT,{list:t,value:d,onMax:f=>{g(t.reduce((A,I)=>({...A,[I.inscriptionId]:!f}),{}))}}),footer:Eo.default.createElement(Zt.ConfirmButton,{onClick:()=>{a(d)}},F("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:n,renderContent:()=>Eo.default.createElement("div",{className:pe.scrollContent,onScroll:l},Eo.default.createElement("div",{className:pe.content},t.map((f,A)=>Eo.default.createElement("div",{className:pe.cell},Eo.default.createElement(_n,{key:A,size:_n.size.lg,coinImage:m.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{g(I=>({...I,[f.inscriptionId]:!I[f.inscriptionId]}))}})))),o&&Eo.default.createElement("div",{className:pe.loading},Eo.default.createElement(qe.Circle,{size:qe.SIZE.sm})))})}var Vd=UT;s();i();var yn={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function WT({loading:o,list:t,request:e,onSelected:n},r){let{coin:a}=S(),[c,m]=(0,Ao.useState)(!1),d=(0,qd.useSelector)(ut),[g,l]=(0,Ao.useState)(d.reduce((I,T)=>({...I,[T.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,Ao.useMemo)(()=>{let I=t.filter(C=>!!g[C.inscriptionId]),T=t.filter(C=>!g[C.inscriptionId]);return{selected:I,unselected:T,showed:t.map(C=>I.includes(C)?{...C,checked:!0}:C)}},[t,g]);return(0,Ao.useEffect)(()=>{n(f)},[f]),(0,Ao.useImperativeHandle)(r,()=>({onMax:()=>{l(t.reduce((I,T)=>({...I,[T.inscriptionId]:!0}),{}))}})),Ao.default.createElement(Ao.default.Fragment,null,Ao.default.createElement("div",{className:yn.root},Ao.default.createElement("div",{className:yn.title,onClick:()=>{m(!0)}},F("extension_wallet_send_text_select_transferable"),Ao.default.createElement(Ve,{className:(0,Kd.default)(yn.arrow,"okds-arrow-chevron-right-centered-md")})),Ao.default.createElement("div",{className:yn.content},A.map((I,T)=>Ao.default.createElement("div",{className:yn.cell},Ao.default.createElement(_n,{key:T,coinImage:a.image,size:_n.size.md,coinAmountText:`${I.tokenAmount} ${I.tick}`,inscriptionId:I.inscriptionId,checked:I.checked,onChange:C=>{C.stopPropagation(),l(x=>({...x,[I.inscriptionId]:!x[I.inscriptionId]}))}}))))),Ao.default.createElement(Vd,{visible:c,value:g,loading:o,list:t,request:e,onSelected:I=>{l(I),m(!1)},onClose:()=>{m(!1)}}))}var Jd=(0,Ao.forwardRef)(WT);s();i();var ge=u(h()),Yd=u(E());J();function GT(o){let{coin:t}=S();return(0,ge.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function zd(){let o=Nt();return t=>{let e="";return t.key&&(e=F(t?.key,t?.args)),t?.type===no.FEE_BALANCE_INSUFFICIENT?ge.default.createElement(ge.default.Fragment,null,e," ",ge.default.createElement(ue,{coin:o})):t?.type==="inscribe"?ge.default.createElement(ge.default.Fragment,null,e):e}}function HT(o,t){let e=(0,Yd.useDispatch)(),n=Mm(),r=GT(t),a=[n,r],{runErrorFns:c}=rn(a);Yr(c,m=>{e(_m(m))},o)}var Zd=HT;s();i();var $d=u(Po());var Xd=u(E());function VT(){let o=(0,Xd.useDispatch)(),t=(0,$d.useHistory)(),{coin:e}=S(),n=_();return()=>{o(Cs()),o(Hr()),t.push(`${qo}/${e.coinId}${wr}?type=${Mt.INSCRIBE}&from=${n}`)}}var jd=VT;s();i();var tf=u(h()),ef=u(E());s();i();var jn=u(h()),Qd=u(E());lo();function ta(){let{baseCoin:o}=S(),t=_(),[,e]=Ne({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function qT(o,t){let r=(()=>255)(),a=o||t?.normal||"0",[c,m]=(0,jn.useState)("0");return(0,jn.useEffect)(()=>{if(r&&a){let d=Wo(r,a);m(d)}},[r,a]),{fee:c,satBytes:a,bytes:r}}function KT(o){let t=(0,Qd.useDispatch)(),e=ta(),n=qT(o,e);return(0,jn.useEffect)(()=>{t(It({name:"signInfo",value:e}))},[e]),{...n,signInfo:e}}var of=KT;function JT(){let o=(0,ef.useDispatch)(),{fee:t}=of();(0,tf.useEffect)(()=>{o(z(t))},[t])}var nf=JT;s();i();var cf=u(h()),mf=u(E());s();i();var bs=u(h()),sf=u(E());s();i();var rf=u(E());function YT(){let{selectedSat:o,signInfo:t}=(0,rf.useSelector)(cs),e;return o.type===Vo.CUSTOM?e=o.satBytes:e=t?.[pc[o.type]],e||0}var Rt=YT;function zT({coinId:o}){let[t,e]=(0,bs.useState)(!0),n=(0,sf.useDispatch)(),r=_(),a=Ss({coinId:o}),c=Rt();return(0,bs.useEffect)(()=>{(async()=>{let d;try{d=(await a({from:r,coinAmount:0,serviceCharge:0,feeRate:c})).canTransferAmount||"0"}catch{d="0"}e(!1),n(ne(d))})()},[r,c]),t}var af=zT;function ZT({coinId:o}={}){let t=(0,mf.useDispatch)(),e=le(),n=af({coinId:o});return(0,cf.useEffect)(()=>{t(Mo(e?.transferableWithoutSpending))},[e?.transferableWithoutSpending]),n}var uf=ZT;s();i();var Fn=u(h()),df=u(E()),ff=u(K());Do();yo();Pe();Ee();lo();function $T(){let{coin:o,baseCoin:t}=S(),e=_(),n=(0,df.useSelector)(bt),[r,a]=(0,Fn.useState)({from:1,size:10});return async()=>{let c=await so().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),m={utxoType:$o.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:Fr(o.chainId)},d={coinId:t.coinId,utxoRequests:[{...m,...r}]},{data:g}=await rt(Ho.getBTCUTXO,d,{headers:c}),l=(g?.[0]?.utxoList||[]).map(A=>({...A,tokenAmountInt:A.tokenAmount,tokenAmount:_o(A.tokenAmount,10**o.decimals)})),f=l.length===r.size;return f&&a(A=>({...A,from:A.from+1})),{list:l,more:f}}}function XT(){let o=(0,Fn.useRef)(!0),[t,e]=(0,Fn.useState)(!0),[n,r]=(0,Fn.useState)([]),a=$T(),c=async()=>{if(!!o.current){e(!0);try{let{more:m,list:d}=await a();r(g=>[...g,...d]),o.current=m}finally{e(!1)}}};return(0,ff.useMount)(()=>{c()}),{list:n,loading:t,request:c}}var lf=XT;s();i();var Es={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function jT(){let o=(0,pf.useHistory)(),t=(0,Ps.useDispatch)(),{coin:e,baseCoin:n}=S(),r=(0,Ps.useSelector)(ut),a=jd(),c=zd(),m=Ot(),d=_(),g=(0,Xo.useMemo)(()=>r.reduce((N,{tokenAmount:P})=>mo(N,P),0),[r]),{loading:l,list:f,request:A}=lf(),I=uf({coinId:n.coinId}),T=f.length>0,C=l||I;nf(),Zd(C,f);let{availableWithoutSpending:x,availableWithoutSpendingDisplay:b,availableReceiving:y,availableReceivingDisplay:k}=le();if(f.length===0&&C)return Xo.default.createElement("div",{className:Es.loading},Xo.default.createElement(qe.Circle,{size:qe.SIZE.xl}));let v=Xo.default.createElement(vc.FooterActions,{usePortal:!0,className:(0,gf.default)(Es.inscribeFooter)},Xo.default.createElement(go,{block:!0,type:go.TYPE.highlight,size:go.SIZE.lg,onClick:a},F("extension_wallet_btc_btn_inscribe")),Xo.default.createElement(go,{block:!0,type:go.TYPE.highlight,size:go.SIZE.lg,disabled:!0},F("wallet_extension_send_btn_continue")));return Xo.default.createElement(X,{checkEmpty:!1,inputAmount:g,renderError:c,classes:{content:T?Es.content:""},slot:{bottom:T?Xo.default.createElement(Jd,{loading:C,list:f,request:A,onSelected:N=>{t(It({name:"brc20UtxoList",value:N}))}}):null,footer:f.length===0&&Number(x)>0?v:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:r.length===0,onClick:()=>{o.push(`${qo}/${e.coinId}${Ze}?type=${m}&from=${d}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:F("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:Xo.default.createElement(Xo.default.Fragment,null,(Number(x)>0||Number(y)>0)&&Xo.default.createElement(hn,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:x,availableWithoutSpendingDisplay:b,availableReceiving:y,availableReceivingDisplay:k,goToInscribe:a}))}}})}var Af=jT;s();i();var Cf=u(h()),ks=u(Po());function QT(){let{coinId:o}=(0,ks.useParams)(),t=(0,ks.useHistory)(),e=Ot(),n=_();return Cf.default.createElement(od,{onConfirm:()=>{t.push(`${qo}/${o}${$e}?type=${e}&from=${n}`)}})}var Tf=QT;var oI={[Mt.SEND]:Af,[Mt.INSCRIBE]:Tf};function tI(){let o=Ot(),t=oI[o];return t?If.default.createElement(t,null):null}var Sf=tI;s();i();var Wf=u(h());s();i();var Lo=u(h()),Me=u(E()),Mf=u(Po());J();s();i();var Qn=u(h());s();i();var Ut=u(h()),xf=u(Ft());J();s();i();var De={"retina-border-basic":"_retina-border-basic_15g95_1",retinaBorderBasic:"_retina-border-basic_15g95_1",utxoTextWrap:"_utxoTextWrap_15g95_29",utxoText:"_utxoText_15g95_29",utxoTextSymbol:"_utxoTextSymbol_15g95_72",utxoTextAmount:"_utxoTextAmount_15g95_75",badge:"_badge_15g95_79"};var eI=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:n,symbol:r}=o;return Ut.default.createElement(H.FlexBox,{justify:"space-between",align:H.ALIGN.center,className:De.utxoTextWrap},Ut.default.createElement(H.FlexBox,{align:H.ALIGN.center},Ut.default.createElement(Y.Text,{className:De.utxoText,ellipsis:{tooltip:!0}},t),e&&Ut.default.createElement(xr,{className:De.badge,color:xr.COLOR.green,type:xr.TYPE.rect},F("extension_wallet_transaction_label_signature"))),Ut.default.createElement(H.FlexBox,{align:H.ALIGN.center,className:(0,xf.default)(De.utxoText,De.utxoTextAmount)},Ut.default.createElement(Y.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},n),Ut.default.createElement(Y.Text,{inherit:!0,strong:!0,className:De.utxoTextSymbol},r)))},hf=(0,Ut.memo)(eI);s();i();var _f={"retina-border-basic":"_retina-border-basic_7g9ny_1",retinaBorderBasic:"_retina-border-basic_7g9ny_1",utxosBlock:"_utxosBlock_7g9ny_29",utxoBorder:"_utxoBorder_7g9ny_34"};var nI=({utxos:o})=>Qn.default.createElement(H.Box,{className:_f.utxosBlock},o.map((t={},e)=>{let{address:n,coinAmount:r,isNeedToSign:a,symbol:c}=t;return Qn.default.createElement(hf,{key:e,address:n,coinAmount:r,isNeedToSign:a,symbol:c})})),ea=(0,Qn.memo)(nI);lo();s();i();var or=u(E());zo();s();i();lo();Do();Ee();Pe();yo();var ws=async({walletId:o,signedTx:t,coinId:e,coinAmount:n,fromAdr:r,toAdr:a,serviceCharge:c,txHash:m,walletType:d,txType:g,extJson:l})=>{let f=Ho.postTx,A=await so().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),I={};e==1&&(I.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:T}=await rt(f,{signedTx:t,coinId:e,coinAmount:n,fromAdr:r,toAdr:a,serviceCharge:c,txSource:nt.NORMAL,txHash:m,accountId:o,walletType:d,...I,extJson:l,txType:g},{headers:A});return T};var yf=(o,t)=>!o||!o.length?"0":o.reduce((n,r)=>{let c=(r.nftLocaltionVOs||[]).reduce((m,d)=>d.nftId===t?mo(m,d.value):m,"0");return mo(n,c)},"0"),na=({address:o,amount:t="0",satAmount:e="0",tokenType:n="FT",atomicalId:r},a=546)=>(e=ot(e,0)?e:t,{address:o,amount:Mn(e,a)?a:Number(e),data:[{atomicalId:r,type:n,amount:Number(t)}]}),Ff=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Go(n,t)}),bf=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let n=e?.data?.[0]?.amount;return n===void 0?!1:Go(n,t)});yo();s();i();var Ef=u(h()),ra=u(E());Io();function rI(o){let t=(0,ra.useSelector)(bt),e=_(),n=(0,ra.useSelector)(ut),r=Rt(),a=B(),c=Lr(t);return(0,Ef.useCallback)(async m=>{if(!m.length)return null;let d={address:e,feePerB:r,inputs:[...n.map(({txHash:l,vout:f,coinAmount:A})=>({vOut:f,txId:l,amount:A})),...m.map(({txHash:l,vout:f,coinAmount:A})=>({vOut:f,txId:l,amount:A}))],outputs:[...n.map(({coinAmount:l})=>({amount:l,address:a}))]};return await Bc(d,e,gr,t,{fake:o===Xr.CAL_FEE&&c})},[n,r])}var Pf=rI;function sI(){let o=(0,or.useDispatch)(),{coin:t,baseCoin:e}=S(),n=(0,or.useSelector)(ut),r=_(),a=B(),c=$(),m=q(),d=(0,or.useSelector)(bt),g=Uc(d),l=wo(),A=nc(t)?Fo.BRC20_SEND:Fo.BRC30_SEND,I=Pf(Xr.CONFIRM),T=Ss({coinId:e?.coinId}),C=Rt(),x=un({address:r,coinId:t.coinId,currencyId:l,txType:A,protocolId:Fr(t.chainId)}),b=dm(d),y=async v=>{try{await b();let N=await I(v.utxoList||[]),P=await So(t.localType,N),w=g?.serverWalletType,O={txSource:nt.NORMAL,toAdr:a,coinId:t.coinId,txHash:P,signedTx:N,walletId:d,serviceCharge:c,fromAdr:r,coinAmount:m,walletType:w,txType:A,extJson:JSON.stringify({nftIds:n.reduce((D,V)=>[...D,...(V.nftLocaltionVOs||[]).map(({nftId:W})=>W)],[])})},L=await ws(O);io({tx_id:L})}catch(N){N?.error_message&&oe.error(N?.error_message)}};return async()=>{let v=await T({from:r,coinAmount:0,serviceCharge:c,feeRate:C}),N=v.utxoList||[];return o(It({name:"feeUtxoList",value:N||[]})),await x([...n||[],...N||[]],Ba),await y(v)}}var kf=sI;s();i();var wf=u(E());function iI(){let o=(0,wf.useDispatch)(),e=[Rm()],{runErrorFns:n}=rn(e);Yr(n,r=>{o(Fm(r))})}var Nf=iI;s();i();var Bf=u(h()),tr=u(E());function vf(){let o=(0,tr.useDispatch)(),t=ta();(0,Bf.useEffect)(()=>{o(It({name:"signInfo",value:t}))},[t])}function Lf(){let o=Oo(),t=(0,tr.useDispatch)(),e=_(),n=B(),r=Co(),a=Rt(),c=(0,tr.useSelector)(ut),[m,d,g]=Qr({coinId:o,toAddr:n,walletId:r,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:c},{onSuccess:(l,f)=>{t(z(l)),t(It({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:m,fee:d,feeError:g}}s();i();var Df={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function aI(){let o=Vr(),t=_(),e=B(),n=$(),r=(0,Me.useSelector)(ut),a=(0,Me.useSelector)(ku),{baseCoin:c}=S(),m=(l,f)=>l.map(({coinAmount:A})=>{let I=_o(A,10**c.decimals);return{address:Oi(f),coinAmount:o(I,c,{useApproximate:!1}),symbol:c.symbol}}),d=(0,Lo.useMemo)(()=>m([...r,...a],t),[r,a]),g=(0,Lo.useMemo)(()=>{let l=m(r,e),f=a.reduce((A,{coinAmount:I})=>mo(A,I),"0");if(ot(f,n)){let A=_o(qt(f,n),10**c.decimals);l.push({address:Oi(t),coinAmount:o(A,c,{useApproximate:!1}),symbol:c.symbol})}return l},[r,a,n]);return Lo.default.createElement(Tt,{space:32},Lo.default.createElement(Vn,{title:F("extension_wallet_transaction_text_input")},Lo.default.createElement(ea,{utxos:d})),Lo.default.createElement(Vn,{title:F("extension_wallet_transaction_text_output")},Lo.default.createElement(ea,{utxos:g})))}function cI(){let o=(0,Me.useDispatch)(),[t,e]=(0,Lo.useState)(!1),{coinId:n}=(0,Mf.useParams)(),r=wo(),a=(0,Me.useSelector)(wu),c=kf(),{signInfo:m}=(0,Me.useSelector)(cs),d=nn(),g=Rt(),{feeLoading:l,fee:f,feeError:A}=Lf(),I=_o(f,g),T=x=>{o(It({name:"selectedSat",value:x}))};vf(),Nf();let C=m?.transferReminder;return Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement(Q,{classes:{network:Df.network},slot:{bottom:Lo.default.createElement(aI,null)},defaultMessage:C,networkFeeProps:{loading:l,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:c},canTransferAmount:d}),Lo.default.createElement(Qu,{currencyId:r,bytes:I,value:a,coinId:n,signInfo:m,onChange:T,visible:t,onClose:()=>{e(!1)}}))}var Of=cI;s();i();var Ns=u(h()),Rf=u(Po());lo();function mI(){let o=(0,Rf.useHistory)(),t=Bt();return(0,Ns.useEffect)(()=>{Ir(t,"0")&&o.go(-1)},[t]),Ns.default.createElement(td,{onConfirm:()=>{o.replace(Ac)}})}var Uf=mI;var uI={[Mt.SEND]:Of,[Mt.INSCRIBE]:Uf};function dI(){let o=Ot(),t=uI[o];return t?Wf.default.createElement(t,null):null}var Gf=dI;s();i();var Hf=u(h());function fI({children:o}){let e=it().get("from");return Hf.default.createElement(Bo,{fromAddress:e},o)}var Vf=fI;var lI={match:(o,t,e)=>tt({coinId:o})&&[U.BRC_20,U.FRACTAL_BRC20].includes(e),Container:Vf,pages:{AddressPage:Sf,AmountPage:Wd,ConfirmPage:Gf}},qf=lI;s();i();s();i();var Kf=u(h());s();i();var pI=()=>{let{initialType:o}=Rc();return async t=>{let{isValid:e}=await zr(t);return e&&kc(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},gI=()=>[pI()],Bs=gI;var AI=()=>{let o=Bs(),t=xn();return Kf.default.createElement(j,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},Jf=AI;s();i();var Ce=u(h());J();yo();s();i();var Jo=u(h()),Ae=u(E());zo();J();yo();s();i();var TI=()=>{let o=(0,Ae.useDispatch)(),t=(0,Ae.useSelector)(pn),e=(0,Jo.useCallback)(n=>{o(ds({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},II=({fromAddr:o,toAddr:t,protocolId:e,minOutput:n,sendAmountInt:r,transferInputs:a})=>{let c=(0,Ae.useDispatch)();return(0,Jo.useMemo)(()=>{if(U.ARC_20!==e)return null;if(!a||a.length===0||M.eq(r,0))return c(qi([])),null;let m=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,g=na({address:t,amount:r,tokenType:m,atomicalId:d},n),l=yf(a,d),f=M.sub(l,r),A=na({address:o,amount:f,tokenType:m,atomicalId:d},n),I=[];return M.lte(f,0)?I.push(g):M.lt(f,n)?I.push(g,A):M.gte(f,n)&&I.push(A,g),c(qi(I)),I},[e,a,r,t,n,o,c])},SI=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:n,minOutput:r,isXrc20Token:a,protocolId:c,sendAmountInt:m})=>{let d=II({fromAddr:o,minOutput:r,protocolId:c,sendAmountInt:m,toAddr:t,transferInputs:n});return(0,Jo.useMemo)(()=>!a||U.SRC_20===c||!n?.length?null:U.ARC_20===c&&d?d:U.RUNES===c?[{address:t,amount:r,data:{id:e,amount:m}}]:U.RUNEMAIN===c||U.FRACTAL_RUNES?[{address:t,amount:r,data:{id:e,amount:m}}]:[{address:t,amount:Number(m),...Ym(n[0],c)}],[e,a,r,c,m,t,n,d])},xI=({coin:o,coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:c,isXrc20Token:m})=>{let[,d]=jr({coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:c,utxoType:$o.BRC20_CONVERTIBLE},{ready:o&&m&&n!==U.SRC_20});return[null,d]},hI=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:n,inscriptionOutput:r})=>(0,Jo.useMemo)(()=>o===22?546:t?n===U.SRC_20?r||790:"0":e,[o,t,e,n,r]),_I=({coin:o,isXrc20Token:t,protocolId:e,satBytes:n,transferInputs:r})=>(0,Jo.useMemo)(()=>!o||!n?!1:!(e&&t&&e!==U.SRC_20&&!r?.length),[o,t,e,n,r?.length]),yI=({coin:o,protocolId:t})=>(0,Jo.useMemo)(()=>{if(o?.address&&[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(t))return La(o?.address?.split("-"))},[o?.address,t]),FI=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:n})=>(0,Jo.useMemo)(()=>{if(t&&e===U.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:n})}},[o?.name,t,e,n]),bI=({coinId:o,walletId:t,satBytes:e,address:n,isXrc20Token:r,coinBalance:a})=>{let c=(0,Ae.useDispatch)(),[m,d]=Hn({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:g=>{c(o!==22&&!r?Mo(g):Mo(a?.coinAmountInt)),c(ne(g))}});return[m,d]},EI=({coinId:o,walletId:t,protocolId:e,tick:n,address:r})=>{let a=(0,Ae.useDispatch)(),[c,m]=Hn({coinId:o,walletId:t,protocolId:e,tick:n,address:r,coinAmount:"0",utxoType:$o.BRC20_CONVERTIBLE},{ready:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(Mo(d))}});return[c,m]},PI=({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:r,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:l,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:I,availableSendCoinAmountInt:T,sendAmountInt:C},{ready:x,networkFeeInt:b})=>{let y=(0,Ae.useDispatch)(),[k,v,N]=Qr({coinId:o,toAddr:t,walletId:e,fromAddr:n,satBytes:r,inputs:a,outputs:c,networkFee:m,revealOutValue:d,coinAmount:g,utxoParams:l,inscriptionData:f,canTransferAmount:o===22||A?I:T,...o===22?{omni:{coinType:31,amount:C}}:{}},{ready:x,onSuccess:P=>{Math.abs(Number(M.sub(P,b)))!==parseInt(r,10)&&(y(z(P)),y(R(!1)))},onError:P=>{y(R(P))}});return[k,v,N]},kI=()=>{let o=Oo(),t=_(),e=B(),n=Co(),r=Ko(o),a=r?.protocolId,c=zm(a),m=r?.baseCoinId||o,d=we(t,n,r?.localType),g=Bt(),l=$(),f=q(),A=nn(),I=Zo(),T=Kr(),[,C]=Ne({protocolId:a,coinId:o,address:t,chainId:r?.chainId}),{inscriptionOutput:x,minOutput:b}=C||{},[y,k]=TI(),v=y?.satBytes;(0,Jo.useEffect)(()=>{if(!v&&C?.normal&&k({level:Vo.STANDARD,satBytes:C?.normal}),v&&y?.level!==Vo.CUSTOM){let Qt=C[qn[y?.level]?.satBytes];k({...y,satBytes:Qt})}},[C]);let N=Yt(o,void 0,{addressType:d}),P=hI({coinId:o,isXrc20Token:c,sendAmountInt:f,protocolId:a,inscriptionOutput:x}),w=yI({coin:r,protocolId:a}),[,O]=xI({coin:r,coinId:o,walletId:n,protocolId:a,tick:w,address:t,coinAmount:f,isXrc20Token:c}),L=SI({fromAddr:t,toAddr:e,coinTick:w,transferInputs:O,minOutput:b,isXrc20Token:c,protocolId:a,sendAmountInt:f}),D=(0,Jo.useMemo)(()=>{if(O?.length)return O.map(({txHash:Qt,vout:vn})=>`${Qt}-${vn}`)},[O]),V=_I({coin:r,isXrc20Token:c,protocolId:a,satBytes:v,transferInputs:O}),W=FI({coin:r,isXrc20Token:c,protocolId:a,sendAmount:g}),G=(0,Jo.useMemo)(()=>a===U.SRC_20?{protocolId:a,utxoType:$o.BRC20_CONVERTIBLE}:{utxoType:$o.TRANSFER,needFilteredUtxo:[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?D:void 0},[D,a]),[oo,Z]=bI({coinId:o,walletId:n,satBytes:v,address:t,isXrc20Token:c,coinBalance:N}),[To,Yo]=EI({coinId:o,walletId:n,protocolId:a,tick:w,address:t}),[Ht,,Vt]=PI({coinId:o,toAddr:e,walletId:n,fromAddr:t,satBytes:v,inputs:O,outputs:L,networkFee:l,revealOutValue:x,coinAmount:P,utxoParams:G,inscriptionData:W,isXrc20Token:c,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:T,sendAmountInt:f},{ready:V,networkFeeInt:l}),Fe=(0,Jo.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(a)?Z===void 0||Yo===void 0:Z===void 0,[Z,a,Yo]);return{coin:r,toAddr:e,coinId:o,walletId:n,signInfo:C,feeError:Vt,fromAddr:t,protocolId:a,baseCoinId:m,feeLoading:Ht,addressType:d,sendAmountInt:f,networkFeeInt:l,transferInputs:O,transferOutputs:L,isXrc20Token:c,utxoParams:G,initLoading:Fe,mergedCoinAmount:P,src20InscriptionData:W,sendCoinAvailableAmount:I,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:y,setSelectedNetworkFeeLevel:k,loading:oo||Ht||To}},vs=kI;s();i();var Xf=u(h());J();yo();s();i();var Zf=u(h());J();s();i();s();i();var Yf=u(E());var zf=()=>(0,Yf.useSelector)(pn).transferOutputs;var $f=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:n,coin:r})=>{let a=zf();return(0,Zf.useCallback)(c=>o?M.lte(t,e)&&c!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:r?.symbol},type:no.COMMON_ERROR}:bf(a,n)?{key:"wallet_extension_error_dust_limit_transaction",type:no.COMMON_ERROR}:Ff(a,n)?{key:"wallet_extension_error_dust_asset_continue",type:no.COMMON_TIP}:null:null,[o,t,e,n,r,a])};var jf=o=>{let t=Oo(),e=Ko(t),n=e?.baseCoinId===0,a=e?.protocolId===U.ARC_20,c=M.div(o,10**e?.decimals),m=Zo(),d=M.mul(c,2),g=$f({isArc20Token:a,sendCoinBalance:m,doubleMinOutput:d,minOutputFloat:c,minOutput:o,coin:e});return(0,Xf.useCallback)(l=>{if(!o)return null;let f=g(l);return f||(n&&M.lt(l,c)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${c} ${e?.symbol}`},type:no.COMMON_ERROR}:null)},[o,g,n,c,e?.symbol])},Qf=o=>{let t=jf(o);to([t])},ol=o=>{let t=jf(o);eo([t])};s();i();var jo=u(h());J();var wI=()=>{let o=Nt(),{coin:t}=S();return(0,jo.useCallback)(n=>{let r="";return n.key&&(r=F(n?.key,n?.args)),n?.type===no.BALANCE_INSUFFICIENT?jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(H.Box,{className:bo.wrap},r),jo.default.createElement(H.Box,{className:bo.wrap},jo.default.createElement(ue,{coin:t,receiveOnly:!0}))):n?.type===no.FEE_BALANCE_INSUFFICIENT?jo.default.createElement(jo.default.Fragment,null,jo.default.createElement(H.Box,{className:bo.wrap},r),jo.default.createElement(H.Box,{className:bo.wrap},jo.default.createElement(ue,{coin:o}))):r},[t,o])},tl=wI;s();i();var el={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function NI(){let{coin:o,coinId:t,signInfo:e,initLoading:n,addressType:r,fromAddr:a}=vs(),{receivedPendingBalance:c,receivedPendingBalanceDisplay:m}=le(),{lockedAmount:d}=ju(a,o),g=be(d,{decimals:o.decimals});Qf(e?.minOutput);let l=tl(),f=(0,Ce.useMemo)(()=>tt({coinId:t})?F("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===U.SRC_20?F("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===U.ARC_20?F("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===U.RUNEMAIN||o?.protocolId===U.FRACTAL_RUNES?F("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return Ce.default.createElement(X,{isGlobalLoading:n,renderError:l,totalAmountProps:{type:"amount",title:Ce.default.createElement(Ce.default.Fragment,null,F("extension_defi_text_available_balance"),!!f&&Ce.default.createElement(ze,{size:ze.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:el["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(c)>0?Ce.default.createElement(hn,{lockedAmount:d,lockedAmountDisplay:g,pendingXrc:c,pendingXrcDisplay:m,addressType:r,coinId:t}):void 0}}})}var nl=NI;s();i();var pt=u(h()),Ls=u(E()),rl=u(Po()),Ds=u(K()),sl=u(Dc());J();yo();mc();var BI=546;function vI(){let o=(0,rl.useHistory)(),t=(0,Ls.useDispatch)(),[e,{toggle:n}]=(0,Ds.useBoolean)(!1),{coin:r,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:l,utxoParams:f,protocolId:A,baseCoinId:I,feeLoading:T,addressType:C,isXrc20Token:x,networkFeeInt:b,sendAmountInt:y,transferInputs:k,transferOutputs:v,mergedCoinAmount:N,availableFeeCoinAmountInt:P,selectedNetworkFeeLevel:w,setSelectedNetworkFeeLevel:O,src20InscriptionData:L}=vs(),D=wo(),V=(0,Ls.useSelector)(Or),W=yr[r?.localType]?.[C],{showManageUTXO:G}=xs(r,W,!0);ol(l?.minOutput,a);let oo=Lr(d),[Z,To]=(0,pt.useState)(!1),Yo=(0,Ds.useMemoizedFn)(lr=>G&&[fn.BALANCE_INSUFFICIENT,fn.FEE_BALANCE_INSUFFICIENT].includes(lr)?[{onClick:async()=>{await t(en(!1));let yt=sl.default.stringify({addressType:C,coinId:I},{skipEmptyString:!0,skipNull:!0}),Ln=yt?`?${yt}`:"";o.push(Nr+Ln)},btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:[]),Ht=Gn({coinId:a,walletId:d,address:g,utxoType:$o.TRANSFER,satBytes:w?.satBytes,...f}),Vt=Xm({coinId:a,toAddr:c,walletId:d,fromAddr:g,protocolId:A,networkFee:b,localType:r?.localType,outputs:v,inscriptionData:L,dustSize:x?void 0:l?.minOutput,satBytes:w?.satBytes,coinAmount:a===22?BI:y,...a===22?{omni:{coinType:31,amount:y}}:{},extraPublishParams:{coinAmount:y,txType:x?Fo.BRC20_SEND:Fo.TRANS_OUT}}),Fe=un({coinId:a,currencyId:D,txType:x?Fo.BRC20_SEND:Fo.TRANS_OUT,protocolId:A,address:g}),Qt=(0,pt.useCallback)(async()=>{if(await mn()){let yt=[];yt=await Ht(N,b),yt=[...k||[],...yt],await Fe(yt,()=>{o.goBack()}),To(!0);let Ln=await Vt({utxoList:yt});return io({tx_id:Ln}),Ln}return To(!1),Promise.reject()},[Ht,N,b,k,Fe,Vt,o,V]),vn=(0,pt.useMemo)(()=>[U.RUNES,U.ARC_20,U.RUNEMAIN,U.FRACTAL_RUNES].includes(A)&&!k?.length?!0:m,[m,A,k?.length]);return pt.default.createElement(pt.default.Fragment,null,pt.default.createElement(Q,{addressType:C,confirmButtonProps:{disabled:vn,onSubmit:Qt},networkFeeProps:{onClick:n,loading:T,feeLevel:w?.level},renderTipActions:Yo,defaultMessage:tt({coinId:I})&&l?.transferReminder,canTransferAmount:tt({coinId:I})&&P}),pt.default.createElement(es,{visible:e,coinId:I,signInfo:l,currencyId:D,estimatedFee:b,value:w,onChange:O,onToggleVisible:n}),pt.default.createElement(Tu,{visible:oo&&Z}))}var il=vI;s();i();var al=u(h());function LI({children:o}){let e=it().get("from");return al.default.createElement(Bo,{fromAddress:e},o)}var cl=LI;var DI={match:o=>xc(o),Container:cl,pages:{AddressPage:Jf,AmountPage:nl,ConfirmPage:il}},ml=DI;s();i();yo();s();i();var fl=u(h()),ll=u(E()),Ms=u(Po());J();s();i();var ul=u(h());var MI=()=>{let o=xn(),t=e=>e.filter(r=>/^(bc1p)/.test(r.address));return(0,ul.useCallback)(e=>o(e).map(a=>({...a,list:t(a?.list)})).filter(a=>a?.list?.length),[o])},dl=MI;var OI=()=>{let{coinId:o}=(0,Ms.useParams)(),t=_(),e=(0,Ms.useHistory)(),n=dl(),r=(0,ll.useSelector)(ao),a=Bs();return fl.default.createElement(j,{addressProps:{errorFns:a,extraProps:{filterAddress:n}},confirmButtonProps:{onClick:async()=>{let{isValid:m}=await zr(r);if(m)e.push(`${qo}/${o}${Ze}?from=${t}`);else{let d=et.warn({alignBottom:!1,title:F("wallet_extension_cat_dialog_title_risk_non_taproot"),text:F("wallet_extension_cat_dialog_subtitle_risk_non_taproot",{contractType:F("wallet_extension_cat_icu_taproot")}),confirmText:F("wallet_extension_cat_dialog_btn_cancal_transaction"),onConfirm:()=>{d.destroy()}})}}}})},pl=OI;s();i();var xt=u(h()),Pl=u(E()),ia=u(Ft());J();s();i();var gl=u(h());J();var RI=o=>{let t=Oo(),e=Ko(t),n=Bt();return(0,gl.useCallback)(()=>M.gt(n,o)?{key:"wallet_extension_cat_max_send_utxo",args:{num:o,token:e?.symbol},type:no.COMMON_ERROR}:null,[e?.symbol,o,n])},Al=o=>{let t=RI(o);to([t])},Cl=()=>{eo()};s();i();var Qo=u(h()),Te=u(E()),sa=u(K());J();Do();yo();Pe();Ee();var Tl=()=>{let o=(0,Te.useDispatch)(),t=(0,Te.useSelector)(pn),e=(0,Qo.useCallback)(n=>{o(ds({selectedNetworkFeeLevel:n}))},[]);return[t?.selectedNetworkFeeLevel,e]},Il=({coin:o,coinId:t,walletId:e,protocolId:n,tick:r,address:a})=>{let[,c]=jr({coinId:t,walletId:e,protocolId:n,tick:r,address:a,coinAmount:"0",utxoType:$o.BRC20_CONVERTIBLE},{ready:o?.coinId});return[null,c]},Sl=({coin:o})=>(0,Qo.useMemo)(()=>{if(!o?.address)return;let t=o.address.indexOf("_"),e=o.address.indexOf("_",t+1);return o.address.slice(e+1)},[o?.address]),xl=({coinId:o,walletId:t,satBytes:e,address:n,coinBalance:r})=>{let a=(0,Te.useDispatch)(),[c,m]=Hn({coinId:o,walletId:t,satBytes:e,address:n},{onSuccess:d=>{a(Mo(r?.coinAmountInt)),a(ne(d))}});return[c,m]},hl=({UTXOList:o,coin:t})=>{if(!o||o.length===0)return"0";let e=o.slice(0,4).reduce((n,r)=>{let a=r?.tokenAmount;return M.add(n,a)},"0");return M.div(e,10**t?.decimals)},UI=({sendAmountInt:o,UTXOList:t})=>(0,Qo.useMemo)(()=>{if(!t||!Number(o))return[];let e=[],n="0";for(let r=0;r<t.length;r++){let a=t[r],c=a?.tokenAmount;if(n=M.add(n,c),e.push(a),M.gte(n,o))break}return e},[t,o]),WI=({selectedUtxo:o,signInfo:t,chainIndex:e,walletId:n})=>{let r=t?.extInfo?.tokenAddr,a=t?.extInfo?.minterAddr,c=(0,Te.useDispatch)(),{error:m,loading:d,data:g}=(0,sa.useRequest)(async()=>{if(!o||o.length===0)return[];if(!r||!a)return[];let l=o.map(T=>({txHash:T.txHash,tokenAddress:r,minterAddress:a,chainIndex:e})),f=await so().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),I=(await rt(Ho.getCat20GrandFatherRawTx,{rawTxRequestList:l},{headers:f}))?.data;if(I&&!I.find(T=>T.txStatus!==0))return I;throw c(R(!0)),ac.error({title:F("wallet_extension_cat_toast_error_service")}),new Error},{debounceWait:500,refreshDeps:[o]});return[m,d,g]},GI=({signInfo:o,selectedUtxo:t,grandFatherRawTxs:e,address:n})=>(0,Qo.useMemo)(()=>{if(!o||!e||!e.length)return null;let r=o?.extInfo,a={minterAddr:r?.minterAddr,tokenAddr:r?.tokenAddr,info:{max:r?.max,name:r?.name,limit:r?.limit,symbol:r?.symbol,premine:"0",decimals:r?.decimals,minterMd5:r?.minterMd5},tokenId:r?.tokenId,revealTxid:r?.revealTxid,revealHeight:r?.revealHeight,genesisTxid:r?.genesisTxid,name:r?.name,symbol:r?.symbol,decimals:r?.decimals,minterPubKey:r?.minterPubKey,tokenPubKey:r?.tokenPubKey},c=t.map(d=>({utxo:{txId:d.txHash,outputIndex:d.vout,script:r?.script,satoshis:String(d.coinAmount)},txoStateHashes:d.stateHashArray,state:{address:n,amount:d.tokenAmount}})),m=e.map(d=>({prevTx:d?.rawTx,prevPrevTx:d?.parentRawTx}));return{tokenMetadata:a,tokens:c,tokenPrevTxs:m}},[o,e,t,n]),HI=({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:r,protocolId:a,CAT20TxParam:c,networkFeeInt:m,...d})=>{let g=(0,Te.useDispatch)(),l=Zm({coinId:o,fromAddr:t,toAddr:e,satBytes:n,coinAmount:r,protocolId:a,...d}),f=Gn({coinId:o,address:t,utxoType:$o.TRANSFER}),A=async()=>{g(co(!0));let C=[{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:0,amount:10*10**8},{txId:"18de3566d7f150873ac90244dfc4234e9afbefd53e2017af71b941f17b3cf809",vOut:1,amount:3e5}],x=JSON.stringify(c?.tokenMetadata),b=JSON.stringify(c?.tokens),y=c?.tokenPrevTxs,{commitTx:k,revealTx:v}=await l({feeInputs:C,tokenMetadata:x,tokens:b,tokenPrevTxs:y}),N=M.add(k,v);if(C=await f(N),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),C.length===1)return g(co(!1)),{mergeTx:"0",commitTx:k,revealTx:v};let P=await l({feeInputs:C,tokenMetadata:x,tokens:b,tokenPrevTxs:y}),w=P.mergeTx,O=M.add(w,N),L=C.reduce((D,V)=>{let W=V?.amount;return M.add(D,W)},"0");for(;M.lt(L,O);)C=await f(O),C=C.map(D=>({txId:D.txHash,vOut:D.vout,amount:D.coinAmount})),L=C.reduce((D,V)=>{let W=V?.amount;return M.add(D,W)},"0"),P=await l({feeInputs:C,tokenMetadata:x,tokens:b,tokenPrevTxs:y}),w=P.mergeTx,O=M.add(w,N);return g(co(!1)),{mergeTx:w,commitTx:k,revealTx:v}},{error:I,data:T}=(0,sa.useRequest)(async()=>await A(),{debounceWait:500,ready:!!n&&!!c,refreshDeps:[n],onSuccess:C=>{let x=M.add(M.add(C.mergeTx,C.commitTx),C.revealTx);Math.abs(Number(M.sub(x,m)))!==parseInt(n,10)&&(g(z(x)),g(R(!1)))},onError:C=>{g(R(C))}});return[I,T]},_l=()=>{let o=Oo(),t=_(),e=Co(),n=Ko(o),r=n?.protocolId,a=we(t,e,n?.localType),c=q(),m=Zo(),[,d]=Ne({protocolId:r,coinId:o,address:t,chainId:n?.chainId}),[g,l]=Tl(),f=g?.satBytes;(0,Qo.useEffect)(()=>{if(!f&&d?.normal&&l({level:Vo.STANDARD,satBytes:d?.normal}),f&&g?.level!==Vo.CUSTOM){let k=d[qn[g?.level]?.satBytes];l({...g,satBytes:k})}},[d]);let A=Yt(o,void 0,{addressType:a}),I=Sl({coin:n}),[,T]=Il({coin:n,coinId:o,walletId:e,protocolId:r,tick:I,address:t,coinAmount:c}),C=hl({coin:n,UTXOList:T}),[x,b]=xl({coinId:o,walletId:e,satBytes:f,address:t,coinBalance:A}),y=(0,Qo.useMemo)(()=>b===void 0,[b]);return{initLoading:y,loading:x||y,sendCoinAvailableAmount:m,CAT20CanTransferAmount:C}},yl=()=>{let o=Oo(),t=_(),e=B(),n=Co(),r=Ko(o),a=r?.protocolId,c=r?.baseCoinId||o,m=we(t,n,r?.localType),d=Bt(),g=$(),l=q(),f=nn(),A=Zo(),I=Kr(),[,T]=Ne({protocolId:a,coinId:o,address:t,chainId:r?.chainId}),[C,x]=Tl(),b=C?.satBytes,y=(0,Te.useDispatch)();(0,Qo.useEffect)(()=>{y(co(!0))},[y]),(0,Qo.useEffect)(()=>{if(!b&&T?.normal&&x({level:Vo.STANDARD,satBytes:T?.normal}),b&&C?.level!==Vo.CUSTOM){let To=T[qn[C?.level]?.satBytes];x({...C,satBytes:To})}},[T]);let k=Yt(o,void 0,{addressType:m}),v=Sl({coin:r}),[,N]=Il({coin:r,coinId:o,walletId:n,protocolId:a,tick:v,address:t,coinAmount:l}),P=hl({coin:r,UTXOList:N}),w=UI({sendAmountInt:l,UTXOList:N}),[O,L,D]=WI({selectedUtxo:w,signInfo:T,chainIndex:r?.chainId,walletId:n}),V=GI({signInfo:T,selectedUtxo:w,grandFatherRawTxs:D,address:t}),[,W]=HI({coinId:o,fromAddr:t,toAddr:e,satBytes:b,coinAmount:l,protocolId:a,CAT20TxParam:V,networkFeeInt:g}),[G,oo]=xl({coinId:o,walletId:n,satBytes:b,address:t,coinBalance:k}),Z=(0,Qo.useMemo)(()=>oo===void 0,[oo]);return{coin:r,toAddr:e,coinId:o,walletId:n,signInfo:T,satBytes:b,fromAddr:t,protocolId:a,baseCoinId:c,addressType:m,sendAmount:d,sendAmountInt:l,networkFeeInt:g,feeData:W,selectedUtxo:w,initLoading:Z,rawTxError:O,sendCoinAvailableAmount:A,availableSendCoinAmountInt:I,availableFeeCoinAmountInt:f,selectedNetworkFeeLevel:C,setSelectedNetworkFeeLevel:x,CAT20CanTransferAmount:P,CAT20GrandFatherRawTxs:D,CAT20TxParam:V,loading:G||L}},Fl=({coinId:o,toAddr:t,fromAddr:e,satBytes:n,walletId:r,localType:a,networkFee:c,coinAmount:m,coinAmountInt:d,protocolId:g,dustSize:l=Jm,feeData:f,CAT20TxParam:A,history:I,...T})=>{let C=Ko(o),x=wo(),b=Co(),y=r||b,k=Ic(a),v=Gn({coinId:o,address:e,utxoType:$o.TRANSFER}),N=un({coinId:o,currencyId:x,txType:Fo.BRC20_SEND,protocolId:g,address:e}),P=$m({coinId:o,toAddr:t,walletId:r,fromAddr:e,satBytes:n,localType:k,coinAmount:d,networkFee:c,dustSize:l,protocolId:g,...T}),w=um({walletId:y});return(0,Qo.useCallback)(async()=>{let O=await v(c),L=O.map(Bi=>({txId:Bi.txHash,vOut:Bi.vout,amount:Bi.coinAmount}));await N(O,()=>{I.goBack()});let D=JSON.stringify(A?.tokenMetadata),V=JSON.stringify(A?.tokens),W=A?.tokenPrevTxs,G=await P({feeInputs:L,tokenMetadata:D,tokens:V,tokenPrevTxs:W}),{mergeTx:oo,commitTx:Z,revealTx:To}=G,Yo=[],Ht=JSON.stringify({protocolId:U.CAT20,broadcastType:1,nftIds:[]}),Vt,Fe=await So(a,Z),Qt=await So(a,To);oo&&(Vt=await So(a,oo));let vn={signedTx:oo,fromAdr:e,toAdr:e,serviceCharge:f.mergeTx,coinAmount:"0",coinId:C?.baseCoinId,txHash:Vt,txType:Fo.CAT20_NOT_SHOWN,dependTx:[],itemId:"mergeTx",extJson:Ht},lr={signedTx:Z,fromAdr:e,toAdr:"bc1p2t67cfrgz5fg38mktge38d6x5r5jkqwl8a8ysszzx6gx58l5vtlqj3zpvh",serviceCharge:f.commitTx,coinAmount:"332",coinId:C?.baseCoinId,txHash:Fe,txType:Fo.CAT20_NOT_SHOWN,dependTx:Vt?[Vt]:[],itemId:"commitTx",extJson:Ht},yt={signedTx:To,fromAdr:e,toAdr:t,serviceCharge:f.revealTx,coinAmount:d,coinId:o,txHash:Qt,txType:Fo.BRC20_SEND,dependTx:[Fe],itemId:"revealTx0",extJson:Ht};oo&&Yo.push(vn),Yo.push(lr,yt);let aT=(await w(Yo))[Qt];io({tx_id:aT})},[v,c,N,A?.tokenMetadata,A?.tokens,A?.tokenPrevTxs,P,a,e,f,C?.baseCoinId,t,d,o,w,I])};s();i();var po=u(h());J();var bl=u(Ft()),VI=()=>{let o=Nt(),{coin:t}=S();return(0,po.useCallback)(n=>{let r="";if(n.key&&(r=F(n?.key,n?.args)),n?.type===no.BALANCE_INSUFFICIENT)return po.default.createElement(po.default.Fragment,null,po.default.createElement(H.Box,{className:bo.wrap},r),po.default.createElement(H.Box,{className:bo.wrap},po.default.createElement(ue,{coin:t,receiveOnly:!0})));if(n?.type===no.FEE_BALANCE_INSUFFICIENT)return po.default.createElement(po.default.Fragment,null,po.default.createElement(H.Box,{className:bo.wrap},r),po.default.createElement(H.Box,{className:bo.wrap},po.default.createElement(ue,{coin:o})));let a=()=>{et.action({title:" ",children:po.default.createElement("div",{className:bo.dlgContainer},po.default.createElement("div",{className:bo.dlgTitle},F("wallet_extension_cat_drawer_title_utxo_meaning")),po.default.createElement("div",{className:bo.dlgContent},F("wallet_extension_cat_drawer_subtitle_utxo_meaning")),po.default.createElement("div",{className:(0,bl.default)(bo.dlgTitle,bo.dlgGap)},F("wallet_extension_cat_drawer_title_cat_contract")),po.default.createElement("div",{className:bo.dlgContent},F("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:F("commonall_button_text_next"),onConfirm:c=>{c.destroy()}})};return n?.key==="wallet_extension_cat_max_send_utxo"?po.default.createElement(po.default.Fragment,null,po.default.createElement(H.Box,{className:bo.wrap},r,po.default.createElement(Ve,{className:"okx-wallet-plugin-information-circle",onClick:a}))):r},[t,o])},El=VI;s();i();var Wt={"can-transfer-container":"_can-transfer-container_1cknb_1",canTransferContainer:"_can-transfer-container_1cknb_1","can-transfer-icon":"_can-transfer-icon_1cknb_5",canTransferIcon:"_can-transfer-icon_1cknb_5","dlg-container":"_dlg-container_1cknb_10",dlgContainer:"_dlg-container_1cknb_10","dlg-title":"_dlg-title_1cknb_13",dlgTitle:"_dlg-title_1cknb_13","dlg-content":"_dlg-content_1cknb_20",dlgContent:"_dlg-content_1cknb_20","dlg-gap":"_dlg-gap_1cknb_26",dlgGap:"_dlg-gap_1cknb_26"};function qI(){let{initLoading:o,loading:t,sendCoinAvailableAmount:e,CAT20CanTransferAmount:n}=_l();Al(n);let r=El(),a=(0,Pl.useDispatch)(),c=Zr(),m=()=>{a(ym(!1)),c()},d=()=>{et.action({title:" ",children:xt.default.createElement("div",{className:Wt.dlgContainer},xt.default.createElement("div",{className:Wt.dlgTitle},F("wallet_extension_cat_drawer_title_utxo_meaning")),xt.default.createElement("div",{className:Wt.dlgContent},F("wallet_extension_cat_drawer_subtitle_utxo_meaning")),xt.default.createElement("div",{className:(0,ia.default)(Wt.dlgTitle,Wt.dlgGap)},F("wallet_extension_cat_drawer_title_cat_contract")),xt.default.createElement("div",{className:Wt.dlgContent},F("wallet_extension_cat_drawer_subtitle_cat_contract"))),confirmText:F("commonall_button_text_next"),onConfirm:g=>{g.destroy()}})};return xt.default.createElement(X,{isGlobalLoading:o,renderError:r,customMaxAmount:n,confirmButtonProps:{loading:t,onClick:m},totalAmountProps:{maxAmount:n,type:"amount",title:xt.default.createElement("div",{className:Wt.canTransferContainer},xt.default.createElement("div",{className:Wt.canTransferText},F("wallet_extension_cat_desc_available_utxo")),xt.default.createElement(Ve,{className:(0,ia.default)(Wt.canTransferIcon,"okx-wallet-plugin-information-circle"),onClick:d})),slot:{bottom:xt.default.createElement(hn,{catTotalAmount:e})}}})}var kl=qI;s();i();var $t=u(h()),wl=u(E()),Nl=u(Po()),Os=u(K()),Bl=u(Dc());J();mc();function KI(){let o=(0,Nl.useHistory)(),t=(0,wl.useDispatch)(),[e,{toggle:n}]=(0,Os.useBoolean)(!1),{coin:r,coinId:a,toAddr:c,loading:m,walletId:d,fromAddr:g,signInfo:l,satBytes:f,sendAmount:A,sendAmountInt:I,protocolId:T,baseCoinId:C,addressType:x,networkFeeInt:b,feeData:y,selectedUtxo:k,availableFeeCoinAmountInt:v,selectedNetworkFeeLevel:N,setSelectedNetworkFeeLevel:P,CAT20TxParam:w}=yl(),O=Fl({coinId:a,toAddr:c,fromAddr:g,satBytes:f,walletId:d,feeData:y,localType:r?.localType,networkFee:b,coinAmount:A,coinAmountInt:I,protocolId:T,CAT20TxParam:w,history:o}),L=wo(),D=yr[r?.localType]?.[x],{showManageUTXO:V}=xs(r,D,!0);Cl();let W=(0,Os.useMemoizedFn)(Z=>V&&[fn.BALANCE_INSUFFICIENT,fn.FEE_BALANCE_INSUFFICIENT].includes(Z)?[{onClick:async()=>{await t(en(!1));let To=Bl.default.stringify({addressType:x,coinId:C},{skipEmptyString:!0,skipNull:!0}),Yo=To?`?${To}`:"";o.push(Nr+Yo)},btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:[]),G=(0,$t.useCallback)(async()=>{await O()},[O]),oo=(0,$t.useMemo)(()=>!k?.length||m,[m,k?.length]);return $t.default.createElement($t.default.Fragment,null,$t.default.createElement(Q,{addressType:x,confirmButtonProps:{disabled:oo,onSubmit:G},networkFeeProps:{onClick:n,feeLevel:N?.level},renderTipActions:W,defaultMessage:tt({coinId:C})&&l?.transferReminder,canTransferAmount:tt({coinId:C})&&v}),$t.default.createElement(es,{visible:e,coinId:C,signInfo:l,currencyId:L,estimatedFee:b,value:N,onChange:P,onToggleVisible:n}))}var vl=KI;s();i();var Ll=u(h());function JI({children:o}){let e=it().get("from");return Ll.default.createElement(Bo,{fromAddress:e},o)}var Dl=JI;var YI={match:(o,t,e)=>tt({coinId:o})&&[U.CAT_20].includes(e),Container:Dl,pages:{AddressPage:pl,AmountPage:kl,ConfirmPage:vl}},Ml=YI;s();i();Io();s();i();var Zl=u(h());var Ws=u(E());var ca=u(K());J();s();i();var Wl=u(h()),Gl=u(K());s();i();J();zo();var Ol=(o,t)=>{let[e,n]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:n}]}]},zI=(o,t)=>Ra(Ma([...o,...t],"assetName")).map(n=>{let r=o.find(c=>c?.assetName===n),a=t.find(c=>c?.assetName===n);return{assetName:n,amount:M.add(r?.amount||0,a?.amount||0)}}),ZI=o=>{let t=o.reduce((n,r)=>{let{multiAsset:a}=r;return a?.length?[...n,...a]:n},[]),e=[];return t.forEach(n=>{let{policyId:r,assets:a}=n,c=Da(e,{policyId:r});if(c!==-1){let{assets:m}=e[c];e[c]={policyId:r,assets:zI(a,m)}}else e=[...e,n]}),e},Rl=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:n,contractAddress:r})=>{let{AdaWallet:a}=await Un(),c;return e===0&&t?.some(({multiAsset:m})=>!!m?.length)?c=ZI(t):e!==0&&(c=Ol(r,n)),a.minAda(o,c)},Ul=async o=>{let{AdaWallet:t}=await Un();return t.minFee(o)},$I="999999999",XI="transfer",Rs=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:n,baseCoinId:r,contractAddress:a,minTransferAmountInt:c})=>{let m={address:o,inputs:t,ttl:$I,type:XI,changeAddress:e};return r===0?m={...m,amount:n}:m={...m,amount:c,multiAsset:Ol(a,n)},m};var jI=({utxoList:o,toAddr:t,fromAddr:e,coinId:n,sendAmount:r,minTransferAmountInt:a},c)=>{let m=Ko(n),[d,g]=(0,Wl.useState)("0");return(0,Gl.useDeepCompareEffect)(()=>{(async()=>{if(!o?.length)return;let l=Rs({toAddr:t,fromAddr:e,utxoList:o,contractAddress:m?.address,baseCoinId:m?.baseCoinId,sendAmount:r,minTransferAmountInt:a});try{let f=await Ul({data:l});c?.(f),g(f)}catch(f){console.log(f)}})()},[m,t,e,r,a,o]),d},Hl=jI;s();i();var Kl=u(h()),Jl=u(K());s();i();var ql=u(K());Ee();Pe();Do();J();s();i();var Vl=u(Po());var QI=()=>{let{coinId:o}=(0,Vl.useParams)(),t=_(),e=Co(),[n,r]=Qc(o);return{address:t,walletId:e,coin:n||{},coinId:Number(o),baseCoin:r||{},baseCoinId:n?.baseCoinId}},bn=QI;var oS=()=>{let o=an(),{coin:t,coinId:e,walletId:n,address:r}=bn(),a=t?.baseCoinId;return(0,ql.useMemoizedFn)(async(c,m,d)=>{let g=await so().getRequestHeaders({walletId:n,needSign:!0,currency:"usd"}),l=m,f=c,A=M.add(M.add(a===0?c:d,m),d);a===0&&M.gte(A,o)&&(f=o,l="0"),a!==0&&(l=M.add(m,M.add(d,d)));let I={coinId:e,address:r,fee:l,amount:f},{data:T}=await rt(Ho.getSpecialUtxoList,I,{headers:g});return T},[e,n,r,a,o])},Us=oS;var tS=(o,t,e)=>{let[n,r]=(0,Kl.useState)([]),a=Us();return(0,Jl.useDeepCompareEffect)(()=>{(async()=>{let c=await a(o,t,e);r(c)})()},[o,t,e,a]),n},Yl=tS;s();i();var aa=u(K());J();var eS=o=>{let t=S(),{coin:{symbol:e,baseCoinId:n,decimals:r}}=t,a=M.div(o,10**r);return(0,aa.useMemoizedFn)(c=>n===0&&M.gt(a,0)&&M.lt(c,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:be(a,{symbol:e})},type:no.COMMON_ERROR}:null,[a,e,n])},nS=o=>{let t=Nt(),{coin:e}=S(),n=$(),r=an(),{baseCoinId:a}=e;return(0,aa.useMemoizedFn)(c=>{let m=M.mul(c,10**e?.decimals),d,g;a===0?(g=M.add(M.add(m,n),o),d=M.add(m,n)):(g=M.add(M.add(n,o),o),d=M.add(n,o));let l=M.sub(r,d);return l!=="0"&&M.lt(l,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:be(g,{decimals:t?.decimals})},type:no.COMMON_ERROR}:null},[a,n,r,t?.decimals,e?.decimals])},rS=o=>{let t=eS(o),e=nS(o);to([t,e])},zl=rS;function sS(){let o=(0,Ws.useDispatch)(),t=$(),n=(0,Ws.useSelector)(ns)?.minTransferInt,r=q(),a=B(),c=an(),{coin:m,coinId:d,baseCoinId:g,address:l}=bn(),f=Yl(r,t,n);return(0,ca.useDeepCompareEffect)(()=>{(async()=>{let A=await Rl({contractAddress:m?.address,baseCoinId:g,utxoList:f,toAddr:a,sendAmountInt:r});o(Mu({minTransferInt:A}))})()},[f,g,a,r,m?.address]),(0,ca.useDeepCompareEffect)(()=>{g===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(Mo(M.sub(c,n)))},[f,c,n]),zl(n),Hl({coinId:d,toAddr:a,utxoList:f,fromAddr:l,minTransferAmountInt:n,sendAmount:r},A=>{o(z(A))}),Zl.default.createElement(X,null)}var $l=sS;s();i();var op=u(h());s();i();var Xl=u(E()),jl=u(K());J();var iS=()=>{let t=(0,Xl.useSelector)(ns)?.minTransferInt,{coin:e,coinId:n,address:r,walletId:a}=bn(),c=vr(a),m=q(),d=B(),g=$(),l=Us(),f=ko({fromAddr:r,walletId:a,localType:e?.localType});return(0,jl.useMemoizedFn)(async()=>{try{let I=await l(m,g,t),T=Rs({toAddr:d,fromAddr:r,utxoList:I,minTransferAmountInt:t,sendAmount:m,baseCoinId:e?.baseCoinId,contractAddress:e?.address}),C=await f({params:T}),x=await So(e?.localType,C),b={coinId:n,txHash:x,signedTx:C,walletId:a,toAdr:d,serviceCharge:g,fromAdr:r,coinAmount:m,walletType:c?.serverWalletType},y=await ws(b);io({tx_id:y})}catch(I){oe.error(I?.error_message||F("wallet_home_toast_network_error"))}},[e,m,d,t,g,c?.serverWalletType,l])},Ql=iS;function aS(){let o=Ql();return eo(),op.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})}var tp=aS;var cS={match:o=>o===za,pages:{AmountPage:$l,ConfirmPage:tp,AddressPage:j}},ep=cS;s();i();s();i();var rp=u(h());s();i();zo();Io();var mS=()=>{let o=Lt(),t=yc(),e=on({factionType:Cr});return[o,async n=>(await Promise.all(t.map(c=>{let m=br(e,c);return ie(n,c,m)}))).some(Na)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},np=mS;var uS=()=>{let o=np();return rp.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}}})},sp=uS;s();i();var cp=u(h());s();i();var ip=u(E()),Hs=u(K());lo();Do();s();i();var Gs=u(h());Io();function ma(){let{baseCoin:o}=S(),t=B(),[e,n]=(0,Gs.useState)(!1),r=on({factionType:Cr});return(0,Gs.useEffect)(()=>{(async()=>{let c=br(r,o.coinId),m=await ie(t,o?.coinId,c);n(!m)})()},[o,t]),e}var dS=async({memo:o,fromAddress:t,toAddress:e,amountInt:n,isIBCTransfer:r,baseCoin:a,signInfo:c})=>{let{chainId:m,sequence:d,accountNumber:g,feeDemon:l,demon:f,sourceChannel:A,normal:I,gasLimit:T}=c,C={chainId:m,sequence:d,accountNumber:g,feeDemon:l,feeAmount:Wo(I,T),gasLimit:T,memo:o,fake:!0},x={fromAddress:t,toAddress:e,demon:f,amount:n},b={};if(r){let k=mo(Math.round(Date.now()/1e3),300);b={...C,type:Je.IBC_TRANSFER,data:{...x,sourcePort:"transfer",sourceChannel:A,ibcTimeoutTimestamp:k}}}else b={...C,type:Je.TRANSFER,data:{...x}};return await so().signTransaction(b,t,a.localType)},fS=()=>{let o=(0,ip.useDispatch)(),[t,{setFalse:e}]=(0,Hs.useBoolean)(!0),{coin:n}=S(),{coinId:r}=n,a=_(),c=B(),m=uo(),d=ma();return(0,Hs.useDebounceEffect)(()=>{r&&c&&m!=="0"&&(async()=>{try{let l=await Zc({coinId:r,from:a,to:c}),f=await dS({memo:"",fromAddress:a,toAddress:c,amountInt:m,isIBCTransfer:d,baseCoin:n,signInfo:l}),A=await $c({coinId:r,from:a,inputData:f}),I=Math.ceil(Wo(l.normal,A));o(z(I)),o(As({inputData:f,signInfo:l,gasLimit:A,isIBCTransfer:d})),o(R(!1))}catch{o(R(!0))}finally{e()}})()},[r,a,c,m,d]),t},ap=fS;function lS(){let o=ap();return to(),cp.default.createElement(X,{confirmButtonProps:{loading:o}})}var mp=lS;s();i();var ht=u(h()),qs=u(E()),fp=u(K());s();i();var Ie=u(h()),up=u(Ft());J();s();i();var En={"retina-border-basic":"_retina-border-basic_13q86_1",retinaBorderBasic:"_retina-border-basic_13q86_1","memo-input":"_memo-input_13q86_29",memoInput:"_memo-input_13q86_29","memo-input-box":"_memo-input-box_13q86_29",memoInputBox:"_memo-input-box_13q86_29","memo-input-core":"_memo-input-core_13q86_32",memoInputCore:"_memo-input-core_13q86_32","memo-title__link":"_memo-title__link_13q86_35",memoTitleLink:"_memo-title__link_13q86_35","memo-title__link__dashed":"_memo-title__link__dashed_13q86_39",memoTitleLinkDashed:"_memo-title__link__dashed_13q86_39"};var pS=({value:o,onChange:t,placeholder:e,title:n=F("wallet_extension_title_memo_optional"),dashed:r=!0,error:a,errorType:c,maxLength:m=256})=>{let d=Lc();return Ie.default.createElement(Tt,{bordered:!1},Ie.default.createElement(Vn,{title:Ie.default.createElement(cc,{href:d?.sendMemoInput,className:(0,up.default)(En["memo-title__link"],{[En["memo-title__link__dashed"]]:r})},Ie.default.createElement(Y.Text,{inherit:!0},n))},Ie.default.createElement(Kt.TextArea,{placeholder:e||F("wallet_extension_input_memoinfro"),size:Kt.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:m,error:a,errorType:c,className:En["memo-input"],inputClassName:En["memo-input-core"],innerClassName:En["memo-input-box"]})))},Se=(0,Ie.memo)(pS);s();i();var Vs=u(E());lo();Do();var gS=o=>{let{coin:t,baseCoin:e}=S(),n=_(),r=uo(),a=(0,Vs.useSelector)(ao),c=(0,Vs.useSelector)(ct),{gasLimit:m,signInfo:d,isIBCTransfer:g,gasPrice:l}=(0,Vs.useSelector)(us),f=No();return fo(async()=>{if(!await mn())throw new Error("mpc error")},async()=>{let{chainId:x,sequence:b,accountNumber:y,feeDemon:k,demon:v,sourceChannel:N}=d,P={chainId:x,sequence:b,accountNumber:y,feeDemon:k,feeAmount:c,gasLimit:m,memo:o},w={fromAddress:n,toAddress:a,demon:v,amount:r},O={};if(g){let D=mo(Math.round(Date.now()/1e3),300);O={...P,type:Je.IBC_TRANSFER,data:{...w,sourcePort:"transfer",sourceChannel:N,ibcTimeoutTimestamp:D}}}else O={...P,type:Je.TRANSFER,data:{...w}};return await so().signTransaction(O,n,e.localType)},async x=>{let b={memo:o,gasPrice:l,gasLimit:m},y=await So(t.localType,x),k={signedTx:x,coinAmount:r,coinId:t.coinId,fromAdr:n,toAdr:a,serviceCharge:c,extJson:JSON.stringify(b),txHash:y};return await f(k)},x=>(io({tx_id:x}),x))},dp=gS;s();i();function ua({feeInfo:o,callback:t}){let e=qr();return{level:o.gasType,loading:!e&&o.initLoading,networkFee:!e&&o.initLoading?void 0:o.gasFee,estimateFailed:e||o.error,onClick:()=>{t()}}}function AS(){let o=(0,qs.useDispatch)(),[t,e]=(0,ht.useState)({}),[n,{toggle:r}]=(0,fp.useToggle)(!1),{coin:a}=S(),{coinId:c}=a,m=_(),d=B(),g=uo(),l=(0,qs.useSelector)(us),f=ua({feeInfo:t,callback:r}),[A,I]=(0,ht.useState)(""),T=dp(A),C=async()=>{await T()},x=y=>{I(y.target.value)},b=y=>{e(y),o(z(y.gasFee)),o(R(f.estimateFailed)),o(As({...l,gasLimit:y.gasAmount,gasPrice:y.gasPriceStep}))};return eo(),ht.default.createElement(ht.default.Fragment,null,ht.default.createElement(Q,{confirmButtonProps:{onSubmit:C},slot:{bottom:ht.default.createElement(ht.default.Fragment,null,ht.default.createElement(Se,{value:A,onChange:x}),ht.default.createElement(ed,{visible:n,coinId:String(c),address:m,inputData:l.inputData,to:d,value:g,onBack:r,onClose:r,onChange:b}))},networkFeeProps:f}))}var lp=AS;var CS={match:o=>hc(o),pages:{AddressPage:sp,AmountPage:mp,ConfirmPage:lp}},pp=CS;s();i();s();i();var hp=u(h());s();i();var gp=u(K()),TS=()=>{let{baseCoin:o}=S();return(0,gp.useMemoizedFn)(async t=>{let e=Ct(t,o.localType);return await ie(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},IS=()=>{let o=Lt(),t=TS();return[o,t]},Ap=IS;s();i();var Ip=u(E()),Sp=u(K());zo();s();i();var Cp=u(K());J();var SS=()=>{let o=mu();return(0,Cp.useMemoizedFn)(async t=>{let e;try{e=(await Gc(t)).popupInfoList}catch(n){throw oe.error(F("wallet_extension_transaction_error_general_check_network")),n}return e?.length&&await o(e),e})},Tp=SS;var xS=10,hS=()=>{let o=(0,Ip.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,Sp.useBoolean)(!1),{coin:r,baseCoin:a}=S(),c=_(),m=B(),[d]=on({coinId:a.coinId}),g=vt(),l=Tp();return{onClick:async()=>{try{e();let A=await l({from:c,to:m,method:"wallet_inner_transfer",chainIndex:d?.realChainId??r.chain}),I=va(A,"0.templeteId");o(Wu(I===xS)),g()}catch(A){console.log(A)}finally{n()}},loading:t}},xp=hS;var _S=()=>{let o=Ap(),{onClick:t,loading:e}=xp();return hp.default.createElement(j,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},_p=_S;s();i();var da=u(h());zo();s();i();var yp=u(h()),Fp=u(E());function yS(){let o=(0,Fp.useDispatch)(),{coin:t}=S();(0,yp.useEffect)(()=>{t.systemToken&&o(ee(t.coinId))},[t.coinId])}var bp=yS;var FS=()=>{let o=Bt(),e=!!Em().key||pr(o)||o==="",n=Zr(),r=Zu({disabled:e,onClick:n});return to(),bp(),da.default.createElement(X,{slot:{footer:da.default.createElement(Pt,{buttonGroup:r})}})},Ep=FS;s();i();var Gt=u(h()),kn=u(E());s();i();var Pp=u(h()),kp=u(E()),wp=u(Po());function bS(){let o=(0,wp.useHistory)(),{baseCoin:t}=S(),e=st(),n=_(),r=B(),a=q(),c=(0,kp.useSelector)(mt),m=Nm(),d=Sr({from:n,to:r,value:Et(a),data:c}),g=()=>{o.go(-3)};return Pp.default.createElement(uu,{needMev:!0,chainId:t.chainId,walletId:e,txParams:d,showDappInfo:!1,coinId:t.coinId,onConfirm:m,onCancel:g})}var Np=bS;s();i();var Xt=u(h());J();s();i();var Pn={content:"_content_19dst_1",img:"_img_19dst_6",title:"_title_19dst_11",tip:"_tip_19dst_19",btns:"_btns_19dst_26"};function ES({visible:o,onClose:t,onConfirm:e}){let n=Cc({light:"/cdn/assets/imgs/2412/59283F63358F1706.png",dark:"/cdn/assets/imgs/2412/E8B18B49F2D1B597.png"});return Xt.default.createElement(et.Confirmation,{visible:o,noMargin:!0,hideCloseBtn:!1,maskClosable:!1,onClose:t},Xt.default.createElement("div",{className:Pn.content},Xt.default.createElement(rc,{src:n,className:Pn.img}),Xt.default.createElement("div",{className:Pn.title},F("wallet_extension_transaction_dialog_title_change_type")),Xt.default.createElement("div",{className:Pn.tip},F("wallet_extension_transaction_dialog_desc_change_type")),Xt.default.createElement("div",{className:Pn.btns},Xt.default.createElement(go,{category:go.CATEGORY.fill,type:go.TYPE.highlight,size:go.SIZE.lg,onClick:t},F("commonall_text_btn_cancel")),Xt.default.createElement(go,{category:go.CATEGORY.outline,type:go.TYPE.primary,size:go.SIZE.lg,onClick:e},F("commonall_modal_btn_continue")))))}var Bp=ES;s();i();var fa=u(h()),Ks=u(E());s();i();var er={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function PS({errorMsg:o}){let t=(0,Ks.useDispatch)(),{coin:e}=S(),n=(0,Ks.useSelector)(mt),r=a=>{t(Uu(a))};return e.baseCoinId!==0?null:fa.default.createElement(Tt,{verticalPadding:!1},fa.default.createElement(su,{className:er.root,titleClass:er.titleClass,headerClassName:er.headerClassName,contentClassName:er.contentClassName,value:n,onChange:r,error:o,autoResize:!0}))}var vp=PS;s();i();var la=u(E());function kS(){let{coin:o}=S(),t=(0,la.useSelector)(bu),e=(0,la.useSelector)(mt);return o.baseCoinId===0&&t&&e}var Lp=kS;s();i();var Dp=u(E());var wS=()=>{let o=(0,Dp.useSelector)(An),{coin:t}=S(),e=uo(),n=_(),r=B();return{fetchParams:{coinId:t.coinId,from:n,to:r,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},Mp=wS;s();i();var nr=u(E());uT();yo();He();lo();Do();s();i();var Op=u(h());var NS=()=>(0,Op.useCallback)(o=>{try{typeof o=="string"&&!!o&&io({tx_id:o})}catch(t){console.log(t)}},[]),Js=NS;s();i();var Up=u(h()),Wp=u(E());s();i();var Rp=({contractAddress:o,toAddress:t,amount:e})=>{try{let n=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return p.Buffer.from(n).toString("hex")}catch{return""}};var BS=()=>{let{coin:o}=S(),t=Ct(B(),o.localType),e=uo(),n=(0,Wp.useSelector)(gn),{isFacet:r,facetContractAddress:a}=n||{};return(0,Up.useMemo)(()=>!o.address||!vm(t)?"":r?Rp({contractAddress:a,toAddress:t,amount:e}):dn(t,e),[o,t,e,r,a])},Ys=BS;var vS=()=>{let o=(0,nr.useDispatch)(),{coin:t}=S(),e=Hm(),n=cn(),r=q(),a=re(),c=_(),m=B(),d=Ct(c,t.localType),g=Ct(m,t.localType),l=st(),{activityId:f,activity:A,status:I,tip:T}=ae(),C=Ys(),x=(0,nr.useSelector)(mt),b=(0,nr.useSelector)(gn),y=Js(),k=(L,D)=>{let{userGasInfo:V}=D,{updateGasInfo:W}=L;return W?{...W,gasLimit:V.gasLimit,supportEip1559:V.supportEip1559,networkFee:V.networkFee}:{...V}},v=L=>{let D=L.supportEip1559?L.maxFeePerGas:L.gasPrice,V=L?.networkFee||Wo(D,L.gasLimit),W=qt(n,V);if(Go(W,0))return[!1,r];if(t.baseCoinId===0)return a?[ot(W,0),W]:[Mn(r,W),r];let G=e;t.systemToken&&(G=qt(G,V));let oo=a?G:r;return[Mn(oo,G),oo]},N=({updateData:L,finallyGasInfo:D,publishAmountInt:V})=>{let{nonce:W}=L,G=V,oo=Qa(t.localType)?.realChainIdHex,Z={from:d,gasLimit:Et(D.gasLimit),nonce:Et(W),chainId:oo};return D.supportEip1559?(Z.maxFeePerGas=Et(D.maxFeePerGas),Z.maxPriorityFeePerGas=Et(D.maxPriorityFeePerGas),Z.type=lc.FEE_MARKET):Z.gasPrice=Et(D.gasPrice),b?.isFacet?(Z.value="0",Z.to=b?.facetBlackHoleAddress,Z.data=C):t.address?(Z.value="0",Z.to=Ct(t.address,t.localType),Z.data=C):(Z.value=Et(G),Z.to=g,x&&(Z.data=x)),Sr(Z)},P=({txParams:L,publishAmountInt:D})=>{let V={...L};return t.systemToken&&(V.value=tc(Et(D))),V.walletId=l,V},w=({txParams:L,publishAmountInt:D,dataForCheck:V={}})=>{let{userGasInfo:W={}}=V,G=Xe(L.value),oo=Xe(L.gasLimit),Z=Xe(W.supportEip1559?L.maxFeePerGas:L.gasPrice),To={...L,value:G,from:c,to:m,gas:oo,gasPrice:Z,priorityFee:Xe(W.supportEip1559?L.maxPriorityFeePerGas:0),nonce:Xe(L.nonce),repeatTxType:fc.CONFIRMING,oldTxHash:"",gasType:W?.gasType};return{coinId:t.coinId,coinAmount:D,fromAdr:c,toAdr:m,serviceCharge:Wo(oo,Z),extJson:JSON.stringify(To),txSource:nt.NORMAL,inputData:L.data?L.data:"",activityId:f}};return async(L,D={})=>{let V=k(L,D),[W,G]=v(V);if(!W)throw new Error("balance check error");let oo=N({updateData:L,finallyGasInfo:V,publishAmountInt:G}),Z=P({txParams:oo,publishAmountInt:G}),To=w({txParams:oo,publishAmountInt:G,dataForCheck:D});ec({activityId:f,activity:A,status:I,tip:T,walletId:l,address:d}),await o(Nc({txParams:Z,walletId:l}));let Yo=await so().signAndPublishTransferTransaction({signParams:Z,from:Ec(oo.from,t.localType),baseChain:Pc(t.localType),publishParams:To});y(Yo)}},Gp=vS;s();i();var zs=u(E());var LS=()=>{let o=(0,zs.useDispatch)(),t=$(),e=(0,zs.useSelector)(An),{gasLimit:n,gasPrice:r,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:l,gasType:f}=e,{minGasFee:A}=fm({gasLimit:n,gasPrice:r,maxPriorityFeePerGas:a,maxFeePerGas:c,supportEip1559:m,extFee:d,gasPriceInfo:g,gasLimitInfo:l,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(fs(!0))}}},Hp=LS;var DS=()=>{let o=(0,kn.useDispatch)(),t=Hp(),e=Mp(),n=wm(),r=nu(),a=Gp(),{clear:c}=ae(),m=(0,kn.useSelector)(mt),d=ts(m),g=Lp(),[l,f]=(0,Gt.useState)(!1),A=async()=>{if(g)return f(!0),{pause:!0};try{let T=await r({...e.fetchParams,userGasInfo:e.userGasInfo,baseCoinAmountUse:e.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:n});return await a(T,e),null}catch(T){if(T?.message===eu)throw new Error($r);{let C=T?.data?.originalError;throw Su(C?.code)&&c?(c(),C):T}}},I=(0,kn.useSelector)(me);return eo(),Gt.default.createElement(Gt.default.Fragment,null,Gt.default.createElement(Q,{slot:{bottom:Gt.default.createElement(vp,{errorMsg:d})},networkFeeProps:t,confirmButtonProps:{disabled:!!d,onSubmit:A},tipMessageProps:{blockAddressInfo:I}}),Gt.default.createElement(Bp,{visible:l,onClose:()=>{f(!1),Wi({action_after_pop_up:"cancel"})},onConfirm:()=>{o(Gu(!0)),f(!1),Wi({action_after_pop_up:"confirm"})}}))};function MS(o){return(0,kn.useSelector)(rs)?Gt.default.createElement(Np,null):Gt.default.createElement(DS,{...o||{}})}var Vp=MS;s();i();var gt=u(h()),xe=u(E()),pa=u(K());s();i();var qp=u(E());function OS(){let{coin:o}=S(),t=_(),e=Pm(),n=(0,qp.useSelector)(An);return em({txType:tm.transfer,coinId:o.coinId,fromAddress:t,unavailable:n.gasType===Vo.CUSTOM,fee:e})}var Kp=OS;var RS=(0,gt.memo)(()=>{let o=(0,xe.useDispatch)(),t=(0,gt.useRef)(!1),e=(0,gt.useRef)(!1),n=(0,xe.useSelector)(wt),r=(0,xe.useSelector)(Fu),{coin:a}=S(),c=_(),m=B(),d=Ct(c,a.localType),g=Ct(m,a.localType),l=Ys(),f=(0,xe.useSelector)(mt),A=a.baseCoinId===0?f:l,I=q(),T=wo(),C=Jr(),x=(0,xe.useSelector)(gn),{isFacet:b,facetBlackHoleAddress:y}=x||{},{disabled:k,fetchOnce:v}=(0,gt.useMemo)(()=>{let G=null,oo=a.baseCoinId===0&&ts(f);return n&&(a.baseCoinId!==0||!oo)&&(G=+new Date),{disabled:oo||C,fetchOnce:G}},[a.baseCoinId,f,C,n]),N=ae(),P=(0,gt.useMemo)(()=>b?y:a.baseCoinId===0?g:a.address,[a.baseCoinId,a.address,g,b,y]),w=()=>{t.current||e.current?o(R(!0)):o(R(!1))},O=(0,pa.useMemoizedFn)(G=>{o(Ou(G?.signInfo||{}))}),L=(0,pa.useMemoizedFn)(G=>{o(Ru(G)),o(co(G?.isNetworkFeeLoading));let oo=G.supportEip1559?G.maxFeePerGas:G.gasPrice,Z=G.networkFee;oo==="0"?e.current=!0:e.current=!1,G?.gasLimitInfo?.queryGasLimitErrorUseDefault?t.current=!0:t.current=!1,o(z(Z)),w()}),D=()=>{o(fs(!1))},V=()=>{t.current=!1},W=()=>{t.current=!0};return gt.default.createElement(lm,{currencyId:T,visible:r,coinId:a.coinId,address:d,inputData:A,tokenAddress:P,value:a.address?"0":I,gasLimitOptions:{fetchOnce:v,disabled:k,onFetchSuccess:V,onFetchError:W},estimatedL1FeeOptions:{fetchOnce:v,disabled:k},onBack:D,onServerDataChange:O,onGasChange:L,gasReturn:N})}),US=({children:o})=>{let t=Kp(),e=(0,xe.useSelector)(rs);return gt.default.createElement(Iu,{gasReturn:t},o,!e&&gt.default.createElement(RS,null))},Jp=US;var WS={match:o=>Sc(o),Container:Jp,pages:{AddressPage:_p,AmountPage:Ep,ConfirmPage:Vp}},Yp=WS;s();i();Io();s();i();s();i();var Zs=u(h()),zp=u(E()),Zp=u(K());var GS=()=>{let o=(0,zp.useDispatch)(),{coin:t}=S(),e=_(),n=(0,Zs.useCallback)(async()=>{try{let{data:a={}}=await je({coinId:t.coinId,address:e});a?.info?.normal?o(z(a.info.normal)):o(R(!0))}catch{o(R(!0))}finally{o(co(!1))}},[o,e,t.coinId]),{run:r}=(0,Zp.useDebounceFn)(n,{wait:500});(0,Zs.useEffect)(()=>{o(co(!0)),r()},[e,t.coinId,r,o])},$p=GS;var HS=({children:o})=>($p(),o),Xp=HS;s();i();var jp=u(h());var VS=()=>(to(),jp.default.createElement(X,null)),Qp=VS;s();i();var tg=u(h());s();i();Pe();Ee();Do();var qS=()=>{let{coin:o}=S(),t=_(),e=uo(),n=$(),r=Co(),a=B(),c=ko({fromAddr:t,localType:o.localType,walletId:r}),m=kt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:a,networkFee:n,localType:o.localType});return fo(async()=>{let T=await so().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),C={coinId:o.coinId,address:t,amount:e,fee:n,accountId:r},{data:x}=await rt(Ho.getSpecialUtxoList,C,{headers:T});return x},T=>({inputs:T.map(y=>({txId:y.txId,vOut:y.index,address:y.address,amount:y.amount})),outputs:[{address:a,amount:e}],address:t,fee:n}),async T=>await c({params:T}),async T=>await m(T),T=>(io({tx_id:T}),T))},og=qS;var KS=()=>{let o=og();return eo(),tg.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},eg=KS;var JS={match:o=>o===Za,Container:Xp,pages:{AddressPage:j,AmountPage:Qp,ConfirmPage:eg}},ng=JS;s();i();Io();s();i();var rg=u(h());var YS=({children:o})=>{let e=it().get("from");return rg.default.createElement(Bo,{fromAddress:e},o)},sg=YS;s();i();var lg=u(h());s();i();var ig=u(K());Pe();Ee();var zS=()=>{let{baseCoin:o}=S();return(0,ig.useMemoizedFn)(async t=>{let e={address:t,coinId:o.coinId};try{let{data:r}=await rt(Ho.postCheckAddress,e);if(r?.res)return null}catch(r){console.log(r)}return await ie(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},ag=()=>{let o=Lt(),t=zS();return[o,t]};s();i();var $s=u(h()),cg=u(E()),mg=u(K());lo();var ZS=()=>{let o=(0,cg.useDispatch)(),{coin:t}=S(),e=_(),n=B(),r=at(),a=(0,$s.useCallback)(async()=>{try{let m=await r({coinId:t.coinId,address:e,fromAddr:e,toAddr:n});o(Ku({name:"signInfo",value:m}));let d=[],{fee:g,depositMinAmount:l,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:I}=m;t.baseCoinId===0?d.push(g):I===0?d.push(g,f,l,A):d.push(g,f);let T=d.reduce((C,x)=>mo(C,x),0);o(z(T))}catch{o(R(!0))}finally{o(co(!1))}},[o,r,t.coinId,t.baseCoinId,e,n]),{run:c}=(0,mg.useDebounceFn)(a,{wait:500});(0,$s.useEffect)(()=>{o(co(!0)),o(R(!1)),c()},[o,a,c])},ug=ZS;s();i();var dg=u(h()),Xs=u(E());lo();Io();var $S=()=>{let o=(0,Xs.useDispatch)(),{coin:t,baseCoin:e}=S(),{baseCoinId:n}=t,r=_(),a=Co(),c=we(r,a,Ha),d=Yt(e.coinId,a,{addressType:c})?.coinAmountInt,f=(0,Xs.useSelector)(Tn)?.signInfo?.storageUsedAmount;(0,dg.useEffect)(()=>{if(!d||!f)return;let A=qt(d,f);o(n===0?Mo(A):ne(A))},[o,n,f,d])},fg=$S;var XS=()=>{ug(),fg();let o=ag();return lg.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},pg=XS;s();i();var Ig=u(h());s();i();var gg=u(E()),ga=u(K());lo();var Ag=()=>{let o=Zo(),t=Vm(),e=(0,gg.useSelector)(Tn),{coin:n,baseCoin:r}=S(),a=$(),c=Vr();return(0,ga.useMemoizedFn)(m=>{let d=mo(e?.signInfo?.storageUsedAmount,a),g=_o(d,10**r.decimals);return(n.baseCoinId===0?Go(o,m):Go(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:c(g,r,{useApproximate:!1,isFee:!0})},type:no.FEE_BALANCE_INSUFFICIENT}:null})},Cg=()=>{let o=Om(),t=Ag();to({fns:[o,t],override:!0})},jS=()=>{let o=Ag();return(0,ga.useMemoizedFn)(t=>{let e=o(t);return e?{...e,highlight:Be.AMOUNT}:null})},Tg=()=>{let o=Um(),t=jS();eo({fns:[o,t],override:!0})};var QS=()=>(Cg(),Ig.default.createElement(X,{totalAmountProps:{type:"amount"}})),Sg=QS;s();i();var _g=u(h());s();i();var xg=u(E()),Aa=u(fT());var ox=()=>{let{coin:o}=S(),t=_(),e=B(),n=uo(),r=$(),a=Co(),c=(0,xg.useSelector)(Tn),m=at(),d=Js(),g=ko({fromAddr:t,localType:o.localType,walletId:a}),l=kt({coinId:o.coinId,coinAmount:n,fromAddr:t,toAddr:e,localType:o.localType,networkFee:r,walletId:a}),f=async()=>await m({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=x=>{let{blockHash:b,nonce:y}=x;return{from:t,blockHash:b,type:Aa.NearTypes.TransferNear,nonce:y,receiverId:e,amount:n}},I=x=>{let{blockHash:b,nonce:y}=x,{signInfo:k}=c,{toAddressCheck:v,minTransferTokenValue:N,depositGasFee:P,fee:w,depositMinAmount:O}=k;return{from:t,blockHash:b,type:Aa.NearTypes.TransferToken,nonce:y,receiverId:e,amount:n,contract:o.address,depositGas:P,transferGas:w,depositValue:O,minTransferTokenValue:N,shouldDeposit:Boolean(v===0)}};return fo(f,x=>o.baseCoinId===0?{params:A(x)}:{params:I(x)},g,l,d)},hg=ox;var tx=()=>{let o=hg();return Tg(),_g.default.createElement(Q,{confirmButtonProps:{onSubmit:o}})},yg=tx;var ex={match:o=>o===$a,Container:sg,pages:{AddressPage:pg,AmountPage:Sg,ConfirmPage:yg}},Fg=ex;s();i();s();i();var wg=u(h()),Ng=u(E());J();s();i();var rr=u(h()),js=u(E());lo();var bg=()=>{let{toRent:o}=(0,js.useSelector)(Kn),{coin:t}=S(),e=Zo();return(0,rr.useCallback)(n=>{if(t.baseCoinId!==0)return null;let r=_o(o,10**t.decimals);return Go(n,r)?{key:"walletextension_toast_text_minimum_rent_fee",args:{number:r},type:no.COMMON_ERROR}:null},[e,o])},Eg=()=>{let{selfRent:o,toRent:t}=(0,js.useSelector)(Kn),{coin:e,baseCoin:n}=S(),r=(0,js.useSelector)(ct),a=cn();return(0,rr.useCallback)(()=>{if(e.baseCoinId===0)return null;let c=mo(r,o);return Go(a,c)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:n.symbol,number:_o(c,10**n.decimals)},type:no.FEE_BALANCE_INSUFFICIENT}:Go(a,mo(c,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:_o(mo(c,t),10**n.decimals)},type:no.FEE_BALANCE_INSUFFICIENT}:null},[a,r,o])},Pg=()=>{let o=bg(),t=Eg();to([o,t])},nx=()=>{let o=bg();return(0,rr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Be.AMOUNT}:null},[o])},rx=()=>{let o=Eg();return(0,rr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Be.AMOUNT}:null},[o])},kg=()=>{let o=nx(),t=rx();eo([o,t])};function sx(){let o=(0,Ng.useSelector)(ss);return Pg(),wg.default.createElement(X,{totalAmountProps:{title:F("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var Bg=sx;s();i();var he=u(h()),Ia=u(E()),Wg=u(K());s();i();J();He();var Ro={JITO:"jito",PRIORITY_FEE:"priorityFee"},Ca="speedUpMode";function vg(o){let t=Ge.get(Ca);return t?typeof t=="string"&&(t={[ja]:t}):t={},t[o]||Ro.PRIORITY_FEE}function Lg(o,t){let e=Ge.get(Ca);Ge.set(Ca,{...e||{},[o]:t})}var Dg="jitoGuide";function Mg(){return!!Ge.get(Dg)}function Og(){Ge.set(Dg,"1")}s();i();var ho=u(h()),_t=u(E());J();s();i();var sr={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var ix=ho.default.memo(({jitoGuide:o})=>{let t=(0,_t.useDispatch)(),e=(0,_t.useSelector)(ce),n=r=>{t(Yn(r))};return ho.default.createElement(ic,{mask:!0,show:!o,title:F("wallet_extension_transfer_tooltips_title_express_mode"),description:F("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},ho.default.createElement(Ke.Segmented,{className:sr.modeSwitch,color:Ke.COLOR.grey,size:Ke.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:n},ho.default.createElement(Ke.TabPane,{tab:F("wallet_extension_transfer_tab_standard"),id:Ro.PRIORITY_FEE}),ho.default.createElement(Ke.TabPane,{tab:F("wallet_extension_transfer_tab_express"),id:Ro.JITO})))}),ax=()=>{let{baseCoin:o}=S(),t=(0,_t.useSelector)(Dt),e=(0,_t.useSelector)(is),{fee:n="0"}=t||{},{priorityFee:r}=e,a=On(n,{decimals:o.decimals,type:Y.CRYPTO}),c=On(r||"0",{decimals:o.decimals,type:Y.CRYPTO});return ho.default.createElement(ho.default.Fragment,null,F("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:c}))},cx=()=>{let{baseCoin:o}=S(),t=(0,_t.useSelector)(Dt),e=(0,_t.useSelector)(as),{fee:n}=t||{},{totalJitoFee:r}=e||{},a=On(n||"0",{decimals:o.decimals,type:Y.CRYPTO}),c=On(r||"0",{decimals:o.decimals,type:Y.CRYPTO});return ho.default.createElement(ho.default.Fragment,null,F("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:c}),ho.default.createElement("div",{className:sr.tipDetail},F("wallet_extension_transfer_tooltips_desc_express_mode")))},mx=ho.default.memo(()=>{let o=(0,_t.useSelector)(ce);return ho.default.createElement("div",{className:sr.tip},o===Ro.JITO?ho.default.createElement(cx,null):ho.default.createElement(ax,null))});function ux({jitoGuide:o,...t}){let e=(0,_t.useSelector)(ce),n=(0,_t.useSelector)(Dt),r=e===Ro.JITO?F("wallet_extension_transfer_express_mode"):F("wallet_extension_transfer_standard_mode");return ho.default.createElement(Tt,{bordered:!1,verticalPadding:!1},ho.default.createElement(os,{...t,titleClassName:sr.title,titleAction:n?.supportJito&&ho.default.createElement(ix,{jitoGuide:o}),level:r},ho.default.createElement(mx,null)))}var Rg=ux;s();i();var Oe=u(E());yo();Io();var dx=()=>{let o=No(),{coin:t}=S(),e=_(),n=(0,Oe.useSelector)(bt),r=(0,Oe.useSelector)(ao),a=uo(),c=(0,Oe.useSelector)(ct),{computeUnitPrice:m,computeUnitLimit:d}=(0,Oe.useSelector)(is),g=(0,Oe.useSelector)(ce),l=(0,Oe.useSelector)(as),f=ko({fromAddr:e,localType:Ar,walletId:n}),{coinId:A}=t,I=async()=>await Hc({coinId:A,address:e},{fromAddr:e,toAddr:r}),T=async()=>{if(t.baseCoinId===0||!r)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let P={coinId:A,address:r},{data:w={}}=await Vc(P),{legal:O,tokenAccountAddress:L}=w;return{haveTokenAccountAddress:O,tokenAccountAddress:L}},C=async()=>{let[P,{haveTokenAccountAddress:w,tokenAccountAddress:O}]=await Promise.all([I(),T()]);return{recentBlockHash:P,haveTokenAccountAddress:w,tokenAccountAddress:O}},x=async P=>{let{recentBlockHash:w,haveTokenAccountAddress:O}=P,L={from:e,to:r,amount:a,blockHash:w,payer:e};g===Ro.PRIORITY_FEE&&(L={...L,computeUnitPrice:m,computeUnitLimit:d});let D;return t.baseCoinId===0?D={...L,type:Er.TRANSFER}:D={...L,type:Er.TOKEN_TRANSFER,createAssociatedAddress:!O,mint:t.address},t.protocolType===Rn.SPL_TOKEN_2022&&(D.token2022=!0,D.decimal=t.decimals),await f({params:D})},b=async P=>{if(g!==Ro.JITO||!l)return null;let{recentBlockHash:w}=P,{tipAccountAddress:O,clientGasPrice:L}=l,D={from:e,to:O,amount:L,blockHash:w,payer:e,type:Er.TRANSFER};return await f({params:D})};return fo(C,async(P={})=>{let w=await x(P),O=await b(P);return{rawSignedTx:w,jitoSignedTx:O}},async({rawSignedTx:P,jitoSignedTx:w})=>{let O=await So(Ar,P),L=P,D;g===Ro.JITO&&w&&(L=JSON.stringify([P,w]),D=JSON.stringify({mev:"Jito",jitoHash:await So(Ar,w)}));let V={signedTx:L,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:c,txHash:O,extJson:D},W=await o(V);return Lg(t.localType,g),W},P=>(io({tx_id:P}),P))},Ug=dx;s();i();var Ta={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function fx(){let o=(0,Ia.useSelector)(ss),t=(0,Wg.useDebounce)(o,{wait:200}),e=(0,Ia.useSelector)(Dt),[n,r]=(0,he.useState)(!0),a=Ug(),c=async()=>{o||await a()};return kg(),(0,he.useEffect)(()=>{if(e?.supportJito){let m=Mg();r(m),m||Og()}},[e?.supportJito]),he.default.createElement("div",{className:Ta.root,onClick:()=>{r(!0)}},he.default.createElement(Q,{tipMessageProps:{hidden:o},containerProps:{contentClassName:n?"":Ta.contentJitoGuide},slot:{networkFee:m=>he.default.createElement(Rg,{...m,jitoGuide:n})},confirmButtonProps:{disabled:t,onSubmit:c}}))}var Gg=fx;s();i();s();i();var Hg=u(h()),Qs=u(E());function lx(){let o=(0,Qs.useDispatch)(),{coin:t}=S(),e=(0,Qs.useSelector)(Dt);(0,Hg.useEffect)(()=>{!e||(e.supportJito?o(Yn(vg(t.localType))):o(Yn(Ro.PRIORITY_FEE)))},[e,t.localType])}var Vg=lx;s();i();var zg=u(h());lo();var Zg=u(E());s();i();var jt=u(h()),_e=u(E()),qg=u(K());zo();lo();function px(){let o=(0,_e.useDispatch)(),t=_(),{baseCoin:e}=S(),n=(0,jt.useRef)(null),r=(0,jt.useRef)(!1),[a,c]=(0,jt.useState)("0"),m=async l=>{if(!r.current){try{let f=await qc({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},I=mo(A||"0",l?.fee||"0");c(I),o(ps({...f,totalJitoFee:I})),o(R(!1))}catch{c("0"),o(ps(null)),o(R(!0))}finally{o(Jn(!1))}n.current=setTimeout(()=>{m(l)},7e3)}};return[a,l=>{r.current=!1,m(l)},()=>{clearTimeout(n.current),r.current=!0,n.current=null,c("0"),o(ps(null))}]}function gx(){let o=(0,_e.useDispatch)(),t=du(),e=_(),{coin:n,baseCoin:r}=S(),{coinId:a}=n,[c,m]=(0,jt.useState)("0"),d=()=>{m("0"),o(ls({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(R(!0))};return[c,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:r.chainId});if(pr(A)){d();return}let{computeUnitPrice:I,feelimit:T}=f,{priorityFee:C,priorityGasPrice:x,priorityGasLimit:b}=rm(T,I,A);m(C),o(ls({priorityFee:C,computeUnitPrice:x||"",computeUnitLimit:b||""})),o(R(!1))}catch{d()}finally{o(Jn(!1))}},()=>{m("0"),o(ls({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function Ax(){let o=(0,_e.useDispatch)(),t=(0,_e.useSelector)(ce),e=(0,_e.useSelector)(Dt),n=(0,_e.useSelector)(Cm),r=(0,qg.useLatest)(n),[a,c,m]=px(),[d,g,l]=gx();return(0,jt.useEffect)(()=>{r.current?o(Jn(!1)):o(Jn(!0))},[t]),(0,jt.useEffect)(()=>(!e||!t||(t===Ro.PRIORITY_FEE?g(e):c(e)),()=>{m(),l()}),[e,t]),{speedUpFee:t===Ro.PRIORITY_FEE?d:a}}var Kg=Ax;s();i();var oi=u(h()),Jg=u(E());function Cx(){let o=(0,Jg.useDispatch)(),[t,e]=(0,oi.useState)(null),{coin:n}=S(),r=_(),a=B(),{coinId:c}=n;return(0,oi.useEffect)(()=>{c&&r&&a&&(async()=>{try{let{data:d}=await je({coinId:c,address:r},{fromAddr:r,toAddr:a}),{info:g}=d||{},{fee:l}=g||{};o(R(!l)),o(Ki(g)),e(g)}catch{o(R(!0)),o(Ki(null)),e(null)}})()},[c,r,a]),{baseFee:t?.fee||"0"}}var Yg=Cx;function Tx(){let o=(0,Zg.useDispatch)(),{baseFee:t}=Yg(),{speedUpFee:e}=Kg();(0,zg.useEffect)(()=>{o(z(mo(t,e)))},[t,e])}var $g=Tx;s();i();var ti=u(E());var Xg=u(h());lo();function Ix(){let o=(0,ti.useDispatch)(),{coin:t}=S(),{selfRent:e}=(0,ti.useSelector)(Kn),n=sn();(0,Xg.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let r=qt(n||"0",e||"0");o(Mo(ot(r,"0")?r:"0"))}else o(Mo(null))})()},[t,e,n])}var jg=Ix;function Sx({children:o}){return Vg(),$g(),jg(),o}var Qg=Sx;var xx={match:o=>bc(o),Container:Qg,pages:{AddressPage:j,AmountPage:Bg,ConfirmPage:Gg}},oA=xx;s();i();Io();s();i();s();i();var Sa=u(h()),ir=u(E());zo();var ei=u(K());s();i();mT();var hx=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:r="",signInfo:a={}})=>{let{getRawTransaction:c}=await Tc(),m={};if(o.baseCoinId===0)m={data:{type:Ye.TRANSFER,data:{to:e,amount:n,memo:r}}};else{let{info:g={}}=a,{contractAddress:l,contractName:f,tokenName:A}=g;m={data:{type:Ye.TOKEN_TRANSFER,data:{from:t,to:e,memo:r,contract:l,contractName:f,functionName:kr.TRANSFER,tokenName:A,amount:n}}}}return await c(5757,m)},tA=async({coin:o,fromAddress:t,toAddress:e,value:n,memo:r="",signInfo:a={}})=>{let c=await hx({coin:o,fromAddress:t,toAddress:e,value:n,memo:r,signInfo:a});return(await pu({coinId:o.coinId,fromAddress:t,value:n,inputData:c}))?.gasLimit||"0"};var _x=()=>{let o=(0,ir.useDispatch)(),t=_(),e=B(),n=(0,ir.useSelector)(wt),r=q(),a=(0,ei.usePrevious)(r),{coin:c,baseCoin:m}=S(),{signInfo:d,memo:g}=(0,ir.useSelector)(Cn),l=async()=>{try{o(R(!1));let A;c.baseCoinId!==0&&We(d)?(A=await gu({coinId:c.coinId,fromAddress:t,toAddress:e,value:r}),o(gs({name:"signInfo",value:A}))):A=d;let I=await tA({coin:c,baseCoin:m,fromAddress:t,toAddress:e,value:r,signInfo:A,memo:g});o(z(I))}catch{o(R(!0))}finally{o(co(!1))}},{run:f}=(0,ei.useDebounceFn)(l,{wait:500});(0,Sa.useEffect)(()=>{n&&(o(co(!0)),f())},[n]),(0,Sa.useEffect)(()=>{n&&r!==a||(o(co(!0)),f())},[r,e,n,g])},eA=_x;var yx=({children:o})=>(eA(),o),nA=yx;s();i();var rA=u(h());var Fx=()=>(to(),rA.default.createElement(X,null)),sA=Fx;s();i();var xa=u(h()),ri=u(E());J();s();i();var ni=u(E());var bx=()=>{let{coin:o,baseCoin:t}=S(),e=_(),n=(0,ni.useSelector)(ao),r=q(),a=(0,ni.useSelector)(ct),{memo:c}=(0,ni.useSelector)(Cn),m=at(),d=ko({fromAddr:e,localType:t.localType}),g=kt({coinAmount:r,coinId:o.coinId,fromAddr:e,toAddr:n,networkFee:a}),l=async()=>await m({coinId:o.coinId,address:e,fromAddr:e,toAddr:n,value:r}),f=y=>{let{nonce:k}=y;return{type:Ye.TRANSFER,data:{to:n,amount:r,nonce:k,fee:a,memo:c}}},A=y=>{let{nonce:k,contractAddress:v,contractName:N,tokenName:P}=y;return{type:Ye.TOKEN_TRANSFER,data:{from:e,to:n,amount:r,nonce:k,fee:a,memo:c,contract:v,contractName:N,functionName:kr.TRANSFER,tokenName:P}}};return fo(l,y=>o.baseCoinId===0?f(y):A(y),async y=>{let{data:k}=y,{nonce:v}=k,{txId:N,txSerializedHexString:P}=await d({params:y,needCapture:!0});return{txId:N,txSerializedHexString:P,nonce:v}},async({txId:y,txSerializedHexString:k,nonce:v})=>{let N={nonce:v},P=JSON.stringify(N);return await g(k,{txHash:y,memo:c,extJson:P})},y=>(io({tx_id:y}),y))},iA=bx;var aA=34,Ex=()=>{let o=(0,ri.useDispatch)(),{memo:t}=(0,ri.useSelector)(Cn),e=iA(),n=r=>{let a=r.target.value;new TextEncoder().encode(a).length<=aA&&o(gs({name:"memo",value:r.target.value}))};return eo(),xa.default.createElement(Q,{confirmButtonProps:{onSubmit:e},slot:{bottom:xa.default.createElement(Se,{value:t,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:aA}),onChange:n})}})},cA=Ex;var Px={match:o=>o===Ka,Container:nA,pages:{AddressPage:j,AmountPage:sA,ConfirmPage:cA}},mA=Px;s();i();Io();s();i();s();i();var ha=u(h()),si=u(E());zo();Do();var ii=u(K());var kx=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:n,feeInt:r,coin:a,isMax:c})=>{let m=(0,si.useDispatch)(),{signInfo:d}=(0,si.useSelector)(ms),g=(0,ii.usePrevious)(e),l=async()=>{let C=await Qe({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return m(qu({name:"signInfo",value:C})),C},f=async C=>{let x={type:"transfer",nonce:C?.info?.nonce,maxFee:r||"0",transferData:{contractAddress:C?.info?.contractAddress,from:o,to:t,amount:e}};return(await so().signTransaction(x,o,a.localType))?.signature},A=async C=>{let{data:x}=await Dr({coinId:a.coinId,address:o,inputData:C});if(x?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return x?.gasLimit},I=async()=>{try{let C;We(d)?C=await l():C=d;let x=await f(C),b=await A(x);m(z(b)),m(R(!1))}catch{m(R(!0))}finally{m(co(!1))}},{run:T}=(0,ii.useDebounceFn)(I,{wait:500});(0,ha.useEffect)(()=>{c&&(m(co(!0)),T())},[c,n]),(0,ha.useEffect)(()=>{c&&e!==g||(m(co(!0)),T())},[t,e,c])},uA=kx;var wx=({children:o})=>{let t=_(),e=B(),n=q(),r=sn(),a=$(),{coin:c}=S(),m=re();return uA({fromAddress:t,toAddress:e,amountInputValueInt:n,sendCoinBalanceInt:r,feeInt:a,coin:c,isMax:m}),o},dA=wx;s();i();var fA=u(h());var Nx=()=>(to(),fA.default.createElement(X,null)),lA=Nx;s();i();var gA=u(h()),AA=u(E());s();i();Do();var Bx=({coin:o,baseCoin:t,fromAddress:e,toAddress:n,amountInt:r,feeInt:a,nonce:c,contractAddress:m})=>{let d=No();return fo(async()=>{let I={type:"transfer",nonce:c,maxFee:a,transferData:{contractAddress:m,from:e,to:n,amount:r}},{txId:T,signature:C}=await so().signTransaction(I,e,t.localType);return{txId:T,signature:C}},async({txId:I,signature:T})=>{let C={serviceChargeCoinId:t.coinId,nonce:c},x=JSON.stringify(C),b={signedTx:T,coinAmount:r,coinId:o.coinId,fromAdr:e,toAdr:n,serviceCharge:a,txType:Fo.TRANS_OUT,txHash:I,extJson:x};return await d(b)},I=>(io({tx_id:I}),I))},pA=Bx;var vx=()=>{let o=_(),t=B(),e=uo(),n=$(),{coin:r,baseCoin:a}=S(),{signInfo:c}=(0,AA.useSelector)(ms),m=pA({coin:r,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:n,nonce:c?.info?.nonce,contractAddress:c?.info?.contractAddress});return eo(),gA.default.createElement(Q,{confirmButtonProps:{onSubmit:m}})},CA=vx;var Lx={match:o=>o===Ya,Container:dA,pages:{AddressPage:j,AmountPage:lA,ConfirmPage:CA}},TA=Lx;s();i();Io();s();i();var hA=u(h());s();i();var IA=u(E()),SA=u(K());s();i();Io();var Dx=()=>{let o=am(),t=mm(),e=cm();return async({coinId:r,from:a,to:c,amount:m,inputData:d,localType:g})=>{let l=[ke.SAFE_ADDRESS,ke.CONTRACT_ADDRESS];g===Ua&&l.push(ke.TRON_PERMISSTION);let f=await o({checkTypes:l,coinId:r,from:a,to:c,amount:m,txType:gc.TRANSFER,inputData:d||"0x"}),{result:A,msg:I}=f[ke.TRON_PERMISSTION]||{},T=f[ke.SAFE_ADDRESS],C={...T,...f[ke.CONTRACT_ADDRESS],tronPermission:{msg:I,wrongPermission:!A},address:c};return await e({...T,...T?.blackAddressWarning}),await t(C),C}},wn=Dx;var Mx=()=>{let o=(0,IA.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,SA.useBoolean)(!1),{coin:r}=S(),a=_(),c=B(),m=q(),{coinId:d,localType:g}=r,l=vt(),f=wn();return{onClick:async()=>{try{e();let I=await f({coinId:d,from:a,to:c,amount:m,inputData:"",localType:g}),{isDefraud:T,isSimilar:C,blackAddressWarning:x}=I;T?(o(ft(Jt.DEFRAUD)),o(zt(x))):C?(o(ft(Jt.SIMILAR)),o(zt(x))):o(ft("")),l()}catch(I){console.log(I)}finally{n()}},loading:t}},xA=Mx;var Ox=()=>{let{onClick:o,loading:t}=xA();return hA.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},_A=Ox;s();i();var bA=u(h());s();i();var Re=u(h()),ci=u(E()),mi=u(K());s();i();cT();function Rx({from:o,to:t,coin:e,error:n}){wa.captureEvent({tags:{address:o},message:"API_ERROR_build_sui_tx",contexts:{report:{info:JSON.stringify({from:o,coinId:e?.coinId,to:t})}},exception:{values:[{type:"API_ERROR_build_sui_tx",value:n?.message}]},level:"info"})}function Ux(){let{coin:o}=S(),t=_();return async({value:e,to:n,signInfo:r})=>{try{let{gasPrice:a,inputCoins:c=[],tokenInputCoins:m=[],budget:d}=r||{},g=c.map((A={})=>{let{digest:I,version:T,objectId:C}=A;return{digest:I,version:T,objectId:C}}),l=new lu;if(l.setGasPrice(a),l.setGasPayment(g||[]),l.setSender(t),d&&l.setGasBudget(d),o.baseCoinId===0){let A=l.splitCoins(l.gas,[e]);l.transferObjects([A],l.pure.address(n))}else if(m.length>1){let A=m.slice(1).map(C=>l.object(C.objectId)),I=l.object(m[0].objectId);l.mergeCoins(I,A);let T=l.splitCoins(I,[e]);l.transferObjects([T],l.pure.address(n))}else{let A=l.splitCoins(l.object(m[0].objectId),[e]);l.transferObjects([A],l.pure.address(n))}let f=fu(await l.build({client:nd}));return{tx:l,txBytes:f}}catch(a){throw Rx({from:t,to:n,coin:o,error:a}),a}}}var ai=Ux;s();i();function Wx(){let{coin:o}=S(),t=_(),e=o.coinId;return async({to:n,value:r})=>(await Qe({address:t,coinId:e},{fromAddr:t,toAddr:n,value:r})).info||{}}var yA=Wx;function FA(){let o=(0,ci.useDispatch)(),t=(0,ci.useSelector)(wt),{coin:e}=S(),n=_(),r=q(),a=B(),{coinId:c}=e,[m,d]=(0,Re.useState)(!1),g=(0,Re.useRef)(0),l=yA(),f=ai(),A=(0,mi.usePrevious)(r),{run:I}=(0,mi.useDebounceFn)(async()=>{g.current++;try{o(R(!1));let T={value:r,to:a},C=await l(T),b=(await f({...T,signInfo:C}))?.tx?.blockData?.gasConfig?.budget||"0";o(Vu(C)),o(z(b))}catch{o(R(!0))}finally{g.current--,g.current===0&&d(!1)}},{wait:300});return(0,Re.useEffect)(()=>{t&&(d(!0),I())},[t]),(0,Re.useEffect)(()=>{t&&r!==A||(d(!0),I())},[c,n,a,r,t]),m}function Gx(){let o=FA();return to(),bA.default.createElement(X,{confirmButtonProps:{loading:o}})}var EA=Gx;s();i();var kA=u(h()),ya=u(E());s();i();var _a=u(E());Io();var PA=()=>{let{coin:o}=S(),t=_(),e=uo(),n=(0,_a.useSelector)(ao),r=(0,_a.useSelector)(Pu),a=$(),c=ko({fromAddr:t,localType:Li}),m=kt({coinAmount:e,coinId:o.coinId,fromAddr:t,toAddr:n,localType:Li}),d=ai();return fo(async()=>await d({value:e,to:n,signInfo:{...r||{},budget:a}}),async({tx:T,txBytes:C})=>{let b=await c({params:{type:"raw",data:C}});return{tx:T,txBytes:C,signedTx:b}},async({tx:T,txBytes:C,signedTx:x}={})=>{let{signature:b,hash:y}=x||{};return await m({request_type:"WaitForEffectsCert",tx_bytes:C,signatures:[b]},{txHash:y,serviceCharge:T?.blockData?.gasConfig?.budget||"0"})},T=>(io({tx_id:T}),T))};function Hx(){let o=PA(),t=async()=>{await o()};eo();let e=(0,ya.useSelector)(me),n=(0,ya.useSelector)(Wr);return kA.default.createElement(Q,{tipMessageProps:{hidden:n,blockAddressInfo:e},confirmButtonProps:{onSubmit:t}})}var wA=Hx;var Vx={match:o=>o===qa,pages:{AddressPage:_A,AmountPage:EA,ConfirmPage:wA}},NA=Vx;s();i();Io();s();i();var DA=u(h());s();i();var BA=u(E()),vA=u(K());s();i();var li=u(h()),pi=u(E());s();i();var di=u(h()),ui=u(E());function qx({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=S(),n=B(),r=sn(),a=q(),c=(0,ui.useSelector)(dt),m=(0,ui.useSelector)(In),d=(0,ui.useSelector)(wt),g=!!c,{fromJettonAccount:l,nonce:f}=c||{},A=(0,di.useCallback)((I,T)=>{if(!g)return null;let C={to:n,seqno:f,decimal:e.decimals,amount:I,memo:m};return e.baseCoinId===0?C={...C,type:zi.TRANSFER,sendMode:T}:(C={...C,type:zi.JETTON_TRANSFER,fromJettonAccount:l,messageAttachedTons:o,invokeNotificationFee:t,sendMode:tn.PAY_GAS_SEPARATELY+tn.IGNORE_ERRORS},c.customPayload&&(C={...C,customPayload:c.customPayload,stateInit:c.stateInit})),C},[n,g,l,m,o,t]);return(0,di.useMemo)(()=>d?A(r,tn.CARRY_ALL_REMAINING_BALANCE):A(a,tn.PAY_GAS_SEPARATELY+tn.IGNORE_ERRORS),[d,r,a,A])}var fi=qx;function Kx({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=(0,pi.useDispatch)(),n=st(),r=_(),a=(0,pi.useSelector)(dt),{ttl:c}=a||{},m=fi({messageAttachedTons:o,invokeNotificationFee:t}),[d,g]=(0,li.useState)(null);return(0,li.useEffect)(()=>{(async()=>{if(!!m)try{m.expireAt=hs(c);let l=await rd({fromAddress:r,body:m,walletId:n});g(JSON.stringify(l))}catch{g(null),e(R(!0)),e(co(!1))}})()},[m,c]),d}var gi=Kx;var Jx=()=>{let o=(0,BA.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,vA.useBoolean)(!1),{coin:r}=S(),a=_(),c=B(),m=q(),d=gi(),{coinId:g,localType:l}=r,f=vt(),A=wn();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:l}),{isDefraud:C,isSimilar:x,blackAddressWarning:b}=T;C?(o(ft(Jt.DEFRAUD)),o(zt(b))):x?(o(ft(Jt.SIMILAR)),o(zt(b))):o(ft("")),f()}catch(T){console.log(T)}finally{n()}},loading:t}},LA=Jx;var Yx=()=>{let{onClick:o,loading:t}=LA();return DA.default.createElement(j,{confirmButtonProps:{onClick:o,loading:t}})},MA=Yx;s();i();var WA=u(h());s();i();var OA=u(h()),RA=u(E());lo();function Fa(){let{coin:o,baseCoin:t}=S(),e=(0,RA.useSelector)(dt),n=$(),r=e?.minTonLimit,a=mo(r||"0",n||"0"),c=cn();return(0,OA.useCallback)(()=>{if(o.baseCoinId!==0&&ot(a,c)){let m=_o(a,10**t.decimals);return{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:m}}}return null},[a,c,o.baseCoinId,t.decimals])}function zx(){let o=Fa();to([o])}var UA=zx;function Zx(){return UA(),WA.default.createElement(X,null)}var GA=Zx;s();i();var mr=u(h()),cr=u(E());s();i();var VA=u(h());var ar=u(E());J();var HA=250;function $x({error:o,onChange:t}){let e=(0,ar.useDispatch)(),n=(0,ar.useSelector)(dt),r=(0,ar.useSelector)(In),c=n?.checkMemo?F("wallet_extension_import_desc_comment_required"):F("wallet_extension_import_desc_comment_optional");return VA.default.createElement(Se,{value:r,placeholder:F("wallet_extension_ton_placeholder_comment_max_character2",{amount:HA}),dashed:!1,title:c,error:o,errorType:Kt.TIP_TYPE.always,maxLength:HA,onChange:m=>{let d=m.target.value;e(Ju(d)),t()}})}var qA=$x;s();i();var Ai=u(E());Do();yo();function Xx(){let o=Co(),t=vr(o),e=at(),{coin:n,baseCoin:r}=S(),a=_(),c=B(),m=(0,Ai.useSelector)(ct),d=(0,Ai.useSelector)(dt),g=(0,Ai.useSelector)(Nu),l=q(),f=fi({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:g?.invokeNotificationFee}),A=No();return fo(async()=>(await e({coinId:n.coinId,address:a,fromAddr:a,toAddr:c,value:"0"}))?.nonce,async y=>(f.seqno=y,f.expireAt=hs(d?.ttl),(await so().signTransaction(f,a,r.localType))?.boc),async y=>{let k=await So(r.localType,y),v={signedTx:y,coinId:n.coinId,coinAmount:l,fromAdr:a,toAdr:f.to,serviceCharge:m,txHash:k,extJson:JSON.stringify({nonce:f.seqno,isClaim:!!f.customPayload}),txSource:nt.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(v)},y=>(io({tx_id:y}),y))}var KA=Xx;s();i();var Ci=u(h());function jx(o){return(0,Ci.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:no.COMMON_ERROR}:null,[o])}function Qx(o){return(0,Ci.useCallback)(()=>o?{key:"wallet_extension_multisender_notice_failed_try_again",type:no.COMMON_ERROR}:null,[o])}function oh(){let o=Fa();return(0,Ci.useCallback)(()=>{let t=o();return t?{...t,highlight:no.FEE_BALANCE_INSUFFICIENT}:null},[o])}function th(o,t){let e=jx(o),n=Qx(t),r=oh();eo([n,e,r])}var JA=th;function eh(){let o=(0,cr.useSelector)(dt),t=o?.checkMemo,e=o?.getCustomPayloadInfoRpcError,n=(0,cr.useSelector)(In),r=(0,cr.useSelector)(Wr),[a,c]=(0,mr.useState)(!1),m=KA(),d=async()=>t&&(!n||n.trim()==="")?(c(!0),{pause:!0}):(await m(),null);JA(a,e);let g=(0,cr.useSelector)(me);return mr.default.createElement(Q,{tipMessageProps:{hidden:r,blockAddressInfo:g},slot:{bottom:mr.default.createElement(qA,{error:a,onChange:()=>{c(!1)}})},confirmButtonProps:{onSubmit:d}})}var YA=eh;s();i();s();i();var Ti=u(h());var zA=u(E());var Ii=u(K());lo();function nh(){let o=(0,zA.useDispatch)(),t=_(),{coin:e,baseCoin:n}=S(),r=(0,Ti.useRef)(null),a=(0,Ii.useDebounce)(gi(),{wait:500});(0,Ii.useMount)(()=>{o(co(!0))}),(0,Ti.useEffect)(()=>{let c=()=>{o(R(!0)),o(Yi(null)),o(z("0"))},m=async()=>{try{let{code:g,data:l}=await Dr({address:t,tokenAddress:e.address,chainId:n.chainId,coinId:n.coinId,value:"0",inputData:a});if(g!==0||!l||l?.queryGasLimitErrorUseDefault)c();else{o(R(!1)),o(Yi(l));let{invokeNotificationFee:f="0",gasLimit:A="0"}=l;o(z(e.baseCoinId===0?A:mo(A,f)))}}catch{c()}finally{o(co(!1))}};return(()=>{!a||(r.current=setInterval(m,7e3),m())})(),()=>{clearInterval(r.current)}},[a])}var ZA=nh;s();i();var $A=u(h()),XA=u(E()),jA=u(K());function rh(){let o=(0,XA.useDispatch)(),t=at(),e=sd(),{coin:n}=S(),r=_(),a=(0,jA.useDebounce)(B(),{wait:500}),{coinId:c,baseCoinId:m}=n;(0,$A.useEffect)(()=>{c&&r&&a&&(async()=>{try{let g=await t({coinId:c,address:r,fromAddr:r,toAddr:a,value:"0"}),l=await e(g,m);o(R(!l)),o(Ji(l))}catch{o(R(!0)),o(Ji(null)),o(co(!1))}})()},[a])}var QA=rh;function sh({children:o}){return QA(),ZA(),o}var oC=sh;var ih={match:o=>o===Xa,Container:oC,pages:{AddressPage:MA,AmountPage:GA,ConfirmPage:YA}},tC=ih;s();i();He();s();i();var dC=u(h());s();i();var eC=u(E()),nC=u(K());s();i();var xi=u(h()),Si=u(E());var ah=()=>{let o=(0,Si.useSelector)(ln),t=(0,Si.useSelector)(ao),e=q(),n=(0,Si.useSelector)(Rr),r=!t||!!n.key,[a,c]=(0,xi.useState)("");return(0,xi.useEffect)(()=>{(async()=>{if(!r)try{let d=await Br(t);c(o?dn(d,e):"")}catch(d){console.log(d)}})()},[o,r,t,e]),a},hi=ah;var ch=()=>{let o=(0,eC.useDispatch)(),[t,{setTrue:e,setFalse:n}]=(0,nC.useBoolean)(!1),{coin:r}=S(),a=_(),c=B(),m=q(),d=hi(),{coinId:g,localType:l}=r,f=vt(),A=wn();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:c,amount:m,inputData:d,localType:l}),{isDefraud:C,isSimilar:x,tronPermission:b,blackAddressWarning:y}=T;b&&b.wrongPermission?o(Du({wrongPermission:b.wrongPermission,msg:b.msg})):C?(o(ft(Jt.DEFRAUD)),o(zt(y))):x?(o(ft(Jt.SIMILAR)),o(zt(y))):o(ft("")),f()}catch(T){console.log(T)}finally{n()}},loading:t}},rC=ch;s();i();var sC=u(h()),iC=u(E());var aC=u(K());He();var mh=()=>{let[o,{setFalse:t}]=(0,aC.useBoolean)(!0),{coin:e}=S(),n=_(),r=(0,iC.useDispatch)(),{coinId:a}=e;return(0,sC.useEffect)(()=>{(async()=>{if(Number(a)!==Tr){let d=await Kc({coinId:a,address:n});r(vu(d))}t()})()},[a,n]),o},cC=mh;s();i();var mC=u(h());function uh(){let o=_();return(0,mC.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function dh(){return[uh()]}var uC=dh;var fh=()=>{let o=cC(),{onClick:t,loading:e}=rC(),n=uC();return dC.default.createElement(j,{addressProps:{errorFns:n},confirmButtonProps:{onClick:t,loading:e||o}})},fC=fh;s();i();var pC=u(h());s();i();var ba=u(h()),ur=u(E());var Nn=u(K());var lh=()=>{let[o,{setTrue:t,setFalse:e}]=(0,Nn.useBoolean)(!1),n=(0,ur.useDispatch)(),r=B(),a=(0,ur.useSelector)(ln),c=(0,ur.useSelector)(wt),m=q(),d=(0,Nn.usePrevious)(m),g=Oc(),{coin:l}=S(),f=hi(),{coinId:A}=l,I=async()=>{let C=a?"0":m,x={coinId:A,address:g},b={fromAddr:g,value:C,toAddr:r,inputData:f};try{let y=await Yc(x,b);n(z(y)),n(R(!1))}catch{n(R(!0))}finally{e()}},{run:T}=(0,Nn.useDebounceFn)(I,{wait:500});return(0,ba.useEffect)(()=>{c&&(t(),T())},[c]),(0,ba.useEffect)(()=>{c&&m!==d||(t(),T())},[m,f,c]),o},lC=lh;var ph=()=>{let o=lC();return to(),pC.default.createElement(X,{confirmButtonProps:{loading:o}})},gC=ph;s();i();var SC=u(h()),xC=u(E());s();i();var dr=u(E()),AC=u(dT());He();var gh=()=>{let o=No(),{coin:t}=S(),e=_(),n=(0,dr.useSelector)(ao),r=(0,dr.useSelector)(ct),a=(0,dr.useSelector)(ln),c=q(),m=(0,dr.useSelector)(bt),d=ko({fromAddr:e,localType:Di,walletId:m});return fo(async()=>{if(!await mn())throw new Error("mpc error")},async()=>{let T=a?"0":c,C=await Br(n),x=a?dn(C,c):"",b={coinId:t.coinId,address:e};return await Jc(b,{fromAddr:e,toAddr:n,value:T,inputData:x})},async(T={})=>{let{info:C={}}=T,{timestamp:x,expiration:b,ref_block_bytes:y,ref_block_hash:k,feelimit:v,contractAddress:N,asset:P}=C,w={fromAddress:e,toAddress:n,amount:c,timestamp:x,expiration:b,refBlockBytes:y,refBlockHash:k},O={};return t.baseCoinId===0?O={type:te.TRANSFER,data:w}:a?O={type:te.TOKEN_TRANSFER,data:{...w,feeLimit:v,contractAddress:N}}:O={type:te.ASSET_TRANSFER,data:{...w,assetName:(0,AC.bufferToHex)(p.Buffer.from(P))}},await d({params:O})},async T=>{let C=await So(Di,T),x={signedTx:T,coinAmount:c,coinId:t.coinId,fromAdr:e,toAdr:n,serviceCharge:r,txHash:C};return await o(x)},T=>(io({tx_id:T}),T))},CC=gh;s();i();var TC=u(h()),IC=u(E());function Ah(o,t){return(0,TC.useCallback)(()=>o?{text:t,type:no.COMMON_ERROR}:null,[o,t])}function Ea(){let o=Wm(),t=(0,IC.useSelector)(_u),e=Ah(t.wrongPermission,t.msg);eo({fns:[e,...o],override:!0})}function Ch(){let o=CC(),t=async()=>{await o()},e=(0,xC.useSelector)(me);return Ea(),SC.default.createElement(Q,{confirmButtonProps:{onSubmit:t},tipMessageProps:{blockAddressInfo:e}})}var hC=Ch;var Th={match:o=>o===Tr,pages:{AddressPage:fC,AmountPage:gC,ConfirmPage:hC}},_C=Th;s();i();Io();s();i();var bC=u(h());s();i();var yC=u(K());Ee();Pe();var Ih=()=>{let{baseCoin:o}=S();return(0,yC.useMemoizedFn)(async t=>{let e={account:t,coinId:o.coinId},n;try{n=await dc(Ho.queryAccountExist,e)}catch(r){console.log(r)}return n?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function Sh(){let o=Lt(),t=Ih();return[o,t]}var FC=Sh;var xh=()=>{let o=FC();return bC.default.createElement(j,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},EC=xh;s();i();var PC=u(h());function hh(){return to(),PC.default.createElement(X,null)}var kC=hh;s();i();var fr=u(h());J();s();i();var wC=u(E());Do();var _h=o=>{let{coin:t,baseCoin:e}=S(),n=_(),r=(0,wC.useSelector)(ao),a=uo(),c=No();return fo(async()=>await Qe({coinId:t.coinId,address:n},{fromAddr:n,toAddr:r}),async A=>{let{info:I}=A,{chainid:T,compression:C,refBlockNumber:x,refBlockId:b,refBlockTimestamp:y,expireSeconds:k,precision:v,symbol:N,contract:P}=I,w={type:0,from:n,to:r,amount:a,memo:o,precision:v,symbol:N,contract:P,common:{chainId:T,compression:C,refBlockNumber:x,refBlockId:b,refBlockTimestamp:y,expireSeconds:k}};return await so().signTransaction(w,n,e.localType)},async A=>{let I={memo:o},T=await So(t.localType,A),C={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:n,toAdr:r,serviceCharge:"0",extJson:JSON.stringify(I),txHash:T};return await c(C)},A=>(io({tx_id:A}),A))},NC=_h;var BC=256;function yh(){let[o,t]=(0,fr.useState)(""),e=NC(o),n=async()=>{await e()},r=a=>{let c=a.target.value;new TextEncoder().encode(c).length<=BC&&t(a.target.value)};return eo(),fr.default.createElement(Q,{slot:{bottom:fr.default.createElement(Se,{value:o,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:BC}),onChange:r})},confirmButtonProps:{onSubmit:n}})}var vC=yh;var Fh={match:o=>o===Ja,pages:{AddressPage:EC,AmountPage:kC,ConfirmPage:vC}},LC=Fh;s();i();s();i();var bi=u(h());s();i();var RC=u(h()),UC=u(K());var Fi=u(E());zo();s();i();var DC=u(Po());var MC=u(E());var OC=u(K());function bh(){let{coinId:o}=(0,DC.useParams)(),t=_(),e=(0,MC.useSelector)(ao);return(0,OC.useMemoizedFn)(async()=>(await je({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var _i=bh;s();i();lo();function Eh(){let o=jc();return(t,e,n)=>{let r=e||0,a=ot(n,0)?_o(r,n):"0",c=o[t];return oc(Wo(a,10**(c.decimals||0)),0)}}var yi=Eh;function Ph(){let o=(0,Fi.useDispatch)(),[t,e]=(0,RC.useState)(!1),n=(0,Fi.useSelector)(Am),r=_i(),a=Gm(),c=yi();return(0,UC.useMount)(()=>{e(!0),(async()=>{try{let g=(await r())?.info||{},l={};if(n!==-1)l=(g?.coinFeeList||[]).find(({coinId:A})=>A===n);else{let A=Oa(g?.coinFeeList||[],I=>a(I.coinId).currencyAmount||0);A&&(l=A.pop())}let f=c(l?.coinId,g?.methodFeeList?.transfer,l?.rate);o(ee(l?.coinId)),o(z(f)),o(Lu(g))}finally{e(!1)}})()}),t}var WC=Ph;function kh(){let o=WC();return to(),bi.default.createElement(X,{confirmButtonProps:{loading:o}})}function wh(){let{coin:o}=S();return bi.default.createElement(Bo,{fixed:!!o.vdecimalNum},bi.default.createElement(kh,null))}var GC=wh;s();i();var Ue=u(h());var JC=u(K());s();i();var HC=u(E());Do();yo();Io();function Nh(){let o=No(),{coin:t}=S(),e=_(),n=(0,HC.useSelector)(ao),r=$(),a=se(),c=uo(),m=_i(),{coin:d}=Mr(a,!1);return fo(m,async(f={})=>{let{info:A={}}=f,{chainId:I,accountId:T,nonce:C,tokenId:x,coinFeeList:b=[]}=A,y=b.find(({coinId:N})=>N===a)||{},k={type:te.TRANSFER,accountId:parseInt(T,10),nonce:C,from:e,chainId:I,to:n,tokenId:parseInt(x,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(y.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:r,amounts:c};return await so().signTransaction(k,e,Wa)},async f=>{let{signature:A,tx:I}=f||{},{txHash:T,...C}=I||{},x={txSource:nt.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:C}),fromAdr:e,coinAmount:c,coinId:t.coinId,toAdr:n,serviceCharge:f?.tx?.fee,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(x)})}var VC=Nh;s();i();var Uo=u(h()),qC=u(Ft());J();var Ei=u(K()),Pi=u(E());s();i();var Bn={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var Bh=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:n,setSupplyGas:r,...a})=>{let c=Yt(o),m=c?.coinAmountInt,d=M.gte(m,t);return Uo.default.createElement(Ui.Card,{hovered:d,onClick:()=>{d&&n?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},Uo.default.createElement(H.Space,{space:12,className:(0,qC.default)(Bn["select-networkFee-card-content"],{[Bn["select-networkFee-card-content-disable"]]:!d})},Uo.default.createElement(ze,{size:ze.SIZE.lg,src:c?.image,text:c?.text}),Uo.default.createElement(H.Space,{space:2,direction:H.DIRECTION.vertical,...a},Uo.default.createElement(Y.Text,{strong:!0},c?.symbol),Uo.default.createElement(Y.Text,{size:Y.SIZE.xs,type:Y.TYPE.secondary},d?F("developer_mode_send_text_balanceprice",{balance:be(m,{decimals:c?.decimals,useApproximate:!1})}):F("wallet_extension_placeorder_tooltips_insufficient",{token:c?.symbol})))),!d&&Uo.default.createElement(go,{category:go.CATEGORY.fill,type:go.TYPE.gray,size:go.SIZE.xxs,onClick:g=>{g?.stopPropagation(),r({supplyGasVisible:!0,supplyGasCoinId:o})}},F("extension_send_btn_fill_up_token",{token:c?.symbol})))},vh=({visible:o,onToggle:t})=>{let e=se(),n=(0,Pi.useDispatch)(),r=_(),a=st(),c=yi(),[{supplyGasVisible:m,supplyGasCoinId:d},g]=(0,Ei.useSetState)({supplyGasVisible:!1,supplyGasCoinId:null}),l=(0,Pi.useSelector)(yu),f=l?.coinFeeList||[],A=l?.methodFeeList?.transfer,I=(0,Ei.useCreation)(()=>f.map(({rate:x,coinId:b})=>{let y=c(b,A,x);return{coinId:b,feeCoinAmountInt:y}}),[f,A]),T=({coinId:x,feeCoinAmountInt:b})=>{t?.(),n(ee(x)),n(z(b))},C=({coinId:x,feeCoinAmountInt:b})=>Uo.default.createElement(Bh,{coinId:x,selectedCoinId:e,feeCoinAmountInt:b,onSelect:T,setSupplyGas:g});return o?Uo.default.createElement(H.Portal,{component:H.Container,className:Bn["select-networkFee"]},Uo.default.createElement(Wc,{onBack:t,onClose:t,title:F("wallet_transfer_subtitle_network_fee")}),Uo.default.createElement(H.Box,{className:Bn["select-networkFee-content"]},Uo.default.createElement(Y.Text,{className:Bn["select-networkFee-title"]},F("wallet_extension_send_alert_choose_token")),Uo.default.createElement(Ui,{space:16,dataSource:I,renderItem:C})),Uo.default.createElement(im,{walletId:a,address:r,visible:m,closeCallback:()=>{g({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},KC=vh;function Lh(){let[o,{toggle:t}]=(0,JC.useBoolean)(!1),e=VC(),n=async()=>{await e()};return eo(),Ue.default.createElement(Ue.default.Fragment,null,Ue.default.createElement(Q,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:n}}),Ue.default.createElement(KC,{visible:o,onToggle:t}))}function Dh(){let{coin:o}=S();return Ue.default.createElement(Bo,{fixed:!!o.vdecimalNum},Ue.default.createElement(Lh,null))}var YC=Dh;var Mh={match:o=>Fc(o),pages:{AddressPage:j,AmountPage:GC,ConfirmPage:YC}},zC=Mh;s();i();Io();s();i();var wi=u(h());s();i();var ZC=u(h()),$C=u(K());var ki=u(E());function Oh(){let o=(0,ki.useDispatch)(),{coin:t}=S(),e=_(),n=(0,ki.useSelector)(ao),r=Au(),[a,c]=(0,ZC.useState)(!1);return(0,$C.useMount)(()=>{c(!0),(async()=>{let d={coinId:t.coinId,address:e},g={fromAddr:e,toAddr:n,value:"0"};try{let l=await r("Transfer",d,g);if(l){let{info:f,feeCoin:A,fee:I}=l;o(Hu({info:f,feeCoin:A})),o(ee(A.coinId)),o(z(I)),o(R(!1))}}catch{o(R(!0))}finally{c(!1)}})()}),a}var XC=Oh;s();i();var jC=u(h());J();lo();function Pa(){let{coin:o}=S();return(0,jC.useCallback)(async t=>{let{ZksyncWallet:e}=await Un(),n=Wo(t,10**o.decimals),r=await e.getCloseAmounts(n);return Ir(r,n)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:M.showFloorTruncation(_o(r,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:no.COMMON_ERROR}},[])}function Rh(){let t=[Pa()];to(t)}var QC=Rh;function Uh(){let o=XC();return QC(),wi.default.createElement(X,{confirmButtonProps:{loading:o}})}function Wh(){let{coin:o}=S();return wi.default.createElement(Bo,{fixed:!!o.vdecimalNum},wi.default.createElement(Uh,null))}var oT=Wh;s();i();var Ni=u(h());s();i();var ka=u(E());Do();Io();yo();function Gh(){let o=No(),{coin:t}=S(),e=_(),n=(0,ka.useSelector)(ao),r=$(),a=se(),c=q(),m=(0,ka.useSelector)(Eu),d=async()=>{let{info:l,feeCoin:f}=m||{},{accountId:A,nonce:I}=l||{},T={type:te.TRANSFER,from:e,to:n,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:c,fees:r,decimals:t.decimals,nonce:parseInt(I,10)};return await so().signTransaction(T,e,Ga)},g=async l=>{if(l?.code)throw new Error($r);let{signature:f,tx:A}=l||{},{txHash:I,...T}=A||{},C={txSource:nt.NORMAL,signedTx:JSON.stringify({signature:f,tx:T}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:c,coinId:t.coinId,txHash:I,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(C)};return async()=>{let l=await d();return g(l)}}var tT=Gh;s();i();var eT=u(h());function Hh(){let o=Pa();return(0,eT.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:Be.AMOUNT}:null},[o])}function Vh(){let t=[Hh()];eo(t)}var nT=Vh;function qh(){let o=tT(),t=async()=>o();return nT(),Ni.default.createElement(Q,{confirmButtonProps:{onSubmit:t}})}function Kh(){let{coin:o}=S();return Ni.default.createElement(Bo,{fixed:!!o.vdecimalNum},Ni.default.createElement(qh,null))}var rT=Kh;var Jh={match:o=>o===Va,pages:{AddressPage:j,AmountPage:oT,ConfirmPage:rT}},sT=Jh;var Yh=[Ml,qf,Md,ml,pp,Yp,oA,_C,zC,sT,NA,mA,LC,TA,ep,ng,Fg,tC],iT=Yh;var zh=({coinId:o,protocolId:t,baseCoinId:e})=>{let n=iT.find(({match:d})=>d(e,o,t))||{},{Container:r=({children:d})=>At.default.createElement(At.default.Fragment,null,d)}=n,{AddressPage:a,AmountPage:c,ConfirmPage:m}=n.pages||{};return We(n)?null:At.default.createElement(r,null,At.default.createElement(ye.Switch,null,At.default.createElement(ye.Route,{exact:!0,path:`${qo}/:coinId?${wr}`,component:a}),At.default.createElement(ye.Route,{exact:!0,path:`${qo}/:coinId?${Ze}`,component:c}),At.default.createElement(ye.Route,{exact:!0,path:`${qo}/:coinId?${$e}`,component:m})),At.default.createElement(ad,null))},Zh=(0,At.memo)(zh),$h=()=>{let{coinId:o}=(0,ye.useParams)(),{coin:t,baseCoin:e}=Mr(o,!0);return At.default.createElement(Zh,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},M4=$h;export{M4 as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-Q5MXSUTB.js.map
