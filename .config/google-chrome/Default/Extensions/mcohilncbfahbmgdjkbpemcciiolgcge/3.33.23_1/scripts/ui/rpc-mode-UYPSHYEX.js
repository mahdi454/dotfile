import{a as vs,b as Ns,l as bs}from"./chunk-NGTX6EQI.js";import{a as Is,b as ks}from"./chunk-6AJA7UQY.js";import{a as uo,b as Oo,c as Lo,d as St,e as Dt,f as Cs,g as ys,h as Es}from"./chunk-4A36HNCI.js";import{a as Zn,b as vt,c as Rn,d as es,e as os,f as ts,i as rs,j as ns,k as ss,l as is,o as as}from"./chunk-SAKTBF4N.js";import{a as b,b as N,c as Ye,d as qn,e as Qn,f as Pe,g as Xn,h as Nt,i as jn,k as Jn}from"./chunk-5GDA7ZVW.js";import"./chunk-HOITYUNE.js";import"./chunk-3OHPQNDG.js";import{d as y,e as ye,f as Ae,g as po,h as Vn,i as $n,j as Yn,k as Kn,m as kt}from"./chunk-K6OKNCUH.js";import{a as zn}from"./chunk-BADUO7EG.js";import"./chunk-PQRUDR4H.js";import"./chunk-7LSY5Q3N.js";import{a as we}from"./chunk-KREYO6N2.js";import{a as Za}from"./chunk-R6PIYLXP.js";import{a as Wn}from"./chunk-BYVVOWXW.js";import"./chunk-SVM67SS3.js";import{a as Sn,b as Dn,c as Ln,e as Fn,f as Hn,g as Gn}from"./chunk-MU6M6MUS.js";import{a as Pn}from"./chunk-ZEQQZDJ3.js";import"./chunk-B3BQMW6E.js";import{a as On}from"./chunk-4BMEYGDL.js";import"./chunk-OWXOW5AO.js";import{a as Un}from"./chunk-TRT2IZSW.js";import"./chunk-OBYGSQTG.js";import"./chunk-MRKDLLZL.js";import"./chunk-YKMF3JI2.js";import"./chunk-454BIKTQ.js";import"./chunk-VUEUNEEZ.js";import"./chunk-XSCTBUWC.js";import"./chunk-2Y3EJIIA.js";import"./chunk-D3SXH5AP.js";import{b as Mn}from"./chunk-FLUKN5KJ.js";import{a as wn}from"./chunk-V2C2H4YP.js";import"./chunk-FDJ2AAAT.js";import"./chunk-CCXOIJJY.js";import{a as bn}from"./chunk-V2A2AEVZ.js";import"./chunk-5NP5YBP7.js";import"./chunk-XVRO6N6T.js";import"./chunk-NV3OX353.js";import"./chunk-3QYKNWJE.js";import{a as Cn,d as yn}from"./chunk-NJJL64HF.js";import"./chunk-CK5YETQI.js";import"./chunk-ZVUQCOMJ.js";import"./chunk-TSGQQ5QA.js";import"./chunk-KU3DITYD.js";import"./chunk-7CWLH6ZR.js";import{a as fr,b as En}from"./chunk-TN557PDS.js";import"./chunk-SYF5MRVO.js";import{a as vn}from"./chunk-UUX3UNZW.js";import"./chunk-QCTV4R7X.js";import{a as In,b as kn,d as Do,e as _r,g as Tr}from"./chunk-SIIB3XCZ.js";import"./chunk-GUGRL7WK.js";import"./chunk-6ZHQ2QLX.js";import{f as lo}from"./chunk-S4NIXE4H.js";import{q as ur}from"./chunk-UTVBVZWC.js";import"./chunk-GL4YYTXQ.js";import"./chunk-4MDR2IS2.js";import{a as xn}from"./chunk-GZN3TPOZ.js";import"./chunk-ZN3567SM.js";import"./chunk-SJCGLHGC.js";import"./chunk-GQYTOJVD.js";import"./chunk-7HZMPY3W.js";import{a as re}from"./chunk-QTEBOXIQ.js";import{a as Bn}from"./chunk-MRL6NMG2.js";import"./chunk-JYDP5F6R.js";import{a as Et,b as An}from"./chunk-KYH5PEB7.js";import"./chunk-SK33Q2T3.js";import"./chunk-BBVLJ4T3.js";import"./chunk-J27CLIC6.js";import"./chunk-RZP4RECK.js";import"./chunk-DQQKPXHV.js";import"./chunk-K4WB5MMU.js";import{a as Nn}from"./chunk-FWZNHZQB.js";import{b as co}from"./chunk-FXQ35K27.js";import"./chunk-FSQDFL3V.js";import"./chunk-YLJ56YQC.js";import"./chunk-YVC4CAU2.js";import"./chunk-K4MSA5MN.js";import{a as _n}from"./chunk-4HBLPFAF.js";import"./chunk-TJW4EUGS.js";import"./chunk-SJRV5U24.js";import"./chunk-PUMQ7BEU.js";import"./chunk-4OKCKO5L.js";import"./chunk-VAJR5FGA.js";import"./chunk-SKK4O3IC.js";import"./chunk-L4BR2EHM.js";import"./chunk-AQH6QKNE.js";import"./chunk-6IVHTBSR.js";import"./chunk-ZZ2GLIOF.js";import"./chunk-CJ24R5OH.js";import"./chunk-75OW6LUI.js";import"./chunk-W4IULSMQ.js";import"./chunk-UXRYSOKP.js";import"./chunk-ABSI53HE.js";import"./chunk-JJIQEHOY.js";import{d as Ka}from"./chunk-4FMCQNLT.js";import{a as Ha,c as go,d as ne,e as Bo,f as ws}from"./chunk-CE6MFPOV.js";import{b as j,c as Ee,d as bt,e as fo,f as ms,g as wt,h as ls,i as gr,j as _o,k as At,l as To,m as hr,n as cs,o as ps,p as ds,q as us,r as fs,s as _s,t as xr,u as Ts,v as gs,w as hs,y as xs,z as Pt}from"./chunk-VWSK5RHD.js";import"./chunk-E4XNFX7S.js";import"./chunk-6VTLAKSD.js";import{b as It}from"./chunk-L6WH2C7V.js";import"./chunk-ODKQ5CCQ.js";import"./chunk-6HACCOUO.js";import"./chunk-CIJPMHDN.js";import"./chunk-FAJ2Q5PZ.js";import{b as rn}from"./chunk-C77TCOTM.js";import"./chunk-EBBN5EW3.js";import"./chunk-KA5VAELR.js";import"./chunk-JOXGYPV7.js";import"./chunk-RUFGCIXT.js";import"./chunk-4BUFJ3ZT.js";import"./chunk-2IQIJXLO.js";import"./chunk-T37NLQBV.js";import"./chunk-U5WRMXFD.js";import"./chunk-JMTMYFWR.js";import"./chunk-RE5SSELD.js";import"./chunk-A3B5II6P.js";import{d as pr}from"./chunk-XVPROSYE.js";import"./chunk-E2MXYP3A.js";import"./chunk-FPV6XIHQ.js";import"./chunk-MZXFJMVC.js";import"./chunk-46PSZUMN.js";import"./chunk-MYY7DCIN.js";import"./chunk-AHIMORZ4.js";import"./chunk-M2ZE7N7H.js";import"./chunk-XZ6AHFH2.js";import"./chunk-3DEZPDXQ.js";import{d as yt,h as sn,k as an,l as mn,o as ue,p as A,q as ln,s as cn,u as pn,v as dn,w as un}from"./chunk-6UFIPREK.js";import"./chunk-G4OIO3Z6.js";import{a as D}from"./chunk-JEIYTQ5E.js";import"./chunk-TOO5SEJU.js";import{d as mo}from"./chunk-DUWPYFAS.js";import"./chunk-CA4PB6NG.js";import"./chunk-SCXRHDUG.js";import{G as Tn,T as gn,fa as hn}from"./chunk-5STCPPZU.js";import"./chunk-ZVXDJZSD.js";import{a as fn}from"./chunk-56SDY6L3.js";import{b as de}from"./chunk-PXWV5LKL.js";import"./chunk-M5PVKGM6.js";import"./chunk-AK34CZMZ.js";import{a as dr,i as Ct}from"./chunk-QHZHYX4V.js";import"./chunk-FLFVNMKM.js";import"./chunk-YJ2NGJXA.js";import"./chunk-TUUPYEC6.js";import"./chunk-DQ2UEFEE.js";import{a as z}from"./chunk-ZUBNNPBM.js";import"./chunk-2SHHGXPQ.js";import"./chunk-UK4SAM7E.js";import{a as be}from"./chunk-LXIBKSOK.js";import"./chunk-C53RLQYB.js";import"./chunk-72NGWMH2.js";import"./chunk-VRXSSD45.js";import{$a as tn,Aa as Tt,Ba as gt,Ca as ht,Da as ao,Ea as xt,Q as jr,R as Jr,T as Rr,_ as en,a as Q,i as Xr,ua as on,va as ut,wa as io,xa as pe,ya as ft,za as _t}from"./chunk-DUKP4BLI.js";import{b as dt}from"./chunk-S3O4LR55.js";import{m as no,q as Ce}from"./chunk-FZCNSMLW.js";import{f as ro}from"./chunk-WANYNTD6.js";import"./chunk-QMGTBJAL.js";import{o as X}from"./chunk-KCWFMCND.js";import{Da as pt,m as H,na as Zr,ra as qr,sa as Qr,w}from"./chunk-3TDWET6C.js";import{e as So,m as so}from"./chunk-EBR3PGFZ.js";import"./chunk-UDGUBKMO.js";import{a as G}from"./chunk-VPGNJAK6.js";import{a as Wa}from"./chunk-W6Q44ZHW.js";import{d as Kr,f as $a}from"./chunk-3HS6AHPS.js";import"./chunk-VGEPKX55.js";import{a as ae,b as nn}from"./chunk-JUXPONKW.js";import{e as Yr}from"./chunk-WSUAESF2.js";import{a as za}from"./chunk-O2FUKKO3.js";import"./chunk-GQJVAWGG.js";import"./chunk-WO5B666G.js";import"./chunk-GCXT25LW.js";import"./chunk-TW63K7CB.js";import{c as Po}from"./chunk-FDCWN4NG.js";import"./chunk-5YGMD6KK.js";import{Eb as $,Gb as Gr,Hb as ze,Jb as at,Kb as mt,Lb as Ve,Mb as Ao,Mc as Ya,Nb as oo,Sb as $e,Tb as ie,V as Hr,Ya as Ua,Yb as lt,dc as oe,gc as Wr,m as Ur,mc as Ga,y as Ma,zc as cr}from"./chunk-O3CM75EN.js";import"./chunk-ZGRAPBBU.js";import{A as xe,D as W,G as to,H as $r,b as zr,o as ct,q as S,y as Vr}from"./chunk-J3CEQI22.js";import{J as Br,K as it,f as Dr,la as Fr,pa as Re,r as Or,y as Lr}from"./chunk-VFHYER2K.js";import{L as v,e as eo,l as M,n as Mr,w as l}from"./chunk-KJIO572I.js";import"./chunk-HJXNXGYU.js";import"./chunk-77ECUYXV.js";import"./chunk-4BZBCAHV.js";import{T as F,Z as lr,c as te,ca as L}from"./chunk-KALFZBR5.js";import{a as Va}from"./chunk-V55FEIYE.js";import{a as _}from"./chunk-EAZTJZU7.js";import"./chunk-YTRW5WTJ.js";import"./chunk-3AN5FAZD.js";import"./chunk-CJ3MW6GG.js";import"./chunk-AKCHCVUS.js";import"./chunk-VOT7VHG3.js";import"./chunk-SYQUJKIR.js";import"./chunk-UYGNKZ5P.js";import"./chunk-KZFZROAL.js";import"./chunk-WPMHLM7C.js";import"./chunk-3MRE2BAK.js";import"./chunk-CSLLQXN7.js";import"./chunk-P7DU4NJA.js";import"./chunk-3COZNTED.js";import"./chunk-AGPXVFMO.js";import"./chunk-FGSHVA46.js";import"./chunk-FMFDUPSA.js";import"./chunk-GAJPJAPC.js";import"./chunk-KW7JYBDS.js";import"./chunk-224G4QSH.js";import{f as a,h as mr,m as n,o as s}from"./chunk-ZCHLW7CF.js";n();s();var tt=a(_()),La=a(w()),vo=a(G());n();s();var Z=a(_()),R=a(G());n();s();var k=a(_()),Mo=a(w()),Vs=a(G()),$s=a(Ka()),Ys=a(X());v();Ga();Ma();n();s();var me=a(_()),As=a(G()),Ps=a(te()),Ss=a(dr());v();n();s();var Fo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var qa=190,Ds=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,me.useMemo)(()=>e.length>=8&&o>qa,[e.length,o]),{paddingBottom:i,buttonPaddingBottom:m,absoluteBottom:c}=Mn({isButtonAbsolute:r,backupHeight:t});return me.default.createElement("div",{className:Fo.wrapper},me.default.createElement("div",{style:{paddingBottom:i}},me.default.createElement(pr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>me.default.createElement(pr.Coin,{name:p?.name,symbol:p?.symbol,to:`${ao}?${Ss.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),me.default.createElement("div",{className:`${r?Fo.showButton:""} ${Fo.button}`,style:{bottom:c,paddingBottom:m}},me.default.createElement(As.Link,{to:Tt},me.default.createElement(L,{circle:!0,type:L.TYPE.primary,category:L.CATEGORY.outline},me.default.createElement(F,{className:(0,Ps.default)("okx-wallet-plugin-edit-wallet",Fo.editIcon)}),l("developer_mode_home_maintitle_managecpt")))))};n();s();var Se=a(_()),Ls=a(w()),Bs=a(G()),Fs=a(dr());n();s();var Os=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Ms=()=>{let e=(0,Ls.useSelector)(pt),t=Et(),o=(0,Bs.useHistory)(),r=ue(),{extensionConfig:i}=D("rpc_info"),m=(0,Se.useMemo)(()=>r.filter(({balance:I})=>!!Number(I)),[r]),c=(0,Se.useCallback)(()=>{m.length===1?o.push(`${pe}?${Fs.default.stringify({address:m[0]?.address})}`):o.push(_t)},[m]),p=(0,Se.useCallback)(()=>{e?t():o.push(io)},[e]),d=()=>{o.push(ht)},f=(0,Se.useCallback)(()=>{i.faucetUrl&&globalThis.open(i.faucetUrl)},[i.faucetUrl]),{hasNewFeature:T}=Bn(),g=()=>{Tn({button_name:"more",site:""})},h=()=>{o.push(Xr)},x=(0,Se.useCallback)(I=>{switch(I.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":g();break;default:break}},[h,f,d,p,c]),E=(0,Se.useMemo)(()=>Os.map(I=>I.type==="FAUCET"?{...I,disabled:!i?.faucetUrl}:I.type==="MORE"?{...I,hasNewFeature:T}:I),[T,i]);return{clickHandle:x,iconOptions:E}};n();s();var Ot=a(_()),Cr=a(w()),Hs=a(G()),Gs=a(X());v();n();s();var Ja=a(_()),Ra=a(w());n();s();var Xa=a(_()),ja=a(te());var Us="SHOW-SWITCH";var Ws=()=>{let e=re(),t=(0,Hs.useHistory)(),o=ue(),{extensionConfig:r}=D("rpc_info"),i=de(),[m,c]=Ot.default.useState(!0),p=(0,Cr.useSelector)(pt),d=(0,Cr.useSelector)(Zr);(0,Gs.useMount)(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Mr.listen(Us,()=>{c(!0)}))});let f=(0,Ot.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:i,isNotBackupWallet:p,switchVisible:m}};n();s();var zs={wrapper:"_wrapper_11hdl_1"};var Ks=()=>{let e=(0,Vs.useHistory)(),t=Et(),o=(0,Mo.useDispatch)(),{rpcInfo:r,chainTokens:i,isNotBackupWallet:m,mainToken:c,ethereumAccount:p}=Ws(),d=Ct(),f=(0,k.useRef)(null),[T,g]=(0,k.useState)(0),[h,x]=(0,k.useState)(0),E=(0,k.useRef)(null),{unapprovedRequestCount:I,unapprovedTxCount:se,unapprovedPermissionsRequestId:q}=as(),V=Sn();(0,k.useEffect)(()=>{m&&I!==0?t({text:l("wallet_dapp_conncetion_alert_backup_wallet")},q):se>0?e.push(Rr):I>0&&e.push(jr)},[m,I]);let Ge=(0,Mo.useSelector)(qr);(0,k.useEffect)(()=>{(async()=>{I===0&&!Ge&&await o(rn())})()},[I]);let{isRpcMode:ee}=(0,Mo.useSelector)(mo);(0,k.useEffect)(()=>{ee||e.replace(Q)},[ee]);let rr=Wr()===Ur;(0,k.useEffect)(()=>{Ge&&rr&&globalThis.platform.openExtensionInPopup(ut)},[]);let No=no(c.balance),{clickHandle:We,iconOptions:nr}=Ms(),{isNeedShowDisconnectUpgrade:rt,setDisconnectUpgrade:je}=Pn(),sr=(0,k.useCallback)(()=>{rt&&(to.success({title:l("wallet_extension_card_subtitle_disconnect_update")}),je())},[rt,je]),[ir,bo]=(0,k.useState)(co.init),U=Un(),{run:ar}=(0,Ys.useDebounceFn)(()=>{x(E.current?.scrollTop||0)},{wait:50,maxWait:50}),wo=()=>{!r.rpcUrl||(bo(co.loading),Is(r.rpcUrl).then(()=>{console.log("rpc success"),bo(co.success)}).catch(()=>{console.log("rpc failed"),bo(co.failed)}))};(0,k.useEffect)(()=>{wo()},[r]),(0,k.useLayoutEffect)(()=>{f.current&&m&&g(f.current?.clientHeight||0)},[m]);let{walletId:nt}=d,{chainId:Je,symbol:st}=r;return(0,k.useEffect)(()=>{c?.balance&&Je&&gn({wallet_id:nt,main_coin_number_by_networks:[{chain_id:(0,$s.hexToDecimalString)(Je),main_token_symbol:st,main_token_amount:c?.balance}]})},[nt,c?.balance,Je,st]),k.default.createElement("div",{className:zs.wrapper,ref:E,onScroll:()=>{ar()}},k.default.createElement("div",null,k.default.createElement(Hn,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:H(p),address:p,chainName:r?.name}),k.default.createElement(Ln,{balance:No,symbol:c.symbol}),k.default.createElement(Fn,{clickHandle:We,iconOptions:nr}),k.default.createElement(Ds,{dataSource:i,scrollTop:h,backupHeight:m?T+24:0})),k.default.createElement(Dn,{disconnectCallback:sr}),k.default.createElement("div",{ref:f},k.default.createElement(An,{offsetBottom:24})),k.default.createElement(Gn,{showBackup:()=>{}}),k.default.createElement(ks,{visible:ir===co.failed,onRetry:wo,onChangeNet:()=>{e.push(`${Jr}?tab=${U?.networkType??"1"}`)}}),V&&k.default.createElement(On,{actionMap:{["RECOVER"]:()=>{e.push(`${tn}?action=${_n.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${en}?fromHome=1`)}}}))};n();s();var Rs=a(_());n();s();var Uo=a(_()),Zs=a(w()),Lt=a(X());Re();var qs=a(Ha());oe();var yr=class extends qs.default{constructor(){super();mr(this,"DROPPED_BUFFER_COUNT",3);mr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,i){let m=[o,...o.txPool],c=0,p;(await Promise.allSettled(m.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:g,transactionReceipt:h}=T;p={id:g,transactionReceipt:h}}}}),p?r(p,o.id):c===m.length&&i(o.id)}async checkOnePendingTx(o){let{id:r,txHash:i}=o;if(!i||o.status===b.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let m=await this.web3.eth.getTransactionReceipt(i);if(m?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:m}}catch(m){throw new Error(m)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&oo(ae(r.txParams.nonce),ae(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:i,txParams:{nonce:m,from:c}}=o,p=`${r}-${i}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if(it(d)||Ao(ae(m),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function Qs(){let e=yt(),t=Rn(),o=(0,Zs.useSelector)(It),r=(0,Lt.useLatest)(de()),i=(0,Lt.useLatest)(Pe()),m=(0,Lt.useLatest)(qn()),c=(0,Uo.useRef)(!1),p=(0,Uo.useRef)(new yr),d=async(g,h,x)=>{let E=await Zn({txId:g,replaceTxId:h,tx:x});t(E)},f=g=>{d(g,null,{status:b.DROPPED,finishTime:+new Date})},T=({id:g,transactionReceipt:h},x)=>{let E={blockNumber:h.blockNumber,gasUsed:h.gasUsed,finishTime:+new Date,extraParams:{contractAddress:h.contractAddress}};h.status?E.status=b.SUCCEED:E.status=b.FAILED,d(x,g,E)};(0,Uo.useEffect)(()=>{(async()=>{if(!(i.current.length===0||c.current)){c.current=!0;try{let h=await e();p.current.setWeb3(h),p.current.setConfirmedTxs(m.current);let x=null;try{x=await h.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(i.current.map(E=>x!==null&&Ao(ae(E.txParams.nonce),x)?null:p.current.checkPendingTx(E,T,f)))}finally{c.current=!1}}})()},[o,e])}n();s();Re();var ho=a(_()),Bt=a(w()),Xs=a(X()),js=a(Wa());var em=3*60*1e3,om={mainTokens:[],chainTokens:[]},Js=()=>{let e=(0,Bt.useDispatch)(),t=(0,ho.useRef)(null),o=cn(),r=(0,ho.useRef)(om),i=dn(),{isRpcMode:m}=(0,Bt.useSelector)(mo);(0,ho.useEffect)(()=>{let{chainId:d,chainTokens:f}=i,T=Lr(Fr(f,"address"),({address:g})=>g||"");r.current={chainId:d,tokenAddresses:T}},[i]);let c=()=>{clearInterval(t.current),t.current=null},p=async()=>{try{let{chainId:d,tokenAddresses:f}=r.current;f.length&&(await o(d,f))?.forEach(({price:g="0",address:h})=>{e(mn({chainId:d,address:h,price:g}))})}catch(d){js.default.debug(`fetch coin price failed 
${d}`)}};(0,Xs.useMount)(()=>{p()}),(0,ho.useEffect)(()=>(m?t.current=setInterval(()=>{p()},em):c(),()=>{c()}),[m])};var tm=()=>(Wn(),Cs(),Js(),Qs(),Es(),null),ei=(0,Rs.memo)(tm);n();s();var Ft=a(_()),oi=a(G());var rm=()=>{let e=(0,oi.useHistory)(),t=re(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:i}=D("rpc_info"),m=A(r),c=de(),p=`ethereum:${c}`;return Ft.default.createElement(xn,{navigator:{bordered:!1,onClose:o?()=>{e.push(Q)}:null,closeable:!0},content:{symbol:m?.symbol,coinLogo:m?.icon,chainName:i?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},ti=(0,Ft.memo)(rm);n();s();var _e=a(_());var Ti=a(X());var gi=a(w());n();s();var ri=a(_());var ni=a(G()),Ho=a(w());var nm=()=>{let e=(0,ni.useHistory)(),t=(0,Ho.useDispatch)(),r=re().get("showClose"),i=(0,Ho.useSelector)(At),m=(0,Ho.useSelector)(j),c=A(m),p=()=>{setTimeout(()=>{t(Pt())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(i||Q)}:null;return ri.default.createElement(z,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},si=nm;n();s();var Ke=a(_()),Go=a(w());v();function sm(){let e=(0,Go.useDispatch)(),t=(0,Go.useSelector)(Ee),o=(0,Go.useSelector)(bt),r=(0,Ke.useRef)(null),i=c=>{let{value:p}=c.target,d=null;p?p&&!lo(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(ds(p)),e(us(d))};(0,Ke.useLayoutEffect)(()=>{r.current.focus()},[]);let m=l("wallet_extension_transaction_placeholder_input_address");return Ke.default.createElement(we.Row,null,Ke.default.createElement(S.TextArea,{onRef:c=>{r.current=c},value:t,label:l("wallet_extension_transaction_input_label_to"),placeholder:m,size:S.SIZE.xl,autoResize:!0,errorType:S.TIP_TYPE.always,error:o&&l(o.key,o.args),onChange:i}))}var ii=sm;n();s();var fe=a(_()),De=a(w()),Ut=a(X());v();oe();n();s();var Mt={"max-button":"_max-button_zd8rw_1",maxButton:"_max-button_zd8rw_1",balance:"_balance_zd8rw_14","balance-wrap":"_balance-wrap_zd8rw_18",balanceWrap:"_balance-wrap_zd8rw_18"};function im(){let e=(0,De.useDispatch)(),t=(0,De.useSelector)(j),o=A(),r=A(t),i=o?.balance,m=Oo(),c=!t,{run:p,cancel:d}=(0,Ut.useThrottleFn)(f=>{let T=null,g=ze(i,m);at(g,0)?T={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:o?.symbol}}:Ve(f,c?g:r?.balance)&&(T={key:"wallet_transfer_errortip_insufficient_balance"}),e(_s(T))},{wait:100});return(0,Ut.useUnmount)(d),p}function am(){let e=(0,De.useDispatch)(),t=A(),o=(0,De.useSelector)(j),r=(0,De.useSelector)(fo),i=(0,De.useSelector)(wt),m=A(o),c=m?.balance,p=uo(c,{symbol:m?.symbol,decimals:m?.decimals}),d=im(),f=Oo(),T=(0,fe.useRef)(!!r),g=x=>{T.current=!0,e(fs(x))},h=()=>{if(o)g(c);else{let x=ze(c,f);g(mt(x,0)?"0":x)}};return(0,fe.useEffect)(()=>{T.current&&d(r)},[r,f,t?.balance]),fe.default.createElement(we.Row,null,fe.default.createElement(S.Number,{placeholder:M.showFloorTruncation(0,6,{needZero:!0}),title:l("wallet_extension_send_subtitle_amount"),size:S.SIZE.xl,enableMinus:!1,precision:m?.decimals,value:r,error:i&&l(i.key,i.args),errorType:S.TIP_TYPE.always,onChange:g,action:fe.default.createElement(Ce.Text,{size:Ce.SIZE.xs,type:Ce.TYPE.secondary,className:Mt["balance-wrap"],onClick:h},`${l("wallet_extension_send_text_balance")}:`,fe.default.createElement(Ce.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Mt.balance},p)),suffix:fe.default.createElement(Ce.Text,{className:Mt["max-button"],onClick:h},l("wallet_extension_send_text_max"))}))}var ai=am;n();s();var Oe=a(_()),ke=a(w()),mi=a(za());Re();v();oe();n();s();function mm(){let e=(0,ke.useDispatch)(),t=(0,ke.useSelector)(j),o=A(t),r=(0,ke.useSelector)(Ee),i=(0,ke.useSelector)(fo);(0,Oe.useEffect)(()=>{if(t&&lo(r)&&o?.decimals){let m=!i||Br(Number(i));e(xr(Nn(r,m?"0":(0,mi.addHexPrefix)(nn($(i,10**o?.decimals))))))}},[t,o?.decimals,r,i])}function lm(){let e=(0,ke.useDispatch)(),o=!(0,ke.useSelector)(j),r=(0,ke.useSelector)(ls);return mm(),o?Oe.default.createElement(we.Row,null,Oe.default.createElement(S,{title:Oe.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},l("developer_mode_send_maintitle_gasprice"),Oe.default.createElement(xe,{title:l("developer_mode_send_tooltip_additional_data"),placement:xe.DIRECTION.topRight},Oe.default.createElement(F,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:l("developer_mode_select_a_token_input_optional"),errorType:S.TIP_TYPE.always,size:S.SIZE.xl,value:r,onChange:i=>{e(xr(i.target.value))}})):null}var li=lm;n();s();var xo=a(_()),Wo=a(w()),ci=a(te());Re();v();oe();n();s();function cm(){let e=(0,Wo.useDispatch)(),t=(0,Wo.useSelector)(_o),o=(0,Wo.useSelector)(To),r=p=>{e(Ts(p))},i;t&&(Ve(t,o)?i=l("developer_mode_send_tooltip_higher",{num:o}):at(t,o)&&(i=l("developer_mode_send_tooltip_lower",{num:o})));let m=l("developer_mode_send_maintitle_nonce1"),c=`${it(o)?"":M.thousandFormat(o)}`;return xo.default.createElement(we.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},xo.default.createElement(S.Number,{innerClassName:(0,ci.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,precision:0,title:m,placeholder:c,size:S.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(Gr(o,1)),!1):!0,onSub:()=>!t&&Ve(o,0)?(r(ze(o-1)),!1):!0,onChange:r})),i&&xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},xo.default.createElement(F,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),i))}var pi=cm;n();s();var di=a(_()),ui=a(G());v();var zo=a(w());function pm(){let e=(0,zo.useSelector)(Ee),t=(0,zo.useSelector)(bt),o=(0,zo.useSelector)(wt);return!e||!!t||!!o}function dm({loading:e}){let t=(0,ui.useHistory)(),o=(0,zo.useSelector)(j),r=pm(),i=()=>{let m=ft;o&&(m+=`?address=${o}`),t.push(m)};return di.default.createElement(L,{category:L.CATEGORY.fill,type:L.TYPE.highlight,size:L.SIZE.lg,loading:e,block:!0,disabled:r,onClick:i},l("wallet_extension_send_btn_next"))}var fi=dm;n();s();var _i={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function um(){let e=(0,gi.useDispatch)(),t=re(),{chainGasLimitLoading:o}=St();return Dt(),(0,Ti.useMount)(()=>{e(ps(t.get("address")))}),_e.default.createElement(Po.Container,null,_e.default.createElement(si,null),_e.default.createElement(Po.Box,{className:_i["rpc-evm-send-edit__inner"]},_e.default.createElement(ii,null),_e.default.createElement(ai,null),_e.default.createElement(li,null),_e.default.createElement(pi,null)),_e.default.createElement(be.FooterActions,{usePortal:!0},_e.default.createElement(fi,{loading:o})))}var hi=um;n();s();var P=a(_()),O=a(w()),xi=a(G()),Ht=a(X());Re();v();Ua();function fm({requestNonce:e}){let t=(0,O.useDispatch)(),[o,r]=(0,P.useState)(!1),i=(0,O.useSelector)(_o),m=(0,O.useSelector)(To);return{loading:o,onChecker:(0,Ht.useMemoizedFn)(()=>{let c=[];return i===""&&m===null&&c.push(e().then(({suggestedNonce:p})=>{t(hs(p))})),c.length===0?Promise.resolve():(r(!0),Promise.all(c).finally(()=>{setTimeout(()=>{r(!1)})}))})}}function _m(){let e=(0,O.useSelector)(hr),t=(0,O.useSelector)(j),o=!t,r=de(),i=(0,O.useSelector)(Ee),m=(0,O.useSelector)(gr),c=(0,O.useSelector)(ms),p=(0,O.useSelector)(_o),d=(0,O.useSelector)(To),{extensionConfig:f}=D("rpc_info"),T={from:r,to:o?i:t,value:o?c:"0x0",data:m},[g,h]=rs(T),x=ns({data:T.data,type:g}),[E,I]=ss(T.to),se=no(x?.amount||0,{decimals:E?.decimals||6});return{txMeta:is({tx:T,customGasInfo:e,nonce:p||d,txData:x,tokenInfo:E,chain:f,approvedAmount:se,formattedAmount:se,txType:g}),loadingTxData:h||I}}var Tm=()=>{let e=(0,xi.useHistory)(),t=(0,O.useDispatch)(),o=(0,O.useSelector)(At),r=(0,O.useSelector)(j),i=A(r),m=A(),c=(0,O.useSelector)(fo),p=fn(),d=Ct(p),f=(0,O.useSelector)(Ee),T=Oo(),g=(0,O.useSelector)(_o),h=(0,O.useSelector)(To),x=(0,O.useSelector)(gr),{extensionConfig:E}=D("rpc_info"),I=es(),se=bn(p),[q,V]=(0,P.useState)(!1),[Ge,ee]=(0,P.useState)(!1),{request:rr}=Dt(),{chainGasLoading:No,chainGasLoadFailed:We,stopPollingGasPrice:nr,chainGasLimitLoadFailed:rt}=St(),je=(0,O.useSelector)(hr),sr=(0,O.useSelector)(cs),{loading:ir,onChecker:bo}=fm({requestNonce:rr}),{txMeta:U,loadingTxData:ar}=_m();(0,Ht.useMount)(()=>{if(!f){let ce=pe;r&&(ce+=`?address=${r}`),e.replace(ce)}});let wo=(0,P.useMemo)(()=>[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(U.type)?!1:U.type===N.TRANS_OUT?U.extraParams?.value:c,[c,U]),nt=(0,P.useMemo)(()=>U.type===N.TRANS_OUT?U.extraParams?.coinSymbol:[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(U.type)?l(Ye[U.type],{symbol:U.extraParams?.coinSymbol}):l(Ye[U.type]),[U]),Je=()=>{setTimeout(()=>{t(Pt())},200),e.push(o||Q)},st=ce=>{t(xs(ce)),V(!1)},Sr=async()=>{try{ee(!0),await bo(),await I(U,void 0,ce=>{let Fa=sn[d?.keyringIdentityType];hn({tx_source:"transfer",from_addr:ce?.txParams?.from,to_addr:f,main_token_symbol:E?.symbol,token_symbol:ce?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:ce?.txHash,wallet_type:Fa,chain_id:parseInt(E?.chainId,16)})}),Je()}catch(ce){Dr(ce)}finally{ee(!1)}},Ba=(0,P.useMemo)(()=>We?{type:Tr.TIP_TYPE.FEE_ERROR}:je?.baseFeePerGas==="0"?{type:zr.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,[We,je?.baseFeePerGas]);return P.default.createElement(Po.Container,null,P.default.createElement(z,{icon:U.type===N.TRANS_OUT&&{text:U.extraParams?.coinSymbol},title:nt,onClose:Je}),wo&&P.default.createElement(Do,null,P.default.createElement(kn,{summaryList:[{useMinPrecision:!1,coinAmount:wo,injectCoin:i,displayEstimate:!1}],title:l("wallet_extension_send_colored_send")})),P.default.createElement(Do,null,P.default.createElement(_r,{localType:Hr,title:l("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{se({trade:"send",all_confirmation:"wallet_used_address"})}}),P.default.createElement(_r,{address:f,title:l("extension_send_mid_text_to"),onCopyCallback:()=>{se({trade:"send",all_confirmation:"to_address"})}})),P.default.createElement(Do,null,P.default.createElement(vn,{onClick:()=>{V(!0)},injectCoin:m,estimateFailed:!!We,networkFee:No?void 0:M.mul(T,10**m?.decimals),loading:No})),P.default.createElement(Do,{bordered:!1},P.default.createElement(In,{title:l("developer_mode_send_maintitle_nonce1")},P.default.createElement(Ce.Text,{size:Ce.SIZE.sm},g||h)),!!x&&P.default.createElement(wn,{copyable:!0,defaultExpanded:!0,data:x})),P.default.createElement(be,{placeholder:!0,offsetBottom:0},P.default.createElement(Tr,{...Ba}),P.default.createElement(ur,{buttonGroup:[{disabled:!!We,onClick:Sr,actionType:ur.ACTION_TYPE.CONFIRM,loading:(ir||ar||Ge||No)&&!We}]})),q&&P.default.createElement(ys,{onBack:()=>V(!1),rpcInfo:E,chainGasInfo:sr,customGasInfo:je,stopPollingGasPrice:nr,updateCustomGasInfo:st,chainGasLimitLoadFailed:rt}))},Ci=Tm;n();s();var Fe=a(_());v();var $i=a(X()),Yi=a(w());n();s();var yi=a(_()),Gt=a(w());v();var Ei=a(X());function gm(){let e=(0,Gt.useDispatch)(),t=(0,Gt.useSelector)(ne),o=Pe(),r=[{text:l("wallet_extension_history_option_pending",{num:o.length}),value:go.PENDING},{text:l("wallet_extension_history_tab_completed"),value:go.COMPLETE}];return(0,Ei.useMount)(()=>{o.length===0&&e(Bo({status:go.COMPLETE}))}),yi.default.createElement(y.FilterTabs,{tabs:r,value:t.status,onSelect:i=>{e(Bo({status:i}))}})}var Ii=gm;n();s();var Vo=a(_()),zt=a(w()),ki=a(te());v();$a();n();s();var Wt={"retina-border-basic":"_retina-border-basic_2pibg_1",retinaBorderBasic:"_retina-border-basic_2pibg_1",root:"_root_2pibg_29",resetNonceIcon:"_resetNonceIcon_2pibg_99",disabledResetNonceIcon:"_disabledResetNonceIcon_2pibg_103"};function hm(){let e=(0,zt.useDispatch)(),t=(0,zt.useSelector)(ne),o=Pe(),r=()=>{o.length!==0&&ct.warn({alignBottom:!1,title:l("extension_wallet_advanced_title_clear_confirm"),text:l("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:l("wallet_extension_btn_general_cancel"),confirmText:l("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await Kr().rpcEvmClearPendingTransaction(),$r.success({title:l("extension_wallet_advanced_notification_cleared")})}})};return Vo.default.createElement("div",{className:Wt.root},Vo.default.createElement(y.DateRangeSelection,{dates:t.dates,onChange:(i,m)=>{e(Bo({dates:m}))}}),Vo.default.createElement(xe,{title:l("wallet_extension_settings_tooltips_reset_nonce"),placement:xe.DIRECTION.bottomRight},Vo.default.createElement(F,{className:(0,ki.default)("okx-wallet-plugin-brush-20",Wt.resetNonceIcon,{[Wt.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var vi=hm;n();s();var Be=a(_()),zi=a(w());n();s();n();s();var Qe=a(_());v();n();s();var Te=a(_());v();n();s();n();s();var $t=a(_());oe();n();s();oe();var Vt=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:i,type:m}=e.txParams,c={gasLimit:i};return m===so.FEE_MARKET?(c.maxFeePerGas=lt($(o,1.2),0),c.maxPriorityFeePerGas=lt($(r,1.2),0)):c.gasPrice=lt($(t,1.2),0),c};function xm({txId:e,onClose:t}){let o=Nt(e),r=os(),[i,m]=(0,$t.useState)(!1),c=Vt(o),p=async()=>{if(i)return;m(!0);let V=await vt(o.id);if(!V||V.status!==b.PENDING){m(!1),t();return}r(o,c).catch(Ge=>{console.log(Ge)}).finally(()=>{m(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:g}=o?.txParams||{},h="",x="";g===so.FEE_MARKET?(h=f,x=c.maxFeePerGas):(h=d,x=c.gasPrice);let E=Lo(ie($(h,T))),I=`=Gas Price(${$e(h)})`,se=Lo(ie($(x,c.gasLimit))),q=`=Gas Price(${$e(x)})`;return $t.default.createElement(y.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:i,onClose:t,oldGasFeeDisplay:E,oldGasDetailDisplay:I,newGasFeeDisplay:se,newGasDetailDisplay:q})}var $o=xm;n();s();var Yt=a(_());oe();function Cm({txId:e,onClose:t}){let o=Nt(e),r=ts(),i=A(),[m,c]=(0,Yt.useState)(!1),p=Vt(o),d=async()=>{if(m)return;if(c(!0),(await vt(o.id)).status!==b.PENDING){c(!1),t();return}r(o,p).catch(E=>{console.log(E)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===so.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let g=Lo(ie($(T,p.gasLimit))),h=`Gas Price (${$e(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return Yt.default.createElement(y.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:m,onClose:t,chainSymbol:i?.symbol,newGasFeeDisplay:g,newGasDetailDisplay:h})}var Yo=Cm;n();s();var ve=a(_());n();s();var Ze=a(_()),wi=a(w());v();n();s();var Ko=a(_());v();var Ni=({onClick:e,children:t})=>Ko.default.createElement(L,{className:"rpc-evm-tx-actions__button",category:L.CATEGORY.outline,type:L.TYPE.primary,size:L.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function ym({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:i}=e,m=i?l("wallet_extension_history_list_status_btn_speed_up_cancellation"):l("wallet_extension_history_list_status_btn_cancel_transaction");return r?Ko.default.createElement("div",{className:"rpc-evm-tx-actions"},Ko.default.createElement(Ni,{onClick:t},m),!i&&Ko.default.createElement(Ni,{onClick:o},l("wallet_extension_history_list_status_btn_speed_up"))):null}var bi=ym;n();s();v();Ya();oe();function Kt({type:e,extraParams:t}){let o=Ye[e],r,i=l(o);return e===N.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===N.AUTHORIZATION||e===N.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",i=l(o,{symbol:t?.coinSymbol})):e===N.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===N.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:i}}function Zt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=D("rpc_info");if(e===N.TRANS_OUT){let c=o?.value;return c&&(c=M.thousandFormat(c)),[{direction:cr.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:i}=t||{},m=ae(i);return Ve(m,0)?[{direction:cr.OUT,coinAmount:`${M.thousandFormat(ie(m))} ${r.symbol||""}`}]:[]}function qt(e){let t;return e.type===N.TRANS_OUT?t=`${l("wallet_extension_history_list_send_to")}   ${H(e.extraParams.toAddress)}`:e.type===N.AUTHORIZATION||e.type===N.CANCEL_AUTHORIZATION?t=H(e.extraParams?.approvedAddress):t=H(e.txParams.to),t}function Em({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",i="";return e?(r=So.PENDING,t?i=l("wallet_extension_send_status_speedingup"):o?i=l("wallet_extension_send_status_canceling"):i=l("wallet_extension_history_list_status_pending")):(r=So.WAITING,i=l("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:i}}function Im(e){let t=qt(e),o=(0,wi.useSelector)(ro),r=[t],i=eo(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(i),r}function km({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:i,title:m}=Kt(e),{labelType:c,labelText:p}=Em(e),d=Zt(e),f=Im(e),T=kt(f,d),g=Ze.default.createElement(y.Label,{className:"tx-history-ml4",type:c,text:p});return Ze.default.createElement(y.ItemContainer,{onClick:h=>{t&&t(e,h)}},Ze.default.createElement(y.Row,{assets:d,align:T},Ze.default.createElement(y.Info,{icons:i,title:m,label:g,details:f}),Ze.default.createElement(y.Assets,{assets:d})),Ze.default.createElement(bi,{tx:e,onCancel:o,onSpeed:r}))}var Zo=km;function vm({txs:e,onClick:t}){let[o,r]=(0,ve.useState)(null),[i,m]=(0,ve.useState)(null);return ve.default.createElement(ve.default.Fragment,null,e.map(c=>ve.default.createElement(Zo,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{m(c.id)}})),ve.default.createElement($o,{txId:o,onClose:()=>{r(null)}}),ve.default.createElement(Yo,{txId:i,onClose:()=>{m(null)}}))}var qo=vm;n();s();var qe=a(_());v();var Er=a(w());function Nm({txs:e,onClick:t}){let o=(0,Er.useSelector)(ro),{dates:r}=(0,Er.useSelector)(ne),i=(0,qe.useMemo)(()=>{let m=e.map(T=>({...T,groupDate:eo(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return m.forEach(T=>{let{groupDate:g}=T;d!==g&&(d=g,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return qe.default.createElement(y.List,null,i.map(({date:m,list:c},p)=>qe.default.createElement("div",{key:p},qe.default.createElement(y.Date,null,m),c.map(d=>qe.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var Qo=Nm;n();s();var Co=a(_());v();function bm({status:e}){let t="",o="";return(e===b.FAILED||e===b.DROPPED)&&(t=So.FAILED,o=l("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function wm(e){return[qt(e)]}function Am({tx:e,onClick:t}){let{icons:o,title:r}=Kt(e),i=Zt(e),m=wm(e),c=kt(m,i),{labelType:p,labelText:d}=bm(e),f=Co.default.createElement(y.Label,{className:"tx-history-ml4",type:p,text:d});return Co.default.createElement(y.ItemContainer,{onClick:T=>{t&&t(e,T)}},Co.default.createElement(y.Row,{assets:i,align:c},Co.default.createElement(y.Info,{icons:o,title:r,label:f,details:m}),Co.default.createElement(y.Assets,{assets:i})))}var Xo=Am;function Pm({tx:e}){let t=Jn(),{status:o,isShowPending:r,isCanceling:i}=e,[m,c]=(0,Te.useState)(!1),[p,d]=(0,Te.useState)(!1);return Te.default.createElement(Te.default.Fragment,null,(o===b.SUCCEED||o===b.FAILED)&&Te.default.createElement($n,{url:t(e.txHash),text:l("wallet_extension_mid_link_explorer")}),r&&o===b.PENDING&&Te.default.createElement(Yn,{isShowCancel:!i,isShowSpeedUp:!i,isShowSpeedupCancel:i,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&Te.default.createElement($o,{txId:e?.id,onClose:()=>{d(!1)}}),m&&Te.default.createElement(Yo,{txId:e?.id,onClose:()=>{c(!1)}}))}var Ai=Pm;n();s();var Le=a(_());v();n();s();var Ir=a(_()),kr=a(te());n();s();var Sm={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},Dm={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function Om({icon:e,className:t,text:o,size:r="normal",fontSize:i,theme:m,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,g;if(m){let I=Sm[m];f=I?.color,T=I?.background,g=I?.border}let h,x;if(typeof r=="string"){let I=Dm[r];h=I?.size,x=I?.fontSize}else h=r.size;let E={width:`${h}px`,height:`${h}px`};return e?Ir.default.createElement("img",{alt:"icon",src:e,style:E,className:(0,kr.default)("capitalize-letter",t)}):(E={...E,fontSize:`${i||x}px`,color:c||f,background:p||T,border:g},Ir.default.createElement("div",{style:E,className:(0,kr.default)("capitalize-letter",t)},d))}var Y=Om;oe();n();s();var J=a(_()),Qt=a(te()),Pi=a(Va());v();n();s();function Lm({className:e,label:t,children:o}){return J.default.createElement("div",{className:(0,Qt.default)("rpc-evm-coin-flow__label",e)},J.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),J.default.createElement("div",null,o))}function Bm({isNFT:e,icon:t,title:o,address:r}){let i=typeof t=="string"?J.default.createElement(En,{className:(0,Qt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return J.default.createElement("div",{className:"rpc-evm-coin-flow__record"},J.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},i),J.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},J.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&J.default.createElement(Ae,{className:"rpc-evm-coin-flow__record-address",label:H(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})))}function vr({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:i,label:m,...c}=r;return J.default.createElement(Lm,{...c,label:m,key:r},i.map((p,d)=>J.default.createElement(Bm,{...p,key:d})))};return J.default.createElement("div",{className:(0,Qt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var Si=vr;vr.propTypes={data:Pi.default.array};vr.defaultProps={data:[]};var{TRANS_OUT:Di,CONTRACT_CALL:Oi,AUTHORIZATION:Xt,CANCEL_AUTHORIZATION:jt,CONTRACT_DEPLOY:Li}=N,Fm={[Xt]:"wallet_extension_header_approval_title_approve",[jt]:"wallet_extension_header_approval_title_cancel_approval"},Mm={[Xt]:"wallet_extension_header_approval_title_for",[jt]:"wallet_extension_header_approval_title_for"},Um="/static/images/tx-history/default-protocol.svg";function Hm(e){let{type:t}=e,o=A("",!0);switch(t){case Di:{let{value:r,coinSymbol:i}=e.extraParams||{},m=`- ${M.thousandFormat(r)} ${i||l("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Le.default.createElement(Y,{icon:!i&&Yr,text:i,size:"large",theme:"black"}),title:Le.default.createElement(fr,{maxWidth:"284px",text:m})}]}}case Oi:{let{value:r}=e.txParams||{},i=ae(r);if(oo(i,0))return null;let m=`- ${uo(ie(i),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Le.default.createElement(Y,{text:o.symbol,size:"large",theme:"black"}),title:Le.default.createElement(fr,{text:m,maxWidth:"284px"})}]}}case Xt:case jt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:l(Fm[t]),items:[{icon:Le.default.createElement(Y,{text:r,size:"large",theme:"black"}),title:r}]}:null}case Li:default:return null}}function Gm(e){let{type:t,extraParams:o}=e;switch(t){case Xt:case jt:{let{approvedAddress:r}=o||{};return{label:l(Mm[t]),items:[{icon:Um,title:Le.default.createElement(Ae,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:H(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})}]}}case Di:case Oi:case Li:default:return null}}function Wm({tx:e}){let t=Hm(e),o=Gm(e);return Le.default.createElement(Si,{data:[t,o]})}var Bi=Wm;n();s();var C=a(_()),Nr=a(w()),Fi=a(te());v();oe();function zm({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let i,m="";return e===b.SUCCEED?(i=po.TxStatusInfoEnum.SUCCESS,m=l("wallet_extension_history_status_completed")):e===b.FAILED||e===b.DROPPED?(i=po.TxStatusInfoEnum.FAILED,m=l("wallet_extension_history_status_failed")):e===b.PENDING&&(r?(i=po.TxStatusInfoEnum.PENDING,t?m=l("wallet_extension_send_status_canceling"):o?m=l("wallet_extension_send_status_speedingup"):m=l("wallet_extension_history_list_status_pending")):(i=po.TxStatusInfoEnum.WAITING,m=l("wallet_extension_history_list_status_waiting"))),C.default.createElement(po,{label:l("wallet_extension_mid_text_status"),status:i,statusText:m})}function Vm({status:e,sendTime:t,finishTime:o}){let r=(0,Nr.useSelector)(ro);return C.default.createElement(ye,{label:l("wallet_extension_mid_text_time"),value:eo(e===b.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function $m({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==N.AUTHORIZATION?null:C.default.createElement(ye,{label:l("wallet_extension_mid_text_approved_amount"),value:o>=10**13?l("wallet_extension_mid_text_unlimited"):M.thousandFormat(o||"0")})}function Ym({status:e,blockNumber:t}){let o=(0,Nr.useSelector)(It),r=ze(o,t);return e===b.PENDING||e===b.DROPPED||mt(r,0)||Ao(r,14)?null:C.default.createElement(ye,{label:l("wallet_extension_mid_text_block_confirmation"),value:r})}function Km(){let{extensionConfig:e}=D("rpc_info");return C.default.createElement(ye,{label:l("wallet_extension_mid_text_network"),value:C.default.createElement(C.default.Fragment,null,C.default.createElement(Y,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Zm({txParams:e}){let{from:t}=e;return C.default.createElement(ye,{label:l("wallet_extension_mid_text_from"),value:C.default.createElement(Ae,{label:H(t),value:t,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function qm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:i,tokenAddress:m,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===N.TRANS_OUT)d=l("wallet_extension_mid_text_to"),f=i;else if(t===N.CONTRACT_DEPLOY)if(e===b.SUCCEED)d=l("developer_mode_history_subtitle_developer"),f=c;else return null;else d=l("wallet_extension_mid_text_interaction_address"),t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?f=m:f=p;return C.default.createElement(ye,{label:d,value:C.default.createElement(Ae,{label:H(f),value:f,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function Qm({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=D("rpc_info"),{gasLimit:i,maxFeePerGas:m,gasPrice:c}=o,p=Cn($,ie),d=c||m,f=uo(p(d,t||i),{symbol:r?.symbol,decimals:r?.decimals});return C.default.createElement(Vn,{label:l("wallet_extension_mid_text_network_fee"),value:f,tip:e===b.PENDING&&l("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:M.thousandFormat($e(d)),gasLimit:M.thousandFormat(i)})})}function Xm({txParams:e}){let{data:t}=e,[o,r]=(0,C.useState)(!1);return t?C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(i=>!i)}},l("developer_mode_history_title_transaction_data"),C.default.createElement(F,{className:(0,Fi.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function jm({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},C.default.createElement(zm,{...e}),C.default.createElement(Vm,{...e}),C.default.createElement($m,{...e}),C.default.createElement(Ym,{...e}),C.default.createElement(Km,{...e}),C.default.createElement(Zm,{...e}),C.default.createElement(qm,{...e}),C.default.createElement(Qm,{...e}),C.default.createElement(ye,{label:l("developer_mode_history_title_nonce"),value:ae(o)}),C.default.createElement(ye,{label:l("wallet_extension_mid_text_transaction_hash"),value:C.default.createElement(Ae,{label:H(t),value:t,message:l("wallet_extension_popup_title_transaction_hash_copied")})}),C.default.createElement(Xm,{...e}))}var Mi=jm;var Jm=e=>{if(!e)return null;let{type:t,extraParams:o}=e,r=Ye[t];return t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?l(r,{symbol:o?.coinSymbol||""}):l(r)};function Rm({txId:e,onBack:t}){let r=Xn().find(({id:m})=>m===e),i=Jm(r);return Qe.default.createElement(ct.Action,{isFull:!0,titleCenter:!0,title:i,visible:!!e,onClose:t},Qe.default.createElement(Kn,{message:r?.errorMessage}),!!r&&Qe.default.createElement("div",{className:"rpc-mode-tx-detail__content"},Qe.default.createElement(Bi,{tx:r}),Qe.default.createElement(Mi,{tx:r}),Qe.default.createElement(Ai,{tx:r})))}var jo=Rm;n();s();var br=a(_());function el({symbol:e}){return br.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},br.default.createElement(Y,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var wr=el;n();s();n();s();var Jt=a(_()),Ui=a(w());function ol({onClick:e}){let{dates:t}=(0,Ui.useSelector)(ne),o=Pe({dates:t});return o.length===0?Jt.default.createElement(y.Empty,{top:72}):Jt.default.createElement(y.ListContainer,{style:{paddingTop:"8px"}},Jt.default.createElement(qo,{txs:o,onClick:e}))}var Hi=ol;n();s();var yo=a(_());var Gi=a(w());function tl({onClick:e}){let{dates:t}=(0,Gi.useSelector)(ne),o=Qn({dates:t}),r=(0,yo.useMemo)(()=>o.map(i=>({...i,sortTime:i.finishTime,Comp:Xo})),[o]);return r.length===0?yo.default.createElement(y.Empty,{top:72}):yo.default.createElement(y.ListContainer,null,yo.default.createElement(Qo,{txs:r,onClick:e}))}var Wi=tl;function rl(){let e=(0,zi.useSelector)(ne),[t,o]=(0,Be.useState)(null),r=i=>{o(i.id)};return Be.default.createElement(Be.default.Fragment,null,e.status===go.PENDING?Be.default.createElement(Hi,{onClick:r}):Be.default.createElement(Wi,{onClick:r}),t&&Be.default.createElement(jo,{txId:t,onBack:()=>{o(null)}}))}var Vi=rl;n();s();function nl(){let e=(0,Yi.useDispatch)();return(0,$i.useUnmount)(()=>{e(ws())}),Fe.default.createElement(y.PageContainer,{className:"rpc-evm-tx-history"},Fe.default.createElement(be,{className:"rpc-evm-tx-history__top",offsetTop:0},Fe.default.createElement(z,{sticky:!1,title:l("wallet_extension_header_text_history")}),Fe.default.createElement(Ii,null),Fe.default.createElement(vi,null)),Fe.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Fe.default.createElement(Vi,null)))}var Ki=nl;n();s();var Io=a(_());n();s();var Eo=a(_()),Zi=a(G());v();n();s();function Me(){return re().get("address")}var sl=()=>{let e=(0,Zi.useHistory)(),t=Me(),o=A(t),r=()=>{e.push(Q)};return Eo.default.createElement(z,{title:Eo.default.createElement(wr,{symbol:o?.symbol}),onBack:r},t&&Eo.default.createElement(xe,{title:l("developer_mode_infor_tooltip_token_details"),placement:xe.DIRECTION.bottom},Eo.default.createElement(F,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${xt}?address=${t}`)}})))},qi=Eo.default.memo(sl);n();s();var ge=a(_());n();s();var Qi=a(_());function il({txs:e,onClick:t}){return e.length===0?null:Qi.default.createElement(qo,{txs:e,onClick:t})}var Xi=il;n();s();var Rt=a(_());function al({txs:e,onClick:t}){let o=(0,Rt.useMemo)(()=>e.map(r=>{let i,m;return r.status===b.PENDING?(i=r.sendTime,m=Zo):(i=r.finishTime,m=Xo),{...r,sortTime:i,Comp:m}}),[e]);return o.length===0?null:Rt.default.createElement(Qo,{txs:o,onClick:t})}var ji=al;function ml(){let e=Me(),t=jn({tokenAddress:e}),[o,r]=(0,ge.useState)(null),[i,m]=(0,ge.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?ge.default.createElement(y.Empty,null):ge.default.createElement("div",null,ge.default.createElement(Xi,{txs:i,onClick:c}),ge.default.createElement(ji,{txs:m,onClick:c}),ge.default.createElement(jo,{txId:o,onBack:()=>{r(null)}}))}var Ji=ml;n();s();var Ro=a(_()),ta=a(w());oe();n();s();var Jo=a(_()),Ri=a(w()),ea=a(G());v();oe();function ll(){let e=(0,ea.useHistory)(),t=(0,Ri.useDispatch)(),{extensionConfig:o}=D("rpc_info"),r=Me(),i=A(r),m=`${ao}?address=${r||""}`,c=!r&&o?.faucetUrl;return Jo.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},Jo.default.createElement(dt.IconButtonWithLabel,{disabled:oo(i?.balance,0),icon:"okx-wallet-plugin-up",text:l("wallet_home_btn_send"),onClick:()=>{t(gs(m));let p=`${pe}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),Jo.default.createElement(dt.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:l("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${io}?showClose=1${p}`)}}),c&&Jo.default.createElement(dt.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:l("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var oa=ll;function cl(){let e=Me(),t=A(e),o=t?.balance||0,{symbol:r,usdToThisRate:i}=(0,ta.useSelector)(Qr),m=$(t?.price,i);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:no(o),currencyAmountDisplay:yn({amount:o,rate:m,symbol:r},{useSign:!0,useFixed:!0})}}function pl(){let e=de(),{coinSymbol:t,coinAmountDisplay:o}=cl();return Ro.default.createElement(bs,null,Ro.default.createElement(Ns,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),Ro.default.createElement(vs,{address:e}),Ro.default.createElement(oa,null))}var ra=pl;n();s();function dl(){return Io.default.createElement("div",{className:"rpc-evm-coin-detail"},Io.default.createElement(qi,null),Io.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Io.default.createElement(ra,null),Io.default.createElement(Ji,null)))}var na=dl;n();s();var le=a(_()),da=a(dr());v();var ua=a(G());n();s();var aa=a(_()),ma=a(te());n();s();var ko=a(_()),sa=a(te());var ia=({token:e,className:t,children:o,onClick:r})=>ko.default.createElement("div",{onClick:r,className:(0,sa.default)("rc-mode__token",t)},ko.default.createElement(Y,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),ko.default.createElement("div",{className:"rc-mode__token__info"},ko.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),ko.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var la=({className:e,dataSource:t=[],renderItem:o,emptyText:r,component:i="div",...m})=>{let c=!t.length;return aa.default.createElement(i,{className:(0,ma.default)("rc-mode__tokens",e),...m},t.map(p=>o(p)),c&&r)};la.Item=ia;var Ue=la;n();s();var et=a(_()),ca=a(X());var pa=()=>{let e=ue(),[t,o]=et.default.useState(),r=(0,ca.useMemoizedFn)(({target:{value:c}})=>{o(c)},[]),i=(0,et.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,et.useMemo)(()=>t?i.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):i,[t,i]),{onChange:r,value:t,showSearch:!!i.length}]};n();s();var fa=()=>{let[e,{showSearch:t,...o}]=pa();return le.default.createElement("div",{className:"rc-mode-select__token"},le.default.createElement(z,{title:l("developer_mode_send_title_selecta_token")}),t&&le.default.createElement(S.Search,{placeholder:l("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),le.default.createElement(Ue,{dataSource:e,renderItem:r=>le.default.createElement(ua.Link,{to:`${pe}?${da.default.stringify({showClose:1,address:r?.address})}`},le.default.createElement(Ue.Item,{token:r},le.default.createElement("div",{className:"rc-mode-select__token__balance"},le.default.createElement("div",{className:"rc-mode-select__token__amount"},M.thousandFormat(r.balance||0))))),emptyText:le.default.createElement(Vr.State,{className:"rc-mode-select__token__empty",title:t?l("developer_mode_send_toast_addnewtoken",{crypto:le.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):l("developer_mode_send_toast_nonetoken")})}))};n();s();var Xe=a(_()),Ca=a(G()),ya=a(X());v();n();s();n();s();var er=a(_()),ul=({children:e})=>er.default.createElement("div",{className:"token-detail-container"},e),_a=(0,er.memo)(ul);n();s();var He=a(_()),fl=({image:e,symbol:t,name:o})=>He.default.createElement("div",{className:"token-detail-intro"},He.default.createElement("div",{className:"token-detail-intro__image"},e),He.default.createElement("div",{className:"token-detail-intro__desc"},He.default.createElement("div",{className:"token-detail-intro__symbol"},t),He.default.createElement("div",{className:"token-detail-intro__name"},o))),Ta=(0,He.memo)(fl);n();s();var he=a(_()),ga=a(te());var _l=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:i,copyNotificationDesc:m})=>{let c=(0,ga.default)("token-detail-row",e),[p,d]=zn();return he.default.createElement("div",{className:c},he.default.createElement("div",{className:"token-detail-row__title"},t),he.default.createElement("div",{className:"token-detail-row__content"},he.default.createElement("div",{className:"token-detail-row__text"},o),r&&he.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),to.success({title:i,desc:he.default.createElement("div",{className:"token-detail-row__copy-desc"},m)}))}},he.default.createElement(F,{className:"okx-wallet-plugin-copy"}))))},or=(0,he.memo)(_l);n();s();var ot=a(_()),ha=a(te());var Tl=({details:e})=>ot.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",i=(0,ha.default)(t?.className,r);return ot.default.createElement(or,{...t,className:i})})),xa=(0,ot.memo)(Tl);var tr={Container:_a,Intro:Ta,Row:or,Details:xa};n();s();function gl(){let e=(0,Ca.useHistory)(),o=re().get("address"),r=A(o,!0),{extensionConfig:i}=D("rpc_info"),m=[{title:l("developer_mode_infor_subtitle_contractadd"),text:H(o),copyText:o,copyNotificationTitle:l("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:l("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:l("developer_mode_infor_subtitle_network"),text:i.name}];return(0,ya.useMount)(()=>{o||e.replace(Q)}),Xe.default.createElement("div",{className:"rpc-evm-token-detail"},Xe.default.createElement(z,{title:l("developer_mode_infor_maintitle_tokendetails")}),Xe.default.createElement(tr.Container,null,Xe.default.createElement(tr.Intro,{image:Xe.default.createElement(Y,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Xe.default.createElement(tr.Details,{details:m})))}var Ea=gl;n();s();var K=a(_()),ba=a(G()),wa=a(te()),Ar=a(Za());v();n();s();var Ia=a(_()),ka=a(w()),va=a(X());var Na=()=>{let e=(0,ka.useDispatch)(),{extensionConfig:t}=D("rpc_info"),{chainId:o}=t,r=ue(!0,!0),i=(0,Ia.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),m=(0,va.useMemoizedFn)(({address:c,isDeleted:p})=>{e(an({chainId:o,address:c,isDeleted:!p}))},[o]);return[i,m]};n();s();var Aa=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=Na();return K.default.createElement("div",{className:"rpc-mode-manage-crypto"},K.default.createElement(z,{closeable:!1,title:l("developer_mode_home_maintitle_managecpt")}),K.default.createElement(ba.Link,{to:gt},K.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},K.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},l("developer_mode_manage_text_customcpt")),K.default.createElement(F,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_addedcpt")),K.default.createElement(Ue,{component:Ar.default,className:"rc-mode-home__tokens",dataSource:e,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:r=>{let i=!r.address;return K.default.createElement(Ue.Item,{token:r},K.default.createElement(F,{className:(0,wa.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":i}),onClick:()=>o(r)}))}}),!!t.length&&K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_adding")),K.default.createElement(Ue,{component:Ar.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:r=>K.default.createElement(Ue.Item,{token:r,key:r?.address},K.default.createElement(F,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};n();s();var B=a(_());v();n();s();var Ne=a(_()),Pa=a(G()),Pr=a(X());Re();v();var hl="0x",xl=()=>{let e=yt();return async t=>{try{return!lo(t)||await(await e()).eth.getCode(t)===hl}catch(o){return console.log(o),!0}}},Sa=()=>{let e=W.useForm(),t=(0,Pa.useHistory)(),[o,r]=Ne.default.useState(null),[i,m]=Ne.default.useState(!1),[c,p]=Ne.default.useState(!1),d=un(),f=ln(),T=pn(),g=xl(),h=ue(!0,!0),{extensionConfig:x}=D("rpc_info");Ne.default.useEffect(()=>{e?.setFieldsValue({network:x.name})},[x]);let E=(0,Pr.useMemoizedFn)(()=>{let{chainId:q}=x,V=e.getFieldsValue();d(q,V.address,V),T({chainId:q,address:V.address}),to.success({title:l("developer_mode_manage_toast_added")}),t.go(-1)},[x]),I=(0,Pr.useMemoizedFn)(Or(async()=>{r(null),p(null);let q=e.getFieldValue("address");if(e.cleanErrors(),!q)return!1;let V=h.find(ee=>ee.address===q);if(V&&!V.isDeleted)return e.setErrors({address:l("developer_mode_manage_errortip_duplicate_add")});if(m(!0),p(!1),await g(q))return m(!1),e.setErrors({address:l("developer_mode_manage_errortip_request_failed")});try{let ee=await f(q);r(ee),e.setFieldsValue(ee)}catch(ee){p(!0),e.setErrors({address:""}),console.log("error",ee)}finally{m(!1)}},250),[h]),se=(0,Ne.useMemo)(()=>c?Ne.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},l("developer_mode_manage_errortip_request_failed"),Ne.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:I},l("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:x,fetching:i,addressError:se,onConfirm:E,onAddressTrigger:I}};n();s();var Cl=11,Da=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:i,addressError:m,onAddressTrigger:c}=Sa();return B.default.createElement("div",{className:"rpc-mode-custom-crypto"},B.default.createElement(z,{title:l("developer_mode_manage_maintitle_customcpt")}),B.default.createElement(W,{form:e,size:W.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},B.default.createElement(W.Item,{name:"network",label:l("developer_mode_manage_title_network")},B.default.createElement(S,{size:W.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:B.default.createElement(Y,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),B.default.createElement(W.Item,{name:"address",label:l("developer_mode_manage_title_contractadd"),extra:m},B.default.createElement(S.TextArea,{autoResize:!0,size:W.SIZE.xl,onChange:c,errorType:S.TIP_TYPE.always,suffix:r&&B.default.createElement(lr.Circle,{size:lr.SIZE.sm})})),B.default.createElement(W.Item,{name:"symbol",hidden:!t,label:l("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>Cl?Promise.reject(l("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},B.default.createElement(S,{size:W.SIZE.xl})),B.default.createElement(W.Item,{hidden:!t,name:"decimals",label:l("developer_mode_manage_title_decimals")},B.default.createElement(S,{size:W.SIZE.xl,disabled:!0})),B.default.createElement(W.Item,{hidden:!0,name:"name"},B.default.createElement(S,{size:W.SIZE.xl})),B.default.createElement(W.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>B.default.createElement(be.FooterActions,{usePortal:!0,offsetBottom:0},B.default.createElement(L,{size:L.SIZE.lg,type:L.TYPE.highlight,category:L.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:i},l("developer_mode_manage_btn_confirm"))))))};var Oa=()=>Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(R.Switch,null,Z.default.createElement(R.Route,{path:ut,component:Ks,exact:!0}),Z.default.createElement(R.Route,{path:io,component:ti,exact:!0}),Z.default.createElement(R.Route,{path:pe,component:hi,exact:!0}),Z.default.createElement(R.Route,{path:ft,component:Ci,exact:!0}),Z.default.createElement(R.Route,{path:_t,component:fa,exact:!0}),Z.default.createElement(R.Route,{path:Tt,component:Aa,exact:!0}),Z.default.createElement(R.Route,{path:gt,component:Da,exact:!0}),Z.default.createElement(R.Route,{path:ht,component:Ki,exact:!0}),Z.default.createElement(R.Route,{path:ao,component:na,exact:!0}),Z.default.createElement(R.Route,{path:xt,component:Ea,exact:!0})),Z.default.createElement(ei,null));var bE=()=>{let e=(0,vo.useHistory)(),{isRpcMode:t}=(0,La.useSelector)(mo);return(0,tt.useEffect)(()=>{t||e.replace(Q)},[t]),tt.default.createElement(vo.Switch,null,tt.default.createElement(vo.Route,{path:on,component:Oa}))};export{bE as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-UYPSHYEX.js.map
