import{d as Jo}from"./chunk-6ZHQ2QLX.js";import{a as Ko}from"./chunk-S4NIXE4H.js";import{f as K,g as q}from"./chunk-GL4YYTXQ.js";import{a as j}from"./chunk-4MDR2IS2.js";import{a as Qo}from"./chunk-FSQDFL3V.js";import{E as Yo,N as jo,b as Ro,d as ko,e as vo,f as N,g as Po,h as wo,i as Mo,j as Oo,l as Uo,m as Vo,n as $o,o as Ho,p as Go,r as qo,s as J,u as zo,v as Wo,y as Zo}from"./chunk-JMTMYFWR.js";import{d as Lo}from"./chunk-RE5SSELD.js";import{f as No,g as Bo}from"./chunk-E2MXYP3A.js";import{g as Do}from"./chunk-FPV6XIHQ.js";import{a as bo}from"./chunk-PXWV5LKL.js";import{a as _o}from"./chunk-DQ2UEFEE.js";import{a as ho,f as G,ka as yo,la as To}from"./chunk-DUKP4BLI.js";import{l as Io}from"./chunk-FZCNSMLW.js";import{o as _}from"./chunk-KCWFMCND.js";import{sa as go,w as I}from"./chunk-3TDWET6C.js";import{da as C}from"./chunk-EBR3PGFZ.js";import{a as P}from"./chunk-VPGNJAK6.js";import{a as So}from"./chunk-GCXT25LW.js";import{Eb as F,Fb as po,Hb as H,Jb as Co,Kb as b,Lb as Y,Yb as Ao,Zb as Eo,bc as Fo,dc as x}from"./chunk-O3CM75EN.js";import{H as xo}from"./chunk-J3CEQI22.js";import{F as $,K as ao,pa as fo}from"./chunk-VFHYER2K.js";import{L as _e,w as lo}from"./chunk-KJIO572I.js";import{a as S}from"./chunk-EAZTJZU7.js";import{f as u,m as t,o as s}from"./chunk-ZCHLW7CF.js";t();s();var fe=u(I()),le=u(_());_e();t();s();fo();var me=u(P());t();s();var l=u(I());x();t();s();var z=u(S());x();var Ne=(0,z.createContext)({coinId:null,fromAddress:""});function Xo(){return(0,z.useContext)(Ne)}function oe(){let{coinId:o}=Xo();return o}function B(){let{fromAddress:o}=Xo();return o}function g(){return(o,e,r)=>{if(!o)return o;let n;return r?n=Eo(o,e.orderDecimalNum):n=Ao(o,e.orderDecimalNum),Fo(n)}}function ee(){return(o,e,r)=>{if(!o)return o;typeof r=="boolean"&&(r={isFee:r});let{isFee:n,useApproximate:i=!0,...a}=r||{};return Lo(o,{fixed:e.orderDecimalNum,isFixedUp:n,useApproximate:i,...a})}}var re=()=>(0,l.useSelector)(Ro),sr=()=>(0,l.useSelector)(N),E=()=>{let o=g(),e=(0,l.useSelector)(Mo),{coin:r}=m();return o(e,r,!1)},ne=()=>(0,l.useSelector)(Oo),ir=()=>{let o=E(),{coin:e}=m();return F(o,10**e.decimals)},Q=()=>(0,l.useSelector)(Go),X=()=>(0,l.useSelector)(Vo),oo=()=>{let o=g(),e=X(),r=A();return o(po(e,10**r.decimals),r,!0)},te=()=>(0,l.useSelector)(Ho),eo=()=>(0,l.useSelector)($o),se=()=>{let o=(0,l.useSelector)(go),e=(0,l.useSelector)(qo);return e===-1?o.currencyId:e},ie=()=>{let o=(0,l.useSelector)(Uo),{baseCoin:e}=m();return o===-1?e.coinId:o},ro=()=>(0,l.useSelector)(zo),ue=()=>(0,l.useSelector)(Wo);var no={vdecimalNum:0,decimals:0,symbol:""};function h(){let{coinId:o}=(0,me.useParams)(),e=oe();return Number(e)||Number(o)}var m=()=>{let o=h(),{coin:e,baseCoin:r}=j(o,!0),n=$(e)?no:e,i=$(r)?no:r;return{coin:n,baseCoin:i}},A=()=>{let o=ie(),{coin:e}=j(o,!1);return $(e)?no:e};t();s();var to=u(I()),ce=u(P());var ae=()=>{let o=(0,ce.useHistory)(),e=(0,to.useSelector)(wo),r=(0,to.useSelector)(N),{coin:n}=m();return async()=>{await Jo(n.localType,{name:e?.name,type:e?.type,address:r}),o.go(-3)}};var Be="DontShowError";function Rr(){let o=(0,fe.useSelector)(J),e=te(),r=eo(),{coin:n}=m();return(!!o.key||!!o.text)&&o.type!==C.COMMON_TIP||e||r||!n.coinId}function kr(o){let[e,{setTrue:r,setFalse:n}]=(0,le.useBoolean)(),i=ae();return{loading:e,onClick:async(...a)=>{r();try{if(!await Qo()){n();return}if(o){let p=await o(...a),{pause:d}=p||{};d||await i()}}catch(f){if(f?.message===So||f?.message===Be)n();else{let d=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||lo("wallet_home_toast_network_error");xo.error({title:d})}}n()}}}t();s();t();s();var w=u(_()),M=u(S());var L=Symbol("UNSET_INPUT");function Le(){let[o,e]=(0,M.useState)(L),r=(0,w.useLatest)(o);return(0,M.useEffect)(()=>{Zo(o!==L)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function De({domainInputValue:o,coinId:e},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:a}=Le(),f=(0,w.useLatest)(o),{run:p,cancel:d}=(0,w.useDebounceFn)(v=>{Do({coinId:e,domain:v}).then(({data:y})=>{v===f.current&&y?.address&&r({address:y?.address,domain:v})}).catch(y=>{console.log(y)}).finally(()=>{i.current===v&&a(L)})},{wait:800});return(0,M.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(a(o),p(o)):a(L),()=>{d&&d()}),[o,n]),{loading:i.current!==L,abort:()=>{d&&d(),a(L)}}}var Re=De;t();s();var pe=u(P());function ke(){let o=(0,pe.useHistory)(),e=re();return()=>{o.push(e||ho)}}var ve=ke;t();s();var Jr=()=>{let o=B(),{baseCoin:e}=m(),r=bo(e.localType);return e.localType?o||r:""};t();s();var O=u(I()),de=u(P()),Ce=u(_());function sn(){return(0,O.useSelector)(ko)}function un(){let o=(0,O.useSelector)(vo),e=(0,O.useSelector)(N),r=(0,O.useSelector)(Po);return!e||o||!!r.key}function mn(){let o=h(),e=(0,de.useHistory)(),r=B(),{amount:n}=_o(e?.location.search.slice(1));return(0,Ce.useMemoizedFn)(()=>{let i={pathname:`${G}/${o}${yo}`};r&&(i.search=`?from=${r}`),n&&(i.search=i.search?`${i.search}&amount=${n}`:`?amount=${n}`),e.push(i)})}t();s();t();s();var D=u(S());var Ae=u(_());function Pe(o,e){let[r,n]=(0,D.useState)(0),i=(0,D.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let a=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,D.useCallback)((p,d)=>{(async()=>{let y=++i.current;n(T=>T+1);try{let T={key:"",args:{}};for(let be of a){let co=await be(p);if(co){T=co;break}}y===i.current&&d(T)}finally{n(T=>T-1)}})()},a);return{isCheckingError:r>0,runErrorFns:f}}function pn(o,e,r){let n=E();(0,Ae.useDebounceEffect)(()=>{(async()=>{r||o(n,e)})()},[o,n,r],{wait:100})}var U=Pe;t();s();var so=u(_());function we(){return(0,so.useMemoizedFn)(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function Me(){let{baseCoin:o}=m();return(0,so.useMemoizedFn)(async e=>await Ko(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function xn(){let o=we(),e=Me();return[o,e]}t();s();var R=u(S()),xe=u(I());t();s();var Ee=u(S());x();var Oe=o=>{let e=No(o),r=Bo();return(0,Ee.useCallback)((n,i,a)=>{let{useApproximate:f=!0}=a||{},p=r?.[n]?.coinToUSDRate;return Io(F(i,F(p,e.usdToThisRate)),{useApproximate:f,symbol:e.symbol})},[r,e.symbol,e.usdToThisRate])},Fe=Oe;x();function Ue(){let{coin:o}=m(),e=W();return(0,R.useCallback)(()=>o.baseCoinId===0&&b(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT}:null,[e])}function io(){let o=mo();return(0,R.useCallback)(e=>Y(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:C.BALANCE_INSUFFICIENT}:null,[o])}function uo(){let o=se(),e=ee(),r=Fe(o),{coin:n}=m(),i=W();return(0,R.useCallback)(a=>{if(Y(a,i)){let f=r(n.coinId,i,{useApproximate:!1}),p=`${e(i,n,{useApproximate:!1})} ${n.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:f,cryptoamount:p},type:C.BALANCE_INSUFFICIENT}}return null},[i])}var wn=o=>{let e=(0,xe.useDispatch)(),r=Ue(),n=io(),i=uo(),a=[r,n,i],{runErrorFns:f}=U(a,o),p=Z();(0,R.useEffect)(()=>{f(p,d=>{e(Yo(d))})},[f,p])};t();s();var k=u(S()),Ie=u(I());x();t();s();var V={AMOUNT:"amount",FEE:"fee"};function Ve(){let o=A(),e=ge();return(0,k.useCallback)(()=>b(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:C.FEE_BALANCE_INSUFFICIENT,highlight:V.FEE}:null,[e,o.symbol])}function $e(){let o=io();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:V.AMOUNT}:null},[o])}function He(){let o=uo();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:V.AMOUNT}:null},[o])}function Ge(){let o=Ve(),e=$e(),r=He();return[o,e,r]}function jn(o){let e=(0,Ie.useDispatch)(),r=Ge(),{runErrorFns:n}=U(r,o),i=Z();(0,k.useEffect)(()=>{n(i,a=>{e(jo(a))})},[n,i])}t();s();var he=u(P()),ye=u(_());x();fo();function pt(){let o=ne(),e=E();return!!o.key&&o.type!==C.COMMON_TIP||ao(e)||e===""||b(e,0)}function dt(){let o=h(),e=(0,he.useHistory)(),r=B();return(0,ye.useMemoizedFn)(()=>{let n={pathname:`${G}/${o}${To}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();x();var Te=()=>{let o=h();return K(o)},yt=()=>{let o=g(),e=Te(),{coin:r}=m();return o(q(e,r.decimals),r,!1)},Se=()=>{let o=Te(),e=ro();return e===null?o:e},mo=()=>{let o=g(),e=Se(),{coin:r}=m();return o(q(e,r.decimals),r,!1)},qe=()=>{let{coin:o}=m(),e=A(),r=X(),n=Se();return o.coinId===e.coinId?H(n,r):n},W=()=>{let{coin:o}=m(),e=A(),r=oo(),n=mo();return o.coinId===e.coinId?H(n,r):n},Z=()=>{let o=Q(),e=W(),r=E();return o?Co(e,0)?"0":e:r},ze=()=>{let o=A();return K(o.coinId)},We=()=>{let{coin:o}=m(),e=A(),r=ze(),n=ue(),i=ro();return n!==null?n:o.coinId===e.coinId&&i!==null?i:r},Ze=()=>{let o=g(),e=We(),r=A();return o(q(e,r.decimals),r,!1)},ge=()=>{let o=Ze(),e=oo();return H(o,e)},Tt=()=>{let{coin:o}=m(),e=Q(),r=E(),n=qe();return e?n:F(r,10**o.decimals)};t();s();t();s();var Ye=u(I());export{Re as a,Ne as b,B as c,ee as d,h as e,m as f,A as g,sr as h,E as i,ne as j,ir as k,Q as l,X as m,oo as n,te as o,eo as p,se as q,ie as r,ro as s,ue as t,ve as u,Jr as v,ae as w,sn as x,un as y,mn as z,pn as A,U as B,we as C,Me as D,xn as E,Ue as F,io as G,wn as H,V as I,Ve as J,$e as K,Ge as L,jn as M,pt as N,dt as O,Te as P,yt as Q,Se as R,mo as S,W as T,ze as U,We as V,ge as W,Tt as X,Be as Y,Rr as Z,kr as _};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-GUGRL7WK.js.map
