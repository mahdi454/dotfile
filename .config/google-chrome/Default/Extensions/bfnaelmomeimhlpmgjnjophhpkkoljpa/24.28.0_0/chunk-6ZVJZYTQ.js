import{K as rB,a as G_,b as $_,c as Ti,d as un,e as oh,f as sh,g as bu,h as wY,i as cy,j as ah,k as ma,m as Y_,n as J_,o as Z_,r as xu,s as Q_}from"./chunk-DFKC7QAI.js";import{a as vu,m as Us}from"./chunk-56SJOU6P.js";import{Z as wu,a as uy,c as vE,l as xe,n as AE,o as pB,r as yB,x as uh}from"./chunk-CBSQD5B4.js";import{$ as SY,$a as jb,Aa as yl,Ba as aB,Fa as cB,Ga as uB,H as tB,Ha as ml,Ia as fB,Ja as fy,Ka as lB,La as ly,Ma as gl,Na as dB,Qa as lo,T as nB,U as iB,V as oB,W as sB,X as Wb,Y as wE,Z as vY,_ as AY,_a as hB,a as F_,aa as zb,b as V_,ba as fo,c as xY,d as q_,e as H_,h as W_,ia as Ae,j as qb,ka as Ct,l as z_,la as Se,n as j_,o as Hb,q as Ns,t as X_,ta as de,u as eB,v as pl,za as ch}from"./chunk-VNNHZNYI.js";import{a as O}from"./chunk-4P36KWOF.js";import{a as Kr}from"./chunk-7X4NV6OJ.js";import{c as L,d as xE,e as Sc,f as ee,h as p,i as T,j as K_,k as bY,l as Zr,m as Buffer,n as y}from"./chunk-3KENBVE7.js";var hy=L(hh=>{"use strict";p();y();var SE=K_(),lh=bY(),mB=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;hh.Buffer=ie;hh.SlowBuffer=_Y;hh.INSPECT_MAX_BYTES=50;var Gb=2147483647;hh.kMaxLength=Gb;ie.TYPED_ARRAY_SUPPORT=EY();!ie.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function EY(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(ie.prototype,"parent",{enumerable:!0,get:function(){if(ie.isBuffer(this))return this.buffer}});Object.defineProperty(ie.prototype,"offset",{enumerable:!0,get:function(){if(ie.isBuffer(this))return this.byteOffset}});function Ec(e){if(e>Gb)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,ie.prototype),t}function ie(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return TE(e)}return wB(e,t,r)}ie.poolSize=8192;function wB(e,t,r){if(typeof e=="string")return kY(e,t);if(ArrayBuffer.isView(e))return TY(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ga(e,ArrayBuffer)||e&&ga(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ga(e,SharedArrayBuffer)||e&&ga(e.buffer,SharedArrayBuffer)))return IE(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return ie.from(n,t,r);let i=PY(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return ie.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}ie.from=function(e,t,r){return wB(e,t,r)};Object.setPrototypeOf(ie.prototype,Uint8Array.prototype);Object.setPrototypeOf(ie,Uint8Array);function vB(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function IY(e,t,r){return vB(e),e<=0?Ec(e):t!==void 0?typeof r=="string"?Ec(e).fill(t,r):Ec(e).fill(t):Ec(e)}ie.alloc=function(e,t,r){return IY(e,t,r)};function TE(e){return vB(e),Ec(e<0?0:PE(e)|0)}ie.allocUnsafe=function(e){return TE(e)};ie.allocUnsafeSlow=function(e){return TE(e)};function kY(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!ie.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=AB(e,t)|0,n=Ec(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function EE(e){let t=e.length<0?0:PE(e.length)|0,r=Ec(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function TY(e){if(ga(e,Uint8Array)){let t=new Uint8Array(e);return IE(t.buffer,t.byteOffset,t.byteLength)}return EE(e)}function IE(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,ie.prototype),n}function PY(e){if(ie.isBuffer(e)){let t=PE(e.length)|0,r=Ec(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||BE(e.length)?Ec(0):EE(e);if(e.type==="Buffer"&&Array.isArray(e.data))return EE(e.data)}function PE(e){if(e>=Gb)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Gb.toString(16)+" bytes");return e|0}function _Y(e){return+e!=e&&(e=0),ie.alloc(+e)}ie.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==ie.prototype};ie.compare=function(t,r){if(ga(t,Uint8Array)&&(t=ie.from(t,t.offset,t.byteLength)),ga(r,Uint8Array)&&(r=ie.from(r,r.offset,r.byteLength)),!ie.isBuffer(t)||!ie.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0};ie.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};ie.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ie.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=ie.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){let s=t[n];if(ga(s,Uint8Array))o+s.length>i.length?(ie.isBuffer(s)||(s=ie.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(ie.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function AB(e,t){if(ie.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ga(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return kE(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return CB(e).length;default:if(i)return n?-1:kE(e).length;t=(""+t).toLowerCase(),i=!0}}ie.byteLength=AB;function BY(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return FY(this,t,r);case"utf8":case"utf-8":return EB(this,t,r);case"ascii":return LY(this,t,r);case"latin1":case"binary":return KY(this,t,r);case"base64":return UY(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return VY(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}ie.prototype._isBuffer=!0;function bl(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}ie.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)bl(this,r,r+1);return this};ie.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)bl(this,r,r+3),bl(this,r+1,r+2);return this};ie.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)bl(this,r,r+7),bl(this,r+1,r+6),bl(this,r+2,r+5),bl(this,r+3,r+4);return this};ie.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?EB(this,0,t):BY.apply(this,arguments)};ie.prototype.toLocaleString=ie.prototype.toString;ie.prototype.equals=function(t){if(!ie.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:ie.compare(this,t)===0};ie.prototype.inspect=function(){let t="",r=hh.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};mB&&(ie.prototype[mB]=ie.prototype.inspect);ie.prototype.compare=function(t,r,n,i,o){if(ga(t,Uint8Array)&&(t=ie.from(t,t.offset,t.byteLength)),!ie.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;let s=o-i,a=n-r,c=Math.min(s,a),u=this.slice(i,o),h=t.slice(r,n);for(let l=0;l<c;++l)if(u[l]!==h[l]){s=u[l],a=h[l];break}return s<a?-1:a<s?1:0};function SB(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,BE(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=ie.from(t,n)),ie.isBuffer(t))return t.length===0?-1:gB(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):gB(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function gB(e,t,r,n,i){let o=1,s=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,r/=2}function c(h,l){return o===1?h[l]:h.readUInt16BE(l*o)}let u;if(i){let h=-1;for(u=r;u<s;u++)if(c(e,u)===c(t,h===-1?0:u-h)){if(h===-1&&(h=u),u-h+1===a)return h*o}else h!==-1&&(u-=u-h),h=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){let h=!0;for(let l=0;l<a;l++)if(c(e,u+l)!==c(t,l)){h=!1;break}if(h)return u}return-1}ie.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};ie.prototype.indexOf=function(t,r,n){return SB(this,t,r,n,!0)};ie.prototype.lastIndexOf=function(t,r,n){return SB(this,t,r,n,!1)};function CY(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=t.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(t.substr(s*2,2),16);if(BE(a))return s;e[r+s]=a}return s}function MY(e,t,r,n){return $b(kE(t,e.length-r),e,r,n)}function RY(e,t,r,n){return $b(zY(t),e,r,n)}function OY(e,t,r,n){return $b(CB(t),e,r,n)}function NY(e,t,r,n){return $b(jY(t,e.length-r),e,r,n)}ie.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return CY(this,t,r,n);case"utf8":case"utf-8":return MY(this,t,r,n);case"ascii":case"latin1":case"binary":return RY(this,t,r,n);case"base64":return OY(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return NY(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function UY(e,t,r){return t===0&&r===e.length?SE.fromByteArray(e):SE.fromByteArray(e.slice(t,r))}function EB(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let c,u,h,l;switch(a){case 1:o<128&&(s=o);break;case 2:c=e[i+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=e[i+1],u=e[i+2],(c&192)===128&&(u&192)===128&&(l=(o&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=e[i+1],u=e[i+2],h=e[i+3],(c&192)===128&&(u&192)===128&&(h&192)===128&&(l=(o&15)<<18|(c&63)<<12|(u&63)<<6|h&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return DY(n)}var bB=4096;function DY(e){let t=e.length;if(t<=bB)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=bB));return r}function LY(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function KY(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function FY(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=GY[e[o]];return i}function VY(e,t,r){let n=e.slice(t,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}ie.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,ie.prototype),i};function kn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}ie.prototype.readUintLE=ie.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||kn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return i};ie.prototype.readUintBE=ie.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||kn(t,r,this.length);let i=this[t+--r],o=1;for(;r>0&&(o*=256);)i+=this[t+--r]*o;return i};ie.prototype.readUint8=ie.prototype.readUInt8=function(t,r){return t=t>>>0,r||kn(t,1,this.length),this[t]};ie.prototype.readUint16LE=ie.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||kn(t,2,this.length),this[t]|this[t+1]<<8};ie.prototype.readUint16BE=ie.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||kn(t,2,this.length),this[t]<<8|this[t+1]};ie.prototype.readUint32LE=ie.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||kn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};ie.prototype.readUint32BE=ie.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||kn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};ie.prototype.readBigUInt64LE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});ie.prototype.readBigUInt64BE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});ie.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||kn(t,r,this.length);let i=this[t],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[t+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};ie.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||kn(t,r,this.length);let i=r,o=1,s=this[t+--i];for(;i>0&&(o*=256);)s+=this[t+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};ie.prototype.readInt8=function(t,r){return t=t>>>0,r||kn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};ie.prototype.readInt16LE=function(t,r){t=t>>>0,r||kn(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};ie.prototype.readInt16BE=function(t,r){t=t>>>0,r||kn(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};ie.prototype.readInt32LE=function(t,r){return t=t>>>0,r||kn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};ie.prototype.readInt32BE=function(t,r){return t=t>>>0,r||kn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};ie.prototype.readBigInt64LE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});ie.prototype.readBigInt64BE=Au(function(t){t=t>>>0,dh(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&dy(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});ie.prototype.readFloatLE=function(t,r){return t=t>>>0,r||kn(t,4,this.length),lh.read(this,t,!0,23,4)};ie.prototype.readFloatBE=function(t,r){return t=t>>>0,r||kn(t,4,this.length),lh.read(this,t,!1,23,4)};ie.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||kn(t,8,this.length),lh.read(this,t,!0,52,8)};ie.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||kn(t,8,this.length),lh.read(this,t,!1,52,8)};function Gi(e,t,r,n,i,o){if(!ie.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}ie.prototype.writeUintLE=ie.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Gi(this,t,r,n,a,0)}let o=1,s=0;for(this[r]=t&255;++s<n&&(o*=256);)this[r+s]=t/o&255;return r+n};ie.prototype.writeUintBE=ie.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Gi(this,t,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=t&255;--o>=0&&(s*=256);)this[r+o]=t/s&255;return r+n};ie.prototype.writeUint8=ie.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,1,255,0),this[r]=t&255,r+1};ie.prototype.writeUint16LE=ie.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};ie.prototype.writeUint16BE=ie.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};ie.prototype.writeUint32LE=ie.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};ie.prototype.writeUint32BE=ie.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function IB(e,t,r,n,i){BB(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,r}function kB(e,t,r,n,i){BB(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o=o>>8,e[r+6]=o,o=o>>8,e[r+5]=o,o=o>>8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s=s>>8,e[r+2]=s,s=s>>8,e[r+1]=s,s=s>>8,e[r]=s,r+8}ie.prototype.writeBigUInt64LE=Au(function(t,r=0){return IB(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ie.prototype.writeBigUInt64BE=Au(function(t,r=0){return kB(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});ie.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Gi(this,t,r,n,c-1,-c)}let o=0,s=1,a=0;for(this[r]=t&255;++o<n&&(s*=256);)t<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ie.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Gi(this,t,r,n,c-1,-c)}let o=n-1,s=1,a=0;for(this[r+o]=t&255;--o>=0&&(s*=256);)t<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(t/s>>0)-a&255;return r+n};ie.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};ie.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};ie.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};ie.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};ie.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Gi(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};ie.prototype.writeBigInt64LE=Au(function(t,r=0){return IB(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});ie.prototype.writeBigInt64BE=Au(function(t,r=0){return kB(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function TB(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function PB(e,t,r,n,i){return t=+t,r=r>>>0,i||TB(e,t,r,4,34028234663852886e22,-34028234663852886e22),lh.write(e,t,r,n,23,4),r+4}ie.prototype.writeFloatLE=function(t,r,n){return PB(this,t,r,!0,n)};ie.prototype.writeFloatBE=function(t,r,n){return PB(this,t,r,!1,n)};function _B(e,t,r,n,i){return t=+t,r=r>>>0,i||TB(e,t,r,8,17976931348623157e292,-17976931348623157e292),lh.write(e,t,r,n,52,8),r+8}ie.prototype.writeDoubleLE=function(t,r,n){return _B(this,t,r,!0,n)};ie.prototype.writeDoubleBE=function(t,r,n){return _B(this,t,r,!1,n)};ie.prototype.copy=function(t,r,n,i){if(!ie.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let o=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),o};ie.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!ie.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let s=t.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{let s=ie.isBuffer(t)?t:ie.from(t,i),a=s.length;if(a===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var fh={};function _E(e,t,r){fh[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}_E("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);_E("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);_E("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=xB(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=xB(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function xB(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function qY(e,t,r){dh(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&dy(t,e.length-(r+1))}function BB(e,t,r,n,i,o){if(e>r||e<t){let s=typeof t=="bigint"?"n":"",a;throw o>3?t===0||t===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${t}${s} and <= ${r}${s}`,new fh.ERR_OUT_OF_RANGE("value",a,e)}qY(n,i,o)}function dh(e,t){if(typeof e!="number")throw new fh.ERR_INVALID_ARG_TYPE(t,"number",e)}function dy(e,t,r){throw Math.floor(e)!==e?(dh(e,r),new fh.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new fh.ERR_BUFFER_OUT_OF_BOUNDS:new fh.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var HY=/[^+/0-9A-Za-z-_]/g;function WY(e){if(e=e.split("=")[0],e=e.trim().replace(HY,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function kE(e,t){t=t||1/0;let r,n=e.length,i=null,o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function zY(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function jY(e,t){let r,n,i,o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function CB(e){return SE.toByteArray(WY(e))}function $b(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function ga(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function BE(e){return e!==e}var GY=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Au(e){return typeof BigInt>"u"?$Y:e}function $Y(){throw new Error("BigInt not supported")}});var Jb=L(Pi=>{"use strict";p();y();Object.defineProperty(Pi,"__esModule",{value:!0});Pi.output=Pi.exists=Pi.hash=Pi.bytes=Pi.bool=Pi.number=void 0;function Yb(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Pi.number=Yb;function MB(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Pi.bool=MB;function CE(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Pi.bytes=CE;function RB(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Yb(e.outputLen),Yb(e.blockLen)}Pi.hash=RB;function OB(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Pi.exists=OB;function NB(e,t){CE(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Pi.output=NB;var YY={number:Yb,bool:MB,bytes:CE,hash:RB,exists:OB,output:NB};Pi.default=YY});var UB=L(Zb=>{"use strict";p();y();Object.defineProperty(Zb,"__esModule",{value:!0});Zb.crypto=void 0;Zb.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var Su=L(yt=>{"use strict";p();y();Object.defineProperty(yt,"__esModule",{value:!0});yt.randomBytes=yt.wrapConstructorWithOpts=yt.wrapConstructor=yt.checkOpts=yt.Hash=yt.concatBytes=yt.toBytes=yt.utf8ToBytes=yt.asyncLoop=yt.nextTick=yt.hexToBytes=yt.bytesToHex=yt.isLE=yt.rotr=yt.createView=yt.u32=yt.u8=void 0;var Qb=UB(),JY=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);yt.u8=JY;var ZY=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));yt.u32=ZY;var QY=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);yt.createView=QY;var XY=(e,t)=>e<<32-t|e>>>t;yt.rotr=XY;yt.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yt.isLE)throw new Error("Non little-endian hardware is not supported");var eJ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tJ(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=eJ[e[r]];return t}yt.bytesToHex=tJ;function rJ(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}yt.hexToBytes=rJ;var nJ=async()=>{};yt.nextTick=nJ;async function iJ(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,yt.nextTick)(),n+=o)}}yt.asyncLoop=iJ;function DB(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}yt.utf8ToBytes=DB;function RE(e){if(typeof e=="string"&&(e=DB(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}yt.toBytes=RE;function oJ(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}yt.concatBytes=oJ;var ME=class{clone(){return this._cloneInto()}};yt.Hash=ME;var sJ=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function aJ(e,t){if(t!==void 0&&(typeof t!="object"||!sJ(t)))throw new TypeError("Options should be object or undefined");return Object.assign(e,t)}yt.checkOpts=aJ;function cJ(e){let t=n=>e().update(RE(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}yt.wrapConstructor=cJ;function uJ(e){let t=(n,i)=>e(i).update(RE(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}yt.wrapConstructorWithOpts=uJ;function fJ(e=32){if(Qb.crypto.web)return Qb.crypto.web.getRandomValues(new Uint8Array(e));if(Qb.crypto.node)return new Uint8Array(Qb.crypto.node.randomBytes(e).buffer);throw new Error("The environment doesn't have randomBytes function")}yt.randomBytes=fJ});var yy=L(Xb=>{"use strict";p();y();Object.defineProperty(Xb,"__esModule",{value:!0});Xb.SHA2=void 0;var OE=Jb(),py=Su();function lJ(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var NE=class extends py.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,py.createView)(this.buffer)}update(t){OE.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,py.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,py.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){OE.default.exists(this),OE.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;lJ(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,py.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};Xb.SHA2=NE});var LE=L(Ko=>{"use strict";p();y();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.add=Ko.toBig=Ko.split=Ko.fromBig=void 0;var ex=BigInt(2**32-1),UE=BigInt(32);function DE(e,t=!1){return t?{h:Number(e&ex),l:Number(e>>UE&ex)}:{h:Number(e>>UE&ex)|0,l:Number(e&ex)|0}}Ko.fromBig=DE;function LB(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=DE(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}Ko.split=LB;var dJ=(e,t)=>BigInt(e>>>0)<<UE|BigInt(t>>>0);Ko.toBig=dJ;var hJ=(e,t,r)=>e>>>r,pJ=(e,t,r)=>e<<32-r|t>>>r,yJ=(e,t,r)=>e>>>r|t<<32-r,mJ=(e,t,r)=>e<<32-r|t>>>r,gJ=(e,t,r)=>e<<64-r|t>>>r-32,bJ=(e,t,r)=>e>>>r-32|t<<64-r,xJ=(e,t)=>t,wJ=(e,t)=>e,vJ=(e,t,r)=>e<<r|t>>>32-r,AJ=(e,t,r)=>t<<r|e>>>32-r,SJ=(e,t,r)=>t<<r-32|e>>>64-r,EJ=(e,t,r)=>e<<r-32|t>>>64-r;function KB(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}Ko.add=KB;var IJ=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),kJ=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,TJ=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),PJ=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,_J=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),BJ=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,CJ={fromBig:DE,split:LB,toBig:Ko.toBig,shrSH:hJ,shrSL:pJ,rotrSH:yJ,rotrSL:mJ,rotrBH:gJ,rotrBL:bJ,rotr32H:xJ,rotr32L:wJ,rotlSH:vJ,rotlSL:AJ,rotlBH:SJ,rotlBL:EJ,add:KB,add3L:IJ,add3H:kJ,add4L:TJ,add4H:PJ,add5H:BJ,add5L:_J};Ko.default=CJ});var FB=L(Fo=>{"use strict";p();y();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.sha384=Fo.sha512_256=Fo.sha512_224=Fo.sha512=Fo.SHA512=void 0;var MJ=yy(),lt=LE(),tx=Su(),[RJ,OJ]=lt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Eu=new Uint32Array(80),Iu=new Uint32Array(80),xl=class extends MJ.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:g,Gh:x,Gl:A,Hh:E,Hl:C}=this;return[t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C]}set(t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=x|0,this.Gl=A|0,this.Hh=E|0,this.Hl=C|0}process(t,r){for(let R=0;R<16;R++,r+=4)Eu[R]=t.getUint32(r),Iu[R]=t.getUint32(r+=4);for(let R=16;R<80;R++){let V=Eu[R-15]|0,q=Iu[R-15]|0,W=lt.default.rotrSH(V,q,1)^lt.default.rotrSH(V,q,8)^lt.default.shrSH(V,q,7),G=lt.default.rotrSL(V,q,1)^lt.default.rotrSL(V,q,8)^lt.default.shrSL(V,q,7),z=Eu[R-2]|0,te=Iu[R-2]|0,_=lt.default.rotrSH(z,te,19)^lt.default.rotrBH(z,te,61)^lt.default.shrSH(z,te,6),f=lt.default.rotrSL(z,te,19)^lt.default.rotrBL(z,te,61)^lt.default.shrSL(z,te,6),m=lt.default.add4L(G,f,Iu[R-7],Iu[R-16]),b=lt.default.add4H(m,W,_,Eu[R-7],Eu[R-16]);Eu[R]=b|0,Iu[R]=m|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:g,Fh:x,Fl:A,Gh:E,Gl:C,Hh:M,Hl:N}=this;for(let R=0;R<80;R++){let V=lt.default.rotrSH(l,g,14)^lt.default.rotrSH(l,g,18)^lt.default.rotrBH(l,g,41),q=lt.default.rotrSL(l,g,14)^lt.default.rotrSL(l,g,18)^lt.default.rotrBL(l,g,41),W=l&x^~l&E,G=g&A^~g&C,z=lt.default.add5L(N,q,G,OJ[R],Iu[R]),te=lt.default.add5H(z,M,V,W,RJ[R],Eu[R]),_=z|0,f=lt.default.rotrSH(n,i,28)^lt.default.rotrBH(n,i,34)^lt.default.rotrBH(n,i,39),m=lt.default.rotrSL(n,i,28)^lt.default.rotrBL(n,i,34)^lt.default.rotrBL(n,i,39),b=n&o^n&a^o&a,w=i&s^i&c^s&c;M=E|0,N=C|0,E=x|0,C=A|0,x=l|0,A=g|0,{h:l,l:g}=lt.default.add(u|0,h|0,te|0,_|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=lt.default.add3L(_,m,w);n=lt.default.add3H(v,te,f,b),i=v|0}({h:n,l:i}=lt.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=lt.default.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=lt.default.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=lt.default.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:g}=lt.default.add(this.Eh|0,this.El|0,l|0,g|0),{h:x,l:A}=lt.default.add(this.Fh|0,this.Fl|0,x|0,A|0),{h:E,l:C}=lt.default.add(this.Gh|0,this.Gl|0,E|0,C|0),{h:M,l:N}=lt.default.add(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,i,o,s,a,c,u,h,l,g,x,A,E,C,M,N)}roundClean(){Eu.fill(0),Iu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Fo.SHA512=xl;var KE=class extends xl{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},FE=class extends xl{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},VE=class extends xl{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};Fo.sha512=(0,tx.wrapConstructor)(()=>new xl);Fo.sha512_224=(0,tx.wrapConstructor)(()=>new KE);Fo.sha512_256=(0,tx.wrapConstructor)(()=>new FE);Fo.sha384=(0,tx.wrapConstructor)(()=>new VE)});var e7=L(Pt=>{"use strict";p();y();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.utils=Pt.curve25519=Pt.getSharedSecret=Pt.sync=Pt.verify=Pt.sign=Pt.getPublicKey=Pt.Signature=Pt.Point=Pt.RistrettoPoint=Pt.ExtendedPoint=Pt.CURVE=void 0;var NJ=Hb(),Fr=BigInt(0),gt=BigInt(1),Pu=BigInt(2),UJ=BigInt(8),VB=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),jt=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:VB,n:VB,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});Pt.CURVE=jt;var jB=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),my=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),P3e=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),DJ=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),LJ=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),KJ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),FJ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),Qr=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof gr))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(gr.ZERO)?e.ZERO:new e(t.x,t.y,gt,oe(t.x*t.y))}static toAffineBatch(t){let r=HJ(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){HB(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=oe(r*a),u=oe(o*i),h=oe(n*a),l=oe(s*i);return c===u&&h===l}negate(){return new e(oe(-this.x),this.y,this.z,oe(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=jt,o=oe(t*t),s=oe(r*r),a=oe(Pu*oe(n*n)),c=oe(i*o),u=t+r,h=oe(oe(u*u)-o-s),l=c+s,g=l-a,x=c-s,A=oe(h*g),E=oe(l*x),C=oe(h*x),M=oe(g*l);return new e(A,E,M,C)}add(t){HB(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=oe((n-r)*(a+s)),l=oe((n+r)*(a-s)),g=oe(l-h);if(g===Fr)return this.double();let x=oe(i*Pu*u),A=oe(o*Pu*c),E=A+x,C=l+h,M=A-x,N=oe(E*g),R=oe(C*M),V=oe(E*M),q=oe(g*C);return new e(N,R,q,V)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=gr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&zE.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),zE.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=gt);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(qB(M,i[E])):o=o.add(qB(N,i[C]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(mh(t,jt.l),r)}multiplyUnsafe(t){let r=mh(t,jt.l,!1),n=e.BASE,i=e.ZERO;if(r===Fr)return i;if(this.equals(i)||r===gt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>Fr;)r&gt&&(o=o.add(s)),s=s.double(),r>>=gt;return o}isSmallOrder(){return this.multiplyUnsafe(jt.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(jt.l/Pu).double();return jt.l%Pu&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?UJ:ix(i));let s=oe(r*t),a=oe(n*t),c=oe(i*t);if(o)return gr.ZERO;if(c!==gt)throw new Error("invZ was invalid");return new gr(s,a)}fromRistrettoBytes(){HE()}toRistrettoBytes(){HE()}fromRistrettoHash(){HE()}};Pt.ExtendedPoint=Qr;Qr.BASE=new Qr(jt.Gx,jt.Gy,gt,oe(jt.Gx*jt.Gy));Qr.ZERO=new Qr(Fr,gt,gt,Fr);function qB(e,t){let r=t.negate();return e?r:t}function HB(e){if(!(e instanceof Qr))throw new TypeError("ExtendedPoint expected")}function qE(e){if(!(e instanceof _u))throw new TypeError("RistrettoPoint expected")}function HE(){throw new Error("Legacy method: switch to RistrettoPoint")}var _u=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=jt,n=oe(my*t*t),i=oe((n+gt)*KJ),o=BigInt(-1),s=oe((o-r*n)*oe(n+r)),{isValid:a,value:c}=GE(i,s),u=oe(c*t);Tu(u)||(u=oe(-u)),a||(c=u),a||(o=n);let h=oe(o*(n-gt)*FJ-s),l=c*c,g=oe((c+c)*s),x=oe(h*DJ),A=oe(gt-l),E=oe(gt+l);return new Qr(oe(g*E),oe(A*x),oe(x*E),oe(g*A))}static hashToCurve(t){t=Ls(t,64);let r=WE(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=WE(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Ls(t,32);let{a:r,d:n}=jt,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=WE(t);if(!WJ(ph(o),t)||Tu(o))throw new Error(i);let s=oe(o*o),a=oe(gt+r*s),c=oe(gt-r*s),u=oe(a*a),h=oe(c*c),l=oe(r*n*u-h),{isValid:g,value:x}=zB(oe(l*h)),A=oe(x*c),E=oe(x*A*l),C=oe((o+o)*A);Tu(C)&&(C=oe(-C));let M=oe(a*E),N=oe(C*M);if(!g||Tu(N)||M===Fr)throw new Error(i);return new e(new Qr(C,M,gt,N))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=oe(oe(n+r)*oe(n-r)),s=oe(t*r),a=oe(s*s),{value:c}=zB(oe(o*a)),u=oe(c*o),h=oe(c*s),l=oe(u*h*i),g;if(Tu(i*l)){let A=oe(r*my),E=oe(t*my);t=A,r=E,g=oe(u*LJ)}else g=h;Tu(t*l)&&(r=oe(-r));let x=oe((n-r)*g);return Tu(x)&&(x=oe(-x)),ph(x)}toHex(){return by(this.toRawBytes())}toString(){return this.toHex()}equals(t){qE(t);let r=this.ep,n=t.ep,i=oe(r.x*n.y)===oe(r.y*n.x),o=oe(r.y*n.y)===oe(r.x*n.x);return i||o}add(t){return qE(t),new e(this.ep.add(t.ep))}subtract(t){return qE(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};Pt.RistrettoPoint=_u;_u.BASE=new _u(Qr.BASE);_u.ZERO=new _u(Qr.ZERO);var zE=new WeakMap,gr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,zE.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=jt;t=Ls(t,32);let o=t.slice();o[31]=t[31]&-129;let s=vl(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=jB)throw new Error("Expected 0 < hex < 2**256");let a=oe(s*s),c=oe(a-gt),u=oe(n*a+gt),{isValid:h,value:l}=GE(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let g=(l&gt)===gt;return(t[31]&128)!==0!==g&&(l=oe(-l)),new e(l,s)}static async fromPrivateKey(t){return(await xy(t)).point}toRawBytes(){let t=ph(this.y);return t[31]|=this.x&gt?128:0,t}toHex(){return by(this.toRawBytes())}toX25519(){let{y:t}=this,r=oe((gt+t)*ix(gt-t));return ph(r)}isTorsionFree(){return Qr.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(oe(-this.x),this.y)}add(t){return Qr.fromAffine(this).add(Qr.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Qr.fromAffine(this).multiply(t,this).toAffine()}};Pt.Point=gr;gr.BASE=new gr(jt.Gx,jt.Gy);gr.ZERO=new gr(Fr,gt);var wl=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Ls(t,64),n=gr.fromHex(r.slice(0,32),!1),i=vl(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof gr))throw new Error("Expected Point instance");return mh(r,jt.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(ph(this.s),32),t}toHex(){return by(this.toRawBytes())}};Pt.Signature=wl;function WB(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var VJ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function by(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=VJ[e[r]];return t}function jE(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function GB(e){let r=e.toString(16).padStart(64,"0");return jE(r)}function ph(e){return GB(e).reverse()}function Tu(e){return(oe(e)&gt)===gt}function vl(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+by(Uint8Array.from(e).reverse()))}var qJ=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function WE(e){return oe(vl(e)&qJ)}function oe(e,t=jt.P){let r=e%t;return r>=Fr?r:t+r}function ix(e,t=jt.P){if(e===Fr||t<=Fr)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=oe(e,t),n=t,i=Fr,o=gt,s=gt,a=Fr;for(;r!==Fr;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==gt)throw new Error("invert: does not exist");return oe(i,t)}function HJ(e,t=jt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Fr?o:(r[a]=o,oe(o*s,t)),gt),i=ix(n,t);return e.reduceRight((o,s,a)=>s===Fr?o:(r[a]=oe(o*r[a],t),oe(o*s,t)),i),r}function Ds(e,t){let{P:r}=jt,n=e;for(;t-- >Fr;)n*=n,n%=r;return n}function $B(e){let{P:t}=jt,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=Ds(c,Pu)*c%t,h=Ds(u,gt)*e%t,l=Ds(h,r)*h%t,g=Ds(l,n)*l%t,x=Ds(g,i)*g%t,A=Ds(x,o)*x%t,E=Ds(A,s)*A%t,C=Ds(E,s)*A%t,M=Ds(C,n)*l%t;return{pow_p_5_8:Ds(M,Pu)*e%t,b2:c}}function GE(e,t){let r=oe(t*t*t),n=oe(r*r*t),i=$B(e*n).pow_p_5_8,o=oe(e*r*i),s=oe(t*o*o),a=o,c=oe(o*my),u=s===e,h=s===oe(-e),l=s===oe(-e*my);return u&&(o=a),(h||l)&&(o=c),Tu(o)&&(o=oe(-o)),{isValid:u||h,value:o}}function zB(e){return GE(gt,e)}function yh(e){return oe(vl(e),jt.l)}function WJ(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ls(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):jE(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function mh(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Fr<e)return e}else if(Fr<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function YB(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function zJ(e){return vl(YB(Ls(e,32)))}function JB(e){if(e=typeof e=="bigint"||typeof e=="number"?GB(mh(e,jB)):Ls(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function ZB(e){let t=YB(e.slice(0,32)),r=e.slice(32,64),n=yh(t),i=gr.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var gy;function nx(...e){if(typeof gy!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return gy(...e)}async function xy(e){return ZB(await Pt.utils.sha512(JB(e)))}function $E(e){return ZB(nx(JB(e)))}async function jJ(e){return(await xy(e)).pointBytes}Pt.getPublicKey=jJ;function GJ(e){return $E(e).pointBytes}async function $J(e,t){e=Ls(e);let{prefix:r,scalar:n,pointBytes:i}=await xy(t),o=yh(await Pt.utils.sha512(r,e)),s=gr.BASE.multiply(o),a=yh(await Pt.utils.sha512(s.toRawBytes(),i,e)),c=oe(o+a*n,jt.l);return new wl(s,c).toRawBytes()}Pt.sign=$J;function YJ(e,t){e=Ls(e);let{prefix:r,scalar:n,pointBytes:i}=$E(t),o=yh(nx(r,e)),s=gr.BASE.multiply(o),a=yh(nx(s.toRawBytes(),i,e)),c=oe(o+a*n,jt.l);return new wl(s,c).toRawBytes()}function QB(e,t,r){t=Ls(t),r instanceof gr||(r=gr.fromHex(r,!1));let{r:n,s:i}=e instanceof wl?e.assertValidity():wl.fromHex(e),o=Qr.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function XB(e,t,r,n){let i=yh(n),o=Qr.fromAffine(e).multiplyUnsafe(i);return Qr.fromAffine(t).add(o).subtract(r).multiplyUnsafe(jt.h).equals(Qr.ZERO)}async function JJ(e,t,r){let{r:n,SB:i,msg:o,pub:s}=QB(e,t,r),a=await Pt.utils.sha512(n.toRawBytes(),s.toRawBytes(),o);return XB(s,n,i,a)}Pt.verify=JJ;function ZJ(e,t,r){let{r:n,SB:i,msg:o,pub:s}=QB(e,t,r),a=nx(n.toRawBytes(),s.toRawBytes(),o);return XB(s,n,i,a)}Pt.sync={getExtendedPublicKey:$E,getPublicKey:GJ,sign:YJ,verify:ZJ};async function QJ(e,t){let{head:r}=await xy(e),n=gr.fromHex(t).toX25519();return Pt.curve25519.scalarMult(r,n)}Pt.getSharedSecret=QJ;gr.BASE._setWindowSize(8);function rx(e,t,r){let n=oe(e*(t-r));return t=oe(t-n),r=oe(r+n),[t,r]}function XJ(e,t){let{P:r}=jt,n=mh(e,r),i=mh(t,r),o=BigInt(121665),s=n,a=gt,c=Fr,u=n,h=gt,l=Fr,g;for(let C=BigInt(254);C>=Fr;C--){let M=i>>C&gt;l^=M,g=rx(l,a,u),a=g[0],u=g[1],g=rx(l,c,h),c=g[0],h=g[1],l=M;let N=a+c,R=oe(N*N),V=a-c,q=oe(V*V),W=R-q,G=u+h,z=u-h,te=oe(z*N),_=oe(G*V),f=te+_,m=te-_;u=oe(f*f),h=oe(s*oe(m*m)),a=oe(R*q),c=oe(W*(R+oe(o*W)))}g=rx(l,a,u),a=g[0],u=g[1],g=rx(l,c,h),c=g[0],h=g[1];let{pow_p_5_8:x,b2:A}=$B(c),E=oe(Ds(x,BigInt(3))*A);return oe(a*E)}function eZ(e){return ph(oe(e,jt.P))}function tZ(e){let t=Ls(e,32);return t[31]&=127,vl(t)}Pt.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(e,t){let r=tZ(t),n=zJ(e),i=XJ(r,n);if(i===Fr)throw new Error("Invalid private or public key received");return eZ(i)},scalarMultBase(e){return Pt.curve25519.scalarMult(e,Pt.curve25519.BASE_POINT_U)}};var ku={node:NJ,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};Pt.utils={bytesToHex:by,hexToBytes:jE,concatBytes:WB,getExtendedPublicKey:xy,mod:oe,invert:ix,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Ls(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return oe(vl(e),jt.l-gt)+gt},randomBytes:(e=32)=>{if(ku.web)return ku.web.getRandomValues(new Uint8Array(e));if(ku.node){let{randomBytes:t}=ku.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Pt.utils.randomBytes(32),sha512:async(...e)=>{let t=WB(...e);if(ku.web){let r=await ku.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(ku.node)return Uint8Array.from(ku.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=gr.BASE){let r=t.equals(gr.BASE)?t:new gr(t.x,t.y);return r._setWindowSize(e),r.multiply(Pu),r},sha512Sync:void 0};Object.defineProperties(Pt.utils,{sha512Sync:{configurable:!1,get(){return gy},set(e){gy||(gy=e)}}})});var sx=L(gh=>{"use strict";p();y();Object.defineProperty(gh,"__esModule",{value:!0});gh.sha224=gh.sha256=void 0;var rZ=yy(),Vo=Su(),nZ=(e,t,r)=>e&t^~e&r,iZ=(e,t,r)=>e&t^e&r^t&r,oZ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cu=new Uint32Array(64),ox=class extends rZ.SHA2{constructor(){super(64,32,8,!1),this.A=Bu[0]|0,this.B=Bu[1]|0,this.C=Bu[2]|0,this.D=Bu[3]|0,this.E=Bu[4]|0,this.F=Bu[5]|0,this.G=Bu[6]|0,this.H=Bu[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Cu[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Cu[l-15],x=Cu[l-2],A=(0,Vo.rotr)(g,7)^(0,Vo.rotr)(g,18)^g>>>3,E=(0,Vo.rotr)(x,17)^(0,Vo.rotr)(x,19)^x>>>10;Cu[l]=E+Cu[l-7]+A+Cu[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=(0,Vo.rotr)(a,6)^(0,Vo.rotr)(a,11)^(0,Vo.rotr)(a,25),x=h+g+nZ(a,c,u)+oZ[l]+Cu[l]|0,E=((0,Vo.rotr)(n,2)^(0,Vo.rotr)(n,13)^(0,Vo.rotr)(n,22))+iZ(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Cu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},YE=class extends ox{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};gh.sha256=(0,Vo.wrapConstructor)(()=>new ox);gh.sha224=(0,Vo.wrapConstructor)(()=>new YE)});var t7=L(QE=>{"use strict";p();y();function Ic(e,t,r){return t<=e&&e<=r}function lx(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function sZ(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=o&1023,c=s&1023;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function aZ(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var ax=-1;function ZE(e){this.tokens=[].slice.call(e)}ZE.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ax},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var bh=-1;function JE(e,t){if(e)throw TypeError("Decoder error");return t||65533}var cx="utf-8";function ux(e,t){if(!(this instanceof ux))return new ux(e,t);if(e=e!==void 0?String(e).toLowerCase():cx,e!==cx)throw new Error("Encoding not supported. Only utf-8 is supported");t=lx(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ux.prototype={decode:function(t,r){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),r=lx(r),this._streaming||(this._decoder=new cZ({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new ZE(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==bh);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===bh)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),aZ(o)}};function fx(e,t){if(!(this instanceof fx))return new fx(e,t);if(e=e!==void 0?String(e).toLowerCase():cx,e!==cx)throw new Error("Encoding not supported. Only utf-8 is supported");t=lx(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}fx.prototype={encode:function(t,r){t=t?String(t):"",r=lx(r),this._streaming||(this._encoder=new uZ(this._options)),this._streaming=!!r.stream;for(var n=[],i=new ZE(sZ(t)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==bh);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==bh;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function cZ(e){var t=e.fatal,r=0,n=0,i=0,o=128,s=191;this.handler=function(a,c){if(c===ax&&i!==0)return i=0,JE(t);if(c===ax)return bh;if(i===0){if(Ic(c,0,127))return c;if(Ic(c,194,223))i=1,r=c-192;else if(Ic(c,224,239))c===224&&(o=160),c===237&&(s=159),i=2,r=c-224;else if(Ic(c,240,244))c===240&&(o=144),c===244&&(s=143),i=3,r=c-240;else return JE(t);return r=r<<6*i,null}if(!Ic(c,o,s))return r=i=n=0,o=128,s=191,a.prepend(c),JE(t);if(o=128,s=191,n+=1,r+=c-128<<6*(i-n),n!==i)return null;var u=r;return r=i=n=0,u}}function uZ(e){var t=e.fatal;this.handler=function(r,n){if(n===ax)return bh;if(Ic(n,0,127))return n;var i,o;Ic(n,128,2047)?(i=1,o=192):Ic(n,2048,65535)?(i=2,o=224):Ic(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var a=n>>6*(i-1);s.push(128|a&63),i-=1}return s}}QE.TextEncoder=fx;QE.TextDecoder=ux});var s7=L(Yt=>{"use strict";p();y();var fZ=Yt&&Yt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),lZ=Yt&&Yt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ba=Yt&&Yt.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},dZ=Yt&&Yt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&fZ(t,e,r);return lZ(t,e),t},r7=Yt&&Yt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.deserializeUnchecked=Yt.deserialize=Yt.serialize=Yt.BinaryReader=Yt.BinaryWriter=Yt.BorshError=Yt.baseDecode=Yt.baseEncode=void 0;var Mu=r7(qb()),n7=r7(Ns()),hZ=dZ(t7()),pZ=typeof TextDecoder!="function"?hZ.TextDecoder:TextDecoder,yZ=new pZ("utf-8",{fatal:!0});function mZ(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),n7.default.encode(Buffer.from(e))}Yt.baseEncode=mZ;function gZ(e){return Buffer.from(n7.default.decode(e))}Yt.baseDecode=gZ;var XE=1024,Hn=class extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Yt.BorshError=Hn;var dx=class{constructor(){this.buf=Buffer.alloc(XE),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(XE)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Mu.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(XE)]),this.length+=t.length}writeString(t){this.maybeResize();let r=Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}};Yt.BinaryWriter=dx;function xa(e,t,r){let n=r.value;r.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new Hn("Reached the end of buffer when deserializing")}throw o}}}var _i=class{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new Mu.default(t,"le")}readU128(){let t=this.readBuffer(16);return new Mu.default(t,"le")}readU256(){let t=this.readBuffer(32);return new Mu.default(t,"le")}readU512(){let t=this.readBuffer(64);return new Mu.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Hn(`Expected buffer length ${t} isn't within bounds`);let r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){let t=this.readU32(),r=this.readBuffer(t);try{return yZ.decode(r)}catch(n){throw new Hn(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let r=this.readU32(),n=Array();for(let i=0;i<r;++i)n.push(t());return n}};ba([xa],_i.prototype,"readU8",null);ba([xa],_i.prototype,"readU16",null);ba([xa],_i.prototype,"readU32",null);ba([xa],_i.prototype,"readU64",null);ba([xa],_i.prototype,"readU128",null);ba([xa],_i.prototype,"readU256",null);ba([xa],_i.prototype,"readU512",null);ba([xa],_i.prototype,"readString",null);ba([xa],_i.prototype,"readFixedArray",null);ba([xa],_i.prototype,"readArray",null);Yt.BinaryReader=_i;function i7(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Al(e,t,r,n,i){try{if(typeof n=="string")i[`write${i7(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new Hn(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new Hn(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)Al(e,null,r[o],n[0],i)}else i.writeArray(r,o=>{Al(e,t,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?i.writeU8(0):(i.writeU8(1),Al(e,t,r,n.type,i));break}case"map":{i.writeU32(r.size),r.forEach((o,s)=>{Al(e,t,s,n.key,i),Al(e,t,o,n.value,i)});break}default:throw new Hn(`FieldType ${n} unrecognized`)}else o7(e,r,i)}catch(o){throw o instanceof Hn&&o.addToFieldPath(t),o}}function o7(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}let n=e.get(t.constructor);if(!n)throw new Hn(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{Al(e,i,t[i],o,r)});else if(n.kind==="enum"){let i=t[n.field];for(let o=0;o<n.values.length;++o){let[s,a]=n.values[o];if(s===i){r.writeU8(o),Al(e,s,t[s],a,r);break}}}else throw new Hn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function bZ(e,t,r=dx){let n=new r;return o7(e,t,n),n.toArray()}Yt.serialize=bZ;function Sl(e,t,r,n){try{if(typeof r=="string")return n[`read${i7(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){let i=[];for(let o=0;o<r[1];o++)i.push(Sl(e,null,r[0],n));return i}else return n.readArray(()=>Sl(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?Sl(e,t,r.type,n):void 0;if(r.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let a=Sl(e,t,r.key,n),c=Sl(e,t,r.value,n);i.set(a,c)}return i}return e3(e,r,n)}catch(i){throw i instanceof Hn&&i.addToFieldPath(t),i}}function e3(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new Hn(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of e.get(t).fields)i[o]=Sl(e,o,s,r);return new t(i)}if(n.kind==="enum"){let i=r.readU8();if(i>=n.values.length)throw new Hn(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],a=Sl(e,o,s,r);return new t({[o]:a})}throw new Hn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function xZ(e,t,r,n=_i){let i=new n(r),o=e3(e,t,i);if(i.offset<r.length)throw new Hn(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o}Yt.deserialize=xZ;function wZ(e,t,r,n=_i){let i=new n(r);return e3(e,t,i)}Yt.deserializeUnchecked=wZ});var Iy=L(Q=>{"use strict";p();y();Object.defineProperty(Q,"__esModule",{value:!0});Q.s16=Q.s8=Q.nu64be=Q.u48be=Q.u40be=Q.u32be=Q.u24be=Q.u16be=Q.nu64=Q.u48=Q.u40=Q.u32=Q.u24=Q.u16=Q.u8=Q.offset=Q.greedy=Q.Constant=Q.UTF8=Q.CString=Q.Blob=Q.Boolean=Q.BitField=Q.BitStructure=Q.VariantLayout=Q.Union=Q.UnionLayoutDiscriminator=Q.UnionDiscriminator=Q.Structure=Q.Sequence=Q.DoubleBE=Q.Double=Q.FloatBE=Q.Float=Q.NearInt64BE=Q.NearInt64=Q.NearUInt64BE=Q.NearUInt64=Q.IntBE=Q.Int=Q.UIntBE=Q.UInt=Q.OffsetLayout=Q.GreedyCount=Q.ExternalLayout=Q.bindConstructorLayout=Q.nameWithProperty=Q.Layout=Q.uint8ArrayToBuffer=Q.checkUint8Array=void 0;Q.constant=Q.utf8=Q.cstr=Q.blob=Q.unionLayoutDiscriminator=Q.union=Q.seq=Q.bits=Q.struct=Q.f64be=Q.f64=Q.f32be=Q.f32=Q.ns64be=Q.s48be=Q.s40be=Q.s32be=Q.s24be=Q.s16be=Q.ns64=Q.s48=Q.s40=Q.s32=Q.s24=void 0;var r3=Zr();function vh(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Q.checkUint8Array=vh;function Dt(e){return vh(e),r3.Buffer.from(e.buffer,e.byteOffset,e.length)}Q.uint8ArrayToBuffer=Dt;var Ht=class{constructor(t,r){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=r}makeDestinationObject(){return{}}getSpan(t,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=t,r}fromArray(t){}};Q.Layout=Ht;function n3(e,t){return t.property?e+"["+t.property+"]":e}Q.nameWithProperty=n3;function vZ(e,t){if(typeof e!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Ht))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(r,n){return t.encode(this,r,n)},writable:!0}),Object.defineProperty(e,"decode",{value(r,n){return t.decode(r,n)},writable:!0})}Q.bindConstructorLayout=vZ;var ui=class extends Ht{isCount(){throw new Error("ExternalLayout is abstract")}};Q.ExternalLayout=ui;var hx=class extends ui{constructor(t=1,r){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=t}isCount(){return!0}decode(t,r=0){vh(t);let n=t.length-r;return Math.floor(n/this.elementSpan)}encode(t,r,n){return 0}};Q.GreedyCount=hx;var wy=class extends ui{constructor(t,r=0,n){if(!(t instanceof Ht))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=r}isCount(){return this.layout instanceof $i||this.layout instanceof ho}decode(t,r=0){return this.layout.decode(t,r+this.offset)}encode(t,r,n=0){return this.layout.encode(t,r,n+this.offset)}};Q.OffsetLayout=wy;var $i=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Dt(t).readUIntLE(r,this.span)}encode(t,r,n=0){return Dt(r).writeUIntLE(t,n,this.span),this.span}};Q.UInt=$i;var ho=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Dt(t).readUIntBE(r,this.span)}encode(t,r,n=0){return Dt(r).writeUIntBE(t,n,this.span),this.span}};Q.UIntBE=ho;var kc=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Dt(t).readIntLE(r,this.span)}encode(t,r,n=0){return Dt(r).writeIntLE(t,n,this.span),this.span}};Q.Int=kc;var Ru=class extends Ht{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return Dt(t).readIntBE(r,this.span)}encode(t,r,n=0){return Dt(r).writeIntBE(t,n,this.span),this.span}};Q.IntBE=Ru;var t3=Math.pow(2,32);function Bx(e){let t=Math.floor(e/t3),r=e-t*t3;return{hi32:t,lo32:r}}function Cx(e,t){return e*t3+t}var px=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Dt(t),i=n.readUInt32LE(r),o=n.readUInt32LE(r+4);return Cx(o,i)}encode(t,r,n=0){let i=Bx(t),o=Dt(r);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};Q.NearUInt64=px;var yx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Dt(t),i=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return Cx(i,o)}encode(t,r,n=0){let i=Bx(t),o=Dt(r);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};Q.NearUInt64BE=yx;var mx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Dt(t),i=n.readUInt32LE(r),o=n.readInt32LE(r+4);return Cx(o,i)}encode(t,r,n=0){let i=Bx(t),o=Dt(r);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};Q.NearInt64=mx;var gx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){let n=Dt(t),i=n.readInt32BE(r),o=n.readUInt32BE(r+4);return Cx(i,o)}encode(t,r,n=0){let i=Bx(t),o=Dt(r);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};Q.NearInt64BE=gx;var bx=class extends Ht{constructor(t){super(4,t)}decode(t,r=0){return Dt(t).readFloatLE(r)}encode(t,r,n=0){return Dt(r).writeFloatLE(t,n),4}};Q.Float=bx;var xx=class extends Ht{constructor(t){super(4,t)}decode(t,r=0){return Dt(t).readFloatBE(r)}encode(t,r,n=0){return Dt(r).writeFloatBE(t,n),4}};Q.FloatBE=xx;var wx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){return Dt(t).readDoubleLE(r)}encode(t,r,n=0){return Dt(r).writeDoubleLE(t,n),8}};Q.Double=wx;var vx=class extends Ht{constructor(t){super(8,t)}decode(t,r=0){return Dt(t).readDoubleBE(r)}encode(t,r,n=0){return Dt(r).writeDoubleBE(t,n),8}};Q.DoubleBE=vx;var Ax=class extends Ht{constructor(t,r,n){if(!(t instanceof Ht))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ui&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(r instanceof ui)&&0<t.span&&(i=r*t.span),super(i,n),this.elementLayout=t,this.count=r}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof ui&&(i=i.decode(t,r)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(t,r+n),++o}return n}decode(t,r=0){let n=[],i=0,o=this.count;for(o instanceof ui&&(o=o.decode(t,r));i<o;)n.push(this.elementLayout.decode(t,r)),r+=this.elementLayout.getSpan(t,r),i+=1;return n}encode(t,r,n=0){let i=this.elementLayout,o=t.reduce((s,a)=>s+i.encode(a,r,n+s),0);return this.count instanceof ui&&this.count.encode(t.length,r,n),o}};Q.Sequence=Ax;var Sx=class extends Ht{constructor(t,r,n){if(!(Array.isArray(t)&&t.reduce((o,s)=>o&&s instanceof Ht,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(let o of t)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,r),this.fields=t,this.decodePrefixes=!!n}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(t,r);return r+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,r=0){vh(t);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,r)),r+=i.getSpan(t,r),this.decodePrefixes&&t.length===r)break;return n}encode(t,r,n=0){let i=n,o=0,s=0;for(let a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){let u=t[a.property];u!==void 0&&(s=a.encode(u,r,n),0>c&&(c=a.getSpan(r,n)))}o=n,n+=c}return o+s-i}fromArray(t){let r=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<t.length&&(r[n.property]=t.shift());return r}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let r=0;for(let n of this.fields){if(n.property===t)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}};Q.Structure=Sx;var vy=class{constructor(t){this.property=t}decode(t,r){throw new Error("UnionDiscriminator is abstract")}encode(t,r,n){throw new Error("UnionDiscriminator is abstract")}};Q.UnionDiscriminator=vy;var wh=class extends vy{constructor(t,r){if(!(t instanceof ui&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||t.property||"variant"),this.layout=t}decode(t,r){return this.layout.decode(t,r)}encode(t,r,n){return this.layout.encode(t,r,n)}};Q.UnionLayoutDiscriminator=wh;var Ay=class extends Ht{constructor(t,r,n){let i;if(t instanceof $i||t instanceof ho)i=new wh(new wy(t));else if(t instanceof ui&&t.isCount())i=new wh(t);else if(t instanceof vy)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof Ht))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let o=-1;r&&(o=r.span,0<=o&&(t instanceof $i||t instanceof ho)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof $i||t instanceof ho,this.defaultLayout=r,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(t,r=0){if(0<=this.span)return this.span;let n=this.getVariant(t,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,r)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let r=this.registry[t[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(t,r.property)))return r}else for(let r in this.registry){let n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,r=0){let n,i=this.discriminator,o=i.decode(t,r),s=this.registry[o];if(s===void 0){let a=this.defaultLayout,c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[a.property]=a.decode(t,r+c)}else n=s.decode(t,r);return n}encode(t,r,n=0){let i=this.getSourceVariant(t);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(t[o.property],r,n),a+s.encode(t[s.property],r,n+a)}return i.encode(t,r,n)}addVariant(t,r,n){let i=new Ex(this,t,r,n);return this.registry[t]=i,i}getVariant(t,r=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,r):n=t,this.registry[n]}};Q.Union=Ay;var Ex=class extends Ht{constructor(t,r,n,i){if(!(t instanceof Ay))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof Ht))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,i),this.union=t,this.variant=r,this.layout=n||null}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,r+n)),n+i}decode(t,r=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(t,r))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,r+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,r,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let o=i;if(this.layout&&(this.layout.encode(t[this.property],r,n+i),o+=this.layout.getSpan(r,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};Q.VariantLayout=Ex;function xh(e){return 0>e&&(e+=4294967296),e}var Sy=class extends Ht{constructor(t,r,n){if(!(t instanceof $i||t instanceof ho))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!r,this.fields=[];let i=0;this._packedSetValue=function(o){return i=xh(o),this},this._packedGetValue=function(){return i}}decode(t,r=0){let n=this.makeDestinationObject(),i=this.word.decode(t,r);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(t));return n}encode(t,r,n=0){let i=this.word.decode(r,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=t[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),r,n)}addField(t,r){let n=new Ey(this,t,r);return this.fields.push(n),n}addBoolean(t){let r=new Ix(this,t);return this.fields.push(r),r}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let r of this.fields)if(r.property===t)return r}};Q.BitStructure=Sy;var Ey=class{constructor(t,r,n){if(!(t instanceof Sy))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");let i=8*t.span,o=t.fields.reduce((s,a)=>s+a.bits,0);if(r+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-r),this.wordMask=xh(this.valueMask<<this.start),this.property=n}decode(t,r){let n=this.container._packedGetValue();return xh(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==xh(t&this.valueMask))throw new TypeError(n3("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let r=this.container._packedGetValue(),n=xh(t<<this.start);this.container._packedSetValue(xh(r&~this.wordMask)|n)}};Q.BitField=Ey;var Ix=class extends Ey{constructor(t,r){super(t,1,r)}decode(t,r){return!!super.decode(t,r)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};Q.Boolean=Ix;var kx=class extends Ht{constructor(t,r){if(!(t instanceof ui&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof ui||(n=t),super(n,r),this.length=t}getSpan(t,r){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),n}decode(t,r=0){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),Dt(t).slice(r,r+n)}encode(t,r,n){let i=this.length;if(this.length instanceof ui&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(n3("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>r.length)throw new RangeError("encoding overruns Uint8Array");let o=Dt(t);return Dt(r).write(o.toString("hex"),n,i,"hex"),this.length instanceof ui&&this.length.encode(i,r,n),i}};Q.Blob=kx;var Tx=class extends Ht{constructor(t){super(-1,t)}getSpan(t,r=0){vh(t);let n=r;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-r}decode(t,r=0){let n=this.getSpan(t,r);return Dt(t).slice(r,r+n-1).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=r3.Buffer.from(t,"utf8"),o=i.length;if(n+o>r.length)throw new RangeError("encoding overruns Buffer");let s=Dt(r);return i.copy(s,n),s[n+o]=0,o+1}};Q.CString=Tx;var Px=class extends Ht{constructor(t,r){if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=t}getSpan(t,r=0){return vh(t),t.length-r}decode(t,r=0){let n=this.getSpan(t,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Dt(t).slice(r,r+n).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));let i=r3.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>r.length)throw new RangeError("encoding overruns Buffer");return i.copy(Dt(r),n),o}};Q.UTF8=Px;var _x=class extends Ht{constructor(t,r){super(0,r),this.value=t}decode(t,r){return this.value}encode(t,r,n){return 0}};Q.Constant=_x;Q.greedy=(e,t)=>new hx(e,t);Q.offset=(e,t,r)=>new wy(e,t,r);Q.u8=e=>new $i(1,e);Q.u16=e=>new $i(2,e);Q.u24=e=>new $i(3,e);Q.u32=e=>new $i(4,e);Q.u40=e=>new $i(5,e);Q.u48=e=>new $i(6,e);Q.nu64=e=>new px(e);Q.u16be=e=>new ho(2,e);Q.u24be=e=>new ho(3,e);Q.u32be=e=>new ho(4,e);Q.u40be=e=>new ho(5,e);Q.u48be=e=>new ho(6,e);Q.nu64be=e=>new yx(e);Q.s8=e=>new kc(1,e);Q.s16=e=>new kc(2,e);Q.s24=e=>new kc(3,e);Q.s32=e=>new kc(4,e);Q.s40=e=>new kc(5,e);Q.s48=e=>new kc(6,e);Q.ns64=e=>new mx(e);Q.s16be=e=>new Ru(2,e);Q.s24be=e=>new Ru(3,e);Q.s32be=e=>new Ru(4,e);Q.s40be=e=>new Ru(5,e);Q.s48be=e=>new Ru(6,e);Q.ns64be=e=>new gx(e);Q.f32=e=>new bx(e);Q.f32be=e=>new xx(e);Q.f64=e=>new wx(e);Q.f64be=e=>new vx(e);Q.struct=(e,t,r)=>new Sx(e,t,r);Q.bits=(e,t,r)=>new Sy(e,t,r);Q.seq=(e,t,r)=>new Ax(e,t,r);Q.union=(e,t,r)=>new Ay(e,t,r);Q.unionLayoutDiscriminator=(e,t)=>new wh(e,t);Q.blob=(e,t)=>new kx(e,t);Q.cstr=e=>new Tx(e);Q.utf8=(e,t)=>new Px(e,t);Q.constant=(e,t)=>new _x(e,t)});var i3=L(Ah=>{"use strict";p();y();Object.defineProperty(Ah,"__esModule",{value:!0});var Mx;function AZ(e){{let t=Buffer.from(e);t.reverse();let r=t.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}return Mx.toBigInt(e,!1)}Ah.toBigIntLE=AZ;function SZ(e){{let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return Mx.toBigInt(e,!0)}Ah.toBigIntBE=SZ;function EZ(e,t){{let r=e.toString(16),n=Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return Mx.fromBigInt(e,Buffer.allocUnsafe(t),!1)}Ah.toBufferLE=EZ;function IZ(e,t){{let r=e.toString(16);return Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex")}return Mx.fromBigInt(e,Buffer.allocUnsafe(t),!0)}Ah.toBufferBE=IZ});var p7=L(Te=>{"use strict";p();y();Object.defineProperty(Te,"__esModule",{value:!0});var Rx=class extends TypeError{constructor(t,r){let n,{message:i,...o}=t,{path:s}=t,a=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[t,...r()]}}};function kZ(e){return Ks(e)&&typeof e[Symbol.iterator]=="function"}function Ks(e){return typeof e=="object"&&e!=null}function a7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function fn(e){return typeof e=="string"?JSON.stringify(e):""+e}function TZ(e){let{done:t,value:r}=e.next();return t?void 0:r}function PZ(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});let{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+fn(n)+"`"}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:c}}function*o3(e,t,r,n){kZ(e)||(e=[e]);for(let i of e){let o=PZ(i,t,r,n);o&&(yield o)}}function*s3(e,t,r={}){let{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(e=t.coercer(e,a),s&&t.type!=="type"&&Ks(t.schema)&&Ks(e)&&!Array.isArray(e)))for(let u in e)t.schema[u]===void 0&&delete e[u];let c=!0;for(let u of t.validator(e,a))c=!1,yield[u,void 0];for(let[u,h,l]of t.entries(e,a)){let g=s3(h,l,{path:u===void 0?n:[...n,u],branch:u===void 0?i:[...i,h],coerce:o,mask:s});for(let x of g)x[0]?(c=!1,yield[x[0],void 0]):o&&(h=x[1],u===void 0?e=h:e instanceof Map?e.set(u,h):e instanceof Set?e.add(h):Ks(e)&&(e[u]=h))}if(c)for(let u of t.refiner(e,a))c=!1,yield[u,void 0];c&&(yield[void 0,e])}var Br=class{constructor(t){let{type:r,schema:n,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=t;this.type=r,this.schema=n,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{let h=i(c,u);return o3(h,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{let h=o(c,u);return o3(h,u,this,c)}:this.refiner=()=>[]}assert(t){return c7(t,this)}create(t){return u7(t,this)}is(t){return a3(t,this)}mask(t){return f7(t,this)}validate(t,r={}){return Sh(t,this,r)}};function c7(e,t){let r=Sh(e,t);if(r[0])throw r[0]}function u7(e,t){let r=Sh(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function f7(e,t){let r=Sh(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function a3(e,t){return!Sh(e,t)[0]}function Sh(e,t,r={}){let n=s3(e,t,r),i=TZ(n);return i[0]?[new Rx(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function _Z(...e){let t=e.map(n=>n.schema),r=Object.assign({},...t);return ky(r)}function po(e,t){return new Br({type:e,schema:null,validator:t})}function BZ(e,t){return new Br({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function CZ(e){return new Br({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)}})}function MZ(e){let t;return new Br({type:"lazy",schema:null,*entries(r,n){var i;(i=t)!=null||(t=e()),yield*t.entries(r,n)},validator(r,n){var i;return(i=t)!=null||(t=e()),t.validator(r,n)},coercer(r,n){var i;return(i=t)!=null||(t=e()),t.coercer(r,n)}})}function RZ(e,t){let{schema:r}=e,n={...r};for(let i of t)delete n[i];return ky(n)}function OZ(e){let t=e instanceof Br?{...e.schema}:{...e};for(let r in t)t[r]=l7(t[r]);return ky(t)}function NZ(e,t){let{schema:r}=e,n={};for(let i of t)n[i]=r[i];return ky(n)}function UZ(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),po(e,t)}function DZ(){return po("any",()=>!0)}function LZ(e){return new Br({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+fn(t)}})}function KZ(){return po("boolean",e=>typeof e=="boolean")}function FZ(){return po("date",e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: "+fn(e))}function VZ(e){let t={},r=e.map(n=>fn(n)).join();for(let n of e)t[n]=n;return new Br({type:"enums",schema:t,validator(n){return e.includes(n)||"Expected one of `"+r+"`, but received: "+fn(n)}})}function qZ(){return po("func",e=>typeof e=="function"||"Expected a function, but received: "+fn(e))}function HZ(e){return po("instance",t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+fn(t))}function WZ(){return po("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+fn(e))}function zZ(e){return new Br({type:"intersection",schema:null,*entries(t,r){for(let n of e)yield*n.entries(t,r)},*validator(t,r){for(let n of e)yield*n.validator(t,r)},*refiner(t,r){for(let n of e)yield*n.refiner(t,r)}})}function jZ(e){let t=fn(e),r=typeof e;return new Br({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||"Expected the literal `"+t+"`, but received: "+fn(n)}})}function GZ(e,t){return new Br({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(let[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||"Expected a `Map` object, but received: "+fn(r)}})}function c3(){return po("never",()=>!1)}function $Z(e){return new Br({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function YZ(){return po("number",e=>typeof e=="number"&&!isNaN(e)||"Expected a number, but received: "+fn(e))}function ky(e){let t=e?Object.keys(e):[],r=c3();return new Br({type:"object",schema:e||null,*entries(n){if(e&&Ks(n)){let i=new Set(Object.keys(n));for(let o of t)i.delete(o),yield[o,n[o],e[o]];for(let o of i)yield[o,n[o],r]}},validator(n){return Ks(n)||"Expected an object, but received: "+fn(n)},coercer(n){return Ks(n)?{...n}:n}})}function l7(e){return new Br({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function JZ(e,t){return new Br({type:"record",schema:null,*entries(r){if(Ks(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator(r){return Ks(r)||"Expected an object, but received: "+fn(r)}})}function ZZ(){return po("regexp",e=>e instanceof RegExp)}function QZ(e){return new Br({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(let r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||"Expected a `Set` object, but received: "+fn(t)}})}function d7(){return po("string",e=>typeof e=="string"||"Expected a string, but received: "+fn(e))}function XZ(e){let t=c3();return new Br({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(r){return Array.isArray(r)||"Expected an array, but received: "+fn(r)}})}function eQ(e){let t=Object.keys(e);return new Br({type:"type",schema:e,*entries(r){if(Ks(r))for(let n of t)yield[n,r[n],e[n]]},validator(r){return Ks(r)||"Expected an object, but received: "+fn(r)}})}function tQ(e){let t=e.map(r=>r.type).join(" | ");return new Br({type:"union",schema:null,validator(r,n){let i=[];for(let o of e){let[...s]=s3(r,o,n),[a]=s;if(a[0])for(let[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+fn(r),...i]}})}function h7(){return po("unknown",()=>!0)}function u3(e,t,r){return new Br({...e,coercer:(n,i)=>a3(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function rQ(e,t,r={}){return u3(e,h7(),n=>{let i=typeof t=="function"?t():t;if(n===void 0)return i;if(!r.strict&&a7(n)&&a7(i)){let o={...n},s=!1;for(let a in i)o[a]===void 0&&(o[a]=i[a],s=!0);if(s)return o}return n})}function nQ(e){return u3(e,d7(),t=>t.trim())}function iQ(e){let t="Expected an empty "+e.type;return Eh(e,"empty",r=>{if(r instanceof Map||r instanceof Set){let{size:n}=r;return n===0||t+" but received one with a size of `"+n+"`"}else{let{length:n}=r;return n===0||t+" but received one with a length of `"+n+"`"}})}function oQ(e,t,r={}){let{exclusive:n}=r;return Eh(e,"max",i=>n?i<t:i<=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function sQ(e,t,r={}){let{exclusive:n}=r;return Eh(e,"min",i=>n?i>t:i>=t||"Expected a "+e.type+" greater than "+(n?"":"or equal to ")+t+" but received `"+i+"`")}function aQ(e,t){return Eh(e,"pattern",r=>t.test(r)||"Expected a "+e.type+" matching `/"+t.source+'/` but received "'+r+'"')}function cQ(e,t,r=t){let n="Expected a "+e.type,i=t===r?"of `"+t+"`":"between `"+t+"` and `"+r+"`";return Eh(e,"size",o=>{if(typeof o=="number"||o instanceof Date)return t<=o&&o<=r||n+" "+i+" but received `"+o+"`";if(o instanceof Map||o instanceof Set){let{size:s}=o;return t<=s&&s<=r||n+" with a size "+i+" but received one with a size of `"+s+"`"}else{let{length:s}=o;return t<=s&&s<=r||n+" with a length "+i+" but received one with a length of `"+s+"`"}})}function Eh(e,t,r){return new Br({...e,*refiner(n,i){yield*e.refiner(n,i);let o=r(n,i),s=o3(o,i,e,n);for(let a of s)yield{...a,refinement:t}}})}Te.Struct=Br;Te.StructError=Rx;Te.any=DZ;Te.array=LZ;Te.assert=c7;Te.assign=_Z;Te.boolean=KZ;Te.coerce=u3;Te.create=u7;Te.date=FZ;Te.defaulted=rQ;Te.define=po;Te.deprecated=BZ;Te.dynamic=CZ;Te.empty=iQ;Te.enums=VZ;Te.func=qZ;Te.instance=HZ;Te.integer=WZ;Te.intersection=zZ;Te.is=a3;Te.lazy=MZ;Te.literal=jZ;Te.map=GZ;Te.mask=f7;Te.max=oQ;Te.min=sQ;Te.never=c3;Te.nullable=$Z;Te.number=YZ;Te.object=ky;Te.omit=RZ;Te.optional=l7;Te.partial=OZ;Te.pattern=aQ;Te.pick=NZ;Te.record=JZ;Te.refine=Eh;Te.regexp=ZZ;Te.set=QZ;Te.size=cQ;Te.string=d7;Te.struct=UZ;Te.trimmed=nQ;Te.tuple=XZ;Te.type=eQ;Te.union=tQ;Te.unknown=h7;Te.validate=Sh});var l3=L(f3=>{"use strict";p();y();Object.defineProperty(f3,"__esModule",{value:!0});f3.default=fQ;var Ox,uQ=new Uint8Array(16);function fQ(){if(!Ox&&(Ox=typeof self.crypto<"u"&&self.crypto.getRandomValues&&self.crypto.getRandomValues.bind(self.crypto),!Ox))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ox(uQ)}});var y7=L(Nx=>{"use strict";p();y();Object.defineProperty(Nx,"__esModule",{value:!0});Nx.default=void 0;var lQ=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Nx.default=lQ});var Ty=L(Ux=>{"use strict";p();y();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.default=void 0;var dQ=hQ(y7());function hQ(e){return e&&e.__esModule?e:{default:e}}function pQ(e){return typeof e=="string"&&dQ.default.test(e)}var yQ=pQ;Ux.default=yQ});var _y=L(Py=>{"use strict";p();y();Object.defineProperty(Py,"__esModule",{value:!0});Py.default=void 0;Py.unsafeStringify=m7;var mQ=gQ(Ty());function gQ(e){return e&&e.__esModule?e:{default:e}}var Wn=[];for(let e=0;e<256;++e)Wn.push((e+256).toString(16).slice(1));function m7(e,t=0){return Wn[e[t+0]]+Wn[e[t+1]]+Wn[e[t+2]]+Wn[e[t+3]]+"-"+Wn[e[t+4]]+Wn[e[t+5]]+"-"+Wn[e[t+6]]+Wn[e[t+7]]+"-"+Wn[e[t+8]]+Wn[e[t+9]]+"-"+Wn[e[t+10]]+Wn[e[t+11]]+Wn[e[t+12]]+Wn[e[t+13]]+Wn[e[t+14]]+Wn[e[t+15]]}function bQ(e,t=0){let r=m7(e,t);if(!(0,mQ.default)(r))throw TypeError("Stringified UUID is invalid");return r}var xQ=bQ;Py.default=xQ});var b7=L(Dx=>{"use strict";p();y();Object.defineProperty(Dx,"__esModule",{value:!0});Dx.default=void 0;var wQ=AQ(l3()),vQ=_y();function AQ(e){return e&&e.__esModule?e:{default:e}}var g7,d3,h3=0,p3=0;function SQ(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||g7,s=e.clockseq!==void 0?e.clockseq:d3;if(o==null||s==null){let g=e.random||(e.rng||wQ.default)();o==null&&(o=g7=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=d3=(g[6]<<8|g[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:p3+1,u=a-h3+(c-p3)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||a>h3)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h3=a,p3=c,d3=s,a+=122192928e5;let h=((a&268435455)*1e4+c)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;let l=a/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=l&255,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return t||(0,vQ.unsafeStringify)(i)}var EQ=SQ;Dx.default=EQ});var y3=L(Lx=>{"use strict";p();y();Object.defineProperty(Lx,"__esModule",{value:!0});Lx.default=void 0;var IQ=kQ(Ty());function kQ(e){return e&&e.__esModule?e:{default:e}}function TQ(e){if(!(0,IQ.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var PQ=TQ;Lx.default=PQ});var m3=L(El=>{"use strict";p();y();Object.defineProperty(El,"__esModule",{value:!0});El.URL=El.DNS=void 0;El.default=RQ;var _Q=_y(),BQ=CQ(y3());function CQ(e){return e&&e.__esModule?e:{default:e}}function MQ(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var x7="6ba7b810-9dad-11d1-80b4-00c04fd430c8";El.DNS=x7;var w7="6ba7b811-9dad-11d1-80b4-00c04fd430c8";El.URL=w7;function RQ(e,t,r){function n(i,o,s,a){var c;if(typeof i=="string"&&(i=MQ(i)),typeof o=="string"&&(o=(0,BQ.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){a=a||0;for(let h=0;h<16;++h)s[a+h]=u[h];return s}return(0,_Q.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=x7,n.URL=w7,n}});var A7=L(Fx=>{"use strict";p();y();Object.defineProperty(Fx,"__esModule",{value:!0});Fx.default=void 0;function OQ(e){if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return NQ(UQ(DQ(e),e.length*8))}function NQ(e){let t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){let o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);t.push(s)}return t}function v7(e){return(e+64>>>9<<4)+14+1}function UQ(e,t){e[t>>5]|=128<<t%32,e[v7(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,o=271733878;for(let s=0;s<e.length;s+=16){let a=r,c=n,u=i,h=o;r=fi(r,n,i,o,e[s],7,-680876936),o=fi(o,r,n,i,e[s+1],12,-389564586),i=fi(i,o,r,n,e[s+2],17,606105819),n=fi(n,i,o,r,e[s+3],22,-1044525330),r=fi(r,n,i,o,e[s+4],7,-176418897),o=fi(o,r,n,i,e[s+5],12,1200080426),i=fi(i,o,r,n,e[s+6],17,-1473231341),n=fi(n,i,o,r,e[s+7],22,-45705983),r=fi(r,n,i,o,e[s+8],7,1770035416),o=fi(o,r,n,i,e[s+9],12,-1958414417),i=fi(i,o,r,n,e[s+10],17,-42063),n=fi(n,i,o,r,e[s+11],22,-1990404162),r=fi(r,n,i,o,e[s+12],7,1804603682),o=fi(o,r,n,i,e[s+13],12,-40341101),i=fi(i,o,r,n,e[s+14],17,-1502002290),n=fi(n,i,o,r,e[s+15],22,1236535329),r=li(r,n,i,o,e[s+1],5,-165796510),o=li(o,r,n,i,e[s+6],9,-1069501632),i=li(i,o,r,n,e[s+11],14,643717713),n=li(n,i,o,r,e[s],20,-373897302),r=li(r,n,i,o,e[s+5],5,-701558691),o=li(o,r,n,i,e[s+10],9,38016083),i=li(i,o,r,n,e[s+15],14,-660478335),n=li(n,i,o,r,e[s+4],20,-405537848),r=li(r,n,i,o,e[s+9],5,568446438),o=li(o,r,n,i,e[s+14],9,-1019803690),i=li(i,o,r,n,e[s+3],14,-187363961),n=li(n,i,o,r,e[s+8],20,1163531501),r=li(r,n,i,o,e[s+13],5,-1444681467),o=li(o,r,n,i,e[s+2],9,-51403784),i=li(i,o,r,n,e[s+7],14,1735328473),n=li(n,i,o,r,e[s+12],20,-1926607734),r=di(r,n,i,o,e[s+5],4,-378558),o=di(o,r,n,i,e[s+8],11,-2022574463),i=di(i,o,r,n,e[s+11],16,1839030562),n=di(n,i,o,r,e[s+14],23,-35309556),r=di(r,n,i,o,e[s+1],4,-1530992060),o=di(o,r,n,i,e[s+4],11,1272893353),i=di(i,o,r,n,e[s+7],16,-155497632),n=di(n,i,o,r,e[s+10],23,-1094730640),r=di(r,n,i,o,e[s+13],4,681279174),o=di(o,r,n,i,e[s],11,-358537222),i=di(i,o,r,n,e[s+3],16,-722521979),n=di(n,i,o,r,e[s+6],23,76029189),r=di(r,n,i,o,e[s+9],4,-640364487),o=di(o,r,n,i,e[s+12],11,-421815835),i=di(i,o,r,n,e[s+15],16,530742520),n=di(n,i,o,r,e[s+2],23,-995338651),r=hi(r,n,i,o,e[s],6,-198630844),o=hi(o,r,n,i,e[s+7],10,1126891415),i=hi(i,o,r,n,e[s+14],15,-1416354905),n=hi(n,i,o,r,e[s+5],21,-57434055),r=hi(r,n,i,o,e[s+12],6,1700485571),o=hi(o,r,n,i,e[s+3],10,-1894986606),i=hi(i,o,r,n,e[s+10],15,-1051523),n=hi(n,i,o,r,e[s+1],21,-2054922799),r=hi(r,n,i,o,e[s+8],6,1873313359),o=hi(o,r,n,i,e[s+15],10,-30611744),i=hi(i,o,r,n,e[s+6],15,-1560198380),n=hi(n,i,o,r,e[s+13],21,1309151649),r=hi(r,n,i,o,e[s+4],6,-145523070),o=hi(o,r,n,i,e[s+11],10,-1120210379),i=hi(i,o,r,n,e[s+2],15,718787259),n=hi(n,i,o,r,e[s+9],21,-343485551),r=Ou(r,a),n=Ou(n,c),i=Ou(i,u),o=Ou(o,h)}return[r,n,i,o]}function DQ(e){if(e.length===0)return[];let t=e.length*8,r=new Uint32Array(v7(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Ou(e,t){let r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function LQ(e,t){return e<<t|e>>>32-t}function Kx(e,t,r,n,i,o){return Ou(LQ(Ou(Ou(t,e),Ou(n,o)),i),r)}function fi(e,t,r,n,i,o,s){return Kx(t&r|~t&n,e,t,i,o,s)}function li(e,t,r,n,i,o,s){return Kx(t&n|r&~n,e,t,i,o,s)}function di(e,t,r,n,i,o,s){return Kx(t^r^n,e,t,i,o,s)}function hi(e,t,r,n,i,o,s){return Kx(r^(t|~n),e,t,i,o,s)}var KQ=OQ;Fx.default=KQ});var E7=L(Vx=>{"use strict";p();y();Object.defineProperty(Vx,"__esModule",{value:!0});Vx.default=void 0;var FQ=S7(m3()),VQ=S7(A7());function S7(e){return e&&e.__esModule?e:{default:e}}var qQ=(0,FQ.default)("v3",48,VQ.default),HQ=qQ;Vx.default=HQ});var I7=L(qx=>{"use strict";p();y();Object.defineProperty(qx,"__esModule",{value:!0});qx.default=void 0;var WQ=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),zQ={randomUUID:WQ};qx.default=zQ});var P7=L(Hx=>{"use strict";p();y();Object.defineProperty(Hx,"__esModule",{value:!0});Hx.default=void 0;var k7=T7(I7()),jQ=T7(l3()),GQ=_y();function T7(e){return e&&e.__esModule?e:{default:e}}function $Q(e,t,r){if(k7.default.randomUUID&&!t&&!e)return k7.default.randomUUID();e=e||{};let n=e.random||(e.rng||jQ.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,GQ.unsafeStringify)(n)}var YQ=$Q;Hx.default=YQ});var _7=L(Wx=>{"use strict";p();y();Object.defineProperty(Wx,"__esModule",{value:!0});Wx.default=void 0;function JQ(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function g3(e,t){return e<<t|e>>>32-t}function ZQ(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let s=unescape(encodeURIComponent(e));e=[];for(let a=0;a<s.length;++a)e.push(s.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),o=new Array(i);for(let s=0;s<i;++s){let a=new Uint32Array(16);for(let c=0;c<16;++c)a[c]=e[s*64+c*4]<<24|e[s*64+c*4+1]<<16|e[s*64+c*4+2]<<8|e[s*64+c*4+3];o[s]=a}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let s=0;s<i;++s){let a=new Uint32Array(80);for(let x=0;x<16;++x)a[x]=o[s][x];for(let x=16;x<80;++x)a[x]=g3(a[x-3]^a[x-8]^a[x-14]^a[x-16],1);let c=r[0],u=r[1],h=r[2],l=r[3],g=r[4];for(let x=0;x<80;++x){let A=Math.floor(x/20),E=g3(c,5)+JQ(A,u,h,l)+g+t[A]+a[x]>>>0;g=l,l=h,h=g3(u,30)>>>0,u=c,c=E}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var QQ=ZQ;Wx.default=QQ});var C7=L(zx=>{"use strict";p();y();Object.defineProperty(zx,"__esModule",{value:!0});zx.default=void 0;var XQ=B7(m3()),eX=B7(_7());function B7(e){return e&&e.__esModule?e:{default:e}}var tX=(0,XQ.default)("v5",80,eX.default),rX=tX;zx.default=rX});var M7=L(jx=>{"use strict";p();y();Object.defineProperty(jx,"__esModule",{value:!0});jx.default=void 0;var nX="00000000-0000-0000-0000-000000000000";jx.default=nX});var R7=L(Gx=>{"use strict";p();y();Object.defineProperty(Gx,"__esModule",{value:!0});Gx.default=void 0;var iX=oX(Ty());function oX(e){return e&&e.__esModule?e:{default:e}}function sX(e){if(!(0,iX.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var aX=sX;Gx.default=aX});var b3=L(Fs=>{"use strict";p();y();Object.defineProperty(Fs,"__esModule",{value:!0});Object.defineProperty(Fs,"NIL",{enumerable:!0,get:function(){return dX.default}});Object.defineProperty(Fs,"parse",{enumerable:!0,get:function(){return mX.default}});Object.defineProperty(Fs,"stringify",{enumerable:!0,get:function(){return yX.default}});Object.defineProperty(Fs,"v1",{enumerable:!0,get:function(){return cX.default}});Object.defineProperty(Fs,"v3",{enumerable:!0,get:function(){return uX.default}});Object.defineProperty(Fs,"v4",{enumerable:!0,get:function(){return fX.default}});Object.defineProperty(Fs,"v5",{enumerable:!0,get:function(){return lX.default}});Object.defineProperty(Fs,"validate",{enumerable:!0,get:function(){return pX.default}});Object.defineProperty(Fs,"version",{enumerable:!0,get:function(){return hX.default}});var cX=Tc(b7()),uX=Tc(E7()),fX=Tc(P7()),lX=Tc(C7()),dX=Tc(M7()),hX=Tc(R7()),pX=Tc(Ty()),yX=Tc(_y()),mX=Tc(y3());function Tc(e){return e&&e.__esModule?e:{default:e}}});var N7=L((W6e,O7)=>{"use strict";p();y();var gX=b3().v4,bX=function(e,t,r,n){if(typeof e!="string")throw new TypeError(e+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:e};if(i===2&&(o.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(typeof r>"u"){let s=typeof n.generator=="function"?n.generator:function(){return gX()};o.id=s(o,n)}else i===2&&r===null?n.notificationIdNull&&(o.id=null):o.id=r;return o};O7.exports=bX});var D7=L((G6e,U7)=>{"use strict";p();y();var xX=b3().v4,wX=N7(),By=function(e,t){if(!(this instanceof By))return new By(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return xX()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};U7.exports=By;By.prototype.request=function(e,t,r,n){let i=this,o=null,s=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&e&&typeof e=="object"&&typeof t=="function")n=t,o=e;else{typeof r=="function"&&(n=r,r=void 0);let u=typeof n=="function";try{o=wX(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return n(h);throw h}if(!u)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(u){return n(u)}return this.callServer(c,function(u,h){i._parseResponse(u,h,n)}),o};By.prototype._parseResponse=function(e,t,r){if(e){r(e);return}if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return r(i)}if(r.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return r(null,n.filter(i),n.filter(o))}else return r(null,n.error,n.result);r(null,n)}});var Ih=L((J6e,Pc)=>{p();y();function x3(e){"@babel/helpers - typeof";return Pc.exports=x3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc.exports.__esModule=!0,Pc.exports.default=Pc.exports,x3(e)}Pc.exports=x3,Pc.exports.__esModule=!0,Pc.exports.default=Pc.exports});var K7=L((X6e,_c)=>{p();y();var vX=Ih().default;function L7(){"use strict";_c.exports=L7=function(){return e},_c.exports.__esModule=!0,_c.exports.default=_c.exports;var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(m,b,w){m[b]=w.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(m,b,w){return Object.defineProperty(m,b,{value:w,enumerable:!0,configurable:!0,writable:!0}),m[b]}try{c({},"")}catch{c=function(w,v,P){return w[v]=P}}function u(m,b,w,v){var P=b&&b.prototype instanceof g?b:g,B=Object.create(P.prototype),k=new te(v||[]);return n(B,"_invoke",{value:q(m,w,k)}),B}function h(m,b,w){try{return{type:"normal",arg:m.call(b,w)}}catch(v){return{type:"throw",arg:v}}}e.wrap=u;var l={};function g(){}function x(){}function A(){}var E={};c(E,o,function(){return this});var C=Object.getPrototypeOf,M=C&&C(C(_([])));M&&M!==t&&r.call(M,o)&&(E=M);var N=A.prototype=g.prototype=Object.create(E);function R(m){["next","throw","return"].forEach(function(b){c(m,b,function(w){return this._invoke(b,w)})})}function V(m,b){function w(P,B,k,d){var S=h(m[P],m,B);if(S.type!=="throw"){var F=S.arg,U=F.value;return U&&vX(U)=="object"&&r.call(U,"__await")?b.resolve(U.__await).then(function(D){w("next",D,k,d)},function(D){w("throw",D,k,d)}):b.resolve(U).then(function(D){F.value=D,k(F)},function(D){return w("throw",D,k,d)})}d(S.arg)}var v;n(this,"_invoke",{value:function(B,k){function d(){return new b(function(S,F){w(B,k,S,F)})}return v=v?v.then(d,d):d()}})}function q(m,b,w){var v="suspendedStart";return function(P,B){if(v==="executing")throw new Error("Generator is already running");if(v==="completed"){if(P==="throw")throw B;return f()}for(w.method=P,w.arg=B;;){var k=w.delegate;if(k){var d=W(k,w);if(d){if(d===l)continue;return d}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(v==="suspendedStart")throw v="completed",w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);v="executing";var S=h(m,b,w);if(S.type==="normal"){if(v=w.done?"completed":"suspendedYield",S.arg===l)continue;return{value:S.arg,done:w.done}}S.type==="throw"&&(v="completed",w.method="throw",w.arg=S.arg)}}}function W(m,b){var w=b.method,v=m.iterator[w];if(v===void 0)return b.delegate=null,w==="throw"&&m.iterator.return&&(b.method="return",b.arg=void 0,W(m,b),b.method==="throw")||w!=="return"&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+w+"' method")),l;var P=h(v,m.iterator,b.arg);if(P.type==="throw")return b.method="throw",b.arg=P.arg,b.delegate=null,l;var B=P.arg;return B?B.done?(b[m.resultName]=B.value,b.next=m.nextLoc,b.method!=="return"&&(b.method="next",b.arg=void 0),b.delegate=null,l):B:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,l)}function G(m){var b={tryLoc:m[0]};1 in m&&(b.catchLoc=m[1]),2 in m&&(b.finallyLoc=m[2],b.afterLoc=m[3]),this.tryEntries.push(b)}function z(m){var b=m.completion||{};b.type="normal",delete b.arg,m.completion=b}function te(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(G,this),this.reset(!0)}function _(m){if(m){var b=m[o];if(b)return b.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var w=-1,v=function P(){for(;++w<m.length;)if(r.call(m,w))return P.value=m[w],P.done=!1,P;return P.value=void 0,P.done=!0,P};return v.next=v}}return{next:f}}function f(){return{value:void 0,done:!0}}return x.prototype=A,n(N,"constructor",{value:A,configurable:!0}),n(A,"constructor",{value:x,configurable:!0}),x.displayName=c(A,a,"GeneratorFunction"),e.isGeneratorFunction=function(m){var b=typeof m=="function"&&m.constructor;return!!b&&(b===x||(b.displayName||b.name)==="GeneratorFunction")},e.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,A):(m.__proto__=A,c(m,a,"GeneratorFunction")),m.prototype=Object.create(N),m},e.awrap=function(m){return{__await:m}},R(V.prototype),c(V.prototype,s,function(){return this}),e.AsyncIterator=V,e.async=function(m,b,w,v,P){P===void 0&&(P=Promise);var B=new V(u(m,b,w,v),P);return e.isGeneratorFunction(b)?B:B.next().then(function(k){return k.done?k.value:B.next()})},R(N),c(N,a,"Generator"),c(N,o,function(){return this}),c(N,"toString",function(){return"[object Generator]"}),e.keys=function(m){var b=Object(m),w=[];for(var v in b)w.push(v);return w.reverse(),function P(){for(;w.length;){var B=w.pop();if(B in b)return P.value=B,P.done=!1,P}return P.done=!0,P}},e.values=_,te.prototype={constructor:te,reset:function(b){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!b)for(var w in this)w.charAt(0)==="t"&&r.call(this,w)&&!isNaN(+w.slice(1))&&(this[w]=void 0)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(b){if(this.done)throw b;var w=this;function v(F,U){return k.type="throw",k.arg=b,w.next=F,U&&(w.method="next",w.arg=void 0),!!U}for(var P=this.tryEntries.length-1;P>=0;--P){var B=this.tryEntries[P],k=B.completion;if(B.tryLoc==="root")return v("end");if(B.tryLoc<=this.prev){var d=r.call(B,"catchLoc"),S=r.call(B,"finallyLoc");if(d&&S){if(this.prev<B.catchLoc)return v(B.catchLoc,!0);if(this.prev<B.finallyLoc)return v(B.finallyLoc)}else if(d){if(this.prev<B.catchLoc)return v(B.catchLoc,!0)}else{if(!S)throw new Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return v(B.finallyLoc)}}}},abrupt:function(b,w){for(var v=this.tryEntries.length-1;v>=0;--v){var P=this.tryEntries[v];if(P.tryLoc<=this.prev&&r.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var B=P;break}}B&&(b==="break"||b==="continue")&&B.tryLoc<=w&&w<=B.finallyLoc&&(B=null);var k=B?B.completion:{};return k.type=b,k.arg=w,B?(this.method="next",this.next=B.finallyLoc,l):this.complete(k)},complete:function(b,w){if(b.type==="throw")throw b.arg;return b.type==="break"||b.type==="continue"?this.next=b.arg:b.type==="return"?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):b.type==="normal"&&w&&(this.next=w),l},finish:function(b){for(var w=this.tryEntries.length-1;w>=0;--w){var v=this.tryEntries[w];if(v.finallyLoc===b)return this.complete(v.completion,v.afterLoc),z(v),l}},catch:function(b){for(var w=this.tryEntries.length-1;w>=0;--w){var v=this.tryEntries[w];if(v.tryLoc===b){var P=v.completion;if(P.type==="throw"){var B=P.arg;z(v)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(b,w,v){return this.delegate={iterator:_(b),resultName:w,nextLoc:v},this.method==="next"&&(this.arg=void 0),l}},e}_c.exports=L7,_c.exports.__esModule=!0,_c.exports.default=_c.exports});var V7=L((r8e,F7)=>{p();y();var $x=K7()();F7.exports=$x;try{regeneratorRuntime=$x}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=$x:Function("r","regeneratorRuntime = r")($x)}});var H7=L((o8e,Cy)=>{p();y();function q7(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(u){r(u);return}a.done?t(c):Promise.resolve(c).then(n,i)}function AX(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(c){q7(o,n,i,s,a,"next",c)}function a(c){q7(o,n,i,s,a,"throw",c)}s(void 0)})}}Cy.exports=AX,Cy.exports.__esModule=!0,Cy.exports.default=Cy.exports});var w3=L((c8e,My)=>{p();y();function SX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}My.exports=SX,My.exports.__esModule=!0,My.exports.default=My.exports});var z7=L((l8e,Ry)=>{p();y();var W7=Ih().default;function EX(e,t){if(W7(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(W7(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Ry.exports=EX,Ry.exports.__esModule=!0,Ry.exports.default=Ry.exports});var j7=L((p8e,Oy)=>{p();y();var IX=Ih().default,kX=z7();function TX(e){var t=kX(e,"string");return IX(t)==="symbol"?t:String(t)}Oy.exports=TX,Oy.exports.__esModule=!0,Oy.exports.default=Oy.exports});var v3=L((g8e,Ny)=>{p();y();var PX=j7();function G7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PX(n.key),n)}}function _X(e,t,r){return t&&G7(e.prototype,t),r&&G7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Ny.exports=_X,Ny.exports.__esModule=!0,Ny.exports.default=Ny.exports});var $7=L((w8e,Bc)=>{p();y();function A3(e,t){return Bc.exports=A3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports,A3(e,t)}Bc.exports=A3,Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports});var S3=L((S8e,Uy)=>{p();y();var BX=$7();function CX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BX(e,t)}Uy.exports=CX,Uy.exports.__esModule=!0,Uy.exports.default=Uy.exports});var Y7=L((k8e,Dy)=>{p();y();function MX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Dy.exports=MX,Dy.exports.__esModule=!0,Dy.exports.default=Dy.exports});var E3=L((_8e,Ly)=>{p();y();var RX=Ih().default,OX=Y7();function NX(e,t){if(t&&(RX(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OX(e)}Ly.exports=NX,Ly.exports.__esModule=!0,Ly.exports.default=Ly.exports});var k3=L((M8e,Cc)=>{p();y();function I3(e){return Cc.exports=I3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cc.exports.__esModule=!0,Cc.exports.default=Cc.exports,I3(e)}Cc.exports=I3,Cc.exports.__esModule=!0,Cc.exports.default=Cc.exports});var Z7=L(Jx=>{"use strict";p();y();var Uu=G_();Object.defineProperty(Jx,"__esModule",{value:!0});Jx.default=void 0;var Nu=Uu(V7()),Yx=Uu(H7()),UX=Uu(Ih()),DX=Uu(w3()),LX=Uu(v3()),KX=Uu(S3()),FX=Uu(E3()),J7=Uu(k3()),VX=$_();function qX(e){var t=HX();return function(){var n=(0,J7.default)(e),i;if(t){var o=(0,J7.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,FX.default)(this,i)}}function HX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var WX=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},zX=function(e){(0,KX.default)(r,e);var t=qX(r);function r(n){var i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;(0,DX.default)(this,r);var c=s.autoconnect,u=c===void 0?!0:c,h=s.reconnect,l=h===void 0?!0:h,g=s.reconnect_interval,x=g===void 0?1e3:g,A=s.max_reconnects,E=A===void 0?5:A,C=WX(s,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return i=t.call(this),i.webSocketFactory=n,i.queue={},i.rpc_id=0,i.address=o,i.autoconnect=u,i.ready=!1,i.reconnect=l,i.reconnect_timer_id=void 0,i.reconnect_interval=x,i.max_reconnects=E,i.rest_options=C,i.current_reconnects=0,i.generate_request_id=a||function(){return++i.rpc_id},i.autoconnect&&i._connect(i.address,Object.assign({autoconnect:i.autoconnect,reconnect:i.reconnect,reconnect_interval:i.reconnect_interval,max_reconnects:i.max_reconnects},i.rest_options)),i}return(0,LX.default)(r,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(i,o,s,a){var c=this;return!a&&(0,UX.default)(s)==="object"&&(a=s,s=null),new Promise(function(u,h){if(!c.ready)return h(new Error("socket not ready"));var l=c.generate_request_id(i,o),g={jsonrpc:"2.0",method:i,params:o||null,id:l};c.socket.send(JSON.stringify(g),a,function(x){if(x)return h(x);c.queue[l]={promise:[u,h]},s&&(c.queue[l].timeout=setTimeout(function(){delete c.queue[l],h(new Error("reply timeout"))},s))})})}},{key:"login",value:function(){var n=(0,Yx.default)(Nu.default.mark(function o(s){var a;return Nu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.call("rpc.login",s);case 2:if(a=u.sent,a){u.next=5;break}throw new Error("authentication failed");case 5:return u.abrupt("return",a);case 6:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"listMethods",value:function(){var n=(0,Yx.default)(Nu.default.mark(function o(){return Nu.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.call("__listMethods");case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"notify",value:function(i,o){var s=this;return new Promise(function(a,c){if(!s.ready)return c(new Error("socket not ready"));var u={jsonrpc:"2.0",method:i,params:o||null};s.socket.send(JSON.stringify(u),function(h){if(h)return c(h);a()})})}},{key:"subscribe",value:function(){var n=(0,Yx.default)(Nu.default.mark(function o(s){var a;return Nu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.on",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed subscribing to an event '"+s+"' with: "+a[s]);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"unsubscribe",value:function(){var n=(0,Yx.default)(Nu.default.mark(function o(s){var a;return Nu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return typeof s=="string"&&(s=[s]),u.next=3,this.call("rpc.off",s);case 3:if(a=u.sent,!(typeof s=="string"&&a[s]!=="ok")){u.next=6;break}throw new Error("Failed unsubscribing from an event with: "+a);case 6:return u.abrupt("return",a);case 7:case"end":return u.stop()}},o,this)}));function i(o){return n.apply(this,arguments)}return i}()},{key:"close",value:function(i,o){this.socket.close(i||1e3,o)}},{key:"_connect",value:function(i,o){var s=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(i,o),this.socket.addEventListener("open",function(){s.ready=!0,s.emit("open"),s.current_reconnects=0}),this.socket.addEventListener("message",function(a){var c=a.data;c instanceof ArrayBuffer&&(c=Buffer.from(c).toString());try{c=JSON.parse(c)}catch{return}if(c.notification&&s.listeners(c.notification).length){if(!Object.keys(c.params).length)return s.emit(c.notification);var u=[c.notification];if(c.params.constructor===Object)u.push(c.params);else for(var h=0;h<c.params.length;h++)u.push(c.params[h]);return Promise.resolve().then(function(){s.emit.apply(s,u)})}if(!s.queue[c.id])return c.method&&c.params?Promise.resolve().then(function(){s.emit(c.method,c.params)}):void 0;"error"in c=="result"in c&&s.queue[c.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),s.queue[c.id].timeout&&clearTimeout(s.queue[c.id].timeout),c.error?s.queue[c.id].promise[1](c.error):s.queue[c.id].promise[0](c.result),delete s.queue[c.id]}),this.socket.addEventListener("error",function(a){return s.emit("error",a)}),this.socket.addEventListener("close",function(a){var c=a.code,u=a.reason;s.ready&&setTimeout(function(){return s.emit("close",c,u)},0),s.ready=!1,s.socket=void 0,c!==1e3&&(s.current_reconnects++,s.reconnect&&(s.max_reconnects>s.current_reconnects||s.max_reconnects===0)&&(s.reconnect_timer_id=setTimeout(function(){return s._connect(i,o)},s.reconnect_interval)))})}}]),r}(VX.EventEmitter);Jx.default=zX});var X7=L(T3=>{"use strict";p();y();var Ky=G_();Object.defineProperty(T3,"__esModule",{value:!0});T3.default=eee;var jX=Ky(w3()),GX=Ky(v3()),$X=Ky(S3()),YX=Ky(E3()),Q7=Ky(k3()),JX=$_();function ZX(e){var t=QX();return function(){var n=(0,Q7.default)(e),i;if(t){var o=(0,Q7.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,YX.default)(this,i)}}function QX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var XX=function(e){(0,$X.default)(r,e);var t=ZX(r);function r(n,i,o){var s;return(0,jX.default)(this,r),s=t.call(this),s.socket=new self.WebSocket(n,o),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(a){return s.emit("message",a.data)},s.socket.onerror=function(a){return s.emit("error",a)},s.socket.onclose=function(a){s.emit("close",a.code,a.reason)},s}return(0,GX.default)(r,[{key:"send",value:function(i,o,s){var a=s||o;try{this.socket.send(i),a()}catch(c){a(c)}}},{key:"close",value:function(i,o){this.socket.close(i,o)}},{key:"addEventListener",value:function(i,o,s){this.socket.addEventListener(i,o,s)}}]),r}(JX.EventEmitter);function eee(e,t){return new XX(e,t)}});var aC=L(rr=>{"use strict";p();y();Object.defineProperty(rr,"__esModule",{value:!0});rr.shake256=rr.shake128=rr.keccak_512=rr.keccak_384=rr.keccak_256=rr.keccak_224=rr.sha3_512=rr.sha3_384=rr.sha3_256=rr.sha3_224=rr.Keccak=rr.keccakP=void 0;var kh=Jb(),qy=LE(),Vy=Su(),[rC,nC,iC]=[[],[],[]],tee=BigInt(0),Fy=BigInt(1),ree=BigInt(2),nee=BigInt(7),iee=BigInt(256),oee=BigInt(113);for(let e=0,t=Fy,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],rC.push(2*(5*n+r)),nC.push((e+1)*(e+2)/2%64);let i=tee;for(let o=0;o<7;o++)t=(t<<Fy^(t>>nee)*oee)%iee,t&ree&&(i^=Fy<<(Fy<<BigInt(o))-Fy);iC.push(i)}var[see,aee]=qy.default.split(iC,!0),eC=(e,t,r)=>r>32?qy.default.rotlBH(e,t,r):qy.default.rotlSH(e,t,r),tC=(e,t,r)=>r>32?qy.default.rotlBL(e,t,r):qy.default.rotlSL(e,t,r);function oC(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],l=eC(u,h,1)^r[a],g=tC(u,h,1)^r[a+1];for(let x=0;x<50;x+=10)e[s+x]^=l,e[s+x+1]^=g}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=nC[s],c=eC(i,o,a),u=tC(i,o,a),h=rC[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=see[n],e[1]^=aee[n]}r.fill(0)}rr.keccakP=oC;var Hy=class e extends Vy.Hash{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,kh.default.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Vy.u32)(this.state)}keccak(){oC(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){kh.default.exists(this);let{blockLen:r,state:n}=this;t=(0,Vy.toBytes)(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){kh.default.exists(this,!1),kh.default.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return kh.default.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(kh.default.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}};rr.Keccak=Hy;var Du=(e,t,r)=>(0,Vy.wrapConstructor)(()=>new Hy(t,e,r));rr.sha3_224=Du(6,144,224/8);rr.sha3_256=Du(6,136,256/8);rr.sha3_384=Du(6,104,384/8);rr.sha3_512=Du(6,72,512/8);rr.keccak_224=Du(1,144,224/8);rr.keccak_256=Du(1,136,256/8);rr.keccak_384=Du(1,104,384/8);rr.keccak_512=Du(1,72,512/8);var sC=(e,t,r)=>(0,Vy.wrapConstructorWithOpts)((n={})=>new Hy(t,e,n.dkLen===void 0?r:n.dkLen,!0));rr.shake128=sC(31,168,128/8);rr.shake256=sC(31,136,256/8)});var uC=L(Wy=>{"use strict";p();y();Object.defineProperty(Wy,"__esModule",{value:!0});Wy.hmac=void 0;var Zx=Jb(),cC=Su(),Qx=class extends cC.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Zx.default.hash(t);let n=(0,cC.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Zx.default.exists(this),this.iHash.update(t),this}digestInto(t){Zx.default.exists(this),Zx.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},cee=(e,t,r)=>new Qx(e,t).update(r).digest();Wy.hmac=cee;Wy.hmac.create=(e,t)=>new Qx(e,t)});var C3=L(At=>{"use strict";p();y();Object.defineProperty(At,"__esModule",{value:!0});At.utils=At.schnorr=At.verify=At.signSync=At.sign=At.getSharedSecret=At.recoverPublicKey=At.getPublicKey=At.Signature=At.Point=At.CURVE=void 0;var uee=Hb(),_t=BigInt(0),ar=BigInt(1),Fu=BigInt(2),jy=BigInt(3),fC=BigInt(8),Jt=Object.freeze({a:_t,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ar,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});At.CURVE=Jt;var lC=(e,t)=>(e+t/Fu)/t,Xx={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=Jt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ar*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=lC(o*e,t),c=lC(-n*e,t),u=me(e-a*r-c*i,t),h=me(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}},Vs=32,kl=32,bC=32,iw=Vs+1,ow=2*Vs+1;function dC(e){let{a:t,b:r}=Jt,n=me(e*e),i=me(n*e);return me(i+t*e+r)}var ew=Jt.a===_t,$y=class extends Error{constructor(t){super(t)}};function hC(e){if(!(e instanceof Bi))throw new TypeError("JacobianPoint expected")}var Bi=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof nr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(nr.ZERO)?e.ZERO:new e(t.x,t.y,ar)}static toAffineBatch(t){let r=pee(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){hC(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=me(i*i),u=me(a*a),h=me(r*u),l=me(o*c),g=me(me(n*a)*u),x=me(me(s*i)*c);return h===l&&g===x}negate(){return new e(this.x,me(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=me(t*t),o=me(r*r),s=me(o*o),a=t+o,c=me(Fu*(me(a*a)-i-s)),u=me(jy*i),h=me(u*u),l=me(h-Fu*c),g=me(u*(c-l)-fC*s),x=me(Fu*r*n);return new e(l,g,x)}add(t){hC(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===_t||s===_t)return this;if(r===_t||n===_t)return t;let c=me(i*i),u=me(a*a),h=me(r*u),l=me(o*c),g=me(me(n*a)*u),x=me(me(s*i)*c),A=me(l-h),E=me(x-g);if(A===_t)return E===_t?this.double():e.ZERO;let C=me(A*A),M=me(A*C),N=me(h*C),R=me(E*E-M-Fu*N),V=me(E*(N-R)-g*M),q=me(i*a*A);return new e(R,V,q)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===_t)return r;let n=mC(t);if(n===ar)return this;if(!ew){let l=r,g=this;for(;n>_t;)n&ar&&(l=l.add(g)),g=g.double(),n>>=ar;return l}let{k1neg:i,k1:o,k2neg:s,k2:a}=Xx.splitScalar(n),c=r,u=r,h=this;for(;o>_t||a>_t;)o&ar&&(c=c.add(h)),a&ar&&(u=u.add(h)),h=h.double(),o>>=ar,a>>=ar;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(me(u.x*Xx.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=ew?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=nr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&P3.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),P3.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(ew?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=ar);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(tw(M,i[E])):o=o.add(tw(N,i[C]))}return{p:o,f:s}}multiply(t,r){let n=mC(t),i,o;if(ew){let{k1neg:s,k1:a,k2neg:c,k2:u}=Xx.splitScalar(n),{p:h,f:l}=this.wNAF(a,r),{p:g,f:x}=this.wNAF(u,r);h=tw(s,h),g=tw(c,g),g=new e(me(g.x*Xx.beta),g.y,g.z),i=h.add(g),o=l.add(x)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?fC:Mh(i));let s=t,a=me(s*s),c=me(a*s),u=me(r*a),h=me(n*c),l=me(i*s);if(o)return nr.ZERO;if(l!==ar)throw new Error("invZ was invalid");return new nr(u,h)}};Bi.BASE=new Bi(Jt.Gx,Jt.Gy,ar);Bi.ZERO=new Bi(_t,ar,_t);function tw(e,t){let r=t.negate();return e?r:t}var P3=new WeakMap,nr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,P3.delete(this)}hasEvenY(){return this.y%Fu===_t}static fromCompressedHex(t){let r=t.length===32,n=mo(r?t:t.subarray(1));if(!nw(n))throw new Error("Point is not on curve");let i=dC(n),o=hee(i),s=(o&ar)===ar;r?s&&(o=me(-o)):(t[0]&1)===1!==s&&(o=me(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=mo(t.subarray(1,Vs+1)),n=mo(t.subarray(Vs+1,Vs*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=wa(t),n=r.length,i=r[0];if(n===Vs)return this.fromCompressedHex(r);if(n===iw&&(i===2||i===3))return this.fromCompressedHex(r);if(n===ow&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${iw} compressed bytes or ${ow} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(Tl(t))}static fromSignature(t,r,n){let{r:i,s:o}=wC(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=_3(wa(t)),{n:a}=Jt,c=n===2||n===3?i+a:i,u=Mh(c,a),h=me(-s*u,a),l=me(o*u,a),g=n&1?"03":"02",x=e.fromHex(g+Vu(c)),A=e.BASE.multiplyAndAddUnsafe(x,h,l);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(t=!1){return qu(this.toHex(t))}toHex(t=!1){let r=Vu(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Vu(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!nw(r)||!nw(n))throw new Error(t);let i=me(n*n),o=dC(r);if(me(i-o)!==_t)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,me(-this.y))}double(){return Bi.fromAffine(this).double().toAffine()}add(t){return Bi.fromAffine(this).add(Bi.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Bi.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Bi.fromAffine(this),o=r===_t||r===ar||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=Bi.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(Bi.ZERO)?void 0:a.toAffine()}};At.Point=nr;nr.BASE=new nr(Jt.Gx,Jt.Gy);nr.ZERO=new nr(_t,_t);function pC(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function yC(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${Ph(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:mo(r),left:e.subarray(t+2)}}function fee(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${Ph(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=yC(e.subarray(2)),{data:n,left:i}=yC(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ph(i)}`);return{r:t,s:n}}var Il=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?Ph(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(sw(i.slice(0,64)),sw(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=fee(r?t:qu(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Bh(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Bh(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=Jt.n>>ar;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,me(-this.s,Jt.n)):this}toDERRawBytes(){return qu(this.toDERHex())}toDERHex(){let t=pC(zy(this.s)),r=pC(zy(this.r)),n=t.length/2,i=r.length/2,o=zy(n),s=zy(i);return`30${zy(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return qu(this.toCompactHex())}toCompactHex(){return Vu(this.r)+Vu(this.s)}};At.Signature=Il;function Ku(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var lee=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ph(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=lee[e[r]];return t}var dee=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Vu(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(_t<=e&&e<dee))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function _h(e){let t=qu(Vu(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function zy(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function sw(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function qu(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function mo(e){return sw(Ph(e))}function wa(e){return e instanceof Uint8Array?Uint8Array.from(e):qu(e)}function mC(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Bh(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function me(e,t=Jt.P){let r=e%t;return r>=_t?r:t+r}function qo(e,t){let{P:r}=Jt,n=e;for(;t-- >_t;)n*=n,n%=r;return n}function hee(e){let{P:t}=Jt,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=qo(u,jy)*u%t,l=qo(h,jy)*u%t,g=qo(l,Fu)*c%t,x=qo(g,n)*g%t,A=qo(x,i)*x%t,E=qo(A,s)*A%t,C=qo(E,a)*E%t,M=qo(C,s)*A%t,N=qo(M,jy)*u%t,R=qo(N,o)*x%t,V=qo(R,r)*c%t,q=qo(V,Fu);if(q*q%t!==e)throw new Error("Cannot find square root");return q}function Mh(e,t=Jt.P){if(e===_t||t<=_t)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=me(e,t),n=t,i=_t,o=ar,s=ar,a=_t;for(;r!==_t;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==ar)throw new Error("invert: does not exist");return me(i,t)}function pee(e,t=Jt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===_t?o:(r[a]=o,me(o*s,t)),ar),i=Mh(n,t);return e.reduceRight((o,s,a)=>s===_t?o:(r[a]=me(o*r[a],t),me(o*s,t)),i),r}function yee(e){let t=e.length*8-kl*8,r=mo(e);return t>0?r>>BigInt(t):r}function _3(e,t=!1){let r=yee(e);if(t)return r;let{n}=Jt;return r>=n?r-n:r}var Th,Gy,aw=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return At.utils.hmacSha256(this.k,...t)}hmacSync(...t){return Gy(this.k,...t)}checkSync(){if(typeof Gy!="function")throw new $y("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Ku(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Ku(...r)}};function Bh(e){return _t<e&&e<Jt.n}function nw(e){return _t<e&&e<Jt.P}function xC(e,t,r,n=!0){let{n:i}=Jt,o=_3(e,!0);if(!Bh(o))return;let s=Mh(o,i),a=nr.BASE.multiply(o),c=me(a.x,i);if(c===_t)return;let u=me(s*me(t+r*c,i),i);if(u===_t)return;let h=new Il(c,u),l=(a.x===h.r?0:2)|Number(a.y&ar);return n&&h.hasHighS()&&(h=h.normalizeS(),l^=1),{sig:h,recovery:l}}function Tl(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*kl)throw new Error("Expected 32 bytes of private key");t=sw(e)}else if(e instanceof Uint8Array){if(e.length!==kl)throw new Error("Expected 32 bytes of private key");t=mo(e)}else throw new TypeError("Expected valid private key");if(!Bh(t))throw new Error("Expected private key: 0 < key < n");return t}function B3(e){return e instanceof nr?(e.assertValidity(),e):nr.fromHex(e)}function wC(e){if(e instanceof Il)return e.assertValidity(),e;try{return Il.fromDER(e)}catch{return Il.fromCompact(e)}}function mee(e,t=!1){return nr.fromPrivateKey(e).toRawBytes(t)}At.getPublicKey=mee;function gee(e,t,r,n=!1){return nr.fromSignature(e,t,r).toRawBytes(n)}At.recoverPublicKey=gee;function gC(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===iw||n===ow:r?n===iw*2||n===ow*2:e instanceof nr}function bee(e,t,r=!1){if(gC(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!gC(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=B3(t);return n.assertValidity(),n.multiply(Tl(e)).toRawBytes(r)}At.getSharedSecret=bee;function vC(e){let t=e.length>Vs?e.slice(0,Vs):e;return mo(t)}function xee(e){let t=vC(e),r=me(t,Jt.n);return AC(r<_t?t:r)}function AC(e){return _h(e)}function SC(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=wa(e),i=Tl(t),o=[AC(i),xee(n)];if(r!=null){r===!0&&(r=At.utils.randomBytes(Vs));let c=wa(r);if(c.length!==Vs)throw new Error(`sign: Expected ${Vs} bytes of extra data`);o.push(c)}let s=Ku(...o),a=vC(n);return{seed:s,m:a,d:i}}function EC(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function wee(e,t,r={}){let{seed:n,m:i,d:o}=SC(e,t,r.extraEntropy),s=new aw(bC,kl);await s.reseed(n);let a;for(;!(a=xC(await s.generate(),i,o,r.canonical));)await s.reseed();return EC(a,r)}At.sign=wee;function vee(e,t,r={}){let{seed:n,m:i,d:o}=SC(e,t,r.extraEntropy),s=new aw(bC,kl);s.reseedSync(n);let a;for(;!(a=xC(s.generateSync(),i,o,r.canonical));)s.reseedSync();return EC(a,r)}At.signSync=vee;var Aee={strict:!0};function See(e,t,r,n=Aee){let i;try{i=wC(e),t=wa(t)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=_3(t),c;try{c=B3(r)}catch{return!1}let{n:u}=Jt,h=Mh(s,u),l=me(a*h,u),g=me(o*h,u),x=nr.BASE.multiplyAndAddUnsafe(c,l,g);return x?me(x.x,u)===o:!1}At.verify=See;function cw(e){return me(mo(e),Jt.n)}var Ch=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=wa(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=mo(r.subarray(0,32)),i=mo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!nw(t)||!Bh(r))throw new Error("Invalid signature")}toHex(){return Vu(this.r)+Vu(this.s)}toRawBytes(){return qu(this.toHex())}};function Eee(e){return nr.fromPrivateKey(e).toRawX()}var uw=class{constructor(t,r,n=At.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=wa(t);let{x:i,scalar:o}=this.getScalar(Tl(r));if(this.px=i,this.d=o,this.rand=wa(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=nr.fromPrivateKey(t),n=r.hasEvenY()?t:Jt.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return _h(t^mo(r))}finalizeNonce(t){let r=me(mo(t),Jt.n);if(r===_t)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new Ch(t.x,me(r+n*i,Jt.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=At.utils.taggedHash,s=this.initNonce(r,await o(Lu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Lu.nonce,s,n,t)),h=cw(await o(Lu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return await TC(l,t,n)||this.error(),l}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=At.utils.taggedHashSync,s=this.initNonce(r,o(Lu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Lu.nonce,s,n,t)),h=cw(o(Lu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return PC(l,t,n)||this.error(),l}};async function Iee(e,t,r){return new uw(e,t,r).calc()}function kee(e,t,r){return new uw(e,t,r).calcSync()}function IC(e,t,r){let n=e instanceof Ch,i=n?e:Ch.fromHex(e);return n&&i.assertValidity(),{...i,m:wa(t),P:B3(r)}}function kC(e,t,r,n){let i=nr.BASE.multiplyAndAddUnsafe(t,Tl(r),me(-n,Jt.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function TC(e,t,r){try{let{r:n,s:i,m:o,P:s}=IC(e,t,r),a=cw(await At.utils.taggedHash(Lu.challenge,_h(n),s.toRawX(),o));return kC(n,s,i,a)}catch{return!1}}function PC(e,t,r){try{let{r:n,s:i,m:o,P:s}=IC(e,t,r),a=cw(At.utils.taggedHashSync(Lu.challenge,_h(n),s.toRawX(),o));return kC(n,s,i,a)}catch(n){if(n instanceof $y)throw n;return!1}}At.schnorr={Signature:Ch,getPublicKey:Eee,sign:Iee,verify:TC,signSync:kee,verifySync:PC};nr.BASE._setWindowSize(8);var yo={node:uee,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Lu={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},rw={};At.utils={bytesToHex:Ph,hexToBytes:qu,concatBytes:Ku,mod:me,invert:Mh,isValidPrivateKey(e){try{return Tl(e),!0}catch{return!1}},_bigintTo32Bytes:_h,_normalizePrivateKey:Tl,hashToPrivateKey:e=>{e=wa(e);let t=kl+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=me(mo(e),Jt.n-ar)+ar;return _h(r)},randomBytes:(e=32)=>{if(yo.web)return yo.web.getRandomValues(new Uint8Array(e));if(yo.node){let{randomBytes:t}=yo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>At.utils.hashToPrivateKey(At.utils.randomBytes(kl+8)),precompute(e=8,t=nr.BASE){let r=t===nr.BASE?t:new nr(t.x,t.y);return r._setWindowSize(e),r.multiply(jy),r},sha256:async(...e)=>{if(yo.web){let t=await yo.web.subtle.digest("SHA-256",Ku(...e));return new Uint8Array(t)}else if(yo.node){let{createHash:t}=yo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(yo.web){let r=await yo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Ku(...t),i=await yo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(yo.node){let{createHmac:r}=yo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=rw[e];if(r===void 0){let n=await At.utils.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Ku(n,n),rw[e]=r}return At.utils.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Th!="function")throw new $y("sha256Sync is undefined, you need to set it");let r=rw[e];if(r===void 0){let n=Th(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Ku(n,n),rw[e]=r}return Th(r,...t)},_JacobianPoint:Bi};Object.defineProperties(At.utils,{sha256Sync:{configurable:!1,get(){return Th},set(e){Th||(Th=e)}},hmacSha256Sync:{configurable:!1,get(){return Gy},set(e){Gy||(Gy=e)}}})});var Pw=L(he=>{"use strict";p();y();Object.defineProperty(he,"__esModule",{value:!0});var Pe=hy(),Tee=FB(),Pee=e7(),_ee=qb(),Bee=Ns(),L3=sx(),M3=s7(),jC=Iy(),K3=i3(),I=p7(),Cee=D7(),Mee=Z7(),Ree=X7(),_C=aC(),Oee=uC(),Nee=C3();function am(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function i6(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var zu=i6(Pee),BC=am(_ee),zn=am(Bee),H=i6(jC),Uee=am(Cee),Dee=am(Mee),Lee=am(Ree),Ew=i6(Nee);zu.utils.sha512Sync=(...e)=>Tee.sha512(zu.utils.concatBytes(...e));var Kee=zu.utils.randomPrivateKey,CC=()=>{let e=zu.utils.randomPrivateKey(),t=pw(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},pw=zu.sync.getPublicKey;function MC(e){try{return zu.Point.fromHex(e,!0),!0}catch{return!1}}var o6=(e,t)=>zu.sync.sign(e,t.slice(0,32)),Fee=zu.sync.verify,dt=e=>Pe.Buffer.isBuffer(e)?e:e instanceof Uint8Array?Pe.Buffer.from(e.buffer,e.byteOffset,e.byteLength):Pe.Buffer.from(e),Qy=class{constructor(t){Object.assign(this,t)}encode(){return Pe.Buffer.from(M3.serialize(Zy,this))}static decode(t){return M3.deserialize(Zy,this,t)}static decodeUnchecked(t){return M3.deserializeUnchecked(Zy,this,t)}},F3=class extends Qy{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(r=>{this.enum=r})}},Zy=new Map,GC,$C=32,Ea=32;function Vee(e){return e._bn!==void 0}var RC=1;GC=Symbol.toStringTag;var ye=class e extends Qy{constructor(t){if(super({}),this._bn=void 0,Vee(t))this._bn=t._bn;else{if(typeof t=="string"){let r=zn.default.decode(t);if(r.length!=Ea)throw new Error("Invalid public key input");this._bn=new BC.default(r)}else this._bn=new BC.default(t);if(this._bn.byteLength()>Ea)throw new Error("Invalid public key input")}}static unique(){let t=new e(RC);return RC+=1,new e(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return zn.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(Pe.Buffer);if(t.length===Ea)return t;let r=Pe.Buffer.alloc(32);return t.copy(r,32-t.length),r}get[GC](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,r,n){let i=Pe.Buffer.concat([t.toBuffer(),Pe.Buffer.from(r),n.toBuffer()]),o=L3.sha256(i);return new e(o)}static createProgramAddressSync(t,r){let n=Pe.Buffer.alloc(0);t.forEach(function(o){if(o.length>$C)throw new TypeError("Max seed length exceeded");n=Pe.Buffer.concat([n,dt(o)])}),n=Pe.Buffer.concat([n,r.toBuffer(),Pe.Buffer.from("ProgramDerivedAddress")]);let i=L3.sha256(n);if(MC(i))throw new Error("Invalid seeds, address must fall off the curve");return new e(i)}static async createProgramAddress(t,r){return this.createProgramAddressSync(t,r)}static findProgramAddressSync(t,r){let n=255,i;for(;n!=0;){try{let o=t.concat(Pe.Buffer.from([n]));i=this.createProgramAddressSync(o,r)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,r){return this.findProgramAddressSync(t,r)}static isOnCurve(t){let r=new e(t);return MC(r.toBytes())}};ye.default=new ye("11111111111111111111111111111111");Zy.set(ye,{kind:"struct",fields:[["_bn","u256"]]});var V3=class{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){let r=dt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=dt(Kee()),this._publicKey=dt(pw(this._secretKey))}get publicKey(){return new ye(this._publicKey)}get secretKey(){return Pe.Buffer.concat([this._secretKey,this._publicKey],64)}},qee=new ye("BPFLoader1111111111111111111111111111111111"),Wu=1232,Iw=127,Xy=64,em=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(em.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var tm=class extends Error{constructor(t,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(tm.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Hu=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Hu.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Bl=class{constructor(t,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let r of this.keySegments()){if(t<r.length)return r[t];t-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return t.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},bt=(e="publicKey")=>H.blob(32,e),Hee=(e="signature")=>H.blob(64,e),_l=(e="string")=>{let t=H.struct([H.u32("length"),H.u32("lengthPadding"),H.blob(H.offset(H.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(o,s)=>r(o,s).chars.toString(),i.encode=(o,s,a)=>{let c={chars:Pe.Buffer.from(o,"utf8")};return n(c,s,a)},i.alloc=o=>H.u32().span+H.u32().span+Pe.Buffer.from(o,"utf8").length,i},Wee=(e="authorized")=>H.struct([bt("staker"),bt("withdrawer")],e),zee=(e="lockup")=>H.struct([H.ns64("unixTimestamp"),H.ns64("epoch"),bt("custodian")],e),jee=(e="voteInit")=>H.struct([bt("nodePubkey"),bt("authorizedVoter"),bt("authorizedWithdrawer"),H.u8("commission")],e),Gee=(e="voteAuthorizeWithSeedArgs")=>H.struct([H.u32("voteAuthorizationType"),bt("currentAuthorityDerivedKeyOwnerPubkey"),_l("currentAuthorityDerivedKeySeed"),bt("newAuthorized")],e);function YC(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return YC({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function Yi(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(n&127)<<r*7,r+=1,!(n&128))break}return t}function go(e,t){let r=t;for(;;){let n=r&127;if(r>>=7,r==0){e.push(n);break}else n|=128,e.push(n)}}function Lt(e,t){if(!e)throw new Error(t||"Assertion failed")}var yw=class e{constructor(t,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}static compile(t,r){let n=new Map,i=s=>{let a=s.toBase58(),c=n.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,c)),c},o=i(r);o.isSigner=!0,o.isWritable=!0;for(let s of t){i(s.programId).isInvoked=!0;for(let a of s.keys){let c=i(a.pubkey);c.isSigner||=a.isSigner,c.isWritable||=a.isWritable}}return new e(r,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];Lt(t.length<=256,"Max static account keys length exceeded");let r=t.filter(([,c])=>c.isSigner&&c.isWritable),n=t.filter(([,c])=>c.isSigner&&!c.isWritable),i=t.filter(([,c])=>!c.isSigner&&c.isWritable),o=t.filter(([,c])=>!c.isSigner&&!c.isWritable),s={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{Lt(r.length>0,"Expected at least one writable signer key");let[c]=r[0];Lt(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let a=[...r.map(([c])=>new ye(c)),...n.map(([c])=>new ye(c)),...i.map(([c])=>new ye(c)),...o.map(([c])=>new ye(c))];return[s,a]}extractTableLookup(t){let[r,n]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(t,r){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(r(s)){let a=new ye(o),c=t.findIndex(u=>u.equals(a));c>=0&&(Lt(c<256,"Max lookup table index exceeded"),n.push(c),i.push(a),this.keyMetaMap.delete(o))}return[n,i]}},JC="Reached end of buffer unexpectedly";function Aa(e){if(e.length===0)throw new Error(JC);return e.shift()}function Ji(e,...t){let[r]=t;if(t.length===2?r+(t[1]??0)>e.length:r>=e.length)throw new Error(JC);return e.splice(...t)}var Ia=class e{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(r=>new ye(r)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:zn.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Bl(this.staticAccountKeys)}static compile(t){let r=yw.compile(t.instructions,t.payerKey),[n,i]=r.getMessageComponents(),s=new Bl(i).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:zn.default.encode(a.data)}));return new e({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-r,o=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=r-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,r)=>!this.isProgramId(r))}serialize(){let t=this.accountKeys.length,r=[];go(r,t);let n=this.instructions.map(l=>{let{accounts:g,programIdIndex:x}=l,A=Array.from(zn.default.decode(l.data)),E=[];go(E,g.length);let C=[];return go(C,A.length),{programIdIndex:x,keyIndicesCount:Pe.Buffer.from(E),keyIndices:g,dataLength:Pe.Buffer.from(C),data:A}}),i=[];go(i,n.length);let o=Pe.Buffer.alloc(Wu);Pe.Buffer.from(i).copy(o);let s=i.length;n.forEach(l=>{let x=H.struct([H.u8("programIdIndex"),H.blob(l.keyIndicesCount.length,"keyIndicesCount"),H.seq(H.u8("keyIndex"),l.keyIndices.length,"keyIndices"),H.blob(l.dataLength.length,"dataLength"),H.seq(H.u8("userdatum"),l.data.length,"data")]).encode(l,o,s);s+=x}),o=o.slice(0,s);let a=H.struct([H.blob(1,"numRequiredSignatures"),H.blob(1,"numReadonlySignedAccounts"),H.blob(1,"numReadonlyUnsignedAccounts"),H.blob(r.length,"keyCount"),H.seq(bt("key"),t,"keys"),bt("recentBlockhash")]),c={numRequiredSignatures:Pe.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Pe.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Pe.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Pe.Buffer.from(r),keys:this.accountKeys.map(l=>dt(l.toBytes())),recentBlockhash:zn.default.decode(this.recentBlockhash)},u=Pe.Buffer.alloc(2048),h=a.encode(c,u);return o.copy(u,h),u.slice(0,h+o.length)}static from(t){let r=[...t],n=Aa(r);if(n!==(n&Iw))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=Aa(r),o=Aa(r),s=Yi(r),a=[];for(let g=0;g<s;g++){let x=Ji(r,0,Ea);a.push(new ye(Pe.Buffer.from(x)))}let c=Ji(r,0,Ea),u=Yi(r),h=[];for(let g=0;g<u;g++){let x=Aa(r),A=Yi(r),E=Ji(r,0,A),C=Yi(r),M=Ji(r,0,C),N=zn.default.encode(Pe.Buffer.from(M));h.push({programIdIndex:x,accounts:E,data:N})}let l={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:zn.default.encode(Pe.Buffer.from(c)),accountKeys:a,instructions:h};return new e(l)}},Rh=class e{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let r of this.addressTableLookups)t+=r.readonlyIndexes.length+r.writableIndexes.length;return t}getAccountKeys(t){let r;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)r=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Bl(this.staticAccountKeys,r)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let i=t-n,o=this.addressTableLookups.reduce((s,a)=>s+a.writableIndexes.length,0);return i<o}else if(t>=this.header.numRequiredSignatures){let i=t-r,s=n-r-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=r-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){let r={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=t.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)r.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)r.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(t){let r=yw.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=t.addressLookupTableAccounts||[];for(let h of o){let l=r.extractTableLookup(h);if(l!==void 0){let[g,{writable:x,readonly:A}]=l;n.push(g),i.writable.push(...x),i.readonly.push(...A)}}let[s,a]=r.getMessageComponents(),u=new Bl(a,i).compileInstructions(t.instructions);return new e({header:s,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){let t=Array();go(t,this.staticAccountKeys.length);let r=this.serializeInstructions(),n=Array();go(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();go(o,this.addressTableLookups.length);let s=H.struct([H.u8("prefix"),H.struct([H.u8("numRequiredSignatures"),H.u8("numReadonlySignedAccounts"),H.u8("numReadonlyUnsignedAccounts")],"header"),H.blob(t.length,"staticAccountKeysLength"),H.seq(bt(),this.staticAccountKeys.length,"staticAccountKeys"),bt("recentBlockhash"),H.blob(n.length,"instructionsLength"),H.blob(r.length,"serializedInstructions"),H.blob(o.length,"addressTableLookupsLength"),H.blob(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(Wu),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:zn.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let t=0,r=new Uint8Array(Wu);for(let n of this.compiledInstructions){let i=Array();go(i,n.accountKeyIndexes.length);let o=Array();go(o,n.data.length);let s=H.struct([H.u8("programIdIndex"),H.blob(i.length,"encodedAccountKeyIndexesLength"),H.seq(H.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),H.blob(o.length,"encodedDataLength"),H.blob(n.data.length,"data")]);t+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},r,t)}return r.slice(0,t)}serializeAddressTableLookups(){let t=0,r=new Uint8Array(Wu);for(let n of this.addressTableLookups){let i=Array();go(i,n.writableIndexes.length);let o=Array();go(o,n.readonlyIndexes.length);let s=H.struct([bt("accountKey"),H.blob(i.length,"encodedWritableIndexesLength"),H.seq(H.u8(),n.writableIndexes.length,"writableIndexes"),H.blob(o.length,"encodedReadonlyIndexesLength"),H.seq(H.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},r,t)}return r.slice(0,t)}static deserialize(t){let r=[...t],n=Aa(r),i=n&Iw;Lt(n!==i,"Expected versioned message but received legacy message");let o=i;Lt(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:Aa(r),numReadonlySignedAccounts:Aa(r),numReadonlyUnsignedAccounts:Aa(r)},a=[],c=Yi(r);for(let A=0;A<c;A++)a.push(new ye(Ji(r,0,Ea)));let u=zn.default.encode(Ji(r,0,Ea)),h=Yi(r),l=[];for(let A=0;A<h;A++){let E=Aa(r),C=Yi(r),M=Ji(r,0,C),N=Yi(r),R=new Uint8Array(Ji(r,0,N));l.push({programIdIndex:E,accountKeyIndexes:M,data:R})}let g=Yi(r),x=[];for(let A=0;A<g;A++){let E=new ye(Ji(r,0,Ea)),C=Yi(r),M=Ji(r,0,C),N=Yi(r),R=Ji(r,0,N);x.push({accountKey:E,writableIndexes:M,readonlyIndexes:R})}return new e({header:s,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:l,addressTableLookups:x})}},s6={deserializeMessageVersion(e){let t=e[0],r=t&Iw;return r===t?"legacy":r},deserialize:e=>{let t=s6.deserializeMessageVersion(e);if(t==="legacy")return Ia.from(e);if(t===0)return Rh.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};he.TransactionStatus=void 0;(function(e){e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID"})(he.TransactionStatus||(he.TransactionStatus={}));var $ee=Pe.Buffer.alloc(Xy).fill(0),$t=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Pe.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:r,isWritable:n})=>({pubkey:t.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},Gt=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:r,nonceInfo:n}=t;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:r,lastValidBlockHeight:n}=t;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{let{recentBlockhash:r,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new $t(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(t=this.recentBlockhash,r=this.instructions),!t)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let E=0;E<r.length;E++)if(r[E].programId===void 0)throw new Error(`Transaction instruction index ${E} has undefined program id`);let i=[],o=[];r.forEach(E=>{E.keys.forEach(M=>{o.push({...M})});let C=E.programId.toString();i.includes(C)||i.push(C)}),i.forEach(E=>{o.push({pubkey:new ye(E),isSigner:!1,isWritable:!1})});let s=[];o.forEach(E=>{let C=E.pubkey.toString(),M=s.findIndex(N=>N.pubkey.toString()===C);M>-1?(s[M].isWritable=s[M].isWritable||E.isWritable,s[M].isSigner=s[M].isSigner||E.isSigner):s.push(E)}),s.sort(function(E,C){return E.isSigner!==C.isSigner?E.isSigner?-1:1:E.isWritable!==C.isWritable?E.isWritable?-1:1:E.pubkey.toBase58().localeCompare(C.pubkey.toBase58())});let a=s.findIndex(E=>E.pubkey.equals(n));if(a>-1){let[E]=s.splice(a,1);E.isSigner=!0,E.isWritable=!0,s.unshift(E)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let E of this.signatures){let C=s.findIndex(M=>M.pubkey.equals(E.publicKey));if(C>-1)s[C].isSigner||(s[C].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${E.publicKey.toString()}`)}let c=0,u=0,h=0,l=[],g=[];s.forEach(({pubkey:E,isSigner:C,isWritable:M})=>{C?(l.push(E.toString()),c+=1,M||(u+=1)):(g.push(E.toString()),M||(h+=1))});let x=l.concat(g),A=r.map(E=>{let{data:C,programId:M}=E;return{programIdIndex:x.indexOf(M.toString()),accounts:E.keys.map(N=>x.indexOf(N.pubkey.toString())),data:zn.default.encode(C)}});return A.forEach(E=>{Lt(E.programIdIndex>=0),E.accounts.forEach(C=>Lt(C>=0))}),new Ia({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:x,recentBlockhash:t,instructions:A})}_compile(){let t=this.compileMessage(),r=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,o)=>r[o].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let r=new Set;this.signatures=t.filter(n=>{let i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let r=new Set,n=[];for(let o of t){let s=o.publicKey.toString();r.has(s)||(r.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(t,...r){let n=t.serialize();r.forEach(i=>{let o=o6(n,i.secretKey);this._addSignature(i.publicKey,dt(o))})}addSignature(t,r){this._compile(),this._addSignature(t,r)}_addSignature(t,r){Lt(r.length===64);let n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=Pe.Buffer.from(r)}verifySignatures(t){return this._verifySignatures(this.serializeMessage(),t===void 0?!0:t)}_verifySignatures(t,r){for(let{signature:n,publicKey:i}of this.signatures)if(n===null){if(r)return!1}else if(!Fee(n,t,i.toBytes()))return!1;return!0}serialize(t){let{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}_serialize(t){let{signatures:r}=this,n=[];go(n,r.length);let i=n.length+r.length*64+t.length,o=Pe.Buffer.alloc(i);return Lt(r.length<256),Pe.Buffer.from(n).copy(o,0),r.forEach(({signature:s},a)=>{s!==null&&(Lt(s.length===64,"signature has invalid length"),Pe.Buffer.from(s).copy(o,n.length+a*64))}),t.copy(o,n.length+r.length*64),Lt(o.length<=Wu,`Transaction too large: ${o.length} > ${Wu}`),o}get keys(){return Lt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Lt(this.instructions.length===1),this.instructions[0].programId}get data(){return Lt(this.instructions.length===1),this.instructions[0].data}static from(t){let r=[...t],n=Yi(r),i=[];for(let o=0;o<n;o++){let s=Ji(r,0,Xy);i.push(zn.default.encode(Pe.Buffer.from(s)))}return e.populate(Ia.from(r),i)}static populate(t,r=[]){let n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((i,o)=>{let s={signature:i==zn.default.encode($ee)?null:zn.default.decode(i),publicKey:t.accountKeys[o]};n.signatures.push(s)}),t.instructions.forEach(i=>{let o=i.accounts.map(s=>{let a=t.accountKeys[s];return{pubkey:a,isSigner:n.signatures.some(c=>c.publicKey.toString()===a.toString())||t.isAccountSigner(s),isWritable:t.isAccountWritable(s)}});n.instructions.push(new $t({keys:o,programId:t.accountKeys[i.programIdIndex],data:zn.default.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}},q3=class e{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,r){let{header:n,compiledInstructions:i,recentBlockhash:o}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=n,u=s-a;Lt(u>0,"Message header is invalid");let h=t.staticAccountKeys.length-s-c;Lt(h>=0,"Message header is invalid");let l=t.getAccountKeys(r),g=l.get(0);if(g===void 0)throw new Error("Failed to decompile message because no account keys were found");let x=[];for(let A of i){let E=[];for(let M of A.accountKeyIndexes){let N=l.get(M);if(N===void 0)throw new Error(`Failed to find key for account key index ${M}`);let R=M<s,V;R?V=M<u:M<l.staticAccountKeys.length?V=M-s<h:V=M-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,E.push({pubkey:N,isSigner:M<n.numRequiredSignatures,isWritable:V})}let C=l.get(A.programIdIndex);if(C===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);x.push(new $t({programId:C,data:dt(A.data),keys:E}))}return new e({payerKey:g,instructions:x,recentBlockhash:o})}compileToLegacyMessage(){return Ia.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return Rh.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}},H3=class e{get version(){return this.message.version}constructor(t,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Lt(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{let n=[];for(let i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(Xy));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),r=Array();go(r,this.signatures.length);let n=H.struct([H.blob(r.length,"encodedSignaturesLength"),H.seq(Hee(),this.signatures.length,"signatures"),H.blob(t.length,"serializedMessage")]),i=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,o)}static deserialize(t){let r=[...t],n=[],i=Yi(r);for(let s=0;s<i;s++)n.push(new Uint8Array(Ji(r,0,Xy)));let o=s6.deserialize(new Uint8Array(r));return new e(o,n)}sign(t){let r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of t){let o=n.findIndex(s=>s.equals(i.publicKey));Lt(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=o6(r,i.secretKey)}}addSignature(t,r){Lt(r.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(t));Lt(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}},va=new ye("SysvarC1ock11111111111111111111111111111111"),Yee=new ye("SysvarEpochSchedu1e111111111111111111111111"),Jee=new ye("Sysvar1nstructions1111111111111111111111111"),lw=new ye("SysvarRecentB1ockHashes11111111111111111111"),Oh=new ye("SysvarRent111111111111111111111111111111111"),Zee=new ye("SysvarRewards111111111111111111111111111111"),Qee=new ye("SysvarS1otHashes111111111111111111111111111"),Xee=new ye("SysvarS1otHistory11111111111111111111111111"),dw=new ye("SysvarStakeHistory1111111111111111111111111");async function hw(e,t,r,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await e.sendTransaction(t,r,i),s;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)s=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:a}=t.nonceInfo,c=a.keys[0].pubkey;s=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:t.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await e.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function Pl(e){return new Promise(t=>setTimeout(t,e))}function Ot(e,t){let r=e.layout.span>=0?e.layout.span:YC(e,t),n=Pe.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function zt(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}var ZC=H.nu64("lamportsPerSignature"),QC=H.struct([H.u32("version"),H.u32("state"),bt("authorizedPubkey"),bt("nonce"),H.struct([ZC],"feeCalculator")]),W3=QC.span,mw=class e{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){let r=QC.decode(dt(t),0);return new e({authorizedPubkey:new ye(r.authorizedPubkey),nonce:new ye(r.nonce).toString(),feeCalculator:r.feeCalculator})}},ete=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},tte=e=>t=>{let r=jC.blob(e,t),{encode:n,decode:i}=ete(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return K3.toBigIntLE(Pe.Buffer.from(c))},o.encode=(s,a,c)=>{let u=K3.toBufferLE(s,e);return n(u,a,c)},o},Nh=tte(8),z3=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(ir))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r,space:n,programId:i}=zt(ir.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:r,space:n,programId:new ye(i)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{lamports:r}=zt(ir.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:r}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r,seed:n,programId:i}=zt(ir.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:r,seed:n,programId:new ye(i)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{space:r}=zt(ir.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:r}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,space:i,programId:o}=zt(ir.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ye(r),seed:n,space:i,programId:new ye(o)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{programId:r}=zt(ir.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new ye(r)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);let{base:r,seed:n,programId:i}=zt(ir.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ye(r),seed:n,programId:new ye(i)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{base:r,seed:n,lamports:i,space:o,programId:s}=zt(ir.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new ye(r),seed:n,lamports:i,space:o,programId:new ye(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{authorized:r}=zt(ir.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new ye(r)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(ir.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=zt(ir.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r}=zt(ir.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new ye(r)}}static checkProgramId(t){if(!t.equals(pi.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},ir=Object.freeze({Create:{index:0,layout:H.struct([H.u32("instruction"),H.ns64("lamports"),H.ns64("space"),bt("programId")])},Assign:{index:1,layout:H.struct([H.u32("instruction"),bt("programId")])},Transfer:{index:2,layout:H.struct([H.u32("instruction"),Nh("lamports")])},CreateWithSeed:{index:3,layout:H.struct([H.u32("instruction"),bt("base"),_l("seed"),H.ns64("lamports"),H.ns64("space"),bt("programId")])},AdvanceNonceAccount:{index:4,layout:H.struct([H.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:H.struct([H.u32("instruction"),bt("authorized")])},AuthorizeNonceAccount:{index:7,layout:H.struct([H.u32("instruction"),bt("authorized")])},Allocate:{index:8,layout:H.struct([H.u32("instruction"),H.ns64("space")])},AllocateWithSeed:{index:9,layout:H.struct([H.u32("instruction"),bt("base"),_l("seed"),H.ns64("space"),bt("programId")])},AssignWithSeed:{index:10,layout:H.struct([H.u32("instruction"),bt("base"),_l("seed"),bt("programId")])},TransferWithSeed:{index:11,layout:H.struct([H.u32("instruction"),Nh("lamports"),_l("seed"),bt("programId")])},UpgradeNonceAccount:{index:12,layout:H.struct([H.u32("instruction")])}}),pi=class e{constructor(){}static createAccount(t){let r=ir.Create,n=Ot(r,{lamports:t.lamports,space:t.space,programId:dt(t.programId.toBuffer())});return new $t({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let r,n;if("basePubkey"in t){let i=ir.TransferWithSeed;r=Ot(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=ir.Transfer;r=Ot(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new $t({keys:n,programId:this.programId,data:r})}static assign(t){let r,n;if("basePubkey"in t){let i=ir.AssignWithSeed;r=Ot(i,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=ir.Assign;r=Ot(i,{programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $t({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(t){let r=ir.CreateWithSeed,n=Ot(r,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:dt(t.programId.toBuffer())}),i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new $t({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){let r=new Gt;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:W3,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:W3,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(t){let r=ir.InitializeNonceAccount,n=Ot(r,{authorized:dt(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:lw,isSigner:!1,isWritable:!1},{pubkey:Oh,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new $t(i)}static nonceAdvance(t){let r=ir.AdvanceNonceAccount,n=Ot(r),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:lw,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new $t(i)}static nonceWithdraw(t){let r=ir.WithdrawNonceAccount,n=Ot(r,{lamports:t.lamports});return new $t({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:lw,isSigner:!1,isWritable:!1},{pubkey:Oh,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let r=ir.AuthorizeNonceAccount,n=Ot(r,{authorized:dt(t.newAuthorizedPubkey.toBuffer())});return new $t({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let r,n;if("basePubkey"in t){let i=ir.AllocateWithSeed;r=Ot(i,{base:dt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:dt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=ir.Allocate;r=Ot(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new $t({keys:n,programId:this.programId,data:r})}};pi.programId=new ye("11111111111111111111111111111111");var rte=Wu-300,Uh=class e{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}static async load(t,r,n,i,o){{let l=await t.getMinimumBalanceForRentExemption(o.length),g=await t.getAccountInfo(n.publicKey,"confirmed"),x=null;if(g!==null){if(g.executable)return console.error("Program load failed, account is already executable"),!1;g.data.length!==o.length&&(x=x||new Gt,x.add(pi.allocate({accountPubkey:n.publicKey,space:o.length}))),g.owner.equals(i)||(x=x||new Gt,x.add(pi.assign({accountPubkey:n.publicKey,programId:i}))),g.lamports<l&&(x=x||new Gt,x.add(pi.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:l-g.lamports})))}else x=new Gt().add(pi.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:l>0?l:1,space:o.length,programId:i}));x!==null&&await hw(t,x,[r,n],{commitment:"confirmed"})}let s=H.struct([H.u32("instruction"),H.u32("offset"),H.u32("bytesLength"),H.u32("bytesLengthPadding"),H.seq(H.u8("byte"),H.offset(H.u32(),-8),"bytes")]),a=e.chunkSize,c=0,u=o,h=[];for(;u.length>0;){let l=u.slice(0,a),g=Pe.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:l,bytesLength:0,bytesLengthPadding:0},g);let x=new Gt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:g});h.push(hw(t,x,[r,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Pl(1e3/4),c+=a,u=u.slice(a)}await Promise.all(h);{let l=H.struct([H.u32("instruction")]),g=Pe.Buffer.alloc(l.span);l.encode({instruction:1},g);let x=new Gt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Oh,isSigner:!1,isWritable:!1}],programId:i,data:g});await hw(t,x,[r,n],{commitment:"confirmed"})}return!0}};Uh.chunkSize=rte;var nte=new ye("BPFLoader2111111111111111111111111111111111"),j3=class{static getMinNumSignatures(t){return Uh.getMinNumSignatures(t)}static load(t,r,n,i,o){return Uh.load(t,r,n,o,i)}},ite=Object.prototype.toString,ote=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function Jy(e,t){var r,n,i,o,s,a,c;if(e===!0)return"true";if(e===!1)return"false";switch(typeof e){case"object":if(e===null)return null;if(e.toJSON&&typeof e.toJSON=="function")return Jy(e.toJSON(),t);if(c=ite.call(e),c==="[object Array]"){for(i="[",n=e.length-1,r=0;r<n;r++)i+=Jy(e[r],!0)+",";return n>-1&&(i+=Jy(e[r],!0)),i+"]"}else if(c==="[object Object]"){for(o=ote(e).sort(),n=o.length,i="",r=0;r<n;)s=o[r],a=Jy(e[s],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}else return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var ste=function(e){var t=Jy(e,!1);if(t!==void 0)return""+t},ate=ste,Yy=32;function R3(e){let t=0;for(;e>1;)e/=2,t++;return t}function cte(e){return e===0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}var gw=class{constructor(t,r,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){let r=R3(cte(t+Yy+1))-R3(Yy)-1,n=this.getSlotsInEpoch(r),i=t-(n-Yy);return[r,i]}else{let r=t-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=r%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Yy:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+R3(Yy)):this.slotsPerEpoch}},rm=class extends Error{constructor(t,r){super(t),this.logs=void 0,this.logs=r}},ute={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},we=class extends Error{constructor({code:t,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}},fte=globalThis.fetch,G3=class extends Dee.default{constructor(t,r,n){let i=o=>{let s=Lee.default(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,t,r,n),this.underlyingSocket=void 0}call(...t){let r=this.underlyingSocket?.readyState;return r===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){let r=this.underlyingSocket?.readyState;return r===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}},lte=160,dte=64,hte=lte/dte,pte=1e3/hte;function yte(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}var OC=56,nm=class{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){let t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){let r=yte(mte,t),n=t.length-OC;Lt(n>=0,"lookup table is invalid"),Lt(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=H.struct([H.seq(bt(),i,"addresses")]).decode(t.slice(OC));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new ye(r.authority[0]):void 0,addresses:o.map(s=>new ye(s))}}},mte={index:1,layout:H.struct([H.u32("typeIndex"),Nh("deactivationSlot"),H.nu64("lastExtendedSlot"),H.u8("lastExtendedStartIndex"),H.u8(),H.seq(bt(),H.offset(H.u8(),-1),"authority")])},gte=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function bte(e){let t=e.match(gte);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,o]=t,s=e.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${s}//${n}${c}${o}`}var en=I.coerce(I.instance(ye),I.string(),e=>new ye(e)),XC=I.tuple([I.string(),I.literal("base64")]),a6=I.coerce(I.instance(Pe.Buffer),XC,e=>Pe.Buffer.from(e[0],"base64")),e9=30*1e3;function xte(e){if(/^https?:/.test(e)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function Cr(e){let t,r;if(typeof e=="string")t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function t9(e){return I.union([I.type({jsonrpc:I.literal("2.0"),id:I.string(),result:e}),I.type({jsonrpc:I.literal("2.0"),id:I.string(),error:I.type({code:I.unknown(),message:I.string(),data:I.optional(I.any())})})])}var wte=t9(I.unknown());function pt(e){return I.coerce(t9(e),wte,t=>"error"in t?t:{...t,result:I.create(t.result,e)})}function Xr(e){return pt(I.type({context:I.type({slot:I.number()}),value:e}))}function kw(e){return I.type({context:I.type({slot:I.number()}),value:e})}function O3(e,t){return e===0?new Rh({header:t.header,staticAccountKeys:t.accountKeys.map(r=>new ye(r)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:zn.default.decode(r.data)})),addressTableLookups:t.addressTableLookups}):new Ia(t)}var vte=I.type({foundation:I.number(),foundationTerm:I.number(),initial:I.number(),taper:I.number(),terminal:I.number()}),Ate=pt(I.array(I.nullable(I.type({epoch:I.number(),effectiveSlot:I.number(),amount:I.number(),postBalance:I.number(),commission:I.optional(I.nullable(I.number()))})))),Ste=I.type({total:I.number(),validator:I.number(),foundation:I.number(),epoch:I.number()}),Ete=I.type({epoch:I.number(),slotIndex:I.number(),slotsInEpoch:I.number(),absoluteSlot:I.number(),blockHeight:I.optional(I.number()),transactionCount:I.optional(I.number())}),Ite=I.type({slotsPerEpoch:I.number(),leaderScheduleSlotOffset:I.number(),warmup:I.boolean(),firstNormalEpoch:I.number(),firstNormalSlot:I.number()}),kte=I.record(I.string(),I.array(I.number())),Ml=I.nullable(I.union([I.type({}),I.string()])),Tte=I.type({err:Ml}),Pte=I.literal("receivedSignature"),_te=I.type({"solana-core":I.string(),"feature-set":I.optional(I.number())}),NC=Xr(I.type({err:I.nullable(I.union([I.type({}),I.string()])),logs:I.nullable(I.array(I.string())),accounts:I.optional(I.nullable(I.array(I.nullable(I.type({executable:I.boolean(),owner:I.string(),lamports:I.number(),data:I.array(I.string()),rentEpoch:I.optional(I.number())}))))),unitsConsumed:I.optional(I.number()),returnData:I.optional(I.nullable(I.type({programId:I.string(),data:I.tuple([I.string(),I.literal("base64")])})))})),Bte=Xr(I.type({byIdentity:I.record(I.string(),I.array(I.number())),range:I.type({firstSlot:I.number(),lastSlot:I.number()})}));function Cte(e,t,r,n,i,o){let s=r||fte,a;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,l)=>{let g=await new Promise((x,A)=>{try{n(h,l,(E,C)=>x([E,C]))}catch(E){A(E)}});return await s(...g)}),new Uee.default(async(h,l)=>{let g={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},Bre)};try{let x=5,A,E=500;for(;c?A=await c(e,g):A=await s(e,g),!(A.status!==429||i===!0||(x-=1,x===0));)console.log(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${E}ms delay...`),await Pl(E),E*=2;let C=await A.text();A.ok?l(null,C):l(new Error(`${A.status} ${A.statusText}: ${C}`))}catch(x){x instanceof Error&&l(x)}},{})}function Mte(e){return(t,r)=>new Promise((n,i)=>{e.request(t,r,(o,s)=>{if(o){i(o);return}n(s)})})}function Rte(e){return t=>new Promise((r,n)=>{t.length===0&&r([]);let i=t.map(o=>e.request(o.methodName,o.args));e.request(i,(o,s)=>{if(o){n(o);return}r(s)})})}var Ote=pt(vte),Nte=pt(Ste),Ute=pt(Ete),Dte=pt(Ite),Lte=pt(kte),Kte=pt(I.number()),Fte=Xr(I.type({total:I.number(),circulating:I.number(),nonCirculating:I.number(),nonCirculatingAccounts:I.array(en)})),$3=I.type({amount:I.string(),uiAmount:I.nullable(I.number()),decimals:I.number(),uiAmountString:I.optional(I.string())}),Vte=Xr(I.array(I.type({address:en,amount:I.string(),uiAmount:I.nullable(I.number()),decimals:I.number(),uiAmountString:I.optional(I.string())}))),qte=Xr(I.array(I.type({pubkey:en,account:I.type({executable:I.boolean(),owner:en,lamports:I.number(),data:a6,rentEpoch:I.number()})}))),Y3=I.type({program:I.string(),parsed:I.unknown(),space:I.number()}),Hte=Xr(I.array(I.type({pubkey:en,account:I.type({executable:I.boolean(),owner:en,lamports:I.number(),data:Y3,rentEpoch:I.number()})}))),Wte=Xr(I.array(I.type({lamports:I.number(),address:en}))),im=I.type({executable:I.boolean(),owner:en,lamports:I.number(),data:a6,rentEpoch:I.number()}),zte=I.type({pubkey:en,account:im}),jte=I.coerce(I.union([I.instance(Pe.Buffer),Y3]),I.union([XC,Y3]),e=>Array.isArray(e)?I.create(e,a6):e),J3=I.type({executable:I.boolean(),owner:en,lamports:I.number(),data:jte,rentEpoch:I.number()}),Gte=I.type({pubkey:en,account:J3}),$te=I.type({state:I.union([I.literal("active"),I.literal("inactive"),I.literal("activating"),I.literal("deactivating")]),active:I.number(),inactive:I.number()}),Yte=pt(I.array(I.type({signature:I.string(),slot:I.number(),err:Ml,memo:I.nullable(I.string()),blockTime:I.optional(I.nullable(I.number()))}))),Jte=pt(I.array(I.type({signature:I.string(),slot:I.number(),err:Ml,memo:I.nullable(I.string()),blockTime:I.optional(I.nullable(I.number()))}))),Zte=I.type({subscription:I.number(),result:kw(im)}),Qte=I.type({pubkey:en,account:im}),Xte=I.type({subscription:I.number(),result:kw(Qte)}),ere=I.type({parent:I.number(),slot:I.number(),root:I.number()}),tre=I.type({subscription:I.number(),result:ere}),rre=I.union([I.type({type:I.union([I.literal("firstShredReceived"),I.literal("completed"),I.literal("optimisticConfirmation"),I.literal("root")]),slot:I.number(),timestamp:I.number()}),I.type({type:I.literal("createdBank"),parent:I.number(),slot:I.number(),timestamp:I.number()}),I.type({type:I.literal("frozen"),slot:I.number(),timestamp:I.number(),stats:I.type({numTransactionEntries:I.number(),numSuccessfulTransactions:I.number(),numFailedTransactions:I.number(),maxTransactionsPerEntry:I.number()})}),I.type({type:I.literal("dead"),slot:I.number(),timestamp:I.number(),err:I.string()})]),nre=I.type({subscription:I.number(),result:rre}),ire=I.type({subscription:I.number(),result:kw(I.union([Tte,Pte]))}),ore=I.type({subscription:I.number(),result:I.number()}),sre=I.type({pubkey:I.string(),gossip:I.nullable(I.string()),tpu:I.nullable(I.string()),rpc:I.nullable(I.string()),version:I.nullable(I.string())}),UC=I.type({votePubkey:I.string(),nodePubkey:I.string(),activatedStake:I.number(),epochVoteAccount:I.boolean(),epochCredits:I.array(I.tuple([I.number(),I.number(),I.number()])),commission:I.number(),lastVote:I.number(),rootSlot:I.nullable(I.number())}),are=pt(I.type({current:I.array(UC),delinquent:I.array(UC)})),cre=I.union([I.literal("processed"),I.literal("confirmed"),I.literal("finalized")]),ure=I.type({slot:I.number(),confirmations:I.nullable(I.number()),err:Ml,confirmationStatus:I.optional(cre)}),fre=Xr(I.array(I.nullable(ure))),lre=pt(I.number()),r9=I.type({accountKey:en,writableIndexes:I.array(I.number()),readonlyIndexes:I.array(I.number())}),c6=I.type({signatures:I.array(I.string()),message:I.type({accountKeys:I.array(I.string()),header:I.type({numRequiredSignatures:I.number(),numReadonlySignedAccounts:I.number(),numReadonlyUnsignedAccounts:I.number()}),instructions:I.array(I.type({accounts:I.array(I.number()),data:I.string(),programIdIndex:I.number()})),recentBlockhash:I.string(),addressTableLookups:I.optional(I.array(r9))})}),n9=I.type({pubkey:en,signer:I.boolean(),writable:I.boolean(),source:I.optional(I.union([I.literal("transaction"),I.literal("lookupTable")]))}),i9=I.type({accountKeys:I.array(n9),signatures:I.array(I.string())}),o9=I.type({parsed:I.unknown(),program:I.string(),programId:en}),s9=I.type({accounts:I.array(en),data:I.string(),programId:en}),dre=I.union([s9,o9]),hre=I.union([I.type({parsed:I.unknown(),program:I.string(),programId:I.string()}),I.type({accounts:I.array(I.string()),data:I.string(),programId:I.string()})]),a9=I.coerce(dre,hre,e=>"accounts"in e?I.create(e,s9):I.create(e,o9)),c9=I.type({signatures:I.array(I.string()),message:I.type({accountKeys:I.array(n9),instructions:I.array(a9),recentBlockhash:I.string(),addressTableLookups:I.optional(I.nullable(I.array(r9)))})}),bw=I.type({accountIndex:I.number(),mint:I.string(),owner:I.optional(I.string()),uiTokenAmount:$3}),u9=I.type({writable:I.array(en),readonly:I.array(en)}),Tw=I.type({err:Ml,fee:I.number(),innerInstructions:I.optional(I.nullable(I.array(I.type({index:I.number(),instructions:I.array(I.type({accounts:I.array(I.number()),data:I.string(),programIdIndex:I.number()}))})))),preBalances:I.array(I.number()),postBalances:I.array(I.number()),logMessages:I.optional(I.nullable(I.array(I.string()))),preTokenBalances:I.optional(I.nullable(I.array(bw))),postTokenBalances:I.optional(I.nullable(I.array(bw))),loadedAddresses:I.optional(u9),computeUnitsConsumed:I.optional(I.number())}),u6=I.type({err:Ml,fee:I.number(),innerInstructions:I.optional(I.nullable(I.array(I.type({index:I.number(),instructions:I.array(a9)})))),preBalances:I.array(I.number()),postBalances:I.array(I.number()),logMessages:I.optional(I.nullable(I.array(I.string()))),preTokenBalances:I.optional(I.nullable(I.array(bw))),postTokenBalances:I.optional(I.nullable(I.array(bw))),loadedAddresses:I.optional(u9),computeUnitsConsumed:I.optional(I.number())}),Kh=I.union([I.literal(0),I.literal("legacy")]),Rl=I.type({pubkey:I.string(),lamports:I.number(),postBalance:I.nullable(I.number()),rewardType:I.nullable(I.string()),commission:I.optional(I.nullable(I.number()))}),pre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:c6,meta:I.nullable(Tw),version:I.optional(Kh)})),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),yre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),mre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:i9,meta:I.nullable(Tw),version:I.optional(Kh)})),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),gre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:c9,meta:I.nullable(u6),version:I.optional(Kh)})),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),bre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:i9,meta:I.nullable(u6),version:I.optional(Kh)})),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),xre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number()),blockHeight:I.nullable(I.number())}))),wre=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),transactions:I.array(I.type({transaction:c6,meta:I.nullable(Tw)})),rewards:I.optional(I.array(Rl)),blockTime:I.nullable(I.number())}))),DC=pt(I.nullable(I.type({blockhash:I.string(),previousBlockhash:I.string(),parentSlot:I.number(),signatures:I.array(I.string()),blockTime:I.nullable(I.number())}))),N3=pt(I.nullable(I.type({slot:I.number(),meta:Tw,blockTime:I.optional(I.nullable(I.number())),transaction:c6,version:I.optional(Kh)}))),fw=pt(I.nullable(I.type({slot:I.number(),transaction:c9,meta:I.nullable(u6),blockTime:I.optional(I.nullable(I.number())),version:I.optional(Kh)}))),vre=Xr(I.type({blockhash:I.string(),feeCalculator:I.type({lamportsPerSignature:I.number()})})),Are=Xr(I.type({blockhash:I.string(),lastValidBlockHeight:I.number()})),Sre=I.type({slot:I.number(),numTransactions:I.number(),numSlots:I.number(),samplePeriodSecs:I.number()}),Ere=pt(I.array(Sre)),Ire=Xr(I.nullable(I.type({feeCalculator:I.type({lamportsPerSignature:I.number()})}))),kre=pt(I.string()),Tre=pt(I.string()),Pre=I.type({err:Ml,logs:I.array(I.string()),signature:I.string()}),_re=I.type({result:kw(Pre),subscription:I.number()}),Bre={"solana-client":"js/1.73.5"},Z3=class{constructor(t,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let n,i,o,s,a,c;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,o=r.fetch,s=r.fetchMiddleware,a=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=xte(t),this._rpcWsEndpoint=n||bte(t),this._rpcClient=Cte(t,i,o,s,a,c),this._rpcRequest=Mte(this._rpcClient),this._rpcBatchRequest=Rte(this._rpcClient),this._rpcWebSocket=new G3(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgs([t.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),a=I.create(s,Xr(I.number()));if("error"in a)throw new we(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,r){return await this.getBalanceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){let r=await this._rpcRequest("getBlockTime",[t]),n=I.create(r,pt(I.nullable(I.number())));if("error"in n)throw new we(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){let t=await this._rpcRequest("minimumLedgerSlot",[]),r=I.create(t,pt(I.number()));if("error"in r)throw new we(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){let t=await this._rpcRequest("getFirstAvailableBlock",[]),r=I.create(t,Kte);if("error"in r)throw new we(r.error,"failed to get first available block");return r.result}async getSupply(t){let r={};typeof t=="string"?r={commitment:t}:t?r={...t,commitment:t&&t.commitment||this.commitment}:r={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[r]),i=I.create(n,Fte);if("error"in i)throw new we(i.error,"failed to get supply");return i.result}async getTokenSupply(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),o=I.create(i,Xr($3));if("error"in o)throw new we(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),o=I.create(i,Xr($3));if("error"in o)throw new we(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(t,r,n){let{commitment:i,config:o}=Cr(n),s=[t.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});let a=this._buildArgs(s,i,"base64",o),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=I.create(c,qte);if("error"in u)throw new we(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(t,r,n){let i=[t.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),a=I.create(s,Hte);if("error"in a)throw new we(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){let r={...t,commitment:t&&t.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),o=I.create(i,Wte);if("error"in o)throw new we(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(t,r){let n=this._buildArgs([t.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),o=I.create(i,Vte);if("error"in o)throw new we(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgs([t.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),a=I.create(s,Xr(I.nullable(im)));if("error"in a)throw new we(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),a=I.create(s,Xr(I.nullable(J3)));if("error"in a)throw new we(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,r){try{return(await this.getAccountInfoAndContext(t,r)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,r){let{commitment:n,config:i}=Cr(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",s),c=I.create(a,Xr(I.array(I.nullable(J3))));if("error"in c)throw new we(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfoAndContext(t,r){let{commitment:n,config:i}=Cr(r),o=t.map(u=>u.toBase58()),s=this._buildArgs([o],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",s),c=I.create(a,Xr(I.array(I.nullable(im))));if("error"in c)throw new we(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfo(t,r){return(await this.getMultipleAccountsInfoAndContext(t,r)).value}async getStakeActivation(t,r,n){let{commitment:i,config:o}=Cr(r),s=this._buildArgs([t.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),a=await this._rpcRequest("getStakeActivation",s),c=I.create(a,pt($te));if("error"in c)throw new we(c.error,`failed to get Stake Activation ${t.toBase58()}`);return c.result}async getProgramAccounts(t,r){let{commitment:n,config:i}=Cr(r),{encoding:o,...s}=i||{},a=this._buildArgs([t.toBase58()],n,o||"base64",s),c=await this._rpcRequest("getProgramAccounts",a),u=I.create(c,pt(I.array(zte)));if("error"in u)throw new we(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgs([t.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),a=I.create(s,pt(I.array(Gte)));if("error"in a)throw new we(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,r){let n;if(typeof t=="string")n=t;else{let o=t;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=zn.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Lt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((r,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:r}){let n,i,o=!1,s=new Promise((c,u)=>{try{n=this.onSignature(r,(l,g)=>{n=void 0;let x={context:g,value:l};c({__type:he.TransactionStatus.PROCESSED,response:x})},t);let h=new Promise(l=>{n==null?l():i=this._onSubscriptionStateChange(n,g=>{g==="subscribed"&&l()})});(async()=>{if(await h,o)return;let l=await this.getSignatureStatus(r);if(o||l==null)return;let{context:g,value:x}=l;if(x!=null)if(x?.err)u(x.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,c({__type:he.TransactionStatus.PROCESSED,response:{context:g,value:x}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(l=>{let g=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let x=await g();if(!o){for(;x<=n;)if(await Pl(1e3),o||(x=await g(),o))return;l({__type:he.TransactionStatus.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),u=this.getCancellationPromise(r),h;try{let l=await Promise.race([u,c,s]);if(l.__type===he.TransactionStatus.PROCESSED)h=l.response;else throw new em(i)}finally{o=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let a=!1,c=new Promise(x=>{let A=o,E=null,C=async()=>{try{let{context:M,value:N}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return E=M.slot,N?.nonce}catch{return A}};(async()=>{if(A=await C(),!a)for(;;){if(o!==A){x({__type:he.TransactionStatus.NONCE_INVALID,slotInWhichNonceDidAdvance:E});return}if(await Pl(2e3),a||(A=await C(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(r),g;try{let x=await Promise.race([l,h,c]);if(x.__type===he.TransactionStatus.PROCESSED)g=x.response;else{let A;for(;;){let E=await this.getSignatureStatus(s);if(E==null)break;if(E.context.slot<(x.slotInWhichNonceDidAdvance??n)){await Pl(400);continue}A=E;break}if(A?.value){let E=t||"finalized",{confirmationStatus:C}=A.value;switch(E){case"processed":case"recent":if(C!=="processed"&&C!=="confirmed"&&C!=="finalized")throw new Hu(s);break;case"confirmed":case"single":case"singleGossip":if(C!=="confirmed"&&C!=="finalized")throw new Hu(s);break;case"finalized":case"max":case"root":if(C!=="finalized")throw new Hu(s);break;default:}g={context:A.context,value:{err:A.value.err}}}else throw new Hu(s)}}finally{a=!0,u()}return g}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:r}){let n,i=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:he.TransactionStatus.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),a;try{let c=await Promise.race([s,i]);if(c.__type===he.TransactionStatus.PROCESSED)a=c.response;else throw new tm(r,c.timeoutMs/1e3)}finally{clearTimeout(n),o()}return a}async getClusterNodes(){let t=await this._rpcRequest("getClusterNodes",[]),r=I.create(t,pt(I.array(sre)));if("error"in r)throw new we(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",r),i=I.create(n,are);if("error"in i)throw new we(i.error,"failed to get vote accounts");return i.result}async getSlot(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlot",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get slot");return s.result}async getSlotLeader(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=I.create(o,pt(I.string()));if("error"in s)throw new we(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,r){let n=[t,r],i=await this._rpcRequest("getSlotLeaders",n),o=I.create(i,pt(I.array(en)));if("error"in o)throw new we(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(t,r){let{context:n,value:i}=await this.getSignatureStatuses([t],r);Lt(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(t,r){let n=[t];r&&n.push(r);let i=await this._rpcRequest("getSignatureStatuses",n),o=I.create(i,fre);if("error"in o)throw new we(o.error,"failed to get signature status");return o.result}async getTransactionCount(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",r),i=I.create(n,Ote);if("error"in i)throw new we(i.error,"failed to get inflation");return i.result}async getInflationReward(t,r,n){let{commitment:i,config:o}=Cr(n),s=this._buildArgs([t.map(u=>u.toBase58())],i,void 0,{...o,epoch:r??o?.epoch}),a=await this._rpcRequest("getInflationReward",s),c=I.create(a,Ate);if("error"in c)throw new we(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){let t=await this._rpcRequest("getInflationRate",[]),r=I.create(t,Nte);if("error"in r)throw new we(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=I.create(o,Ute);if("error"in s)throw new we(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let t=await this._rpcRequest("getEpochSchedule",[]),r=I.create(t,Dte);if("error"in r)throw new we(r.error,"failed to get epoch schedule");let n=r.result;return new gw(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let t=await this._rpcRequest("getLeaderSchedule",[]),r=I.create(t,Lte);if("error"in r)throw new we(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=I.create(i,lre);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(t){let r=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",r),i=I.create(n,vre);if("error"in i)throw new we(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){let r=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=I.create(r,Ere);if("error"in n)throw new we(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,r){let n=this._buildArgs([t],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=I.create(i,Ire);if("error"in o)throw new we(o.error,"failed to get fee calculator");let{context:s,value:a}=o.result;return{context:s,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,r){let n=dt(t.serialize()).toString("base64"),i=this._buildArgs([n],r),o=await this._rpcRequest("getFeeForMessage",i),s=I.create(o,Xr(I.nullable(I.number())));if("error"in s)throw new we(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=I.create(o,Are);if("error"in s)throw new we(s.error,"failed to get latest blockhash");return s.result}async getVersion(){let t=await this._rpcRequest("getVersion",[]),r=I.create(t,pt(_te));if("error"in r)throw new we(r.error,"failed to get version");return r.result}async getGenesisHash(){let t=await this._rpcRequest("getGenesisHash",[]),r=I.create(t,pt(I.string()));if("error"in r)throw new we(r.error,"failed to get genesis hash");return r.result}async getBlock(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=I.create(s,mre);if("error"in a)throw a.error;return a.result}case"none":{let a=I.create(s,yre);if("error"in a)throw a.error;return a.result}default:{let a=I.create(s,pre);if("error"in a)throw a.error;let{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:h,version:l})=>({meta:h,transaction:{...u,message:O3(l,u.message)},version:l}))}:null}}}catch(a){throw new we(a,"failed to get confirmed block")}}async getParsedBlock(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let a=I.create(s,bre);if("error"in a)throw a.error;return a.result}case"none":{let a=I.create(s,xre);if("error"in a)throw a.error;return a.result}default:{let a=I.create(s,gre);if("error"in a)throw a.error;return a.result}}}catch(a){throw new we(a,"failed to get block")}}async getBlockHeight(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,void 0,n),o=await this._rpcRequest("getBlockHeight",i),s=I.create(o,pt(I.number()));if("error"in s)throw new we(s.error,"failed to get block height information");return s.result}async getBlockProduction(t){let r,n;if(typeof t=="string")n=t;else if(t){let{commitment:a,...c}=t;n=a,r=c}let i=this._buildArgs([],n,"base64",r),o=await this._rpcRequest("getBlockProduction",i),s=I.create(o,Bte);if("error"in s)throw new we(s.error,"failed to get block production information");return s.result}async getTransaction(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgsAtLeastConfirmed([t],n,void 0,i),s=await this._rpcRequest("getTransaction",o),a=I.create(s,N3);if("error"in a)throw new we(a.error,"failed to get transaction");let c=a.result;return c&&{...c,transaction:{...c.transaction,message:O3(c.version,c.transaction.message)}}}async getParsedTransaction(t,r){let{commitment:n,config:i}=Cr(r),o=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),a=I.create(s,fw);if("error"in a)throw new we(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,r){let{commitment:n,config:i}=Cr(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=I.create(c,fw);if("error"in u)throw new we(u.error,"failed to get transactions");return u.result})}async getTransactions(t,r){let{commitment:n,config:i}=Cr(r),o=t.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(c=>{let u=I.create(c,N3);if("error"in u)throw new we(u.error,"failed to get transactions");let h=u.result;return h&&{...h,transaction:{...h.transaction,message:O3(h.version,h.transaction.message)}}})}async getConfirmedBlock(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedBlock",n),o=I.create(i,wre);if("error"in o)throw new we(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");let a={...s,transactions:s.transactions.map(({transaction:c,meta:u})=>{let h=new Ia(c.message);return{meta:u,transaction:{...c,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:Gt.populate(c.message,c.signatures)}))}}async getBlocks(t,r,n){let i=this._buildArgsAtLeastConfirmed(r!==void 0?[t,r]:[t],n),o=await this._rpcRequest("getBlocks",i),s=I.create(o,pt(I.array(I.number())));if("error"in s)throw new we(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=I.create(i,DC);if("error"in o)throw new we(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),o=I.create(i,DC);if("error"in o)throw new we(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r),i=await this._rpcRequest("getConfirmedTransaction",n),o=I.create(i,N3);if("error"in o)throw new we(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let a=new Ia(s.transaction.message),c=s.transaction.signatures;return{...s,transaction:Gt.populate(a,c)}}async getParsedConfirmedTransaction(t,r){let n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),o=I.create(i,fw);if("error"in o)throw new we(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(t,r){let n=t.map(s=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([s],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let a=I.create(s,fw);if("error"in a)throw new we(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,r,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<o));)try{let c=await this.getConfirmedBlockSignatures(r,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=I.create(o,Yte);if("error"in s)throw new we(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,r,n){let i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),o=await this._rpcRequest("getSignaturesForAddress",i),s=I.create(o,Jte);if("error"in s)throw new we(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=new nm({key:t,state:nm.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(t,r){let{context:n,value:i}=await this.getAccountInfoAndContext(t,r),o=null;return i!==null&&(o=mw.fromAccountData(i.data)),{context:n,value:o}}async getNonce(t,r){return await this.getNonceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,r){let n=await this._rpcRequest("requestAirdrop",[t.toBase58(),r]),i=I.create(n,kre);if("error"in i)throw new we(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Pl(100);let n=Date.now()-this._blockhashInfo.lastFetch>=e9;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await Pl(pte/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){let{commitment:r,config:n}=Cr(t),i=this._buildArgs([],r,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=I.create(o,Xr(I.number()));if("error"in s)throw new we(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,r,n){if("message"in t){let E=t.serialize(),C=Pe.Buffer.from(E).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");let M=r||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment);let N=[C,M],R=await this._rpcRequest("simulateTransaction",N),V=I.create(R,NC);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let i;if(t instanceof Gt){let A=t;i=new Gt,i.feePayer=A.feePayer,i.instructions=t.instructions,i.nonceInfo=A.nonceInfo,i.signatures=A.signatures}else i=Gt.populate(t),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");let o=r;if(i.nonceInfo&&o)i.sign(...o);else{let A=this._disableBlockhashCaching;for(;;){let E=await this._blockhashWithExpiryBlockHeight(A);if(i.lastValidBlockHeight=E.lastValidBlockHeight,i.recentBlockhash=E.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let C=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(C)&&!this._blockhashInfo.transactionSignatures.includes(C)){this._blockhashInfo.simulatedSignatures.push(C);break}else A=!0}}let s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){let A=(Array.isArray(n)?n:s.nonProgramIds()).map(E=>E.toBase58());h.accounts={encoding:"base64",addresses:A}}o&&(h.sigVerify=!0);let l=[u,h],g=await this._rpcRequest("simulateTransaction",l),x=I.create(g,NC);if("error"in x){let A;if("data"in x.error&&(A=x.error.data.logs,A&&Array.isArray(A))){let E=`
    `,C=E+A.join(E);console.error(x.error.message,C)}throw new rm("failed to simulate transaction: "+x.error.message,A)}return x.result}async sendTransaction(t,r,n){if("version"in t){if(r&&Array.isArray(r))throw new Error("Invalid arguments");let s=t.serialize();return await this.sendRawTransaction(s,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");let i=r;if(t.nonceInfo)t.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let a=await this._blockhashWithExpiryBlockHeight(s);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");let c=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))s=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}let o=t.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(t,r){let n=dt(t).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(t,r){let n={encoding:"base64"},i=r&&r.skipPreflight,o=r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[t,n],a=await this._rpcRequest("sendTransaction",s),c=I.create(a,Tre);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new rm("failed to send transaction: "+c.error.message,u)}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(t,r){let n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=r,n!==r.state){let i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(t,r){let n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let t=this._rpcWebSocketGeneration,r=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let a=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${s} error for argument`,o,a.message),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(a){if(a instanceof Error&&console.error(`${s} error:`,a.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,r){let n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(o){console.error(o)}})}_wsOnAccountNotification(t){let{result:r,subscription:n}=I.create(t,Zte);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(t,r){let n=this._nextClientSubscriptionId++,i=ate([t.method,r]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...t,args:r,callbacks:new Set([t.callback]),state:"pending"}:o.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];Lt(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,r,n){let i=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){let{result:r,subscription:n}=I.create(t,Xte);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(t,r,n,i){let o=this._buildArgs([t.toBase58()],n||this._commitment||"finalized","base64",i?{filters:i}:void 0);return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,r,n){let i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){let{result:r,subscription:n}=I.create(t,_re);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(t){let{result:r,subscription:n}=I.create(t,tre);this._handleServerNotification(n,[r])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){let{result:r,subscription:n}=I.create(t,nre);this._handleServerNotification(n,[r])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,r){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${r}' events could not be found.`)}_buildArgs(t,r,n,i){let o=r||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),t.push(s)}return t}_buildArgsAtLeastConfirmed(t,r,n,i){let o=r||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,r,n,i)}_wsOnSignatureNotification(t){let{result:r,subscription:n}=I.create(t,ire);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(t,r,n){let i=this._buildArgs([t],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,a)=>{if(s.type==="status"){r(s.result,a);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(t,r,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([t],i,void 0,o),a=this._makeSubscription({callback:(c,u)=>{r(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){let{result:r,subscription:n}=I.create(t,ore);this._handleServerNotification(n,[r])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}},xw=class e{constructor(t){this._keypair=void 0,this._keypair=t??CC()}static generate(){return new e(CC())}static fromSecretKey(t,r){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!r||!r.skipValidation){let i=t.slice(0,32),o=pw(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new e({publicKey:n,secretKey:t})}static fromSeed(t){let r=pw(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}get publicKey(){return new ye(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Mc=Object.freeze({CreateLookupTable:{index:0,layout:H.struct([H.u32("instruction"),Nh("recentSlot"),H.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:H.struct([H.u32("instruction")])},ExtendLookupTable:{index:2,layout:H.struct([H.u32("instruction"),Nh(),H.seq(bt(),H.offset(H.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:H.struct([H.u32("instruction")])},CloseLookupTable:{index:4,layout:H.struct([H.u32("instruction")])}}),Q3=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Mc))if(s.index==n){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);let{recentSlot:r}=zt(Mc.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(r)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);let{addresses:r}=zt(Mc.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:r.map(n=>new ye(n))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(om.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},om=class{constructor(){}static createLookupTable(t){let[r,n]=ye.findProgramAddressSync([t.authority.toBuffer(),K3.toBufferLE(BigInt(t.recentSlot),8)],this.programId),i=Mc.CreateLookupTable,o=Ot(i,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),s=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:pi.programId,isSigner:!1,isWritable:!1}];return[new $t({programId:this.programId,keys:s,data:o}),r]}static freezeLookupTable(t){let r=Mc.FreezeLookupTable,n=Ot(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new $t({programId:this.programId,keys:i,data:n})}static extendLookupTable(t){let r=Mc.ExtendLookupTable,n=Ot(r,{addresses:t.addresses.map(o=>o.toBytes())}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:pi.programId,isSigner:!1,isWritable:!1}),new $t({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(t){let r=Mc.DeactivateLookupTable,n=Ot(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new $t({programId:this.programId,keys:i,data:n})}static closeLookupTable(t){let r=Mc.CloseLookupTable,n=Ot(r),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new $t({programId:this.programId,keys:i,data:n})}};om.programId=new ye("AddressLookupTab1e1111111111111111111111111");var X3=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u8("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Sa))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);let{units:r,additionalFee:n}=zt(Sa.RequestUnits,t.data);return{units:r,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);let{bytes:r}=zt(Sa.RequestHeapFrame,t.data);return{bytes:r}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);let{units:r}=zt(Sa.SetComputeUnitLimit,t.data);return{units:r}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);let{microLamports:r}=zt(Sa.SetComputeUnitPrice,t.data);return{microLamports:r}}static checkProgramId(t){if(!t.equals(sm.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},Sa=Object.freeze({RequestUnits:{index:0,layout:H.struct([H.u8("instruction"),H.u32("units"),H.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:H.struct([H.u8("instruction"),H.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:H.struct([H.u8("instruction"),H.u32("units")])},SetComputeUnitPrice:{index:3,layout:H.struct([H.u8("instruction"),Nh("microLamports")])}}),sm=class{constructor(){}static requestUnits(t){let r=Sa.RequestUnits,n=Ot(r,t);return new $t({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let r=Sa.RequestHeapFrame,n=Ot(r,t);return new $t({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let r=Sa.SetComputeUnitLimit,n=Ot(r,t);return new $t({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let r=Sa.SetComputeUnitPrice,n=Ot(r,{microLamports:BigInt(t.microLamports)});return new $t({keys:[],programId:this.programId,data:n})}};sm.programId=new ye("ComputeBudget111111111111111111111111111111");var LC=64,KC=32,FC=64,VC=H.struct([H.u8("numSignatures"),H.u8("padding"),H.u16("signatureOffset"),H.u16("signatureInstructionIndex"),H.u16("publicKeyOffset"),H.u16("publicKeyInstructionIndex"),H.u16("messageDataOffset"),H.u16("messageDataSize"),H.u16("messageInstructionIndex")]),ww=class e{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,instructionIndex:o}=t;Lt(r.length===KC,`Public Key must be ${KC} bytes but received ${r.length} bytes`),Lt(i.length===FC,`Signature must be ${FC} bytes but received ${i.length} bytes`);let s=VC.span,a=s+r.length,c=a+i.length,u=1,h=Pe.Buffer.alloc(c+n.length),l=o??65535;return VC.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:l,publicKeyOffset:s,publicKeyInstructionIndex:l,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:l},h),h.fill(r,s),h.fill(i,a),h.fill(n,c),new $t({keys:[],programId:e.programId,data:h})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;Lt(r.length===LC,`Private key must be ${LC} bytes but received ${r.length} bytes`);try{let o=xw.fromSecretKey(r),s=o.publicKey.toBytes(),a=o6(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:a,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};ww.programId=new ye("Ed25519SigVerify111111111111111111111111111");Ew.utils.hmacSha256Sync=(e,...t)=>{let r=Oee.hmac.create(L3.sha256,e);return t.forEach(n=>r.update(n)),r.digest()};var Cre=(e,t)=>Ew.signSync(e,t,{der:!1,recovered:!0});Ew.utils.isValidPrivateKey;var Mre=Ew.getPublicKey,qC=32,U3=20,HC=64,Rre=11,D3=H.struct([H.u8("numSignatures"),H.u16("signatureOffset"),H.u8("signatureInstructionIndex"),H.u16("ethAddressOffset"),H.u8("ethAddressInstructionIndex"),H.u16("messageDataOffset"),H.u16("messageDataSize"),H.u8("messageInstructionIndex"),H.blob(20,"ethAddress"),H.blob(64,"signature"),H.u8("recoveryId")]),vw=class e{constructor(){}static publicKeyToEthAddress(t){Lt(t.length===HC,`Public key must be ${HC} bytes but received ${t.length} bytes`);try{return Pe.Buffer.from(_C.keccak_256(dt(t))).slice(-U3)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(t){let{publicKey:r,message:n,signature:i,recoveryId:o,instructionIndex:s}=t;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(t){let{ethAddress:r,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=t,a;typeof r=="string"?r.startsWith("0x")?a=Pe.Buffer.from(r.substr(2),"hex"):a=Pe.Buffer.from(r,"hex"):a=r,Lt(a.length===U3,`Address must be ${U3} bytes but received ${a.length} bytes`);let c=1+Rre,u=c,h=c+a.length,l=h+i.length+1,g=1,x=Pe.Buffer.alloc(D3.span+n.length);return D3.encode({numSignatures:g,signatureOffset:h,signatureInstructionIndex:s,ethAddressOffset:u,ethAddressInstructionIndex:s,messageDataOffset:l,messageDataSize:n.length,messageInstructionIndex:s,signature:dt(i),ethAddress:dt(a),recoveryId:o},x),x.fill(dt(n),D3.span),new $t({keys:[],programId:e.programId,data:x})}static createInstructionWithPrivateKey(t){let{privateKey:r,message:n,instructionIndex:i}=t;Lt(r.length===qC,`Private key must be ${qC} bytes but received ${r.length} bytes`);try{let o=dt(r),s=Mre(o,!1).slice(1),a=Pe.Buffer.from(_C.keccak_256(dt(n))),[c,u]=Cre(a,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:c,recoveryId:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};vw.programId=new ye("KeccakSecp256k11111111111111111111111111111");var f9=new ye("StakeConfig11111111111111111111111111111111"),Aw=class{constructor(t,r){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=r}},Cl=class{constructor(t,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}};Cl.default=new Cl(0,0,ye.default);var e6=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Tn))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{authorized:r,lockup:n}=zt(Tn.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Aw(new ye(r.staker),new ye(r.withdrawer)),lockup:new Cl(n.unixTimestamp,n.epoch,new ye(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),zt(Tn.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,stakeAuthorizationType:n}=zt(Tn.Authorize,t.data),i={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ye(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(i.custodianPubkey=t.keys[3].pubkey),i}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);let{newAuthorized:r,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:o}=zt(Tn.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:i,authorityOwner:new ye(o),newAuthorizedPubkey:new ye(r),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=zt(Tn.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:r}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(Tn.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);let{lamports:r}=zt(Tn.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:r};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),zt(Tn.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Dh.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Tn=Object.freeze({Initialize:{index:0,layout:H.struct([H.u32("instruction"),Wee(),zee()])},Authorize:{index:1,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:H.struct([H.u32("instruction")])},Split:{index:3,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},Withdraw:{index:4,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},Deactivate:{index:5,layout:H.struct([H.u32("instruction")])},Merge:{index:7,layout:H.struct([H.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("stakeAuthorizationType"),_l("authoritySeed"),bt("authorityOwner")])}}),Ore=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Dh=class{constructor(){}static initialize(t){let{stakePubkey:r,authorized:n,lockup:i}=t,o=i||Cl.default,s=Tn.Initialize,a=Ot(s,{authorized:{staker:dt(n.staker.toBuffer()),withdrawer:dt(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:dt(o.custodian.toBuffer())}}),c={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Oh,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new $t(c)}static createAccountWithSeed(t){let r=new Gt;r.add(pi.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(t){let r=new Gt;r.add(pi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=t;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(t){let{stakePubkey:r,authorizedPubkey:n,votePubkey:i}=t,o=Tn.Delegate,s=Ot(o);return new Gt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:f9,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){let{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=t,a=Tn.Authorize,c=Ot(a,{newAuthorized:dt(i.toBuffer()),stakeAuthorizationType:o.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:va,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new Gt().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(t){let{stakePubkey:r,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:a,custodianPubkey:c}=t,u=Tn.AuthorizeWithSeed,h=Ot(u,{newAuthorized:dt(s.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:dt(o.toBuffer())}),l=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1}];return c&&l.push({pubkey:c,isSigner:!1,isWritable:!1}),new Gt().add({keys:l,programId:this.programId,data:h})}static splitInstruction(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=t,s=Tn.Split,a=Ot(s,{lamports:o});return new $t({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t){let r=new Gt;return r.add(pi.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:s,lamports:a}=t,c=new Gt;return c.add(pi.allocate({accountPubkey:i,basePubkey:o,seed:s,space:this.space,programId:this.programId})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){let{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:i}=t,o=Tn.Merge,s=Ot(o);return new Gt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){let{stakePubkey:r,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=t,a=Tn.Withdraw,c=Ot(a,{lamports:o}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:dw,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!1,isWritable:!1}),new Gt().add({keys:u,programId:this.programId,data:c})}static deactivate(t){let{stakePubkey:r,authorizedPubkey:n}=t,i=Tn.Deactivate,o=Ot(i);return new Gt().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Dh.programId=new ye("Stake11111111111111111111111111111111111111");Dh.space=200;var Sw=class{constructor(t,r,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}},t6=class{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);let n=H.u32("instruction").decode(t.data),i;for(let[o,s]of Object.entries(Rc))if(s.index==n){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);let{voteInit:r}=zt(Rc.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Sw(new ye(r.nodePubkey),new ye(r.authorizedVoter),new ye(r.authorizedWithdrawer),r.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{newAuthorized:r,voteAuthorizationType:n}=zt(Rc.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ye(r),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:o}}=zt(Rc.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ye(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new ye(i),voteAuthorizationType:{index:o},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);let{lamports:r}=zt(Rc.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:r,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Lh.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,r){if(t.length<r)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${r}`)}},Rc=Object.freeze({InitializeAccount:{index:0,layout:H.struct([H.u32("instruction"),jee()])},Authorize:{index:1,layout:H.struct([H.u32("instruction"),bt("newAuthorized"),H.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:H.struct([H.u32("instruction"),H.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:H.struct([H.u32("instruction"),Gee()])}}),Nre=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Lh=class e{constructor(){}static initializeAccount(t){let{votePubkey:r,nodePubkey:n,voteInit:i}=t,o=Rc.InitializeAccount,s=Ot(o,{voteInit:{nodePubkey:dt(i.nodePubkey.toBuffer()),authorizedVoter:dt(i.authorizedVoter.toBuffer()),authorizedWithdrawer:dt(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Oh,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new $t(a)}static createAccount(t){let r=new Gt;return r.add(pi.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=t,s=Rc.Authorize,a=Ot(s,{newAuthorized:dt(i.toBuffer()),voteAuthorizationType:o.index}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Gt().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:a}=t,c=Rc.AuthorizeWithSeed,u=Ot(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:dt(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:dt(o.toBuffer()),voteAuthorizationType:s.index}}),h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Gt().add({keys:h,programId:this.programId,data:u})}static withdraw(t){let{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=t,s=Rc.Withdraw,a=Ot(s,{lamports:i}),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Gt().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}};Lh.programId=new ye("Vote111111111111111111111111111111111111111");Lh.space=3731;var l9=new ye("Va1idator1nfo111111111111111111111111111111"),Ure=I.type({name:I.string(),website:I.optional(I.string()),details:I.optional(I.string()),keybaseUsername:I.optional(I.string())}),r6=class e{constructor(t,r){this.key=void 0,this.info=void 0,this.key=t,this.info=r}static fromConfigData(t){let r=[...t];if(Yi(r)!==2)return null;let i=[];for(let o=0;o<2;o++){let s=new ye(Ji(r,0,Ea)),a=Aa(r)===1;i.push({publicKey:s,isSigner:a})}if(i[0].publicKey.equals(l9)&&i[1].isSigner){let o=_l().decode(Pe.Buffer.from(r)),s=JSON.parse(o);return I.assert(s,Ure),new e(i[1].publicKey,s)}return null}},Dre=new ye("Vote111111111111111111111111111111111111111"),Lre=H.struct([bt("nodePubkey"),bt("authorizedWithdrawer"),H.u8("commission"),H.nu64(),H.seq(H.struct([H.nu64("slot"),H.u32("confirmationCount")]),H.offset(H.u32(),-8),"votes"),H.u8("rootSlotValid"),H.nu64("rootSlot"),H.nu64(),H.seq(H.struct([H.nu64("epoch"),bt("authorizedVoter")]),H.offset(H.u32(),-8),"authorizedVoters"),H.struct([H.seq(H.struct([bt("authorizedPubkey"),H.nu64("epochOfLastAuthorizedSwitch"),H.nu64("targetEpoch")]),32,"buf"),H.nu64("idx"),H.u8("isEmpty")],"priorVoters"),H.nu64(),H.seq(H.struct([H.nu64("epoch"),H.nu64("credits"),H.nu64("prevCredits")]),H.offset(H.u32(),-8),"epochCredits"),H.struct([H.nu64("slot"),H.nu64("timestamp")],"lastTimestamp")]),n6=class e{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){let n=Lre.decode(dt(t),4),i=n.rootSlot;return n.rootSlotValid||(i=null),new e({nodePubkey:new ye(n.nodePubkey),authorizedWithdrawer:new ye(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(Kre),priorVoters:Fre(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}};function Kre({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new ye(e)}}function WC({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new ye(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}function Fre({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(WC),...e.slice(0,t).map(WC)]}var zC={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Vre(e,t){let r=t===!1?"http":"https";if(!e)return zC[r].devnet;let n=zC[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}async function qre(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;let s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await e.sendRawTransaction(t,s),c=o&&o.commitment,h=(await(i?e.confirmTransaction(i,c):e.confirmTransaction(a,c))).value;if(h.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a}var Hre=1e9;he.Account=V3;he.AddressLookupTableAccount=nm;he.AddressLookupTableInstruction=Q3;he.AddressLookupTableProgram=om;he.Authorized=Aw;he.BLOCKHASH_CACHE_TIMEOUT_MS=e9;he.BPF_LOADER_DEPRECATED_PROGRAM_ID=qee;he.BPF_LOADER_PROGRAM_ID=nte;he.BpfLoader=j3;he.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=Sa;he.ComputeBudgetInstruction=X3;he.ComputeBudgetProgram=sm;he.Connection=Z3;he.Ed25519Program=ww;he.Enum=F3;he.EpochSchedule=gw;he.FeeCalculatorLayout=ZC;he.Keypair=xw;he.LAMPORTS_PER_SOL=Hre;he.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=Mc;he.Loader=Uh;he.Lockup=Cl;he.MAX_SEED_LENGTH=$C;he.Message=Ia;he.MessageAccountKeys=Bl;he.MessageV0=Rh;he.NONCE_ACCOUNT_LENGTH=W3;he.NonceAccount=mw;he.PACKET_DATA_SIZE=Wu;he.PUBLIC_KEY_LENGTH=Ea;he.PublicKey=ye;he.SIGNATURE_LENGTH_IN_BYTES=Xy;he.SOLANA_SCHEMA=Zy;he.STAKE_CONFIG_ID=f9;he.STAKE_INSTRUCTION_LAYOUTS=Tn;he.SYSTEM_INSTRUCTION_LAYOUTS=ir;he.SYSVAR_CLOCK_PUBKEY=va;he.SYSVAR_EPOCH_SCHEDULE_PUBKEY=Yee;he.SYSVAR_INSTRUCTIONS_PUBKEY=Jee;he.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=lw;he.SYSVAR_RENT_PUBKEY=Oh;he.SYSVAR_REWARDS_PUBKEY=Zee;he.SYSVAR_SLOT_HASHES_PUBKEY=Qee;he.SYSVAR_SLOT_HISTORY_PUBKEY=Xee;he.SYSVAR_STAKE_HISTORY_PUBKEY=dw;he.Secp256k1Program=vw;he.SendTransactionError=rm;he.SolanaJSONRPCError=we;he.SolanaJSONRPCErrorCode=ute;he.StakeAuthorizationLayout=Ore;he.StakeInstruction=e6;he.StakeProgram=Dh;he.Struct=Qy;he.SystemInstruction=z3;he.SystemProgram=pi;he.Transaction=Gt;he.TransactionExpiredBlockheightExceededError=em;he.TransactionExpiredNonceInvalidError=Hu;he.TransactionExpiredTimeoutError=tm;he.TransactionInstruction=$t;he.TransactionMessage=q3;he.VALIDATOR_INFO_KEY=l9;he.VERSION_PREFIX_MASK=Iw;he.VOTE_PROGRAM_ID=Dre;he.ValidatorInfo=r6;he.VersionedMessage=s6;he.VersionedTransaction=H3;he.VoteAccount=n6;he.VoteAuthorizationLayout=Nre;he.VoteInit=Sw;he.VoteInstruction=t6;he.VoteProgram=Lh;he.clusterApiUrl=Vre;he.sendAndConfirmRawTransaction=qre;he.sendAndConfirmTransaction=hw});var AM=L(i1=>{"use strict";p();y();Object.defineProperty(i1,"__esModule",{value:!0});i1.version=void 0;i1.version="properties/5.7.0"});var jo=L(tn=>{"use strict";p();y();var fie=tn&&tn.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},lie=tn&&tn.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(tn,"__esModule",{value:!0});tn.Description=tn.deepCopy=tn.shallowCopy=tn.checkProperties=tn.resolveProperties=tn.getStatic=tn.defineReadOnly=void 0;var die=Ti(),hie=AM(),o1=new die.Logger(hie.version);function SM(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}tn.defineReadOnly=SM;function pie(e,t){for(var r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||typeof e.prototype!="object")break;e=Object.getPrototypeOf(e.prototype).constructor}return null}tn.getStatic=pie;function yie(e){return fie(this,void 0,void 0,function(){var t,r;return lie(this,function(n){switch(n.label){case 0:return t=Object.keys(e).map(function(i){var o=e[i];return Promise.resolve(o).then(function(s){return{key:i,value:s}})}),[4,Promise.all(t)];case 1:return r=n.sent(),[2,r.reduce(function(i,o){return i[o.key]=o.value,i},{})]}})})}tn.resolveProperties=yie;function mie(e,t){(!e||typeof e!="object")&&o1.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(function(r){t[r]||o1.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}tn.checkProperties=mie;function gie(e){var t={};for(var r in e)t[r]=e[r];return t}tn.shallowCopy=gie;var bie={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function EM(e){if(e==null||bie[typeof e])return!0;if(Array.isArray(e)||typeof e=="object"){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch{continue}if(!EM(n))return!1}return!0}return o1.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function xie(e){if(EM(e))return e;if(Array.isArray(e))return Object.freeze(e.map(function(i){return s1(i)}));if(typeof e=="object"){var t={};for(var r in e){var n=e[r];n!==void 0&&SM(t,r,s1(n))}return t}return o1.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function s1(e){return xie(e)}tn.deepCopy=s1;var wie=function(){function e(t){for(var r in t)this[r]=s1(t[r])}return e}();tn.Description=wie});var CM=L(c1=>{"use strict";p();y();Object.defineProperty(c1,"__esModule",{value:!0});c1.AddressZero=void 0;c1.AddressZero="0x0000000000000000000000000000000000000000"});var MM=L(_n=>{"use strict";p();y();Object.defineProperty(_n,"__esModule",{value:!0});_n.MaxInt256=_n.MinInt256=_n.MaxUint256=_n.WeiPerEther=_n.Two=_n.One=_n.Zero=_n.NegativeOne=void 0;var nf=oh(),Iie=nf.BigNumber.from(-1);_n.NegativeOne=Iie;var kie=nf.BigNumber.from(0);_n.Zero=kie;var Tie=nf.BigNumber.from(1);_n.One=Tie;var Pie=nf.BigNumber.from(2);_n.Two=Pie;var _ie=nf.BigNumber.from("1000000000000000000");_n.WeiPerEther=_ie;var Bie=nf.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");_n.MaxUint256=Bie;var Cie=nf.BigNumber.from("-0x8000000000000000000000000000000000000000000000000000000000000000");_n.MinInt256=Cie;var Mie=nf.BigNumber.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");_n.MaxInt256=Mie});var RM=L(u1=>{"use strict";p();y();Object.defineProperty(u1,"__esModule",{value:!0});u1.HashZero=void 0;u1.HashZero="0x0000000000000000000000000000000000000000000000000000000000000000"});var OM=L(f1=>{"use strict";p();y();Object.defineProperty(f1,"__esModule",{value:!0});f1.EtherSymbol=void 0;f1.EtherSymbol="\u039E"});var L6=L(wr=>{"use strict";p();y();Object.defineProperty(wr,"__esModule",{value:!0});wr.EtherSymbol=wr.HashZero=wr.MaxInt256=wr.MinInt256=wr.MaxUint256=wr.WeiPerEther=wr.Two=wr.One=wr.Zero=wr.NegativeOne=wr.AddressZero=void 0;var Rie=CM();Object.defineProperty(wr,"AddressZero",{enumerable:!0,get:function(){return Rie.AddressZero}});var of=MM();Object.defineProperty(wr,"NegativeOne",{enumerable:!0,get:function(){return of.NegativeOne}});Object.defineProperty(wr,"Zero",{enumerable:!0,get:function(){return of.Zero}});Object.defineProperty(wr,"One",{enumerable:!0,get:function(){return of.One}});Object.defineProperty(wr,"Two",{enumerable:!0,get:function(){return of.Two}});Object.defineProperty(wr,"WeiPerEther",{enumerable:!0,get:function(){return of.WeiPerEther}});Object.defineProperty(wr,"MaxUint256",{enumerable:!0,get:function(){return of.MaxUint256}});Object.defineProperty(wr,"MinInt256",{enumerable:!0,get:function(){return of.MinInt256}});Object.defineProperty(wr,"MaxInt256",{enumerable:!0,get:function(){return of.MaxInt256}});var Oie=RM();Object.defineProperty(wr,"HashZero",{enumerable:!0,get:function(){return Oie.HashZero}});var Nie=OM();Object.defineProperty(wr,"EtherSymbol",{enumerable:!0,get:function(){return Nie.EtherSymbol}})});var NM=L(l1=>{"use strict";p();y();Object.defineProperty(l1,"__esModule",{value:!0});l1.version=void 0;l1.version="strings/5.7.0"});var h1=L($r=>{"use strict";p();y();Object.defineProperty($r,"__esModule",{value:!0});$r.toUtf8CodePoints=$r.toUtf8String=$r._toUtf8String=$r._toEscapedUtf8String=$r.toUtf8Bytes=$r.Utf8ErrorFuncs=$r.Utf8ErrorReason=$r.UnicodeNormalizationForm=void 0;var UM=un(),Uie=Ti(),Die=NM(),DM=new Uie.Logger(Die.version),d1;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(d1=$r.UnicodeNormalizationForm||($r.UnicodeNormalizationForm={}));var $o;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})($o=$r.Utf8ErrorReason||($r.Utf8ErrorReason={}));function Lie(e,t,r,n,i){return DM.throwArgumentError("invalid codepoint at offset "+t+"; "+e,"bytes",r)}function LM(e,t,r,n,i){if(e===$o.BAD_PREFIX||e===$o.UNEXPECTED_CONTINUE){for(var o=0,s=t+1;s<r.length&&r[s]>>6===2;s++)o++;return o}return e===$o.OVERRUN?r.length-t-1:0}function Kie(e,t,r,n,i){return e===$o.OVERLONG?(n.push(i),0):(n.push(65533),LM(e,t,r,n,i))}$r.Utf8ErrorFuncs=Object.freeze({error:Lie,ignore:LM,replace:Kie});function F6(e,t){t==null&&(t=$r.Utf8ErrorFuncs.error),e=(0,UM.arrayify)(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(!(i>>7)){r.push(i);continue}var o=null,s=null;if((i&224)===192)o=1,s=127;else if((i&240)===224)o=2,s=2047;else if((i&248)===240)o=3,s=65535;else{(i&192)===128?n+=t($o.UNEXPECTED_CONTINUE,n-1,e,r):n+=t($o.BAD_PREFIX,n-1,e,r);continue}if(n-1+o>=e.length){n+=t($o.OVERRUN,n-1,e,r);continue}for(var a=i&(1<<8-o-1)-1,c=0;c<o;c++){var u=e[n];if((u&192)!=128){n+=t($o.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|u&63,n++}if(a!==null){if(a>1114111){n+=t($o.OUT_OF_RANGE,n-1-o,e,r,a);continue}if(a>=55296&&a<=57343){n+=t($o.UTF16_SURROGATE,n-1-o,e,r,a);continue}if(a<=s){n+=t($o.OVERLONG,n-1-o,e,r,a);continue}r.push(a)}}return r}function KM(e,t){t===void 0&&(t=d1.current),t!=d1.current&&(DM.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;var o=e.charCodeAt(n);if(n>=e.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");var s=65536+((i&1023)<<10)+(o&1023);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return(0,UM.arrayify)(r)}$r.toUtf8Bytes=KM;function K6(e){var t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function Fie(e,t){return'"'+F6(e,t).map(function(r){if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?K6(r):(r-=65536,K6((r>>10&1023)+55296)+K6((r&1023)+56320))}).join("")+'"'}$r._toEscapedUtf8String=Fie;function FM(e){return e.map(function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))}).join("")}$r._toUtf8String=FM;function Vie(e,t){return FM(F6(e,t))}$r.toUtf8String=Vie;function qie(e,t){return t===void 0&&(t=d1.current),F6(KM(e,t))}$r.toUtf8CodePoints=qie});var qM=L(Jh=>{"use strict";p();y();Object.defineProperty(Jh,"__esModule",{value:!0});Jh.parseBytes32String=Jh.formatBytes32String=void 0;var Hie=L6(),V6=un(),VM=h1();function Wie(e){var t=(0,VM.toUtf8Bytes)(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return(0,V6.hexlify)((0,V6.concat)([t,Hie.HashZero]).slice(0,32))}Jh.formatBytes32String=Wie;function zie(e){var t=(0,V6.arrayify)(e);if(t.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(t[31]!==0)throw new Error("invalid bytes32 string - no null terminator");for(var r=31;t[r-1]===0;)r--;return(0,VM.toUtf8String)(t.slice(0,r))}Jh.parseBytes32String=zie});var GM=L(_a=>{"use strict";p();y();Object.defineProperty(_a,"__esModule",{value:!0});_a.nameprep=_a._nameprepTableC=_a._nameprepTableB2=_a._nameprepTableA1=void 0;var Tm=h1();function jie(e){if(e.length%4!==0)throw new Error("bad data");for(var t=[],r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}function q6(e,t){t||(t=function(i){return[parseInt(i,16)]});var r=0,n={};return e.split(",").forEach(function(i){var o=i.split(":");r+=parseInt(o[0],16),n[r]=t(o[1])}),n}function HM(e){var t=0;return e.split(",").map(function(r){var n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");var i=t+parseInt(n[0],16);return t=parseInt(n[1],16),{l:i,h:t}})}function H6(e,t){for(var r=0,n=0;n<t.length;n++){var i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(e-r)!==-1)continue;return i}}return null}var Gie=HM("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),$ie="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(function(e){return parseInt(e,16)}),Yie=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Jie=q6("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Zie=q6("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Qie=q6("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",jie),Xie=HM("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function eoe(e){return e.reduce(function(t,r){return r.forEach(function(n){t.push(n)}),t},[])}function WM(e){return!!H6(e,Gie)}_a._nameprepTableA1=WM;function zM(e){var t=H6(e,Yie);if(t)return[e+t.s];var r=Jie[e];if(r)return r;var n=Zie[e];if(n)return[e+n[0]];var i=Qie[e];return i||null}_a._nameprepTableB2=zM;function jM(e){return!!H6(e,Xie)}_a._nameprepTableC=jM;function toe(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();var t=(0,Tm.toUtf8CodePoints)(e);t=eoe(t.map(function(n){if($ie.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];var i=zM(n);return i||[n]})),t=(0,Tm.toUtf8CodePoints)((0,Tm._toUtf8String)(t),Tm.UnicodeNormalizationForm.NFKC),t.forEach(function(n){if(jM(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),t.forEach(function(n){if(WM(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});var r=(0,Tm._toUtf8String)(t);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}_a.nameprep=toe});var sf=L(Vr=>{"use strict";p();y();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.nameprep=Vr.parseBytes32String=Vr.formatBytes32String=Vr.UnicodeNormalizationForm=Vr.Utf8ErrorReason=Vr.Utf8ErrorFuncs=Vr.toUtf8String=Vr.toUtf8CodePoints=Vr.toUtf8Bytes=Vr._toEscapedUtf8String=void 0;var $M=qM();Object.defineProperty(Vr,"formatBytes32String",{enumerable:!0,get:function(){return $M.formatBytes32String}});Object.defineProperty(Vr,"parseBytes32String",{enumerable:!0,get:function(){return $M.parseBytes32String}});var roe=GM();Object.defineProperty(Vr,"nameprep",{enumerable:!0,get:function(){return roe.nameprep}});var Dl=h1();Object.defineProperty(Vr,"_toEscapedUtf8String",{enumerable:!0,get:function(){return Dl._toEscapedUtf8String}});Object.defineProperty(Vr,"toUtf8Bytes",{enumerable:!0,get:function(){return Dl.toUtf8Bytes}});Object.defineProperty(Vr,"toUtf8CodePoints",{enumerable:!0,get:function(){return Dl.toUtf8CodePoints}});Object.defineProperty(Vr,"toUtf8String",{enumerable:!0,get:function(){return Dl.toUtf8String}});Object.defineProperty(Vr,"UnicodeNormalizationForm",{enumerable:!0,get:function(){return Dl.UnicodeNormalizationForm}});Object.defineProperty(Vr,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return Dl.Utf8ErrorFuncs}});Object.defineProperty(Vr,"Utf8ErrorReason",{enumerable:!0,get:function(){return Dl.Utf8ErrorReason}})});var W6=L(p1=>{"use strict";p();y();Object.defineProperty(p1,"__esModule",{value:!0});p1.id=void 0;var noe=bu(),ioe=sf();function ooe(e){return(0,noe.keccak256)((0,ioe.toUtf8Bytes)(e))}p1.id=ooe});var z6=L(y1=>{"use strict";p();y();Object.defineProperty(y1,"__esModule",{value:!0});y1.version=void 0;y1.version="hash/5.7.0"});var JM=L(Zh=>{"use strict";p();y();Object.defineProperty(Zh,"__esModule",{value:!0});Zh.encode=Zh.decode=void 0;var YM=un();function soe(e){e=atob(e);for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return(0,YM.arrayify)(t)}Zh.decode=soe;function aoe(e){e=(0,YM.arrayify)(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}Zh.encode=aoe});var QM=L(Qh=>{"use strict";p();y();Object.defineProperty(Qh,"__esModule",{value:!0});Qh.encode=Qh.decode=void 0;var ZM=JM();Object.defineProperty(Qh,"decode",{enumerable:!0,get:function(){return ZM.decode}});Object.defineProperty(Qh,"encode",{enumerable:!0,get:function(){return ZM.encode}})});var G6=L(Bn=>{"use strict";p();y();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.read_emoji_trie=Bn.read_zero_terminated_array=Bn.read_mapped_map=Bn.read_member_array=Bn.signed=Bn.read_compressed_payload=Bn.read_payload=Bn.decode_arithmetic=void 0;function eR(e,t){t==null&&(t=1);var r=[],n=r.forEach,i=function(o,s){n.call(o,function(a){s>0&&Array.isArray(a)?i(a,s-1):r.push(a)})};return i(e,t),r}function coe(e){for(var t={},r=0;r<e.length;r++){var n=e[r];t[n[0]]=n[1]}return t}function tR(e){var t=0;function r(){return e[t++]<<8|e[t++]}for(var n=r(),i=1,o=[0,1],s=1;s<n;s++)o.push(i+=r());var a=r(),c=t;t+=a;var u=0,h=0;function l(){return u==0&&(h=h<<8|e[t++],u=8),h>>--u&1}for(var g=31,x=Math.pow(2,g),A=x>>>1,E=A>>1,C=x-1,M=0,s=0;s<g;s++)M=M<<1|l();for(var N=[],R=0,V=x;;){for(var q=Math.floor(((M-R+1)*i-1)/V),W=0,G=n;G-W>1;){var z=W+G>>>1;q<o[z]?G=z:W=z}if(W==0)break;N.push(W);for(var te=R+Math.floor(V*o[W]/i),_=R+Math.floor(V*o[W+1]/i)-1;!((te^_)&A);)M=M<<1&C|l(),te=te<<1&C,_=_<<1&C|1;for(;te&~_&E;)M=M&A|M<<1&C>>>1|l(),te=te<<1^A,_=(_^A)<<1|A|1;R=te,V=1+_-te}var f=n-4;return N.map(function(m){switch(m-f){case 3:return f+65792+(e[c++]<<16|e[c++]<<8|e[c++]);case 2:return f+256+(e[c++]<<8|e[c++]);case 1:return f+e[c++];default:return m-1}})}Bn.decode_arithmetic=tR;function rR(e){var t=0;return function(){return e[t++]}}Bn.read_payload=rR;function uoe(e){return rR(tR(e))}Bn.read_compressed_payload=uoe;function nR(e){return e&1?~e>>1:e>>1}Bn.signed=nR;function foe(e,t){for(var r=Array(e),n=0;n<e;n++)r[n]=1+t();return r}function XM(e,t){for(var r=Array(e),n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function loe(e,t){for(var r=Array(e),n=0,i=0;n<e;n++)r[n]=i+=nR(t());return r}function j6(e,t){for(var r=XM(e(),e),n=e(),i=XM(n,e),o=foe(n,e),s=0;s<n;s++)for(var a=0;a<o[s];a++)r.push(i[s]+a);return t?r.map(function(c){return t[c]}):r}Bn.read_member_array=j6;function doe(e){for(var t=[];;){var r=e();if(r==0)break;t.push(hoe(r,e))}for(;;){var r=e()-1;if(r<0)break;t.push(poe(r,e))}return coe(eR(t))}Bn.read_mapped_map=doe;function iR(e){for(var t=[];;){var r=e();if(r==0)break;t.push(r)}return t}Bn.read_zero_terminated_array=iR;function oR(e,t,r){for(var n=Array(e).fill(void 0).map(function(){return[]}),i=0;i<t;i++)loe(e,r).forEach(function(o,s){return n[s].push(o)});return n}function hoe(e,t){var r=1+t(),n=t(),i=iR(t),o=oR(i.length,1+e,t);return eR(o.map(function(s,a){var c=s[0],u=s.slice(1);return Array(i[a]).fill(void 0).map(function(h,l){var g=l*n;return[c+l*r,u.map(function(x){return x+g})]})}))}function poe(e,t){var r=1+t(),n=oR(r,1+e,t);return n.map(function(i){return[i[0],i.slice(1)]})}function yoe(e){var t=j6(e).sort(function(n,i){return n-i});return r();function r(){for(var n=[];;){var i=j6(e,t);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(function(h,l){return l.set.size-h.set.size});var o=e(),s=o%3;o=o/3|0;var a=!!(o&1);o>>=1;var c=o==1,u=o==2;return{branches:n,valid:s,fe0f:a,save:c,check:u}}}Bn.read_emoji_trie=yoe});var sR=L(m1=>{"use strict";p();y();Object.defineProperty(m1,"__esModule",{value:!0});m1.getData=void 0;var moe=QM(),goe=G6();function boe(){return(0,goe.read_compressed_payload)((0,moe.decode)("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}m1.getData=boe});var fR=L(Xh=>{"use strict";p();y();Object.defineProperty(Xh,"__esModule",{value:!0});Xh.ens_normalize=Xh.ens_normalize_post_check=void 0;var xoe=sf(),woe=sR(),g1=(0,woe.getData)(),b1=G6(),voe=new Set((0,b1.read_member_array)(g1)),Aoe=new Set((0,b1.read_member_array)(g1)),Soe=(0,b1.read_mapped_map)(g1),Eoe=(0,b1.read_emoji_trie)(g1),aR=45,cR=95;function uR(e){return(0,xoe.toUtf8CodePoints)(e)}function Ioe(e){return e.filter(function(t){return t!=65039})}function $6(e){for(var t=0,r=e.split(".");t<r.length;t++){var n=r[t],i=uR(n);try{for(var o=i.lastIndexOf(cR)-1;o>=0;o--)if(i[o]!==cR)throw new Error("underscore only allowed at start");if(i.length>=4&&i.every(function(s){return s<128})&&i[2]===aR&&i[3]===aR)throw new Error("invalid label extension")}catch(s){throw new Error('Invalid label "'+n+'": '+s.message)}}return e}Xh.ens_normalize_post_check=$6;function koe(e){return $6(Toe(e,Ioe))}Xh.ens_normalize=koe;function Toe(e,t){for(var r=uR(e).reverse(),n=[];r.length;){var i=_oe(r);if(i){n.push.apply(n,t(i));continue}var o=r.pop();if(voe.has(o)){n.push(o);continue}if(!Aoe.has(o)){var s=Soe[o];if(s){n.push.apply(n,s);continue}throw new Error("Disallowed codepoint: 0x"+o.toString(16).toUpperCase())}}return $6(Poe(String.fromCodePoint.apply(String,n)))}function Poe(e){return e.normalize("NFC")}function _oe(e,t){var r,n=Eoe,i,o,s=[],a=e.length;t&&(t.length=0);for(var c=function(){var h=e[--a];if(n=(r=n.branches.find(function(l){return l.set.has(h)}))===null||r===void 0?void 0:r.node,!n)return"break";if(n.save)o=h;else if(n.check&&h===o)return"break";s.push(h),n.fe0f&&(s.push(65039),a>0&&e[a-1]==65039&&a--),n.valid&&(i=s.slice(),n.valid==2&&i.splice(1,1),t&&t.push.apply(t,e.slice(a).reverse()),e.length=a)};a;){var u=c();if(u==="break")break}return i}});var Y6=L(Ba=>{"use strict";p();y();Object.defineProperty(Ba,"__esModule",{value:!0});Ba.dnsEncode=Ba.namehash=Ba.isValidName=Ba.ensNormalize=void 0;var x1=un(),hR=sf(),lR=bu(),Boe=Ti(),Coe=z6(),Moe=new Boe.Logger(Coe.version),Roe=fR(),pR=new Uint8Array(32);pR.fill(0);function dR(e){if(e.length===0)throw new Error("invalid ENS name; empty component");return e}function w1(e){var t=(0,hR.toUtf8Bytes)((0,Roe.ens_normalize)(e)),r=[];if(e.length===0)return r;for(var n=0,i=0;i<t.length;i++){var o=t[i];o===46&&(r.push(dR(t.slice(n,i))),n=i+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(dR(t.slice(n))),r}function Ooe(e){return w1(e).map(function(t){return(0,hR.toUtf8String)(t)}).join(".")}Ba.ensNormalize=Ooe;function Noe(e){try{return w1(e).length!==0}catch{}return!1}Ba.isValidName=Noe;function Uoe(e){typeof e!="string"&&Moe.throwArgumentError("invalid ENS name; not a string","name",e);for(var t=pR,r=w1(e);r.length;)t=(0,lR.keccak256)((0,x1.concat)([t,(0,lR.keccak256)(r.pop())]));return(0,x1.hexlify)(t)}Ba.namehash=Uoe;function Doe(e){return(0,x1.hexlify)((0,x1.concat)(w1(e).map(function(t){if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}Ba.dnsEncode=Doe});var yR=L(Ll=>{"use strict";p();y();Object.defineProperty(Ll,"__esModule",{value:!0});Ll.hashMessage=Ll.messagePrefix=void 0;var Loe=un(),Koe=bu(),J6=sf();Ll.messagePrefix=`Ethereum Signed Message:
`;function Foe(e){return typeof e=="string"&&(e=(0,J6.toUtf8Bytes)(e)),(0,Koe.keccak256)((0,Loe.concat)([(0,J6.toUtf8Bytes)(Ll.messagePrefix),(0,J6.toUtf8Bytes)(String(e.length)),e]))}Ll.hashMessage=Foe});var ER=L(af=>{"use strict";p();y();var Voe=af&&af.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},qoe=af&&af.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(af,"__esModule",{value:!0});af.TypedDataEncoder=void 0;var xR=cy(),Fl=oh(),jn=un(),e0=bu(),Kl=jo(),Hoe=Ti(),Woe=z6(),Mr=new Hoe.Logger(Woe.version),wR=W6(),vR=new Uint8Array(32);vR.fill(0);var zoe=Fl.BigNumber.from(-1),AR=Fl.BigNumber.from(0),SR=Fl.BigNumber.from(1),joe=Fl.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Goe(e){var t=(0,jn.arrayify)(e),r=t.length%32;return r?(0,jn.hexConcat)([t,vR.slice(r)]):(0,jn.hexlify)(t)}var $oe=(0,jn.hexZeroPad)(SR.toHexString(),32),Yoe=(0,jn.hexZeroPad)(AR.toHexString(),32),mR={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Z6=["name","version","chainId","verifyingContract","salt"];function gR(e){return function(t){return typeof t!="string"&&Mr.throwArgumentError("invalid domain value for "+JSON.stringify(e),"domain."+e,t),t}}var Joe={name:gR("name"),version:gR("version"),chainId:function(e){try{return Fl.BigNumber.from(e).toString()}catch{}return Mr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return(0,xR.getAddress)(e).toLowerCase()}catch{}return Mr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{var t=(0,jn.arrayify)(e);if(t.length!==32)throw new Error("bad length");return(0,jn.hexlify)(t)}catch{}return Mr.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Q6(e){{var t=e.match(/^(u?)int(\d*)$/);if(t){var r=t[1]==="",n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&Mr.throwArgumentError("invalid numeric width","type",e);var i=joe.mask(r?n-1:n),o=r?i.add(SR).mul(zoe):AR;return function(a){var c=Fl.BigNumber.from(a);return(c.lt(o)||c.gt(i))&&Mr.throwArgumentError("value out-of-bounds for "+e,"value",a),(0,jn.hexZeroPad)(c.toTwos(256).toHexString(),32)}}}{var t=e.match(/^bytes(\d+)$/);if(t){var s=parseInt(t[1]);return(s===0||s>32||t[1]!==String(s))&&Mr.throwArgumentError("invalid bytes width","type",e),function(c){var u=(0,jn.arrayify)(c);return u.length!==s&&Mr.throwArgumentError("invalid length for "+e,"value",c),Goe(c)}}}switch(e){case"address":return function(a){return(0,jn.hexZeroPad)((0,xR.getAddress)(a),32)};case"bool":return function(a){return a?$oe:Yoe};case"bytes":return function(a){return(0,e0.keccak256)(a)};case"string":return function(a){return(0,wR.id)(a)}}return null}function bR(e,t){return e+"("+t.map(function(r){var n=r.name,i=r.type;return i+" "+n}).join(",")+")"}var Zoe=function(){function e(t){(0,Kl.defineReadOnly)(this,"types",Object.freeze((0,Kl.deepCopy)(t))),(0,Kl.defineReadOnly)(this,"_encoderCache",{}),(0,Kl.defineReadOnly)(this,"_types",{});var r={},n={},i={};Object.keys(t).forEach(function(l){r[l]={},n[l]=[],i[l]={}});var o=function(l){var g={};t[l].forEach(function(x){g[x.name]&&Mr.throwArgumentError("duplicate variable name "+JSON.stringify(x.name)+" in "+JSON.stringify(l),"types",t),g[x.name]=!0;var A=x.type.match(/^([^\x5b]*)(\x5b|$)/)[1];A===l&&Mr.throwArgumentError("circular type reference to "+JSON.stringify(A),"types",t);var E=Q6(A);E||(n[A]||Mr.throwArgumentError("unknown type "+JSON.stringify(A),"types",t),n[A].push(l),r[l][A]=!0)})};for(var s in t)o(s);var a=Object.keys(n).filter(function(l){return n[l].length===0});a.length===0?Mr.throwArgumentError("missing primary type","types",t):a.length>1&&Mr.throwArgumentError("ambiguous primary types or unused types: "+a.map(function(l){return JSON.stringify(l)}).join(", "),"types",t),(0,Kl.defineReadOnly)(this,"primaryType",a[0]);function c(l,g){g[l]&&Mr.throwArgumentError("circular type reference to "+JSON.stringify(l),"types",t),g[l]=!0,Object.keys(r[l]).forEach(function(x){n[x]&&(c(x,g),Object.keys(g).forEach(function(A){i[A][x]=!0}))}),delete g[l]}c(this.primaryType,{});for(var u in i){var h=Object.keys(i[u]);h.sort(),this._types[u]=bR(u,t[u])+h.map(function(l){return bR(l,t[l])}).join("")}}return e.prototype.getEncoder=function(t){var r=this._encoderCache[t];return r||(r=this._encoderCache[t]=this._getEncoder(t)),r},e.prototype._getEncoder=function(t){var r=this;{var n=Q6(t);if(n)return n}var i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],s=this.getEncoder(o),a=parseInt(i[3]);return function(h){a>=0&&h.length!==a&&Mr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",h);var l=h.map(s);return r._types[o]&&(l=l.map(e0.keccak256)),(0,e0.keccak256)((0,jn.hexConcat)(l))}}var c=this.types[t];if(c){var u=(0,wR.id)(this._types[t]);return function(h){var l=c.map(function(g){var x=g.name,A=g.type,E=r.getEncoder(A)(h[x]);return r._types[A]?(0,e0.keccak256)(E):E});return l.unshift(u),(0,jn.hexConcat)(l)}}return Mr.throwArgumentError("unknown type: "+t,"type",t)},e.prototype.encodeType=function(t){var r=this._types[t];return r||Mr.throwArgumentError("unknown type: "+JSON.stringify(t),"name",t),r},e.prototype.encodeData=function(t,r){return this.getEncoder(t)(r)},e.prototype.hashStruct=function(t,r){return(0,e0.keccak256)(this.encodeData(t,r))},e.prototype.encode=function(t){return this.encodeData(this.primaryType,t)},e.prototype.hash=function(t){return this.hashStruct(this.primaryType,t)},e.prototype._visit=function(t,r,n){var i=this;{var o=Q6(t);if(o)return n(t,r)}var s=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){var a=s[1],c=parseInt(s[3]);return c>=0&&r.length!==c&&Mr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(function(h){return i._visit(a,h,n)})}var u=this.types[t];return u?u.reduce(function(h,l){var g=l.name,x=l.type;return h[g]=i._visit(x,r[g],n),h},{}):Mr.throwArgumentError("unknown type: "+t,"type",t)},e.prototype.visit=function(t,r){return this._visit(this.primaryType,t,r)},e.from=function(t){return new e(t)},e.getPrimaryType=function(t){return e.from(t).primaryType},e.hashStruct=function(t,r,n){return e.from(r).hashStruct(t,n)},e.hashDomain=function(t){var r=[];for(var n in t){var i=mR[n];i||Mr.throwArgumentError("invalid typed-data domain key: "+JSON.stringify(n),"domain",t),r.push({name:n,type:i})}return r.sort(function(o,s){return Z6.indexOf(o.name)-Z6.indexOf(s.name)}),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)},e.encode=function(t,r,n){return(0,jn.hexConcat)(["0x1901",e.hashDomain(t),e.from(r).hash(n)])},e.hash=function(t,r,n){return(0,e0.keccak256)(e.encode(t,r,n))},e.resolveNames=function(t,r,n,i){return Voe(this,void 0,void 0,function(){var o,s,a,c,u,h,l,g;return qoe(this,function(x){switch(x.label){case 0:t=(0,Kl.shallowCopy)(t),o={},t.verifyingContract&&!(0,jn.isHexString)(t.verifyingContract,20)&&(o[t.verifyingContract]="0x"),s=e.from(r),s.visit(n,function(A,E){return A==="address"&&!(0,jn.isHexString)(E,20)&&(o[E]="0x"),E}),a=[];for(c in o)a.push(c);u=0,x.label=1;case 1:return u<a.length?(h=a[u],l=o,g=h,[4,i(h)]):[3,4];case 2:l[g]=x.sent(),x.label=3;case 3:return u++,[3,1];case 4:return t.verifyingContract&&o[t.verifyingContract]&&(t.verifyingContract=o[t.verifyingContract]),n=s.visit(n,function(A,E){return A==="address"&&o[E]?o[E]:E}),[2,{domain:t,value:n}]}})})},e.getPayload=function(t,r,n){e.hashDomain(t);var i={},o=[];Z6.forEach(function(c){var u=t[c];u!=null&&(i[c]=Joe[c](u),o.push({name:c,type:mR[c]}))});var s=e.from(r),a=(0,Kl.shallowCopy)(r);return a.EIP712Domain?Mr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,function(c,u){if(c.match(/^bytes(\d*)/))return(0,jn.hexlify)((0,jn.arrayify)(u));if(c.match(/^u?int/))return Fl.BigNumber.from(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return typeof u!="string"&&Mr.throwArgumentError("invalid string","value",u),u}return Mr.throwArgumentError("unsupported type","type",c)})}},e}();af.TypedDataEncoder=Zoe});var e8=L(Cn=>{"use strict";p();y();Object.defineProperty(Cn,"__esModule",{value:!0});Cn._TypedDataEncoder=Cn.hashMessage=Cn.messagePrefix=Cn.ensNormalize=Cn.isValidName=Cn.namehash=Cn.dnsEncode=Cn.id=void 0;var Qoe=W6();Object.defineProperty(Cn,"id",{enumerable:!0,get:function(){return Qoe.id}});var X6=Y6();Object.defineProperty(Cn,"dnsEncode",{enumerable:!0,get:function(){return X6.dnsEncode}});Object.defineProperty(Cn,"isValidName",{enumerable:!0,get:function(){return X6.isValidName}});Object.defineProperty(Cn,"namehash",{enumerable:!0,get:function(){return X6.namehash}});var IR=yR();Object.defineProperty(Cn,"hashMessage",{enumerable:!0,get:function(){return IR.hashMessage}});Object.defineProperty(Cn,"messagePrefix",{enumerable:!0,get:function(){return IR.messagePrefix}});var Xoe=Y6();Object.defineProperty(Cn,"ensNormalize",{enumerable:!0,get:function(){return Xoe.ensNormalize}});var ese=ER();Object.defineProperty(Cn,"_TypedDataEncoder",{enumerable:!0,get:function(){return ese.TypedDataEncoder}})});var n8=L(_m=>{"use strict";p();y();Object.defineProperty(_m,"__esModule",{value:!0});_m.SupportedAlgorithm=void 0;var tse;(function(e){e.sha256="sha256",e.sha512="sha512"})(tse=_m.SupportedAlgorithm||(_m.SupportedAlgorithm={}))});var kR=L(A1=>{"use strict";p();y();Object.defineProperty(A1,"__esModule",{value:!0});A1.version=void 0;A1.version="sha2/5.7.0"});var PR=L(Yo=>{"use strict";p();y();var rse=Yo&&Yo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.computeHmac=Yo.sha512=Yo.sha256=Yo.ripemd160=void 0;var Bm=rse(z_()),Cm=un(),nse=n8(),TR=Ti(),ise=kR(),ose=new TR.Logger(ise.version);function sse(e){return"0x"+Bm.default.ripemd160().update((0,Cm.arrayify)(e)).digest("hex")}Yo.ripemd160=sse;function ase(e){return"0x"+Bm.default.sha256().update((0,Cm.arrayify)(e)).digest("hex")}Yo.sha256=ase;function cse(e){return"0x"+Bm.default.sha512().update((0,Cm.arrayify)(e)).digest("hex")}Yo.sha512=cse;function use(e,t,r){return nse.SupportedAlgorithm[e]||ose.throwError("unsupported algorithm "+e,TR.Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Bm.default.hmac(Bm.default[e],(0,Cm.arrayify)(t)).update((0,Cm.arrayify)(r)).digest("hex")}Yo.computeHmac=use});var i8=L(Jo=>{"use strict";p();y();Object.defineProperty(Jo,"__esModule",{value:!0});Jo.SupportedAlgorithm=Jo.sha512=Jo.sha256=Jo.ripemd160=Jo.computeHmac=void 0;var S1=PR();Object.defineProperty(Jo,"computeHmac",{enumerable:!0,get:function(){return S1.computeHmac}});Object.defineProperty(Jo,"ripemd160",{enumerable:!0,get:function(){return S1.ripemd160}});Object.defineProperty(Jo,"sha256",{enumerable:!0,get:function(){return S1.sha256}});Object.defineProperty(Jo,"sha512",{enumerable:!0,get:function(){return S1.sha512}});var fse=n8();Object.defineProperty(Jo,"SupportedAlgorithm",{enumerable:!0,get:function(){return fse.SupportedAlgorithm}})});var _8=L((P8,rO)=>{"use strict";p();y();(function(e){function t(d){return parseInt(d)===d}function r(d){if(!t(d.length))return!1;for(var S=0;S<d.length;S++)if(!t(d[S])||d[S]<0||d[S]>255)return!1;return!0}function n(d,S){if(d.buffer&&ArrayBuffer.isView(d)&&d.name==="Uint8Array")return S&&(d.slice?d=d.slice():d=Array.prototype.slice.call(d)),d;if(Array.isArray(d)){if(!r(d))throw new Error("Array contains invalid value: "+d);return new Uint8Array(d)}if(t(d.length)&&r(d))return new Uint8Array(d);throw new Error("unsupported array-like object")}function i(d){return new Uint8Array(d)}function o(d,S,F,U,D){(U!=null||D!=null)&&(d.slice?d=d.slice(U,D):d=Array.prototype.slice.call(d,U,D)),S.set(d,F)}var s=function(){function d(F){var U=[],D=0;for(F=encodeURI(F);D<F.length;){var Y=F.charCodeAt(D++);Y===37?(U.push(parseInt(F.substr(D,2),16)),D+=2):U.push(Y)}return n(U)}function S(F){for(var U=[],D=0;D<F.length;){var Y=F[D];Y<128?(U.push(String.fromCharCode(Y)),D++):Y>191&&Y<224?(U.push(String.fromCharCode((Y&31)<<6|F[D+1]&63)),D+=2):(U.push(String.fromCharCode((Y&15)<<12|(F[D+1]&63)<<6|F[D+2]&63)),D+=3)}return U.join("")}return{toBytes:d,fromBytes:S}}(),a=function(){function d(U){for(var D=[],Y=0;Y<U.length;Y+=2)D.push(parseInt(U.substr(Y,2),16));return D}var S="0123456789abcdef";function F(U){for(var D=[],Y=0;Y<U.length;Y++){var j=U[Y];D.push(S[(j&240)>>4]+S[j&15])}return D.join("")}return{toBytes:d,fromBytes:F}}(),c={16:10,24:12,32:14},u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],l=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],g=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],x=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],A=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],E=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],C=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],M=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],N=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],R=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],V=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],q=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],W=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],G=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function z(d){for(var S=[],F=0;F<d.length;F+=4)S.push(d[F]<<24|d[F+1]<<16|d[F+2]<<8|d[F+3]);return S}var te=function(d){if(!(this instanceof te))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(d,!0)}),this._prepare()};te.prototype._prepare=function(){var d=c[this.key.length];if(d==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var S=0;S<=d;S++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var F=(d+1)*4,U=this.key.length/4,D=z(this.key),Y,S=0;S<U;S++)Y=S>>2,this._Ke[Y][S%4]=D[S],this._Kd[d-Y][S%4]=D[S];for(var j=0,X=U,fe;X<F;){if(fe=D[U-1],D[0]^=h[fe>>16&255]<<24^h[fe>>8&255]<<16^h[fe&255]<<8^h[fe>>24&255]^u[j]<<24,j+=1,U!=8)for(var S=1;S<U;S++)D[S]^=D[S-1];else{for(var S=1;S<U/2;S++)D[S]^=D[S-1];fe=D[U/2-1],D[U/2]^=h[fe&255]^h[fe>>8&255]<<8^h[fe>>16&255]<<16^h[fe>>24&255]<<24;for(var S=U/2+1;S<U;S++)D[S]^=D[S-1]}for(var S=0,ue,K;S<U&&X<F;)ue=X>>2,K=X%4,this._Ke[ue][K]=D[S],this._Kd[d-ue][K]=D[S++],X++}for(var ue=1;ue<d;ue++)for(var K=0;K<4;K++)fe=this._Kd[ue][K],this._Kd[ue][K]=V[fe>>24&255]^q[fe>>16&255]^W[fe>>8&255]^G[fe&255]},te.prototype.encrypt=function(d){if(d.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var S=this._Ke.length-1,F=[0,0,0,0],U=z(d),D=0;D<4;D++)U[D]^=this._Ke[0][D];for(var Y=1;Y<S;Y++){for(var D=0;D<4;D++)F[D]=g[U[D]>>24&255]^x[U[(D+1)%4]>>16&255]^A[U[(D+2)%4]>>8&255]^E[U[(D+3)%4]&255]^this._Ke[Y][D];U=F.slice()}for(var j=i(16),X,D=0;D<4;D++)X=this._Ke[S][D],j[4*D]=(h[U[D]>>24&255]^X>>24)&255,j[4*D+1]=(h[U[(D+1)%4]>>16&255]^X>>16)&255,j[4*D+2]=(h[U[(D+2)%4]>>8&255]^X>>8)&255,j[4*D+3]=(h[U[(D+3)%4]&255]^X)&255;return j},te.prototype.decrypt=function(d){if(d.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var S=this._Kd.length-1,F=[0,0,0,0],U=z(d),D=0;D<4;D++)U[D]^=this._Kd[0][D];for(var Y=1;Y<S;Y++){for(var D=0;D<4;D++)F[D]=C[U[D]>>24&255]^M[U[(D+3)%4]>>16&255]^N[U[(D+2)%4]>>8&255]^R[U[(D+1)%4]&255]^this._Kd[Y][D];U=F.slice()}for(var j=i(16),X,D=0;D<4;D++)X=this._Kd[S][D],j[4*D]=(l[U[D]>>24&255]^X>>24)&255,j[4*D+1]=(l[U[(D+3)%4]>>16&255]^X>>16)&255,j[4*D+2]=(l[U[(D+2)%4]>>8&255]^X>>8)&255,j[4*D+3]=(l[U[(D+1)%4]&255]^X)&255;return j};var _=function(d){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new te(d)};_.prototype.encrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16)o(d,F,0,U,U+16),F=this._aes.encrypt(F),o(F,S,U);return S},_.prototype.decrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16)o(d,F,0,U,U+16),F=this._aes.decrypt(F),o(F,S,U);return S};var f=function(d,S){if(!(this instanceof f))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=n(S,!0),this._aes=new te(d)};f.prototype.encrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16){o(d,F,0,U,U+16);for(var D=0;D<16;D++)F[D]^=this._lastCipherblock[D];this._lastCipherblock=this._aes.encrypt(F),o(this._lastCipherblock,S,U)}return S},f.prototype.decrypt=function(d){if(d=n(d),d.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=i(d.length),F=i(16),U=0;U<d.length;U+=16){o(d,F,0,U,U+16),F=this._aes.decrypt(F);for(var D=0;D<16;D++)S[U+D]=F[D]^this._lastCipherblock[D];o(d,this._lastCipherblock,0,U,U+16)}return S};var m=function(d,S,F){if(!(this instanceof m))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");F||(F=1),this.segmentSize=F,this._shiftRegister=n(S,!0),this._aes=new te(d)};m.prototype.encrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var S=n(d,!0),F,U=0;U<S.length;U+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)S[U+D]^=F[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(S,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return S},m.prototype.decrypt=function(d){if(d.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var S=n(d,!0),F,U=0;U<S.length;U+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var D=0;D<this.segmentSize;D++)S[U+D]^=F[D];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(d,this._shiftRegister,16-this.segmentSize,U,U+this.segmentSize)}return S};var b=function(d,S){if(!(this instanceof b))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!S)S=i(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=n(S,!0),this._lastPrecipherIndex=16,this._aes=new te(d)};b.prototype.encrypt=function(d){for(var S=n(d,!0),F=0;F<S.length;F++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),S[F]^=this._lastPrecipher[this._lastPrecipherIndex++];return S},b.prototype.decrypt=b.prototype.encrypt;var w=function(d){if(!(this instanceof w))throw Error("Counter must be instanitated with `new`");d!==0&&!d&&(d=1),typeof d=="number"?(this._counter=i(16),this.setValue(d)):this.setBytes(d)};w.prototype.setValue=function(d){if(typeof d!="number"||parseInt(d)!=d)throw new Error("invalid counter value (must be an integer)");for(var S=15;S>=0;--S)this._counter[S]=d%256,d=d>>8},w.prototype.setBytes=function(d){if(d=n(d,!0),d.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=d},w.prototype.increment=function(){for(var d=15;d>=0;d--)if(this._counter[d]===255)this._counter[d]=0;else{this._counter[d]++;break}};var v=function(d,S){if(!(this instanceof v))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",S instanceof w||(S=new w(S)),this._counter=S,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new te(d)};v.prototype.encrypt=function(d){for(var S=n(d,!0),F=0;F<S.length;F++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),S[F]^=this._remainingCounter[this._remainingCounterIndex++];return S},v.prototype.decrypt=v.prototype.encrypt;function P(d){d=n(d,!0);var S=16-d.length%16,F=i(d.length+S);o(d,F);for(var U=d.length;U<F.length;U++)F[U]=S;return F}function B(d){if(d=n(d,!0),d.length<16)throw new Error("PKCS#7 invalid length");var S=d[d.length-1];if(S>16)throw new Error("PKCS#7 padding byte out of range");for(var F=d.length-S,U=0;U<S;U++)if(d[F+U]!==S)throw new Error("PKCS#7 invalid padding byte");var D=i(F);return o(d,D,0,0,F),D}var k={AES:te,Counter:w,ModeOfOperation:{ecb:_,cbc:f,cfb:m,ofb:b,ctr:v},utils:{hex:a,utf8:s},padding:{pkcs7:{pad:P,strip:B}},_arrayTest:{coerceArray:n,createArray:i,copyArray:o}};typeof P8<"u"?rO.exports=k:typeof define=="function"&&define.amd?define(k):(e.aesjs&&(k._aesjs=e.aesjs),e.aesjs=k)})(P8)});var fO=L((U8,uO)=>{"use strict";p();y();(function(e){function r(x){let A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),E=1779033703,C=3144134277,M=1013904242,N=2773480762,R=1359893119,V=2600822924,q=528734635,W=1541459225,G=new Uint32Array(64);function z(v){let P=0,B=v.length;for(;B>=64;){let k=E,d=C,S=M,F=N,U=R,D=V,Y=q,j=W,X,fe,ue,K,Z;for(fe=0;fe<16;fe++)ue=P+fe*4,G[fe]=(v[ue]&255)<<24|(v[ue+1]&255)<<16|(v[ue+2]&255)<<8|v[ue+3]&255;for(fe=16;fe<64;fe++)X=G[fe-2],K=(X>>>17|X<<15)^(X>>>19|X<<13)^X>>>10,X=G[fe-15],Z=(X>>>7|X<<25)^(X>>>18|X<<14)^X>>>3,G[fe]=(K+G[fe-7]|0)+(Z+G[fe-16]|0)|0;for(fe=0;fe<64;fe++)K=(((U>>>6|U<<26)^(U>>>11|U<<21)^(U>>>25|U<<7))+(U&D^~U&Y)|0)+(j+(A[fe]+G[fe]|0)|0)|0,Z=((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+(k&d^k&S^d&S)|0,j=Y,Y=D,D=U,U=F+K|0,F=S,S=d,d=k,k=K+Z|0;E=E+k|0,C=C+d|0,M=M+S|0,N=N+F|0,R=R+U|0,V=V+D|0,q=q+Y|0,W=W+j|0,P+=64,B-=64}}z(x);let te,_=x.length%64,f=x.length/536870912|0,m=x.length<<3,b=_<56?56:120,w=x.slice(x.length-_,x.length);for(w.push(128),te=_+1;te<b;te++)w.push(0);return w.push(f>>>24&255),w.push(f>>>16&255),w.push(f>>>8&255),w.push(f>>>0&255),w.push(m>>>24&255),w.push(m>>>16&255),w.push(m>>>8&255),w.push(m>>>0&255),z(w),[E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,M>>>24&255,M>>>16&255,M>>>8&255,M>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,R>>>24&255,R>>>16&255,R>>>8&255,R>>>0&255,V>>>24&255,V>>>16&255,V>>>8&255,V>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,W>>>24&255,W>>>16&255,W>>>8&255,W>>>0&255]}function n(x,A,E){x=x.length<=64?x:r(x);let C=64+A.length+4,M=new Array(C),N=new Array(64),R,V=[];for(R=0;R<64;R++)M[R]=54;for(R=0;R<x.length;R++)M[R]^=x[R];for(R=0;R<A.length;R++)M[64+R]=A[R];for(R=C-4;R<C;R++)M[R]=0;for(R=0;R<64;R++)N[R]=92;for(R=0;R<x.length;R++)N[R]^=x[R];function q(){for(let W=C-1;W>=C-4;W--){if(M[W]++,M[W]<=255)return;M[W]=0}}for(;E>=32;)q(),V=V.concat(r(N.concat(r(M)))),E-=32;return E>0&&(q(),V=V.concat(r(N.concat(r(M))).slice(0,E))),V}function i(x,A,E,C,M){let N;for(c(x,(2*E-1)*16,M,0,16),N=0;N<2*E;N++)a(x,N*16,M,16),s(M,C),c(M,0,x,A+N*16,16);for(N=0;N<E;N++)c(x,A+N*2*16,x,N*16,16);for(N=0;N<E;N++)c(x,A+(N*2+1)*16,x,(N+E)*16,16)}function o(x,A){return x<<A|x>>>32-A}function s(x,A){c(x,0,A,0,16);for(let E=8;E>0;E-=2)A[4]^=o(A[0]+A[12],7),A[8]^=o(A[4]+A[0],9),A[12]^=o(A[8]+A[4],13),A[0]^=o(A[12]+A[8],18),A[9]^=o(A[5]+A[1],7),A[13]^=o(A[9]+A[5],9),A[1]^=o(A[13]+A[9],13),A[5]^=o(A[1]+A[13],18),A[14]^=o(A[10]+A[6],7),A[2]^=o(A[14]+A[10],9),A[6]^=o(A[2]+A[14],13),A[10]^=o(A[6]+A[2],18),A[3]^=o(A[15]+A[11],7),A[7]^=o(A[3]+A[15],9),A[11]^=o(A[7]+A[3],13),A[15]^=o(A[11]+A[7],18),A[1]^=o(A[0]+A[3],7),A[2]^=o(A[1]+A[0],9),A[3]^=o(A[2]+A[1],13),A[0]^=o(A[3]+A[2],18),A[6]^=o(A[5]+A[4],7),A[7]^=o(A[6]+A[5],9),A[4]^=o(A[7]+A[6],13),A[5]^=o(A[4]+A[7],18),A[11]^=o(A[10]+A[9],7),A[8]^=o(A[11]+A[10],9),A[9]^=o(A[8]+A[11],13),A[10]^=o(A[9]+A[8],18),A[12]^=o(A[15]+A[14],7),A[13]^=o(A[12]+A[15],9),A[14]^=o(A[13]+A[12],13),A[15]^=o(A[14]+A[13],18);for(let E=0;E<16;++E)x[E]+=A[E]}function a(x,A,E,C){for(let M=0;M<C;M++)E[M]^=x[A+M]}function c(x,A,E,C,M){for(;M--;)E[C++]=x[A++]}function u(x){if(!x||typeof x.length!="number")return!1;for(let A=0;A<x.length;A++){let E=x[A];if(typeof E!="number"||E%1||E<0||E>=256)return!1}return!0}function h(x,A){if(typeof x!="number"||x%1)throw new Error("invalid "+A);return x}function l(x,A,E,C,M,N,R){if(E=h(E,"N"),C=h(C,"r"),M=h(M,"p"),N=h(N,"dkLen"),E===0||E&E-1)throw new Error("N must be power of 2");if(E>2147483647/128/C)throw new Error("N too large");if(C>2147483647/128/M)throw new Error("r too large");if(!u(x))throw new Error("password must be an array or buffer");if(x=Array.prototype.slice.call(x),!u(A))throw new Error("salt must be an array or buffer");A=Array.prototype.slice.call(A);let V=n(x,A,M*128*C),q=new Uint32Array(M*32*C);for(let U=0;U<q.length;U++){let D=U*4;q[U]=(V[D+3]&255)<<24|(V[D+2]&255)<<16|(V[D+1]&255)<<8|(V[D+0]&255)<<0}let W=new Uint32Array(64*C),G=new Uint32Array(32*C*E),z=32*C,te=new Uint32Array(16),_=new Uint32Array(16),f=M*E*2,m=0,b=null,w=!1,v=0,P=0,B,k,d=R?parseInt(1e3/C):4294967295,S=typeof setImmediate<"u"?setImmediate:setTimeout,F=function(){if(w)return R(new Error("cancelled"),m/f);let U;switch(v){case 0:k=P*32*C,c(q,k,W,0,z),v=1,B=0;case 1:U=E-B,U>d&&(U=d);for(let Y=0;Y<U;Y++)c(W,0,G,(B+Y)*z,z),i(W,z,C,te,_);if(B+=U,m+=U,R){let Y=parseInt(1e3*m/f);if(Y!==b){if(w=R(null,m/f),w)break;b=Y}}if(B<E)break;B=0,v=2;case 2:U=E-B,U>d&&(U=d);for(let Y=0;Y<U;Y++){let j=(2*C-1)*16,X=W[j]&E-1;a(G,X*z,W,z),i(W,z,C,te,_)}if(B+=U,m+=U,R){let Y=parseInt(1e3*m/f);if(Y!==b){if(w=R(null,m/f),w)break;b=Y}}if(B<E)break;if(c(W,0,q,k,z),P++,P<M){v=0;break}V=[];for(let Y=0;Y<q.length;Y++)V.push(q[Y]>>0&255),V.push(q[Y]>>8&255),V.push(q[Y]>>16&255),V.push(q[Y]>>24&255);let D=n(x,V,N);return R&&R(null,1,D),D}R&&S(F)};if(!R)for(;;){let U=F();if(U!=null)return U}F()}let g={scrypt:function(x,A,E,C,M,N,R){return new Promise(function(V,q){let W=0;R&&R(0),l(x,A,E,C,M,N,function(G,z,te){if(G)q(G);else if(te)R&&W!==1&&R(1),V(new Uint8Array(te));else if(R&&z!==W)return W=z,R(z)})})},syncScrypt:function(x,A,E,C,M,N){return new Uint8Array(l(x,A,E,C,M,N))}};typeof U8<"u"?uO.exports=g:typeof define=="function"&&define.amd?define(g):e&&(e.scrypt&&(e._scrypt=e.scrypt),e.scrypt=g)})(U8)});var SO=L((dBe,AO)=>{"use strict";p();y();function Vse(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function h(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,C=0,M=x.length;C!==M&&x[C]===0;)C++,A++;for(var N=(M-C)*u+1>>>0,R=new Uint8Array(N);C!==M;){for(var V=x[C],q=0,W=N-1;(V!==0||q<E)&&W!==-1;W--,q++)V+=256*R[W]>>>0,R[W]=V%s>>>0,V=V/s>>>0;if(V!==0)throw new Error("Non-zero carry");E=q,C++}for(var G=N-E;G!==N&&R[G]===0;)G++;for(var z=a.repeat(A);G<N;++G)z+=e.charAt(R[G]);return z}function l(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,C=0;x[A]===a;)E++,A++;for(var M=(x.length-A)*c+1>>>0,N=new Uint8Array(M);x[A];){var R=t[x.charCodeAt(A)];if(R===255)return;for(var V=0,q=M-1;(R!==0||V<C)&&q!==-1;q--,V++)R+=s*N[q]>>>0,N[q]=R%256>>>0,R=R/256>>>0;if(R!==0)throw new Error("Non-zero carry");C=V,A++}for(var W=M-C;W!==M&&N[W]===0;)W++;for(var G=new Uint8Array(E+(M-W)),z=E;W!==M;)G[z++]=N[W++];return G}function g(x){var A=l(x);if(A)return A;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:l,decode:g}}AO.exports=Vse});var IO=L((yBe,EO)=>{p();y();var qse=SO(),Hse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";EO.exports=qse(Hse)});var TO=L((bBe,kO)=>{"use strict";p();y();var G8=IO();kO.exports=function(e){function t(o){var s=Uint8Array.from(o),a=e(s),c=s.length+4,u=new Uint8Array(c);return u.set(s,0),u.set(a.subarray(0,4),s.length),G8.encode(u,c)}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=G8.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=G8.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var f0=L((vBe,_O)=>{"use strict";p();y();var{sha256:PO}=sx(),Wse=TO();function zse(e){return PO(PO(e))}_O.exports=Wse(zse)});var CO=L((EBe,BO)=>{"use strict";p();y();var $8=Ns(),jse=F_().Buffer;BO.exports=function(e){function t(o){var s=e(o);return $8.encode(jse.concat([o,s],o.length+4))}function r(o){var s=o.slice(0,-4),a=o.slice(-4),c=e(s);if(!(a[0]^c[0]|a[1]^c[1]|a[2]^c[2]|a[3]^c[3]))return s}function n(o){var s=$8.decodeUnsafe(o);if(s)return r(s)}function i(o){var s=$8.decode(o),a=r(s,e);if(!a)throw new Error("Invalid checksum");return a}return{encode:t,decode:i,decodeUnsafe:n}}});var OO=L((TBe,RO)=>{"use strict";p();y();var MO=H_(),Gse=CO();function $se(e){var t=MO("sha256").update(e).digest();return MO("sha256").update(t).digest()}RO.exports=Gse($se)});var V1=L((BBe,UO)=>{p();y();var Y8=OO();function NO(e,t){if(t!==void 0&&e[0]!==t)throw new Error("Invalid network version");if(e.length===33)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(e.length!==34)throw new Error("Invalid WIF length");if(e[33]!==1)throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function J8(e,t,r){var n=new Buffer(r?34:33);return n.writeUInt8(e,0),t.copy(n,1),r&&(n[33]=1),n}function Yse(e,t){return NO(Y8.decode(e),t)}function Jse(e,t,r){return typeof e=="number"?Y8.encode(J8(e,t,r)):Y8.encode(J8(e.version,e.privateKey,e.compressed))}UO.exports={decode:Yse,decodeRaw:NO,encode:Jse,encodeRaw:J8}});var X8=L(Mi=>{"use strict";p();y();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.output=Mi.exists=Mi.hash=Mi.bytes=Mi.bool=Mi.number=void 0;function W1(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Mi.number=W1;function HO(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Mi.bool=HO;function Q8(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Mi.bytes=Q8;function WO(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");W1(e.outputLen),W1(e.blockLen)}Mi.hash=WO;function zO(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Mi.exists=zO;function jO(e,t){Q8(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Mi.output=jO;var tae={number:W1,bool:HO,bytes:Q8,hash:WO,exists:zO,output:jO};Mi.default=tae});var GO=L(z1=>{"use strict";p();y();Object.defineProperty(z1,"__esModule",{value:!0});z1.crypto=void 0;z1.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var G1=L(ht=>{"use strict";p();y();Object.defineProperty(ht,"__esModule",{value:!0});ht.randomBytes=ht.wrapXOFConstructorWithOpts=ht.wrapConstructorWithOpts=ht.wrapConstructor=ht.checkOpts=ht.Hash=ht.concatBytes=ht.toBytes=ht.utf8ToBytes=ht.asyncLoop=ht.nextTick=ht.hexToBytes=ht.bytesToHex=ht.isLE=ht.rotr=ht.createView=ht.u32=ht.u8=void 0;var eI=GO(),rI=e=>e instanceof Uint8Array,rae=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);ht.u8=rae;var nae=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));ht.u32=nae;var iae=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);ht.createView=iae;var oae=(e,t)=>e<<32-t|e>>>t;ht.rotr=oae;ht.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ht.isLE)throw new Error("Non little-endian hardware is not supported");var sae=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function aae(e){if(!rI(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=sae[e[r]];return t}ht.bytesToHex=aae;function cae(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}ht.hexToBytes=cae;var uae=async()=>{};ht.nextTick=uae;async function fae(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,ht.nextTick)(),n+=o)}}ht.asyncLoop=fae;function $O(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}ht.utf8ToBytes=$O;function j1(e){if(typeof e=="string"&&(e=$O(e)),!rI(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}ht.toBytes=j1;function lae(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!rI(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}ht.concatBytes=lae;var tI=class{clone(){return this._cloneInto()}};ht.Hash=tI;var dae=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function hae(e,t){if(t!==void 0&&(typeof t!="object"||!dae(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}ht.checkOpts=hae;function pae(e){let t=n=>e().update(j1(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}ht.wrapConstructor=pae;function yae(e){let t=(n,i)=>e(i).update(j1(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}ht.wrapConstructorWithOpts=yae;function mae(e){let t=(n,i)=>e(i).update(j1(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}ht.wrapXOFConstructorWithOpts=mae;function gae(e=32){if(eI.crypto&&typeof eI.crypto.getRandomValues=="function")return eI.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}ht.randomBytes=gae});var JO=L(jl=>{"use strict";p();y();Object.defineProperty(jl,"__esModule",{value:!0});jl.hmac=jl.HMAC=void 0;var $1=X8(),YO=G1(),Km=class extends YO.Hash{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,$1.default.hash(t);let n=(0,YO.toBytes)(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return $1.default.exists(this),this.iHash.update(t),this}digestInto(t){$1.default.exists(this),$1.default.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};jl.HMAC=Km;var bae=(e,t,r)=>new Km(e,t).update(r).digest();jl.hmac=bae;jl.hmac.create=(e,t)=>new Km(e,t)});var ZO=L(Y1=>{"use strict";p();y();Object.defineProperty(Y1,"__esModule",{value:!0});Y1.SHA2=void 0;var nI=X8(),Fm=G1();function xae(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var iI=class extends Fm.Hash{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Fm.createView)(this.buffer)}update(t){nI.default.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=(0,Fm.toBytes)(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=(0,Fm.createView)(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){nI.default.exists(this),nI.default.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;xae(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=(0,Fm.createView)(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};Y1.SHA2=iI});var QO=L(l0=>{"use strict";p();y();Object.defineProperty(l0,"__esModule",{value:!0});l0.sha224=l0.sha256=void 0;var wae=ZO(),rs=G1(),vae=(e,t,r)=>e&t^~e&r,Aae=(e,t,r)=>e&t^e&r^t&r,Sae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yf=new Uint32Array(64),J1=class extends wae.SHA2{constructor(){super(64,32,8,!1),this.A=pf[0]|0,this.B=pf[1]|0,this.C=pf[2]|0,this.D=pf[3]|0,this.E=pf[4]|0,this.F=pf[5]|0,this.G=pf[6]|0,this.H=pf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)yf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=yf[l-15],x=yf[l-2],A=(0,rs.rotr)(g,7)^(0,rs.rotr)(g,18)^g>>>3,E=(0,rs.rotr)(x,17)^(0,rs.rotr)(x,19)^x>>>10;yf[l]=E+yf[l-7]+A+yf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=(0,rs.rotr)(a,6)^(0,rs.rotr)(a,11)^(0,rs.rotr)(a,25),x=h+g+vae(a,c,u)+Sae[l]+yf[l]|0,E=((0,rs.rotr)(n,2)^(0,rs.rotr)(n,13)^(0,rs.rotr)(n,22))+Aae(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){yf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},oI=class extends J1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};l0.sha256=(0,rs.wrapConstructor)(()=>new J1);l0.sha224=(0,rs.wrapConstructor)(()=>new oI)});var Q1=L(rn=>{"use strict";p();y();var Eae=C3(),Iae=JO(),XO=QO();function kae(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var Wt=kae(Eae);Wt.utils.hmacSha256Sync=(e,...t)=>Iae.hmac(XO.sha256,e,Wt.utils.concatBytes(...t));Wt.utils.sha256Sync=(...e)=>XO.sha256(Wt.utils.concatBytes(...e));var cI=Wt.utils._normalizePrivateKey,Tae=32,Pae=32,sI=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65]),_ae=32;function aI(e,t){for(let r=0;r<32;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Vm(e){return!(!(e instanceof Uint8Array)||e.length!==Pae||aI(e,sI)>=0)}function eN(e){return e instanceof Uint8Array&&e.length===64&&aI(e.subarray(0,32),sI)<0&&aI(e.subarray(32,64),sI)<0}function Z1(e){return e instanceof Uint8Array&&e.length===Tae}function tN(e){return e===void 0||e instanceof Uint8Array&&e.length===_ae}function rN(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Bae(e){return rN(Wt.utils.bytesToHex(e))}function uI(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>=0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private scalar");t=rN(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private scalar");t=Bae(e)}else throw new TypeError("Expected valid private scalar");if(t<0)throw new Error("Expected private scalar >= 0");return t}var Cae=(e,t)=>{let r=cI(e),n=uI(t),i=Wt.utils._bigintTo32Bytes(Wt.utils.mod(r+n,Wt.CURVE.n));return Wt.utils.isValidPrivateKey(i)?i:null},Mae=(e,t)=>{let r=cI(e),n=uI(t),i=Wt.utils._bigintTo32Bytes(Wt.utils.mod(r-n,Wt.CURVE.n));return Wt.utils.isValidPrivateKey(i)?i:null},Rae=e=>{let t=cI(e),r=Wt.utils._bigintTo32Bytes(Wt.CURVE.n-t);return Wt.utils.isValidPrivateKey(r)?r:null},nN=(e,t,r)=>{let n=Wt.Point.fromHex(e),i=uI(t),o=Wt.Point.BASE.multiplyAndAddUnsafe(n,i,1n);if(!o)throw new Error("Tweaked point at infinity");return o.toRawBytes(r)},Oae=(e,t,r)=>{let n=Wt.Point.fromHex(e),i=typeof t=="string"?t:Wt.utils.bytesToHex(t),o=BigInt(`0x${i}`);return n.multiply(o).toRawBytes(r)};function qm(e,t){return e===void 0?t!==void 0?iN(t):!0:!!e}function Gl(e){try{return e()}catch{return null}}function fI(e,t){if(e.length===32!==t)return!1;try{return!!Wt.Point.fromHex(e)}catch{return!1}}function mf(e){return fI(e,!1)}function iN(e){return fI(e,!1)&&e.length===33}function gf(e){return Wt.utils.isValidPrivateKey(e)}function lI(e){return fI(e,!0)}function Nae(e,t){if(!lI(e))throw new Error("Expected Point");if(!Vm(t))throw new Error("Expected Tweak");return Gl(()=>{let r=nN(e,t,!0);return{parity:r[0]%2===1?1:0,xOnlyPubkey:r.slice(1)}})}function oN(e){if(!mf(e))throw new Error("Expected Point");return e.slice(1,33)}function sN(e,t){if(!gf(e))throw new Error("Expected Private");return Gl(()=>Wt.getPublicKey(e,qm(t)))}function Uae(e){if(!gf(e))throw new Error("Expected Private");return oN(sN(e))}function Dae(e,t){if(!mf(e))throw new Error("Expected Point");return Wt.Point.fromHex(e).toRawBytes(qm(t,e))}function Lae(e,t,r){if(!mf(e))throw new Error("Expected Point");if(!Vm(t))throw new Error("Expected Tweak");return Gl(()=>Oae(e,t,qm(r,e)))}function Kae(e,t,r){if(!mf(e)||!mf(t))throw new Error("Expected Point");return Gl(()=>{let n=Wt.Point.fromHex(e),i=Wt.Point.fromHex(t);return n.equals(i.negate())?null:n.add(i).toRawBytes(qm(r,e))})}function Fae(e,t,r){if(!mf(e))throw new Error("Expected Point");if(!Vm(t))throw new Error("Expected Tweak");return Gl(()=>nN(e,t,qm(r,e)))}function Vae(e,t){if(gf(e)===!1)throw new Error("Expected Private");if(Vm(t)===!1)throw new Error("Expected Tweak");return Gl(()=>Cae(e,t))}function qae(e,t){if(gf(e)===!1)throw new Error("Expected Private");if(Vm(t)===!1)throw new Error("Expected Tweak");return Gl(()=>Mae(e,t))}function Hae(e){if(gf(e)===!1)throw new Error("Expected Private");return Rae(e)}function Wae(e,t,r){if(!gf(t))throw new Error("Expected Private");if(!Z1(e))throw new Error("Expected Scalar");if(!tN(r))throw new Error("Expected Extra Data (32 bytes)");return Wt.signSync(e,t,{der:!1,extraEntropy:r})}function zae(e,t,r=Buffer.alloc(32,0)){if(!gf(t))throw new Error("Expected Private");if(!Z1(e))throw new Error("Expected Scalar");if(!tN(r))throw new Error("Expected Extra Data (32 bytes)");return Wt.schnorr.signSync(e,t,r)}function jae(e,t,r,n){if(!mf(t))throw new Error("Expected Point");if(!eN(r))throw new Error("Expected Signature");if(!Z1(e))throw new Error("Expected Scalar");return Wt.verify(r,e,t,{strict:n})}function Gae(e,t,r){if(!lI(t))throw new Error("Expected Point");if(!eN(r))throw new Error("Expected Signature");if(!Z1(e))throw new Error("Expected Scalar");return Wt.schnorr.verifySync(r,e,t)}rn.isPoint=mf;rn.isPointCompressed=iN;rn.isPrivate=gf;rn.isXOnlyPoint=lI;rn.pointAdd=Kae;rn.pointAddScalar=Fae;rn.pointCompress=Dae;rn.pointFromScalar=sN;rn.pointMultiply=Lae;rn.privateAdd=Vae;rn.privateNegate=Hae;rn.privateSub=qae;rn.sign=Wae;rn.signSchnorr=zae;rn.verify=jae;rn.verifySchnorr=Gae;rn.xOnlyPointAddTweak=Nae;rn.xOnlyPointFromPoint=oN;rn.xOnlyPointFromScalar=Uae});var ns=L(xf=>{"use strict";p();y();Object.defineProperty(xf,"__esModule",{value:!0});xf.testnet=xf.regtest=xf.bitcoin=void 0;xf.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};xf.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};xf.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var hI=L(wf=>{"use strict";p();y();Object.defineProperty(wf,"__esModule",{value:!0});wf.encode=wf.decode=wf.check=void 0;function rce(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let t=e[3];if(t===0||5+t>=e.length||e[4+t]!==2)return!1;let r=e[5+t];return!(r===0||6+t+r!==e.length||e[4]&128||t>1&&e[4]===0&&!(e[5]&128)||e[t+6]&128||r>1&&e[t+6]===0&&!(e[t+7]&128))}wf.check=rce;function nce(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let t=e[3];if(t===0)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(e[4+t]!==2)throw new Error("Expected DER integer (2)");let r=e[5+t];if(r===0)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(t>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[t+6]&128)throw new Error("S value is negative");if(r>1&&e[t+6]===0&&!(e[t+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}}wf.decode=nce;function ice(e,t){let r=e.length,n=t.length;if(r===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(t[0]&128)throw new Error("S value is negative");if(r>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&t[0]===0&&!(t[1]&128))throw new Error("S value excessively padded");let i=Buffer.allocUnsafe(6+r+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+r]=2,i[5+r]=t.length,t.copy(i,6+r),i}wf.encode=ice});var ev=L(d0=>{"use strict";p();y();Object.defineProperty(d0,"__esModule",{value:!0});d0.REVERSE_OPS=d0.OPS=void 0;var pI={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};d0.OPS=pI;var hN={};d0.REVERSE_OPS=hN;for(let e of Object.keys(pI)){let t=pI[e];hN[t]=e}});var yN=L(Af=>{"use strict";p();y();Object.defineProperty(Af,"__esModule",{value:!0});Af.decode=Af.encode=Af.encodingLength=void 0;var vf=ev();function pN(e){return e<vf.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}Af.encodingLength=pN;function oce(e,t,r){let n=pN(t);return n===1?e.writeUInt8(t,r):n===2?(e.writeUInt8(vf.OPS.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):n===3?(e.writeUInt8(vf.OPS.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(vf.OPS.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),n}Af.encode=oce;function sce(e,t){let r=e.readUInt8(t),n,i;if(r<vf.OPS.OP_PUSHDATA1)n=r,i=1;else if(r===vf.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=e.readUInt8(t+1),i=2}else if(r===vf.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(r!==vf.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(t+1),i=5}return{opcode:r,number:n,size:i}}Af.decode=sce});var mN=L(h0=>{"use strict";p();y();Object.defineProperty(h0,"__esModule",{value:!0});h0.encode=h0.decode=void 0;function ace(e,t,r){t=t||4,r=r===void 0?!0:r;let n=e.length;if(n===0)return 0;if(n>t)throw new TypeError("Script number overflow");if(r&&!(e[n-1]&127)&&(n<=1||!(e[n-2]&128)))throw new Error("Non-minimally encoded script number");if(n===5){let o=e.readUInt32LE(0),s=e.readUInt8(4);return s&128?-((s&-129)*4294967296+o):s*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=e[o]<<8*o;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}h0.decode=ace;function cce(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function uce(e){let t=Math.abs(e),r=cce(t),n=Buffer.allocUnsafe(r),i=e<0;for(let o=0;o<r;++o)n.writeUInt8(t&255,o),t>>=8;return n[r-1]&128?n.writeUInt8(i?128:0,r-1):i&&(n[r-1]|=128),n}h0.encode=uce});var tv=L((j7e,gN)=>{p();y();var Wm={Array:function(e){return e!=null&&e.constructor===Array},Boolean:function(e){return typeof e=="boolean"},Function:function(e){return typeof e=="function"},Nil:function(e){return e==null},Number:function(e){return typeof e=="number"},Object:function(e){return typeof e=="object"},String:function(e){return typeof e=="string"},"":function(){return!0}};Wm.Null=Wm.Nil;for(yI in Wm)Wm[yI].toJSON=function(e){return e}.bind(null,yI);var yI;gN.exports=Wm});var bI=L((Y7e,wN)=>{p();y();var $l=tv();function bN(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function mI(e){return $l.Nil(e)?"":bN(e.constructor)}function fce(e){return $l.Function(e)?"":$l.String(e)?JSON.stringify(e):e&&$l.Object(e)?"":e}function gI(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function rv(e){return $l.Function(e)?e.toJSON?e.toJSON():bN(e):$l.Array(e)?"Array":e&&$l.Object(e)?"Object":e!==void 0?e:""}function xN(e,t,r){var n=fce(t);return"Expected "+rv(e)+", got"+(r!==""?" "+r:"")+(n!==""?" "+n:"")}function Fc(e,t,r){r=r||mI(t),this.message=xN(e,t,r),gI(this,Fc),this.__type=e,this.__value=t,this.__valueTypeName=r}Fc.prototype=Object.create(Error.prototype);Fc.prototype.constructor=Fc;function lce(e,t,r,n,i){var o='" of type ';return t==="key"&&(o='" with key type '),xN('property "'+rv(r)+o+rv(e),n,i)}function p0(e,t,r,n,i){e?(i=i||mI(n),this.message=lce(e,r,t,n,i)):this.message='Unexpected property "'+t+'"',gI(this,Fc),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=i}p0.prototype=Object.create(Error.prototype);p0.prototype.constructor=Fc;function dce(e,t){return new Fc(e,{},t)}function hce(e,t,r){return e instanceof p0?(t=t+"."+e.__property,e=new p0(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof Fc&&(e=new p0(e.__type,t,r,e.__value,e.__valueTypeName)),gI(e),e}wN.exports={TfTypeError:Fc,TfPropertyTypeError:p0,tfCustomError:dce,tfSubError:hce,tfJSON:rv,getValueTypeName:mI}});var EN=L((Q7e,SN)=>{p();y();var AI=tv(),pce=bI();function vN(e){return Buffer.isBuffer(e)}function AN(e){return typeof e=="string"&&/^([0-9a-f]{2})+$/i.test(e)}function nv(e,t){var r=e.toJSON();function n(i){if(!e(i))return!1;if(i.length===t)return!0;throw pce.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+i.length+")")}return n.toJSON=function(){return r},n}var yce=nv.bind(null,AI.Array),mce=nv.bind(null,vN),gce=nv.bind(null,AN),bce=nv.bind(null,AI.String);function xce(e,t,r){r=r||AI.Number;function n(i,o){return r(i,o)&&i>e&&i<t}return n.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},n}var wI=Math.pow(2,53)-1;function wce(e){return typeof e=="number"&&isFinite(e)}function vce(e){return e<<24>>24===e}function Ace(e){return e<<16>>16===e}function Sce(e){return(e|0)===e}function Ece(e){return typeof e=="number"&&e>=-wI&&e<=wI&&Math.floor(e)===e}function Ice(e){return(e&255)===e}function kce(e){return(e&65535)===e}function Tce(e){return e>>>0===e}function Pce(e){return typeof e=="number"&&e>=0&&e<=wI&&Math.floor(e)===e}var vI={ArrayN:yce,Buffer:vN,BufferN:mce,Finite:wce,Hex:AN,HexN:gce,Int8:vce,Int16:Ace,Int32:Sce,Int53:Ece,Range:xce,StringN:bce,UInt8:Ice,UInt16:kce,UInt32:Tce,UInt53:Pce};for(xI in vI)vI[xI].toJSON=function(e){return e}.bind(null,xI);var xI;SN.exports=vI});var SI=L((tCe,PN)=>{p();y();var jm=bI(),Yn=tv(),Vc=jm.tfJSON,kN=jm.TfTypeError,TN=jm.TfPropertyTypeError,zm=jm.tfSubError,_ce=jm.getValueTypeName,qc={arrayOf:function(t,r){t=Na(t),r=r||{};function n(i,o){return!Yn.Array(i)||Yn.Nil(i)||r.minLength!==void 0&&i.length<r.minLength||r.maxLength!==void 0&&i.length>r.maxLength||r.length!==void 0&&i.length!==r.length?!1:i.every(function(s,a){try{return Ri(t,s,o)}catch(c){throw zm(c,a)}})}return n.toJSON=function(){var i="["+Vc(t)+"]";return r.length!==void 0?i+="{"+r.length+"}":(r.minLength!==void 0||r.maxLength!==void 0)&&(i+="{"+(r.minLength===void 0?0:r.minLength)+","+(r.maxLength===void 0?1/0:r.maxLength)+"}"),i},n},maybe:function e(t){t=Na(t);function r(n,i){return Yn.Nil(n)||t(n,i,e)}return r.toJSON=function(){return"?"+Vc(t)},r},map:function(t,r){t=Na(t),r&&(r=Na(r));function n(i,o){if(!Yn.Object(i)||Yn.Nil(i))return!1;for(var s in i){try{r&&Ri(r,s,o)}catch(c){throw zm(c,s,"key")}try{var a=i[s];Ri(t,a,o)}catch(c){throw zm(c,s)}}return!0}return r?n.toJSON=function(){return"{"+Vc(r)+": "+Vc(t)+"}"}:n.toJSON=function(){return"{"+Vc(t)+"}"},n},object:function(t){var r={};for(var n in t)r[n]=Na(t[n]);function i(o,s){if(!Yn.Object(o)||Yn.Nil(o))return!1;var a;try{for(a in r){var c=r[a],u=o[a];Ri(c,u,s)}}catch(h){throw zm(h,a)}if(s){for(a in o)if(!r[a])throw new TN(void 0,a)}return!0}return i.toJSON=function(){return Vc(r)},i},anyOf:function(){var t=[].slice.call(arguments).map(Na);function r(n,i){return t.some(function(o){try{return Ri(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(Vc).join("|")},r},allOf:function(){var t=[].slice.call(arguments).map(Na);function r(n,i){return t.every(function(o){try{return Ri(o,n,i)}catch{return!1}})}return r.toJSON=function(){return t.map(Vc).join(" & ")},r},quacksLike:function(t){function r(n){return t===_ce(n)}return r.toJSON=function(){return t},r},tuple:function(){var t=[].slice.call(arguments).map(Na);function r(n,i){return Yn.Nil(n)||Yn.Nil(n.length)||i&&n.length!==t.length?!1:t.every(function(o,s){try{return Ri(o,n[s],i)}catch(a){throw zm(a,s)}})}return r.toJSON=function(){return"("+t.map(Vc).join(", ")+")"},r},value:function(t){function r(n){return n===t}return r.toJSON=function(){return t},r}};qc.oneOf=qc.anyOf;function Na(e){if(Yn.String(e))return e[0]==="?"?qc.maybe(e.slice(1)):Yn[e]||qc.quacksLike(e);if(e&&Yn.Object(e)){if(Yn.Array(e)){if(e.length!==1)throw new TypeError("Expected compile() parameter of type Array of length 1");return qc.arrayOf(e[0])}return qc.object(e)}else if(Yn.Function(e))return e;return qc.value(e)}function Ri(e,t,r,n){if(Yn.Function(e)){if(e(t,r))return!0;throw new kN(n||e,t)}return Ri(Na(e),t,r)}for(Hc in Yn)Ri[Hc]=Yn[Hc];var Hc;for(Hc in qc)Ri[Hc]=qc[Hc];var IN=EN();for(Hc in IN)Ri[Hc]=IN[Hc];Ri.compile=Na;Ri.TfTypeError=kN;Ri.TfPropertyTypeError=TN;PN.exports=Ri});var Jn=L(le=>{"use strict";p();y();Object.defineProperty(le,"__esModule",{value:!0});le.oneOf=le.Null=le.BufferN=le.Function=le.UInt32=le.UInt8=le.tuple=le.maybe=le.Hex=le.Buffer=le.String=le.Boolean=le.Array=le.Number=le.Hash256bit=le.Hash160bit=le.Buffer256bit=le.isTaptree=le.isTapleaf=le.TAPLEAF_VERSION_MASK=le.Network=le.ECPoint=le.Satoshi=le.Signer=le.BIP32Path=le.UInt31=le.isPoint=le.typeforce=void 0;var iv=Zr();le.typeforce=SI();var _N=iv.Buffer.alloc(32,0),BN=iv.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function Bce(e){if(!iv.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],r=e.slice(1,33);if(r.compare(_N)===0||r.compare(BN)>=0)return!1;if((t===2||t===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare(_N)===0||n.compare(BN)>=0?!1:t===4&&e.length===65}le.isPoint=Bce;var Cce=Math.pow(2,31)-1;function Mce(e){return le.typeforce.UInt32(e)&&e<=Cce}le.UInt31=Mce;function CN(e){return le.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}le.BIP32Path=CN;CN.toJSON=()=>"BIP32 derivation path";function Rce(e){return(le.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}le.Signer=Rce;var Oce=21*1e14;function Nce(e){return le.typeforce.UInt53(e)&&e<=Oce}le.Satoshi=Nce;le.ECPoint=le.typeforce.quacksLike("Point");le.Network=le.typeforce.compile({messagePrefix:le.typeforce.oneOf(le.typeforce.Buffer,le.typeforce.String),bip32:{public:le.typeforce.UInt32,private:le.typeforce.UInt32},pubKeyHash:le.typeforce.UInt8,scriptHash:le.typeforce.UInt8,wif:le.typeforce.UInt8});le.TAPLEAF_VERSION_MASK=254;function MN(e){return!e||!("output"in e)||!iv.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&le.TAPLEAF_VERSION_MASK)===e.version:!0}le.isTapleaf=MN;function RN(e){return(0,le.Array)(e)?e.length!==2?!1:e.every(t=>RN(t)):MN(e)}le.isTaptree=RN;le.Buffer256bit=le.typeforce.BufferN(32);le.Hash160bit=le.typeforce.BufferN(20);le.Hash256bit=le.typeforce.BufferN(32);le.Number=le.typeforce.Number;le.Array=le.typeforce.Array;le.Boolean=le.typeforce.Boolean;le.String=le.typeforce.String;le.Buffer=le.typeforce.Buffer;le.Hex=le.typeforce.Hex;le.maybe=le.typeforce.maybe;le.tuple=le.typeforce.tuple;le.UInt8=le.typeforce.UInt8;le.UInt32=le.typeforce.UInt32;le.Function=le.typeforce.Function;le.BufferN=le.typeforce.BufferN;le.Null=le.typeforce.Null;le.oneOf=le.typeforce.oneOf});var LN=L(m0=>{"use strict";p();y();Object.defineProperty(m0,"__esModule",{value:!0});m0.encode=m0.decode=void 0;var{Buffer:y0}=Zr(),DN=hI(),EI=Jn(),{typeforce:Uce}=EI,ON=y0.alloc(1,0);function NN(e){let t=0;for(;e[t]===0;)++t;return t===e.length?ON:(e=e.slice(t),e[0]&128?y0.concat([ON,e],1+e.length):e)}function UN(e){e[0]===0&&(e=e.slice(1));let t=y0.alloc(32,0),r=Math.max(0,32-e.length);return e.copy(t,r),t}function Dce(e){let t=e.readUInt8(e.length-1),r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=DN.decode(e.slice(0,-1)),i=UN(n.r),o=UN(n.s);return{signature:y0.concat([i,o],64),hashType:t}}m0.decode=Dce;function Lce(e,t){Uce({signature:EI.BufferN(64),hashType:EI.UInt8},{signature:e,hashType:t});let r=t&-129;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);let n=y0.allocUnsafe(1);n.writeUInt8(t,0);let i=NN(e.slice(0,32)),o=NN(e.slice(32,64));return y0.concat([DN.encode(i,o),n])}m0.encode=Lce});var Oi=L(Zt=>{"use strict";p();y();Object.defineProperty(Zt,"__esModule",{value:!0});Zt.signature=Zt.number=Zt.isCanonicalScriptSignature=Zt.isDefinedHashType=Zt.isCanonicalPubKey=Zt.toStack=Zt.fromASM=Zt.toASM=Zt.decompile=Zt.compile=Zt.countNonPushOnlyOPs=Zt.isPushOnly=Zt.OPS=void 0;var Kce=hI(),Xi=ev();Object.defineProperty(Zt,"OPS",{enumerable:!0,get:function(){return Xi.OPS}});var II=yN(),KN=mN(),Fce=LN(),Ua=Jn(),{typeforce:Gm}=Ua,FN=Xi.OPS.OP_RESERVED;function Vce(e){return Ua.Number(e)&&(e===Xi.OPS.OP_0||e>=Xi.OPS.OP_1&&e<=Xi.OPS.OP_16||e===Xi.OPS.OP_1NEGATE)}function VN(e){return Ua.Buffer(e)||Vce(e)}function qN(e){return Ua.Array(e)&&e.every(VN)}Zt.isPushOnly=qN;function qce(e){return e.length-e.filter(VN).length}Zt.countNonPushOnlyOPs=qce;function ov(e){if(e.length===0)return Xi.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return FN+e[0];if(e[0]===129)return Xi.OPS.OP_1NEGATE}}function HN(e){return Buffer.isBuffer(e)}function Hce(e){return Ua.Array(e)}function sv(e){return Buffer.isBuffer(e)}function WN(e){if(HN(e))return e;Gm(Ua.Array,e);let t=e.reduce((i,o)=>sv(o)?o.length===1&&ov(o)!==void 0?i+1:i+II.encodingLength(o.length)+o.length:i+1,0),r=Buffer.allocUnsafe(t),n=0;if(e.forEach(i=>{if(sv(i)){let o=ov(i);if(o!==void 0){r.writeUInt8(o,n),n+=1;return}n+=II.encode(r,i.length,n),i.copy(r,n),n+=i.length}else r.writeUInt8(i,n),n+=1}),n!==r.length)throw new Error("Could not decode chunks");return r}Zt.compile=WN;function kI(e){if(Hce(e))return e;Gm(Ua.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>Xi.OPS.OP_0&&n<=Xi.OPS.OP_PUSHDATA4){let i=II.decode(e,r);if(i===null||(r+=i.size,r+i.number>e.length))return null;let o=e.slice(r,r+i.number);r+=i.number;let s=ov(o);s!==void 0?t.push(s):t.push(o)}else t.push(n),r+=1}return t}Zt.decompile=kI;function Wce(e){return HN(e)&&(e=kI(e)),e.map(t=>{if(sv(t)){let r=ov(t);if(r===void 0)return t.toString("hex");t=r}return Xi.REVERSE_OPS[t]}).join(" ")}Zt.toASM=Wce;function zce(e){return Gm(Ua.String,e),WN(e.split(" ").map(t=>Xi.OPS[t]!==void 0?Xi.OPS[t]:(Gm(Ua.Hex,t),Buffer.from(t,"hex"))))}Zt.fromASM=zce;function jce(e){return e=kI(e),Gm(qN,e),e.map(t=>sv(t)?t:t===Xi.OPS.OP_0?Buffer.allocUnsafe(0):KN.encode(t-FN))}Zt.toStack=jce;function Gce(e){return Ua.isPoint(e)}Zt.isCanonicalPubKey=Gce;function zN(e){let t=e&-129;return t>0&&t<4}Zt.isDefinedHashType=zN;function $ce(e){return!Buffer.isBuffer(e)||!zN(e[e.length-1])?!1:Kce.check(e.slice(0,-1))}Zt.isCanonicalScriptSignature=$ce;Zt.number=KN;Zt.signature=Fce});var Wc=L(g0=>{"use strict";p();y();Object.defineProperty(g0,"__esModule",{value:!0});g0.value=g0.prop=void 0;function Yce(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let n=r.call(this);return this[t]=n,n},set(n){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}g0.prop=Yce;function Jce(e){let t;return()=>(t!==void 0||(t=e()),t)}g0.value=Jce});var $N=L(cv=>{"use strict";p();y();Object.defineProperty(cv,"__esModule",{value:!0});cv.p2data=void 0;var Zce=ns(),av=Oi(),zc=Jn(),jN=Wc(),GN=av.OPS;function Qce(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Xce(e,t){if(!e.data&&!e.output)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,zc.typeforce)({network:zc.typeforce.maybe(zc.typeforce.Object),output:zc.typeforce.maybe(zc.typeforce.Buffer),data:zc.typeforce.maybe(zc.typeforce.arrayOf(zc.typeforce.Buffer))},e);let n={name:"embed",network:e.network||Zce.bitcoin};if(jN.prop(n,"output",()=>{if(e.data)return av.compile([GN.OP_RETURN].concat(e.data))}),jN.prop(n,"data",()=>{if(e.output)return av.decompile(e.output).slice(1)}),t.validate&&e.output){let i=av.decompile(e.output);if(i[0]!==GN.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(zc.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!Qce(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}cv.p2data=Xce});var JN=L(fv=>{"use strict";p();y();Object.defineProperty(fv,"__esModule",{value:!0});fv.p2ms=void 0;var eue=ns(),b0=Oi(),dn=Jn(),Sf=Wc(),x0=b0.OPS,uv=x0.OP_RESERVED;function YN(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function tue(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{});function r(c){return b0.isCanonicalScriptSignature(c)||(t.allowIncomplete&&c===x0.OP_0)!==void 0}(0,dn.typeforce)({network:dn.typeforce.maybe(dn.typeforce.Object),m:dn.typeforce.maybe(dn.typeforce.Number),n:dn.typeforce.maybe(dn.typeforce.Number),output:dn.typeforce.maybe(dn.typeforce.Buffer),pubkeys:dn.typeforce.maybe(dn.typeforce.arrayOf(dn.isPoint)),signatures:dn.typeforce.maybe(dn.typeforce.arrayOf(r)),input:dn.typeforce.maybe(dn.typeforce.Buffer)},e);let i={network:e.network||eue.bitcoin},o=[],s=!1;function a(c){s||(s=!0,o=b0.decompile(c),i.m=o[0]-uv,i.n=o[o.length-2]-uv,i.pubkeys=o.slice(1,-2))}if(Sf.prop(i,"output",()=>{if(e.m&&i.n&&e.pubkeys)return b0.compile([].concat(uv+e.m,e.pubkeys,uv+i.n,x0.OP_CHECKMULTISIG))}),Sf.prop(i,"m",()=>{if(i.output)return a(i.output),i.m}),Sf.prop(i,"n",()=>{if(i.pubkeys)return i.pubkeys.length}),Sf.prop(i,"pubkeys",()=>{if(e.output)return a(e.output),i.pubkeys}),Sf.prop(i,"signatures",()=>{if(e.input)return b0.decompile(e.input).slice(1)}),Sf.prop(i,"input",()=>{if(e.signatures)return b0.compile([x0.OP_0].concat(e.signatures))}),Sf.prop(i,"witness",()=>{if(i.input)return[]}),Sf.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),t.validate){if(e.output){if(a(e.output),!dn.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!dn.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==x0.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(c=>(0,dn.isPoint)(c)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!YN(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==x0.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(r))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!YN(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}fv.p2ms=tue});var QN=L(lv=>{"use strict";p();y();Object.defineProperty(lv,"__esModule",{value:!0});lv.p2pk=void 0;var rue=ns(),v0=Oi(),Gs=Jn(),w0=Wc(),ZN=v0.OPS;function nue(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Gs.typeforce)({network:Gs.typeforce.maybe(Gs.typeforce.Object),output:Gs.typeforce.maybe(Gs.typeforce.Buffer),pubkey:Gs.typeforce.maybe(Gs.isPoint),signature:Gs.typeforce.maybe(v0.isCanonicalScriptSignature),input:Gs.typeforce.maybe(Gs.typeforce.Buffer)},e);let r=w0.value(()=>v0.decompile(e.input)),i={name:"p2pk",network:e.network||rue.bitcoin};if(w0.prop(i,"output",()=>{if(e.pubkey)return v0.compile([e.pubkey,ZN.OP_CHECKSIG])}),w0.prop(i,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),w0.prop(i,"signature",()=>{if(e.input)return r()[0]}),w0.prop(i,"input",()=>{if(e.signature)return v0.compile([e.signature])}),w0.prop(i,"witness",()=>{if(i.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==ZN.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,Gs.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(r().length!==1)throw new TypeError("Input is invalid");if(!v0.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}lv.p2pk=nue});var rU=L(A0=>{"use strict";p();y();Object.defineProperty(A0,"__esModule",{value:!0});A0.ripemd160=A0.RIPEMD160=void 0;var iue=yy(),oue=Su(),sue=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),eU=Uint8Array.from({length:16},(e,t)=>t),aue=eU.map(e=>(9*e+5)%16),TI=[eU],PI=[aue];for(let e=0;e<4;e++)for(let t of[TI,PI])t.push(t[e].map(r=>sue[r]));var tU=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),cue=TI.map((e,t)=>e.map(r=>tU[t][r])),uue=PI.map((e,t)=>e.map(r=>tU[t][r])),fue=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),lue=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),dv=(e,t)=>e<<t|e>>>32-t;function XN(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var hv=new Uint32Array(16),pv=class extends iue.SHA2{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let x=0;x<16;x++,r+=4)hv[x]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,l=this.h4|0,g=l;for(let x=0;x<5;x++){let A=4-x,E=fue[x],C=lue[x],M=TI[x],N=PI[x],R=cue[x],V=uue[x];for(let q=0;q<16;q++){let W=dv(n+XN(x,o,a,u)+hv[M[q]]+E,R[q])+l|0;n=l,l=u,u=dv(a,10)|0,a=o,o=W}for(let q=0;q<16;q++){let W=dv(i+XN(A,s,c,h)+hv[N[q]]+C,V[q])+g|0;i=g,g=h,h=dv(c,10)|0,c=s,s=W}}this.set(this.h1+a+h|0,this.h2+u+g|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){hv.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}};A0.RIPEMD160=pv;A0.ripemd160=(0,oue.wrapConstructor)(()=>new pv)});var nU=L(yv=>{"use strict";p();y();Object.defineProperty(yv,"__esModule",{value:!0});yv.sha1=void 0;var due=yy(),hue=Su(),_I=(e,t)=>e<<t|e>>>32-t>>>0,pue=(e,t,r)=>e&t^~e&r,yue=(e,t,r)=>e&t^e&r^t&r,$m=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),Ef=new Uint32Array(80),BI=class extends due.SHA2{constructor(){super(64,20,8,!1),this.A=$m[0]|0,this.B=$m[1]|0,this.C=$m[2]|0,this.D=$m[3]|0,this.E=$m[4]|0}get(){let{A:t,B:r,C:n,D:i,E:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0}process(t,r){for(let c=0;c<16;c++,r+=4)Ef[c]=t.getUint32(r,!1);for(let c=16;c<80;c++)Ef[c]=_I(Ef[c-3]^Ef[c-8]^Ef[c-14]^Ef[c-16],1);let{A:n,B:i,C:o,D:s,E:a}=this;for(let c=0;c<80;c++){let u,h;c<20?(u=pue(i,o,s),h=1518500249):c<40?(u=i^o^s,h=1859775393):c<60?(u=yue(i,o,s),h=2400959708):(u=i^o^s,h=3395469782);let l=_I(n,5)+u+a+h+Ef[c]|0;a=s,s=o,o=_I(i,30),i=n,n=l}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,this.set(n,i,o,s,a)}roundClean(){Ef.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}};yv.sha1=(0,hue.wrapConstructor)(()=>new BI)});var Da=L(hn=>{"use strict";p();y();Object.defineProperty(hn,"__esModule",{value:!0});hn.taggedHash=hn.TAGGED_HASH_PREFIXES=hn.TAGS=hn.hash256=hn.hash160=hn.sha256=hn.sha1=hn.ripemd160=void 0;var{Buffer:Ni}=Zr(),iU=rU(),mue=nU(),mv=sx();function gue(e){return Ni.from((0,iU.ripemd160)(Uint8Array.from(e)))}hn.ripemd160=gue;function bue(e){return Ni.from((0,mue.sha1)(Uint8Array.from(e)))}hn.sha1=bue;function oU(e){return Ni.from((0,mv.sha256)(Uint8Array.from(e)))}hn.sha256=oU;function xue(e){return Ni.from((0,iU.ripemd160)((0,mv.sha256)(Uint8Array.from(e))))}hn.hash160=xue;function wue(e){return Ni.from((0,mv.sha256)((0,mv.sha256)(Uint8Array.from(e))))}hn.hash256=wue;hn.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"];hn.TAGGED_HASH_PREFIXES={"BIP0340/challenge":Ni.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":Ni.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":Ni.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:Ni.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:Ni.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:Ni.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:Ni.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":Ni.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":Ni.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])};function vue(e,t){return oU(Ni.concat([hn.TAGGED_HASH_PREFIXES[e],t]))}hn.taggedHash=vue});var aU=L(gv=>{"use strict";p();y();Object.defineProperty(gv,"__esModule",{value:!0});gv.p2pkh=void 0;var CI=Da(),Aue=ns(),S0=Oi(),Ui=Jn(),jc=Wc(),sU=f0(),If=S0.OPS;function Sue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,Ui.typeforce)({network:Ui.typeforce.maybe(Ui.typeforce.Object),address:Ui.typeforce.maybe(Ui.typeforce.String),hash:Ui.typeforce.maybe(Ui.typeforce.BufferN(20)),output:Ui.typeforce.maybe(Ui.typeforce.BufferN(25)),pubkey:Ui.typeforce.maybe(Ui.isPoint),signature:Ui.typeforce.maybe(S0.isCanonicalScriptSignature),input:Ui.typeforce.maybe(Ui.typeforce.Buffer)},e);let r=jc.value(()=>{let s=Buffer.from(sU.decode(e.address)),a=s.readUInt8(0),c=s.slice(1);return{version:a,hash:c}}),n=jc.value(()=>S0.decompile(e.input)),i=e.network||Aue.bitcoin,o={name:"p2pkh",network:i};if(jc.prop(o,"address",()=>{if(!o.hash)return;let s=Buffer.allocUnsafe(21);return s.writeUInt8(i.pubKeyHash,0),o.hash.copy(s,1),sU.encode(s)}),jc.prop(o,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return r().hash;if(e.pubkey||o.pubkey)return CI.hash160(e.pubkey||o.pubkey)}),jc.prop(o,"output",()=>{if(o.hash)return S0.compile([If.OP_DUP,If.OP_HASH160,o.hash,If.OP_EQUALVERIFY,If.OP_CHECKSIG])}),jc.prop(o,"pubkey",()=>{if(e.input)return n()[1]}),jc.prop(o,"signature",()=>{if(e.input)return n()[0]}),jc.prop(o,"input",()=>{if(e.pubkey&&e.signature)return S0.compile([e.signature,e.pubkey])}),jc.prop(o,"witness",()=>{if(o.input)return[]}),t.validate){let s=Buffer.from([]);if(e.address){if(r().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(r().hash.length!==20)throw new TypeError("Invalid address");s=r().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==If.OP_DUP||e.output[1]!==If.OP_HASH160||e.output[2]!==20||e.output[23]!==If.OP_EQUALVERIFY||e.output[24]!==If.OP_CHECKSIG)throw new TypeError("Output is invalid");let a=e.output.slice(3,23);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.pubkey){let a=CI.hash160(e.pubkey);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.input){let a=n();if(a.length!==2)throw new TypeError("Input is invalid");if(!S0.isCanonicalScriptSignature(a[0]))throw new TypeError("Input has invalid signature");if(!(0,Ui.isPoint)(a[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(a[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(a[1]))throw new TypeError("Pubkey mismatch");let c=CI.hash160(a[1]);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}gv.p2pkh=Sue});var fU=L(bv=>{"use strict";p();y();Object.defineProperty(bv,"__esModule",{value:!0});bv.p2sh=void 0;var cU=Da(),Eue=ns(),Ka=Oi(),vr=Jn(),La=Wc(),uU=f0(),Ym=Ka.OPS;function Iue(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function kue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,vr.typeforce)({network:vr.typeforce.maybe(vr.typeforce.Object),address:vr.typeforce.maybe(vr.typeforce.String),hash:vr.typeforce.maybe(vr.typeforce.BufferN(20)),output:vr.typeforce.maybe(vr.typeforce.BufferN(23)),redeem:vr.typeforce.maybe({network:vr.typeforce.maybe(vr.typeforce.Object),output:vr.typeforce.maybe(vr.typeforce.Buffer),input:vr.typeforce.maybe(vr.typeforce.Buffer),witness:vr.typeforce.maybe(vr.typeforce.arrayOf(vr.typeforce.Buffer))}),input:vr.typeforce.maybe(vr.typeforce.Buffer),witness:vr.typeforce.maybe(vr.typeforce.arrayOf(vr.typeforce.Buffer))},e);let r=e.network;r||(r=e.redeem&&e.redeem.network||Eue.bitcoin);let n={network:r},i=La.value(()=>{let a=Buffer.from(uU.decode(e.address)),c=a.readUInt8(0),u=a.slice(1);return{version:c,hash:u}}),o=La.value(()=>Ka.decompile(e.input)),s=La.value(()=>{let a=o(),c=a[a.length-1];return{network:r,output:c===Ym.OP_FALSE?Buffer.from([]):c,input:Ka.compile(a.slice(0,-1)),witness:e.witness||[]}});if(La.prop(n,"address",()=>{if(!n.hash)return;let a=Buffer.allocUnsafe(21);return a.writeUInt8(n.network.scriptHash,0),n.hash.copy(a,1),uU.encode(a)}),La.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return cU.hash160(n.redeem.output)}),La.prop(n,"output",()=>{if(n.hash)return Ka.compile([Ym.OP_HASH160,n.hash,Ym.OP_EQUAL])}),La.prop(n,"redeem",()=>{if(e.input)return s()}),La.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return Ka.compile([].concat(Ka.decompile(e.redeem.input),e.redeem.output))}),La.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),La.prop(n,"name",()=>{let a=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&a.push(n.redeem.name),a.join("-")}),t.validate){let a=Buffer.from([]);if(e.address){if(i().version!==r.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");a=i().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==Ym.OP_HASH160||e.output[1]!==20||e.output[22]!==Ym.OP_EQUAL)throw new TypeError("Output is invalid");let u=e.output.slice(2,22);if(a.length>0&&!a.equals(u))throw new TypeError("Hash mismatch");a=u}let c=u=>{if(u.output){let h=Ka.decompile(u.output);if(!h||h.length<1)throw new TypeError("Redeem.output too short");if(u.output.byteLength>520)throw new TypeError("Redeem.output unspendable if larger than 520 bytes");if(Ka.countNonPushOnlyOPs(h)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let l=cU.hash160(u.output);if(a.length>0&&!a.equals(l))throw new TypeError("Hash mismatch");a=l}if(u.input){let h=u.input.length>0,l=u.witness&&u.witness.length>0;if(!h&&!l)throw new TypeError("Empty input");if(h&&l)throw new TypeError("Input and witness provided");if(h){let g=Ka.decompile(u.input);if(!Ka.isPushOnly(g))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let u=o();if(!u||u.length<1)throw new TypeError("Input too short");if(!Buffer.isBuffer(s().output))throw new TypeError("Input is invalid");c(s())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==r)throw new TypeError("Network mismatch");if(e.input){let u=s();if(e.redeem.output&&!e.redeem.output.equals(u.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(u.input))throw new TypeError("Redeem.input mismatch")}c(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!Iue(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}bv.p2sh=kue});var Jm=L(I0=>{"use strict";p();y();Object.defineProperty(I0,"__esModule",{value:!0});I0.bech32m=I0.bech32=void 0;var xv="qpzry9x8gf2tvdw0s3jn54khce6mua7l",dU={};for(let e=0;e<xv.length;e++){let t=xv.charAt(e);dU[t]=e}function E0(e){let t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function lU(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=E0(t)^n>>5}t=E0(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=E0(t)^n&31}return t}function MI(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let c=0;c<e.length;++c)for(i=i<<t|e[c],o+=t;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function Tue(e){return MI(e,8,5,!0)}function Pue(e){let t=MI(e,5,8,!1);if(Array.isArray(t))return t}function _ue(e){let t=MI(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function hU(e){let t;e==="bech32"?t=1:t=734539939;function r(s,a,c){if(c=c||90,s.length+7+a.length>c)throw new TypeError("Exceeds length limit");s=s.toLowerCase();let u=lU(s);if(typeof u=="string")throw new Error(u);let h=s+"1";for(let l=0;l<a.length;++l){let g=a[l];if(g>>5)throw new Error("Non 5-bit word");u=E0(u)^g,h+=xv.charAt(g)}for(let l=0;l<6;++l)u=E0(u);u^=t;for(let l=0;l<6;++l){let g=u>>(5-l)*5&31;h+=xv.charAt(g)}return h}function n(s,a){if(a=a||90,s.length<8)return s+" too short";if(s.length>a)return"Exceeds length limit";let c=s.toLowerCase(),u=s.toUpperCase();if(s!==c&&s!==u)return"Mixed-case string "+s;s=c;let h=s.lastIndexOf("1");if(h===-1)return"No separator character for "+s;if(h===0)return"Missing prefix for "+s;let l=s.slice(0,h),g=s.slice(h+1);if(g.length<6)return"Data too short";let x=lU(l);if(typeof x=="string")return x;let A=[];for(let E=0;E<g.length;++E){let C=g.charAt(E),M=dU[C];if(M===void 0)return"Unknown character "+C;x=E0(x)^M,!(E+6>=g.length)&&A.push(M)}return x!==t?"Invalid checksum for "+s:{prefix:l,words:A}}function i(s,a){let c=n(s,a);if(typeof c=="object")return c}function o(s,a){let c=n(s,a);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:i,decode:o,encode:r,toWords:Tue,fromWordsUnsafe:Pue,fromWords:_ue}}I0.bech32=hU("bech32");I0.bech32m=hU("bech32m")});var yU=L(Av=>{"use strict";p();y();Object.defineProperty(Av,"__esModule",{value:!0});Av.p2wpkh=void 0;var{Buffer:OI}=Zr(),RI=Da(),Bue=ns(),vv=Oi(),pn=Jn(),kf=Wc(),wv=Jm(),pU=vv.OPS,Cue=OI.alloc(0);function Mue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,pn.typeforce)({address:pn.typeforce.maybe(pn.typeforce.String),hash:pn.typeforce.maybe(pn.typeforce.BufferN(20)),input:pn.typeforce.maybe(pn.typeforce.BufferN(0)),network:pn.typeforce.maybe(pn.typeforce.Object),output:pn.typeforce.maybe(pn.typeforce.BufferN(22)),pubkey:pn.typeforce.maybe(pn.isPoint),signature:pn.typeforce.maybe(vv.isCanonicalScriptSignature),witness:pn.typeforce.maybe(pn.typeforce.arrayOf(pn.typeforce.Buffer))},e);let r=kf.value(()=>{let o=wv.bech32.decode(e.address),s=o.words.shift(),a=wv.bech32.fromWords(o.words);return{version:s,prefix:o.prefix,data:OI.from(a)}}),n=e.network||Bue.bitcoin,i={name:"p2wpkh",network:n};if(kf.prop(i,"address",()=>{if(!i.hash)return;let o=wv.bech32.toWords(i.hash);return o.unshift(0),wv.bech32.encode(n.bech32,o)}),kf.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return r().data;if(e.pubkey||i.pubkey)return RI.hash160(e.pubkey||i.pubkey)}),kf.prop(i,"output",()=>{if(i.hash)return vv.compile([pU.OP_0,i.hash])}),kf.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.witness)return e.witness[1]}),kf.prop(i,"signature",()=>{if(e.witness)return e.witness[0]}),kf.prop(i,"input",()=>{if(i.witness)return Cue}),kf.prop(i,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let o=OI.from([]);if(e.address){if(n&&n.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==20)throw new TypeError("Invalid address data");o=r().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==pU.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");o=e.output.slice(2)}if(e.pubkey){let s=RI.hash160(e.pubkey);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch");if(o=s,!(0,pn.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!vv.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,pn.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let s=RI.hash160(e.witness[1]);if(o.length>0&&!o.equals(s))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}Av.p2wpkh=Mue});var bU=L(kv=>{"use strict";p();y();Object.defineProperty(kv,"__esModule",{value:!0});kv.p2wsh=void 0;var{Buffer:Iv}=Zr(),mU=Da(),Rue=ns(),$c=Oi(),fr=Jn(),Gc=Wc(),Sv=Jm(),gU=$c.OPS,NI=Iv.alloc(0);function Oue(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}function Ev(e){return!!(Iv.isBuffer(e)&&e.length===65&&e[0]===4&&(0,fr.isPoint)(e))}function Nue(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,fr.typeforce)({network:fr.typeforce.maybe(fr.typeforce.Object),address:fr.typeforce.maybe(fr.typeforce.String),hash:fr.typeforce.maybe(fr.typeforce.BufferN(32)),output:fr.typeforce.maybe(fr.typeforce.BufferN(34)),redeem:fr.typeforce.maybe({input:fr.typeforce.maybe(fr.typeforce.Buffer),network:fr.typeforce.maybe(fr.typeforce.Object),output:fr.typeforce.maybe(fr.typeforce.Buffer),witness:fr.typeforce.maybe(fr.typeforce.arrayOf(fr.typeforce.Buffer))}),input:fr.typeforce.maybe(fr.typeforce.BufferN(0)),witness:fr.typeforce.maybe(fr.typeforce.arrayOf(fr.typeforce.Buffer))},e);let r=Gc.value(()=>{let s=Sv.bech32.decode(e.address),a=s.words.shift(),c=Sv.bech32.fromWords(s.words);return{version:a,prefix:s.prefix,data:Iv.from(c)}}),n=Gc.value(()=>$c.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||Rue.bitcoin);let o={network:i};if(Gc.prop(o,"address",()=>{if(!o.hash)return;let s=Sv.bech32.toWords(o.hash);return s.unshift(0),Sv.bech32.encode(i.bech32,s)}),Gc.prop(o,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return r().data;if(o.redeem&&o.redeem.output)return mU.sha256(o.redeem.output)}),Gc.prop(o,"output",()=>{if(o.hash)return $c.compile([gU.OP_0,o.hash])}),Gc.prop(o,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:NI,witness:e.witness.slice(0,-1)}}),Gc.prop(o,"input",()=>{if(o.witness)return NI}),Gc.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let s=$c.toStack(n());return o.redeem=Object.assign({witness:s},e.redeem),o.redeem.input=NI,[].concat(s,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),Gc.prop(o,"name",()=>{let s=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&s.push(o.redeem.name),s.join("-")}),t.validate){let s=Iv.from([]);if(e.address){if(r().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==0)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");s=r().data}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==gU.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let a=e.output.slice(2);if(s.length>0&&!s.equals(a))throw new TypeError("Hash mismatch");s=a}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){let a=$c.decompile(e.redeem.output);if(!a||a.length<1)throw new TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw new TypeError("Redeem.output unspendable if larger than 3600 bytes");if($c.countNonPushOnlyOPs(a)>201)throw new TypeError("Redeem.output unspendable with more than 201 non-push ops");let c=mU.sha256(e.redeem.output);if(s.length>0&&!s.equals(c))throw new TypeError("Hash mismatch");s=c}if(e.redeem.input&&!$c.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!Oue(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(Ev)||e.redeem.output&&($c.decompile(e.redeem.output)||[]).some(Ev))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let a=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(a))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(Ev)||($c.decompile(a)||[]).some(Ev))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}kv.p2wsh=Nue});var Tv=L(k0=>{"use strict";p();y();Object.defineProperty(k0,"__esModule",{value:!0});k0.getEccLib=k0.initEccLib=void 0;var Zm={};function Uue(e){e?e!==Zm.eccLib&&(Lue(e),Zm.eccLib=e):Zm.eccLib=e}k0.initEccLib=Uue;function Due(){if(!Zm.eccLib)throw new Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return Zm.eccLib}k0.getEccLib=Due;var Yc=e=>Buffer.from(e,"hex");function Lue(e){is(typeof e.isXOnlyPoint=="function"),is(e.isXOnlyPoint(Yc("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),is(e.isXOnlyPoint(Yc("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),is(e.isXOnlyPoint(Yc("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),is(e.isXOnlyPoint(Yc("0000000000000000000000000000000000000000000000000000000000000001"))),is(!e.isXOnlyPoint(Yc("0000000000000000000000000000000000000000000000000000000000000000"))),is(!e.isXOnlyPoint(Yc("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),is(typeof e.xOnlyPointAddTweak=="function"),Kue.forEach(t=>{let r=e.xOnlyPointAddTweak(Yc(t.pubkey),Yc(t.tweak));t.result===null?is(r===null):(is(r!==null),is(r.parity===t.parity),is(Buffer.from(r.xOnlyPubkey).equals(Yc(t.result))))})}function is(e){if(!e)throw new Error("ecc library invalid")}var Kue=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]});var LI=L((QCe,wU)=>{"use strict";p();y();var UI=F_().Buffer,Fue=9007199254740991;function DI(e){if(e<0||e>Fue||e%1!==0)throw new RangeError("value out of range")}function Qm(e,t,r){if(DI(e),t||(t=UI.allocUnsafe(xU(e))),!UI.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Qm.bytes=1):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Qm.bytes=3):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Qm.bytes=5):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Qm.bytes=9),t}function Xm(e,t){if(!UI.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);var r=e.readUInt8(t);if(r<253)return Xm.bytes=1,r;if(r===253)return Xm.bytes=3,e.readUInt16LE(t+1);if(r===254)return Xm.bytes=5,e.readUInt32LE(t+1);Xm.bytes=9;var n=e.readUInt32LE(t+1),i=e.readUInt32LE(t+5),o=i*4294967296+n;return DI(o),o}function xU(e){return DI(e),e<253?1:e<=65535?3:e<=4294967295?5:9}wU.exports={encode:Qm,decode:Xm,encodingLength:xU}});var tg=L(wi=>{"use strict";p();y();Object.defineProperty(wi,"__esModule",{value:!0});wi.BufferReader=wi.BufferWriter=wi.cloneBuffer=wi.reverseBuffer=wi.writeUInt64LE=wi.readUInt64LE=wi.varuint=void 0;var Yl=Jn(),{typeforce:vU}=Yl,eg=LI();wi.varuint=eg;function AU(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function SU(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,AU(n+r,9007199254740991),n+r}wi.readUInt64LE=SU;function EU(e,t,r){return AU(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}wi.writeUInt64LE=EU;function Vue(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}wi.reverseBuffer=Vue;function que(e){let t=Buffer.allocUnsafe(e.length);return e.copy(t),t}wi.cloneBuffer=que;var KI=class e{static withCapacity(t){return new e(Buffer.alloc(t))}constructor(t,r=0){this.buffer=t,this.offset=r,vU(Yl.tuple(Yl.Buffer,Yl.UInt32),[t,r])}writeUInt8(t){this.offset=this.buffer.writeUInt8(t,this.offset)}writeInt32(t){this.offset=this.buffer.writeInt32LE(t,this.offset)}writeUInt32(t){this.offset=this.buffer.writeUInt32LE(t,this.offset)}writeUInt64(t){this.offset=EU(this.buffer,t,this.offset)}writeVarInt(t){eg.encode(t,this.buffer,this.offset),this.offset+=eg.encode.bytes}writeSlice(t){if(this.buffer.length<this.offset+t.length)throw new Error("Cannot write slice out of bounds");this.offset+=t.copy(this.buffer,this.offset)}writeVarSlice(t){this.writeVarInt(t.length),this.writeSlice(t)}writeVector(t){this.writeVarInt(t.length),t.forEach(r=>this.writeVarSlice(r))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};wi.BufferWriter=KI;var FI=class{constructor(t,r=0){this.buffer=t,this.offset=r,vU(Yl.tuple(Yl.Buffer,Yl.UInt32),[t,r])}readUInt8(){let t=this.buffer.readUInt8(this.offset);return this.offset++,t}readInt32(){let t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t}readUInt32(){let t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t}readUInt64(){let t=SU(this.buffer,this.offset);return this.offset+=8,t}readVarInt(){let t=eg.decode(this.buffer,this.offset);return this.offset+=eg.decode.bytes,t}readSlice(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let t=this.readVarInt(),r=[];for(let n=0;n<t;n++)r.push(this.readVarSlice());return r}};wi.BufferReader=FI});var Pv=L(yn=>{"use strict";p();y();Object.defineProperty(yn,"__esModule",{value:!0});yn.tweakKey=yn.tapTweakHash=yn.tapleafHash=yn.findScriptPath=yn.toHashTree=yn.rootHashFromPath=yn.MAX_TAPTREE_DEPTH=yn.LEAF_VERSION_TAPSCRIPT=void 0;var Tf=Zr(),Hue=Tv(),WI=Da(),IU=tg(),Wue=Jn();yn.LEAF_VERSION_TAPSCRIPT=192;yn.MAX_TAPTREE_DEPTH=128;var zue=e=>"left"in e&&"right"in e;function jue(e,t){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let i=0;i<r;i++){let o=e.slice(33+32*i,65+32*i);n.compare(o)<0?n=HI(n,o):n=HI(o,n)}return n}yn.rootHashFromPath=jue;function VI(e){if((0,Wue.isTapleaf)(e))return{hash:kU(e)};let t=[VI(e[0]),VI(e[1])];t.sort((i,o)=>i.hash.compare(o.hash));let[r,n]=t;return{hash:HI(r.hash,n.hash),left:r,right:n}}yn.toHashTree=VI;function qI(e,t){if(zue(e)){let r=qI(e.left,t);if(r!==void 0)return[...r,e.right.hash];let n=qI(e.right,t);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(t))return[]}yn.findScriptPath=qI;function kU(e){let t=e.version||yn.LEAF_VERSION_TAPSCRIPT;return WI.taggedHash("TapLeaf",Tf.Buffer.concat([Tf.Buffer.from([t]),$ue(e.output)]))}yn.tapleafHash=kU;function TU(e,t){return WI.taggedHash("TapTweak",Tf.Buffer.concat(t?[e,t]:[e]))}yn.tapTweakHash=TU;function Gue(e,t){if(!Tf.Buffer.isBuffer(e)||e.length!==32||t&&t.length!==32)return null;let r=TU(e,t),n=(0,Hue.getEccLib)().xOnlyPointAddTweak(e,r);return!n||n.xOnlyPubkey===null?null:{parity:n.parity,x:Tf.Buffer.from(n.xOnlyPubkey)}}yn.tweakKey=Gue;function HI(e,t){return WI.taggedHash("TapBranch",Tf.Buffer.concat([e,t]))}function $ue(e){let t=IU.varuint.encodingLength(e.length),r=Tf.Buffer.allocUnsafe(t);return IU.varuint.encode(e.length,r),Tf.Buffer.concat([r,e])}});var CU=L(Cv=>{"use strict";p();y();Object.defineProperty(Cv,"__esModule",{value:!0});Cv.p2tr=void 0;var _v=Zr(),Yue=ns(),zI=Oi(),xt=Jn(),PU=Tv(),eo=Pv(),os=Wc(),Bv=Jm(),_U=zI.OPS,BU=1,Jue=80;function Zue(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,xt.typeforce)({address:xt.typeforce.maybe(xt.typeforce.String),input:xt.typeforce.maybe(xt.typeforce.BufferN(0)),network:xt.typeforce.maybe(xt.typeforce.Object),output:xt.typeforce.maybe(xt.typeforce.BufferN(34)),internalPubkey:xt.typeforce.maybe(xt.typeforce.BufferN(32)),hash:xt.typeforce.maybe(xt.typeforce.BufferN(32)),pubkey:xt.typeforce.maybe(xt.typeforce.BufferN(32)),signature:xt.typeforce.maybe(xt.typeforce.anyOf(xt.typeforce.BufferN(64),xt.typeforce.BufferN(65))),witness:xt.typeforce.maybe(xt.typeforce.arrayOf(xt.typeforce.Buffer)),scriptTree:xt.typeforce.maybe(xt.isTaptree),redeem:xt.typeforce.maybe({output:xt.typeforce.maybe(xt.typeforce.Buffer),redeemVersion:xt.typeforce.maybe(xt.typeforce.Number),witness:xt.typeforce.maybe(xt.typeforce.arrayOf(xt.typeforce.Buffer))}),redeemVersion:xt.typeforce.maybe(xt.typeforce.Number)},e);let r=os.value(()=>{let a=Bv.bech32m.decode(e.address),c=a.words.shift(),u=Bv.bech32m.fromWords(a.words);return{version:c,prefix:a.prefix,data:_v.Buffer.from(u)}}),n=os.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===Jue?e.witness.slice(0,-1):e.witness.slice()}),i=os.value(()=>{if(e.scriptTree)return(0,eo.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),o=e.network||Yue.bitcoin,s={name:"p2tr",network:o};if(os.prop(s,"address",()=>{if(!s.pubkey)return;let a=Bv.bech32m.toWords(s.pubkey);return a.unshift(BU),Bv.bech32m.encode(o.bech32,a)}),os.prop(s,"hash",()=>{let a=i();if(a)return a.hash;let c=n();if(c&&c.length>1){let u=c[c.length-1],h=u[0]&xt.TAPLEAF_VERSION_MASK,l=c[c.length-2],g=(0,eo.tapleafHash)({output:l,version:h});return(0,eo.rootHashFromPath)(u,g)}return null}),os.prop(s,"output",()=>{if(s.pubkey)return zI.compile([_U.OP_1,s.pubkey])}),os.prop(s,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:eo.LEAF_VERSION_TAPSCRIPT),os.prop(s,"redeem",()=>{let a=n();if(!(!a||a.length<2))return{output:a[a.length-2],witness:a.slice(0,-2),redeemVersion:a[a.length-1][0]&xt.TAPLEAF_VERSION_MASK}}),os.prop(s,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return r().data;if(s.internalPubkey){let a=(0,eo.tweakKey)(s.internalPubkey,s.hash);if(a)return a.x}}),os.prop(s,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let a=n();if(a&&a.length>1)return a[a.length-1].slice(1,33)}),os.prop(s,"signature",()=>{if(e.signature)return e.signature;let a=n();if(!(!a||a.length!==1))return a[0]}),os.prop(s,"witness",()=>{if(e.witness)return e.witness;let a=i();if(a&&e.redeem&&e.redeem.output&&e.internalPubkey){let c=(0,eo.tapleafHash)({output:e.redeem.output,version:s.redeemVersion}),u=(0,eo.findScriptPath)(a,c);if(!u)return;let h=(0,eo.tweakKey)(e.internalPubkey,a.hash);if(!h)return;let l=_v.Buffer.concat([_v.Buffer.from([s.redeemVersion|h.parity]),e.internalPubkey].concat(u));return[e.redeem.output,l]}if(e.signature)return[e.signature]}),t.validate){let a=_v.Buffer.from([]);if(e.address){if(o&&o.bech32!==r().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(r().version!==BU)throw new TypeError("Invalid address version");if(r().data.length!==32)throw new TypeError("Invalid address data");a=r().data}if(e.pubkey){if(a.length>0&&!a.equals(e.pubkey))throw new TypeError("Pubkey mismatch");a=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==_U.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(a.length>0&&!a.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");a=e.output.slice(2)}if(e.internalPubkey){let h=(0,eo.tweakKey)(e.internalPubkey,s.hash);if(a.length>0&&!a.equals(h.x))throw new TypeError("Pubkey mismatch");a=h.x}if(a&&a.length&&!(0,PU.getEccLib)().isXOnlyPoint(a))throw new TypeError("Invalid pubkey for p2tr");let c=i();if(e.hash&&c&&!e.hash.equals(c.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&c){let h=(0,eo.tapleafHash)({output:e.redeem.output,version:s.redeemVersion});if(!(0,eo.findScriptPath)(c,h))throw new TypeError("Redeem script not in tree")}let u=n();if(e.redeem&&s.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==s.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(zI.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(s.redeem.output&&!e.redeem.output.equals(s.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&s.redeem.witness&&!Que(e.redeem.witness,s.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(u&&u.length)if(u.length===1){if(e.signature&&!e.signature.equals(u[0]))throw new TypeError("Signature mismatch")}else{let h=u[u.length-1];if(h.length<33)throw new TypeError(`The control-block length is too small. Got ${h.length}, expected min 33.`);if((h.length-33)%32!==0)throw new TypeError(`The control-block length of ${h.length} is incorrect!`);let l=(h.length-33)/32;if(l>128)throw new TypeError(`The script path is too long. Got ${l}, expected max 128.`);let g=h.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(g))throw new TypeError("Internal pubkey mismatch");if(!(0,PU.getEccLib)().isXOnlyPoint(g))throw new TypeError("Invalid internalPubkey for p2tr witness");let x=h[0]&xt.TAPLEAF_VERSION_MASK,A=u[u.length-2],E=(0,eo.tapleafHash)({output:A,version:x}),C=(0,eo.rootHashFromPath)(h,E),M=(0,eo.tweakKey)(g,C);if(!M)throw new TypeError("Invalid outputKey for p2tr witness");if(a.length&&!a.equals(M.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(M.parity!==(h[0]&1))throw new Error("Incorrect parity")}}return Object.assign(s,e)}Cv.p2tr=Zue;function Que(e,t){return e.length!==t.length?!1:e.every((r,n)=>r.equals(t[n]))}});var T0=L(Rn=>{"use strict";p();y();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.p2tr=Rn.p2wsh=Rn.p2wpkh=Rn.p2sh=Rn.p2pkh=Rn.p2pk=Rn.p2ms=Rn.embed=void 0;var Xue=$N();Object.defineProperty(Rn,"embed",{enumerable:!0,get:function(){return Xue.p2data}});var efe=JN();Object.defineProperty(Rn,"p2ms",{enumerable:!0,get:function(){return efe.p2ms}});var tfe=QN();Object.defineProperty(Rn,"p2pk",{enumerable:!0,get:function(){return tfe.p2pk}});var rfe=aU();Object.defineProperty(Rn,"p2pkh",{enumerable:!0,get:function(){return rfe.p2pkh}});var nfe=fU();Object.defineProperty(Rn,"p2sh",{enumerable:!0,get:function(){return nfe.p2sh}});var ife=yU();Object.defineProperty(Rn,"p2wpkh",{enumerable:!0,get:function(){return ife.p2wpkh}});var ofe=bU();Object.defineProperty(Rn,"p2wsh",{enumerable:!0,get:function(){return ofe.p2wsh}});var sfe=CU();Object.defineProperty(Rn,"p2tr",{enumerable:!0,get:function(){return sfe.p2tr}})});var jI=L(to=>{"use strict";p();y();Object.defineProperty(to,"__esModule",{value:!0});to.toOutputScript=to.fromOutputScript=to.toBech32=to.toBase58Check=to.fromBech32=to.fromBase58Check=void 0;var MU=ns(),Fa=T0(),RU=Oi(),Mv=Jn(),P0=Jm(),OU=f0(),NU=40,UU=2,DU=16,LU=2,KU=80,FU="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function afe(e,t){let r=e.slice(2);if(r.length<UU||r.length>NU)throw new TypeError("Invalid program length for segwit address");let n=e[0]-KU;if(n<LU||n>DU)throw new TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw new TypeError("Invalid script for segwit address");return console.warn(FU),HU(r,n,t.bech32)}function VU(e){let t=Buffer.from(OU.decode(e));if(t.length<21)throw new TypeError(e+" is too short");if(t.length>21)throw new TypeError(e+" is too long");let r=t.readUInt8(0),n=t.slice(1);return{version:r,hash:n}}to.fromBase58Check=VU;function qU(e){let t,r;try{t=P0.bech32.decode(e)}catch{}if(t){if(r=t.words[0],r!==0)throw new TypeError(e+" uses wrong encoding")}else if(t=P0.bech32m.decode(e),r=t.words[0],r===0)throw new TypeError(e+" uses wrong encoding");let n=P0.bech32.fromWords(t.words.slice(1));return{version:r,prefix:t.prefix,data:Buffer.from(n)}}to.fromBech32=qU;function cfe(e,t){(0,Mv.typeforce)((0,Mv.tuple)(Mv.Hash160bit,Mv.UInt8),arguments);let r=Buffer.allocUnsafe(21);return r.writeUInt8(t,0),e.copy(r,1),OU.encode(r)}to.toBase58Check=cfe;function HU(e,t,r){let n=P0.bech32.toWords(e);return n.unshift(t),t===0?P0.bech32.encode(r,n):P0.bech32m.encode(r,n)}to.toBech32=HU;function ufe(e,t){t=t||MU.bitcoin;try{return Fa.p2pkh({output:e,network:t}).address}catch{}try{return Fa.p2sh({output:e,network:t}).address}catch{}try{return Fa.p2wpkh({output:e,network:t}).address}catch{}try{return Fa.p2wsh({output:e,network:t}).address}catch{}try{return Fa.p2tr({output:e,network:t}).address}catch{}try{return afe(e,t)}catch{}throw new Error(RU.toASM(e)+" has no matching Address")}to.fromOutputScript=ufe;function ffe(e,t){t=t||MU.bitcoin;let r,n;try{r=VU(e)}catch{}if(r){if(r.version===t.pubKeyHash)return Fa.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return Fa.p2sh({hash:r.hash}).output}else{try{n=qU(e)}catch{}if(n){if(n.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return Fa.p2wpkh({hash:n.data}).output;if(n.data.length===32)return Fa.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return Fa.p2tr({pubkey:n.data}).output}else if(n.version>=LU&&n.version<=DU&&n.data.length>=UU&&n.data.length<=NU)return console.warn(FU),RU.compile([n.version+KU,n.data])}}throw new Error(e+" has no matching Script")}to.toOutputScript=ffe});var WU=L(Rv=>{"use strict";p();y();Object.defineProperty(Rv,"__esModule",{value:!0});Rv.fastMerkleRoot=void 0;function lfe(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if(typeof t!="function")throw TypeError("Expected digest Function");let r=e.length,n=e.concat();for(;r>1;){let i=0;for(let o=0;o<r;o+=2,++i){let s=n[o],a=o+1===r?s:n[o+1],c=Buffer.concat([s,a]);n[i]=t(c)}r=i}return n[0]}Rv.fastMerkleRoot=lfe});var _0=L(Ov=>{"use strict";p();y();Object.defineProperty(Ov,"__esModule",{value:!0});Ov.Transaction=void 0;var{Buffer:vi}=Zr(),nn=tg(),Di=Da(),zU=Oi(),dfe=Oi(),Ut=Jn(),{typeforce:Va}=Ut;function qa(e){let t=e.length;return nn.varuint.encodingLength(t)+t}function hfe(e){let t=e.length;return nn.varuint.encodingLength(t)+e.reduce((r,n)=>r+qa(n),0)}var Pf=vi.allocUnsafe(0),jU=[],GI=vi.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),GU=vi.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),pfe=vi.from("ffffffffffffffff","hex"),yfe={script:Pf,valueBuffer:pfe};function mfe(e){return e.value!==void 0}var So=class e{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(t,r){let n=new nn.BufferReader(t),i=new e;i.version=n.readInt32();let o=n.readUInt8(),s=n.readUInt8(),a=!1;o===e.ADVANCED_TRANSACTION_MARKER&&s===e.ADVANCED_TRANSACTION_FLAG?a=!0:n.offset-=2;let c=n.readVarInt();for(let h=0;h<c;++h)i.ins.push({hash:n.readSlice(32),index:n.readUInt32(),script:n.readVarSlice(),sequence:n.readUInt32(),witness:jU});let u=n.readVarInt();for(let h=0;h<u;++h)i.outs.push({value:n.readUInt64(),script:n.readVarSlice()});if(a){for(let h=0;h<c;++h)i.ins[h].witness=n.readVector();if(!i.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(i.locktime=n.readUInt32(),r)return i;if(n.offset!==t.length)throw new Error("Transaction has unexpected data");return i}static fromHex(t){return e.fromBuffer(vi.from(t,"hex"),!1)}static isCoinbaseHash(t){Va(Ut.Hash256bit,t);for(let r=0;r<32;++r)if(t[r]!==0)return!1;return!0}isCoinbase(){return this.ins.length===1&&e.isCoinbaseHash(this.ins[0].hash)}addInput(t,r,n,i){return Va(Ut.tuple(Ut.Hash256bit,Ut.UInt32,Ut.maybe(Ut.UInt32),Ut.maybe(Ut.Buffer)),arguments),Ut.Null(n)&&(n=e.DEFAULT_SEQUENCE),this.ins.push({hash:t,index:r,script:i||Pf,sequence:n,witness:jU})-1}addOutput(t,r){return Va(Ut.tuple(Ut.Buffer,Ut.Satoshi),arguments),this.outs.push({script:t,value:r})-1}hasWitnesses(){return this.ins.some(t=>t.witness.length!==0)}weight(){let t=this.byteLength(!1),r=this.byteLength(!0);return t*3+r}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(t=!0){let r=t&&this.hasWitnesses();return(r?10:8)+nn.varuint.encodingLength(this.ins.length)+nn.varuint.encodingLength(this.outs.length)+this.ins.reduce((n,i)=>n+40+qa(i.script),0)+this.outs.reduce((n,i)=>n+8+qa(i.script),0)+(r?this.ins.reduce((n,i)=>n+hfe(i.witness),0):0)}clone(){let t=new e;return t.version=this.version,t.locktime=this.locktime,t.ins=this.ins.map(r=>({hash:r.hash,index:r.index,script:r.script,sequence:r.sequence,witness:r.witness})),t.outs=this.outs.map(r=>({script:r.script,value:r.value})),t}hashForSignature(t,r,n){if(Va(Ut.tuple(Ut.UInt32,Ut.Buffer,Ut.Number),arguments),t>=this.ins.length)return GU;let i=zU.compile(zU.decompile(r).filter(a=>a!==dfe.OPS.OP_CODESEPARATOR)),o=this.clone();if((n&31)===e.SIGHASH_NONE)o.outs=[],o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)});else if((n&31)===e.SIGHASH_SINGLE){if(t>=this.outs.length)return GU;o.outs.length=t+1;for(let a=0;a<t;a++)o.outs[a]=yfe;o.ins.forEach((a,c)=>{c!==t&&(a.sequence=0)})}n&e.SIGHASH_ANYONECANPAY?(o.ins=[o.ins[t]],o.ins[0].script=i):(o.ins.forEach(a=>{a.script=Pf}),o.ins[t].script=i);let s=vi.allocUnsafe(o.byteLength(!1)+4);return s.writeInt32LE(n,s.length-4),o.__toBuffer(s,0,!1),Di.hash256(s)}hashForWitnessV1(t,r,n,i,o,s){if(Va(Ut.tuple(Ut.UInt32,Va.arrayOf(Ut.Buffer),Va.arrayOf(Ut.Satoshi),Ut.UInt32),arguments),n.length!==this.ins.length||r.length!==this.ins.length)throw new Error("Must supply prevout script and value for all inputs");let a=i===e.SIGHASH_DEFAULT?e.SIGHASH_ALL:i&e.SIGHASH_OUTPUT_MASK,u=(i&e.SIGHASH_INPUT_MASK)===e.SIGHASH_ANYONECANPAY,h=a===e.SIGHASH_NONE,l=a===e.SIGHASH_SINGLE,g=Pf,x=Pf,A=Pf,E=Pf,C=Pf;if(!u){let V=nn.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(q=>{V.writeSlice(q.hash),V.writeUInt32(q.index)}),g=Di.sha256(V.end()),V=nn.BufferWriter.withCapacity(8*this.ins.length),n.forEach(q=>V.writeUInt64(q)),x=Di.sha256(V.end()),V=nn.BufferWriter.withCapacity(r.map(qa).reduce((q,W)=>q+W)),r.forEach(q=>V.writeVarSlice(q)),A=Di.sha256(V.end()),V=nn.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(q=>V.writeUInt32(q.sequence)),E=Di.sha256(V.end())}if(h||l){if(l&&t<this.outs.length){let V=this.outs[t],q=nn.BufferWriter.withCapacity(8+qa(V.script));q.writeUInt64(V.value),q.writeVarSlice(V.script),C=Di.sha256(q.end())}}else{let V=this.outs.map(W=>8+qa(W.script)).reduce((W,G)=>W+G),q=nn.BufferWriter.withCapacity(V);this.outs.forEach(W=>{q.writeUInt64(W.value),q.writeVarSlice(W.script)}),C=Di.sha256(q.end())}let M=(o?2:0)+(s?1:0),N=174-(u?49:0)-(h?32:0)+(s?32:0)+(o?37:0),R=nn.BufferWriter.withCapacity(N);if(R.writeUInt8(i),R.writeInt32(this.version),R.writeUInt32(this.locktime),R.writeSlice(g),R.writeSlice(x),R.writeSlice(A),R.writeSlice(E),h||l||R.writeSlice(C),R.writeUInt8(M),u){let V=this.ins[t];R.writeSlice(V.hash),R.writeUInt32(V.index),R.writeUInt64(n[t]),R.writeVarSlice(r[t]),R.writeUInt32(V.sequence)}else R.writeUInt32(t);if(s){let V=nn.BufferWriter.withCapacity(qa(s));V.writeVarSlice(s),R.writeSlice(Di.sha256(V.end()))}return l&&R.writeSlice(C),o&&(R.writeSlice(o),R.writeUInt8(0),R.writeUInt32(4294967295)),Di.taggedHash("TapSighash",vi.concat([vi.from([0]),R.end()]))}hashForWitnessV0(t,r,n,i){Va(Ut.tuple(Ut.UInt32,Ut.Buffer,Ut.Satoshi,Ut.UInt32),arguments);let o=vi.from([]),s,a=GI,c=GI,u=GI;if(i&e.SIGHASH_ANYONECANPAY||(o=vi.allocUnsafe(36*this.ins.length),s=new nn.BufferWriter(o,0),this.ins.forEach(l=>{s.writeSlice(l.hash),s.writeUInt32(l.index)}),c=Di.hash256(o)),!(i&e.SIGHASH_ANYONECANPAY)&&(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE&&(o=vi.allocUnsafe(4*this.ins.length),s=new nn.BufferWriter(o,0),this.ins.forEach(l=>{s.writeUInt32(l.sequence)}),u=Di.hash256(o)),(i&31)!==e.SIGHASH_SINGLE&&(i&31)!==e.SIGHASH_NONE){let l=this.outs.reduce((g,x)=>g+8+qa(x.script),0);o=vi.allocUnsafe(l),s=new nn.BufferWriter(o,0),this.outs.forEach(g=>{s.writeUInt64(g.value),s.writeVarSlice(g.script)}),a=Di.hash256(o)}else if((i&31)===e.SIGHASH_SINGLE&&t<this.outs.length){let l=this.outs[t];o=vi.allocUnsafe(8+qa(l.script)),s=new nn.BufferWriter(o,0),s.writeUInt64(l.value),s.writeVarSlice(l.script),a=Di.hash256(o)}o=vi.allocUnsafe(156+qa(r)),s=new nn.BufferWriter(o,0);let h=this.ins[t];return s.writeInt32(this.version),s.writeSlice(c),s.writeSlice(u),s.writeSlice(h.hash),s.writeUInt32(h.index),s.writeVarSlice(r),s.writeUInt64(n),s.writeUInt32(h.sequence),s.writeSlice(a),s.writeUInt32(this.locktime),s.writeUInt32(i),Di.hash256(o)}getHash(t){return t&&this.isCoinbase()?vi.alloc(32,0):Di.hash256(this.__toBuffer(void 0,void 0,t))}getId(){return(0,nn.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(t,r){return this.__toBuffer(t,r,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(t,r){Va(Ut.tuple(Ut.Number,Ut.Buffer),arguments),this.ins[t].script=r}setWitness(t,r){Va(Ut.tuple(Ut.Number,[Ut.Buffer]),arguments),this.ins[t].witness=r}__toBuffer(t,r,n=!1){t||(t=vi.allocUnsafe(this.byteLength(n)));let i=new nn.BufferWriter(t,r||0);i.writeInt32(this.version);let o=n&&this.hasWitnesses();return o&&(i.writeUInt8(e.ADVANCED_TRANSACTION_MARKER),i.writeUInt8(e.ADVANCED_TRANSACTION_FLAG)),i.writeVarInt(this.ins.length),this.ins.forEach(s=>{i.writeSlice(s.hash),i.writeUInt32(s.index),i.writeVarSlice(s.script),i.writeUInt32(s.sequence)}),i.writeVarInt(this.outs.length),this.outs.forEach(s=>{mfe(s)?i.writeUInt64(s.value):i.writeSlice(s.valueBuffer),i.writeVarSlice(s.script)}),o&&this.ins.forEach(s=>{i.writeVector(s.witness)}),i.writeUInt32(this.locktime),r!==void 0?t.slice(r,i.offset):t}};Ov.Transaction=So;So.DEFAULT_SEQUENCE=4294967295;So.SIGHASH_DEFAULT=0;So.SIGHASH_ALL=1;So.SIGHASH_NONE=2;So.SIGHASH_SINGLE=3;So.SIGHASH_ANYONECANPAY=128;So.SIGHASH_OUTPUT_MASK=3;So.SIGHASH_INPUT_MASK=128;So.ADVANCED_TRANSACTION_MARKER=0;So.ADVANCED_TRANSACTION_FLAG=1});var ZU=L(Nv=>{"use strict";p();y();Object.defineProperty(Nv,"__esModule",{value:!0});Nv.Block=void 0;var Jl=tg(),$I=Da(),gfe=WU(),bfe=_0(),JU=Jn(),{typeforce:xfe}=JU,YI=new TypeError("Cannot compute merkle root for zero transactions"),$U=new TypeError("Cannot compute witness commit for non-segwit block"),JI=class e{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(t){if(t.length<80)throw new Error("Buffer too small (< 80 bytes)");let r=new Jl.BufferReader(t),n=new e;if(n.version=r.readInt32(),n.prevHash=r.readSlice(32),n.merkleRoot=r.readSlice(32),n.timestamp=r.readUInt32(),n.bits=r.readUInt32(),n.nonce=r.readUInt32(),t.length===80)return n;let i=()=>{let a=bfe.Transaction.fromBuffer(r.buffer.slice(r.offset),!0);return r.offset+=a.byteLength(),a},o=r.readVarInt();n.transactions=[];for(let a=0;a<o;++a){let c=i();n.transactions.push(c)}let s=n.getWitnessCommit();return s&&(n.witnessCommit=s),n}static fromHex(t){return e.fromBuffer(Buffer.from(t,"hex"))}static calculateTarget(t){let r=((t&4278190080)>>24)-3,n=t&8388607,i=Buffer.alloc(32,0);return i.writeUIntBE(n,29-r,3),i}static calculateMerkleRoot(t,r){if(xfe([{getHash:JU.Function}],t),t.length===0)throw YI;if(r&&!YU(t))throw $U;let n=t.map(o=>o.getHash(r)),i=(0,gfe.fastMerkleRoot)(n,$I.hash256);return r?$I.hash256(Buffer.concat([i,t[0].ins[0].witness[0]])):i}getWitnessCommit(){if(!YU(this.transactions))return null;let t=this.transactions[0].outs.filter(n=>n.script.slice(0,6).equals(Buffer.from("6a24aa21a9ed","hex"))).map(n=>n.script.slice(6,38));if(t.length===0)return null;let r=t[t.length-1];return r instanceof Buffer&&r.length===32?r:null}hasWitnessCommit(){return this.witnessCommit instanceof Buffer&&this.witnessCommit.length===32||this.getWitnessCommit()!==null}hasWitness(){return wfe(this.transactions)}weight(){let t=this.byteLength(!1,!1),r=this.byteLength(!1,!0);return t*3+r}byteLength(t,r=!0){return t||!this.transactions?80:80+Jl.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((n,i)=>n+i.byteLength(r),0)}getHash(){return $I.hash256(this.toBuffer(!0))}getId(){return(0,Jl.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let t=new Date(0);return t.setUTCSeconds(this.timestamp),t}toBuffer(t){let r=Buffer.allocUnsafe(this.byteLength(t)),n=new Jl.BufferWriter(r);return n.writeInt32(this.version),n.writeSlice(this.prevHash),n.writeSlice(this.merkleRoot),n.writeUInt32(this.timestamp),n.writeUInt32(this.bits),n.writeUInt32(this.nonce),t||!this.transactions||(Jl.varuint.encode(this.transactions.length,r,n.offset),n.offset+=Jl.varuint.encode.bytes,this.transactions.forEach(i=>{let o=i.byteLength();i.toBuffer(r,n.offset),n.offset+=o})),r}toHex(t){return this.toBuffer(t).toString("hex")}checkTxRoots(){let t=this.hasWitnessCommit();return!t&&this.hasWitness()?!1:this.__checkMerkleRoot()&&(t?this.__checkWitnessCommit():!0)}checkProofOfWork(){let t=(0,Jl.reverseBuffer)(this.getHash()),r=e.calculateTarget(this.bits);return t.compare(r)<=0}__checkMerkleRoot(){if(!this.transactions)throw YI;let t=e.calculateMerkleRoot(this.transactions);return this.merkleRoot.compare(t)===0}__checkWitnessCommit(){if(!this.transactions)throw YI;if(!this.hasWitnessCommit())throw $U;let t=e.calculateMerkleRoot(this.transactions,!0);return this.witnessCommit.compare(t)===0}};Nv.Block=JI;function YU(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}function wfe(e){return e instanceof Array&&e.some(t=>typeof t=="object"&&t.ins instanceof Array&&t.ins.some(r=>typeof r=="object"&&r.witness instanceof Array&&r.witness.length>0))}});var On=L($s=>{"use strict";p();y();Object.defineProperty($s,"__esModule",{value:!0});var vfe;(function(e){e[e.UNSIGNED_TX=0]="UNSIGNED_TX",e[e.GLOBAL_XPUB=1]="GLOBAL_XPUB"})(vfe=$s.GlobalTypes||($s.GlobalTypes={}));$s.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"];var Afe;(function(e){e[e.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",e[e.WITNESS_UTXO=1]="WITNESS_UTXO",e[e.PARTIAL_SIG=2]="PARTIAL_SIG",e[e.SIGHASH_TYPE=3]="SIGHASH_TYPE",e[e.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=6]="BIP32_DERIVATION",e[e.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",e[e.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",e[e.POR_COMMITMENT=9]="POR_COMMITMENT",e[e.TAP_KEY_SIG=19]="TAP_KEY_SIG",e[e.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",e[e.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",e[e.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",e[e.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT"})(Afe=$s.InputTypes||($s.InputTypes={}));$s.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"];var Sfe;(function(e){e[e.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",e[e.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",e[e.BIP32_DERIVATION=2]="BIP32_DERIVATION",e[e.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",e[e.TAP_TREE=6]="TAP_TREE",e[e.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"})(Sfe=$s.OutputTypes||($s.OutputTypes={}));$s.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]});var XU=L(Zl=>{"use strict";p();y();Object.defineProperty(Zl,"__esModule",{value:!0});var QU=On(),Efe=e=>[...Array(e).keys()];function Ife(e){if(e.key[0]!==QU.GlobalTypes.GLOBAL_XPUB)throw new Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(e.key.length!==79||![2,3].includes(e.key[46]))throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!==0)throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let n of Efe(e.value.length/4-1)){let i=e.value.readUInt32LE(n*4+4),o=!!(i&2147483648),s=i&2147483647;r.path+="/"+s.toString(10)+(o?"'":"")}return r}Zl.decode=Ife;function kfe(e){let t=Buffer.from([QU.GlobalTypes.GLOBAL_XPUB]),r=Buffer.concat([t,e.extendedPubkey]),n=e.path.split("/"),i=Buffer.allocUnsafe(n.length*4);e.masterFingerprint.copy(i,0);let o=4;return n.slice(1).forEach(s=>{let a=s.slice(-1)==="'",c=2147483647&parseInt(a?s.slice(0,-1):s,10);a&&(c+=2147483648),i.writeUInt32LE(c,o),o+=4}),{key:r,value:i}}Zl.encode=kfe;Zl.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";function Tfe(e){let t=e.extendedPubkey,r=e.masterFingerprint,n=e.path;return Buffer.isBuffer(t)&&t.length===78&&[2,3].indexOf(t[45])>-1&&Buffer.isBuffer(r)&&r.length===4&&typeof n=="string"&&!!n.match(/^m(\/\d+'?)*$/)}Zl.check=Tfe;function Pfe(e,t,r){let n=t.extendedPubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.extendedPubkey.equals(t.extendedPubkey)).length===0)}Zl.canAddToArray=Pfe});var eD=L(ZI=>{"use strict";p();y();Object.defineProperty(ZI,"__esModule",{value:!0});var _fe=On();function Bfe(e){return{key:Buffer.from([_fe.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}ZI.encode=Bfe});var rD=L(Ql=>{"use strict";p();y();Object.defineProperty(Ql,"__esModule",{value:!0});var tD=On();function Cfe(e){if(e.key[0]!==tD.InputTypes.FINAL_SCRIPTSIG)throw new Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value}Ql.decode=Cfe;function Mfe(e){return{key:Buffer.from([tD.InputTypes.FINAL_SCRIPTSIG]),value:e}}Ql.encode=Mfe;Ql.expected="Buffer";function Rfe(e){return Buffer.isBuffer(e)}Ql.check=Rfe;function Ofe(e,t){return!!e&&!!t&&e.finalScriptSig===void 0}Ql.canAdd=Ofe});var iD=L(Xl=>{"use strict";p();y();Object.defineProperty(Xl,"__esModule",{value:!0});var nD=On();function Nfe(e){if(e.key[0]!==nD.InputTypes.FINAL_SCRIPTWITNESS)throw new Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value}Xl.decode=Nfe;function Ufe(e){return{key:Buffer.from([nD.InputTypes.FINAL_SCRIPTWITNESS]),value:e}}Xl.encode=Ufe;Xl.expected="Buffer";function Dfe(e){return Buffer.isBuffer(e)}Xl.check=Dfe;function Lfe(e,t){return!!e&&!!t&&e.finalScriptWitness===void 0}Xl.canAdd=Lfe});var sD=L(ed=>{"use strict";p();y();Object.defineProperty(ed,"__esModule",{value:!0});var oD=On();function Kfe(e){if(e.key[0]!==oD.InputTypes.NON_WITNESS_UTXO)throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value}ed.decode=Kfe;function Ffe(e){return{key:Buffer.from([oD.InputTypes.NON_WITNESS_UTXO]),value:e}}ed.encode=Ffe;ed.expected="Buffer";function Vfe(e){return Buffer.isBuffer(e)}ed.check=Vfe;function qfe(e,t){return!!e&&!!t&&e.nonWitnessUtxo===void 0}ed.canAdd=qfe});var cD=L(td=>{"use strict";p();y();Object.defineProperty(td,"__esModule",{value:!0});var aD=On();function Hfe(e){if(e.key[0]!==aD.InputTypes.PARTIAL_SIG)throw new Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(e.key.length===34||e.key.length===66)||![2,3,4].includes(e.key[1]))throw new Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}}td.decode=Hfe;function Wfe(e){let t=Buffer.from([aD.InputTypes.PARTIAL_SIG]);return{key:Buffer.concat([t,e.pubkey]),value:e.signature}}td.encode=Wfe;td.expected="{ pubkey: Buffer; signature: Buffer; }";function zfe(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&jfe(e.signature)}td.check=zfe;function jfe(e){if(!Buffer.isBuffer(e)||e.length<9||e[0]!==48||e.length!==e[1]+3||e[2]!==2)return!1;let t=e[3];if(t>33||t<1||e[3+t+1]!==2)return!1;let r=e[3+t+2];return!(r>33||r<1||e.length!==3+t+2+r+2)}function Gfe(e,t,r){let n=t.pubkey.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)).length===0)}td.canAddToArray=Gfe});var fD=L(rd=>{"use strict";p();y();Object.defineProperty(rd,"__esModule",{value:!0});var uD=On();function $fe(e){if(e.key[0]!==uD.InputTypes.POR_COMMITMENT)throw new Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")}rd.decode=$fe;function Yfe(e){return{key:Buffer.from([uD.InputTypes.POR_COMMITMENT]),value:Buffer.from(e,"utf8")}}rd.encode=Yfe;rd.expected="string";function Jfe(e){return typeof e=="string"}rd.check=Jfe;function Zfe(e,t){return!!e&&!!t&&e.porCommitment===void 0}rd.canAdd=Zfe});var dD=L(nd=>{"use strict";p();y();Object.defineProperty(nd,"__esModule",{value:!0});var lD=On();function Qfe(e){if(e.key[0]!==lD.InputTypes.SIGHASH_TYPE)throw new Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)}nd.decode=Qfe;function Xfe(e){let t=Buffer.from([lD.InputTypes.SIGHASH_TYPE]),r=Buffer.allocUnsafe(4);return r.writeUInt32LE(e,0),{key:t,value:r}}nd.encode=Xfe;nd.expected="number";function ele(e){return typeof e=="number"}nd.check=ele;function tle(e,t){return!!e&&!!t&&e.sighashType===void 0}nd.canAdd=tle});var yD=L(id=>{"use strict";p();y();Object.defineProperty(id,"__esModule",{value:!0});var hD=On();function rle(e){if(e.key[0]!==hD.InputTypes.TAP_KEY_SIG||e.key.length!==1)throw new Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!pD(e.value))throw new Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value}id.decode=rle;function nle(e){return{key:Buffer.from([hD.InputTypes.TAP_KEY_SIG]),value:e}}id.encode=nle;id.expected="Buffer";function pD(e){return Buffer.isBuffer(e)&&(e.length===64||e.length===65)}id.check=pD;function ile(e,t){return!!e&&!!t&&e.tapKeySig===void 0}id.canAdd=ile});var gD=L(od=>{"use strict";p();y();Object.defineProperty(od,"__esModule",{value:!0});var mD=On();function ole(e){if(e.key[0]!==mD.InputTypes.TAP_LEAF_SCRIPT)throw new Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!==0)throw new Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((e.key[1]&254)!==t)throw new Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}}od.decode=ole;function sle(e){let t=Buffer.from([mD.InputTypes.TAP_LEAF_SCRIPT]),r=Buffer.from([e.leafVersion]);return{key:Buffer.concat([t,e.controlBlock]),value:Buffer.concat([e.script,r])}}od.encode=sle;od.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }";function ale(e){return Buffer.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32===0&&(e.controlBlock[0]&254)===e.leafVersion&&Buffer.isBuffer(e.script)}od.check=ale;function cle(e,t,r){let n=t.controlBlock.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.controlBlock.equals(t.controlBlock)).length===0)}od.canAddToArray=cle});var wD=L(sd=>{"use strict";p();y();Object.defineProperty(sd,"__esModule",{value:!0});var bD=On();function ule(e){if(e.key[0]!==bD.InputTypes.TAP_MERKLE_ROOT||e.key.length!==1)throw new Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!xD(e.value))throw new Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value}sd.decode=ule;function fle(e){return{key:Buffer.from([bD.InputTypes.TAP_MERKLE_ROOT]),value:e}}sd.encode=fle;sd.expected="Buffer";function xD(e){return Buffer.isBuffer(e)&&e.length===32}sd.check=xD;function lle(e,t){return!!e&&!!t&&e.tapMerkleRoot===void 0}sd.canAdd=lle});var AD=L(ad=>{"use strict";p();y();Object.defineProperty(ad,"__esModule",{value:!0});var vD=On();function dle(e){if(e.key[0]!==vD.InputTypes.TAP_SCRIPT_SIG)throw new Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(e.key.length!==65)throw new Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(e.value.length!==64&&e.value.length!==65)throw new Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));let t=e.key.slice(1,33),r=e.key.slice(33);return{pubkey:t,leafHash:r,signature:e.value}}ad.decode=dle;function hle(e){let t=Buffer.from([vD.InputTypes.TAP_SCRIPT_SIG]);return{key:Buffer.concat([t,e.pubkey,e.leafHash]),value:e.signature}}ad.encode=hle;ad.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }";function ple(e){return Buffer.isBuffer(e.pubkey)&&Buffer.isBuffer(e.leafHash)&&Buffer.isBuffer(e.signature)&&e.pubkey.length===32&&e.leafHash.length===32&&(e.signature.length===64||e.signature.length===65)}ad.check=ple;function yle(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return r.has(n)?!1:(r.add(n),e.filter(i=>i.pubkey.equals(t.pubkey)&&i.leafHash.equals(t.leafHash)).length===0)}ad.canAddToArray=yle});var _f=L(ig=>{"use strict";p();y();Object.defineProperty(ig,"__esModule",{value:!0});var mle=9007199254740991;function QI(e){if(e<0||e>mle||e%1!==0)throw new RangeError("value out of range")}function rg(e,t,r){if(QI(e),t||(t=Buffer.allocUnsafe(SD(e))),!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");return r||(r=0),e<253?(t.writeUInt8(e,r),Object.assign(rg,{bytes:1})):e<=65535?(t.writeUInt8(253,r),t.writeUInt16LE(e,r+1),Object.assign(rg,{bytes:3})):e<=4294967295?(t.writeUInt8(254,r),t.writeUInt32LE(e,r+1),Object.assign(rg,{bytes:5})):(t.writeUInt8(255,r),t.writeUInt32LE(e>>>0,r+1),t.writeUInt32LE(e/4294967296|0,r+5),Object.assign(rg,{bytes:9})),t}ig.encode=rg;function ng(e,t){if(!Buffer.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");t||(t=0);let r=e.readUInt8(t);if(r<253)return Object.assign(ng,{bytes:1}),r;if(r===253)return Object.assign(ng,{bytes:3}),e.readUInt16LE(t+1);if(r===254)return Object.assign(ng,{bytes:5}),e.readUInt32LE(t+1);{Object.assign(ng,{bytes:9});let n=e.readUInt32LE(t+1),o=e.readUInt32LE(t+5)*4294967296+n;return QI(o),o}}ig.decode=ng;function SD(e){return QI(e),e<253?1:e<=65535?3:e<=4294967295?5:9}ig.encodingLength=SD});var Dv=L(Bf=>{"use strict";p();y();Object.defineProperty(Bf,"__esModule",{value:!0});var Uv=_f();Bf.range=e=>[...Array(e).keys()];function gle(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e}Bf.reverseBuffer=gle;function ble(e){let t=e.map(ED);return t.push(Buffer.from([0])),Buffer.concat(t)}Bf.keyValsToBuffer=ble;function ED(e){let t=e.key.length,r=e.value.length,n=Uv.encodingLength(t),i=Uv.encodingLength(r),o=Buffer.allocUnsafe(n+t+i+r);return Uv.encode(t,o,0),e.key.copy(o,n),Uv.encode(r,o,n+t),e.value.copy(o,n+t+i),o}Bf.keyValToBuffer=ED;function ID(e,t){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function xle(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return n*=4294967296,ID(n+r,9007199254740991),n+r}Bf.readUInt64LE=xle;function wle(e,t,r){return ID(t,9007199254740991),e.writeInt32LE(t&-1,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}Bf.writeUInt64LE=wle});var PD=L(cd=>{"use strict";p();y();Object.defineProperty(cd,"__esModule",{value:!0});var kD=On(),TD=Dv(),Lv=_f();function vle(e){if(e.key[0]!==kD.InputTypes.WITNESS_UTXO)throw new Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=TD.readUInt64LE(e.value,0),r=8,n=Lv.decode(e.value,r);r+=Lv.encodingLength(n);let i=e.value.slice(r);if(i.length!==n)throw new Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:i,value:t}}cd.decode=vle;function Ale(e){let{script:t,value:r}=e,n=Lv.encodingLength(t.length),i=Buffer.allocUnsafe(8+n+t.length);return TD.writeUInt64LE(i,r,0),Lv.encode(t.length,i,8),t.copy(i,8+n),{key:Buffer.from([kD.InputTypes.WITNESS_UTXO]),value:i}}cd.encode=Ale;cd.expected="{ script: Buffer; value: number; }";function Sle(e){return Buffer.isBuffer(e.script)&&typeof e.value=="number"}cd.check=Sle;function Ele(e,t){return!!e&&!!t&&e.witnessUtxo===void 0}cd.canAdd=Ele});var BD=L(ud=>{"use strict";p();y();Object.defineProperty(ud,"__esModule",{value:!0});var _D=On(),XI=_f();function Ile(e){if(e.key[0]!==_D.OutputTypes.TAP_TREE||e.key.length!==1)throw new Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],i=e.value[t++],o=XI.decode(e.value,t);t+=XI.encodingLength(o),r.push({depth:n,leafVersion:i,script:e.value.slice(t,t+o)}),t+=o}return{leaves:r}}ud.decode=Ile;function kle(e){let t=Buffer.from([_D.OutputTypes.TAP_TREE]),r=[].concat(...e.leaves.map(n=>[Buffer.of(n.depth,n.leafVersion),XI.encode(n.script.length),n.script]));return{key:t,value:Buffer.concat(r)}}ud.encode=kle;ud.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }";function Tle(e){return Array.isArray(e.leaves)&&e.leaves.every(t=>t.depth>=0&&t.depth<=128&&(t.leafVersion&254)===t.leafVersion&&Buffer.isBuffer(t.script))}ud.check=Tle;function Ple(e,t){return!!e&&!!t&&e.tapTree===void 0}ud.canAdd=Ple});var t4=L(e4=>{"use strict";p();y();Object.defineProperty(e4,"__esModule",{value:!0});var _le=e=>[...Array(e).keys()],Ble=e=>e.length===33&&[2,3].includes(e[0])||e.length===65&&e[0]===4;function Cle(e,t=Ble){function r(a){if(a.key[0]!==e)throw new Error("Decode Error: could not decode bip32Derivation with key 0x"+a.key.toString("hex"));let c=a.key.slice(1);if(!t(c))throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+a.key.toString("hex"));if(a.value.length/4%1!==0)throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let u={masterFingerprint:a.value.slice(0,4),pubkey:c,path:"m"};for(let h of _le(a.value.length/4-1)){let l=a.value.readUInt32LE(h*4+4),g=!!(l&2147483648),x=l&2147483647;u.path+="/"+x.toString(10)+(g?"'":"")}return u}function n(a){let c=Buffer.from([e]),u=Buffer.concat([c,a.pubkey]),h=a.path.split("/"),l=Buffer.allocUnsafe(h.length*4);a.masterFingerprint.copy(l,0);let g=4;return h.slice(1).forEach(x=>{let A=x.slice(-1)==="'",E=2147483647&parseInt(A?x.slice(0,-1):x,10);A&&(E+=2147483648),l.writeUInt32LE(E,g),g+=4}),{key:u,value:l}}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";function o(a){return Buffer.isBuffer(a.pubkey)&&Buffer.isBuffer(a.masterFingerprint)&&typeof a.path=="string"&&t(a.pubkey)&&a.masterFingerprint.length===4}function s(a,c,u){let h=c.pubkey.toString("hex");return u.has(h)?!1:(u.add(h),a.filter(l=>l.pubkey.equals(c.pubkey)).length===0)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:s}}e4.makeConverter=Cle});var CD=L(r4=>{"use strict";p();y();Object.defineProperty(r4,"__esModule",{value:!0});function Mle(e){return t;function t(r){let n;if(e.includes(r.key[0])&&(n=r.key.slice(1),!(n.length===33||n.length===65)||![2,3,4].includes(n[0])))throw new Error("Format Error: invalid pubkey in key 0x"+r.key.toString("hex"));return n}}r4.makeChecker=Mle});var MD=L(n4=>{"use strict";p();y();Object.defineProperty(n4,"__esModule",{value:!0});function Rle(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode redeemScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.redeemScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}n4.makeConverter=Rle});var RD=L(i4=>{"use strict";p();y();Object.defineProperty(i4,"__esModule",{value:!0});var Kv=_f(),Ole=t4(),Nle=e=>e.length===32;function Ule(e){let t=Ole.makeConverter(e,Nle);function r(s){let a=Kv.decode(s.value),c=Kv.encodingLength(a),u=t.decode({key:s.key,value:s.value.slice(c+a*32)}),h=new Array(a);for(let l=0,g=c;l<a;l++,g+=32)h[l]=s.value.slice(g,g+32);return Object.assign({},u,{leafHashes:h})}function n(s){let a=t.encode(s),c=Kv.encodingLength(s.leafHashes.length),u=Buffer.allocUnsafe(c);Kv.encode(s.leafHashes.length,u);let h=Buffer.concat([u,...s.leafHashes,a.value]);return Object.assign({},a,{value:h})}let i="{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }";function o(s){return Array.isArray(s.leafHashes)&&s.leafHashes.every(a=>Buffer.isBuffer(a)&&a.length===32)&&t.check(s)}return{decode:r,encode:n,check:o,expected:i,canAddToArray:t.canAddToArray}}i4.makeConverter=Ule});var OD=L(o4=>{"use strict";p();y();Object.defineProperty(o4,"__esModule",{value:!0});function Dle(e){function t(s){if(s.key[0]!==e||s.key.length!==1)throw new Error("Decode Error: could not decode tapInternalKey with key 0x"+s.key.toString("hex"));if(s.value.length!==32)throw new Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)&&s.length===32}function o(s,a){return!!s&&!!a&&s.tapInternalKey===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}o4.makeConverter=Dle});var ND=L(s4=>{"use strict";p();y();Object.defineProperty(s4,"__esModule",{value:!0});function Lle(e){function t(s){if(s.key[0]!==e)throw new Error("Decode Error: could not decode witnessScript with key 0x"+s.key.toString("hex"));return s.value}function r(s){return{key:Buffer.from([e]),value:s}}let n="Buffer";function i(s){return Buffer.isBuffer(s)}function o(s,a){return!!s&&!!a&&s.witnessScript===void 0}return{decode:t,encode:r,check:i,expected:n,canAdd:o}}s4.makeConverter=Lle});var Fv=L(og=>{"use strict";p();y();Object.defineProperty(og,"__esModule",{value:!0});var Eo=On(),Kle=XU(),Fle=eD(),Vle=rD(),qle=iD(),Hle=sD(),Wle=cD(),zle=fD(),jle=dD(),Gle=yD(),$le=gD(),Yle=wD(),Jle=AD(),Zle=PD(),Qle=BD(),UD=t4(),a4=CD(),DD=MD(),LD=RD(),KD=OD(),FD=ND(),Xle={unsignedTx:Fle,globalXpub:Kle,checkPubkey:a4.makeChecker([])};og.globals=Xle;var ede={nonWitnessUtxo:Hle,partialSig:Wle,sighashType:jle,finalScriptSig:Vle,finalScriptWitness:qle,porCommitment:zle,witnessUtxo:Zle,bip32Derivation:UD.makeConverter(Eo.InputTypes.BIP32_DERIVATION),redeemScript:DD.makeConverter(Eo.InputTypes.REDEEM_SCRIPT),witnessScript:FD.makeConverter(Eo.InputTypes.WITNESS_SCRIPT),checkPubkey:a4.makeChecker([Eo.InputTypes.PARTIAL_SIG,Eo.InputTypes.BIP32_DERIVATION]),tapKeySig:Gle,tapScriptSig:Jle,tapLeafScript:$le,tapBip32Derivation:LD.makeConverter(Eo.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:KD.makeConverter(Eo.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:Yle};og.inputs=ede;var tde={bip32Derivation:UD.makeConverter(Eo.OutputTypes.BIP32_DERIVATION),redeemScript:DD.makeConverter(Eo.OutputTypes.REDEEM_SCRIPT),witnessScript:FD.makeConverter(Eo.OutputTypes.WITNESS_SCRIPT),checkPubkey:a4.makeChecker([Eo.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:LD.makeConverter(Eo.OutputTypes.TAP_BIP32_DERIVATION),tapTree:Qle,tapInternalKey:KD.makeConverter(Eo.OutputTypes.TAP_INTERNAL_KEY)};og.outputs=tde});var HD=L(sg=>{"use strict";p();y();Object.defineProperty(sg,"__esModule",{value:!0});var lr=Fv(),Vv=Dv(),VD=_f(),ft=On();function rde(e,t){let r=0;function n(){let C=VD.decode(e,r);r+=VD.encodingLength(C);let M=e.slice(r,r+C);return r+=C,M}function i(){let C=e.readUInt32BE(r);return r+=4,C}function o(){let C=e.readUInt8(r);return r+=1,C}function s(){let C=n(),M=n();return{key:C,value:M}}function a(){if(r>=e.length)throw new Error("Format Error: Unexpected End of PSBT");let C=e.readUInt8(r)===0;return C&&r++,C}if(i()!==1886610036)throw new Error("Format Error: Invalid Magic Number");if(o()!==255)throw new Error("Format Error: Magic Number must be followed by 0xff separator");let c=[],u={};for(;!a();){let C=s(),M=C.key.toString("hex");if(u[M])throw new Error("Format Error: Keys must be unique for global keymap: key "+M);u[M]=1,c.push(C)}let h=c.filter(C=>C.key[0]===ft.GlobalTypes.UNSIGNED_TX);if(h.length!==1)throw new Error("Format Error: Only one UNSIGNED_TX allowed");let l=t(h[0].value),{inputCount:g,outputCount:x}=l.getInputOutputCounts(),A=[],E=[];for(let C of Vv.range(g)){let M={},N=[];for(;!a();){let R=s(),V=R.key.toString("hex");if(M[V])throw new Error("Format Error: Keys must be unique for each input: input index "+C+" key "+V);M[V]=1,N.push(R)}A.push(N)}for(let C of Vv.range(x)){let M={},N=[];for(;!a();){let R=s(),V=R.key.toString("hex");if(M[V])throw new Error("Format Error: Keys must be unique for each output: output index "+C+" key "+V);M[V]=1,N.push(R)}E.push(N)}return qD(l,{globalMapKeyVals:c,inputKeyVals:A,outputKeyVals:E})}sg.psbtFromBuffer=rde;function Zn(e,t,r){if(!t.equals(Buffer.from([r])))throw new Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}sg.checkKeyBuffer=Zn;function qD(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:n}){let i={unsignedTx:e},o=0;for(let h of t)switch(h.key[0]){case ft.GlobalTypes.UNSIGNED_TX:if(Zn("global",h.key,ft.GlobalTypes.UNSIGNED_TX),o>0)throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");o++;break;case ft.GlobalTypes.GLOBAL_XPUB:i.globalXpub===void 0&&(i.globalXpub=[]),i.globalXpub.push(lr.globals.globalXpub.decode(h));break;default:i.unknownKeyVals||(i.unknownKeyVals=[]),i.unknownKeyVals.push(h)}let s=r.length,a=n.length,c=[],u=[];for(let h of Vv.range(s)){let l={};for(let g of r[h])switch(lr.inputs.checkPubkey(g),g.key[0]){case ft.InputTypes.NON_WITNESS_UTXO:if(Zn("input",g.key,ft.InputTypes.NON_WITNESS_UTXO),l.nonWitnessUtxo!==void 0)throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");l.nonWitnessUtxo=lr.inputs.nonWitnessUtxo.decode(g);break;case ft.InputTypes.WITNESS_UTXO:if(Zn("input",g.key,ft.InputTypes.WITNESS_UTXO),l.witnessUtxo!==void 0)throw new Error("Format Error: Input has multiple WITNESS_UTXO");l.witnessUtxo=lr.inputs.witnessUtxo.decode(g);break;case ft.InputTypes.PARTIAL_SIG:l.partialSig===void 0&&(l.partialSig=[]),l.partialSig.push(lr.inputs.partialSig.decode(g));break;case ft.InputTypes.SIGHASH_TYPE:if(Zn("input",g.key,ft.InputTypes.SIGHASH_TYPE),l.sighashType!==void 0)throw new Error("Format Error: Input has multiple SIGHASH_TYPE");l.sighashType=lr.inputs.sighashType.decode(g);break;case ft.InputTypes.REDEEM_SCRIPT:if(Zn("input",g.key,ft.InputTypes.REDEEM_SCRIPT),l.redeemScript!==void 0)throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");l.redeemScript=lr.inputs.redeemScript.decode(g);break;case ft.InputTypes.WITNESS_SCRIPT:if(Zn("input",g.key,ft.InputTypes.WITNESS_SCRIPT),l.witnessScript!==void 0)throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");l.witnessScript=lr.inputs.witnessScript.decode(g);break;case ft.InputTypes.BIP32_DERIVATION:l.bip32Derivation===void 0&&(l.bip32Derivation=[]),l.bip32Derivation.push(lr.inputs.bip32Derivation.decode(g));break;case ft.InputTypes.FINAL_SCRIPTSIG:Zn("input",g.key,ft.InputTypes.FINAL_SCRIPTSIG),l.finalScriptSig=lr.inputs.finalScriptSig.decode(g);break;case ft.InputTypes.FINAL_SCRIPTWITNESS:Zn("input",g.key,ft.InputTypes.FINAL_SCRIPTWITNESS),l.finalScriptWitness=lr.inputs.finalScriptWitness.decode(g);break;case ft.InputTypes.POR_COMMITMENT:Zn("input",g.key,ft.InputTypes.POR_COMMITMENT),l.porCommitment=lr.inputs.porCommitment.decode(g);break;case ft.InputTypes.TAP_KEY_SIG:Zn("input",g.key,ft.InputTypes.TAP_KEY_SIG),l.tapKeySig=lr.inputs.tapKeySig.decode(g);break;case ft.InputTypes.TAP_SCRIPT_SIG:l.tapScriptSig===void 0&&(l.tapScriptSig=[]),l.tapScriptSig.push(lr.inputs.tapScriptSig.decode(g));break;case ft.InputTypes.TAP_LEAF_SCRIPT:l.tapLeafScript===void 0&&(l.tapLeafScript=[]),l.tapLeafScript.push(lr.inputs.tapLeafScript.decode(g));break;case ft.InputTypes.TAP_BIP32_DERIVATION:l.tapBip32Derivation===void 0&&(l.tapBip32Derivation=[]),l.tapBip32Derivation.push(lr.inputs.tapBip32Derivation.decode(g));break;case ft.InputTypes.TAP_INTERNAL_KEY:Zn("input",g.key,ft.InputTypes.TAP_INTERNAL_KEY),l.tapInternalKey=lr.inputs.tapInternalKey.decode(g);break;case ft.InputTypes.TAP_MERKLE_ROOT:Zn("input",g.key,ft.InputTypes.TAP_MERKLE_ROOT),l.tapMerkleRoot=lr.inputs.tapMerkleRoot.decode(g);break;default:l.unknownKeyVals||(l.unknownKeyVals=[]),l.unknownKeyVals.push(g)}c.push(l)}for(let h of Vv.range(a)){let l={};for(let g of n[h])switch(lr.outputs.checkPubkey(g),g.key[0]){case ft.OutputTypes.REDEEM_SCRIPT:if(Zn("output",g.key,ft.OutputTypes.REDEEM_SCRIPT),l.redeemScript!==void 0)throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");l.redeemScript=lr.outputs.redeemScript.decode(g);break;case ft.OutputTypes.WITNESS_SCRIPT:if(Zn("output",g.key,ft.OutputTypes.WITNESS_SCRIPT),l.witnessScript!==void 0)throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");l.witnessScript=lr.outputs.witnessScript.decode(g);break;case ft.OutputTypes.BIP32_DERIVATION:l.bip32Derivation===void 0&&(l.bip32Derivation=[]),l.bip32Derivation.push(lr.outputs.bip32Derivation.decode(g));break;case ft.OutputTypes.TAP_INTERNAL_KEY:Zn("output",g.key,ft.OutputTypes.TAP_INTERNAL_KEY),l.tapInternalKey=lr.outputs.tapInternalKey.decode(g);break;case ft.OutputTypes.TAP_TREE:Zn("output",g.key,ft.OutputTypes.TAP_TREE),l.tapTree=lr.outputs.tapTree.decode(g);break;case ft.OutputTypes.TAP_BIP32_DERIVATION:l.tapBip32Derivation===void 0&&(l.tapBip32Derivation=[]),l.tapBip32Derivation.push(lr.outputs.tapBip32Derivation.decode(g));break;default:l.unknownKeyVals||(l.unknownKeyVals=[]),l.unknownKeyVals.push(g)}u.push(l)}return{globalMap:i,inputs:c,outputs:u}}sg.psbtFromKeyVals=qD});var jD=L(qv=>{"use strict";p();y();Object.defineProperty(qv,"__esModule",{value:!0});var c4=Fv(),WD=Dv();function nde({globalMap:e,inputs:t,outputs:r}){let{globalKeyVals:n,inputKeyVals:i,outputKeyVals:o}=zD({globalMap:e,inputs:t,outputs:r}),s=WD.keyValsToBuffer(n),a=l=>l.length===0?[Buffer.from([0])]:l.map(WD.keyValsToBuffer),c=a(i),u=a(o),h=Buffer.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),Buffer.concat([h,s].concat(c,u))}qv.psbtToBuffer=nde;var ide=(e,t)=>e.key.compare(t.key);function u4(e,t){let r=new Set,n=Object.entries(e).reduce((o,[s,a])=>{if(s==="unknownKeyVals")return o;let c=t[s];if(c===void 0)return o;let u=(Array.isArray(a)?a:[a]).map(c.encode);return u.map(l=>l.key.toString("hex")).forEach(l=>{if(r.has(l))throw new Error("Serialize Error: Duplicate key: "+l);r.add(l)}),o.concat(u)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(o=>!r.has(o.key.toString("hex"))):[];return n.concat(i).sort(ide)}function zD({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:u4(e,c4.globals),inputKeyVals:t.map(n=>u4(n,c4.inputs)),outputKeyVals:r.map(n=>u4(n,c4.outputs))}}qv.psbtToKeyVals=zD});var f4=L(Hv=>{"use strict";p();y();function GD(e){for(var t in e)Hv.hasOwnProperty(t)||(Hv[t]=e[t])}Object.defineProperty(Hv,"__esModule",{value:!0});GD(HD());GD(jD())});var YD=L(h4=>{"use strict";p();y();Object.defineProperty(h4,"__esModule",{value:!0});var l4=f4();function ode(e){let t=e[0],r=l4.psbtToKeyVals(t),n=e.slice(1);if(n.length===0)throw new Error("Combine: Nothing to combine");let i=$D(t);if(i===void 0)throw new Error("Combine: Self missing transaction");let o=B0(r.globalKeyVals),s=r.inputKeyVals.map(B0),a=r.outputKeyVals.map(B0);for(let c of n){let u=$D(c);if(u===void 0||!u.toBuffer().equals(i.toBuffer()))throw new Error("Combine: One of the Psbts does not have the same transaction.");let h=l4.psbtToKeyVals(c);B0(h.globalKeyVals).forEach(d4(o,r.globalKeyVals,h.globalKeyVals)),h.inputKeyVals.map(B0).forEach((A,E)=>A.forEach(d4(s[E],r.inputKeyVals[E],h.inputKeyVals[E]))),h.outputKeyVals.map(B0).forEach((A,E)=>A.forEach(d4(a[E],r.outputKeyVals[E],h.outputKeyVals[E])))}return l4.psbtFromKeyVals(i,{globalMapKeyVals:r.globalKeyVals,inputKeyVals:r.inputKeyVals,outputKeyVals:r.outputKeyVals})}h4.combine=ode;function d4(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(o=>o.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function $D(e){return e.globalMap.unsignedTx}function B0(e){let t=new Set;return e.forEach(r=>{let n=r.key.toString("hex");if(t.has(n))throw new Error("Combine: KeyValue Map keys should be unique");t.add(n)}),t}});var y4=L(Ai=>{"use strict";p();y();Object.defineProperty(Ai,"__esModule",{value:!0});var sde=Fv();function ZD(e,t){let r=e[t];if(r===void 0)throw new Error(`No input #${t}`);return r}Ai.checkForInput=ZD;function QD(e,t){let r=e[t];if(r===void 0)throw new Error(`No output #${t}`);return r}Ai.checkForOutput=QD;function ade(e,t,r){if(e.key[0]<r)throw new Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&t.filter(n=>n.key.equals(e.key)).length!==0)throw new Error(`Duplicate Key: ${e.key.toString("hex")}`)}Ai.checkHasKey=ade;function cde(e){let t=0;return Object.keys(e).forEach(r=>{Number(isNaN(Number(r)))&&t++}),t}Ai.getEnumLength=cde;function ude(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let n=!!t.redeemScript,i=!!t.witnessScript,o=!n||!!t.finalScriptSig,s=!i||!!t.finalScriptWitness,a=!!t.finalScriptSig||!!t.finalScriptWitness;r=o&&s&&a}if(r===!1)throw new Error(`Input #${e} has too much or too little data to clean`)}Ai.inputCheckUncleanFinalized=ude;function JD(e,t,r,n){throw new Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function p4(e){return(t,r)=>{for(let n of Object.keys(t)){let i=t[n],{canAdd:o,canAddToArray:s,check:a,expected:c}=sde[e+"s"][n]||{},u=!!s;if(a)if(u){if(!Array.isArray(i)||r[n]&&!Array.isArray(r[n]))throw new Error(`Key type ${n} must be an array`);i.every(a)||JD(e,n,c,i);let h=r[n]||[],l=new Set;if(!i.every(g=>s(h,g,l)))throw new Error("Can not add duplicate data to array");r[n]=h.concat(i)}else{if(a(i)||JD(e,n,c,i),!o(r,i))throw new Error(`Can not add duplicate data to ${e}`);r[n]=i}}}}Ai.updateGlobal=p4("global");Ai.updateInput=p4("input");Ai.updateOutput=p4("output");function fde(e,t){let r=e.length-1,n=ZD(e,r);Ai.updateInput(t,n)}Ai.addInputAttributes=fde;function lde(e,t){let r=e.length-1,n=QD(e,r);Ai.updateOutput(t,n)}Ai.addOutputAttributes=lde;function dde(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t}Ai.defaultVersionSetter=dde;function hde(e,t){if(!Buffer.isBuffer(t)||t.length<4)throw new Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}Ai.defaultLocktimeSetter=hde});var eL=L(b4=>{"use strict";p();y();Object.defineProperty(b4,"__esModule",{value:!0});var pde=YD(),XD=f4(),m4=On(),Qn=y4(),g4=class{constructor(t){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:t}}static fromBase64(t,r){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r){let n=XD.psbtFromBuffer(t,r),i=new this(n.globalMap.unsignedTx);return Object.assign(i,n),i}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return XD.psbtToBuffer(this)}updateGlobal(t){return Qn.updateGlobal(t,this.globalMap),this}updateInput(t,r){let n=Qn.checkForInput(this.inputs,t);return Qn.updateInput(r,n),this}updateOutput(t,r){let n=Qn.checkForOutput(this.outputs,t);return Qn.updateOutput(r,n),this}addUnknownKeyValToGlobal(t){return Qn.checkHasKey(t,this.globalMap.unknownKeyVals,Qn.getEnumLength(m4.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(t),this}addUnknownKeyValToInput(t,r){let n=Qn.checkForInput(this.inputs,t);return Qn.checkHasKey(r,n.unknownKeyVals,Qn.getEnumLength(m4.InputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addUnknownKeyValToOutput(t,r){let n=Qn.checkForOutput(this.outputs,t);return Qn.checkHasKey(r,n.unknownKeyVals,Qn.getEnumLength(m4.OutputTypes)),n.unknownKeyVals||(n.unknownKeyVals=[]),n.unknownKeyVals.push(r),this}addInput(t){this.globalMap.unsignedTx.addInput(t),this.inputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.inputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToInput(n,i)),Qn.addInputAttributes(this.inputs,t),this}addOutput(t){this.globalMap.unsignedTx.addOutput(t),this.outputs.push({unknownKeyVals:[]});let r=t.unknownKeyVals||[],n=this.outputs.length-1;if(!Array.isArray(r))throw new Error("unknownKeyVals must be an Array");return r.forEach(i=>this.addUnknownKeyValToOutput(n,i)),Qn.addOutputAttributes(this.outputs,t),this}clearFinalizedInput(t){let r=Qn.checkForInput(this.inputs,t);Qn.inputCheckUncleanFinalized(t,r);for(let n of Object.keys(r))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(n)||delete r[n];return this}combine(...t){let r=pde.combine([this].concat(t));return Object.assign(this,r),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}};b4.Psbt=g4});var zv=L(or=>{"use strict";p();y();Object.defineProperty(or,"__esModule",{value:!0});or.signatureBlocksAction=or.checkInputForSig=or.pubkeyInScript=or.pubkeyPositionInScript=or.witnessStackToScriptWitness=or.isP2TR=or.isP2SHScript=or.isP2WSHScript=or.isP2WPKH=or.isP2PKH=or.isP2PK=or.isP2MS=void 0;var tL=_f(),ag=Oi(),Wv=_0(),yde=Da(),fd=T0();function ld(e){return t=>{try{return e({output:t}),!0}catch{return!1}}}or.isP2MS=ld(fd.p2ms);or.isP2PK=ld(fd.p2pk);or.isP2PKH=ld(fd.p2pkh);or.isP2WPKH=ld(fd.p2wpkh);or.isP2WSHScript=ld(fd.p2wsh);or.isP2SHScript=ld(fd.p2sh);or.isP2TR=ld(fd.p2tr);function mde(e){let t=Buffer.allocUnsafe(0);function r(s){t=Buffer.concat([t,Buffer.from(s)])}function n(s){let a=t.length,c=tL.encodingLength(s);t=Buffer.concat([t,Buffer.allocUnsafe(c)]),tL.encode(s,t,a)}function i(s){n(s.length),r(s)}function o(s){n(s.length),s.forEach(i)}return o(e),t}or.witnessStackToScriptWitness=mde;function rL(e,t){let r=(0,yde.hash160)(e),n=e.slice(1,33),i=ag.decompile(t);if(i===null)throw new Error("Unknown script error");return i.findIndex(o=>typeof o=="number"?!1:o.equals(e)||o.equals(r)||o.equals(n))}or.pubkeyPositionInScript=rL;function gde(e,t){return rL(e,t)!==-1}or.pubkeyInScript=gde;function bde(e,t){return xde(e).some(n=>nL(n,ag.signature.decode,t))}or.checkInputForSig=bde;function nL(e,t,r){let{hashType:n}=t(e),i=[];switch(n&Wv.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),n&31){case Wv.Transaction.SIGHASH_ALL:break;case Wv.Transaction.SIGHASH_SINGLE:case Wv.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence");break}return i.indexOf(r)===-1}or.signatureBlocksAction=nL;function xde(e){let t=[];if((e.partialSig||[]).length===0){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=wde(e)}else t=e.partialSig;return t.map(r=>r.signature)}function wde(e){let t=e.finalScriptSig?ag.decompile(e.finalScriptSig)||[]:[],r=e.finalScriptWitness?ag.decompile(e.finalScriptWitness)||[]:[];return t.concat(r).filter(n=>Buffer.isBuffer(n)&&ag.isCanonicalScriptSignature(n)).map(n=>({signature:n}))}});var oL=L(Ar=>{"use strict";p();y();Object.defineProperty(Ar,"__esModule",{value:!0});Ar.checkTaprootInputForSigs=Ar.tapTreeFromList=Ar.tapTreeToList=Ar.tweakInternalPubKey=Ar.checkTaprootOutputFields=Ar.checkTaprootInputFields=Ar.isTaprootOutput=Ar.isTaprootInput=Ar.serializeTaprootSignature=Ar.tapScriptFinalizer=Ar.toXOnly=void 0;var A4=Jn(),vde=_0(),$v=zv(),Cf=Pv(),Ade=T0(),Sde=zv(),Ede=e=>e.length===32?e:e.slice(1,33);Ar.toXOnly=Ede;function Ide(e,t,r){let n=Hde(t,e,r);try{let o=Vde(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,$v.witnessStackToScriptWitness)(o)}}catch(i){throw new Error(`Can not finalize taproot input #${e}: ${i}`)}}Ar.tapScriptFinalizer=Ide;function kde(e,t){let r=t?Buffer.from([t]):Buffer.from([]);return Buffer.concat([e,r])}Ar.serializeTaprootSignature=kde;function jv(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,$v.isP2TR)(e.witnessUtxo.script))}Ar.isTaprootInput=jv;function Gv(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,$v.isP2TR)(t))}Ar.isTaprootOutput=Gv;function Tde(e,t,r){Lde(e,t,r),Fde(e,t,r)}Ar.checkTaprootInputFields=Tde;function Pde(e,t,r){Kde(e,t,r),_de(e,t)}Ar.checkTaprootOutputFields=Pde;function _de(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:i}=e,o=Bde(r,n);if(i&&!i.equals(o))throw new Error("Error adding output. Script or address missmatch.")}}function Bde(e,t){let r=t&&iL(t.leaves),{output:n}=(0,Ade.p2tr)({internalPubkey:e,scriptTree:r});return n}function Cde(e,t){let r=t.tapInternalKey,n=r&&(0,Cf.tweakKey)(r,t.tapMerkleRoot);if(!n)throw new Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x}Ar.tweakInternalPubKey=Cde;function Mde(e){if(!(0,A4.isTaptree)(e))throw new Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return w4(e)}Ar.tapTreeToList=Mde;function iL(e=[]){return e.length===1&&e[0].depth===0?{output:e[0].script,version:e[0].leafVersion}:Dde(e)}Ar.tapTreeFromList=iL;function Rde(e,t){return Nde(e).some(n=>(0,Sde.signatureBlocksAction)(n,Ode,t))}Ar.checkTaprootInputForSigs=Rde;function Ode(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||vde.Transaction.SIGHASH_DEFAULT}}function Nde(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(r=>r.signature)),!t.length){let r=Ude(e.finalScriptWitness);r&&t.push(r)}return t}function Ude(e){if(!e)return;let t=e.slice(2);if(t.length===64||t.length===65)return t}function w4(e,t=[],r=0){if(r>Cf.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");return e?(0,A4.isTapleaf)(e)?(t.push({depth:r,leafVersion:e.version||Cf.LEAF_VERSION_TAPSCRIPT,script:e.output}),t):(e[0]&&w4(e[0],t,r+1),e[1]&&w4(e[1],t,r+1),t):[]}function Dde(e){let t;for(let r of e)if(t=v4(r,t),!t)throw new Error("No room left to insert tapleaf in tree");return t}function v4(e,t,r=0){if(r>Cf.MAX_TAPTREE_DEPTH)throw new Error("Max taptree depth exceeded.");if(e.depth===r)return t?void 0:{output:e.script,version:e.leafVersion};if((0,A4.isTapleaf)(t))return;let n=v4(e,t&&t[0],r+1);if(n)return[n,t&&t[1]];let i=v4(e,t&&t[1],r+1);if(i)return[t&&t[0],i]}function Lde(e,t,r){let n=jv(e)&&C0(t),i=C0(e)&&jv(t),o=e===t&&jv(t)&&C0(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function Kde(e,t,r){let n=Gv(e)&&C0(t),i=C0(e)&&Gv(t),o=e===t&&Gv(t)&&C0(t);if(n||i||o)throw new Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)}function Fde(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(o=>x4(o,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(o=>x4(o,t.tapMerkleRoot));if(!n||!i)throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(i=>x4(i,e.tapMerkleRoot)))throw new Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}function x4(e,t){if(!t)return!0;let r=(0,Cf.tapleafHash)({output:e.script,version:e.leafVersion});return(0,Cf.rootHashFromPath)(e.controlBlock,r).equals(t)}function Vde(e,t){let r=(0,Cf.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(n=>n.leafHash.equals(r)).map(n=>qde(t.script,n)).sort((n,i)=>i.positionInScript-n.positionInScript).map(n=>n.signature)}function qde(e,t){return Object.assign({positionInScript:(0,$v.pubkeyPositionInScript)(t.pubkey,e)},t)}function Hde(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw new Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((i,o)=>i.controlBlock.length-o.controlBlock.length).find(i=>Wde(i,e.tapScriptSig,r));if(!n)throw new Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}function Wde(e,t,r){let n=(0,Cf.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&t.find(o=>o.leafHash.equals(n))!==void 0}function C0(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}});var _L=L(t2=>{"use strict";p();y();Object.defineProperty(t2,"__esModule",{value:!0});t2.Psbt=void 0;var sL=eL(),aL=_f(),Li=y4(),cL=jI(),Jv=tg(),zde=ns(),ss=T0(),jde=Pv(),Jc=Oi(),Xn=_0(),Nr=oL(),on=zv(),Gde={network:zde.bitcoin,maximumFeeRate:5e3},E4=class e{static fromBase64(t,r={}){let n=Buffer.from(t,"base64");return this.fromBuffer(n,r)}static fromHex(t,r={}){let n=Buffer.from(t,"hex");return this.fromBuffer(n,r)}static fromBuffer(t,r={}){let n=sL.Psbt.fromBuffer(t,$de),i=new e(r,n);return Xde(i.__CACHE.__TX,i.__CACHE),i}constructor(t={},r=new sL.Psbt(new Zv)){this.data=r,this.opts=Object.assign({},Gde,t),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},this.data.inputs.length===0&&this.setVersion(2);let n=(i,o,s,a)=>Object.defineProperty(i,o,{enumerable:s,writable:a});n(this,"__CACHE",!1,!0),n(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(t){this.setVersion(t)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(t){this.setLocktime(t)}get txInputs(){return this.__CACHE.__TX.ins.map(t=>({hash:(0,Jv.cloneBuffer)(t.hash),index:t.index,sequence:t.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(t=>{let r;try{r=(0,cL.fromOutputScript)(t.script,this.opts.network)}catch{}return{script:(0,Jv.cloneBuffer)(t.script),value:t.value,address:r}})}combine(...t){return this.data.combine(...t.map(r=>r.data)),this}clone(){let t=e.fromBuffer(this.data.toBuffer());return t.opts=JSON.parse(JSON.stringify(this.opts)),t}setMaximumFeeRate(t){Yv(t),this.opts.maximumFeeRate=t}setVersion(t){Yv(t),cg(this.data.inputs,"setVersion");let r=this.__CACHE;return r.__TX.version=t,r.__EXTRACTED_TX=void 0,this}setLocktime(t){Yv(t),cg(this.data.inputs,"setLocktime");let r=this.__CACHE;return r.__TX.locktime=t,r.__EXTRACTED_TX=void 0,this}setInputSequence(t,r){Yv(r),cg(this.data.inputs,"setInputSequence");let n=this.__CACHE;if(n.__TX.ins.length<=t)throw new Error("Input index too high");return n.__TX.ins[t].sequence=r,n.__EXTRACTED_TX=void 0,this}addInputs(t){return t.forEach(r=>this.addInput(r)),this}addInput(t){if(arguments.length>1||!t||t.hash===void 0||t.index===void 0)throw new Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,Nr.checkTaprootInputFields)(t,t,"addInput"),cg(this.data.inputs,"addInput"),t.witnessScript&&Qv(t.witnessScript);let r=this.__CACHE;this.data.addInput(t);let n=r.__TX.ins[r.__TX.ins.length-1];xL(r,n);let i=this.data.inputs.length-1,o=this.data.inputs[i];return o.nonWitnessUtxo&&k4(this.__CACHE,o,i),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}addOutputs(t){return t.forEach(r=>this.addOutput(r)),this}addOutput(t){if(arguments.length>1||!t||t.value===void 0||t.address===void 0&&t.script===void 0)throw new Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");cg(this.data.inputs,"addOutput");let{address:r}=t;if(typeof r=="string"){let{network:i}=this.opts,o=(0,cL.toOutputScript)(r,i);t=Object.assign(t,{script:o})}(0,Nr.checkTaprootOutputFields)(t,t,"addOutput");let n=this.__CACHE;return this.data.addOutput(t),n.__FEE=void 0,n.__FEE_RATE=void 0,n.__EXTRACTED_TX=void 0,this}extractTransaction(t){if(!this.data.inputs.every(gL))throw new Error("Not finalized");let r=this.__CACHE;if(t||Jde(this,r,this.opts),r.__EXTRACTED_TX)return r.__EXTRACTED_TX;let n=r.__TX.clone();return IL(this.data.inputs,n,r,!0),n}getFeeRate(){return hL("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return hL("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,Li.checkForInput)(this.data.inputs,0),ug(this.data.inputs.length).forEach(t=>this.finalizeInput(t)),this}finalizeInput(t,r){let n=(0,Li.checkForInput)(this.data.inputs,t);return(0,Nr.isTaprootInput)(n)?this._finalizeTaprootInput(t,n,void 0,r):this._finalizeInput(t,n,r)}finalizeTaprootInput(t,r,n=Nr.tapScriptFinalizer){let i=(0,Li.checkForInput)(this.data.inputs,t);if((0,Nr.isTaprootInput)(i))return this._finalizeTaprootInput(t,i,r,n);throw new Error(`Cannot finalize input #${t}. Not Taproot.`)}_finalizeInput(t,r,n=ehe){let{script:i,isP2SH:o,isP2WSH:s,isSegwit:a}=ihe(t,r,this.__CACHE);if(!i)throw new Error(`No script found for input #${t}`);Zde(r);let{finalScriptSig:c,finalScriptWitness:u}=n(t,r,i,a,o,s);if(c&&this.data.updateInput(t,{finalScriptSig:c}),u&&this.data.updateInput(t,{finalScriptWitness:u}),!c&&!u)throw new Error(`Unknown error finalizing input #${t}`);return this.data.clearFinalizedInput(t),this}_finalizeTaprootInput(t,r,n,i=Nr.tapScriptFinalizer){if(!r.witnessUtxo)throw new Error(`Cannot finalize input #${t}. Missing withness utxo.`);if(r.tapKeySig){let o=ss.p2tr({output:r.witnessUtxo.script,signature:r.tapKeySig}),s=(0,on.witnessStackToScriptWitness)(o.witness);this.data.updateInput(t,{finalScriptWitness:s})}else{let{finalScriptWitness:o}=i(t,r,n);this.data.updateInput(t,{finalScriptWitness:o})}return this.data.clearFinalizedInput(t),this}getInputType(t){let r=(0,Li.checkForInput)(this.data.inputs,t),n=kL(t,r,this.__CACHE),i=e2(n,t,"input",r.redeemScript||uhe(r.finalScriptSig),r.witnessScript||fhe(r.finalScriptWitness)),o=i.type==="raw"?"":i.type+"-",s=PL(i.meaningfulScript);return o+s}inputHasPubkey(t,r){let n=(0,Li.checkForInput)(this.data.inputs,t);return ahe(r,n,t,this.__CACHE)}inputHasHDKey(t,r){let n=(0,Li.checkForInput)(this.data.inputs,t),i=fL(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}outputHasPubkey(t,r){let n=(0,Li.checkForOutput)(this.data.outputs,t);return che(r,n,t,this.__CACHE)}outputHasHDKey(t,r){let n=(0,Li.checkForOutput)(this.data.outputs,t),i=fL(r);return!!n.bip32Derivation&&n.bip32Derivation.some(i)}validateSignaturesOfAllInputs(t){return(0,Li.checkForInput)(this.data.inputs,0),ug(this.data.inputs.length).map(n=>this.validateSignaturesOfInput(n,t)).reduce((n,i)=>i===!0&&n,!0)}validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t];return(0,Nr.isTaprootInput)(i)?this.validateSignaturesOfTaprootInput(t,r,n):this._validateSignaturesOfInput(t,r,n)}_validateSignaturesOfInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).partialSig;if(!i||!o||o.length<1)throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");let s=n?o.filter(l=>l.pubkey.equals(n)):o;if(s.length<1)throw new Error("No signatures for this pubkey");let a=[],c,u,h;for(let l of s){let g=Jc.signature.decode(l.signature),{hash:x,script:A}=h!==g.hashType?vL(t,Object.assign({},i,{sighashType:g.hashType}),this.__CACHE,!0):{hash:c,script:u};h=g.hashType,c=x,u=A,bL(l.pubkey,A,"verify"),a.push(r(l.pubkey,x,g.signature))}return a.every(l=>l===!0)}validateSignaturesOfTaprootInput(t,r,n){let i=this.data.inputs[t],o=(i||{}).tapKeySig,s=(i||{}).tapScriptSig;if(!i&&!o&&!(s&&!s.length))throw new Error("No signatures to validate");if(typeof r!="function")throw new Error("Need validator function to validate signatures");n=n&&(0,Nr.toXOnly)(n);let a=n?I4(t,i,this.data.inputs,n,this.__CACHE):rhe(t,i,this.data.inputs,this.__CACHE);if(!a.length)throw new Error("No signatures for this pubkey");let c=a.find(h=>!h.leafHash),u=0;if(o&&c){if(!r(c.pubkey,c.hash,yL(o)))return!1;u++}if(s)for(let h of s){let l=a.find(g=>h.pubkey.equals(g.pubkey));if(l){if(!r(h.pubkey,l.hash,yL(h.signature)))return!1;u++}}return u>0}signAllInputsHD(t,r=[Xn.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw new Error("Need HDSigner to sign input");let n=[];for(let i of ug(this.data.inputs.length))try{this.signInputHD(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsHDAsync(t,r=[Xn.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>{if(!t||!t.publicKey||!t.fingerprint)return i(new Error("Need HDSigner to sign input"));let o=[],s=[];for(let a of ug(this.data.inputs.length))s.push(this.signInputHDAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInputHD(t,r,n=[Xn.Transaction.SIGHASH_ALL]){if(!r||!r.publicKey||!r.fingerprint)throw new Error("Need HDSigner to sign input");return mL(t,this.data.inputs,r).forEach(o=>this.signInput(t,o,n)),this}signInputHDAsync(t,r,n=[Xn.Transaction.SIGHASH_ALL]){return new Promise((i,o)=>{if(!r||!r.publicKey||!r.fingerprint)return o(new Error("Need HDSigner to sign input"));let a=mL(t,this.data.inputs,r).map(c=>this.signInputAsync(t,c,n));return Promise.all(a).then(()=>{i()}).catch(o)})}signAllInputs(t,r){if(!t||!t.publicKey)throw new Error("Need Signer to sign input");let n=[];for(let i of ug(this.data.inputs.length))try{this.signInput(i,t,r),n.push(!0)}catch{n.push(!1)}if(n.every(i=>i===!1))throw new Error("No inputs were signed");return this}signAllInputsAsync(t,r){return new Promise((n,i)=>{if(!t||!t.publicKey)return i(new Error("Need Signer to sign input"));let o=[],s=[];for(let[a]of this.data.inputs.entries())s.push(this.signInputAsync(a,t,r).then(()=>{o.push(!0)},()=>{o.push(!1)}));return Promise.all(s).then(()=>{if(o.every(a=>a===!1))return i(new Error("No inputs were signed"));n()})})}signInput(t,r,n){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,Li.checkForInput)(this.data.inputs,t);return(0,Nr.isTaprootInput)(i)?this._signTaprootInput(t,i,r,void 0,n):this._signInput(t,r,n)}signTaprootInput(t,r,n,i){if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,Li.checkForInput)(this.data.inputs,t);if((0,Nr.isTaprootInput)(o))return this._signTaprootInput(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)}_signInput(t,r,n=[Xn.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=pL(this.data.inputs,t,r.publicKey,this.__CACHE,n),s=[{pubkey:r.publicKey,signature:Jc.signature.encode(r.sign(i),o)}];return this.data.updateInput(t,{partialSig:s}),this}_signTaprootInput(t,r,n,i,o=[Xn.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=s.filter(u=>!u.leafHash).map(u=>(0,Nr.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType))[0],c=s.filter(u=>!!u.leafHash).map(u=>({pubkey:(0,Nr.toXOnly)(n.publicKey),signature:(0,Nr.serializeTaprootSignature)(n.signSchnorr(u.hash),r.sighashType),leafHash:u.leafHash}));return a&&this.data.updateInput(t,{tapKeySig:a}),c.length&&this.data.updateInput(t,{tapScriptSig:c}),this}signInputAsync(t,r,n){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let i=(0,Li.checkForInput)(this.data.inputs,t);return(0,Nr.isTaprootInput)(i)?this._signTaprootInputAsync(t,i,r,void 0,n):this._signInputAsync(t,r,n)})}signTaprootInputAsync(t,r,n,i){return Promise.resolve().then(()=>{if(!r||!r.publicKey)throw new Error("Need Signer to sign input");let o=(0,Li.checkForInput)(this.data.inputs,t);if((0,Nr.isTaprootInput)(o))return this._signTaprootInputAsync(t,o,r,n,i);throw new Error(`Input #${t} is not of type Taproot.`)})}_signInputAsync(t,r,n=[Xn.Transaction.SIGHASH_ALL]){let{hash:i,sighashType:o}=pL(this.data.inputs,t,r.publicKey,this.__CACHE,n);return Promise.resolve(r.sign(i)).then(s=>{let a=[{pubkey:r.publicKey,signature:Jc.signature.encode(s,o)}];this.data.updateInput(t,{partialSig:a})})}async _signTaprootInputAsync(t,r,n,i,o=[Xn.Transaction.SIGHASH_DEFAULT]){let s=this.checkTaprootHashesForSig(t,r,n,i,o),a=[],c=s.filter(h=>!h.leafHash)[0];if(c){let h=Promise.resolve(n.signSchnorr(c.hash)).then(l=>({tapKeySig:(0,Nr.serializeTaprootSignature)(l,r.sighashType)}));a.push(h)}let u=s.filter(h=>!!h.leafHash);if(u.length){let h=u.map(l=>Promise.resolve(n.signSchnorr(l.hash)).then(g=>({tapScriptSig:[{pubkey:(0,Nr.toXOnly)(n.publicKey),signature:(0,Nr.serializeTaprootSignature)(g,r.sighashType),leafHash:l.leafHash}]})));a.push(...h)}return Promise.all(a).then(h=>{h.forEach(l=>this.data.updateInput(t,l))})}checkTaprootHashesForSig(t,r,n,i,o){if(typeof n.signSchnorr!="function")throw new Error(`Need Schnorr Signer to sign taproot input #${t}.`);let s=I4(t,r,this.data.inputs,n.publicKey,this.__CACHE,i,o);if(!s||!s.length)throw new Error(`Can not sign for input #${t} with the key ${n.publicKey.toString("hex")}`);return s}toBuffer(){return S4(this.__CACHE),this.data.toBuffer()}toHex(){return S4(this.__CACHE),this.data.toHex()}toBase64(){return S4(this.__CACHE),this.data.toBase64()}updateGlobal(t){return this.data.updateGlobal(t),this}updateInput(t,r){return r.witnessScript&&Qv(r.witnessScript),(0,Nr.checkTaprootInputFields)(this.data.inputs[t],r,"updateInput"),this.data.updateInput(t,r),r.nonWitnessUtxo&&k4(this.__CACHE,this.data.inputs[t],t),this}updateOutput(t,r){let n=this.data.outputs[t];return(0,Nr.checkTaprootOutputFields)(n,r,"updateOutput"),this.data.updateOutput(t,r),this}addUnknownKeyValToGlobal(t){return this.data.addUnknownKeyValToGlobal(t),this}addUnknownKeyValToInput(t,r){return this.data.addUnknownKeyValToInput(t,r),this}addUnknownKeyValToOutput(t,r){return this.data.addUnknownKeyValToOutput(t,r),this}clearFinalizedInput(t){return this.data.clearFinalizedInput(t),this}};t2.Psbt=E4;var $de=e=>new Zv(e),Zv=class{constructor(t=Buffer.from([2,0,0,0,0,0,0,0,0,0])){this.tx=Xn.Transaction.fromBuffer(t),Qde(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(t){if(t.hash===void 0||t.index===void 0||!Buffer.isBuffer(t.hash)&&typeof t.hash!="string"||typeof t.index!="number")throw new Error("Error adding input.");let r=typeof t.hash=="string"?(0,Jv.reverseBuffer)(Buffer.from(t.hash,"hex")):t.hash;this.tx.addInput(r,t.index,t.sequence)}addOutput(t){if(t.script===void 0||t.value===void 0||!Buffer.isBuffer(t.script)||typeof t.value!="number")throw new Error("Error adding output.");this.tx.addOutput(t.script,t.value)}toBuffer(){return this.tx.toBuffer()}};function Yde(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return uL(1,e.partialSig);case"multisig":let n=ss.p2ms({output:t});return uL(n.m,e.partialSig,n.pubkeys);default:return!1}}function S4(e){if(e.__UNSAFE_SIGN_NONSEGWIT!==!1)throw new Error("Not BIP174 compliant, can not export")}function uL(e,t,r){if(!t)return!1;let n;if(r?n=r.map(i=>{let o=lhe(i);return t.find(s=>s.pubkey.equals(o))}).filter(i=>!!i):n=t,n.length>e)throw new Error("Too many signatures");return n.length===e}function gL(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function fL(e){return t=>!(!t.masterFingerprint.equals(e.fingerprint)||!e.derivePath(t.path).publicKey.equals(t.pubkey))}function Yv(e){if(typeof e!="number"||e!==Math.floor(e)||e>4294967295||e<0)throw new Error("Invalid 32 bit integer")}function Jde(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize(),o=n*i;if(n>=r.maximumFeeRate)throw new Error(`Warning: You are paying around ${(o/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}function cg(e,t){e.forEach(r=>{if((0,Nr.isTaprootInput)(r)?(0,Nr.checkTaprootInputForSigs)(r,t):(0,on.checkInputForSig)(r,t))throw new Error("Can not modify transaction, signatures exist.")})}function Zde(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(n=>{let{hashType:i}=Jc.signature.decode(n.signature);if(r!==i)throw new Error("Signature sighash does not match input sighash type")})}function bL(e,t,r){if(!(0,on.pubkeyInScript)(e,t))throw new Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function Qde(e){if(!e.ins.every(r=>r.script&&r.script.length===0&&r.witness&&r.witness.length===0))throw new Error("Format Error: Transaction ScriptSigs are not empty")}function Xde(e,t){e.ins.forEach(r=>{xL(t,r)})}function xL(e,t){let r=(0,Jv.reverseBuffer)(Buffer.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[r])throw new Error("Duplicate input detected.");e.__TX_IN_CACHE[r]=1}function wL(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw new Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}var lL=wL(ss.p2sh,"Redeem script"),dL=wL(ss.p2wsh,"Witness script");function hL(e,t,r,n){if(!r.every(gL))throw new Error(`PSBT must be finalized to calculate ${t}`);if(e==="__FEE_RATE"&&n.__FEE_RATE)return n.__FEE_RATE;if(e==="__FEE"&&n.__FEE)return n.__FEE;let i,o=!0;if(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),IL(r,i,n,o),e==="__FEE_RATE")return n.__FEE_RATE;if(e==="__FEE")return n.__FEE}function ehe(e,t,r,n,i,o){let s=PL(r);if(!Yde(t,r,s))throw new Error(`Can not finalize input #${e}`);return the(r,s,t.partialSig,n,i,o)}function the(e,t,r,n,i,o){let s,a,c=nhe(e,t,r),u=o?ss.p2wsh({redeem:c}):null,h=i?ss.p2sh({redeem:u||c}):null;return n?(u?a=(0,on.witnessStackToScriptWitness)(u.witness):a=(0,on.witnessStackToScriptWitness)(c.witness),h&&(s=h.input)):h?s=h.input:s=c.input,{finalScriptSig:s,finalScriptWitness:a}}function pL(e,t,r,n,i){let o=(0,Li.checkForInput)(e,t),{hash:s,sighashType:a,script:c}=vL(t,o,n,!1,i);return bL(r,c,"sign"),{hash:s,sighashType:a}}function vL(e,t,r,n,i){let o=r.__TX,s=t.sighashType||Xn.Transaction.SIGHASH_ALL;SL(s,i);let a,c;if(t.nonWitnessUtxo){let l=Xv(r,t,e),g=o.ins[e].hash,x=l.getHash();if(!g.equals(x))throw new Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let A=o.ins[e].index;c=l.outs[A]}else if(t.witnessUtxo)c=t.witnessUtxo;else throw new Error("Need a Utxo input item for signing");let{meaningfulScript:u,type:h}=e2(c.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(h)>=0)a=o.hashForWitnessV0(e,u,c.value,s);else if((0,on.isP2WPKH)(u)){let l=ss.p2pkh({hash:u.slice(2)}).output;a=o.hashForWitnessV0(e,l,c.value,s)}else{if(t.nonWitnessUtxo===void 0&&r.__UNSAFE_SIGN_NONSEGWIT===!1)throw new Error(`Input #${e} has witnessUtxo but non-segwit script: ${u.toString("hex")}`);!n&&r.__UNSAFE_SIGN_NONSEGWIT!==!1&&console.warn(`Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.
*********************
PROCEED WITH CAUTION!
*********************`),a=o.hashForSignature(e,u,s)}return{script:u,sighashType:s,hash:a}}function rhe(e,t,r,n){let i=[];if(t.tapInternalKey){let s=AL(e,t,n);s&&i.push(s)}if(t.tapScriptSig){let s=t.tapScriptSig.map(a=>a.pubkey);i.push(...s)}return i.map(s=>I4(e,t,r,s,n)).flat()}function AL(e,t,r){let{script:n}=T4(e,t,r);return(0,on.isP2TR)(n)?n.subarray(2,34):null}function yL(e){return e.length===64?e:e.subarray(0,64)}function I4(e,t,r,n,i,o,s){let a=i.__TX,c=t.sighashType||Xn.Transaction.SIGHASH_DEFAULT;SL(c,s);let u=r.map((A,E)=>T4(E,A,i)),h=u.map(A=>A.script),l=u.map(A=>A.value),g=[];if(t.tapInternalKey&&!o){let A=AL(e,t,i)||Buffer.from([]);if((0,Nr.toXOnly)(n).equals(A)){let E=a.hashForWitnessV1(e,h,l,c);g.push({pubkey:n,hash:E})}}let x=(t.tapLeafScript||[]).filter(A=>(0,on.pubkeyInScript)(n,A.script)).map(A=>{let E=(0,jde.tapleafHash)({output:A.script,version:A.leafVersion});return Object.assign({hash:E},A)}).filter(A=>!o||o.equals(A.hash)).map(A=>{let E=a.hashForWitnessV1(e,h,l,Xn.Transaction.SIGHASH_DEFAULT,A.hash);return{pubkey:n,hash:E,leafHash:A.hash}});return g.concat(x)}function SL(e,t){if(t&&t.indexOf(e)<0){let r=she(e);throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${r}`)}}function nhe(e,t,r){let n;switch(t){case"multisig":let i=ohe(e,r);n=ss.p2ms({output:e,signatures:i});break;case"pubkey":n=ss.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=ss.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=ss.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break}return n}function ihe(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=Xv(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,on.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}function mL(e,t,r){let n=(0,Li.checkForInput)(t,e);if(!n.bip32Derivation||n.bip32Derivation.length===0)throw new Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(s=>{if(s.masterFingerprint.equals(r.fingerprint))return s}).filter(s=>!!s);if(i.length===0)throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(s=>{let a=r.derivePath(s.path);if(!s.pubkey.equals(a.publicKey))throw new Error("pubkey did not match bip32Derivation");return a})}function ohe(e,t){return ss.p2ms({output:e}).pubkeys.map(n=>(t.filter(i=>i.pubkey.equals(n))[0]||{}).signature).filter(n=>!!n)}function EL(e){let t=0;function r(s){return t+=s,e.slice(t-s,t)}function n(){let s=aL.decode(e,t);return t+=aL.decode.bytes,s}function i(){return r(n())}function o(){let s=n(),a=[];for(let c=0;c<s;c++)a.push(i());return a}return o()}function she(e){let t=e&Xn.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(e&31){case Xn.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case Xn.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case Xn.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE";break}return t}function k4(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=Xn.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n;let i=e,o=r;delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let s=i.__NON_WITNESS_UTXO_BUF_CACHE[o],a=i.__NON_WITNESS_UTXO_TX_CACHE[o];if(s!==void 0)return s;{let c=a.toBuffer();return i.__NON_WITNESS_UTXO_BUF_CACHE[o]=c,c}},set(s){i.__NON_WITNESS_UTXO_BUF_CACHE[o]=s}})}function IL(e,t,r,n){let i=0;e.forEach((c,u)=>{if(n&&c.finalScriptSig&&(t.ins[u].script=c.finalScriptSig),n&&c.finalScriptWitness&&(t.ins[u].witness=EL(c.finalScriptWitness)),c.witnessUtxo)i+=c.witnessUtxo.value;else if(c.nonWitnessUtxo){let h=Xv(r,c,u),l=t.ins[u].index,g=h.outs[l];i+=g.value}});let o=t.outs.reduce((c,u)=>c+u.value,0),s=i-o;if(s<0)throw new Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function Xv(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||k4(e,t,r),n[r]}function kL(e,t,r){let{script:n}=T4(e,t,r);return n}function T4(e,t,r){if(t.witnessUtxo!==void 0)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(t.nonWitnessUtxo!==void 0){let i=Xv(r,t,e).outs[r.__TX.ins[e].index];return{script:i.script,value:i.value}}else throw new Error("Can't find pubkey in input without Utxo data")}function ahe(e,t,r,n){let i=kL(r,t,n),{meaningfulScript:o}=e2(i,r,"input",t.redeemScript,t.witnessScript);return(0,on.pubkeyInScript)(e,o)}function che(e,t,r,n){let i=n.__TX.outs[r].script,{meaningfulScript:o}=e2(i,r,"output",t.redeemScript,t.witnessScript);return(0,on.pubkeyInScript)(e,o)}function uhe(e){if(!e)return;let t=Jc.decompile(e);if(!t)return;let r=t[t.length-1];if(!(!Buffer.isBuffer(r)||TL(r)||dhe(r)||!Jc.decompile(r)))return r}function fhe(e){if(!e)return;let t=EL(e),r=t[t.length-1];if(!(TL(r)||!Jc.decompile(r)))return r}function lhe(e){if(e.length===65){let t=e[64]&1,r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}function TL(e){return e.length===33&&Jc.isCanonicalPubKey(e)}function dhe(e){return Jc.isCanonicalScriptSignature(e)}function e2(e,t,r,n,i){let o=(0,on.isP2SHScript)(e),s=o&&n&&(0,on.isP2WSHScript)(n),a=(0,on.isP2WSHScript)(e);if(o&&n===void 0)throw new Error("scriptPubkey is P2SH but redeemScript missing");if((a||s)&&i===void 0)throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");let c;return s?(c=i,lL(t,e,n,r),dL(t,n,i,r),Qv(c)):a?(c=i,dL(t,e,i,r),Qv(c)):o?(c=n,lL(t,e,n,r)):c=e,{meaningfulScript:c,type:s?"p2sh-p2wsh":o?"p2sh":a?"p2wsh":"raw"}}function Qv(e){if((0,on.isP2WPKH)(e)||(0,on.isP2SHScript)(e))throw new Error("P2WPKH or P2SH can not be contained within P2WSH")}function PL(e){return(0,on.isP2WPKH)(e)?"witnesspubkeyhash":(0,on.isP2PKH)(e)?"pubkeyhash":(0,on.isP2MS)(e)?"multisig":(0,on.isP2PK)(e)?"pubkey":"nonstandard"}function ug(e){return[...Array(e).keys()]}});var fg=L(qr=>{"use strict";p();y();Object.defineProperty(qr,"__esModule",{value:!0});qr.initEccLib=qr.Transaction=qr.opcodes=qr.Psbt=qr.Block=qr.script=qr.payments=qr.networks=qr.crypto=qr.address=void 0;var hhe=jI();qr.address=hhe;var phe=Da();qr.crypto=phe;var yhe=ns();qr.networks=yhe;var mhe=T0();qr.payments=mhe;var ghe=Oi();qr.script=ghe;var bhe=ZU();Object.defineProperty(qr,"Block",{enumerable:!0,get:function(){return bhe.Block}});var xhe=_L();Object.defineProperty(qr,"Psbt",{enumerable:!0,get:function(){return xhe.Psbt}});var whe=ev();Object.defineProperty(qr,"opcodes",{enumerable:!0,get:function(){return whe.OPS}});var vhe=_0();Object.defineProperty(qr,"Transaction",{enumerable:!0,get:function(){return vhe.Transaction}});var Ahe=Tv();Object.defineProperty(qr,"initEccLib",{enumerable:!0,get:function(){return Ahe.initEccLib}})});var U0=L(b2=>{"use strict";p();y();Object.defineProperty(b2,"__esModule",{value:!0});b2.AppAuthError=void 0;var i0e=function(){function e(t,r){this.message=t,this.extras=r}return e}();b2.AppAuthError=i0e});var x2=L(Wa=>{"use strict";p();y();Object.defineProperty(Wa,"__esModule",{value:!0});Wa.DefaultCrypto=Wa.textEncodeLite=Wa.urlSafe=Wa.bufferToString=void 0;var o0e=K_(),wK=U0(),vK=typeof self<"u"&&!!self.crypto,s0e=vK&&!!self.crypto.subtle,Q4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function AK(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%Q4.length;t.push(Q4[n])}return t.join("")}Wa.bufferToString=AK;function SK(e){var t=o0e.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}Wa.urlSafe=SK;function EK(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}Wa.textEncodeLite=EK;var a0e=function(){function e(){}return e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if(vK)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*Q4.length|0;return AK(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new wK.AppAuthError("Invalid code length.")):s0e?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",EK(t)).then(function(i){return r(SK(new Uint8Array(i)))},function(i){return n(i)})}):Promise.reject(new wK.AppAuthError("window.crypto.subtle is unavailable."))},e}();Wa.DefaultCrypto=a0e});var X4=L(Io=>{"use strict";p();y();Object.defineProperty(Io,"__esModule",{value:!0});Io.IS_PROFILE=Io.IS_LOG=Io.setFlag=Io.Flags=void 0;Io.Flags={IS_LOG:!0,IS_PROFILE:!1};function c0e(e,t){Io.Flags[e]=t}Io.setFlag=c0e;Io.IS_LOG=Io.Flags.IS_LOG,Io.IS_PROFILE=Io.Flags.IS_PROFILE});var wg=L(Uf=>{"use strict";p();y();var ek=Uf&&Uf.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.profile=Uf.log=void 0;var IK=X4();function tk(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(IK.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,ek([e],t,!1)):console.log(e)}}Uf.log=tk;var u0e=typeof self<"u"&&!!self.performance&&!!console.profile;function f0e(e,t,r){return IK.Flags.IS_PROFILE?l0e(e,t,r):r}Uf.profile=f0e;function l0e(e,t,r){var n=r.value,i=n.name;return i||(i="anonymous function"),u0e?r.value=function(o){console.profile(i);var s=self.performance.now(),a=n.call.apply(n,ek([this||self],o,!1)),c=self.performance.now()-s;return console.log("".concat(i," took ").concat(c," ms")),console.profileEnd(),a}:r.value=function(o){tk("Profile start ".concat(i));var s=Date.now(),a=n.call.apply(n,ek([this||self],o,!1)),c=Date.now()-s;return tk("Profile end ".concat(i," took ").concat(c," ms.")),a},r}});var rk=L(w2=>{"use strict";p();y();Object.defineProperty(w2,"__esModule",{value:!0});w2.AuthorizationRequest=void 0;var d0e=x2(),h0e=wg(),p0e=10,y0e=function(e){return e.generateRandom(p0e)},m0e=function(){function e(t,r,n){r===void 0&&(r=new d0e.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||y0e(r),this.extras=t.extras,this.internal=t.internal}return e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(i){(0,h0e.log)("Unable to generate PKCE challenge. Not using PKCE",i)});return n.then(function(i){i&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=i,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();w2.AuthorizationRequest=m0e});var kK=L(v2=>{"use strict";p();y();Object.defineProperty(v2,"__esModule",{value:!0});v2.requireValidUrl=void 0;var g0e=U0();function b0e(e){try{return new URL(e),e}catch{throw new g0e.AppAuthError("Invalid input url ".concat(e))}}v2.requireValidUrl=b0e});var ik=L(eu=>{"use strict";p();y();Object.defineProperty(eu,"__esModule",{value:!0});eu.AuthorizationRequestHandler=eu.BUILT_IN_PARAMETERS=eu.AuthorizationNotifier=void 0;var nk=wg(),x0e=kK(),w0e=function(){function e(){this.listener=null}return e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();eu.AuthorizationNotifier=w0e;eu.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var v0e=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var i in r.extras)r.extras.hasOwnProperty(i)&&eu.BUILT_IN_PARAMETERS.indexOf(i)<0&&(n[i]=r.extras[i]);var o=this.utils.stringify(n),s=(0,x0e.requireValidUrl)(t.authorizationEndpoint),a="".concat(s,"?").concat(o);return a},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,nk.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,nk.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,nk.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();eu.AuthorizationRequestHandler=v0e});var ok=L(D0=>{"use strict";p();y();Object.defineProperty(D0,"__esModule",{value:!0});D0.AuthorizationError=D0.AuthorizationResponse=void 0;var A0e=function(){function e(t){this.code=t.code,this.state=t.state}return e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();D0.AuthorizationResponse=A0e;var S0e=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();D0.AuthorizationError=S0e});var S2=L(cs=>{"use strict";p();y();var ak=cs&&cs.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cs,"__esModule",{value:!0});cs.TestRequestor=cs.FetchRequestor=cs.JQueryRequestor=cs.Requestor=void 0;var sk=U0(),A2=function(){function e(){}return e}();cs.Requestor=A2;var E0e=function(e){ak(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(i,o){n.then(function(s,a,c){i(s)},function(s,a,c){o(new sk.AppAuthError(c))})})},t}(A2);cs.JQueryRequestor=E0e;var I0e=function(e){ak(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new sk.AppAuthError("A URL must be provided."));var n=new URL(r.url),i={};if(i.method=r.method,i.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")i.body=r.data;else{var o=new URLSearchParams(r.data);o.forEach(function(c,u){n.searchParams.append(u,c)})}if(i.headers={},r.headers)for(var s in r.headers)r.headers.hasOwnProperty(s)&&(i.headers[s]=r.headers[s]);var a=r.dataType&&r.dataType.toLowerCase()==="json";return a&&(i.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),i).then(function(c){if(c.status>=200&&c.status<300){var u=c.headers.get("content-type");return a||u&&u.indexOf("application/json")!==-1?c.json():c.text()}else return Promise.reject(new sk.AppAuthError(c.status.toString(),c.statusText))})},t}(A2);cs.FetchRequestor=I0e;var k0e=function(e){ak(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return t.prototype.xhr=function(r){return this.promise},t}(A2);cs.TestRequestor=k0e});var TK=L(E2=>{"use strict";p();y();Object.defineProperty(E2,"__esModule",{value:!0});E2.AuthorizationServiceConfiguration=void 0;var T0e=S2(),P0e=".well-known",_0e="openid-configuration",B0e=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(P0e,"/").concat(_0e),i=r||new T0e.JQueryRequestor;return i.xhr({url:n,dataType:"json",method:"GET"}).then(function(o){return new e(o)})},e}();E2.AuthorizationServiceConfiguration=B0e});var k2=L(I2=>{"use strict";p();y();Object.defineProperty(I2,"__esModule",{value:!0});I2.BasicQueryStringUtils=void 0;var C0e=function(){function e(){}return e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),i=0;i<n.length;i+=1){var o=n[i],s=o.split("=");if(s.length>=2){var a=decodeURIComponent(s.shift()),c=s.length>0?s.join("="):null;c&&(r[a]=decodeURIComponent(c))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();I2.BasicQueryStringUtils=C0e});var ck=L(Df=>{"use strict";p();y();var M0e=Df&&Df.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Df,"__esModule",{value:!0});Df.LocalStorageBackend=Df.StorageBackend=void 0;var PK=function(){function e(){}return e}();Df.StorageBackend=PK;var R0e=function(e){M0e(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return t.prototype.getItem=function(r){var n=this;return new Promise(function(i,o){var s=n.storage.getItem(r);i(s||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(i,o){n.storage.removeItem(r),i()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,i){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var i=this;return new Promise(function(o,s){i.storage.setItem(r,n),o()})},t}(PK);Df.LocalStorageBackend=R0e});var CK=L(L0=>{"use strict";p();y();var O0e=L0&&L0.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(L0,"__esModule",{value:!0});L0.RedirectRequestHandler=void 0;var N0e=rk(),U0e=ik(),_K=ok(),D0e=x2(),T2=wg(),L0e=k2(),K0e=ck(),uk=function(e){return"".concat(e,"_appauth_authorization_request")},BK=function(e){return"".concat(e,"_appauth_authorization_service_configuration")},fk="appauth_current_authorization_request",F0e=function(e){O0e(t,e);function t(r,n,i,o){r===void 0&&(r=new K0e.LocalStorageBackend),n===void 0&&(n=new L0e.BasicQueryStringUtils),i===void 0&&(i=self.location),o===void 0&&(o=new D0e.DefaultCrypto);var s=e.call(this,n,o)||this;return s.storageBackend=r,s.locationLike=i,s}return t.prototype.performAuthorizationRequest=function(r,n){var i=this,o=this.crypto.generateRandom(10),s=Promise.all([this.storageBackend.setItem(fk,o),n.toJson().then(function(a){return i.storageBackend.setItem(uk(o),JSON.stringify(a))}),this.storageBackend.setItem(BK(o),JSON.stringify(r.toJson()))]);s.then(function(){var a=i.buildRequestUrl(r,n);(0,T2.log)("Making a request to ",n,a),i.locationLike.assign(a)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(fk).then(function(n){return n?r.storageBackend.getItem(uk(n)).then(function(i){return JSON.parse(i)}).then(function(i){return new N0e.AuthorizationRequest(i)}).then(function(i){var o="".concat(r.locationLike.origin).concat(r.locationLike.pathname),s=r.utils.parse(r.locationLike,!0),a=s.state,c=s.code,u=s.error;(0,T2.log)("Potential authorization request ",o,s,a,c,u);var h=a===i.state,l=null,g=null;if(h){if(u){var x=s.error_uri,A=s.error_description;g=new _K.AuthorizationError({error:u,error_description:A,error_uri:x,state:a})}else l=new _K.AuthorizationResponse({code:c,state:a});return Promise.all([r.storageBackend.removeItem(fk),r.storageBackend.removeItem(uk(n)),r.storageBackend.removeItem(BK(n))]).then(function(){return(0,T2.log)("Delivering authorization response"),{request:i,response:l,error:g}})}else return(0,T2.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(U0e.AuthorizationRequestHandler);L0.RedirectRequestHandler=F0e});var MK=L(P2=>{"use strict";p();y();Object.defineProperty(P2,"__esModule",{value:!0});P2.RevokeTokenRequest=void 0;var V0e=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();P2.RevokeTokenRequest=V0e});var RK=L(Lf=>{"use strict";p();y();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.TokenRequest=Lf.GRANT_TYPE_REFRESH_TOKEN=Lf.GRANT_TYPE_AUTHORIZATION_CODE=void 0;Lf.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";Lf.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var q0e=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();Lf.TokenRequest=q0e});var lk=L(za=>{"use strict";p();y();Object.defineProperty(za,"__esModule",{value:!0});za.TokenError=za.TokenResponse=za.nowInSeconds=void 0;var H0e=10*60*-1,W0e=function(){return Math.round(new Date().getTime()/1e3)};za.nowInSeconds=W0e;var z0e=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,za.nowInSeconds)()}return e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=H0e),this.expiresIn){var r=(0,za.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();za.TokenResponse=z0e;var j0e=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();za.TokenError=j0e});var NK=L(_2=>{"use strict";p();y();Object.defineProperty(_2,"__esModule",{value:!0});_2.BaseTokenRequestHandler=void 0;var G0e=U0(),$0e=k2(),OK=lk(),Y0e=S2(),J0e=function(){function e(t,r){t===void 0&&(t=new Y0e.JQueryRequestor),r===void 0&&(r=new $0e.BasicQueryStringUtils),this.requestor=t,this.utils=r}return e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(i){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,i=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(o){return n.isTokenResponse(o)?new OK.TokenResponse(o):Promise.reject(new G0e.AppAuthError(o.error,new OK.TokenError(o)))})},e}();_2.BaseTokenRequestHandler=J0e});var DK=L(UK=>{"use strict";p();y();Object.defineProperty(UK,"__esModule",{value:!0})});var dk=L(Ur=>{"use strict";p();y();var Z0e=Ur&&Ur.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ri=Ur&&Ur.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Z0e(t,e,r)};Object.defineProperty(Ur,"__esModule",{value:!0});ri(rk(),Ur);ri(ik(),Ur);ri(ok(),Ur);ri(TK(),Ur);ri(x2(),Ur);ri(U0(),Ur);ri(X4(),Ur);ri(wg(),Ur);ri(k2(),Ur);ri(CK(),Ur);ri(MK(),Ur);ri(ck(),Ur);ri(RK(),Ur);ri(NK(),Ur);ri(lk(),Ur);ri(DK(),Ur);ri(S2(),Ur)});var BV=L((Wg,ip)=>{p();y();var gme=200,eV="__lodash_hash_undefined__",tV=9007199254740991,bT="[object Arguments]",bme="[object Array]",rV="[object Boolean]",nV="[object Date]",xme="[object Error]",xT="[object Function]",iV="[object GeneratorFunction]",j2="[object Map]",oV="[object Number]",wT="[object Object]",HF="[object Promise]",sV="[object RegExp]",G2="[object Set]",aV="[object String]",cV="[object Symbol]",dT="[object WeakMap]",uV="[object ArrayBuffer]",$2="[object DataView]",fV="[object Float32Array]",lV="[object Float64Array]",dV="[object Int8Array]",hV="[object Int16Array]",pV="[object Int32Array]",yV="[object Uint8Array]",mV="[object Uint8ClampedArray]",gV="[object Uint16Array]",bV="[object Uint32Array]",wme=/[\\^$.*+?()[\]{}|]/g,vme=/\w*$/,Ame=/^\[object .+?Constructor\]$/,Sme=/^(?:0|[1-9]\d*)$/,sr={};sr[bT]=sr[bme]=sr[uV]=sr[$2]=sr[rV]=sr[nV]=sr[fV]=sr[lV]=sr[dV]=sr[hV]=sr[pV]=sr[j2]=sr[oV]=sr[wT]=sr[sV]=sr[G2]=sr[aV]=sr[cV]=sr[yV]=sr[mV]=sr[gV]=sr[bV]=!0;sr[xme]=sr[xT]=sr[dT]=!1;var Eme=typeof self=="object"&&self&&self.Object===Object&&self,Ime=typeof self=="object"&&self&&self.Object===Object&&self,su=Eme||Ime||Function("return this")(),xV=typeof Wg=="object"&&Wg&&!Wg.nodeType&&Wg,WF=xV&&typeof ip=="object"&&ip&&!ip.nodeType&&ip,kme=WF&&WF.exports===xV;function Tme(e,t){return e.set(t[0],t[1]),e}function Pme(e,t){return e.add(t),e}function _me(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function Bme(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function wV(e,t,r,n){var i=-1,o=e?e.length:0;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function Cme(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Mme(e,t){return e?.[t]}function vV(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function zF(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function vT(e,t){return function(r){return e(t(r))}}function jF(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Rme=Array.prototype,Ome=Function.prototype,Y2=Object.prototype,lT=su["__core-js_shared__"],GF=function(){var e=/[^.]+$/.exec(lT&&lT.keys&&lT.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),AV=Ome.toString,Hf=Y2.hasOwnProperty,J2=Y2.toString,Nme=RegExp("^"+AV.call(Hf).replace(wme,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$F=kme?su.Buffer:void 0,YF=su.Symbol,JF=su.Uint8Array,Ume=vT(Object.getPrototypeOf,Object),Dme=Object.create,Lme=Y2.propertyIsEnumerable,Kme=Rme.splice,ZF=Object.getOwnPropertySymbols,Fme=$F?$F.isBuffer:void 0,Vme=vT(Object.keys,Object),hT=ap(su,"DataView"),zg=ap(su,"Map"),pT=ap(su,"Promise"),yT=ap(su,"Set"),mT=ap(su,"WeakMap"),jg=ap(Object,"create"),qme=Td(hT),Hme=Td(zg),Wme=Td(pT),zme=Td(yT),jme=Td(mT),QF=YF?YF.prototype:void 0,XF=QF?QF.valueOf:void 0;function kd(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gme(){this.__data__=jg?jg(null):{}}function $me(e){return this.has(e)&&delete this.__data__[e]}function Yme(e){var t=this.__data__;if(jg){var r=t[e];return r===eV?void 0:r}return Hf.call(t,e)?t[e]:void 0}function Jme(e){var t=this.__data__;return jg?t[e]!==void 0:Hf.call(t,e)}function Zme(e,t){var r=this.__data__;return r[e]=jg&&t===void 0?eV:t,this}kd.prototype.clear=Gme;kd.prototype.delete=$me;kd.prototype.get=Yme;kd.prototype.has=Jme;kd.prototype.set=Zme;function au(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Qme(){this.__data__=[]}function Xme(e){var t=this.__data__,r=Z2(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Kme.call(t,r,1),!0}function ege(e){var t=this.__data__,r=Z2(t,e);return r<0?void 0:t[r][1]}function tge(e){return Z2(this.__data__,e)>-1}function rge(e,t){var r=this.__data__,n=Z2(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}au.prototype.clear=Qme;au.prototype.delete=Xme;au.prototype.get=ege;au.prototype.has=tge;au.prototype.set=rge;function op(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function nge(){this.__data__={hash:new kd,map:new(zg||au),string:new kd}}function ige(e){return Q2(this,e).delete(e)}function oge(e){return Q2(this,e).get(e)}function sge(e){return Q2(this,e).has(e)}function age(e,t){return Q2(this,e).set(e,t),this}op.prototype.clear=nge;op.prototype.delete=ige;op.prototype.get=oge;op.prototype.has=sge;op.prototype.set=age;function sp(e){this.__data__=new au(e)}function cge(){this.__data__=new au}function uge(e){return this.__data__.delete(e)}function fge(e){return this.__data__.get(e)}function lge(e){return this.__data__.has(e)}function dge(e,t){var r=this.__data__;if(r instanceof au){var n=r.__data__;if(!zg||n.length<gme-1)return n.push([e,t]),this;r=this.__data__=new op(n)}return r.set(e,t),this}sp.prototype.clear=cge;sp.prototype.delete=uge;sp.prototype.get=fge;sp.prototype.has=lge;sp.prototype.set=dge;function hge(e,t){var r=ST(e)||Dge(e)?Cme(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||Hf.call(e,o))&&!(i&&(o=="length"||Rge(o,n)))&&r.push(o);return r}function SV(e,t,r){var n=e[t];(!(Hf.call(e,t)&&TV(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}function Z2(e,t){for(var r=e.length;r--;)if(TV(e[r][0],t))return r;return-1}function pge(e,t){return e&&EV(t,ET(t),e)}function gT(e,t,r,n,i,o,s){var a;if(n&&(a=o?n(e,i,o,s):n(e)),a!==void 0)return a;if(!X2(e))return e;var c=ST(e);if(c){if(a=Bge(e),!t)return Tge(e,a)}else{var u=Id(e),h=u==xT||u==iV;if(Kge(e))return wge(e,t);if(u==wT||u==bT||h&&!o){if(vV(e))return o?e:{};if(a=Cge(h?{}:e),!t)return Pge(e,pge(a,e))}else{if(!sr[u])return o?e:{};a=Mge(e,u,gT,t)}}s||(s=new sp);var l=s.get(e);if(l)return l;if(s.set(e,a),!c)var g=r?_ge(e):ET(e);return _me(g||e,function(x,A){g&&(A=x,x=e[A]),SV(a,A,gT(x,t,r,n,A,e,s))}),a}function yge(e){return X2(e)?Dme(e):{}}function mge(e,t,r){var n=t(e);return ST(e)?n:Bme(n,r(e))}function gge(e){return J2.call(e)}function bge(e){if(!X2(e)||Nge(e))return!1;var t=_V(e)||vV(e)?Nme:Ame;return t.test(Td(e))}function xge(e){if(!kV(e))return Vme(e);var t=[];for(var r in Object(e))Hf.call(e,r)&&r!="constructor"&&t.push(r);return t}function wge(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function AT(e){var t=new e.constructor(e.byteLength);return new JF(t).set(new JF(e)),t}function vge(e,t){var r=t?AT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Age(e,t,r){var n=t?r(zF(e),!0):zF(e);return wV(n,Tme,new e.constructor)}function Sge(e){var t=new e.constructor(e.source,vme.exec(e));return t.lastIndex=e.lastIndex,t}function Ege(e,t,r){var n=t?r(jF(e),!0):jF(e);return wV(n,Pme,new e.constructor)}function Ige(e){return XF?Object(XF.call(e)):{}}function kge(e,t){var r=t?AT(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Tge(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function EV(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=n?n(r[s],e[s],s,r,e):void 0;SV(r,s,a===void 0?e[s]:a)}return r}function Pge(e,t){return EV(e,IV(e),t)}function _ge(e){return mge(e,ET,IV)}function Q2(e,t){var r=e.__data__;return Oge(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ap(e,t){var r=Mme(e,t);return bge(r)?r:void 0}var IV=ZF?vT(ZF,Object):qge,Id=gge;(hT&&Id(new hT(new ArrayBuffer(1)))!=$2||zg&&Id(new zg)!=j2||pT&&Id(pT.resolve())!=HF||yT&&Id(new yT)!=G2||mT&&Id(new mT)!=dT)&&(Id=function(e){var t=J2.call(e),r=t==wT?e.constructor:void 0,n=r?Td(r):void 0;if(n)switch(n){case qme:return $2;case Hme:return j2;case Wme:return HF;case zme:return G2;case jme:return dT}return t});function Bge(e){var t=e.length,r=e.constructor(t);return t&&typeof e[0]=="string"&&Hf.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function Cge(e){return typeof e.constructor=="function"&&!kV(e)?yge(Ume(e)):{}}function Mge(e,t,r,n){var i=e.constructor;switch(t){case uV:return AT(e);case rV:case nV:return new i(+e);case $2:return vge(e,n);case fV:case lV:case dV:case hV:case pV:case yV:case mV:case gV:case bV:return kge(e,n);case j2:return Age(e,n,r);case oV:case aV:return new i(e);case sV:return Sge(e);case G2:return Ege(e,n,r);case cV:return Ige(e)}}function Rge(e,t){return t=t??tV,!!t&&(typeof e=="number"||Sme.test(e))&&e>-1&&e%1==0&&e<t}function Oge(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Nge(e){return!!GF&&GF in e}function kV(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Y2;return e===r}function Td(e){if(e!=null){try{return AV.call(e)}catch{}try{return e+""}catch{}}return""}function Uge(e){return gT(e,!0,!0)}function TV(e,t){return e===t||e!==e&&t!==t}function Dge(e){return Lge(e)&&Hf.call(e,"callee")&&(!Lme.call(e,"callee")||J2.call(e)==bT)}var ST=Array.isArray;function PV(e){return e!=null&&Fge(e.length)&&!_V(e)}function Lge(e){return Vge(e)&&PV(e)}var Kge=Fme||Hge;function _V(e){var t=X2(e)?J2.call(e):"";return t==xT||t==iV}function Fge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tV}function X2(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Vge(e){return!!e&&typeof e=="object"}function ET(e){return PV(e)?hge(e):xge(e)}function qge(){return[]}function Hge(){return!1}ip.exports=Uge});var fH=L((lQe,uH)=>{p();y();var Vt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function ls(e,t){if(!e)throw new Error(t)}function Rt(e,t,r){if(ls(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;ls(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;ls(t.length===r,n)}}function Ud(e){ls(vp(e)==="Boolean","Expected compressed to be a Boolean")}function oa(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),Rt("output",e,t),e}function vp(e){return Object.prototype.toString.call(e).slice(8,-1)}uH.exports=e=>({contextRandomize(t){switch(ls(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&Rt("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(Vt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return Rt("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(Rt("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(Vt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(Rt("private key",t,32),Rt("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(Vt.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(Rt("private key",t,32),Rt("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(Vt.TWEAK_MUL)}},publicKeyVerify(t){return Rt("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(Rt("private key",t,32),Ud(r),n=oa(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(Vt.SECKEY_INVALID);case 2:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(Rt("public key",t,[33,65]),Ud(r),n=oa(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(Rt("public key",t,[33,65]),Ud(r),n=oa(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE);case 3:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){ls(Array.isArray(t),"Expected public keys to be an Array"),ls(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)Rt("public key",i,[33,65]);switch(Ud(r),n=oa(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.PUBKEY_COMBINE);case 3:throw new Error(Vt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch(Rt("public key",t,[33,65]),Rt("tweak",r,32),Ud(n),i=oa(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch(Rt("public key",t,[33,65]),Rt("tweak",r,32),Ud(n),i=oa(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.TWEAK_MUL)}},signatureNormalize(t){switch(Rt("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(Vt.SIG_PARSE)}},signatureExport(t,r){Rt("signature",t,64),r=oa(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(Rt("signature",t),r=oa(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){Rt("message",t,32),Rt("private key",r,32),ls(vp(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Rt("options.data",n.data),n.noncefn!==void 0&&ls(vp(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=oa(i,64);let o={signature:i,recid:null};switch(e.ecdsaSign(o,t,r,n.data,n.noncefn)){case 0:return o;case 1:throw new Error(Vt.SIGN);case 2:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(Rt("signature",t,64),Rt("message",r,32),Rt("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,o){switch(Rt("signature",t,64),ls(vp(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Rt("message",n,32),Ud(i),o=oa(o,i?33:65),e.ecdsaRecover(o,t,r,n)){case 0:return o;case 1:throw new Error(Vt.SIG_PARSE);case 2:throw new Error(Vt.RECOVER);case 3:throw new Error(Vt.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch(Rt("public key",t,[33,65]),Rt("private key",r,32),ls(vp(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Rt("options.data",n.data),n.hashfn!==void 0?(ls(vp(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Rt("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Rt("options.ybuf",n.ybuf,32),Rt("output",i)):i=oa(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(Vt.PUBKEY_PARSE);case 2:throw new Error(Vt.ECDH)}}})});var dH=L((pQe,lH)=>{p();y();var awe=j_().ec,ec=new awe("secp256k1"),Bt=ec.curve,er=Bt.n.constructor;function cwe(e,t){let r=new er(t);if(r.cmp(Bt.p)>=0)return null;r=r.toRed(Bt.red);let n=r.redSqr().redIMul(r).redIAdd(Bt.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),ec.keyPair({pub:{x:r,y:n}})}function uwe(e,t,r){let n=new er(t),i=new er(r);if(n.cmp(Bt.p)>=0||i.cmp(Bt.p)>=0||(n=n.toRed(Bt.red),i=i.toRed(Bt.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let o=n.redSqr().redIMul(n);return i.redSqr().redISub(o.redIAdd(Bt.b)).isZero()?ec.keyPair({pub:{x:n,y:i}}):null}function Zf(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:cwe(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:uwe(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function Dd(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}lH.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new er(e);return t.cmp(Bt.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new er(e),r=Bt.n.sub(t).umod(Bt.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new er(t);if(r.cmp(Bt.n)>=0||(r.iadd(new er(e)),r.cmp(Bt.n)>=0&&r.isub(Bt.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new er(t);if(r.cmp(Bt.n)>=0||r.isZero())return 1;r.imul(new er(e)),r.cmp(Bt.n)>=0&&(r=r.umod(Bt.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return Zf(e)===null?1:0},publicKeyCreate(e,t){let r=new er(t);if(r.cmp(Bt.n)>=0||r.isZero())return 1;let n=ec.keyFromPrivate(t).getPublic();return Dd(e,n),0},publicKeyConvert(e,t){let r=Zf(t);if(r===null)return 1;let n=r.getPublic();return Dd(e,n),0},publicKeyNegate(e,t){let r=Zf(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),Dd(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=Zf(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Dd(e,n),0)},publicKeyTweakAdd(e,t,r){let n=Zf(t);if(n===null)return 1;if(r=new er(r),r.cmp(Bt.n)>=0)return 2;let i=n.getPublic().add(Bt.g.mul(r));return i.isInfinity()?2:(Dd(e,i),0)},publicKeyTweakMul(e,t,r){let n=Zf(t);if(n===null)return 1;if(r=new er(r),r.cmp(Bt.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return Dd(e,i),0},signatureNormalize(e){let t=new er(e.subarray(0,32)),r=new er(e.subarray(32,64));return t.cmp(Bt.n)>=0||r.cmp(Bt.n)>=0?1:(r.cmp(ec.nh)===1&&e.set(Bt.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new er(r).cmp(Bt.n)>=0||new er(n).cmp(Bt.n)>=0)return 1;let{output:i}=e,o=i.subarray(4,37);o[0]=0,o.set(r,1);let s=33,a=0;for(;s>1&&o[a]===0&&!(o[a+1]&128);--s,++a);if(o=o.subarray(a),o[0]&128||s>1&&o[0]===0&&!(o[1]&128))return 1;let c=i.subarray(39,72);c[0]=0,c.set(n,1);let u=33,h=0;for(;u>1&&c[h]===0&&!(c[h+1]&128);--u,++h);return c=c.subarray(h),c[0]&128||u>1&&c[0]===0&&!(c[1]&128)?1:(e.outputlen=6+s+u,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=o.length,i.set(o,4),i[4+s]=2,i[5+s]=c.length,i.set(c,6+s),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let o=t.subarray(6+r);if(o.length===33&&o[0]===0&&(o=o.slice(1)),o.length>32)throw new Error("S length is too long");let s=new er(i);s.cmp(Bt.n)>=0&&(s=new er(0));let a=new er(t.subarray(6+r));return a.cmp(Bt.n)>=0&&(a=new er(0)),e.set(s.toArrayLike(Uint8Array,"be",32),0),e.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let a=i;i=c=>{let u=a(t,r,null,n,c);if(!(u instanceof Uint8Array&&u.length===32))throw new Error("This is the way");return new er(u)}}let o=new er(r);if(o.cmp(Bt.n)>=0||o.isZero())return 1;let s;try{s=ec.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(s.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(s.s.toArrayLike(Uint8Array,"be",32),32),e.recid=s.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new er(n.r),o=new er(n.s);if(i.cmp(Bt.n)>=0||o.cmp(Bt.n)>=0)return 1;if(o.cmp(ec.nh)===1||i.isZero()||o.isZero())return 3;let s=Zf(r);if(s===null)return 2;let a=s.getPublic();return ec.verify(t,n,a)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},o=new er(i.r),s=new er(i.s);if(o.cmp(Bt.n)>=0||s.cmp(Bt.n)>=0)return 1;if(o.isZero()||s.isZero())return 2;let a;try{a=ec.recoverPubKey(n,i,r)}catch{return 2}return Dd(e,a),0},ecdh(e,t,r,n,i,o,s){let a=Zf(t);if(a===null)return 1;let c=new er(r);if(c.cmp(Bt.n)>=0||c.isZero())return 2;let u=a.getPublic().mul(c);if(i===void 0){let h=u.encode(null,!0),l=ec.hash().update(h).digest();for(let g=0;g<32;++g)e[g]=l[g]}else{o||(o=new Uint8Array(32));let h=u.getX().toArray("be",32);for(let A=0;A<32;++A)o[A]=h[A];s||(s=new Uint8Array(32));let l=u.getY().toArray("be",32);for(let A=0;A<32;++A)s[A]=l[A];let g=i(o,s,n);if(!(g instanceof Uint8Array&&g.length===e.length))return 2;e.set(g)}return 0}}});var IP=L((gQe,hH)=>{p();y();hH.exports=fH()(dH())});var yH=L(zA=>{"use strict";p();y();Object.defineProperty(zA,"__esModule",{value:!0});var pH=V_();function fwe(e){return new Promise(function(t,r){pH(e,function(n,i){if(n){r(n);return}t(i)})})}zA.getRandomBytes=fwe;function lwe(e){return pH(e)}zA.getRandomBytesSync=lwe});var xH=L(tc=>{"use strict";p();y();var dwe=tc&&tc.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},hwe=tc&&tc.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(h){u=[6,h],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};function pwe(e){for(var t in e)tc.hasOwnProperty(t)||(tc[t]=e[t])}Object.defineProperty(tc,"__esModule",{value:!0});var mH=IP(),gH=yH(),bH=32;function ywe(){return dwe(this,void 0,void 0,function(){var e;return hwe(this,function(t){switch(t.label){case 0:return[4,gH.getRandomBytes(bH)];case 1:return e=t.sent(),mH.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}tc.createPrivateKey=ywe;function mwe(){for(;;){var e=gH.getRandomBytesSync(bH);if(mH.privateKeyVerify(e))return e}}tc.createPrivateKeySync=mwe;pwe(IP())});var Ld=L((wH,kP)=>{p();y();(function(e,t){"use strict";function r(_,f){if(!_)throw new Error(f||"Assertion failed")}function n(_,f){_.super_=f;var m=function(){};m.prototype=f.prototype,_.prototype=new m,_.prototype.constructor=_}function i(_,f,m){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((f==="le"||f==="be")&&(m=f,f=10),this._init(_||0,f||10,m||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=W_().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,m){return f.cmp(m)>0?f:m},i.min=function(f,m){return f.cmp(m)<0?f:m},i.prototype._init=function(f,m,b){if(typeof f=="number")return this._initNumber(f,m,b);if(typeof f=="object")return this._initArray(f,m,b);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),f=f.toString().replace(/\s+/g,"");var w=0;f[0]==="-"&&(w++,this.negative=1),w<f.length&&(m===16?this._parseHex(f,w,b):(this._parseBase(f,m,w),b==="le"&&this._initArray(this.toArray(),m,b)))},i.prototype._initNumber=function(f,m,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),m,b)},i.prototype._initArray=function(f,m,b){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v,P,B=0;if(b==="be")for(w=f.length-1,v=0;w>=0;w-=3)P=f[w]|f[w-1]<<8|f[w-2]<<16,this.words[v]|=P<<B&67108863,this.words[v+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,v++);else if(b==="le")for(w=0,v=0;w<f.length;w+=3)P=f[w]|f[w+1]<<8|f[w+2]<<16,this.words[v]|=P<<B&67108863,this.words[v+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,v++);return this.strip()};function s(_,f){var m=_.charCodeAt(f);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function a(_,f,m){var b=s(_,m);return m-1>=f&&(b|=s(_,m-1)<<4),b}i.prototype._parseHex=function(f,m,b){this.length=Math.ceil((f.length-m)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v=0,P=0,B;if(b==="be")for(w=f.length-1;w>=m;w-=2)B=a(f,m,w)<<v,this.words[P]|=B&67108863,v>=18?(v-=18,P+=1,this.words[P]|=B>>>26):v+=8;else{var k=f.length-m;for(w=k%2===0?m+1:m;w<f.length;w+=2)B=a(f,m,w)<<v,this.words[P]|=B&67108863,v>=18?(v-=18,P+=1,this.words[P]|=B>>>26):v+=8}this.strip()};function c(_,f,m,b){for(var w=0,v=Math.min(_.length,m),P=f;P<v;P++){var B=_.charCodeAt(P)-48;w*=b,B>=49?w+=B-49+10:B>=17?w+=B-17+10:w+=B}return w}i.prototype._parseBase=function(f,m,b){this.words=[0],this.length=1;for(var w=0,v=1;v<=67108863;v*=m)w++;w--,v=v/m|0;for(var P=f.length-b,B=P%w,k=Math.min(P,P-B)+b,d=0,S=b;S<k;S+=w)d=c(f,S,S+w,m),this.imuln(v),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(B!==0){var F=1;for(d=c(f,S,f.length,m),S=0;S<B;S++)F*=m;this.imuln(F),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var m=0;m<this.length;m++)f.words[m]=this.words[m];f.length=this.length,f.negative=this.negative,f.red=this.red},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,m){f=f||10,m=m|0||1;var b;if(f===16||f==="hex"){b="";for(var w=0,v=0,P=0;P<this.length;P++){var B=this.words[P],k=((B<<w|v)&16777215).toString(16);v=B>>>24-w&16777215,v!==0||P!==this.length-1?b=u[6-k.length]+k+b:b=k+b,w+=2,w>=26&&(w-=26,P--)}for(v!==0&&(b=v.toString(16)+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var d=h[f],S=l[f];b="";var F=this.clone();for(F.negative=0;!F.isZero();){var U=F.modn(S).toString(f);F=F.idivn(S),F.isZero()?b=U+b:b=u[d-U.length]+U+b}for(this.isZero()&&(b="0"+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(f,m){return r(typeof o<"u"),this.toArrayLike(o,f,m)},i.prototype.toArray=function(f,m){return this.toArrayLike(Array,f,m)},i.prototype.toArrayLike=function(f,m,b){var w=this.byteLength(),v=b||Math.max(1,w);r(w<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var P=m==="le",B=new f(v),k,d,S=this.clone();if(P){for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[d]=k;for(;d<v;d++)B[d]=0}else{for(d=0;d<v-w;d++)B[d]=0;for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[v-d-1]=k}return B},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var m=f,b=0;return m>=4096&&(b+=13,m>>>=13),m>=64&&(b+=7,m>>>=7),m>=8&&(b+=4,m>>>=4),m>=2&&(b+=2,m>>>=2),b+m},i.prototype._zeroBits=function(f){if(f===0)return 26;var m=f,b=0;return m&8191||(b+=13,m>>>=13),m&127||(b+=7,m>>>=7),m&15||(b+=4,m>>>=4),m&3||(b+=2,m>>>=2),m&1||b++,b},i.prototype.bitLength=function(){var f=this.words[this.length-1],m=this._countBits(f);return(this.length-1)*26+m};function g(_){for(var f=new Array(_.bitLength()),m=0;m<f.length;m++){var b=m/26|0,w=m%26;f[m]=(_.words[b]&1<<w)>>>w}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,m=0;m<this.length;m++){var b=this._zeroBits(this.words[m]);if(f+=b,b!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]|f.words[m];return this.strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var m;this.length>f.length?m=f:m=this;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=m.length,this.strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var m,b;this.length>f.length?(m=this,b=f):(m=f,b=this);for(var w=0;w<b.length;w++)this.words[w]=m.words[w]^b.words[w];if(this!==m)for(;w<m.length;w++)this.words[w]=m.words[w];return this.length=m.length,this.strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var m=Math.ceil(f/26)|0,b=f%26;this._expand(m),b>0&&m--;for(var w=0;w<m;w++)this.words[w]=~this.words[w]&67108863;return b>0&&(this.words[w]=~this.words[w]&67108863>>26-b),this.strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,m){r(typeof f=="number"&&f>=0);var b=f/26|0,w=f%26;return this._expand(b+1),m?this.words[b]=this.words[b]|1<<w:this.words[b]=this.words[b]&~(1<<w),this.strip()},i.prototype.iadd=function(f){var m;if(this.negative!==0&&f.negative===0)return this.negative=0,m=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,m=this.isub(f),f.negative=1,m._normSign();var b,w;this.length>f.length?(b=this,w=f):(b=f,w=this);for(var v=0,P=0;P<w.length;P++)m=(b.words[P]|0)+(w.words[P]|0)+v,this.words[P]=m&67108863,v=m>>>26;for(;v!==0&&P<b.length;P++)m=(b.words[P]|0)+v,this.words[P]=m&67108863,v=m>>>26;if(this.length=b.length,v!==0)this.words[this.length]=v,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},i.prototype.add=function(f){var m;return f.negative!==0&&this.negative===0?(f.negative=0,m=this.sub(f),f.negative^=1,m):f.negative===0&&this.negative!==0?(this.negative=0,m=f.sub(this),this.negative=1,m):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var m=this.iadd(f);return f.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,v;b>0?(w=this,v=f):(w=f,v=this);for(var P=0,B=0;B<v.length;B++)m=(w.words[B]|0)-(v.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;for(;P!==0&&B<w.length;B++)m=(w.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;if(P===0&&B<w.length&&w!==this)for(;B<w.length;B++)this.words[B]=w.words[B];return this.length=Math.max(this.length,B),w!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function x(_,f,m){m.negative=f.negative^_.negative;var b=_.length+f.length|0;m.length=b,b=b-1|0;var w=_.words[0]|0,v=f.words[0]|0,P=w*v,B=P&67108863,k=P/67108864|0;m.words[0]=B;for(var d=1;d<b;d++){for(var S=k>>>26,F=k&67108863,U=Math.min(d,f.length-1),D=Math.max(0,d-_.length+1);D<=U;D++){var Y=d-D|0;w=_.words[Y]|0,v=f.words[D]|0,P=w*v+F,S+=P/67108864|0,F=P&67108863}m.words[d]=F|0,k=S|0}return k!==0?m.words[d]=k|0:m.length--,m.strip()}var A=function(f,m,b){var w=f.words,v=m.words,P=b.words,B=0,k,d,S,F=w[0]|0,U=F&8191,D=F>>>13,Y=w[1]|0,j=Y&8191,X=Y>>>13,fe=w[2]|0,ue=fe&8191,K=fe>>>13,Z=w[3]|0,J=Z&8191,ne=Z>>>13,pe=w[4]|0,re=pe&8191,ae=pe>>>13,ut=w[5]|0,Ee=ut&8191,_e=ut>>>13,Lo=w[6]|0,Oe=Lo&8191,Be=Lo>>>13,ya=w[7]|0,Ce=ya&8191,nt=ya>>>13,gu=w[8]|0,it=gu&8191,ot=gu>>>13,dc=w[9]|0,Ne=dc&8191,Ue=dc>>>13,hc=v[0]|0,De=hc&8191,Le=hc>>>13,pc=v[1]|0,Ke=pc&8191,Fe=pc>>>13,yc=v[2]|0,Ve=yc&8191,qe=yc>>>13,mc=v[3]|0,He=mc&8191,We=mc>>>13,gc=v[4]|0,ze=gc&8191,je=gc>>>13,bc=v[5]|0,Ge=bc&8191,$e=bc>>>13,xc=v[6]|0,Ye=xc&8191,Je=xc>>>13,wc=v[7]|0,Ze=wc&8191,Qe=wc>>>13,vc=v[8]|0,Xe=vc&8191,et=vc>>>13,Ac=v[9]|0,tt=Ac&8191,rt=Ac>>>13;b.negative=f.negative^m.negative,b.length=19,k=Math.imul(U,De),d=Math.imul(U,Le),d=d+Math.imul(D,De)|0,S=Math.imul(D,Le);var bs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(bs>>>26)|0,bs&=67108863,k=Math.imul(j,De),d=Math.imul(j,Le),d=d+Math.imul(X,De)|0,S=Math.imul(X,Le),k=k+Math.imul(U,Ke)|0,d=d+Math.imul(U,Fe)|0,d=d+Math.imul(D,Ke)|0,S=S+Math.imul(D,Fe)|0;var xs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(ue,De),d=Math.imul(ue,Le),d=d+Math.imul(K,De)|0,S=Math.imul(K,Le),k=k+Math.imul(j,Ke)|0,d=d+Math.imul(j,Fe)|0,d=d+Math.imul(X,Ke)|0,S=S+Math.imul(X,Fe)|0,k=k+Math.imul(U,Ve)|0,d=d+Math.imul(U,qe)|0,d=d+Math.imul(D,Ve)|0,S=S+Math.imul(D,qe)|0;var ws=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,k=Math.imul(J,De),d=Math.imul(J,Le),d=d+Math.imul(ne,De)|0,S=Math.imul(ne,Le),k=k+Math.imul(ue,Ke)|0,d=d+Math.imul(ue,Fe)|0,d=d+Math.imul(K,Ke)|0,S=S+Math.imul(K,Fe)|0,k=k+Math.imul(j,Ve)|0,d=d+Math.imul(j,qe)|0,d=d+Math.imul(X,Ve)|0,S=S+Math.imul(X,qe)|0,k=k+Math.imul(U,He)|0,d=d+Math.imul(U,We)|0,d=d+Math.imul(D,He)|0,S=S+Math.imul(D,We)|0;var vs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,k=Math.imul(re,De),d=Math.imul(re,Le),d=d+Math.imul(ae,De)|0,S=Math.imul(ae,Le),k=k+Math.imul(J,Ke)|0,d=d+Math.imul(J,Fe)|0,d=d+Math.imul(ne,Ke)|0,S=S+Math.imul(ne,Fe)|0,k=k+Math.imul(ue,Ve)|0,d=d+Math.imul(ue,qe)|0,d=d+Math.imul(K,Ve)|0,S=S+Math.imul(K,qe)|0,k=k+Math.imul(j,He)|0,d=d+Math.imul(j,We)|0,d=d+Math.imul(X,He)|0,S=S+Math.imul(X,We)|0,k=k+Math.imul(U,ze)|0,d=d+Math.imul(U,je)|0,d=d+Math.imul(D,ze)|0,S=S+Math.imul(D,je)|0;var As=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(As>>>26)|0,As&=67108863,k=Math.imul(Ee,De),d=Math.imul(Ee,Le),d=d+Math.imul(_e,De)|0,S=Math.imul(_e,Le),k=k+Math.imul(re,Ke)|0,d=d+Math.imul(re,Fe)|0,d=d+Math.imul(ae,Ke)|0,S=S+Math.imul(ae,Fe)|0,k=k+Math.imul(J,Ve)|0,d=d+Math.imul(J,qe)|0,d=d+Math.imul(ne,Ve)|0,S=S+Math.imul(ne,qe)|0,k=k+Math.imul(ue,He)|0,d=d+Math.imul(ue,We)|0,d=d+Math.imul(K,He)|0,S=S+Math.imul(K,We)|0,k=k+Math.imul(j,ze)|0,d=d+Math.imul(j,je)|0,d=d+Math.imul(X,ze)|0,S=S+Math.imul(X,je)|0,k=k+Math.imul(U,Ge)|0,d=d+Math.imul(U,$e)|0,d=d+Math.imul(D,Ge)|0,S=S+Math.imul(D,$e)|0;var Ss=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(Oe,De),d=Math.imul(Oe,Le),d=d+Math.imul(Be,De)|0,S=Math.imul(Be,Le),k=k+Math.imul(Ee,Ke)|0,d=d+Math.imul(Ee,Fe)|0,d=d+Math.imul(_e,Ke)|0,S=S+Math.imul(_e,Fe)|0,k=k+Math.imul(re,Ve)|0,d=d+Math.imul(re,qe)|0,d=d+Math.imul(ae,Ve)|0,S=S+Math.imul(ae,qe)|0,k=k+Math.imul(J,He)|0,d=d+Math.imul(J,We)|0,d=d+Math.imul(ne,He)|0,S=S+Math.imul(ne,We)|0,k=k+Math.imul(ue,ze)|0,d=d+Math.imul(ue,je)|0,d=d+Math.imul(K,ze)|0,S=S+Math.imul(K,je)|0,k=k+Math.imul(j,Ge)|0,d=d+Math.imul(j,$e)|0,d=d+Math.imul(X,Ge)|0,S=S+Math.imul(X,$e)|0,k=k+Math.imul(U,Ye)|0,d=d+Math.imul(U,Je)|0,d=d+Math.imul(D,Ye)|0,S=S+Math.imul(D,Je)|0;var Es=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,k=Math.imul(Ce,De),d=Math.imul(Ce,Le),d=d+Math.imul(nt,De)|0,S=Math.imul(nt,Le),k=k+Math.imul(Oe,Ke)|0,d=d+Math.imul(Oe,Fe)|0,d=d+Math.imul(Be,Ke)|0,S=S+Math.imul(Be,Fe)|0,k=k+Math.imul(Ee,Ve)|0,d=d+Math.imul(Ee,qe)|0,d=d+Math.imul(_e,Ve)|0,S=S+Math.imul(_e,qe)|0,k=k+Math.imul(re,He)|0,d=d+Math.imul(re,We)|0,d=d+Math.imul(ae,He)|0,S=S+Math.imul(ae,We)|0,k=k+Math.imul(J,ze)|0,d=d+Math.imul(J,je)|0,d=d+Math.imul(ne,ze)|0,S=S+Math.imul(ne,je)|0,k=k+Math.imul(ue,Ge)|0,d=d+Math.imul(ue,$e)|0,d=d+Math.imul(K,Ge)|0,S=S+Math.imul(K,$e)|0,k=k+Math.imul(j,Ye)|0,d=d+Math.imul(j,Je)|0,d=d+Math.imul(X,Ye)|0,S=S+Math.imul(X,Je)|0,k=k+Math.imul(U,Ze)|0,d=d+Math.imul(U,Qe)|0,d=d+Math.imul(D,Ze)|0,S=S+Math.imul(D,Qe)|0;var Is=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(it,De),d=Math.imul(it,Le),d=d+Math.imul(ot,De)|0,S=Math.imul(ot,Le),k=k+Math.imul(Ce,Ke)|0,d=d+Math.imul(Ce,Fe)|0,d=d+Math.imul(nt,Ke)|0,S=S+Math.imul(nt,Fe)|0,k=k+Math.imul(Oe,Ve)|0,d=d+Math.imul(Oe,qe)|0,d=d+Math.imul(Be,Ve)|0,S=S+Math.imul(Be,qe)|0,k=k+Math.imul(Ee,He)|0,d=d+Math.imul(Ee,We)|0,d=d+Math.imul(_e,He)|0,S=S+Math.imul(_e,We)|0,k=k+Math.imul(re,ze)|0,d=d+Math.imul(re,je)|0,d=d+Math.imul(ae,ze)|0,S=S+Math.imul(ae,je)|0,k=k+Math.imul(J,Ge)|0,d=d+Math.imul(J,$e)|0,d=d+Math.imul(ne,Ge)|0,S=S+Math.imul(ne,$e)|0,k=k+Math.imul(ue,Ye)|0,d=d+Math.imul(ue,Je)|0,d=d+Math.imul(K,Ye)|0,S=S+Math.imul(K,Je)|0,k=k+Math.imul(j,Ze)|0,d=d+Math.imul(j,Qe)|0,d=d+Math.imul(X,Ze)|0,S=S+Math.imul(X,Qe)|0,k=k+Math.imul(U,Xe)|0,d=d+Math.imul(U,et)|0,d=d+Math.imul(D,Xe)|0,S=S+Math.imul(D,et)|0;var ks=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,k=Math.imul(Ne,De),d=Math.imul(Ne,Le),d=d+Math.imul(Ue,De)|0,S=Math.imul(Ue,Le),k=k+Math.imul(it,Ke)|0,d=d+Math.imul(it,Fe)|0,d=d+Math.imul(ot,Ke)|0,S=S+Math.imul(ot,Fe)|0,k=k+Math.imul(Ce,Ve)|0,d=d+Math.imul(Ce,qe)|0,d=d+Math.imul(nt,Ve)|0,S=S+Math.imul(nt,qe)|0,k=k+Math.imul(Oe,He)|0,d=d+Math.imul(Oe,We)|0,d=d+Math.imul(Be,He)|0,S=S+Math.imul(Be,We)|0,k=k+Math.imul(Ee,ze)|0,d=d+Math.imul(Ee,je)|0,d=d+Math.imul(_e,ze)|0,S=S+Math.imul(_e,je)|0,k=k+Math.imul(re,Ge)|0,d=d+Math.imul(re,$e)|0,d=d+Math.imul(ae,Ge)|0,S=S+Math.imul(ae,$e)|0,k=k+Math.imul(J,Ye)|0,d=d+Math.imul(J,Je)|0,d=d+Math.imul(ne,Ye)|0,S=S+Math.imul(ne,Je)|0,k=k+Math.imul(ue,Ze)|0,d=d+Math.imul(ue,Qe)|0,d=d+Math.imul(K,Ze)|0,S=S+Math.imul(K,Qe)|0,k=k+Math.imul(j,Xe)|0,d=d+Math.imul(j,et)|0,d=d+Math.imul(X,Xe)|0,S=S+Math.imul(X,et)|0,k=k+Math.imul(U,tt)|0,d=d+Math.imul(U,rt)|0,d=d+Math.imul(D,tt)|0,S=S+Math.imul(D,rt)|0;var Ts=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ne,Ke),d=Math.imul(Ne,Fe),d=d+Math.imul(Ue,Ke)|0,S=Math.imul(Ue,Fe),k=k+Math.imul(it,Ve)|0,d=d+Math.imul(it,qe)|0,d=d+Math.imul(ot,Ve)|0,S=S+Math.imul(ot,qe)|0,k=k+Math.imul(Ce,He)|0,d=d+Math.imul(Ce,We)|0,d=d+Math.imul(nt,He)|0,S=S+Math.imul(nt,We)|0,k=k+Math.imul(Oe,ze)|0,d=d+Math.imul(Oe,je)|0,d=d+Math.imul(Be,ze)|0,S=S+Math.imul(Be,je)|0,k=k+Math.imul(Ee,Ge)|0,d=d+Math.imul(Ee,$e)|0,d=d+Math.imul(_e,Ge)|0,S=S+Math.imul(_e,$e)|0,k=k+Math.imul(re,Ye)|0,d=d+Math.imul(re,Je)|0,d=d+Math.imul(ae,Ye)|0,S=S+Math.imul(ae,Je)|0,k=k+Math.imul(J,Ze)|0,d=d+Math.imul(J,Qe)|0,d=d+Math.imul(ne,Ze)|0,S=S+Math.imul(ne,Qe)|0,k=k+Math.imul(ue,Xe)|0,d=d+Math.imul(ue,et)|0,d=d+Math.imul(K,Xe)|0,S=S+Math.imul(K,et)|0,k=k+Math.imul(j,tt)|0,d=d+Math.imul(j,rt)|0,d=d+Math.imul(X,tt)|0,S=S+Math.imul(X,rt)|0;var Ps=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,k=Math.imul(Ne,Ve),d=Math.imul(Ne,qe),d=d+Math.imul(Ue,Ve)|0,S=Math.imul(Ue,qe),k=k+Math.imul(it,He)|0,d=d+Math.imul(it,We)|0,d=d+Math.imul(ot,He)|0,S=S+Math.imul(ot,We)|0,k=k+Math.imul(Ce,ze)|0,d=d+Math.imul(Ce,je)|0,d=d+Math.imul(nt,ze)|0,S=S+Math.imul(nt,je)|0,k=k+Math.imul(Oe,Ge)|0,d=d+Math.imul(Oe,$e)|0,d=d+Math.imul(Be,Ge)|0,S=S+Math.imul(Be,$e)|0,k=k+Math.imul(Ee,Ye)|0,d=d+Math.imul(Ee,Je)|0,d=d+Math.imul(_e,Ye)|0,S=S+Math.imul(_e,Je)|0,k=k+Math.imul(re,Ze)|0,d=d+Math.imul(re,Qe)|0,d=d+Math.imul(ae,Ze)|0,S=S+Math.imul(ae,Qe)|0,k=k+Math.imul(J,Xe)|0,d=d+Math.imul(J,et)|0,d=d+Math.imul(ne,Xe)|0,S=S+Math.imul(ne,et)|0,k=k+Math.imul(ue,tt)|0,d=d+Math.imul(ue,rt)|0,d=d+Math.imul(K,tt)|0,S=S+Math.imul(K,rt)|0;var _s=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,k=Math.imul(Ne,He),d=Math.imul(Ne,We),d=d+Math.imul(Ue,He)|0,S=Math.imul(Ue,We),k=k+Math.imul(it,ze)|0,d=d+Math.imul(it,je)|0,d=d+Math.imul(ot,ze)|0,S=S+Math.imul(ot,je)|0,k=k+Math.imul(Ce,Ge)|0,d=d+Math.imul(Ce,$e)|0,d=d+Math.imul(nt,Ge)|0,S=S+Math.imul(nt,$e)|0,k=k+Math.imul(Oe,Ye)|0,d=d+Math.imul(Oe,Je)|0,d=d+Math.imul(Be,Ye)|0,S=S+Math.imul(Be,Je)|0,k=k+Math.imul(Ee,Ze)|0,d=d+Math.imul(Ee,Qe)|0,d=d+Math.imul(_e,Ze)|0,S=S+Math.imul(_e,Qe)|0,k=k+Math.imul(re,Xe)|0,d=d+Math.imul(re,et)|0,d=d+Math.imul(ae,Xe)|0,S=S+Math.imul(ae,et)|0,k=k+Math.imul(J,tt)|0,d=d+Math.imul(J,rt)|0,d=d+Math.imul(ne,tt)|0,S=S+Math.imul(ne,rt)|0;var Bs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,k=Math.imul(Ne,ze),d=Math.imul(Ne,je),d=d+Math.imul(Ue,ze)|0,S=Math.imul(Ue,je),k=k+Math.imul(it,Ge)|0,d=d+Math.imul(it,$e)|0,d=d+Math.imul(ot,Ge)|0,S=S+Math.imul(ot,$e)|0,k=k+Math.imul(Ce,Ye)|0,d=d+Math.imul(Ce,Je)|0,d=d+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Je)|0,k=k+Math.imul(Oe,Ze)|0,d=d+Math.imul(Oe,Qe)|0,d=d+Math.imul(Be,Ze)|0,S=S+Math.imul(Be,Qe)|0,k=k+Math.imul(Ee,Xe)|0,d=d+Math.imul(Ee,et)|0,d=d+Math.imul(_e,Xe)|0,S=S+Math.imul(_e,et)|0,k=k+Math.imul(re,tt)|0,d=d+Math.imul(re,rt)|0,d=d+Math.imul(ae,tt)|0,S=S+Math.imul(ae,rt)|0;var Cs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,k=Math.imul(Ne,Ge),d=Math.imul(Ne,$e),d=d+Math.imul(Ue,Ge)|0,S=Math.imul(Ue,$e),k=k+Math.imul(it,Ye)|0,d=d+Math.imul(it,Je)|0,d=d+Math.imul(ot,Ye)|0,S=S+Math.imul(ot,Je)|0,k=k+Math.imul(Ce,Ze)|0,d=d+Math.imul(Ce,Qe)|0,d=d+Math.imul(nt,Ze)|0,S=S+Math.imul(nt,Qe)|0,k=k+Math.imul(Oe,Xe)|0,d=d+Math.imul(Oe,et)|0,d=d+Math.imul(Be,Xe)|0,S=S+Math.imul(Be,et)|0,k=k+Math.imul(Ee,tt)|0,d=d+Math.imul(Ee,rt)|0,d=d+Math.imul(_e,tt)|0,S=S+Math.imul(_e,rt)|0;var Ms=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,k=Math.imul(Ne,Ye),d=Math.imul(Ne,Je),d=d+Math.imul(Ue,Ye)|0,S=Math.imul(Ue,Je),k=k+Math.imul(it,Ze)|0,d=d+Math.imul(it,Qe)|0,d=d+Math.imul(ot,Ze)|0,S=S+Math.imul(ot,Qe)|0,k=k+Math.imul(Ce,Xe)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(nt,Xe)|0,S=S+Math.imul(nt,et)|0,k=k+Math.imul(Oe,tt)|0,d=d+Math.imul(Oe,rt)|0,d=d+Math.imul(Be,tt)|0,S=S+Math.imul(Be,rt)|0;var Rs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,k=Math.imul(Ne,Ze),d=Math.imul(Ne,Qe),d=d+Math.imul(Ue,Ze)|0,S=Math.imul(Ue,Qe),k=k+Math.imul(it,Xe)|0,d=d+Math.imul(it,et)|0,d=d+Math.imul(ot,Xe)|0,S=S+Math.imul(ot,et)|0,k=k+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(nt,tt)|0,S=S+Math.imul(nt,rt)|0;var Os=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Os>>>26)|0,Os&=67108863,k=Math.imul(Ne,Xe),d=Math.imul(Ne,et),d=d+Math.imul(Ue,Xe)|0,S=Math.imul(Ue,et),k=k+Math.imul(it,tt)|0,d=d+Math.imul(it,rt)|0,d=d+Math.imul(ot,tt)|0,S=S+Math.imul(ot,rt)|0;var dl=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(dl>>>26)|0,dl&=67108863,k=Math.imul(Ne,tt),d=Math.imul(Ne,rt),d=d+Math.imul(Ue,tt)|0,S=Math.imul(Ue,rt);var hl=(B+k|0)+((d&8191)<<13)|0;return B=(S+(d>>>13)|0)+(hl>>>26)|0,hl&=67108863,P[0]=bs,P[1]=xs,P[2]=ws,P[3]=vs,P[4]=As,P[5]=Ss,P[6]=Es,P[7]=Is,P[8]=ks,P[9]=Ts,P[10]=Ps,P[11]=_s,P[12]=Bs,P[13]=Cs,P[14]=Ms,P[15]=Rs,P[16]=Os,P[17]=dl,P[18]=hl,B!==0&&(P[19]=B,b.length++),b};Math.imul||(A=x);function E(_,f,m){m.negative=f.negative^_.negative,m.length=_.length+f.length;for(var b=0,w=0,v=0;v<m.length-1;v++){var P=w;w=0;for(var B=b&67108863,k=Math.min(v,f.length-1),d=Math.max(0,v-_.length+1);d<=k;d++){var S=v-d,F=_.words[S]|0,U=f.words[d]|0,D=F*U,Y=D&67108863;P=P+(D/67108864|0)|0,Y=Y+B|0,B=Y&67108863,P=P+(Y>>>26)|0,w+=P>>>26,P&=67108863}m.words[v]=B,b=P,P=w}return b!==0?m.words[v]=b:m.length--,m.strip()}function C(_,f,m){var b=new M;return b.mulp(_,f,m)}i.prototype.mulTo=function(f,m){var b,w=this.length+f.length;return this.length===10&&f.length===10?b=A(this,f,m):w<63?b=x(this,f,m):w<1024?b=E(this,f,m):b=C(this,f,m),b};function M(_,f){this.x=_,this.y=f}M.prototype.makeRBT=function(f){for(var m=new Array(f),b=i.prototype._countBits(f)-1,w=0;w<f;w++)m[w]=this.revBin(w,b,f);return m},M.prototype.revBin=function(f,m,b){if(f===0||f===b-1)return f;for(var w=0,v=0;v<m;v++)w|=(f&1)<<m-v-1,f>>=1;return w},M.prototype.permute=function(f,m,b,w,v,P){for(var B=0;B<P;B++)w[B]=m[f[B]],v[B]=b[f[B]]},M.prototype.transform=function(f,m,b,w,v,P){this.permute(P,f,m,b,w,v);for(var B=1;B<v;B<<=1)for(var k=B<<1,d=Math.cos(2*Math.PI/k),S=Math.sin(2*Math.PI/k),F=0;F<v;F+=k)for(var U=d,D=S,Y=0;Y<B;Y++){var j=b[F+Y],X=w[F+Y],fe=b[F+Y+B],ue=w[F+Y+B],K=U*fe-D*ue;ue=U*ue+D*fe,fe=K,b[F+Y]=j+fe,w[F+Y]=X+ue,b[F+Y+B]=j-fe,w[F+Y+B]=X-ue,Y!==k&&(K=d*U-S*D,D=d*D+S*U,U=K)}},M.prototype.guessLen13b=function(f,m){var b=Math.max(m,f)|1,w=b&1,v=0;for(b=b/2|0;b;b=b>>>1)v++;return 1<<v+1+w},M.prototype.conjugate=function(f,m,b){if(!(b<=1))for(var w=0;w<b/2;w++){var v=f[w];f[w]=f[b-w-1],f[b-w-1]=v,v=m[w],m[w]=-m[b-w-1],m[b-w-1]=-v}},M.prototype.normalize13b=function(f,m){for(var b=0,w=0;w<m/2;w++){var v=Math.round(f[2*w+1]/m)*8192+Math.round(f[2*w]/m)+b;f[w]=v&67108863,v<67108864?b=0:b=v/67108864|0}return f},M.prototype.convert13b=function(f,m,b,w){for(var v=0,P=0;P<m;P++)v=v+(f[P]|0),b[2*P]=v&8191,v=v>>>13,b[2*P+1]=v&8191,v=v>>>13;for(P=2*m;P<w;++P)b[P]=0;r(v===0),r((v&-8192)===0)},M.prototype.stub=function(f){for(var m=new Array(f),b=0;b<f;b++)m[b]=0;return m},M.prototype.mulp=function(f,m,b){var w=2*this.guessLen13b(f.length,m.length),v=this.makeRBT(w),P=this.stub(w),B=new Array(w),k=new Array(w),d=new Array(w),S=new Array(w),F=new Array(w),U=new Array(w),D=b.words;D.length=w,this.convert13b(f.words,f.length,B,w),this.convert13b(m.words,m.length,S,w),this.transform(B,P,k,d,w,v),this.transform(S,P,F,U,w,v);for(var Y=0;Y<w;Y++){var j=k[Y]*F[Y]-d[Y]*U[Y];d[Y]=k[Y]*U[Y]+d[Y]*F[Y],k[Y]=j}return this.conjugate(k,d,w),this.transform(k,d,D,P,w,v),this.conjugate(D,P,w),this.normalize13b(D,w),b.negative=f.negative^m.negative,b.length=f.length+m.length,b.strip()},i.prototype.mul=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),this.mulTo(f,m)},i.prototype.mulf=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),C(this,f,m)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var m=0,b=0;b<this.length;b++){var w=(this.words[b]|0)*f,v=(w&67108863)+(m&67108863);m>>=26,m+=w/67108864|0,m+=v>>>26,this.words[b]=v&67108863}return m!==0&&(this.words[b]=m,this.length++),this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var m=g(f);if(m.length===0)return new i(1);for(var b=this,w=0;w<m.length&&m[w]===0;w++,b=b.sqr());if(++w<m.length)for(var v=b.sqr();w<m.length;w++,v=v.sqr())m[w]!==0&&(b=b.mul(v));return b},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,w=67108863>>>26-m<<26-m,v;if(m!==0){var P=0;for(v=0;v<this.length;v++){var B=this.words[v]&w,k=(this.words[v]|0)-B<<m;this.words[v]=k|P,P=B>>>26-m}P&&(this.words[v]=P,this.length++)}if(b!==0){for(v=this.length-1;v>=0;v--)this.words[v+b]=this.words[v];for(v=0;v<b;v++)this.words[v]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,m,b){r(typeof f=="number"&&f>=0);var w;m?w=(m-m%26)/26:w=0;var v=f%26,P=Math.min((f-v)/26,this.length),B=67108863^67108863>>>v<<v,k=b;if(w-=P,w=Math.max(0,w),k){for(var d=0;d<P;d++)k.words[d]=this.words[d];k.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=w);d--){var F=this.words[d]|0;this.words[d]=S<<26-v|F>>>v,S=F&B}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(f,m,b){return r(this.negative===0),this.iushrn(f,m,b)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,w=1<<m;if(this.length<=b)return!1;var v=this.words[b];return!!(v&w)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(m!==0&&b++,this.length=Math.min(b,this.length),m!==0){var w=67108863^67108863>>>m<<m;this.words[this.length-1]&=w}return this.strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,m,b){var w=f.length+b,v;this._expand(w);var P,B=0;for(v=0;v<f.length;v++){P=(this.words[v+b]|0)+B;var k=(f.words[v]|0)*m;P-=k&67108863,B=(P>>26)-(k/67108864|0),this.words[v+b]=P&67108863}for(;v<this.length-b;v++)P=(this.words[v+b]|0)+B,B=P>>26,this.words[v+b]=P&67108863;if(B===0)return this.strip();for(r(B===-1),B=0,v=0;v<this.length;v++)P=-(this.words[v]|0)+B,B=P>>26,this.words[v]=P&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(f,m){var b=this.length-f.length,w=this.clone(),v=f,P=v.words[v.length-1]|0,B=this._countBits(P);b=26-B,b!==0&&(v=v.ushln(b),w.iushln(b),P=v.words[v.length-1]|0);var k=w.length-v.length,d;if(m!=="mod"){d=new i(null),d.length=k+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var F=w.clone()._ishlnsubmul(v,1,k);F.negative===0&&(w=F,d&&(d.words[k]=1));for(var U=k-1;U>=0;U--){var D=(w.words[v.length+U]|0)*67108864+(w.words[v.length+U-1]|0);for(D=Math.min(D/P|0,67108863),w._ishlnsubmul(v,D,U);w.negative!==0;)D--,w.negative=0,w._ishlnsubmul(v,1,U),w.isZero()||(w.negative^=1);d&&(d.words[U]=D)}return d&&d.strip(),w.strip(),m!=="div"&&b!==0&&w.iushrn(b),{div:d||null,mod:w}},i.prototype.divmod=function(f,m,b){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,v,P;return this.negative!==0&&f.negative===0?(P=this.neg().divmod(f,m),m!=="mod"&&(w=P.div.neg()),m!=="div"&&(v=P.mod.neg(),b&&v.negative!==0&&v.iadd(f)),{div:w,mod:v}):this.negative===0&&f.negative!==0?(P=this.divmod(f.neg(),m),m!=="mod"&&(w=P.div.neg()),{div:w,mod:P.mod}):this.negative&f.negative?(P=this.neg().divmod(f.neg(),m),m!=="div"&&(v=P.mod.neg(),b&&v.negative!==0&&v.isub(f)),{div:P.div,mod:v}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?m==="div"?{div:this.divn(f.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modn(f.words[0]))}:this._wordDiv(f,m)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var m=this.divmod(f);if(m.mod.isZero())return m.div;var b=m.div.negative!==0?m.mod.isub(f):m.mod,w=f.ushrn(1),v=f.andln(1),P=b.cmp(w);return P<0||v===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modn=function(f){r(f<=67108863);for(var m=(1<<26)%f,b=0,w=this.length-1;w>=0;w--)b=(m*b+(this.words[w]|0))%f;return b},i.prototype.idivn=function(f){r(f<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var w=(this.words[b]|0)+m*67108864;this.words[b]=w/f|0,m=w%f}return this.strip()},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var w=new i(1),v=new i(0),P=new i(0),B=new i(1),k=0;m.isEven()&&b.isEven();)m.iushrn(1),b.iushrn(1),++k;for(var d=b.clone(),S=m.clone();!m.isZero();){for(var F=0,U=1;!(m.words[0]&U)&&F<26;++F,U<<=1);if(F>0)for(m.iushrn(F);F-- >0;)(w.isOdd()||v.isOdd())&&(w.iadd(d),v.isub(S)),w.iushrn(1),v.iushrn(1);for(var D=0,Y=1;!(b.words[0]&Y)&&D<26;++D,Y<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(P.isOdd()||B.isOdd())&&(P.iadd(d),B.isub(S)),P.iushrn(1),B.iushrn(1);m.cmp(b)>=0?(m.isub(b),w.isub(P),v.isub(B)):(b.isub(m),P.isub(w),B.isub(v))}return{a:P,b:B,gcd:b.iushln(k)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var w=new i(1),v=new i(0),P=b.clone();m.cmpn(1)>0&&b.cmpn(1)>0;){for(var B=0,k=1;!(m.words[0]&k)&&B<26;++B,k<<=1);if(B>0)for(m.iushrn(B);B-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);for(var d=0,S=1;!(b.words[0]&S)&&d<26;++d,S<<=1);if(d>0)for(b.iushrn(d);d-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);m.cmp(b)>=0?(m.isub(b),w.isub(v)):(b.isub(m),v.isub(w))}var F;return m.cmpn(1)===0?F=w:F=v,F.cmpn(0)<0&&F.iadd(f),F},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var m=this.clone(),b=f.clone();m.negative=0,b.negative=0;for(var w=0;m.isEven()&&b.isEven();w++)m.iushrn(1),b.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;b.isEven();)b.iushrn(1);var v=m.cmp(b);if(v<0){var P=m;m=b,b=P}else if(v===0||b.cmpn(1)===0)break;m.isub(b)}while(!0);return b.iushln(w)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var m=f%26,b=(f-m)/26,w=1<<m;if(this.length<=b)return this._expand(b+1),this.words[b]|=w,this;for(var v=w,P=b;v!==0&&P<this.length;P++){var B=this.words[P]|0;B+=v,v=B>>>26,B&=67108863,this.words[P]=B}return v!==0&&(this.words[P]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var m=f<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var b;if(this.length>1)b=1;else{m&&(f=-f),r(f<=67108863,"Number is too big");var w=this.words[0]|0;b=w===f?0:w<f?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var m=this.ucmp(f);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var m=0,b=this.length-1;b>=0;b--){var w=this.words[b]|0,v=f.words[b]|0;if(w!==v){w<v?m=-1:w>v&&(m=1);break}}return m},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new z(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function R(_,f){this.name=_,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var m=f,b;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),b=m.bitLength();while(b>this.n);var w=b<this.n?-1:m.ucmp(this.p);return w===0?(m.words[0]=0,m.length=1):w>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},R.prototype.split=function(f,m){f.iushrn(this.n,0,m)},R.prototype.imulK=function(f){return f.imul(this.k)};function V(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(V,R),V.prototype.split=function(f,m){for(var b=4194303,w=Math.min(f.length,9),v=0;v<w;v++)m.words[v]=f.words[v];if(m.length=w,f.length<=9){f.words[0]=0,f.length=1;return}var P=f.words[9];for(m.words[m.length++]=P&b,v=10;v<f.length;v++){var B=f.words[v]|0;f.words[v-10]=(B&b)<<4|P>>>22,P=B}P>>>=22,f.words[v-10]=P,P===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var m=0,b=0;b<f.length;b++){var w=f.words[b]|0;m+=w*977,f.words[b]=m&67108863,m=w*64+(m/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,R);function W(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,R);function G(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,R),G.prototype.imulK=function(f){for(var m=0,b=0;b<f.length;b++){var w=(f.words[b]|0)*19+m,v=w&67108863;w>>>=26,f.words[b]=v,m=w}return m!==0&&(f.words[f.length++]=m),f},i._prime=function(f){if(N[f])return N[f];var m;if(f==="k256")m=new V;else if(f==="p224")m=new q;else if(f==="p192")m=new W;else if(f==="p25519")m=new G;else throw new Error("Unknown prime "+f);return N[f]=m,m};function z(_){if(typeof _=="string"){var f=i._prime(_);this.m=f.p,this.prime=f}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}z.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,m){r((f.negative|m.negative)===0,"red works only with positives"),r(f.red&&f.red===m.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,m){this._verify2(f,m);var b=f.add(m);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},z.prototype.iadd=function(f,m){this._verify2(f,m);var b=f.iadd(m);return b.cmp(this.m)>=0&&b.isub(this.m),b},z.prototype.sub=function(f,m){this._verify2(f,m);var b=f.sub(m);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},z.prototype.isub=function(f,m){this._verify2(f,m);var b=f.isub(m);return b.cmpn(0)<0&&b.iadd(this.m),b},z.prototype.shl=function(f,m){return this._verify1(f),this.imod(f.ushln(m))},z.prototype.imul=function(f,m){return this._verify2(f,m),this.imod(f.imul(m))},z.prototype.mul=function(f,m){return this._verify2(f,m),this.imod(f.mul(m))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(f,b)}for(var w=this.m.subn(1),v=0;!w.isZero()&&w.andln(1)===0;)v++,w.iushrn(1);r(!w.isZero());var P=new i(1).toRed(this),B=P.redNeg(),k=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,k).cmp(B)!==0;)d.redIAdd(B);for(var S=this.pow(d,w),F=this.pow(f,w.addn(1).iushrn(1)),U=this.pow(f,w),D=v;U.cmp(P)!==0;){for(var Y=U,j=0;Y.cmp(P)!==0;j++)Y=Y.redSqr();r(j<D);var X=this.pow(S,new i(1).iushln(D-j-1));F=F.redMul(X),S=X.redSqr(),U=U.redMul(S),D=j}return F},z.prototype.invm=function(f){var m=f._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},z.prototype.pow=function(f,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return f.clone();var b=4,w=new Array(1<<b);w[0]=new i(1).toRed(this),w[1]=f;for(var v=2;v<w.length;v++)w[v]=this.mul(w[v-1],f);var P=w[0],B=0,k=0,d=m.bitLength()%26;for(d===0&&(d=26),v=m.length-1;v>=0;v--){for(var S=m.words[v],F=d-1;F>=0;F--){var U=S>>F&1;if(P!==w[0]&&(P=this.sqr(P)),U===0&&B===0){k=0;continue}B<<=1,B|=U,k++,!(k!==b&&(v!==0||F!==0))&&(P=this.mul(P,w[B]),k=0,B=0)}d=26}return P},z.prototype.convertTo=function(f){var m=f.umod(this.m);return m===f?m.clone():m},z.prototype.convertFrom=function(f){var m=f.clone();return m.red=null,m},i.mont=function(f){return new te(f)};function te(_){z.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(te,z),te.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},te.prototype.convertFrom=function(f){var m=this.imod(f.mul(this.rinv));return m.red=null,m},te.prototype.imul=function(f,m){if(f.isZero()||m.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(m),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=b.isub(w).iushrn(this.shift),P=v;return v.cmp(this.m)>=0?P=v.isub(this.m):v.cmpn(0)<0&&(P=v.iadd(this.m)),P._forceRed(this)},te.prototype.mul=function(f,m){if(f.isZero()||m.isZero())return new i(0)._forceRed(this);var b=f.mul(m),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=b.isub(w).iushrn(this.shift),P=v;return v.cmp(this.m)>=0?P=v.isub(this.m):v.cmpn(0)<0&&(P=v.iadd(this.m)),P._forceRed(this)},te.prototype.invm=function(f){var m=this.imod(f._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(typeof kP>"u"||kP,wH)});var AH=L(Sp=>{"use strict";p();y();Object.defineProperty(Sp,"__esModule",{value:!0});var Kd=Ld(),gwe=j_().ec,TP=new gwe("secp256k1"),Ap=TP.curve;Sp.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new Kd(e);if(r.ucmp(Ap.n)>=0)throw new Error("couldn't export to DER format");var n=TP.g.mul(r);return vH(n.getX(),n.getY(),t)};Sp.privateKeyModInverse=function(e){var t=new Kd(e);if(t.ucmp(Ap.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm(Ap.n).toArrayLike(Buffer,"be",32)};Sp.signatureImport=function(e){var t=new Kd(e.r);t.ucmp(Ap.n)>=0&&(t=new Kd(0));var r=new Kd(e.s);return r.ucmp(Ap.n)>=0&&(r=new Kd(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Sp.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=TP.keyFromPublic(e),i=new Kd(t);if(i.ucmp(Ap.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var o=n.pub.mul(i);return vH(o.getX(),o.getY(),r)};var vH=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var SH=L(sb=>{"use strict";p();y();Object.defineProperty(sb,"__esModule",{value:!0});var{Buffer:ob}=Zr(),bwe=ob.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),xwe=ob.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);sb.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=ob.from(r?bwe:xwe);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};sb.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};sb.signatureImportLax=function(e){var t=ob.alloc(32,0),r=ob.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var o=e[i++];if(o&128&&(i+=o-128,i>n)||e[i++]!==2)return null;var s=e[i++];if(s&128){if(o=s-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(s=0;o>0;i+=1,o-=1)s=(s<<8)+e[i]}if(s>n-i)return null;var a=i;if(i+=s,e[i++]!==2)return null;var c=e[i++];if(c&128){if(o=c-128,i+o>n)return null;for(;o>0&&e[i]===0;i+=1,o-=1);for(c=0;o>0;i+=1,o-=1)c=(c<<8)+e[i]}if(c>n-i)return null;var u=i;for(i+=c;s>0&&e[a]===0;s-=1,a+=1);if(s>32)return null;var h=e.slice(a,a+s);for(h.copy(t,32-h.length);c>0&&e[u]===0;c-=1,u+=1);if(c>32)return null;var l=e.slice(u,u+c);return l.copy(r,32-l.length),{r:t,s:r}}});var GA=L(Re=>{"use strict";p();y();Object.defineProperty(Re,"__esModule",{value:!0});Re.ecdhUnsafe=Re.ecdh=Re.recover=Re.verify=Re.sign=Re.signatureImportLax=Re.signatureImport=Re.signatureExport=Re.signatureNormalize=Re.publicKeyCombine=Re.publicKeyTweakMul=Re.publicKeyTweakAdd=Re.publicKeyVerify=Re.publicKeyConvert=Re.publicKeyCreate=Re.privateKeyTweakMul=Re.privateKeyTweakAdd=Re.privateKeyModInverse=Re.privateKeyNegate=Re.privateKeyImport=Re.privateKeyExport=Re.privateKeyVerify=void 0;var ai=xH(),jA=AH(),PP=SH();Re.privateKeyVerify=function(e){return e.length!==32?!1:ai.privateKeyVerify(Uint8Array.from(e))};Re.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=jA.privateKeyExport(e,t);return PP.privateKeyExport(e,r,t)};Re.privateKeyImport=function(e){if(e=PP.privateKeyImport(e),e!==null&&e.length===32&&Re.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};Re.privateKeyNegate=function(e){return Buffer.from(ai.privateKeyNegate(Uint8Array.from(e)))};Re.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(jA.privateKeyModInverse(Uint8Array.from(e)))};Re.privateKeyTweakAdd=function(e,t){return Buffer.from(ai.privateKeyTweakAdd(Uint8Array.from(e),t))};Re.privateKeyTweakMul=function(e,t){return Buffer.from(ai.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};Re.publicKeyCreate=function(e,t){return Buffer.from(ai.publicKeyCreate(Uint8Array.from(e),t))};Re.publicKeyConvert=function(e,t){return Buffer.from(ai.publicKeyConvert(Uint8Array.from(e),t))};Re.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:ai.publicKeyVerify(Uint8Array.from(e))};Re.publicKeyTweakAdd=function(e,t,r){return Buffer.from(ai.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};Re.publicKeyTweakMul=function(e,t,r){return Buffer.from(ai.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};Re.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(ai.publicKeyCombine(r,t))};Re.signatureNormalize=function(e){return Buffer.from(ai.signatureNormalize(Uint8Array.from(e)))};Re.signatureExport=function(e){return Buffer.from(ai.signatureExport(Uint8Array.from(e)))};Re.signatureImport=function(e){return Buffer.from(ai.signatureImport(Uint8Array.from(e)))};Re.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=PP.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return jA.signatureImport(t)};Re.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(o,s,a,c,u){var h=a!=null?Buffer.from(a):null,l=c!=null?Buffer.from(c):null,g=Buffer.from("");return r.noncefn&&(g=r.noncefn(Buffer.from(o),Buffer.from(s),h,l,u)),new Uint8Array(g)})}var i=ai.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};Re.verify=function(e,t,r){return ai.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};Re.recover=function(e,t,r,n){return Buffer.from(ai.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};Re.ecdh=function(e,t){return Buffer.from(ai.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};Re.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(jA.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var _P=L((DQe,EH)=>{p();y();EH.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var kH=L((FQe,IH)=>{p();y();var wwe=_P();IH.exports=function(t){return typeof t!="string"?t:wwe(t)?t.slice(2):t}});var Fd=L((HQe,_H)=>{"use strict";p();y();var vwe=_P(),TH=kH();function $A(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function PH(e){var t=e.toString(16);return"0x"+t}function Awe(e){var t=PH(e);return new Buffer($A(t.slice(2)),"hex")}function Swe(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function Ewe(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function Iwe(e){var t=new Buffer($A(TH(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function kwe(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function Twe(e){var t=new Buffer(e,"utf8");return"0x"+$A(t.toString("hex")).replace(/^0+|0+$/g,"")}function Pwe(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function _we(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if(typeof o!="string")throw new Error("invalid abi");n.push(o)}return n}function Bwe(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}_H.exports={arrayContainsArray:Ewe,intToBuffer:Awe,getBinarySize:Swe,isHexPrefixed:vwe,stripHexPrefix:TH,padToEven:$A,intToHex:PH,fromAscii:Pwe,fromUtf8:Twe,toAscii:kwe,toUtf8:Iwe,getKeys:_we,isHexString:Bwe}});var YA=L(rc=>{"use strict";p();y();var Cwe=rc&&rc.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rc,"__esModule",{value:!0});rc.getLength=rc.decode=rc.encode=void 0;var Mwe=Cwe(qb());function CH(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(CH(e[r]));var n=Buffer.concat(t);return Buffer.concat([BH(n.length,192),n])}else{var i=RP(e);return i.length===1&&i[0]<128?i:Buffer.concat([BH(i.length,128),i])}}rc.encode=CH;function BP(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function BH(e,t){if(e<56)return Buffer.from([e+t]);var r=MP(e),n=r.length/2,i=MP(t+55+n);return Buffer.from(i+r,"hex")}function Rwe(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=RP(e),n=CP(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}rc.decode=Rwe;function Owe(e){if(!e||e.length===0)return Buffer.from([]);var t=RP(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=BP(t.slice(1,n).toString("hex"),16);return n+i}rc.getLength=Owe;function CP(e){var t,r,n,i,o,s=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=BP(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,i=e.slice(1,t);i.length;)o=CP(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(t)}}else{r=a-246,t=BP(e.slice(1,r).toString("hex"),16);var c=r+t;if(c>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,c),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)o=CP(i),s.push(o.data),i=o.remainder;return{data:s,remainder:e.slice(c)}}}function MH(e){return e.slice(0,2)==="0x"}function Nwe(e){return typeof e!="string"?e:MH(e)?e.slice(2):e}function MP(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function Uwe(e){return e.length%2?"0"+e:e}function Dwe(e){var t=MP(e);return Buffer.from(t,"hex")}function RP(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return MH(e)?Buffer.from(Uwe(Nwe(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?Dwe(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(Mwe.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var OH=L(Yr=>{"use strict";p();y();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.KECCAK256_RLP=Yr.KECCAK256_RLP_S=Yr.KECCAK256_RLP_ARRAY=Yr.KECCAK256_RLP_ARRAY_S=Yr.KECCAK256_NULL=Yr.KECCAK256_NULL_S=Yr.TWO_POW256=Yr.MAX_INTEGER=void 0;var RH=Ld(),{Buffer:OP}=Zr();Yr.MAX_INTEGER=new RH("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);Yr.TWO_POW256=new RH("10000000000000000000000000000000000000000000000000000000000000000",16);Yr.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";Yr.KECCAK256_NULL=OP.from(Yr.KECCAK256_NULL_S,"hex");Yr.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";Yr.KECCAK256_RLP_ARRAY=OP.from(Yr.KECCAK256_RLP_ARRAY_S,"hex");Yr.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";Yr.KECCAK256_RLP=OP.from(Yr.KECCAK256_RLP_S,"hex")});var DH=L((QQe,UH)=>{"use strict";p();y();var Lwe=Object.prototype.toString,Kwe=Function.prototype.toString,Fwe=/^\s*(?:function)?\*/,NH=wE()(),NP=Object.getPrototypeOf,Vwe=function(){if(!NH)return!1;try{return Function("return function*() {}")()}catch{}},UP;UH.exports=function(t){if(typeof t!="function")return!1;if(Fwe.test(Kwe.call(t)))return!0;if(!NH){var r=Lwe.call(t);return r==="[object GeneratorFunction]"}if(!NP)return!1;if(typeof UP>"u"){var n=Vwe();UP=n?NP(n):!1}return NP(t)===UP}});var FH=L((tXe,KH)=>{"use strict";p();y();var qwe=SY(),Hwe=Object.prototype.toString,LH=Object.prototype.hasOwnProperty,Wwe=function(t,r,n){for(var i=0,o=t.length;i<o;i++)LH.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},zwe=function(t,r,n){for(var i=0,o=t.length;i<o;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},jwe=function(t,r,n){for(var i in t)LH.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},Gwe=function(t,r,n){if(!qwe(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Hwe.call(t)==="[object Array]"?Wwe(t,r,i):typeof t=="string"?zwe(t,r,i):jwe(t,r,i)};KH.exports=Gwe});var LP=L((iXe,VH)=>{"use strict";p();y();var DP=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],$we=typeof globalThis>"u"?self:globalThis;VH.exports=function(){for(var t=[],r=0;r<DP.length;r++)typeof $we[DP[r]]=="function"&&(t[t.length]=DP[r]);return t}});var WH=L((aXe,HH)=>{"use strict";p();y();var Ywe="Function.prototype.bind called on incompatible ",Jwe=Object.prototype.toString,Zwe=Math.max,Qwe="[object Function]",qH=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var o=0;o<r.length;o+=1)n[o+t.length]=r[o];return n},Xwe=function(t,r){for(var n=[],i=r||0,o=0;i<t.length;i+=1,o+=1)n[o]=t[i];return n},e1e=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};HH.exports=function(t){var r=this;if(typeof r!="function"||Jwe.apply(r)!==Qwe)throw new TypeError(Ywe+r);for(var n=Xwe(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,qH(n,arguments));return Object(h)===h?h:this}return r.apply(t,qH(n,arguments))},s=Zwe(0,r.length-n.length),a=[],c=0;c<s;c++)a[c]="$"+c;if(i=Function("binder","return function ("+e1e(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var jH=L((fXe,zH)=>{"use strict";p();y();var t1e=WH();zH.exports=Function.prototype.bind||t1e});var KP=L((hXe,$H)=>{"use strict";p();y();var GH={foo:{}},r1e=Object;$H.exports=function(){return{__proto__:GH}.foo===GH.foo&&!({__proto__:null}instanceof r1e)}});var JH=L((mXe,YH)=>{"use strict";p();y();var n1e="Function.prototype.bind called on incompatible ",FP=Array.prototype.slice,i1e=Object.prototype.toString,o1e="[object Function]";YH.exports=function(t){var r=this;if(typeof r!="function"||i1e.call(r)!==o1e)throw new TypeError(n1e+r);for(var n=FP.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(FP.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(FP.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var QH=L((xXe,ZH)=>{"use strict";p();y();var s1e=JH();ZH.exports=Function.prototype.bind||s1e});var QA=L((AXe,nW)=>{"use strict";p();y();var It,Tp=SyntaxError,rW=Function,kp=TypeError,VP=function(e){try{return rW('"use strict"; return ('+e+").constructor;")()}catch{}},Vd=Object.getOwnPropertyDescriptor;if(Vd)try{Vd({},"")}catch{Vd=null}var qP=function(){throw new kp},a1e=Vd?function(){try{return arguments.callee,qP}catch{try{return Vd(arguments,"callee").get}catch{return qP}}}():qP,Ep=nB()(),c1e=KP()(),Un=Object.getPrototypeOf||(c1e?function(e){return e.__proto__}:null),Ip={},u1e=typeof Uint8Array>"u"||!Un?It:Un(Uint8Array),qd={"%AggregateError%":typeof AggregateError>"u"?It:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?It:ArrayBuffer,"%ArrayIteratorPrototype%":Ep&&Un?Un([][Symbol.iterator]()):It,"%AsyncFromSyncIteratorPrototype%":It,"%AsyncFunction%":Ip,"%AsyncGenerator%":Ip,"%AsyncGeneratorFunction%":Ip,"%AsyncIteratorPrototype%":Ip,"%Atomics%":typeof Atomics>"u"?It:Atomics,"%BigInt%":typeof BigInt>"u"?It:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?It:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?It:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?It:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?It:Float32Array,"%Float64Array%":typeof Float64Array>"u"?It:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?It:FinalizationRegistry,"%Function%":rW,"%GeneratorFunction%":Ip,"%Int8Array%":typeof Int8Array>"u"?It:Int8Array,"%Int16Array%":typeof Int16Array>"u"?It:Int16Array,"%Int32Array%":typeof Int32Array>"u"?It:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ep&&Un?Un(Un([][Symbol.iterator]())):It,"%JSON%":typeof JSON=="object"?JSON:It,"%Map%":typeof Map>"u"?It:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ep||!Un?It:Un(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?It:Promise,"%Proxy%":typeof Proxy>"u"?It:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?It:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?It:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ep||!Un?It:Un(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?It:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ep&&Un?Un(""[Symbol.iterator]()):It,"%Symbol%":Ep?Symbol:It,"%SyntaxError%":Tp,"%ThrowTypeError%":a1e,"%TypedArray%":u1e,"%TypeError%":kp,"%Uint8Array%":typeof Uint8Array>"u"?It:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?It:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?It:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?It:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?It:WeakMap,"%WeakRef%":typeof WeakRef>"u"?It:WeakRef,"%WeakSet%":typeof WeakSet>"u"?It:WeakSet};if(Un)try{null.error}catch(e){XH=Un(Un(e)),qd["%Error.prototype%"]=XH}var XH,f1e=function e(t){var r;if(t==="%AsyncFunction%")r=VP("async function () {}");else if(t==="%GeneratorFunction%")r=VP("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=VP("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Un&&(r=Un(i.prototype))}return qd[t]=r,r},eW={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ab=QH(),JA=iB(),l1e=ab.call(Function.call,Array.prototype.concat),d1e=ab.call(Function.apply,Array.prototype.splice),tW=ab.call(Function.call,String.prototype.replace),ZA=ab.call(Function.call,String.prototype.slice),h1e=ab.call(Function.call,RegExp.prototype.exec),p1e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,y1e=/\\(\\)?/g,m1e=function(t){var r=ZA(t,0,1),n=ZA(t,-1);if(r==="%"&&n!=="%")throw new Tp("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Tp("invalid intrinsic syntax, expected opening `%`");var i=[];return tW(t,p1e,function(o,s,a,c){i[i.length]=a?tW(c,y1e,"$1"):s||o}),i},g1e=function(t,r){var n=t,i;if(JA(eW,n)&&(i=eW[n],n="%"+i[0]+"%"),JA(qd,n)){var o=qd[n];if(o===Ip&&(o=f1e(n)),typeof o>"u"&&!r)throw new kp("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Tp("intrinsic "+t+" does not exist!")};nW.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new kp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new kp('"allowMissing" argument must be a boolean');if(h1e(/^%?[^%]*%?$/,t)===null)throw new Tp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=m1e(t),i=n.length>0?n[0]:"",o=g1e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],d1e(n,l1e([0,1],u)));for(var h=1,l=!0;h<n.length;h+=1){var g=n[h],x=ZA(g,0,1),A=ZA(g,-1);if((x==='"'||x==="'"||x==="`"||A==='"'||A==="'"||A==="`")&&x!==A)throw new Tp("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(c=!0),i+="."+g,s="%"+i+"%",JA(qd,s))a=qd[s];else if(a!=null){if(!(g in a)){if(!r)throw new kp("base intrinsic for "+t+" exists, but the property is not available.");return}if(Vd&&h+1>=n.length){var E=Vd(a,g);l=!!E,l&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[g]}else l=JA(a,g),a=a[g];l&&!c&&(qd[s]=a)}}return a}});var oW=L((IXe,iW)=>{"use strict";p();y();var b1e="Function.prototype.bind called on incompatible ",HP=Array.prototype.slice,x1e=Object.prototype.toString,w1e="[object Function]";iW.exports=function(t){var r=this;if(typeof r!="function"||x1e.call(r)!==w1e)throw new TypeError(b1e+r);for(var n=HP.call(arguments,1),i,o=function(){if(this instanceof i){var h=r.apply(this,n.concat(HP.call(arguments)));return Object(h)===h?h:this}else return r.apply(t,n.concat(HP.call(arguments)))},s=Math.max(0,r.length-n.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var aW=L((PXe,sW)=>{"use strict";p();y();var v1e=oW();sW.exports=Function.prototype.bind||v1e});var hW=L((CXe,dW)=>{"use strict";p();y();var kt,Cp=SyntaxError,lW=Function,Bp=TypeError,WP=function(e){try{return lW('"use strict"; return ('+e+").constructor;")()}catch{}},Hd=Object.getOwnPropertyDescriptor;if(Hd)try{Hd({},"")}catch{Hd=null}var zP=function(){throw new Bp},A1e=Hd?function(){try{return arguments.callee,zP}catch{try{return Hd(arguments,"callee").get}catch{return zP}}}():zP,Pp=nB()(),S1e=KP()(),Dn=Object.getPrototypeOf||(S1e?function(e){return e.__proto__}:null),_p={},E1e=typeof Uint8Array>"u"||!Dn?kt:Dn(Uint8Array),Wd={"%AggregateError%":typeof AggregateError>"u"?kt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?kt:ArrayBuffer,"%ArrayIteratorPrototype%":Pp&&Dn?Dn([][Symbol.iterator]()):kt,"%AsyncFromSyncIteratorPrototype%":kt,"%AsyncFunction%":_p,"%AsyncGenerator%":_p,"%AsyncGeneratorFunction%":_p,"%AsyncIteratorPrototype%":_p,"%Atomics%":typeof Atomics>"u"?kt:Atomics,"%BigInt%":typeof BigInt>"u"?kt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?kt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?kt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?kt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?kt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?kt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?kt:FinalizationRegistry,"%Function%":lW,"%GeneratorFunction%":_p,"%Int8Array%":typeof Int8Array>"u"?kt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?kt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?kt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Pp&&Dn?Dn(Dn([][Symbol.iterator]())):kt,"%JSON%":typeof JSON=="object"?JSON:kt,"%Map%":typeof Map>"u"?kt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Pp||!Dn?kt:Dn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?kt:Promise,"%Proxy%":typeof Proxy>"u"?kt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?kt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?kt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Pp||!Dn?kt:Dn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?kt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Pp&&Dn?Dn(""[Symbol.iterator]()):kt,"%Symbol%":Pp?Symbol:kt,"%SyntaxError%":Cp,"%ThrowTypeError%":A1e,"%TypedArray%":E1e,"%TypeError%":Bp,"%Uint8Array%":typeof Uint8Array>"u"?kt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?kt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?kt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?kt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?kt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?kt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?kt:WeakSet};if(Dn)try{null.error}catch(e){cW=Dn(Dn(e)),Wd["%Error.prototype%"]=cW}var cW,I1e=function e(t){var r;if(t==="%AsyncFunction%")r=WP("async function () {}");else if(t==="%GeneratorFunction%")r=WP("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=WP("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Dn&&(r=Dn(i.prototype))}return Wd[t]=r,r},uW={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},cb=aW(),XA=iB(),k1e=cb.call(Function.call,Array.prototype.concat),T1e=cb.call(Function.apply,Array.prototype.splice),fW=cb.call(Function.call,String.prototype.replace),eS=cb.call(Function.call,String.prototype.slice),P1e=cb.call(Function.call,RegExp.prototype.exec),_1e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B1e=/\\(\\)?/g,C1e=function(t){var r=eS(t,0,1),n=eS(t,-1);if(r==="%"&&n!=="%")throw new Cp("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Cp("invalid intrinsic syntax, expected opening `%`");var i=[];return fW(t,_1e,function(o,s,a,c){i[i.length]=a?fW(c,B1e,"$1"):s||o}),i},M1e=function(t,r){var n=t,i;if(XA(uW,n)&&(i=uW[n],n="%"+i[0]+"%"),XA(Wd,n)){var o=Wd[n];if(o===_p&&(o=I1e(n)),typeof o>"u"&&!r)throw new Bp("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Cp("intrinsic "+t+" does not exist!")};dW.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Bp("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Bp('"allowMissing" argument must be a boolean');if(P1e(/^%?[^%]*%?$/,t)===null)throw new Cp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=C1e(t),i=n.length>0?n[0]:"",o=M1e("%"+i+"%",r),s=o.name,a=o.value,c=!1,u=o.alias;u&&(i=u[0],T1e(n,k1e([0,1],u)));for(var h=1,l=!0;h<n.length;h+=1){var g=n[h],x=eS(g,0,1),A=eS(g,-1);if((x==='"'||x==="'"||x==="`"||A==='"'||A==="'"||A==="`")&&x!==A)throw new Cp("property names with quotes must have matching quotes");if((g==="constructor"||!l)&&(c=!0),i+="."+g,s="%"+i+"%",XA(Wd,s))a=Wd[s];else if(a!=null){if(!(g in a)){if(!r)throw new Bp("base intrinsic for "+t+" exists, but the property is not available.");return}if(Hd&&h+1>=n.length){var E=Hd(a,g);l=!!E,l&&"get"in E&&!("originalValue"in E.get)?a=E.get:a=a[g]}else l=XA(a,g),a=a[g];l&&!c&&(Wd[s]=a)}}return a}});var mW=L((OXe,yW)=>{"use strict";p();y();var R1e=sB()(),jP=hW(),ub=R1e&&jP("%Object.defineProperty%",!0);if(ub)try{ub({},"a",{value:1})}catch{ub=!1}var O1e=jP("%SyntaxError%"),Mp=jP("%TypeError%"),pW=zb();yW.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Mp("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Mp("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Mp("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Mp("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Mp("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Mp("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,c=!!pW&&pW(t,r);if(ub)ub(t,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:o===null&&c?c.writable:!o});else if(a||!i&&!o&&!s)t[r]=n;else throw new O1e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var AW=L((DXe,vW)=>{"use strict";p();y();var wW=QA(),gW=mW(),N1e=sB()(),bW=zb(),xW=wW("%TypeError%"),U1e=wW("%Math.floor%");vW.exports=function(t,r){if(typeof t!="function")throw new xW("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||U1e(r)!==r)throw new xW("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&bW){var s=bW(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(o=!1)}return(i||o||!n)&&(N1e?gW(t,"length",r,!0,!0):gW(t,"length",r)),t}});var $P=L((FXe,tS)=>{"use strict";p();y();var GP=jH(),Rp=QA(),D1e=AW(),L1e=Rp("%TypeError%"),EW=Rp("%Function.prototype.apply%"),IW=Rp("%Function.prototype.call%"),kW=Rp("%Reflect.apply%",!0)||GP.call(IW,EW),fb=Rp("%Object.defineProperty%",!0),K1e=Rp("%Math.max%");if(fb)try{fb({},"a",{value:1})}catch{fb=null}tS.exports=function(t){if(typeof t!="function")throw new L1e("a function is required");var r=kW(GP,IW,arguments);return D1e(r,1+K1e(0,t.length-(arguments.length-1)),!0)};var SW=function(){return kW(GP,EW,arguments)};fb?fb(tS.exports,"apply",{value:SW}):tS.exports.apply=SW});var BW=L((HXe,_W)=>{"use strict";p();y();var TW=QA(),PW=$P(),F1e=PW(TW("String.prototype.indexOf"));_W.exports=function(t,r){var n=TW(t,!!r);return typeof n=="function"&&F1e(t,".prototype.")>-1?PW(n):n}});var NW=L((jXe,OW)=>{"use strict";p();y();var nS=FH(),V1e=LP(),CW=$P(),ZP=BW(),rS=zb(),q1e=ZP("Object.prototype.toString"),RW=wE()(),MW=typeof globalThis>"u"?self:globalThis,JP=V1e(),QP=ZP("String.prototype.slice"),YP=Object.getPrototypeOf,H1e=ZP("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},iS={__proto__:null};RW&&rS&&YP?nS(JP,function(e){var t=new MW[e];if(Symbol.toStringTag in t){var r=YP(t),n=rS(r,Symbol.toStringTag);if(!n){var i=YP(r);n=rS(i,Symbol.toStringTag)}iS["$"+e]=CW(n.get)}}):nS(JP,function(e){var t=new MW[e],r=t.slice||t.set;r&&(iS["$"+e]=CW(r))});var W1e=function(t){var r=!1;return nS(iS,function(n,i){if(!r)try{"$"+n(t)===i&&(r=QP(i,1))}catch{}}),r},z1e=function(t){var r=!1;return nS(iS,function(n,i){if(!r)try{n(t),r=QP(i,1)}catch{}}),r};OW.exports=function(t){if(!t||typeof t!="object")return!1;if(!RW){var r=QP(q1e(t),8,-1);return H1e(JP,r)>-1?r:r!=="Object"?!1:z1e(t)}return rS?W1e(t):null}});var DW=L((YXe,UW)=>{p();y();var j1e=Object.prototype.hasOwnProperty,G1e=Object.prototype.toString;UW.exports=function(t,r,n){if(G1e.call(r)!=="[object Function]")throw new TypeError("iterator must be a function");var i=t.length;if(i===+i)for(var o=0;o<i;o++)r.call(n,t[o],o,t);else for(var s in t)j1e.call(t,s)&&r.call(n,t[s],s,t)}});var KW=L((QXe,LW)=>{"use strict";p();y();LW.exports=zb()});var zW=L((tet,WW)=>{"use strict";p();y();var FW=DW(),$1e=LP(),e5=vY(),Y1e=e5("Object.prototype.toString"),VW=wE()(),J1e=typeof globalThis>"u"?self:globalThis,qW=$1e(),Z1e=e5("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},Q1e=e5("String.prototype.slice"),HW={},oS=KW(),XP=Object.getPrototypeOf;VW&&oS&&XP&&FW(qW,function(e){var t=new J1e[e];if(Symbol.toStringTag in t){var r=XP(t),n=oS(r,Symbol.toStringTag);if(!n){var i=XP(r);n=oS(i,Symbol.toStringTag)}HW[e]=n.get}});var X1e=function(t){var r=!1;return FW(HW,function(n,i){if(!r)try{r=n.call(t)===i}catch{}}),r};WW.exports=function(t){if(!t||typeof t!="object")return!1;if(!VW||!(Symbol.toStringTag in t)){var r=Q1e(Y1e(t),8,-1);return Z1e(qW,r)>-1}return oS?X1e(t):!1}});var oz=L(wt=>{"use strict";p();y();var eve=AY(),tve=DH(),sa=NW(),jW=zW();function Op(e){return e.call.bind(e)}var GW=typeof BigInt<"u",$W=typeof Symbol<"u",ds=Op(Object.prototype.toString),rve=Op(Number.prototype.valueOf),nve=Op(String.prototype.valueOf),ive=Op(Boolean.prototype.valueOf);GW&&(YW=Op(BigInt.prototype.valueOf));var YW;$W&&(JW=Op(Symbol.prototype.valueOf));var JW;function db(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch{return!1}}wt.isArgumentsObject=eve;wt.isGeneratorFunction=tve;wt.isTypedArray=jW;function ove(e){return typeof Promise<"u"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}wt.isPromise=ove;function sve(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):jW(e)||QW(e)}wt.isArrayBufferView=sve;function ave(e){return sa(e)==="Uint8Array"}wt.isUint8Array=ave;function cve(e){return sa(e)==="Uint8ClampedArray"}wt.isUint8ClampedArray=cve;function uve(e){return sa(e)==="Uint16Array"}wt.isUint16Array=uve;function fve(e){return sa(e)==="Uint32Array"}wt.isUint32Array=fve;function lve(e){return sa(e)==="Int8Array"}wt.isInt8Array=lve;function dve(e){return sa(e)==="Int16Array"}wt.isInt16Array=dve;function hve(e){return sa(e)==="Int32Array"}wt.isInt32Array=hve;function pve(e){return sa(e)==="Float32Array"}wt.isFloat32Array=pve;function yve(e){return sa(e)==="Float64Array"}wt.isFloat64Array=yve;function mve(e){return sa(e)==="BigInt64Array"}wt.isBigInt64Array=mve;function gve(e){return sa(e)==="BigUint64Array"}wt.isBigUint64Array=gve;function sS(e){return ds(e)==="[object Map]"}sS.working=typeof Map<"u"&&sS(new Map);function bve(e){return typeof Map>"u"?!1:sS.working?sS(e):e instanceof Map}wt.isMap=bve;function aS(e){return ds(e)==="[object Set]"}aS.working=typeof Set<"u"&&aS(new Set);function xve(e){return typeof Set>"u"?!1:aS.working?aS(e):e instanceof Set}wt.isSet=xve;function cS(e){return ds(e)==="[object WeakMap]"}cS.working=typeof WeakMap<"u"&&cS(new WeakMap);function wve(e){return typeof WeakMap>"u"?!1:cS.working?cS(e):e instanceof WeakMap}wt.isWeakMap=wve;function r5(e){return ds(e)==="[object WeakSet]"}r5.working=typeof WeakSet<"u"&&r5(new WeakSet);function vve(e){return r5(e)}wt.isWeakSet=vve;function uS(e){return ds(e)==="[object ArrayBuffer]"}uS.working=typeof ArrayBuffer<"u"&&uS(new ArrayBuffer);function ZW(e){return typeof ArrayBuffer>"u"?!1:uS.working?uS(e):e instanceof ArrayBuffer}wt.isArrayBuffer=ZW;function fS(e){return ds(e)==="[object DataView]"}fS.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&fS(new DataView(new ArrayBuffer(1),0,1));function QW(e){return typeof DataView>"u"?!1:fS.working?fS(e):e instanceof DataView}wt.isDataView=QW;var t5=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function lb(e){return ds(e)==="[object SharedArrayBuffer]"}function XW(e){return typeof t5>"u"?!1:(typeof lb.working>"u"&&(lb.working=lb(new t5)),lb.working?lb(e):e instanceof t5)}wt.isSharedArrayBuffer=XW;function Ave(e){return ds(e)==="[object AsyncFunction]"}wt.isAsyncFunction=Ave;function Sve(e){return ds(e)==="[object Map Iterator]"}wt.isMapIterator=Sve;function Eve(e){return ds(e)==="[object Set Iterator]"}wt.isSetIterator=Eve;function Ive(e){return ds(e)==="[object Generator]"}wt.isGeneratorObject=Ive;function kve(e){return ds(e)==="[object WebAssembly.Module]"}wt.isWebAssemblyCompiledModule=kve;function ez(e){return db(e,rve)}wt.isNumberObject=ez;function tz(e){return db(e,nve)}wt.isStringObject=tz;function rz(e){return db(e,ive)}wt.isBooleanObject=rz;function nz(e){return GW&&db(e,YW)}wt.isBigIntObject=nz;function iz(e){return $W&&db(e,JW)}wt.isSymbolObject=iz;function Tve(e){return ez(e)||tz(e)||rz(e)||nz(e)||iz(e)}wt.isBoxedPrimitive=Tve;function Pve(e){return typeof Uint8Array<"u"&&(ZW(e)||XW(e))}wt.isAnyArrayBuffer=Pve;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(wt,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var az=L((aet,sz)=>{p();y();sz.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var Up=L(vt=>{p();y();var cz=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},i=0;i<r.length;i++)n[r[i]]=Object.getOwnPropertyDescriptor(t,r[i]);return n},_ve=/%[sdj%]/g;vt.format=function(e){if(!gS(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Qf(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(_ve,function(a){if(a==="%%")return"%";if(r>=i)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),s=n[r];r<i;s=n[++r])mS(s)||!Np(s)?o+=" "+s:o+=" "+Qf(s);return o};vt.deprecate=function(e,t){if(typeof process<"u"&&process.noDeprecation===!0)return e;if(typeof process>"u")return function(){return vt.deprecate(e,t).apply(this,arguments)};var r=!1;function n(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n};var lS={},uz=/^$/;T.NODE_DEBUG&&(dS=T.NODE_DEBUG,dS=dS.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),uz=new RegExp("^"+dS+"$","i"));var dS;vt.debuglog=function(e){if(e=e.toUpperCase(),!lS[e])if(uz.test(e)){var t=process.pid;lS[e]=function(){var r=vt.format.apply(vt,arguments);console.error("%s %d: %s",e,t,r)}}else lS[e]=function(){};return lS[e]};function Qf(e,t){var r={seen:[],stylize:Cve};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),s5(t)?r.showHidden=t:t&&vt._extend(r,t),jd(r.showHidden)&&(r.showHidden=!1),jd(r.depth)&&(r.depth=2),jd(r.colors)&&(r.colors=!1),jd(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Bve),pS(r,e,r.depth)}vt.inspect=Qf;Qf.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Qf.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function Bve(e,t){var r=Qf.styles[t];return r?"\x1B["+Qf.colors[r][0]+"m"+e+"\x1B["+Qf.colors[r][1]+"m":e}function Cve(e,t){return e}function Mve(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function pS(e,t,r){if(e.customInspect&&t&&hS(t.inspect)&&t.inspect!==vt.inspect&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return gS(n)||(n=pS(e,n,r)),n}var i=Rve(e,t);if(i)return i;var o=Object.keys(t),s=Mve(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),pb(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return n5(t);if(o.length===0){if(hS(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(hb(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(yS(t))return e.stylize(Date.prototype.toString.call(t),"date");if(pb(t))return n5(t)}var c="",u=!1,h=["{","}"];if(fz(t)&&(u=!0,h=["[","]"]),hS(t)){var l=t.name?": "+t.name:"";c=" [Function"+l+"]"}if(hb(t)&&(c=" "+RegExp.prototype.toString.call(t)),yS(t)&&(c=" "+Date.prototype.toUTCString.call(t)),pb(t)&&(c=" "+n5(t)),o.length===0&&(!u||t.length==0))return h[0]+c+h[1];if(r<0)return hb(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var g;return u?g=Ove(e,t,r,s,o):g=o.map(function(x){return o5(e,t,r,s,x,u)}),e.seen.pop(),Nve(g,c,h)}function Rve(e,t){if(jd(t))return e.stylize("undefined","undefined");if(gS(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(lz(t))return e.stylize(""+t,"number");if(s5(t))return e.stylize(""+t,"boolean");if(mS(t))return e.stylize("null","null")}function n5(e){return"["+Error.prototype.toString.call(e)+"]"}function Ove(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)dz(t,String(s))?o.push(o5(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(c){c.match(/^\d+$/)||o.push(o5(e,t,r,n,c,!0))}),o}function o5(e,t,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?c.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),dz(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(mS(r)?a=pS(e,c.value,null):a=pS(e,c.value,r-1),a.indexOf(`
`)>-1&&(o?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=e.stylize("[Circular]","special")),jd(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Nve(e,t,r){var n=0,i=e.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}vt.types=oz();function fz(e){return Array.isArray(e)}vt.isArray=fz;function s5(e){return typeof e=="boolean"}vt.isBoolean=s5;function mS(e){return e===null}vt.isNull=mS;function Uve(e){return e==null}vt.isNullOrUndefined=Uve;function lz(e){return typeof e=="number"}vt.isNumber=lz;function gS(e){return typeof e=="string"}vt.isString=gS;function Dve(e){return typeof e=="symbol"}vt.isSymbol=Dve;function jd(e){return e===void 0}vt.isUndefined=jd;function hb(e){return Np(e)&&a5(e)==="[object RegExp]"}vt.isRegExp=hb;vt.types.isRegExp=hb;function Np(e){return typeof e=="object"&&e!==null}vt.isObject=Np;function yS(e){return Np(e)&&a5(e)==="[object Date]"}vt.isDate=yS;vt.types.isDate=yS;function pb(e){return Np(e)&&(a5(e)==="[object Error]"||e instanceof Error)}vt.isError=pb;vt.types.isNativeError=pb;function hS(e){return typeof e=="function"}vt.isFunction=hS;function Lve(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}vt.isPrimitive=Lve;vt.isBuffer=az();function a5(e){return Object.prototype.toString.call(e)}function i5(e){return e<10?"0"+e.toString(10):e.toString(10)}var Kve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Fve(){var e=new Date,t=[i5(e.getHours()),i5(e.getMinutes()),i5(e.getSeconds())].join(":");return[e.getDate(),Kve[e.getMonth()],t].join(" ")}vt.log=function(){console.log("%s - %s",Fve(),vt.format.apply(vt,arguments))};vt.inherits=xY();vt._extend=function(e,t){if(!t||!Np(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};function dz(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var zd=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;vt.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(zd&&t[zd]){var r=t[zd];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,zd,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var n,i,o=new Promise(function(c,u){n=c,i=u}),s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);s.push(function(c,u){c?i(c):n(u)});try{t.apply(this,s)}catch(c){i(c)}return o}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),zd&&Object.defineProperty(r,zd,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,cz(t))};vt.promisify.custom=zd;function Vve(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function qve(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then(function(a){process.nextTick(s.bind(null,null,a))},function(a){process.nextTick(Vve.bind(null,a,s))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,cz(e)),t}vt.callbackify=qve});var l5=L((pet,yz)=>{"use strict";p();y();function Dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(r){return typeof r}:Dp=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dp(e)}function Hve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wve(e,t){return t&&(Dp(t)==="object"||typeof t=="function")?t:zve(e)}function zve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u5(e){return u5=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},u5(e)}function jve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f5(e,t)}function f5(e,t){return f5=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},f5(e,t)}var pz={},Lp,c5;function yb(e,t,r){r||(r=Error);function n(o,s,a){return typeof t=="string"?t:t(o,s,a)}var i=function(o){jve(s,o);function s(a,c,u){var h;return Hve(this,s),h=Wve(this,u5(s).call(this,n(a,c,u))),h.code=e,h}return s}(r);pz[e]=i}function hz(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function Gve(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function $ve(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function Yve(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}yb("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);yb("ERR_INVALID_ARG_TYPE",function(e,t,r){Lp===void 0&&(Lp=mb()),Lp(typeof e=="string","'name' must be a string");var n;typeof t=="string"&&Gve(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var i;if($ve(e," argument"))i="The ".concat(e," ").concat(n," ").concat(hz(t,"type"));else{var o=Yve(e,".")?"property":"argument";i='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat(hz(t,"type"))}return i+=". Received type ".concat(Dp(r)),i},TypeError);yb("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";c5===void 0&&(c5=Up());var n=c5.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError);yb("ERR_INVALID_RETURN_VALUE",function(e,t,r){var n;return r&&r.constructor&&r.constructor.name?n="instance of ".concat(r.constructor.name):n="type ".concat(Dp(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")},TypeError);yb("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Lp===void 0&&(Lp=mb()),Lp(t.length>0,"At least one arg needs to be specified");var n="The ",i=t.length;switch(t=t.map(function(o){return'"'.concat(o,'"')}),i){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,i-1).join(", "),n+=", and ".concat(t[i-1]," arguments");break}return"".concat(n," must be specified")},TypeError);yz.exports.codes=pz});var wz=L((get,xz)=>{"use strict";p();y();function Jve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){Zve(e,i,r[i])})}return e}function Zve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xve(e,t,r){return t&&mz(e.prototype,t),r&&mz(e,r),e}function Kp(e,t){return t&&(hs(t)==="object"||typeof t=="function")?t:d5(e)}function d5(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wb(e,t)}function h5(e){var t=typeof Map=="function"?new Map:void 0;return h5=function(n){if(n===null||!r2e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return bS(n,arguments,Xf(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),wb(i,n)},h5(e)}function t2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function bS(e,t,r){return t2e()?bS=Reflect.construct:bS=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&wb(u,s.prototype),u},bS.apply(null,arguments)}function r2e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function wb(e,t){return wb=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},wb(e,t)}function Xf(e){return Xf=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Xf(e)}function hs(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hs=function(r){return typeof r}:hs=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hs(e)}var n2e=Up(),p5=n2e.inspect,i2e=l5(),o2e=i2e.codes.ERR_INVALID_ARG_TYPE;function gz(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function s2e(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var aa="",gb="",bb="",ci="",Gd={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},a2e=10;function bz(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(n){r[n]=e[n]}),Object.defineProperty(r,"message",{value:e.message}),r}function xb(e){return p5(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function c2e(e,t,r){var n="",i="",o=0,s="",a=!1,c=xb(e),u=c.split(`
`),h=xb(t).split(`
`),l=0,g="";if(r==="strictEqual"&&hs(e)==="object"&&hs(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&h.length===1&&u[0]!==h[0]){var x=u[0].length+h[0].length;if(x<=a2e){if((hs(e)!=="object"||e===null)&&(hs(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(Gd[r],`

`)+"".concat(u[0]," !== ").concat(h[0],`
`)}else if(r!=="strictEqualObject"){var A=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(x<A){for(;u[0][l]===h[0][l];)l++;l>2&&(g=`
  `.concat(s2e(" ",l),"^"),l=0)}}}for(var E=u[u.length-1],C=h[h.length-1];E===C&&(l++<2?s=`
  `.concat(E).concat(s):n=E,u.pop(),h.pop(),!(u.length===0||h.length===0));)E=u[u.length-1],C=h[h.length-1];var M=Math.max(u.length,h.length);if(M===0){var N=c.split(`
`);if(N.length>30)for(N[26]="".concat(aa,"...").concat(ci);N.length>27;)N.pop();return"".concat(Gd.notIdentical,`

`).concat(N.join(`
`),`
`)}l>3&&(s=`
`.concat(aa,"...").concat(ci).concat(s),a=!0),n!==""&&(s=`
  `.concat(n).concat(s),n="");var R=0,V=Gd[r]+`
`.concat(gb,"+ actual").concat(ci," ").concat(bb,"- expected").concat(ci),q=" ".concat(aa,"...").concat(ci," Lines skipped");for(l=0;l<M;l++){var W=l-o;if(u.length<l+1)W>1&&l>2&&(W>4?(i+=`
`.concat(aa,"...").concat(ci),a=!0):W>3&&(i+=`
  `.concat(h[l-2]),R++),i+=`
  `.concat(h[l-1]),R++),o=l,n+=`
`.concat(bb,"-").concat(ci," ").concat(h[l]),R++;else if(h.length<l+1)W>1&&l>2&&(W>4?(i+=`
`.concat(aa,"...").concat(ci),a=!0):W>3&&(i+=`
  `.concat(u[l-2]),R++),i+=`
  `.concat(u[l-1]),R++),o=l,i+=`
`.concat(gb,"+").concat(ci," ").concat(u[l]),R++;else{var G=h[l],z=u[l],te=z!==G&&(!gz(z,",")||z.slice(0,-1)!==G);te&&gz(G,",")&&G.slice(0,-1)===z&&(te=!1,z+=","),te?(W>1&&l>2&&(W>4?(i+=`
`.concat(aa,"...").concat(ci),a=!0):W>3&&(i+=`
  `.concat(u[l-2]),R++),i+=`
  `.concat(u[l-1]),R++),o=l,i+=`
`.concat(gb,"+").concat(ci," ").concat(z),n+=`
`.concat(bb,"-").concat(ci," ").concat(G),R+=2):(i+=n,n="",(W===1||l===0)&&(i+=`
  `.concat(z),R++))}if(R>20&&l<M-2)return"".concat(V).concat(q,`
`).concat(i,`
`).concat(aa,"...").concat(ci).concat(n,`
`)+"".concat(aa,"...").concat(ci)}return"".concat(V).concat(a?q:"",`
`).concat(i).concat(n).concat(s).concat(g)}var u2e=function(e){e2e(t,e);function t(r){var n;if(Qve(this,t),hs(r)!=="object"||r===null)throw new o2e("options","Object",r);var i=r.message,o=r.operator,s=r.stackStartFn,a=r.actual,c=r.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,i!=null)n=Kp(this,Xf(t).call(this,String(i)));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(aa="\x1B[34m",gb="\x1B[32m",ci="\x1B[39m",bb="\x1B[31m"):(aa="",gb="",ci="",bb="")),hs(a)==="object"&&a!==null&&hs(c)==="object"&&c!==null&&"stack"in a&&a instanceof Error&&"stack"in c&&c instanceof Error&&(a=bz(a),c=bz(c)),o==="deepStrictEqual"||o==="strictEqual")n=Kp(this,Xf(t).call(this,c2e(a,c,o)));else if(o==="notDeepStrictEqual"||o==="notStrictEqual"){var h=Gd[o],l=xb(a).split(`
`);if(o==="notStrictEqual"&&hs(a)==="object"&&a!==null&&(h=Gd.notStrictEqualObject),l.length>30)for(l[26]="".concat(aa,"...").concat(ci);l.length>27;)l.pop();l.length===1?n=Kp(this,Xf(t).call(this,"".concat(h," ").concat(l[0]))):n=Kp(this,Xf(t).call(this,"".concat(h,`

`).concat(l.join(`
`),`
`)))}else{var g=xb(a),x="",A=Gd[o];o==="notDeepEqual"||o==="notEqual"?(g="".concat(Gd[o],`

`).concat(g),g.length>1024&&(g="".concat(g.slice(0,1021),"..."))):(x="".concat(xb(c)),g.length>512&&(g="".concat(g.slice(0,509),"...")),x.length>512&&(x="".concat(x.slice(0,509),"...")),o==="deepEqual"||o==="equal"?g="".concat(A,`

`).concat(g,`

should equal

`):x=" ".concat(o," ").concat(x)),n=Kp(this,Xf(t).call(this,"".concat(g).concat(x)))}return Error.stackTraceLimit=u,n.generatedMessage=!i,Object.defineProperty(d5(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=a,n.expected=c,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(d5(n),s),n.stack,n.name="AssertionError",Kp(n)}return Xve(t,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p5.custom,value:function(n,i){return p5(this,Jve({},i,{customInspect:!1,depth:0}))}}]),t}(h5(Error));xz.exports=u2e});var Sz=L((wet,Az)=>{"use strict";p();y();function vz(e,t){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!=null)for(var o=Object.keys(Object(i)),s=0,a=o.length;s<a;s++){var c=o[s],u=Object.getOwnPropertyDescriptor(i,c);u!==void 0&&u.enumerable&&(r[c]=i[c])}}return r}function f2e(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:vz})}Az.exports={assign:vz,polyfill:f2e}});var y5=L((Eet,Iz)=>{"use strict";p();y();var Ez=function(e){return e!==e};Iz.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Ez(t)&&Ez(r))}});var m5=L((Tet,kz)=>{"use strict";p();y();var l2e=y5();kz.exports=function(){return typeof Object.is=="function"?Object.is:l2e}});var Pz=L((Bet,Tz)=>{"use strict";p();y();var d2e=m5(),h2e=Wb();Tz.exports=function(){var t=d2e();return h2e(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var g5=L((Ret,Cz)=>{"use strict";p();y();var p2e=Wb(),y2e=oB(),m2e=y5(),_z=m5(),g2e=Pz(),Bz=y2e(_z(),Object);p2e(Bz,{getPolyfill:_z,implementation:m2e,shim:g2e});Cz.exports=Bz});var b5=L((Uet,Mz)=>{"use strict";p();y();Mz.exports=function(t){return t!==t}});var x5=L((Ket,Rz)=>{"use strict";p();y();var b2e=b5();Rz.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:b2e}});var Nz=L((qet,Oz)=>{"use strict";p();y();var x2e=Wb(),w2e=x5();Oz.exports=function(){var t=w2e();return x2e(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var Kz=L((zet,Lz)=>{"use strict";p();y();var v2e=oB(),A2e=Wb(),S2e=b5(),Uz=x5(),E2e=Nz(),Dz=v2e(Uz(),Number);A2e(Dz,{getPolyfill:Uz,implementation:S2e,shim:E2e});Lz.exports=Dz});var ij=L(($et,nj)=>{"use strict";p();y();function Fz(e,t){return T2e(e)||k2e(e,t)||I2e()}function I2e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function k2e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s=e[Symbol.iterator](),a;!(n=(a=s.next()).done)&&(r.push(a.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,o=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw o}}return r}function T2e(e){if(Array.isArray(e))return e}function Ro(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ro=function(r){return typeof r}:Ro=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ro(e)}var P2e=/a/g.flags!==void 0,IS=function(t){var r=[];return t.forEach(function(n){return r.push(n)}),r},Vz=function(t){var r=[];return t.forEach(function(n,i){return r.push([i,n])}),r},Qz=Object.is?Object.is:g5(),SS=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},w5=Number.isNaN?Number.isNaN:Kz();function A5(e){return e.call.bind(e)}var Ab=A5(Object.prototype.hasOwnProperty),ES=A5(Object.prototype.propertyIsEnumerable),qz=A5(Object.prototype.toString),qi=Up().types,_2e=qi.isAnyArrayBuffer,B2e=qi.isArrayBufferView,Hz=qi.isDate,xS=qi.isMap,Wz=qi.isRegExp,wS=qi.isSet,C2e=qi.isNativeError,M2e=qi.isBoxedPrimitive,zz=qi.isNumberObject,jz=qi.isStringObject,Gz=qi.isBooleanObject,$z=qi.isBigIntObject,R2e=qi.isSymbolObject,O2e=qi.isFloat32Array,N2e=qi.isFloat64Array;function U2e(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function vS(e){return Object.keys(e).filter(U2e).concat(SS(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function Xz(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}var AS=void 0,D2e=!0,L2e=!1,v5=0,S5=1,ej=2,tj=3;function K2e(e,t){return P2e?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function F2e(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function V2e(e,t){return e.byteLength!==t.byteLength?!1:Xz(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function q2e(e,t){return e.byteLength===t.byteLength&&Xz(new Uint8Array(e),new Uint8Array(t))===0}function H2e(e,t){return zz(e)?zz(t)&&Qz(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):jz(e)?jz(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):Gz(e)?Gz(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):$z(e)?$z(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):R2e(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function ps(e,t,r,n){if(e===t)return e!==0?!0:r?Qz(e,t):!0;if(r){if(Ro(e)!=="object")return typeof e=="number"&&w5(e)&&w5(t);if(Ro(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||Ro(e)!=="object")return t===null||Ro(t)!=="object"?e==t:!1;if(t===null||Ro(t)!=="object")return!1}var i=qz(e),o=qz(t);if(i!==o)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var s=vS(e,AS),a=vS(t,AS);return s.length!==a.length?!1:vb(e,t,r,n,S5,s)}if(i==="[object Object]"&&(!xS(e)&&xS(t)||!wS(e)&&wS(t)))return!1;if(Hz(e)){if(!Hz(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(Wz(e)){if(!Wz(t)||!K2e(e,t))return!1}else if(C2e(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(B2e(e)){if(!r&&(O2e(e)||N2e(e))){if(!F2e(e,t))return!1}else if(!V2e(e,t))return!1;var c=vS(e,AS),u=vS(t,AS);return c.length!==u.length?!1:vb(e,t,r,n,v5,c)}else{if(wS(e))return!wS(t)||e.size!==t.size?!1:vb(e,t,r,n,ej);if(xS(e))return!xS(t)||e.size!==t.size?!1:vb(e,t,r,n,tj);if(_2e(e)){if(!q2e(e,t))return!1}else if(M2e(e)&&!H2e(e,t))return!1}return vb(e,t,r,n,v5)}function Yz(e,t){return t.filter(function(r){return ES(e,r)})}function vb(e,t,r,n,i,o){if(arguments.length===5){o=Object.keys(e);var s=Object.keys(t);if(o.length!==s.length)return!1}for(var a=0;a<o.length;a++)if(!Ab(t,o[a]))return!1;if(r&&arguments.length===5){var c=SS(e);if(c.length!==0){var u=0;for(a=0;a<c.length;a++){var h=c[a];if(ES(e,h)){if(!ES(t,h))return!1;o.push(h),u++}else if(ES(t,h))return!1}var l=SS(t);if(c.length!==l.length&&Yz(t,l).length!==u)return!1}else{var g=SS(t);if(g.length!==0&&Yz(t,g).length!==0)return!1}}if(o.length===0&&(i===v5||i===S5&&e.length===0||e.size===0))return!0;if(n===void 0)n={val1:new Map,val2:new Map,position:0};else{var x=n.val1.get(e);if(x!==void 0){var A=n.val2.get(t);if(A!==void 0)return x===A}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var E=$2e(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),E}function Jz(e,t,r,n){for(var i=IS(e),o=0;o<i.length;o++){var s=i[o];if(ps(t,s,r,n))return e.delete(s),!0}return!1}function rj(e){switch(Ro(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(w5(e))return!1}return!0}function W2e(e,t,r){var n=rj(r);return n??(t.has(n)&&!e.has(n))}function z2e(e,t,r,n,i){var o=rj(r);if(o!=null)return o;var s=t.get(o);return s===void 0&&!t.has(o)||!ps(n,s,!1,i)?!1:!e.has(o)&&ps(n,s,!1,i)}function j2e(e,t,r,n){for(var i=null,o=IS(e),s=0;s<o.length;s++){var a=o[s];if(Ro(a)==="object"&&a!==null)i===null&&(i=new Set),i.add(a);else if(!t.has(a)){if(r||!W2e(e,t,a))return!1;i===null&&(i=new Set),i.add(a)}}if(i!==null){for(var c=IS(t),u=0;u<c.length;u++){var h=c[u];if(Ro(h)==="object"&&h!==null){if(!Jz(i,h,r,n))return!1}else if(!r&&!e.has(h)&&!Jz(i,h,r,n))return!1}return i.size===0}return!0}function Zz(e,t,r,n,i,o){for(var s=IS(e),a=0;a<s.length;a++){var c=s[a];if(ps(r,c,i,o)&&ps(n,t.get(c),i,o))return e.delete(c),!0}return!1}function G2e(e,t,r,n){for(var i=null,o=Vz(e),s=0;s<o.length;s++){var a=Fz(o[s],2),c=a[0],u=a[1];if(Ro(c)==="object"&&c!==null)i===null&&(i=new Set),i.add(c);else{var h=t.get(c);if(h===void 0&&!t.has(c)||!ps(u,h,r,n)){if(r||!z2e(e,t,c,u,n))return!1;i===null&&(i=new Set),i.add(c)}}}if(i!==null){for(var l=Vz(t),g=0;g<l.length;g++){var x=Fz(l[g],2),c=x[0],A=x[1];if(Ro(c)==="object"&&c!==null){if(!Zz(i,e,c,A,r,n))return!1}else if(!r&&(!e.has(c)||!ps(e.get(c),A,!1,n))&&!Zz(i,e,c,A,!1,n))return!1}return i.size===0}return!0}function $2e(e,t,r,n,i,o){var s=0;if(o===ej){if(!j2e(e,t,r,i))return!1}else if(o===tj){if(!G2e(e,t,r,i))return!1}else if(o===S5)for(;s<e.length;s++)if(Ab(e,s)){if(!Ab(t,s)||!ps(e[s],t[s],r,i))return!1}else{if(Ab(t,s))return!1;for(var a=Object.keys(e);s<a.length;s++){var c=a[s];if(!Ab(t,c)||!ps(e[c],t[c],r,i))return!1}return a.length===Object.keys(t).length}for(s=0;s<n.length;s++){var u=n[s];if(!ps(e[u],t[u],r,i))return!1}return!0}function Y2e(e,t){return ps(e,t,L2e)}function J2e(e,t){return ps(e,t,D2e)}nj.exports={isDeepEqual:Y2e,isDeepStrictEqual:J2e}});var mb=L((Zet,wj)=>{"use strict";p();y();function el(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?el=function(r){return typeof r}:el=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},el(e)}function Z2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Q2e=l5(),Eb=Q2e.codes,oj=Eb.ERR_AMBIGUOUS_ARGUMENT,Sb=Eb.ERR_INVALID_ARG_TYPE,X2e=Eb.ERR_INVALID_ARG_VALUE,eAe=Eb.ERR_INVALID_RETURN_VALUE,rl=Eb.ERR_MISSING_ARGS,$d=wz(),tAe=Up(),rAe=tAe.inspect,uj=Up().types,nAe=uj.isPromise,E5=uj.isRegExp,iAe=Object.assign?Object.assign:Sz().assign,fj=Object.is?Object.is:g5(),tl,kS;function Ib(){var e=ij();tl=e.isDeepEqual,kS=e.isDeepStrictEqual}var sj=!1,Pr=wj.exports=I5,TS={};function ca(e){throw e.message instanceof Error?e.message:new $d(e)}function lj(e,t,r,n,i){var o=arguments.length,s;if(o===0)s="Failed";else if(o===1)r=e,e=void 0;else{if(sj===!1){sj=!0;var a=process.emitWarning?process.emitWarning:console.warn.bind(console);a("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}o===2&&(n="!=")}if(r instanceof Error)throw r;var c={actual:e,expected:t,operator:n===void 0?"fail":n,stackStartFn:i||lj};r!==void 0&&(c.message=r);var u=new $d(c);throw s&&(u.message=s,u.generatedMessage=!0),u}Pr.fail=lj;Pr.AssertionError=$d;function dj(e,t,r,n){if(!r){var i=!1;if(t===0)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new $d({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function I5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];dj.apply(void 0,[I5,t.length].concat(t))}Pr.ok=I5;Pr.equal=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");t!=r&&ca({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})};Pr.notEqual=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");t==r&&ca({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})};Pr.deepEqual=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");tl===void 0&&Ib(),tl(t,r)||ca({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})};Pr.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");tl===void 0&&Ib(),tl(t,r)&&ca({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})};Pr.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");tl===void 0&&Ib(),kS(t,r)||ca({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})};Pr.notDeepStrictEqual=hj;function hj(e,t,r){if(arguments.length<2)throw new rl("actual","expected");tl===void 0&&Ib(),kS(e,t)&&ca({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:hj})}Pr.strictEqual=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");fj(t,r)||ca({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})};Pr.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new rl("actual","expected");fj(t,r)&&ca({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var aj=function e(t,r,n){var i=this;Z2e(this,e),r.forEach(function(o){o in t&&(n!==void 0&&typeof n[o]=="string"&&E5(t[o])&&t[o].test(n[o])?i[o]=n[o]:i[o]=t[o])})};function oAe(e,t,r,n,i,o){if(!(r in e)||!kS(e[r],t[r])){if(!n){var s=new aj(e,i),a=new aj(t,i,e),c=new $d({actual:s,expected:a,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=e,c.expected=t,c.operator=o.name,c}ca({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function pj(e,t,r,n){if(typeof t!="function"){if(E5(t))return t.test(e);if(arguments.length===2)throw new Sb("expected",["Function","RegExp"],t);if(el(e)!=="object"||e===null){var i=new $d({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(t);if(t instanceof Error)o.push("name","message");else if(o.length===0)throw new X2e("error",t,"may not be an empty object");return tl===void 0&&Ib(),o.forEach(function(s){typeof e[s]=="string"&&E5(t[s])&&t[s].test(e[s])||oAe(e,t,s,r,o,n)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function yj(e){if(typeof e!="function")throw new Sb("fn","Function",e);try{e()}catch(t){return t}return TS}function cj(e){return nAe(e)||e!==null&&el(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function mj(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!cj(t))throw new eAe("instance of Promise","promiseFn",t)}else if(cj(e))t=e;else throw new Sb("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return TS}).catch(function(r){return r})})}function gj(e,t,r,n){if(typeof r=="string"){if(arguments.length===4)throw new Sb("error",["Object","Error","Function","RegExp"],r);if(el(t)==="object"&&t!==null){if(t.message===r)throw new oj("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new oj("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(r!=null&&el(r)!=="object"&&typeof r!="function")throw new Sb("error",["Object","Error","Function","RegExp"],r);if(t===TS){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o=e.name==="rejects"?"rejection":"exception";ca({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(r&&!pj(t,r,n,e))throw t}function bj(e,t,r,n){if(t!==TS){if(typeof r=="string"&&(n=r,r=void 0),!r||pj(t,r)){var i=n?": ".concat(n):".",o=e.name==="doesNotReject"?"rejection":"exception";ca({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Pr.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];gj.apply(void 0,[e,yj(t)].concat(n))};Pr.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return mj(t).then(function(o){return gj.apply(void 0,[e,o].concat(n))})};Pr.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];bj.apply(void 0,[e,yj(t)].concat(n))};Pr.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return mj(t).then(function(o){return bj.apply(void 0,[e,o].concat(n))})};Pr.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";el(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=rAe(t);var n=new $d({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if(typeof i=="string"){var o=i.split(`
`);o.shift();for(var s=n.stack.split(`
`),a=0;a<o.length;a++){var c=s.indexOf(o[a]);if(c!==-1){s=s.slice(0,c);break}}n.stack="".concat(s.join(`
`),`
`).concat(o.join(`
`))}throw n}};function xj(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];dj.apply(void 0,[xj,t.length].concat(t))}Pr.strict=iAe(xj,Pr,{equal:Pr.strictEqual,deepEqual:Pr.deepStrictEqual,notEqual:Pr.notStrictEqual,notDeepEqual:Pr.notDeepStrictEqual});Pr.strict.strict=Pr.strict});var Vp=L(Tt=>{"use strict";p();y();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.baToJSON=Tt.addHexPrefix=Tt.toUnsigned=Tt.fromSigned=Tt.bufferToHex=Tt.bufferToInt=Tt.toBuffer=Tt.stripZeros=Tt.unpad=Tt.setLengthRight=Tt.setLength=Tt.setLengthLeft=Tt.zeros=void 0;var Fp=Fd(),k5=Ld();Tt.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};Tt.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=Tt.zeros(t);return e=Tt.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};Tt.setLength=Tt.setLengthLeft;Tt.setLengthRight=function(e,t){return Tt.setLength(e,t,!0)};Tt.unpad=function(e){e=Fp.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};Tt.stripZeros=Tt.unpad;Tt.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Fp.isHexString(e))e=Buffer.from(Fp.padToEven(Fp.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Fp.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(k5.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};Tt.bufferToInt=function(e){return new k5(Tt.toBuffer(e)).toNumber()};Tt.bufferToHex=function(e){return e=Tt.toBuffer(e),"0x"+e.toString("hex")};Tt.fromSigned=function(e){return new k5(e).fromTwos(256)};Tt.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};Tt.addHexPrefix=function(e){return typeof e!="string"||Fp.isHexPrefixed(e)?e:"0x"+e};Tt.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(Tt.baToJSON(e[r]));return t}}});var vj=L(T5=>{"use strict";p();y();Object.defineProperty(T5,"__esModule",{value:!0});function sAe(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}T5.createHashFunction=sAe});var Ej=L((stt,Sj)=>{p();y();var{Transform:aAe}=q_();Sj.exports=e=>class Aj extends aAe{constructor(r,n,i,o,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=o,this._options=s,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Aj(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Tj=L((utt,kj)=>{p();y();var{Transform:cAe}=q_();kj.exports=e=>class Ij extends cAe{constructor(r,n,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let o=null;try{this.update(r,n)}catch(s){o=s}i(o)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new Ij(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var _j=L((dtt,Pj)=>{p();y();var uAe=Ej(),fAe=Tj();Pj.exports=function(e){let t=uAe(e),r=fAe(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var Mj=L(Cj=>{p();y();var Bj=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Cj.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],s=e[4]^e[14]^e[24]^e[34]^e[44],a=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],h=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49],g=h^(i<<1|o>>>31),x=l^(o<<1|i>>>31),A=e[0]^g,E=e[1]^x,C=e[10]^g,M=e[11]^x,N=e[20]^g,R=e[21]^x,V=e[30]^g,q=e[31]^x,W=e[40]^g,G=e[41]^x;g=r^(s<<1|a>>>31),x=n^(a<<1|s>>>31);let z=e[2]^g,te=e[3]^x,_=e[12]^g,f=e[13]^x,m=e[22]^g,b=e[23]^x,w=e[32]^g,v=e[33]^x,P=e[42]^g,B=e[43]^x;g=i^(c<<1|u>>>31),x=o^(u<<1|c>>>31);let k=e[4]^g,d=e[5]^x,S=e[14]^g,F=e[15]^x,U=e[24]^g,D=e[25]^x,Y=e[34]^g,j=e[35]^x,X=e[44]^g,fe=e[45]^x;g=s^(h<<1|l>>>31),x=a^(l<<1|h>>>31);let ue=e[6]^g,K=e[7]^x,Z=e[16]^g,J=e[17]^x,ne=e[26]^g,pe=e[27]^x,re=e[36]^g,ae=e[37]^x,ut=e[46]^g,Ee=e[47]^x;g=c^(r<<1|n>>>31),x=u^(n<<1|r>>>31);let _e=e[8]^g,Lo=e[9]^x,Oe=e[18]^g,Be=e[19]^x,ya=e[28]^g,Ce=e[29]^x,nt=e[38]^g,gu=e[39]^x,it=e[48]^g,ot=e[49]^x,dc=A,Ne=E,Ue=M<<4|C>>>28,hc=C<<4|M>>>28,De=N<<3|R>>>29,Le=R<<3|N>>>29,pc=q<<9|V>>>23,Ke=V<<9|q>>>23,Fe=W<<18|G>>>14,yc=G<<18|W>>>14,Ve=z<<1|te>>>31,qe=te<<1|z>>>31,mc=f<<12|_>>>20,He=_<<12|f>>>20,We=m<<10|b>>>22,gc=b<<10|m>>>22,ze=v<<13|w>>>19,je=w<<13|v>>>19,bc=P<<2|B>>>30,Ge=B<<2|P>>>30,$e=d<<30|k>>>2,xc=k<<30|d>>>2,Ye=S<<6|F>>>26,Je=F<<6|S>>>26,wc=D<<11|U>>>21,Ze=U<<11|D>>>21,Qe=Y<<15|j>>>17,vc=j<<15|Y>>>17,Xe=fe<<29|X>>>3,et=X<<29|fe>>>3,Ac=ue<<28|K>>>4,tt=K<<28|ue>>>4,rt=J<<23|Z>>>9,bs=Z<<23|J>>>9,xs=ne<<25|pe>>>7,ws=pe<<25|ne>>>7,vs=re<<21|ae>>>11,As=ae<<21|re>>>11,Ss=Ee<<24|ut>>>8,Es=ut<<24|Ee>>>8,Is=_e<<27|Lo>>>5,ks=Lo<<27|_e>>>5,Ts=Oe<<20|Be>>>12,Ps=Be<<20|Oe>>>12,_s=Ce<<7|ya>>>25,Bs=ya<<7|Ce>>>25,Cs=nt<<8|gu>>>24,Ms=gu<<8|nt>>>24,Rs=it<<14|ot>>>18,Os=ot<<14|it>>>18;e[0]=dc^~mc&wc,e[1]=Ne^~He&Ze,e[10]=Ac^~Ts&De,e[11]=tt^~Ps&Le,e[20]=Ve^~Ye&xs,e[21]=qe^~Je&ws,e[30]=Is^~Ue&We,e[31]=ks^~hc&gc,e[40]=$e^~rt&_s,e[41]=xc^~bs&Bs,e[2]=mc^~wc&vs,e[3]=He^~Ze&As,e[12]=Ts^~De&ze,e[13]=Ps^~Le&je,e[22]=Ye^~xs&Cs,e[23]=Je^~ws&Ms,e[32]=Ue^~We&Qe,e[33]=hc^~gc&vc,e[42]=rt^~_s&pc,e[43]=bs^~Bs&Ke,e[4]=wc^~vs&Rs,e[5]=Ze^~As&Os,e[14]=De^~ze&Xe,e[15]=Le^~je&et,e[24]=xs^~Cs&Fe,e[25]=ws^~Ms&yc,e[34]=We^~Qe&Ss,e[35]=gc^~vc&Es,e[44]=_s^~pc&bc,e[45]=Bs^~Ke&Ge,e[6]=vs^~Rs&dc,e[7]=As^~Os&Ne,e[16]=ze^~Xe&Ac,e[17]=je^~et&tt,e[26]=Cs^~Fe&Ve,e[27]=Ms^~yc&qe,e[36]=Qe^~Ss&Is,e[37]=vc^~Es&ks,e[46]=pc^~bc&$e,e[47]=Ke^~Ge&xc,e[8]=Rs^~dc&mc,e[9]=Os^~Ne&He,e[18]=Xe^~Ac&Ts,e[19]=et^~tt&Ps,e[28]=Fe^~Ve&Ye,e[29]=yc^~qe&Je,e[38]=Ss^~Is&Ue,e[39]=Es^~ks&hc,e[48]=bc^~$e&rt,e[49]=Ge^~xc&bs,e[0]^=Bj[t*2],e[1]^=Bj[t*2+1]}}});var Oj=L((btt,Rj)=>{p();y();var PS=Mj();function qp(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}qp.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};qp.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(PS.p1600(this.state),this.count=0)};qp.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&PS.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),PS.p1600(this.state),this.count=0,this.squeezing=!0};qp.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(PS.p1600(this.state),this.count=0);return t};qp.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};Rj.exports=qp});var Uj=L((vtt,Nj)=>{p();y();Nj.exports=_j()(Oj())});var Dj=L(Hp=>{"use strict";p();y();Object.defineProperty(Hp,"__esModule",{value:!0});var _S=vj(),BS=Uj();Hp.keccak224=_S.createHashFunction(function(){return BS("keccak224")});Hp.keccak256=_S.createHashFunction(function(){return BS("keccak256")});Hp.keccak384=_S.createHashFunction(function(){return BS("keccak384")});Hp.keccak512=_S.createHashFunction(function(){return BS("keccak512")})});var RS=L(oo=>{"use strict";p();y();Object.defineProperty(oo,"__esModule",{value:!0});oo.rlphash=oo.ripemd160=oo.sha256=oo.keccak256=oo.keccak=void 0;var MS=Dj(),lAe=MS.keccak224,dAe=MS.keccak384,hAe=MS.keccak256,pAe=MS.keccak512,Lj=H_(),yAe=Fd(),mAe=YA(),CS=Vp();oo.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!yAe.isHexString(e)?e=Buffer.from(e,"utf8"):e=CS.toBuffer(e),t||(t=256),t){case 224:return lAe(e);case 256:return hAe(e);case 384:return dAe(e);case 512:return pAe(e);default:throw new Error("Invald algorithm: keccak"+t)}};oo.keccak256=function(e){return oo.keccak(e)};oo.sha256=function(e){return e=CS.toBuffer(e),Lj("sha256").update(e).digest()};oo.ripemd160=function(e,t){e=CS.toBuffer(e);var r=Lj("rmd160").update(e).digest();return t===!0?CS.setLength(r,32):r};oo.rlphash=function(e){return oo.keccak(mAe.encode(e))}});var Kj=L(mt=>{"use strict";p();y();Object.defineProperty(mt,"__esModule",{value:!0});mt.importPublic=mt.privateToPublic=mt.privateToAddress=mt.publicToAddress=mt.pubToAddress=mt.isValidPublic=mt.isValidPrivate=mt.isPrecompiled=mt.generateAddress2=mt.generateAddress=mt.isValidChecksumAddress=mt.toChecksumAddress=mt.isZeroAddress=mt.isValidAddress=mt.zeroAddress=void 0;var P5=mb(),gAe=Fd(),Wp=GA(),bAe=Ld(),ua=Vp(),zp=RS();mt.zeroAddress=function(){var e=20,t=ua.zeros(e);return ua.bufferToHex(t)};mt.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};mt.isZeroAddress=function(e){var t=mt.zeroAddress();return t===ua.addHexPrefix(e)};mt.toChecksumAddress=function(e,t){e=gAe.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=zp.keccak(r+e).toString("hex"),i="0x",o=0;o<e.length;o++)parseInt(n[o],16)>=8?i+=e[o].toUpperCase():i+=e[o];return i};mt.isValidChecksumAddress=function(e,t){return mt.isValidAddress(e)&&mt.toChecksumAddress(e,t)===e};mt.generateAddress=function(e,t){e=ua.toBuffer(e);var r=new bAe(t);return r.isZero()?zp.rlphash([e,null]).slice(-20):zp.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};mt.generateAddress2=function(e,t,r){var n=ua.toBuffer(e),i=ua.toBuffer(t),o=ua.toBuffer(r);P5(n.length===20),P5(i.length===32);var s=zp.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,zp.keccak256(o)]));return s.slice(-20)};mt.isPrecompiled=function(e){var t=ua.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};mt.isValidPrivate=function(e){return Wp.privateKeyVerify(e)};mt.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Wp.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Wp.publicKeyVerify(e):!1};mt.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=ua.toBuffer(e),t&&e.length!==64&&(e=Wp.publicKeyConvert(e,!1).slice(1)),P5(e.length===64),zp.keccak(e).slice(-20)};mt.publicToAddress=mt.pubToAddress;mt.privateToAddress=function(e){return mt.publicToAddress(mt.privateToPublic(e))};mt.privateToPublic=function(e){return e=ua.toBuffer(e),Wp.publicKeyCreate(e,!1).slice(1)};mt.importPublic=function(e){return e=ua.toBuffer(e),e.length!==64&&(e=Wp.publicKeyConvert(e,!1).slice(1)),e}});var Fj=L(so=>{"use strict";p();y();Object.defineProperty(so,"__esModule",{value:!0});so.hashPersonalMessage=so.isValidSignature=so.fromRpcSig=so.toRpcSig=so.ecrecover=so.ecsign=void 0;var _5=GA(),OS=Ld(),Yd=Vp(),xAe=RS();so.ecsign=function(e,t,r){var n=_5.sign(e,t),i=n.recovery,o={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return o};so.ecrecover=function(e,t,r,n,i){var o=Buffer.concat([Yd.setLength(r,32),Yd.setLength(n,32)],64),s=B5(t,i);if(!C5(s))throw new Error("Invalid signature v value");var a=_5.recover(e,o,s);return _5.publicKeyConvert(a,!1).slice(1)};so.toRpcSig=function(e,t,r,n){var i=B5(e,n);if(!C5(i))throw new Error("Invalid signature v value");return Yd.bufferToHex(Buffer.concat([Yd.setLengthLeft(t,32),Yd.setLengthLeft(r,32),Yd.toBuffer(e)]))};so.fromRpcSig=function(e){var t=Yd.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};so.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var o=new OS("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new OS("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!C5(B5(e,i)))return!1;var a=new OS(t),c=new OS(r);return!(a.isZero()||a.gt(s)||c.isZero()||c.gt(s)||n&&c.cmp(o)===1)};so.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return xAe.keccak(Buffer.concat([t,e]))};function B5(e,t){return t?e-(2*t+35):e-27}function C5(e){return e===0||e===1}});var Hj=L(US=>{"use strict";p();y();Object.defineProperty(US,"__esModule",{value:!0});US.defineProperties=void 0;var Vj=mb(),wAe=Fd(),qj=YA(),NS=Vp();US.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var o={};return e._fields.forEach(function(s){o[s]="0x"+e[s].toString("hex")}),o}return NS.baToJSON(e.raw)},e.serialize=function(){return qj.encode(e.raw)},t.forEach(function(i,o){e._fields.push(i.name);function s(){return e.raw[o]}function a(c){c=NS.toBuffer(c),c.toString("hex")==="00"&&!i.allowZero&&(c=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(c=NS.stripZeros(c),Vj(i.length>=c.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&c.length===0)&&i.length&&Vj(i.length===c.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[o]=c}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:s,set:a}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:a,get:s})}),r)if(typeof r=="string"&&(r=Buffer.from(wAe.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=qj.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,o){e[e._fields[o]]=NS.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var kb=L(En=>{"use strict";p();y();var vAe=En&&En.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jp=En&&En.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&vAe(t,e,r)};Object.defineProperty(En,"__esModule",{value:!0});En.secp256k1=En.rlp=En.BN=void 0;var AAe=GA();En.secp256k1=AAe;var SAe=Fd(),EAe=Ld();En.BN=EAe;var IAe=YA();En.rlp=IAe;Object.assign(En,SAe);jp(OH(),En);jp(Kj(),En);jp(RS(),En);jp(Fj(),En);jp(Vp(),En);jp(Hj(),En)});var Tb=L(ao=>{"use strict";p();y();Object.defineProperty(ao,"__esModule",{value:!0});ao.normalize=ao.recoverPublicKey=ao.concatSig=ao.legacyToBuffer=ao.isNullish=ao.padWithZeroes=void 0;var ys=kb(),M5=Fd();function R5(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}ao.padWithZeroes=R5;function kAe(e){return e==null}ao.isNullish=kAe;function TAe(e){return typeof e=="string"&&!M5.isHexString(e)?Buffer.from(e):ys.toBuffer(e)}ao.legacyToBuffer=TAe;function PAe(e,t,r){let n=ys.fromSigned(t),i=ys.fromSigned(r),o=ys.bufferToInt(e),s=R5(ys.toUnsigned(n).toString("hex"),64),a=R5(ys.toUnsigned(i).toString("hex"),64),c=M5.stripHexPrefix(M5.intToHex(o));return ys.addHexPrefix(s.concat(a,c))}ao.concatSig=PAe;function _Ae(e,t){let r=ys.fromRpcSig(t);return ys.ecrecover(e,r.v,r.r,r.s)}ao.recoverPublicKey=_Ae;function BAe(e){if(e){if(typeof e=="number"){let t=ys.toBuffer(e);e=ys.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return ys.addHexPrefix(e.toLowerCase())}}ao.normalize=BAe});var zj=L(nl=>{"use strict";p();y();Object.defineProperty(nl,"__esModule",{value:!0});nl.extractPublicKey=nl.recoverPersonalSignature=nl.personalSign=void 0;var Gp=kb(),nc=Tb();function CAe({privateKey:e,data:t}){if(nc.isNullish(t))throw new Error("Missing data parameter");if(nc.isNullish(e))throw new Error("Missing privateKey parameter");let r=nc.legacyToBuffer(t),n=Gp.hashPersonalMessage(r),i=Gp.ecsign(n,e);return nc.concatSig(Gp.toBuffer(i.v),i.r,i.s)}nl.personalSign=CAe;function MAe({data:e,signature:t}){if(nc.isNullish(e))throw new Error("Missing data parameter");if(nc.isNullish(t))throw new Error("Missing signature parameter");let r=Wj(e,t),n=Gp.publicToAddress(r);return Gp.bufferToHex(n)}nl.recoverPersonalSignature=MAe;function RAe({data:e,signature:t}){if(nc.isNullish(e))throw new Error("Missing data parameter");if(nc.isNullish(t))throw new Error("Missing signature parameter");return`0x${Wj(e,t).toString("hex")}`}nl.extractPublicKey=RAe;function Wj(e,t){let r=Gp.hashPersonalMessage(nc.legacyToBuffer(e));return nc.recoverPublicKey(r,t)}});var Gj=L((jj,O5)=>{p();y();(function(e,t){"use strict";function r(_,f){if(!_)throw new Error(f||"Assertion failed")}function n(_,f){_.super_=f;var m=function(){};m.prototype=f.prototype,_.prototype=new m,_.prototype.constructor=_}function i(_,f,m){if(i.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((f==="le"||f==="be")&&(m=f,f=10),this._init(_||0,f||10,m||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof self<"u"&&typeof self.Buffer<"u"?o=self.Buffer:o=W_().Buffer}catch{}i.isBN=function(f){return f instanceof i?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===i.wordSize&&Array.isArray(f.words)},i.max=function(f,m){return f.cmp(m)>0?f:m},i.min=function(f,m){return f.cmp(m)<0?f:m},i.prototype._init=function(f,m,b){if(typeof f=="number")return this._initNumber(f,m,b);if(typeof f=="object")return this._initArray(f,m,b);m==="hex"&&(m=16),r(m===(m|0)&&m>=2&&m<=36),f=f.toString().replace(/\s+/g,"");var w=0;f[0]==="-"&&(w++,this.negative=1),w<f.length&&(m===16?this._parseHex(f,w,b):(this._parseBase(f,m,w),b==="le"&&this._initArray(this.toArray(),m,b)))},i.prototype._initNumber=function(f,m,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(r(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),m,b)},i.prototype._initArray=function(f,m,b){if(r(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v,P,B=0;if(b==="be")for(w=f.length-1,v=0;w>=0;w-=3)P=f[w]|f[w-1]<<8|f[w-2]<<16,this.words[v]|=P<<B&67108863,this.words[v+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,v++);else if(b==="le")for(w=0,v=0;w<f.length;w+=3)P=f[w]|f[w+1]<<8|f[w+2]<<16,this.words[v]|=P<<B&67108863,this.words[v+1]=P>>>26-B&67108863,B+=24,B>=26&&(B-=26,v++);return this.strip()};function s(_,f){var m=_.charCodeAt(f);return m>=65&&m<=70?m-55:m>=97&&m<=102?m-87:m-48&15}function a(_,f,m){var b=s(_,m);return m-1>=f&&(b|=s(_,m-1)<<4),b}i.prototype._parseHex=function(f,m,b){this.length=Math.ceil((f.length-m)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var v=0,P=0,B;if(b==="be")for(w=f.length-1;w>=m;w-=2)B=a(f,m,w)<<v,this.words[P]|=B&67108863,v>=18?(v-=18,P+=1,this.words[P]|=B>>>26):v+=8;else{var k=f.length-m;for(w=k%2===0?m+1:m;w<f.length;w+=2)B=a(f,m,w)<<v,this.words[P]|=B&67108863,v>=18?(v-=18,P+=1,this.words[P]|=B>>>26):v+=8}this.strip()};function c(_,f,m,b){for(var w=0,v=Math.min(_.length,m),P=f;P<v;P++){var B=_.charCodeAt(P)-48;w*=b,B>=49?w+=B-49+10:B>=17?w+=B-17+10:w+=B}return w}i.prototype._parseBase=function(f,m,b){this.words=[0],this.length=1;for(var w=0,v=1;v<=67108863;v*=m)w++;w--,v=v/m|0;for(var P=f.length-b,B=P%w,k=Math.min(P,P-B)+b,d=0,S=b;S<k;S+=w)d=c(f,S,S+w,m),this.imuln(v),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(B!==0){var F=1;for(d=c(f,S,f.length,m),S=0;S<B;S++)F*=m;this.imuln(F),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},i.prototype.copy=function(f){f.words=new Array(this.length);for(var m=0;m<this.length;m++)f.words[m]=this.words[m];f.length=this.length,f.negative=this.negative,f.red=this.red},i.prototype.clone=function(){var f=new i(null);return this.copy(f),f},i.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(f,m){f=f||10,m=m|0||1;var b;if(f===16||f==="hex"){b="";for(var w=0,v=0,P=0;P<this.length;P++){var B=this.words[P],k=((B<<w|v)&16777215).toString(16);v=B>>>24-w&16777215,v!==0||P!==this.length-1?b=u[6-k.length]+k+b:b=k+b,w+=2,w>=26&&(w-=26,P--)}for(v!==0&&(b=v.toString(16)+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var d=h[f],S=l[f];b="";var F=this.clone();for(F.negative=0;!F.isZero();){var U=F.modn(S).toString(f);F=F.idivn(S),F.isZero()?b=U+b:b=u[d-U.length]+U+b}for(this.isZero()&&(b="0"+b);b.length%m!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(f,m){return r(typeof o<"u"),this.toArrayLike(o,f,m)},i.prototype.toArray=function(f,m){return this.toArrayLike(Array,f,m)},i.prototype.toArrayLike=function(f,m,b){var w=this.byteLength(),v=b||Math.max(1,w);r(w<=v,"byte array longer than desired length"),r(v>0,"Requested array length <= 0"),this.strip();var P=m==="le",B=new f(v),k,d,S=this.clone();if(P){for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[d]=k;for(;d<v;d++)B[d]=0}else{for(d=0;d<v-w;d++)B[d]=0;for(d=0;!S.isZero();d++)k=S.andln(255),S.iushrn(8),B[v-d-1]=k}return B},Math.clz32?i.prototype._countBits=function(f){return 32-Math.clz32(f)}:i.prototype._countBits=function(f){var m=f,b=0;return m>=4096&&(b+=13,m>>>=13),m>=64&&(b+=7,m>>>=7),m>=8&&(b+=4,m>>>=4),m>=2&&(b+=2,m>>>=2),b+m},i.prototype._zeroBits=function(f){if(f===0)return 26;var m=f,b=0;return m&8191||(b+=13,m>>>=13),m&127||(b+=7,m>>>=7),m&15||(b+=4,m>>>=4),m&3||(b+=2,m>>>=2),m&1||b++,b},i.prototype.bitLength=function(){var f=this.words[this.length-1],m=this._countBits(f);return(this.length-1)*26+m};function g(_){for(var f=new Array(_.bitLength()),m=0;m<f.length;m++){var b=m/26|0,w=m%26;f[m]=(_.words[b]&1<<w)>>>w}return f}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,m=0;m<this.length;m++){var b=this._zeroBits(this.words[m]);if(f+=b,b!==26)break}return f},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},i.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var m=0;m<f.length;m++)this.words[m]=this.words[m]|f.words[m];return this.strip()},i.prototype.ior=function(f){return r((this.negative|f.negative)===0),this.iuor(f)},i.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},i.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},i.prototype.iuand=function(f){var m;this.length>f.length?m=f:m=this;for(var b=0;b<m.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=m.length,this.strip()},i.prototype.iand=function(f){return r((this.negative|f.negative)===0),this.iuand(f)},i.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},i.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},i.prototype.iuxor=function(f){var m,b;this.length>f.length?(m=this,b=f):(m=f,b=this);for(var w=0;w<b.length;w++)this.words[w]=m.words[w]^b.words[w];if(this!==m)for(;w<m.length;w++)this.words[w]=m.words[w];return this.length=m.length,this.strip()},i.prototype.ixor=function(f){return r((this.negative|f.negative)===0),this.iuxor(f)},i.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},i.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},i.prototype.inotn=function(f){r(typeof f=="number"&&f>=0);var m=Math.ceil(f/26)|0,b=f%26;this._expand(m),b>0&&m--;for(var w=0;w<m;w++)this.words[w]=~this.words[w]&67108863;return b>0&&(this.words[w]=~this.words[w]&67108863>>26-b),this.strip()},i.prototype.notn=function(f){return this.clone().inotn(f)},i.prototype.setn=function(f,m){r(typeof f=="number"&&f>=0);var b=f/26|0,w=f%26;return this._expand(b+1),m?this.words[b]=this.words[b]|1<<w:this.words[b]=this.words[b]&~(1<<w),this.strip()},i.prototype.iadd=function(f){var m;if(this.negative!==0&&f.negative===0)return this.negative=0,m=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,m=this.isub(f),f.negative=1,m._normSign();var b,w;this.length>f.length?(b=this,w=f):(b=f,w=this);for(var v=0,P=0;P<w.length;P++)m=(b.words[P]|0)+(w.words[P]|0)+v,this.words[P]=m&67108863,v=m>>>26;for(;v!==0&&P<b.length;P++)m=(b.words[P]|0)+v,this.words[P]=m&67108863,v=m>>>26;if(this.length=b.length,v!==0)this.words[this.length]=v,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},i.prototype.add=function(f){var m;return f.negative!==0&&this.negative===0?(f.negative=0,m=this.sub(f),f.negative^=1,m):f.negative===0&&this.negative!==0?(this.negative=0,m=f.sub(this),this.negative=1,m):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},i.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var m=this.iadd(f);return f.negative=1,m._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,v;b>0?(w=this,v=f):(w=f,v=this);for(var P=0,B=0;B<v.length;B++)m=(w.words[B]|0)-(v.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;for(;P!==0&&B<w.length;B++)m=(w.words[B]|0)+P,P=m>>26,this.words[B]=m&67108863;if(P===0&&B<w.length&&w!==this)for(;B<w.length;B++)this.words[B]=w.words[B];return this.length=Math.max(this.length,B),w!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(f){return this.clone().isub(f)};function x(_,f,m){m.negative=f.negative^_.negative;var b=_.length+f.length|0;m.length=b,b=b-1|0;var w=_.words[0]|0,v=f.words[0]|0,P=w*v,B=P&67108863,k=P/67108864|0;m.words[0]=B;for(var d=1;d<b;d++){for(var S=k>>>26,F=k&67108863,U=Math.min(d,f.length-1),D=Math.max(0,d-_.length+1);D<=U;D++){var Y=d-D|0;w=_.words[Y]|0,v=f.words[D]|0,P=w*v+F,S+=P/67108864|0,F=P&67108863}m.words[d]=F|0,k=S|0}return k!==0?m.words[d]=k|0:m.length--,m.strip()}var A=function(f,m,b){var w=f.words,v=m.words,P=b.words,B=0,k,d,S,F=w[0]|0,U=F&8191,D=F>>>13,Y=w[1]|0,j=Y&8191,X=Y>>>13,fe=w[2]|0,ue=fe&8191,K=fe>>>13,Z=w[3]|0,J=Z&8191,ne=Z>>>13,pe=w[4]|0,re=pe&8191,ae=pe>>>13,ut=w[5]|0,Ee=ut&8191,_e=ut>>>13,Lo=w[6]|0,Oe=Lo&8191,Be=Lo>>>13,ya=w[7]|0,Ce=ya&8191,nt=ya>>>13,gu=w[8]|0,it=gu&8191,ot=gu>>>13,dc=w[9]|0,Ne=dc&8191,Ue=dc>>>13,hc=v[0]|0,De=hc&8191,Le=hc>>>13,pc=v[1]|0,Ke=pc&8191,Fe=pc>>>13,yc=v[2]|0,Ve=yc&8191,qe=yc>>>13,mc=v[3]|0,He=mc&8191,We=mc>>>13,gc=v[4]|0,ze=gc&8191,je=gc>>>13,bc=v[5]|0,Ge=bc&8191,$e=bc>>>13,xc=v[6]|0,Ye=xc&8191,Je=xc>>>13,wc=v[7]|0,Ze=wc&8191,Qe=wc>>>13,vc=v[8]|0,Xe=vc&8191,et=vc>>>13,Ac=v[9]|0,tt=Ac&8191,rt=Ac>>>13;b.negative=f.negative^m.negative,b.length=19,k=Math.imul(U,De),d=Math.imul(U,Le),d=d+Math.imul(D,De)|0,S=Math.imul(D,Le);var bs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(bs>>>26)|0,bs&=67108863,k=Math.imul(j,De),d=Math.imul(j,Le),d=d+Math.imul(X,De)|0,S=Math.imul(X,Le),k=k+Math.imul(U,Ke)|0,d=d+Math.imul(U,Fe)|0,d=d+Math.imul(D,Ke)|0,S=S+Math.imul(D,Fe)|0;var xs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,k=Math.imul(ue,De),d=Math.imul(ue,Le),d=d+Math.imul(K,De)|0,S=Math.imul(K,Le),k=k+Math.imul(j,Ke)|0,d=d+Math.imul(j,Fe)|0,d=d+Math.imul(X,Ke)|0,S=S+Math.imul(X,Fe)|0,k=k+Math.imul(U,Ve)|0,d=d+Math.imul(U,qe)|0,d=d+Math.imul(D,Ve)|0,S=S+Math.imul(D,qe)|0;var ws=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ws>>>26)|0,ws&=67108863,k=Math.imul(J,De),d=Math.imul(J,Le),d=d+Math.imul(ne,De)|0,S=Math.imul(ne,Le),k=k+Math.imul(ue,Ke)|0,d=d+Math.imul(ue,Fe)|0,d=d+Math.imul(K,Ke)|0,S=S+Math.imul(K,Fe)|0,k=k+Math.imul(j,Ve)|0,d=d+Math.imul(j,qe)|0,d=d+Math.imul(X,Ve)|0,S=S+Math.imul(X,qe)|0,k=k+Math.imul(U,He)|0,d=d+Math.imul(U,We)|0,d=d+Math.imul(D,He)|0,S=S+Math.imul(D,We)|0;var vs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,k=Math.imul(re,De),d=Math.imul(re,Le),d=d+Math.imul(ae,De)|0,S=Math.imul(ae,Le),k=k+Math.imul(J,Ke)|0,d=d+Math.imul(J,Fe)|0,d=d+Math.imul(ne,Ke)|0,S=S+Math.imul(ne,Fe)|0,k=k+Math.imul(ue,Ve)|0,d=d+Math.imul(ue,qe)|0,d=d+Math.imul(K,Ve)|0,S=S+Math.imul(K,qe)|0,k=k+Math.imul(j,He)|0,d=d+Math.imul(j,We)|0,d=d+Math.imul(X,He)|0,S=S+Math.imul(X,We)|0,k=k+Math.imul(U,ze)|0,d=d+Math.imul(U,je)|0,d=d+Math.imul(D,ze)|0,S=S+Math.imul(D,je)|0;var As=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(As>>>26)|0,As&=67108863,k=Math.imul(Ee,De),d=Math.imul(Ee,Le),d=d+Math.imul(_e,De)|0,S=Math.imul(_e,Le),k=k+Math.imul(re,Ke)|0,d=d+Math.imul(re,Fe)|0,d=d+Math.imul(ae,Ke)|0,S=S+Math.imul(ae,Fe)|0,k=k+Math.imul(J,Ve)|0,d=d+Math.imul(J,qe)|0,d=d+Math.imul(ne,Ve)|0,S=S+Math.imul(ne,qe)|0,k=k+Math.imul(ue,He)|0,d=d+Math.imul(ue,We)|0,d=d+Math.imul(K,He)|0,S=S+Math.imul(K,We)|0,k=k+Math.imul(j,ze)|0,d=d+Math.imul(j,je)|0,d=d+Math.imul(X,ze)|0,S=S+Math.imul(X,je)|0,k=k+Math.imul(U,Ge)|0,d=d+Math.imul(U,$e)|0,d=d+Math.imul(D,Ge)|0,S=S+Math.imul(D,$e)|0;var Ss=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,k=Math.imul(Oe,De),d=Math.imul(Oe,Le),d=d+Math.imul(Be,De)|0,S=Math.imul(Be,Le),k=k+Math.imul(Ee,Ke)|0,d=d+Math.imul(Ee,Fe)|0,d=d+Math.imul(_e,Ke)|0,S=S+Math.imul(_e,Fe)|0,k=k+Math.imul(re,Ve)|0,d=d+Math.imul(re,qe)|0,d=d+Math.imul(ae,Ve)|0,S=S+Math.imul(ae,qe)|0,k=k+Math.imul(J,He)|0,d=d+Math.imul(J,We)|0,d=d+Math.imul(ne,He)|0,S=S+Math.imul(ne,We)|0,k=k+Math.imul(ue,ze)|0,d=d+Math.imul(ue,je)|0,d=d+Math.imul(K,ze)|0,S=S+Math.imul(K,je)|0,k=k+Math.imul(j,Ge)|0,d=d+Math.imul(j,$e)|0,d=d+Math.imul(X,Ge)|0,S=S+Math.imul(X,$e)|0,k=k+Math.imul(U,Ye)|0,d=d+Math.imul(U,Je)|0,d=d+Math.imul(D,Ye)|0,S=S+Math.imul(D,Je)|0;var Es=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,k=Math.imul(Ce,De),d=Math.imul(Ce,Le),d=d+Math.imul(nt,De)|0,S=Math.imul(nt,Le),k=k+Math.imul(Oe,Ke)|0,d=d+Math.imul(Oe,Fe)|0,d=d+Math.imul(Be,Ke)|0,S=S+Math.imul(Be,Fe)|0,k=k+Math.imul(Ee,Ve)|0,d=d+Math.imul(Ee,qe)|0,d=d+Math.imul(_e,Ve)|0,S=S+Math.imul(_e,qe)|0,k=k+Math.imul(re,He)|0,d=d+Math.imul(re,We)|0,d=d+Math.imul(ae,He)|0,S=S+Math.imul(ae,We)|0,k=k+Math.imul(J,ze)|0,d=d+Math.imul(J,je)|0,d=d+Math.imul(ne,ze)|0,S=S+Math.imul(ne,je)|0,k=k+Math.imul(ue,Ge)|0,d=d+Math.imul(ue,$e)|0,d=d+Math.imul(K,Ge)|0,S=S+Math.imul(K,$e)|0,k=k+Math.imul(j,Ye)|0,d=d+Math.imul(j,Je)|0,d=d+Math.imul(X,Ye)|0,S=S+Math.imul(X,Je)|0,k=k+Math.imul(U,Ze)|0,d=d+Math.imul(U,Qe)|0,d=d+Math.imul(D,Ze)|0,S=S+Math.imul(D,Qe)|0;var Is=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,k=Math.imul(it,De),d=Math.imul(it,Le),d=d+Math.imul(ot,De)|0,S=Math.imul(ot,Le),k=k+Math.imul(Ce,Ke)|0,d=d+Math.imul(Ce,Fe)|0,d=d+Math.imul(nt,Ke)|0,S=S+Math.imul(nt,Fe)|0,k=k+Math.imul(Oe,Ve)|0,d=d+Math.imul(Oe,qe)|0,d=d+Math.imul(Be,Ve)|0,S=S+Math.imul(Be,qe)|0,k=k+Math.imul(Ee,He)|0,d=d+Math.imul(Ee,We)|0,d=d+Math.imul(_e,He)|0,S=S+Math.imul(_e,We)|0,k=k+Math.imul(re,ze)|0,d=d+Math.imul(re,je)|0,d=d+Math.imul(ae,ze)|0,S=S+Math.imul(ae,je)|0,k=k+Math.imul(J,Ge)|0,d=d+Math.imul(J,$e)|0,d=d+Math.imul(ne,Ge)|0,S=S+Math.imul(ne,$e)|0,k=k+Math.imul(ue,Ye)|0,d=d+Math.imul(ue,Je)|0,d=d+Math.imul(K,Ye)|0,S=S+Math.imul(K,Je)|0,k=k+Math.imul(j,Ze)|0,d=d+Math.imul(j,Qe)|0,d=d+Math.imul(X,Ze)|0,S=S+Math.imul(X,Qe)|0,k=k+Math.imul(U,Xe)|0,d=d+Math.imul(U,et)|0,d=d+Math.imul(D,Xe)|0,S=S+Math.imul(D,et)|0;var ks=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,k=Math.imul(Ne,De),d=Math.imul(Ne,Le),d=d+Math.imul(Ue,De)|0,S=Math.imul(Ue,Le),k=k+Math.imul(it,Ke)|0,d=d+Math.imul(it,Fe)|0,d=d+Math.imul(ot,Ke)|0,S=S+Math.imul(ot,Fe)|0,k=k+Math.imul(Ce,Ve)|0,d=d+Math.imul(Ce,qe)|0,d=d+Math.imul(nt,Ve)|0,S=S+Math.imul(nt,qe)|0,k=k+Math.imul(Oe,He)|0,d=d+Math.imul(Oe,We)|0,d=d+Math.imul(Be,He)|0,S=S+Math.imul(Be,We)|0,k=k+Math.imul(Ee,ze)|0,d=d+Math.imul(Ee,je)|0,d=d+Math.imul(_e,ze)|0,S=S+Math.imul(_e,je)|0,k=k+Math.imul(re,Ge)|0,d=d+Math.imul(re,$e)|0,d=d+Math.imul(ae,Ge)|0,S=S+Math.imul(ae,$e)|0,k=k+Math.imul(J,Ye)|0,d=d+Math.imul(J,Je)|0,d=d+Math.imul(ne,Ye)|0,S=S+Math.imul(ne,Je)|0,k=k+Math.imul(ue,Ze)|0,d=d+Math.imul(ue,Qe)|0,d=d+Math.imul(K,Ze)|0,S=S+Math.imul(K,Qe)|0,k=k+Math.imul(j,Xe)|0,d=d+Math.imul(j,et)|0,d=d+Math.imul(X,Xe)|0,S=S+Math.imul(X,et)|0,k=k+Math.imul(U,tt)|0,d=d+Math.imul(U,rt)|0,d=d+Math.imul(D,tt)|0,S=S+Math.imul(D,rt)|0;var Ts=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,k=Math.imul(Ne,Ke),d=Math.imul(Ne,Fe),d=d+Math.imul(Ue,Ke)|0,S=Math.imul(Ue,Fe),k=k+Math.imul(it,Ve)|0,d=d+Math.imul(it,qe)|0,d=d+Math.imul(ot,Ve)|0,S=S+Math.imul(ot,qe)|0,k=k+Math.imul(Ce,He)|0,d=d+Math.imul(Ce,We)|0,d=d+Math.imul(nt,He)|0,S=S+Math.imul(nt,We)|0,k=k+Math.imul(Oe,ze)|0,d=d+Math.imul(Oe,je)|0,d=d+Math.imul(Be,ze)|0,S=S+Math.imul(Be,je)|0,k=k+Math.imul(Ee,Ge)|0,d=d+Math.imul(Ee,$e)|0,d=d+Math.imul(_e,Ge)|0,S=S+Math.imul(_e,$e)|0,k=k+Math.imul(re,Ye)|0,d=d+Math.imul(re,Je)|0,d=d+Math.imul(ae,Ye)|0,S=S+Math.imul(ae,Je)|0,k=k+Math.imul(J,Ze)|0,d=d+Math.imul(J,Qe)|0,d=d+Math.imul(ne,Ze)|0,S=S+Math.imul(ne,Qe)|0,k=k+Math.imul(ue,Xe)|0,d=d+Math.imul(ue,et)|0,d=d+Math.imul(K,Xe)|0,S=S+Math.imul(K,et)|0,k=k+Math.imul(j,tt)|0,d=d+Math.imul(j,rt)|0,d=d+Math.imul(X,tt)|0,S=S+Math.imul(X,rt)|0;var Ps=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,k=Math.imul(Ne,Ve),d=Math.imul(Ne,qe),d=d+Math.imul(Ue,Ve)|0,S=Math.imul(Ue,qe),k=k+Math.imul(it,He)|0,d=d+Math.imul(it,We)|0,d=d+Math.imul(ot,He)|0,S=S+Math.imul(ot,We)|0,k=k+Math.imul(Ce,ze)|0,d=d+Math.imul(Ce,je)|0,d=d+Math.imul(nt,ze)|0,S=S+Math.imul(nt,je)|0,k=k+Math.imul(Oe,Ge)|0,d=d+Math.imul(Oe,$e)|0,d=d+Math.imul(Be,Ge)|0,S=S+Math.imul(Be,$e)|0,k=k+Math.imul(Ee,Ye)|0,d=d+Math.imul(Ee,Je)|0,d=d+Math.imul(_e,Ye)|0,S=S+Math.imul(_e,Je)|0,k=k+Math.imul(re,Ze)|0,d=d+Math.imul(re,Qe)|0,d=d+Math.imul(ae,Ze)|0,S=S+Math.imul(ae,Qe)|0,k=k+Math.imul(J,Xe)|0,d=d+Math.imul(J,et)|0,d=d+Math.imul(ne,Xe)|0,S=S+Math.imul(ne,et)|0,k=k+Math.imul(ue,tt)|0,d=d+Math.imul(ue,rt)|0,d=d+Math.imul(K,tt)|0,S=S+Math.imul(K,rt)|0;var _s=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,k=Math.imul(Ne,He),d=Math.imul(Ne,We),d=d+Math.imul(Ue,He)|0,S=Math.imul(Ue,We),k=k+Math.imul(it,ze)|0,d=d+Math.imul(it,je)|0,d=d+Math.imul(ot,ze)|0,S=S+Math.imul(ot,je)|0,k=k+Math.imul(Ce,Ge)|0,d=d+Math.imul(Ce,$e)|0,d=d+Math.imul(nt,Ge)|0,S=S+Math.imul(nt,$e)|0,k=k+Math.imul(Oe,Ye)|0,d=d+Math.imul(Oe,Je)|0,d=d+Math.imul(Be,Ye)|0,S=S+Math.imul(Be,Je)|0,k=k+Math.imul(Ee,Ze)|0,d=d+Math.imul(Ee,Qe)|0,d=d+Math.imul(_e,Ze)|0,S=S+Math.imul(_e,Qe)|0,k=k+Math.imul(re,Xe)|0,d=d+Math.imul(re,et)|0,d=d+Math.imul(ae,Xe)|0,S=S+Math.imul(ae,et)|0,k=k+Math.imul(J,tt)|0,d=d+Math.imul(J,rt)|0,d=d+Math.imul(ne,tt)|0,S=S+Math.imul(ne,rt)|0;var Bs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,k=Math.imul(Ne,ze),d=Math.imul(Ne,je),d=d+Math.imul(Ue,ze)|0,S=Math.imul(Ue,je),k=k+Math.imul(it,Ge)|0,d=d+Math.imul(it,$e)|0,d=d+Math.imul(ot,Ge)|0,S=S+Math.imul(ot,$e)|0,k=k+Math.imul(Ce,Ye)|0,d=d+Math.imul(Ce,Je)|0,d=d+Math.imul(nt,Ye)|0,S=S+Math.imul(nt,Je)|0,k=k+Math.imul(Oe,Ze)|0,d=d+Math.imul(Oe,Qe)|0,d=d+Math.imul(Be,Ze)|0,S=S+Math.imul(Be,Qe)|0,k=k+Math.imul(Ee,Xe)|0,d=d+Math.imul(Ee,et)|0,d=d+Math.imul(_e,Xe)|0,S=S+Math.imul(_e,et)|0,k=k+Math.imul(re,tt)|0,d=d+Math.imul(re,rt)|0,d=d+Math.imul(ae,tt)|0,S=S+Math.imul(ae,rt)|0;var Cs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,k=Math.imul(Ne,Ge),d=Math.imul(Ne,$e),d=d+Math.imul(Ue,Ge)|0,S=Math.imul(Ue,$e),k=k+Math.imul(it,Ye)|0,d=d+Math.imul(it,Je)|0,d=d+Math.imul(ot,Ye)|0,S=S+Math.imul(ot,Je)|0,k=k+Math.imul(Ce,Ze)|0,d=d+Math.imul(Ce,Qe)|0,d=d+Math.imul(nt,Ze)|0,S=S+Math.imul(nt,Qe)|0,k=k+Math.imul(Oe,Xe)|0,d=d+Math.imul(Oe,et)|0,d=d+Math.imul(Be,Xe)|0,S=S+Math.imul(Be,et)|0,k=k+Math.imul(Ee,tt)|0,d=d+Math.imul(Ee,rt)|0,d=d+Math.imul(_e,tt)|0,S=S+Math.imul(_e,rt)|0;var Ms=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,k=Math.imul(Ne,Ye),d=Math.imul(Ne,Je),d=d+Math.imul(Ue,Ye)|0,S=Math.imul(Ue,Je),k=k+Math.imul(it,Ze)|0,d=d+Math.imul(it,Qe)|0,d=d+Math.imul(ot,Ze)|0,S=S+Math.imul(ot,Qe)|0,k=k+Math.imul(Ce,Xe)|0,d=d+Math.imul(Ce,et)|0,d=d+Math.imul(nt,Xe)|0,S=S+Math.imul(nt,et)|0,k=k+Math.imul(Oe,tt)|0,d=d+Math.imul(Oe,rt)|0,d=d+Math.imul(Be,tt)|0,S=S+Math.imul(Be,rt)|0;var Rs=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,k=Math.imul(Ne,Ze),d=Math.imul(Ne,Qe),d=d+Math.imul(Ue,Ze)|0,S=Math.imul(Ue,Qe),k=k+Math.imul(it,Xe)|0,d=d+Math.imul(it,et)|0,d=d+Math.imul(ot,Xe)|0,S=S+Math.imul(ot,et)|0,k=k+Math.imul(Ce,tt)|0,d=d+Math.imul(Ce,rt)|0,d=d+Math.imul(nt,tt)|0,S=S+Math.imul(nt,rt)|0;var Os=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(Os>>>26)|0,Os&=67108863,k=Math.imul(Ne,Xe),d=Math.imul(Ne,et),d=d+Math.imul(Ue,Xe)|0,S=Math.imul(Ue,et),k=k+Math.imul(it,tt)|0,d=d+Math.imul(it,rt)|0,d=d+Math.imul(ot,tt)|0,S=S+Math.imul(ot,rt)|0;var dl=(B+k|0)+((d&8191)<<13)|0;B=(S+(d>>>13)|0)+(dl>>>26)|0,dl&=67108863,k=Math.imul(Ne,tt),d=Math.imul(Ne,rt),d=d+Math.imul(Ue,tt)|0,S=Math.imul(Ue,rt);var hl=(B+k|0)+((d&8191)<<13)|0;return B=(S+(d>>>13)|0)+(hl>>>26)|0,hl&=67108863,P[0]=bs,P[1]=xs,P[2]=ws,P[3]=vs,P[4]=As,P[5]=Ss,P[6]=Es,P[7]=Is,P[8]=ks,P[9]=Ts,P[10]=Ps,P[11]=_s,P[12]=Bs,P[13]=Cs,P[14]=Ms,P[15]=Rs,P[16]=Os,P[17]=dl,P[18]=hl,B!==0&&(P[19]=B,b.length++),b};Math.imul||(A=x);function E(_,f,m){m.negative=f.negative^_.negative,m.length=_.length+f.length;for(var b=0,w=0,v=0;v<m.length-1;v++){var P=w;w=0;for(var B=b&67108863,k=Math.min(v,f.length-1),d=Math.max(0,v-_.length+1);d<=k;d++){var S=v-d,F=_.words[S]|0,U=f.words[d]|0,D=F*U,Y=D&67108863;P=P+(D/67108864|0)|0,Y=Y+B|0,B=Y&67108863,P=P+(Y>>>26)|0,w+=P>>>26,P&=67108863}m.words[v]=B,b=P,P=w}return b!==0?m.words[v]=b:m.length--,m.strip()}function C(_,f,m){var b=new M;return b.mulp(_,f,m)}i.prototype.mulTo=function(f,m){var b,w=this.length+f.length;return this.length===10&&f.length===10?b=A(this,f,m):w<63?b=x(this,f,m):w<1024?b=E(this,f,m):b=C(this,f,m),b};function M(_,f){this.x=_,this.y=f}M.prototype.makeRBT=function(f){for(var m=new Array(f),b=i.prototype._countBits(f)-1,w=0;w<f;w++)m[w]=this.revBin(w,b,f);return m},M.prototype.revBin=function(f,m,b){if(f===0||f===b-1)return f;for(var w=0,v=0;v<m;v++)w|=(f&1)<<m-v-1,f>>=1;return w},M.prototype.permute=function(f,m,b,w,v,P){for(var B=0;B<P;B++)w[B]=m[f[B]],v[B]=b[f[B]]},M.prototype.transform=function(f,m,b,w,v,P){this.permute(P,f,m,b,w,v);for(var B=1;B<v;B<<=1)for(var k=B<<1,d=Math.cos(2*Math.PI/k),S=Math.sin(2*Math.PI/k),F=0;F<v;F+=k)for(var U=d,D=S,Y=0;Y<B;Y++){var j=b[F+Y],X=w[F+Y],fe=b[F+Y+B],ue=w[F+Y+B],K=U*fe-D*ue;ue=U*ue+D*fe,fe=K,b[F+Y]=j+fe,w[F+Y]=X+ue,b[F+Y+B]=j-fe,w[F+Y+B]=X-ue,Y!==k&&(K=d*U-S*D,D=d*D+S*U,U=K)}},M.prototype.guessLen13b=function(f,m){var b=Math.max(m,f)|1,w=b&1,v=0;for(b=b/2|0;b;b=b>>>1)v++;return 1<<v+1+w},M.prototype.conjugate=function(f,m,b){if(!(b<=1))for(var w=0;w<b/2;w++){var v=f[w];f[w]=f[b-w-1],f[b-w-1]=v,v=m[w],m[w]=-m[b-w-1],m[b-w-1]=-v}},M.prototype.normalize13b=function(f,m){for(var b=0,w=0;w<m/2;w++){var v=Math.round(f[2*w+1]/m)*8192+Math.round(f[2*w]/m)+b;f[w]=v&67108863,v<67108864?b=0:b=v/67108864|0}return f},M.prototype.convert13b=function(f,m,b,w){for(var v=0,P=0;P<m;P++)v=v+(f[P]|0),b[2*P]=v&8191,v=v>>>13,b[2*P+1]=v&8191,v=v>>>13;for(P=2*m;P<w;++P)b[P]=0;r(v===0),r((v&-8192)===0)},M.prototype.stub=function(f){for(var m=new Array(f),b=0;b<f;b++)m[b]=0;return m},M.prototype.mulp=function(f,m,b){var w=2*this.guessLen13b(f.length,m.length),v=this.makeRBT(w),P=this.stub(w),B=new Array(w),k=new Array(w),d=new Array(w),S=new Array(w),F=new Array(w),U=new Array(w),D=b.words;D.length=w,this.convert13b(f.words,f.length,B,w),this.convert13b(m.words,m.length,S,w),this.transform(B,P,k,d,w,v),this.transform(S,P,F,U,w,v);for(var Y=0;Y<w;Y++){var j=k[Y]*F[Y]-d[Y]*U[Y];d[Y]=k[Y]*U[Y]+d[Y]*F[Y],k[Y]=j}return this.conjugate(k,d,w),this.transform(k,d,D,P,w,v),this.conjugate(D,P,w),this.normalize13b(D,w),b.negative=f.negative^m.negative,b.length=f.length+m.length,b.strip()},i.prototype.mul=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),this.mulTo(f,m)},i.prototype.mulf=function(f){var m=new i(null);return m.words=new Array(this.length+f.length),C(this,f,m)},i.prototype.imul=function(f){return this.clone().mulTo(f,this)},i.prototype.imuln=function(f){r(typeof f=="number"),r(f<67108864);for(var m=0,b=0;b<this.length;b++){var w=(this.words[b]|0)*f,v=(w&67108863)+(m&67108863);m>>=26,m+=w/67108864|0,m+=v>>>26,this.words[b]=v&67108863}return m!==0&&(this.words[b]=m,this.length++),this},i.prototype.muln=function(f){return this.clone().imuln(f)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(f){var m=g(f);if(m.length===0)return new i(1);for(var b=this,w=0;w<m.length&&m[w]===0;w++,b=b.sqr());if(++w<m.length)for(var v=b.sqr();w<m.length;w++,v=v.sqr())m[w]!==0&&(b=b.mul(v));return b},i.prototype.iushln=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,w=67108863>>>26-m<<26-m,v;if(m!==0){var P=0;for(v=0;v<this.length;v++){var B=this.words[v]&w,k=(this.words[v]|0)-B<<m;this.words[v]=k|P,P=B>>>26-m}P&&(this.words[v]=P,this.length++)}if(b!==0){for(v=this.length-1;v>=0;v--)this.words[v+b]=this.words[v];for(v=0;v<b;v++)this.words[v]=0;this.length+=b}return this.strip()},i.prototype.ishln=function(f){return r(this.negative===0),this.iushln(f)},i.prototype.iushrn=function(f,m,b){r(typeof f=="number"&&f>=0);var w;m?w=(m-m%26)/26:w=0;var v=f%26,P=Math.min((f-v)/26,this.length),B=67108863^67108863>>>v<<v,k=b;if(w-=P,w=Math.max(0,w),k){for(var d=0;d<P;d++)k.words[d]=this.words[d];k.length=P}if(P!==0)if(this.length>P)for(this.length-=P,d=0;d<this.length;d++)this.words[d]=this.words[d+P];else this.words[0]=0,this.length=1;var S=0;for(d=this.length-1;d>=0&&(S!==0||d>=w);d--){var F=this.words[d]|0;this.words[d]=S<<26-v|F>>>v,S=F&B}return k&&S!==0&&(k.words[k.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(f,m,b){return r(this.negative===0),this.iushrn(f,m,b)},i.prototype.shln=function(f){return this.clone().ishln(f)},i.prototype.ushln=function(f){return this.clone().iushln(f)},i.prototype.shrn=function(f){return this.clone().ishrn(f)},i.prototype.ushrn=function(f){return this.clone().iushrn(f)},i.prototype.testn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26,w=1<<m;if(this.length<=b)return!1;var v=this.words[b];return!!(v&w)},i.prototype.imaskn=function(f){r(typeof f=="number"&&f>=0);var m=f%26,b=(f-m)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(m!==0&&b++,this.length=Math.min(b,this.length),m!==0){var w=67108863^67108863>>>m<<m;this.words[this.length-1]&=w}return this.strip()},i.prototype.maskn=function(f){return this.clone().imaskn(f)},i.prototype.iaddn=function(f){return r(typeof f=="number"),r(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},i.prototype._iaddn=function(f){this.words[0]+=f;for(var m=0;m<this.length&&this.words[m]>=67108864;m++)this.words[m]-=67108864,m===this.length-1?this.words[m+1]=1:this.words[m+1]++;return this.length=Math.max(this.length,m+1),this},i.prototype.isubn=function(f){if(r(typeof f=="number"),r(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var m=0;m<this.length&&this.words[m]<0;m++)this.words[m]+=67108864,this.words[m+1]-=1;return this.strip()},i.prototype.addn=function(f){return this.clone().iaddn(f)},i.prototype.subn=function(f){return this.clone().isubn(f)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(f,m,b){var w=f.length+b,v;this._expand(w);var P,B=0;for(v=0;v<f.length;v++){P=(this.words[v+b]|0)+B;var k=(f.words[v]|0)*m;P-=k&67108863,B=(P>>26)-(k/67108864|0),this.words[v+b]=P&67108863}for(;v<this.length-b;v++)P=(this.words[v+b]|0)+B,B=P>>26,this.words[v+b]=P&67108863;if(B===0)return this.strip();for(r(B===-1),B=0,v=0;v<this.length;v++)P=-(this.words[v]|0)+B,B=P>>26,this.words[v]=P&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(f,m){var b=this.length-f.length,w=this.clone(),v=f,P=v.words[v.length-1]|0,B=this._countBits(P);b=26-B,b!==0&&(v=v.ushln(b),w.iushln(b),P=v.words[v.length-1]|0);var k=w.length-v.length,d;if(m!=="mod"){d=new i(null),d.length=k+1,d.words=new Array(d.length);for(var S=0;S<d.length;S++)d.words[S]=0}var F=w.clone()._ishlnsubmul(v,1,k);F.negative===0&&(w=F,d&&(d.words[k]=1));for(var U=k-1;U>=0;U--){var D=(w.words[v.length+U]|0)*67108864+(w.words[v.length+U-1]|0);for(D=Math.min(D/P|0,67108863),w._ishlnsubmul(v,D,U);w.negative!==0;)D--,w.negative=0,w._ishlnsubmul(v,1,U),w.isZero()||(w.negative^=1);d&&(d.words[U]=D)}return d&&d.strip(),w.strip(),m!=="div"&&b!==0&&w.iushrn(b),{div:d||null,mod:w}},i.prototype.divmod=function(f,m,b){if(r(!f.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,v,P;return this.negative!==0&&f.negative===0?(P=this.neg().divmod(f,m),m!=="mod"&&(w=P.div.neg()),m!=="div"&&(v=P.mod.neg(),b&&v.negative!==0&&v.iadd(f)),{div:w,mod:v}):this.negative===0&&f.negative!==0?(P=this.divmod(f.neg(),m),m!=="mod"&&(w=P.div.neg()),{div:w,mod:P.mod}):this.negative&f.negative?(P=this.neg().divmod(f.neg(),m),m!=="div"&&(v=P.mod.neg(),b&&v.negative!==0&&v.isub(f)),{div:P.div,mod:v}):f.length>this.length||this.cmp(f)<0?{div:new i(0),mod:this}:f.length===1?m==="div"?{div:this.divn(f.words[0]),mod:null}:m==="mod"?{div:null,mod:new i(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new i(this.modn(f.words[0]))}:this._wordDiv(f,m)},i.prototype.div=function(f){return this.divmod(f,"div",!1).div},i.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},i.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},i.prototype.divRound=function(f){var m=this.divmod(f);if(m.mod.isZero())return m.div;var b=m.div.negative!==0?m.mod.isub(f):m.mod,w=f.ushrn(1),v=f.andln(1),P=b.cmp(w);return P<0||v===1&&P===0?m.div:m.div.negative!==0?m.div.isubn(1):m.div.iaddn(1)},i.prototype.modn=function(f){r(f<=67108863);for(var m=(1<<26)%f,b=0,w=this.length-1;w>=0;w--)b=(m*b+(this.words[w]|0))%f;return b},i.prototype.idivn=function(f){r(f<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var w=(this.words[b]|0)+m*67108864;this.words[b]=w/f|0,m=w%f}return this.strip()},i.prototype.divn=function(f){return this.clone().idivn(f)},i.prototype.egcd=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var w=new i(1),v=new i(0),P=new i(0),B=new i(1),k=0;m.isEven()&&b.isEven();)m.iushrn(1),b.iushrn(1),++k;for(var d=b.clone(),S=m.clone();!m.isZero();){for(var F=0,U=1;!(m.words[0]&U)&&F<26;++F,U<<=1);if(F>0)for(m.iushrn(F);F-- >0;)(w.isOdd()||v.isOdd())&&(w.iadd(d),v.isub(S)),w.iushrn(1),v.iushrn(1);for(var D=0,Y=1;!(b.words[0]&Y)&&D<26;++D,Y<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(P.isOdd()||B.isOdd())&&(P.iadd(d),B.isub(S)),P.iushrn(1),B.iushrn(1);m.cmp(b)>=0?(m.isub(b),w.isub(P),v.isub(B)):(b.isub(m),P.isub(w),B.isub(v))}return{a:P,b:B,gcd:b.iushln(k)}},i.prototype._invmp=function(f){r(f.negative===0),r(!f.isZero());var m=this,b=f.clone();m.negative!==0?m=m.umod(f):m=m.clone();for(var w=new i(1),v=new i(0),P=b.clone();m.cmpn(1)>0&&b.cmpn(1)>0;){for(var B=0,k=1;!(m.words[0]&k)&&B<26;++B,k<<=1);if(B>0)for(m.iushrn(B);B-- >0;)w.isOdd()&&w.iadd(P),w.iushrn(1);for(var d=0,S=1;!(b.words[0]&S)&&d<26;++d,S<<=1);if(d>0)for(b.iushrn(d);d-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);m.cmp(b)>=0?(m.isub(b),w.isub(v)):(b.isub(m),v.isub(w))}var F;return m.cmpn(1)===0?F=w:F=v,F.cmpn(0)<0&&F.iadd(f),F},i.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var m=this.clone(),b=f.clone();m.negative=0,b.negative=0;for(var w=0;m.isEven()&&b.isEven();w++)m.iushrn(1),b.iushrn(1);do{for(;m.isEven();)m.iushrn(1);for(;b.isEven();)b.iushrn(1);var v=m.cmp(b);if(v<0){var P=m;m=b,b=P}else if(v===0||b.cmpn(1)===0)break;m.isub(b)}while(!0);return b.iushln(w)},i.prototype.invm=function(f){return this.egcd(f).a.umod(f)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(f){return this.words[0]&f},i.prototype.bincn=function(f){r(typeof f=="number");var m=f%26,b=(f-m)/26,w=1<<m;if(this.length<=b)return this._expand(b+1),this.words[b]|=w,this;for(var v=w,P=b;v!==0&&P<this.length;P++){var B=this.words[P]|0;B+=v,v=B>>>26,B&=67108863,this.words[P]=B}return v!==0&&(this.words[P]=v,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(f){var m=f<0;if(this.negative!==0&&!m)return-1;if(this.negative===0&&m)return 1;this.strip();var b;if(this.length>1)b=1;else{m&&(f=-f),r(f<=67108863,"Number is too big");var w=this.words[0]|0;b=w===f?0:w<f?-1:1}return this.negative!==0?-b|0:b},i.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var m=this.ucmp(f);return this.negative!==0?-m|0:m},i.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var m=0,b=this.length-1;b>=0;b--){var w=this.words[b]|0,v=f.words[b]|0;if(w!==v){w<v?m=-1:w>v&&(m=1);break}}return m},i.prototype.gtn=function(f){return this.cmpn(f)===1},i.prototype.gt=function(f){return this.cmp(f)===1},i.prototype.gten=function(f){return this.cmpn(f)>=0},i.prototype.gte=function(f){return this.cmp(f)>=0},i.prototype.ltn=function(f){return this.cmpn(f)===-1},i.prototype.lt=function(f){return this.cmp(f)===-1},i.prototype.lten=function(f){return this.cmpn(f)<=0},i.prototype.lte=function(f){return this.cmp(f)<=0},i.prototype.eqn=function(f){return this.cmpn(f)===0},i.prototype.eq=function(f){return this.cmp(f)===0},i.red=function(f){return new z(f)},i.prototype.toRed=function(f){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(f){return this.red=f,this},i.prototype.forceRed=function(f){return r(!this.red,"Already a number in reduction context"),this._forceRed(f)},i.prototype.redAdd=function(f){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},i.prototype.redIAdd=function(f){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},i.prototype.redSub=function(f){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},i.prototype.redISub=function(f){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},i.prototype.redShl=function(f){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},i.prototype.redMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},i.prototype.redIMul=function(f){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(f){return r(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var N={k256:null,p224:null,p192:null,p25519:null};function R(_,f){this.name=_,this.p=new i(f,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var f=new i(null);return f.words=new Array(Math.ceil(this.n/13)),f},R.prototype.ireduce=function(f){var m=f,b;do this.split(m,this.tmp),m=this.imulK(m),m=m.iadd(this.tmp),b=m.bitLength();while(b>this.n);var w=b<this.n?-1:m.ucmp(this.p);return w===0?(m.words[0]=0,m.length=1):w>0?m.isub(this.p):m.strip!==void 0?m.strip():m._strip(),m},R.prototype.split=function(f,m){f.iushrn(this.n,0,m)},R.prototype.imulK=function(f){return f.imul(this.k)};function V(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(V,R),V.prototype.split=function(f,m){for(var b=4194303,w=Math.min(f.length,9),v=0;v<w;v++)m.words[v]=f.words[v];if(m.length=w,f.length<=9){f.words[0]=0,f.length=1;return}var P=f.words[9];for(m.words[m.length++]=P&b,v=10;v<f.length;v++){var B=f.words[v]|0;f.words[v-10]=(B&b)<<4|P>>>22,P=B}P>>>=22,f.words[v-10]=P,P===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var m=0,b=0;b<f.length;b++){var w=f.words[b]|0;m+=w*977,f.words[b]=m&67108863,m=w*64+(m/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function q(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(q,R);function W(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,R);function G(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(G,R),G.prototype.imulK=function(f){for(var m=0,b=0;b<f.length;b++){var w=(f.words[b]|0)*19+m,v=w&67108863;w>>>=26,f.words[b]=v,m=w}return m!==0&&(f.words[f.length++]=m),f},i._prime=function(f){if(N[f])return N[f];var m;if(f==="k256")m=new V;else if(f==="p224")m=new q;else if(f==="p192")m=new W;else if(f==="p25519")m=new G;else throw new Error("Unknown prime "+f);return N[f]=m,m};function z(_){if(typeof _=="string"){var f=i._prime(_);this.m=f.p,this.prime=f}else r(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}z.prototype._verify1=function(f){r(f.negative===0,"red works only with positives"),r(f.red,"red works only with red numbers")},z.prototype._verify2=function(f,m){r((f.negative|m.negative)===0,"red works only with positives"),r(f.red&&f.red===m.red,"red works only with red numbers")},z.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},z.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},z.prototype.add=function(f,m){this._verify2(f,m);var b=f.add(m);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},z.prototype.iadd=function(f,m){this._verify2(f,m);var b=f.iadd(m);return b.cmp(this.m)>=0&&b.isub(this.m),b},z.prototype.sub=function(f,m){this._verify2(f,m);var b=f.sub(m);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},z.prototype.isub=function(f,m){this._verify2(f,m);var b=f.isub(m);return b.cmpn(0)<0&&b.iadd(this.m),b},z.prototype.shl=function(f,m){return this._verify1(f),this.imod(f.ushln(m))},z.prototype.imul=function(f,m){return this._verify2(f,m),this.imod(f.imul(m))},z.prototype.mul=function(f,m){return this._verify2(f,m),this.imod(f.mul(m))},z.prototype.isqr=function(f){return this.imul(f,f.clone())},z.prototype.sqr=function(f){return this.mul(f,f)},z.prototype.sqrt=function(f){if(f.isZero())return f.clone();var m=this.m.andln(3);if(r(m%2===1),m===3){var b=this.m.add(new i(1)).iushrn(2);return this.pow(f,b)}for(var w=this.m.subn(1),v=0;!w.isZero()&&w.andln(1)===0;)v++,w.iushrn(1);r(!w.isZero());var P=new i(1).toRed(this),B=P.redNeg(),k=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,k).cmp(B)!==0;)d.redIAdd(B);for(var S=this.pow(d,w),F=this.pow(f,w.addn(1).iushrn(1)),U=this.pow(f,w),D=v;U.cmp(P)!==0;){for(var Y=U,j=0;Y.cmp(P)!==0;j++)Y=Y.redSqr();r(j<D);var X=this.pow(S,new i(1).iushln(D-j-1));F=F.redMul(X),S=X.redSqr(),U=U.redMul(S),D=j}return F},z.prototype.invm=function(f){var m=f._invmp(this.m);return m.negative!==0?(m.negative=0,this.imod(m).redNeg()):this.imod(m)},z.prototype.pow=function(f,m){if(m.isZero())return new i(1).toRed(this);if(m.cmpn(1)===0)return f.clone();var b=4,w=new Array(1<<b);w[0]=new i(1).toRed(this),w[1]=f;for(var v=2;v<w.length;v++)w[v]=this.mul(w[v-1],f);var P=w[0],B=0,k=0,d=m.bitLength()%26;for(d===0&&(d=26),v=m.length-1;v>=0;v--){for(var S=m.words[v],F=d-1;F>=0;F--){var U=S>>F&1;if(P!==w[0]&&(P=this.sqr(P)),U===0&&B===0){k=0;continue}B<<=1,B|=U,k++,!(k!==b&&(v!==0||F!==0))&&(P=this.mul(P,w[B]),k=0,B=0)}d=26}return P},z.prototype.convertTo=function(f){var m=f.umod(this.m);return m===f?m.clone():m},z.prototype.convertFrom=function(f){var m=f.clone();return m.red=null,m},i.mont=function(f){return new te(f)};function te(_){z.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(te,z),te.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},te.prototype.convertFrom=function(f){var m=this.imod(f.mul(this.rinv));return m.red=null,m},te.prototype.imul=function(f,m){if(f.isZero()||m.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(m),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=b.isub(w).iushrn(this.shift),P=v;return v.cmp(this.m)>=0?P=v.isub(this.m):v.cmpn(0)<0&&(P=v.iadd(this.m)),P._forceRed(this)},te.prototype.mul=function(f,m){if(f.isZero()||m.isZero())return new i(0)._forceRed(this);var b=f.mul(m),w=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=b.isub(w).iushrn(this.shift),P=v;return v.cmp(this.m)>=0?P=v.isub(this.m):v.cmpn(0)<0&&(P=v.iadd(this.m)),P._forceRed(this)},te.prototype.invm=function(f){var m=this.imod(f._invmp(this.m).mul(this.r2));return m._forceRed(this)}})(typeof O5>"u"||O5,jj)});var Zj=L((Jtt,Jj)=>{p();y();var oc=kb(),co=Gj(),_r=function(){};function DS(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}_r.eventID=function(e,t){var r=e+"("+t.map(DS).join(",")+")";return oc.keccak256(Buffer.from(r))};_r.methodID=function(e,t){return _r.eventID(e,t).slice(0,4)};function il(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function N5(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function _b(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function Jd(e){var t=typeof e;if(t==="string")return oc.isHexPrefixed(e)?new co(oc.stripHexPrefix(e),16):new co(e,10);if(t==="number")return new co(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function Yj(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function ic(e,t){var r,n,i,o;if(e==="address")return ic("uint160",Jd(t));if(e==="bool")return ic("uint8",t?1:0);if(e==="string")return ic("bytes",Buffer.from(t,"utf8"));if(Pb(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=_b(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(o in t)i.push(ic(e,t[o]));if(r==="dynamic"){var s=ic("uint256",t.length);i.unshift(s)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([ic("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,oc.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=il(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return oc.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=il(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=Jd(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=il(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=Jd(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=N5(e),n=Jd(t),n<0)throw new Error("Supplied ufixed is negative");return ic("uint256",n.mul(new co(2).pow(new co(r[1]))))}else if(e.startsWith("fixed"))return r=N5(e),ic("int256",Jd(t).mul(new co(2).pow(new co(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function fa(e,t,r){typeof e=="string"&&(e=U5(e));var n,i,o,s;if(e.name==="address")return fa(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return fa(e.rawType,t,r).toString()===new co(1).toString();if(e.name==="string"){var a=fa(e.rawType,t,r);return Buffer.from(a,"utf8").toString()}else if(e.isArray){for(o=[],n=e.size,e.size==="dynamic"&&(r=fa("uint256",t,r).toNumber(),n=fa("uint256",t,r).toNumber(),r=r+32),s=0;s<n;s++){var c=fa(e.subArray,t,r);o.push(c),r+=e.subArray.memoryUsage}return o}else{if(e.name==="bytes")return r=fa("uint256",t,r).toNumber(),n=fa("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new co(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new co(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new co(2).pow(new co(e.size[1])),i=fa("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new co(2).pow(new co(e.size[1])),i=fa("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function U5(e){var t,r;if(Pb(e)){t=_b(e);var n=e.slice(0,e.lastIndexOf("["));return n=U5(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=il(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=N5(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function OAe(e){return e==="string"||e==="bytes"||_b(e)==="dynamic"}function Pb(e){return e.lastIndexOf("]")===e.length-1}_r.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(u){if(Pb(u)){var h=_b(u);h!=="dynamic"?i+=32*h:i+=32}else i+=32});for(var o=0;o<e.length;o++){var s=DS(e[o]),a=t[o],c=ic(s,a);OAe(s)?(r.push(ic("uint256",i)),n.push(c),i+=c.length):r.push(c)}return Buffer.concat(r.concat(n))};_r.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var o=DS(e[i]),s=U5(o,t,n),a=fa(s,t,n);n+=s.memoryUsage,r.push(a)}return r};_r.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=Yj(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([_r.methodID(r.method,r.args),_r.rawEncode(r.args,t)])};_r.simpleDecode=function(e,t){var r=Yj(e);if(!r.retargs)throw new Error("No return values in method");return _r.rawDecode(r.retargs,t)};function $j(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}_r.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],o=t[n];/^[^\[]+\[.*\]$/.test(i)?o=o.map(function(s){return $j(i,s)}).join(", "):o=$j(i,o),r.push(o)}return r};_r.solidityHexValue=function(e,t,r){var n,i;if(Pb(e)){var o=e.replace(/\[.*?\]/,"");if(!Pb(o)){var s=_b(e);if(s!=="dynamic"&&s!==0&&t.length>s)throw new Error("Elements exceed array size: "+s)}var a=t.map(function(h){return _r.solidityHexValue(o,h,256)});return Buffer.concat(a)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var c=Array(r/4).join("0");return Buffer.from(t?c+"1":c+"0","hex")}else if(e==="address"){var u=20;return r&&(u=r/8),oc.setLengthLeft(t,u)}else if(e.startsWith("bytes")){if(n=il(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return oc.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=il(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=Jd(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=il(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=Jd(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};_r.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=DS(e[n]),o=t[n];r.push(_r.solidityHexValue(i,o,null))}return Buffer.concat(r)};_r.soliditySHA3=function(e,t){return oc.keccak256(_r.solidityPack(e,t))};_r.soliditySHA256=function(e,t){return oc.sha256(_r.solidityPack(e,t))};_r.solidityRIPEMD160=function(e,t){return oc.ripemd160(_r.solidityPack(e,t),!0)};function NAe(e){return e>="0"&&e<="9"}_r.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",o=r+1;o<e.length&&NAe(e[o]);)i+=e[o]-"0",o++;r=o-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};_r.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+il(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};Jj.exports=_r});var Xj=L((Xtt,Qj)=>{p();y();Qj.exports=Zj()});var iG=L(Ln=>{"use strict";p();y();Object.defineProperty(Ln,"__esModule",{value:!0});Ln.recoverTypedSignature=Ln.signTypedData=Ln.typedSignatureHash=Ln.TypedDataUtils=Ln.TYPED_MESSAGE_SCHEMA=Ln.SignTypedDataVersion=void 0;var ms=kb(),Bb=Xj(),Zd=Tb(),Hi;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Hi=Ln.SignTypedDataVersion||(Ln.SignTypedDataVersion={}));Ln.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function $p(e,t){if(Object.keys(Hi).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function eG(e,t,r,n,i){if($p(i,[Hi.V3,Hi.V4]),e[r]!==void 0)return["bytes32",i===Hi.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":ms.keccak(L5(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",ms.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",ms.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===Hi.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let o=r.slice(0,r.lastIndexOf("[")),s=n.map(a=>eG(e,t,o,a,i));return["bytes32",ms.keccak(Bb.rawEncode(s.map(([a])=>a),s.map(([,a])=>a)))]}return[r,n]}function L5(e,t,r,n){$p(n,[Hi.V3,Hi.V4]);let i=["bytes32"],o=[rG(e,r)];for(let s of r[e]){if(n===Hi.V3&&t[s.name]===void 0)continue;let[a,c]=eG(r,s.name,s.type,t[s.name],n);i.push(a),o.push(c)}return Bb.rawEncode(i,o)}function tG(e,t){let r="",n=K5(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let o of i){if(!t[o])throw new Error(`No type definition specified: ${o}`);r+=`${o}(${t[o].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`}return r}function K5(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])K5(n.type,t,r);return r}function D5(e,t,r,n){return $p(n,[Hi.V3,Hi.V4]),ms.keccak(L5(e,t,r,n))}function rG(e,t){return ms.keccak(tG(e,t))}function nG(e){let t={};for(let r in Ln.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function UAe(e,t){$p(t,[Hi.V3,Hi.V4]);let r=nG(e),n=[Buffer.from("1901","hex")];return n.push(D5("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(D5(r.primaryType,r.message,r.types,t)),ms.keccak(Buffer.concat(n))}Ln.TypedDataUtils={encodeData:L5,encodeType:tG,findTypeDependencies:K5,hashStruct:D5,hashType:rG,sanitizeData:nG,eip712Hash:UAe};function DAe(e){let t=F5(e);return ms.bufferToHex(t)}Ln.typedSignatureHash=DAe;function F5(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(o){return o.type!=="bytes"?o.value:Zd.legacyToBuffer(o.value)}),n=e.map(function(o){return o.type}),i=e.map(function(o){if(!o.name)throw t;return`${o.type} ${o.name}`});return Bb.soliditySHA3(["bytes32","bytes32"],[Bb.soliditySHA3(new Array(e.length).fill("string"),i),Bb.soliditySHA3(n,r)])}function LAe({privateKey:e,data:t,version:r}){if($p(r),Zd.isNullish(t))throw new Error("Missing data parameter");if(Zd.isNullish(e))throw new Error("Missing private key parameter");let n=r===Hi.V1?F5(t):Ln.TypedDataUtils.eip712Hash(t,r),i=ms.ecsign(n,e);return Zd.concatSig(ms.toBuffer(i.v),i.r,i.s)}Ln.signTypedData=LAe;function KAe({data:e,signature:t,version:r}){if($p(r),Zd.isNullish(e))throw new Error("Missing data parameter");if(Zd.isNullish(t))throw new Error("Missing signature parameter");let n=r===Hi.V1?F5(e):Ln.TypedDataUtils.eip712Hash(e,r),i=Zd.recoverPublicKey(n,t),o=ms.publicToAddress(i);return ms.bufferToHex(o)}Ln.recoverTypedSignature=KAe});var sG=L((oG,LS)=>{p();y();(function(e,t){"use strict";typeof LS<"u"&&LS.exports?LS.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(oG,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],o=r.length;for(n=0;n<o;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),o=new Uint8Array(i.length);for(n=0;n<i.length;n++)o[n]=i.charCodeAt(n);return o}),e})});var lG=L(Kn=>{"use strict";p();y();var FAe=Kn&&Kn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),VAe=Kn&&Kn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),aG=Kn&&Kn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&FAe(t,e,r);return VAe(t,e),t};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.getEncryptionPublicKey=Kn.decryptSafely=Kn.decrypt=Kn.encryptSafely=Kn.encrypt=void 0;var Qd=aG(ch()),la=aG(sG()),sc=Tb();function cG({publicKey:e,data:t,version:r}){if(sc.isNullish(e))throw new Error("Missing publicKey parameter");if(sc.isNullish(t))throw new Error("Missing data parameter");if(sc.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=Qd.box.keyPair(),i;try{i=la.decodeBase64(e)}catch{throw new Error("Bad public key")}let o=la.decodeUTF8(t),s=Qd.randomBytes(Qd.box.nonceLength),a=Qd.box(o,s,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:la.encodeBase64(s),ephemPublicKey:la.encodeBase64(n.publicKey),ciphertext:la.encodeBase64(a)}}default:throw new Error("Encryption type/version not supported")}}Kn.encrypt=cG;function qAe({publicKey:e,data:t,version:r}){if(sc.isNullish(e))throw new Error("Missing publicKey parameter");if(sc.isNullish(t))throw new Error("Missing data parameter");if(sc.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let o={data:t,padding:""},a=Buffer.byteLength(JSON.stringify(o),"utf-8")%n,c=0;a>0&&(c=n-a-i),o.padding="0".repeat(c);let u=JSON.stringify(o);return cG({publicKey:e,data:u,version:r})}Kn.encryptSafely=qAe;function uG({encryptedData:e,privateKey:t}){if(sc.isNullish(e))throw new Error("Missing encryptedData parameter");if(sc.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=fG(t),n=Qd.box.keyPair.fromSecretKey(r).secretKey,i=la.decodeBase64(e.nonce),o=la.decodeBase64(e.ciphertext),s=la.decodeBase64(e.ephemPublicKey),a=Qd.box.open(o,i,s,n),c;try{c=la.encodeUTF8(a)}catch{throw new Error("Decryption failed.")}if(c)return c;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}Kn.decrypt=uG;function HAe({encryptedData:e,privateKey:t}){if(sc.isNullish(e))throw new Error("Missing encryptedData parameter");if(sc.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(uG({encryptedData:e,privateKey:t})).data}Kn.decryptSafely=HAe;function WAe(e){let t=fG(e),r=Qd.box.keyPair.fromSecretKey(t).publicKey;return la.encodeBase64(r)}Kn.getEncryptionPublicKey=WAe;function fG(e){let t=Buffer.from(e,"hex").toString("base64");return la.decodeBase64(t)}});var hG=L(Oo=>{"use strict";p();y();var zAe=Oo&&Oo.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),V5=Oo&&Oo.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zAe(t,e,r)};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.normalize=Oo.concatSig=void 0;V5(zj(),Oo);V5(iG(),Oo);V5(lG(),Oo);var dG=Tb();Object.defineProperty(Oo,"concatSig",{enumerable:!0,get:function(){return dG.concatSig}});Object.defineProperty(Oo,"normalize",{enumerable:!0,get:function(){return dG.normalize}})});var JG=L(ey=>{"use strict";p();y();Object.defineProperty(ey,"__esModule",{value:!0});ey.testnet=ey.bitcoin=void 0;ey.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};ey.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var ZG=L(tr=>{"use strict";p();y();Object.defineProperty(tr,"__esModule",{value:!0});tr.maybe=tr.Boolean=tr.Array=tr.Buffer256bit=tr.Network=tr.typeforce=void 0;tr.typeforce=SI();tr.Network=tr.typeforce.compile({messagePrefix:tr.typeforce.oneOf(tr.typeforce.Buffer,tr.typeforce.String),bip32:{public:tr.typeforce.UInt32,private:tr.typeforce.UInt32},pubKeyHash:tr.typeforce.UInt8,scriptHash:tr.typeforce.UInt8,wif:tr.typeforce.UInt8});tr.Buffer256bit=tr.typeforce.BufferN(32);tr.Array=tr.typeforce.Array;tr.Boolean=tr.typeforce.Boolean;tr.maybe=tr.typeforce.maybe});var QG=L(YS=>{"use strict";p();y();Object.defineProperty(YS,"__esModule",{value:!0});YS.testEcc=void 0;var ke=e=>Buffer.from(e,"hex");function KSe(e){yr(e.isPoint(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),yr(!e.isPoint(ke("030000000000000000000000000000000000000000000000000000000000000005"))),yr(e.isPrivate(ke("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),yr(e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),yr(!e.isPrivate(ke("0000000000000000000000000000000000000000000000000000000000000000"))),yr(!e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),yr(!e.isPrivate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),yr(Buffer.from(e.privateAdd(ke("0000000000000000000000000000000000000000000000000000000000000001"),ke("0000000000000000000000000000000000000000000000000000000000000000"))).equals(ke("0000000000000000000000000000000000000000000000000000000000000001"))),yr(e.privateAdd(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),ke("0000000000000000000000000000000000000000000000000000000000000003"))===null),yr(Buffer.from(e.privateAdd(ke("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),ke("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(ke("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),yr(Buffer.from(e.privateNegate(ke("0000000000000000000000000000000000000000000000000000000000000001"))).equals(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),yr(Buffer.from(e.privateNegate(ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(ke("0000000000000000000000000000000000000000000000000000000000000003"))),yr(Buffer.from(e.privateNegate(ke("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ke("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),yr(Buffer.from(e.pointCompress(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),yr(Buffer.from(e.pointCompress(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),yr(Buffer.from(e.pointCompress(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),yr(Buffer.from(e.pointCompress(ke("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(ke("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),yr(Buffer.from(e.pointFromScalar(ke("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(ke("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),yr(e.xOnlyPointAddTweak(ke("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(ke("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),ke("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));yr(Buffer.from(t.xOnlyPubkey).equals(ke("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(ke("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),ke("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),yr(Buffer.from(t.xOnlyPubkey).equals(ke("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),yr(Buffer.from(e.sign(ke("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ke("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(ke("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),yr(e.verify(ke("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),ke("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),ke("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&yr(Buffer.from(e.signSchnorr(ke("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ke("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),ke("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(ke("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&yr(e.verifySchnorr(ke("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),ke("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),ke("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}YS.testEcc=KSe;function yr(e){if(!e)throw new Error("ecc library invalid")}});var e$=L(ty=>{"use strict";p();y();Object.defineProperty(ty,"__esModule",{value:!0});ty.ECPairFactory=ty.networks=void 0;var u_=JG();ty.networks=u_;var Wi=ZG(),FSe=V_(),XG=V1(),VSe=QG(),c_=Wi.typeforce.maybe(Wi.typeforce.compile({compressed:Wi.maybe(Wi.Boolean),network:Wi.maybe(Wi.Network)})),qSe=e=>e.length===32?e:e.slice(1,33);function HSe(e){(0,VSe.testEcc)(e);function t(a){return e.isPoint(a)}function r(a,c){if(Wi.typeforce(Wi.Buffer256bit,a),!e.isPrivate(a))throw new TypeError("Private key not in range [1, n)");return Wi.typeforce(c_,c),new s(a,void 0,c)}function n(a,c){return Wi.typeforce(e.isPoint,a),Wi.typeforce(c_,c),new s(void 0,a,c)}function i(a,c){let u=XG.decode(a),h=u.version;if(Wi.Array(c)){if(c=c.filter(l=>h===l.wif).pop(),!c)throw new Error("Unknown network version")}else if(c=c||u_.bitcoin,h!==c.wif)throw new Error("Invalid network version");return r(u.privateKey,{compressed:u.compressed,network:c})}function o(a){Wi.typeforce(c_,a),a===void 0&&(a={});let c=a.rng||FSe,u;do u=c(32),Wi.typeforce(Wi.Buffer256bit,u);while(!e.isPrivate(u));return r(u,a)}class s{__D;__Q;compressed;network;lowR;constructor(c,u,h){this.__D=c,this.__Q=u,this.lowR=!1,h===void 0&&(h={}),this.compressed=h.compressed===void 0?!0:h.compressed,this.network=h.network||u_.bitcoin,u!==void 0&&(this.__Q=Buffer.from(e.pointCompress(u,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let c=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(c)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return XG.encode(this.network.wif,this.__D,this.compressed)}tweak(c){return this.privateKey?this.tweakFromPrivateKey(c):this.tweakFromPublicKey(c)}sign(c,u){if(!this.__D)throw new Error("Missing private key");if(u===void 0&&(u=this.lowR),u===!1)return Buffer.from(e.sign(c,this.__D));{let h=e.sign(c,this.__D),l=Buffer.alloc(32,0),g=0;for(;h[0]>127;)g++,l.writeUIntLE(g,0,6),h=e.sign(c,this.__D,l);return Buffer.from(h)}}signSchnorr(c){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(c,this.privateKey))}verify(c,u){return e.verify(c,this.publicKey,u)}verifySchnorr(c,u){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(c,this.publicKey.subarray(1,33),u)}tweakFromPublicKey(c){let u=qSe(this.publicKey),h=e.xOnlyPointAddTweak(u,c);if(!h||h.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let l=Buffer.from([h.parity===0?2:3]);return n(Buffer.concat([l,h.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(c){let h=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,l=e.privateAdd(h,c);if(!l)throw new Error("Invalid tweaked private key!");return r(Buffer.from(l),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:o}}ty.ECPairFactory=HSe});var t$=L(ll=>{"use strict";p();y();Object.defineProperty(ll,"__esModule",{value:!0});ll.networks=ll.ECPairFactory=ll.default=void 0;var f_=e$();Object.defineProperty(ll,"default",{enumerable:!0,get:function(){return f_.ECPairFactory}});Object.defineProperty(ll,"ECPairFactory",{enumerable:!0,get:function(){return f_.ECPairFactory}});Object.defineProperty(ll,"networks",{enumerable:!0,get:function(){return f_.networks}})});p();y();var Ol=ee(Zr()),zr=ee(Pw()),Oc=ee(Ns());p();y();uy.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});p();y();var Wre=(e,t)=>e+t,d9=e=>e.reduce(Wre,0);var h9=Ol.Buffer.alloc(64).fill(0),f6=e=>Ho(e)?Ol.Buffer.from(e.message.serialize()):e.serializeMessage(),_w=e=>Oc.default.encode(f6(e)),p9=e=>{try{return _w(Fh(e,"bs58"))}catch{return _w(Fh(e,"base64"))}},y9=e=>{try{return Fh(e,"bs58").version}catch{return Fh(e,"base64").version}},m9=e=>l6(h6(e)),Ho=e=>e&&"version"in e,Bw=(e,t)=>Ho(e)?Ol.Buffer.from(e.serialize()):e.serialize(t??{requireAllSignatures:!1,verifySignatures:!1}),l6=(e,t)=>Oc.default.encode(Bw(e,t)),g9=(e,t)=>Bw(e,t).toString("base64"),Fh=(e,t)=>{let r;if(t==="base64")r=Ol.Buffer.from(e,"base64");else if(t==="bs58")r=Oc.default.decode(e);else throw new Error("Unsupported encoding");return zr.VersionedTransaction.deserialize(r)};function d6(e){return Ho(e)?e.signatures.filter(r=>r.every(i=>i===0)===!1).length>0:e.signatures.filter(({signature:r})=>r?r.find(i=>i!==0)!==void 0:!1).length>0}var b9=e=>{let t=e.map(r=>zr.VersionedMessage.deserialize(Oc.default.decode(r)));return d9(t.map(r=>r.header.numRequiredSignatures))},h6=e=>{let t=Oc.default.decode(e);if(zr.VersionedMessage.deserializeMessageVersion(t)==="legacy"){let i=zr.Message.from(t);return zr.Transaction.populate(i,[])}let n=zr.VersionedMessage.deserialize(t);return new zr.VersionedTransaction(n)},x9=(e,t=[])=>{let r=Oc.default.decode(e);if(zr.VersionedMessage.deserializeMessageVersion(r)==="legacy"){let i=zr.Message.from(r);return zr.Transaction.populate(i,t.map(s=>s?Oc.default.encode(s):Oc.default.encode(h9)))}else{let i=zr.VersionedMessage.deserialize(r);return new zr.VersionedTransaction(i,t.map(s=>s||h9))}},w9=e=>e.compileMessage().accountKeys,p6=e=>Ho(e)?e.message.recentBlockhash:e.recentBlockhash,v9=(e,t)=>{Ho(e)?e.message.recentBlockhash=t:e.recentBlockhash=t},A9=async(e,t)=>{if(p6(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;v9(e,r)},S9=async(e,t)=>{if(d6(e))return;let r=(await t.getLatestBlockhash("confirmed")).blockhash;v9(e,r)},y6=(e,t)=>{Ho(e)||(e.feePayer=t)},m6=e=>Ho(e)?e.message.staticAccountKeys[0]:e.feePayer,E9=(e,t)=>{m6(e)||y6(e,t)},I9=(e,t)=>{Ho(e)?e.sign(t):e.partialSign(...t)},k9=e=>Ho(e)?e.message.staticAccountKeys:e.signatures.map(t=>t.publicKey),T9=e=>Ho(e)?e.signatures.map(t=>Ol.Buffer.from(t)):e.signatures.map(t=>t.signature).filter(t=>t!==null);function P9(e){if(!zre(Ol.Buffer.from(e)))return!1;let t;try{t=zr.Message.from(e)}catch{t=void 0}let r;try{r=zr.VersionedMessage.deserialize(e)}catch{r=void 0}return!t&&!r||(t?.instructions?.length??0)===0&&(r?.compiledInstructions?.length??0)===0}function zre(e){let t=e.length,r=0;for(;r<t;)if(!(e[r]&128))r++;else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192)return!1;r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160)return!1;r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244)return!1;r+=4}else return!1;return!0}var _9=e=>uy(e).dividedBy(zr.LAMPORTS_PER_SOL),B9=e=>uy(e).multipliedBy(zr.LAMPORTS_PER_SOL);var bo={};xE(bo,{BufferLayout:()=>Yre,Message:()=>Zi.Message,MessageV0:()=>Zi.MessageV0,Transaction:()=>Zi.Transaction,TransactionInstruction:()=>Zi.TransactionInstruction,TransactionMessage:()=>Zi.TransactionMessage,VersionedMessage:()=>Zi.VersionedMessage,VersionedTransaction:()=>Zi.VersionedTransaction,getAccountsFromTransaction:()=>w9,getFeePayer:()=>m6,getRecentBlockhash:()=>p6,getRequiredSignatures:()=>b9,getSignaturePubKeys:()=>k9,getSignatures:()=>T9,isAlreadySigned:()=>d6,isSafeMessage:()=>P9,isVersionedTransaction:()=>Ho,lamportsToSolana:()=>_9,messageAndSignaturesToTransaction:()=>x9,messageStringToTransaction:()=>h6,messageStringToTransactionString:()=>m9,setFeePayer:()=>y6,setFeePayerIfNotExists:()=>E9,setRecentBlockhashIfNotExists:()=>A9,setRecentBlockhashIfNotSigned:()=>S9,signWithAdditionalSigners:()=>I9,solanaInstructionEncodeData:()=>N9,solanaToLamports:()=>B9,transactionStringToMessageString:()=>p9,transactionStringToTransaction:()=>Fh,transactionStringToVersion:()=>y9,transactionToBase58TransactionString:()=>l6,transactionToBase64TransactionString:()=>g9,transactionToMessageString:()=>_w,transactionToSerializedMessage:()=>f6,transactionToSerializedTransaction:()=>Bw,u64:()=>R9});p();y();var Yre=ee(Iy()),Zi=ee(Pw());Sc(bo,ee(Pw()));p();y();var C9=ee(hy()),M9=ee(Iy()),Cw=ee(i3()),jre=e=>{let t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},Mw=e=>t=>{let r=(0,M9.blob)(e,t),{encode:n,decode:i}=jre(r),o=r;return o.decode=(s,a)=>{let c=i(s,a);return(0,Cw.toBigIntLE)(C9.Buffer.from(c))},o.encode=(s,a,c)=>{let u=(0,Cw.toBufferLE)(s,e);return n(u,a,c)},o},R9=Mw(8),dIe=Mw(16),hIe=Mw(24),pIe=Mw(32);p();y();var O9=ee(hy());p();y();var Gre=ee(hy()),Vh=ee(Iy());function g6(e,t){let r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){let o=t[i.property];if(Array.isArray(o))return o.length*r(i.elementLayout)}else if("fields"in i)return g6({layout:i},t[i.property]);return 0},n=0;return e.layout.fields.forEach(i=>{n+=r(i)}),n}function N9(e,t){let r=e.layout.span>=0?e.layout.span:g6(e,t),n=O9.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}p();y();p();y();p();y();p();y();var Jre=ee(Hb(),1);var Pn=BigInt(0),Mt=BigInt(1),$u=BigInt(2),Zre=BigInt(8),U9=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),cr=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:U9,n:U9,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var V9=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),cm=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),_Ie=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),Qre=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Xre=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ene=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),tne=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),ln=class e{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof jr))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(jr.ZERO)?e.ZERO:new e(t.x,t.y,Mt,ce(t.x*t.y))}static toAffineBatch(t){let r=ine(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){L9(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ce(r*a),u=ce(o*i),h=ce(n*a),l=ce(s*i);return c===u&&h===l}negate(){return new e(ce(-this.x),this.y,this.z,ce(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=cr,o=ce(t*t),s=ce(r*r),a=ce($u*ce(n*n)),c=ce(i*o),u=t+r,h=ce(ce(u*u)-o-s),l=c+s,g=l-a,x=c-s,A=ce(h*g),E=ce(l*x),C=ce(h*x),M=ce(g*l);return new e(A,E,M,C)}add(t){L9(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:u}=t,h=ce((n-r)*(a+s)),l=ce((n+r)*(a-s)),g=ce(l-h);if(g===Pn)return this.double();let x=ce(i*$u*u),A=ce(o*$u*c),E=A+x,C=l+h,M=A-x,N=ce(E*g),R=ce(C*M),V=ce(E*M),q=ce(g*C);return new e(N,R,q,V)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=jr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&v6.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),v6.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+256/n,c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=Mt);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(D9(M,i[E])):o=o.add(D9(N,i[C]))}return e.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(Ow(t,cr.l),r)}multiplyUnsafe(t){let r=Ow(t,cr.l,!1),n=e.BASE,i=e.ZERO;if(r===Pn)return i;if(this.equals(i)||r===Mt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>Pn;)r&Mt&&(o=o.add(s)),s=s.double(),r>>=Mt;return o}isSmallOrder(){return this.multiplyUnsafe(cr.h).equals(e.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(cr.l/$u).double();return cr.l%$u&&(t=t.add(this)),t.equals(e.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?Zre:Uw(i));let s=ce(r*t),a=ce(n*t),c=ce(i*t);if(o)return jr.ZERO;if(c!==Mt)throw new Error("invZ was invalid");return new jr(s,a)}fromRistrettoBytes(){x6()}toRistrettoBytes(){x6()}fromRistrettoHash(){x6()}};ln.BASE=new ln(cr.Gx,cr.Gy,Mt,ce(cr.Gx*cr.Gy));ln.ZERO=new ln(Pn,Mt,Mt,Pn);function D9(e,t){let r=t.negate();return e?r:t}function L9(e){if(!(e instanceof ln))throw new TypeError("ExtendedPoint expected")}function b6(e){if(!(e instanceof Nl))throw new TypeError("RistrettoPoint expected")}function x6(){throw new Error("Legacy method: switch to RistrettoPoint")}var Nl=class e{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=cr,n=ce(cm*t*t),i=ce((n+Mt)*ene),o=BigInt(-1),s=ce((o-r*n)*ce(n+r)),{isValid:a,value:c}=S6(i,s),u=ce(c*t);Gu(u)||(u=ce(-u)),a||(c=u),a||(o=n);let h=ce(o*(n-Mt)*tne-s),l=c*c,g=ce((c+c)*s),x=ce(h*Qre),A=ce(Mt-l),E=ce(Mt+l);return new ln(ce(g*E),ce(A*x),ce(x*E),ce(g*A))}static hashToCurve(t){t=Yu(t,64);let r=w6(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=w6(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(n.add(o))}static fromHex(t){t=Yu(t,32);let{a:r,d:n}=cr,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=w6(t);if(!sne(lm(o),t)||Gu(o))throw new Error(i);let s=ce(o*o),a=ce(Mt+r*s),c=ce(Mt-r*s),u=ce(a*a),h=ce(c*c),l=ce(r*n*u-h),{isValid:g,value:x}=F9(ce(l*h)),A=ce(x*c),E=ce(x*A*l),C=ce((o+o)*A);Gu(C)&&(C=ce(-C));let M=ce(a*E),N=ce(C*M);if(!g||Gu(N)||M===Pn)throw new Error(i);return new e(new ln(C,M,Mt,N))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=ce(ce(n+r)*ce(n-r)),s=ce(t*r),a=ce(s*s),{value:c}=F9(ce(o*a)),u=ce(c*o),h=ce(c*s),l=ce(u*h*i),g;if(Gu(i*l)){let A=ce(r*cm),E=ce(t*cm);t=A,r=E,g=ce(u*Xre)}else g=h;Gu(t*l)&&(r=ce(-r));let x=ce((n-r)*g);return Gu(x)&&(x=ce(-x)),lm(x)}toHex(){return dm(this.toRawBytes())}toString(){return this.toHex()}equals(t){b6(t);let r=this.ep,n=t.ep,i=ce(r.x*n.y)===ce(r.y*n.x),o=ce(r.y*n.y)===ce(r.x*n.x);return i||o}add(t){return b6(t),new e(this.ep.add(t.ep))}subtract(t){return b6(t),new e(this.ep.subtract(t.ep))}multiply(t){return new e(this.ep.multiply(t))}multiplyUnsafe(t){return new e(this.ep.multiplyUnsafe(t))}};Nl.BASE=new Nl(ln.BASE);Nl.ZERO=new Nl(ln.ZERO);var v6=new WeakMap,jr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,v6.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=cr;t=Yu(t,32);let o=t.slice();o[31]=t[31]&-129;let s=hm(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=V9)throw new Error("Expected 0 < hex < 2**256");let a=ce(s*s),c=ce(a-Mt),u=ce(n*a+Mt),{isValid:h,value:l}=S6(c,u);if(!h)throw new Error("Point.fromHex: invalid y coordinate");let g=(l&Mt)===Mt;return(t[31]&128)!==0!==g&&(l=ce(-l)),new e(l,s)}static async fromPrivateKey(t){return(await z9(t)).point}toRawBytes(){let t=lm(this.y);return t[31]|=this.x&Mt?128:0,t}toHex(){return dm(this.toRawBytes())}toX25519(){let{y:t}=this,r=ce((Mt+t)*Uw(Mt-t));return lm(r)}isTorsionFree(){return ln.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(ce(-this.x),this.y)}add(t){return ln.fromAffine(this).add(ln.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return ln.fromAffine(this).multiply(t,this).toAffine()}};jr.BASE=new jr(cr.Gx,cr.Gy);jr.ZERO=new jr(Pn,Mt);var fm=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Yu(t,64),n=jr.fromHex(r.slice(0,32),!1),i=hm(r.slice(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof jr))throw new Error("Expected Point instance");return Ow(r,cr.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(lm(this.s),32),t}toHex(){return dm(this.toRawBytes())}};function K9(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var rne=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function dm(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=rne[e[r]];return t}function A6(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function q9(e){let r=e.toString(16).padStart(64,"0");return A6(r)}function lm(e){return q9(e).reverse()}function Gu(e){return(ce(e)&Mt)===Mt}function hm(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+dm(Uint8Array.from(e).reverse()))}var nne=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function w6(e){return ce(hm(e)&nne)}function ce(e,t=cr.P){let r=e%t;return r>=Pn?r:t+r}function Uw(e,t=cr.P){if(e===Pn||t<=Pn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ce(e,t),n=t,i=Pn,o=Mt,s=Mt,a=Pn;for(;r!==Pn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Mt)throw new Error("invert: does not exist");return ce(i,t)}function ine(e,t=cr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Pn?o:(r[a]=o,ce(o*s,t)),Mt),i=Uw(n,t);return e.reduceRight((o,s,a)=>s===Pn?o:(r[a]=ce(o*r[a],t),ce(o*s,t)),i),r}function ka(e,t){let{P:r}=cr,n=e;for(;t-- >Pn;)n*=n,n%=r;return n}function one(e){let{P:t}=cr,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,u=ka(c,$u)*c%t,h=ka(u,Mt)*e%t,l=ka(h,r)*h%t,g=ka(l,n)*l%t,x=ka(g,i)*g%t,A=ka(x,o)*x%t,E=ka(A,s)*A%t,C=ka(E,s)*A%t,M=ka(C,n)*l%t;return{pow_p_5_8:ka(M,$u)*e%t,b2:c}}function S6(e,t){let r=ce(t*t*t),n=ce(r*r*t),i=one(e*n).pow_p_5_8,o=ce(e*r*i),s=ce(t*o*o),a=o,c=ce(o*cm),u=s===e,h=s===ce(-e),l=s===ce(-e*cm);return u&&(o=a),(h||l)&&(o=c),Gu(o)&&(o=ce(-o)),{isValid:u||h,value:o}}function F9(e){return S6(Mt,e)}function Rw(e){return ce(hm(e),cr.l)}function sne(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Yu(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):A6(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Ow(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Pn<e)return e}else if(Pn<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function ane(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function H9(e){if(e=typeof e=="bigint"||typeof e=="number"?q9(Ow(e,V9)):Yu(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function W9(e){let t=ane(e.slice(0,32)),r=e.slice(32,64),n=Rw(t),i=jr.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var um;function Nw(...e){if(typeof um!="function")throw new Error("utils.sha512Sync must be set to use sync methods");return um(...e)}async function z9(e){return W9(await Nc.sha512(H9(e)))}function E6(e){return W9(Nw(H9(e)))}function cne(e){return E6(e).pointBytes}function une(e,t){e=Yu(e);let{prefix:r,scalar:n,pointBytes:i}=E6(t),o=Rw(Nw(r,e)),s=jr.BASE.multiply(o),a=Rw(Nw(s.toRawBytes(),i,e)),c=ce(o+a*n,cr.l);return new fm(s,c).toRawBytes()}function fne(e,t,r){t=Yu(t),r instanceof jr||(r=jr.fromHex(r,!1));let{r:n,s:i}=e instanceof fm?e.assertValidity():fm.fromHex(e),o=ln.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function lne(e,t,r,n){let i=Rw(n),o=ln.fromAffine(e).multiplyUnsafe(i);return ln.fromAffine(t).add(o).subtract(r).multiplyUnsafe(cr.h).equals(ln.ZERO)}function dne(e,t,r){let{r:n,SB:i,msg:o,pub:s}=fne(e,t,r),a=Nw(n.toRawBytes(),s.toRawBytes(),o);return lne(s,n,i,a)}var Dw={getExtendedPublicKey:E6,getPublicKey:cne,sign:une,verify:dne};jr.BASE._setWindowSize(8);var ju={node:Jre,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Nc={bytesToHex:dm,hexToBytes:A6,concatBytes:K9,getExtendedPublicKey:z9,mod:ce,invert:Uw,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Yu(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return ce(hm(e),cr.l-Mt)+Mt},randomBytes:(e=32)=>{if(ju.web)return ju.web.getRandomValues(new Uint8Array(e));if(ju.node){let{randomBytes:t}=ju.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Nc.randomBytes(32),sha512:async(...e)=>{let t=K9(...e);if(ju.web){let r=await ju.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(ju.node)return Uint8Array.from(ju.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=jr.BASE){let r=t.equals(jr.BASE)?t:new jr(t.x,t.y);return r._setWindowSize(e),r.multiply($u),r},sha512Sync:void 0};Object.defineProperties(Nc,{sha512Sync:{configurable:!1,get(){return um},set(e){um||(um=e)}}});p();y();p();y();var Lw=BigInt(4294967295),I6=BigInt(32);function j9(e,t=!1){return t?{h:Number(e&Lw),l:Number(e>>I6&Lw)}:{h:Number(e>>I6&Lw)|0,l:Number(e&Lw)|0}}function hne(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=j9(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var pne=(e,t)=>BigInt(e>>>0)<<I6|BigInt(t>>>0),yne=(e,t,r)=>e>>>r,mne=(e,t,r)=>e<<32-r|t>>>r,gne=(e,t,r)=>e>>>r|t<<32-r,bne=(e,t,r)=>e<<32-r|t>>>r,xne=(e,t,r)=>e<<64-r|t>>>r-32,wne=(e,t,r)=>e>>>r-32|t<<64-r,vne=(e,t)=>t,Ane=(e,t)=>e,Sne=(e,t,r)=>e<<r|t>>>32-r,Ene=(e,t,r)=>t<<r|e>>>32-r,Ine=(e,t,r)=>t<<r-32|e>>>64-r,kne=(e,t,r)=>e<<r-32|t>>>64-r;function Tne(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var Pne=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),_ne=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Bne=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Cne=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Mne=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Rne=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,One={fromBig:j9,split:hne,toBig:pne,shrSH:yne,shrSL:mne,rotrSH:gne,rotrSL:bne,rotrBH:xne,rotrBL:wne,rotr32H:vne,rotr32L:Ane,rotlSH:Sne,rotlSL:Ene,rotlBH:Ine,rotlBL:kne,add:Tne,add3L:Pne,add3H:_ne,add4L:Bne,add4H:Cne,add5H:Rne,add5L:Mne},Me=One;var[Nne,Une]=Me.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ju=new Uint32Array(80),Zu=new Uint32Array(80),qh=class extends lB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:h,Fh:l,Fl:g,Gh:x,Gl:A,Hh:E,Hl:C}=this;return[t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C]}set(t,r,n,i,o,s,a,c,u,h,l,g,x,A,E,C){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=h|0,this.Fh=l|0,this.Fl=g|0,this.Gh=x|0,this.Gl=A|0,this.Hh=E|0,this.Hl=C|0}process(t,r){for(let R=0;R<16;R++,r+=4)Ju[R]=t.getUint32(r),Zu[R]=t.getUint32(r+=4);for(let R=16;R<80;R++){let V=Ju[R-15]|0,q=Zu[R-15]|0,W=Me.rotrSH(V,q,1)^Me.rotrSH(V,q,8)^Me.shrSH(V,q,7),G=Me.rotrSL(V,q,1)^Me.rotrSL(V,q,8)^Me.shrSL(V,q,7),z=Ju[R-2]|0,te=Zu[R-2]|0,_=Me.rotrSH(z,te,19)^Me.rotrBH(z,te,61)^Me.shrSH(z,te,6),f=Me.rotrSL(z,te,19)^Me.rotrBL(z,te,61)^Me.shrSL(z,te,6),m=Me.add4L(G,f,Zu[R-7],Zu[R-16]),b=Me.add4H(m,W,_,Ju[R-7],Ju[R-16]);Ju[R]=b|0,Zu[R]=m|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:h,Eh:l,El:g,Fh:x,Fl:A,Gh:E,Gl:C,Hh:M,Hl:N}=this;for(let R=0;R<80;R++){let V=Me.rotrSH(l,g,14)^Me.rotrSH(l,g,18)^Me.rotrBH(l,g,41),q=Me.rotrSL(l,g,14)^Me.rotrSL(l,g,18)^Me.rotrBL(l,g,41),W=l&x^~l&E,G=g&A^~g&C,z=Me.add5L(N,q,G,Une[R],Zu[R]),te=Me.add5H(z,M,V,W,Nne[R],Ju[R]),_=z|0,f=Me.rotrSH(n,i,28)^Me.rotrBH(n,i,34)^Me.rotrBH(n,i,39),m=Me.rotrSL(n,i,28)^Me.rotrBL(n,i,34)^Me.rotrBL(n,i,39),b=n&o^n&a^o&a,w=i&s^i&c^s&c;M=E|0,N=C|0,E=x|0,C=A|0,x=l|0,A=g|0,{h:l,l:g}=Me.add(u|0,h|0,te|0,_|0),u=a|0,h=c|0,a=o|0,c=s|0,o=n|0,s=i|0;let v=Me.add3L(_,m,w);n=Me.add3H(v,te,f,b),i=v|0}({h:n,l:i}=Me.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=Me.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Me.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:h}=Me.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:l,l:g}=Me.add(this.Eh|0,this.El|0,l|0,g|0),{h:x,l:A}=Me.add(this.Fh|0,this.Fl|0,x|0,A|0),{h:E,l:C}=Me.add(this.Gh|0,this.Gl|0,E|0,C|0),{h:M,l:N}=Me.add(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,i,o,s,a,c,u,h,l,g,x,A,E,C,M,N)}roundClean(){Ju.fill(0),Zu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},k6=class extends qh{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},T6=class extends qh{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},P6=class extends qh{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},xo=ml(()=>new qh),KIe=ml(()=>new k6),FIe=ml(()=>new T6),VIe=ml(()=>new P6);p();y();var Dne=ee(Hb(),1);var Kt=BigInt(0),br=BigInt(1),Xu=BigInt(2),mm=BigInt(3),G9=BigInt(8),xr=Object.freeze({a:Kt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:br,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),$9=(e,t)=>(e+t/Xu)/t,Kw={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=xr,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-br*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=$9(o*e,t),c=$9(-n*e,t),u=ge(e-a*r-c*i,t),h=ge(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}},Hh=32,bm=32;var Y9=Hh+1,J9=2*Hh+1;function Z9(e){let{a:t,b:r}=xr,n=ge(e*e),i=ge(n*e);return ge(i+t*e+r)}var Fw=xr.a===Kt,Ww=class extends Error{constructor(t){super(t)}};function Q9(e){if(!(e instanceof Ci))throw new TypeError("JacobianPoint expected")}var Ci=class e{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof Gr))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Gr.ZERO)?e.ZERO:new e(t.x,t.y,br)}static toAffineBatch(t){let r=qne(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return e.toAffineBatch(t).map(e.fromAffine)}equals(t){Q9(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=ge(i*i),u=ge(a*a),h=ge(r*u),l=ge(o*c),g=ge(ge(n*a)*u),x=ge(ge(s*i)*c);return h===l&&g===x}negate(){return new e(this.x,ge(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=ge(t*t),o=ge(r*r),s=ge(o*o),a=t+o,c=ge(Xu*(ge(a*a)-i-s)),u=ge(mm*i),h=ge(u*u),l=ge(h-Xu*c),g=ge(u*(c-l)-G9*s),x=ge(Xu*r*n);return new e(l,g,x)}add(t){Q9(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===Kt||s===Kt)return this;if(r===Kt||n===Kt)return t;let c=ge(i*i),u=ge(a*a),h=ge(r*u),l=ge(o*c),g=ge(ge(n*a)*u),x=ge(ge(s*i)*c),A=ge(l-h),E=ge(x-g);if(A===Kt)return E===Kt?this.double():e.ZERO;let C=ge(A*A),M=ge(A*C),N=ge(h*C),R=ge(E*E-M-Xu*N),V=ge(E*(N-R)-g*M),q=ge(i*a*A);return new e(R,V,q)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=e.ZERO;if(typeof t=="bigint"&&t===Kt)return r;let n=tM(t);if(n===br)return this;if(!Fw){let l=r,g=this;for(;n>Kt;)n&br&&(l=l.add(g)),g=g.double(),n>>=br;return l}let{k1neg:i,k1:o,k2neg:s,k2:a}=Kw.splitScalar(n),c=r,u=r,h=this;for(;o>Kt||a>Kt;)o&br&&(c=c.add(h)),a&br&&(u=u.add(h)),h=h.double(),o>>=br,a>>=br;return i&&(c=c.negate()),s&&(u=u.negate()),u=new e(ge(u.x*Kw.beta),u.y,u.z),c.add(u)}precomputeWindow(t){let r=Fw?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(e.BASE)&&(r=Gr.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&B6.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=e.normalizeZ(i),B6.set(r,i)));let o=e.ZERO,s=e.BASE,a=1+(Fw?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),h=2**n,l=BigInt(n);for(let g=0;g<a;g++){let x=g*c,A=Number(t&u);t>>=l,A>c&&(A-=h,t+=br);let E=x,C=x+Math.abs(A)-1,M=g%2!==0,N=A<0;A===0?s=s.add(Vw(M,i[E])):o=o.add(Vw(N,i[C]))}return{p:o,f:s}}multiply(t,r){let n=tM(t),i,o;if(Fw){let{k1neg:s,k1:a,k2neg:c,k2:u}=Kw.splitScalar(n),{p:h,f:l}=this.wNAF(a,r),{p:g,f:x}=this.wNAF(u,r);h=Vw(s,h),g=Vw(c,g),g=new e(ge(g.x*Kw.beta),g.y,g.z),i=h.add(g),o=l.add(x)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return e.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(e.ZERO);t==null&&(t=o?G9:$w(i));let s=t,a=ge(s*s),c=ge(a*s),u=ge(r*a),h=ge(n*c),l=ge(i*s);if(o)return Gr.ZERO;if(l!==br)throw new Error("invZ was invalid");return new Gr(u,h)}};Ci.BASE=new Ci(xr.Gx,xr.Gy,br);Ci.ZERO=new Ci(Kt,br,Kt);function Vw(e,t){let r=t.negate();return e?r:t}var B6=new WeakMap,Gr=class e{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,B6.delete(this)}hasEvenY(){return this.y%Xu===Kt}static fromCompressedHex(t){let r=t.length===32,n=zo(r?t:t.subarray(1));if(!Hw(n))throw new Error("Point is not on curve");let i=Z9(n),o=Vne(i),s=(o&br)===br;r?s&&(o=ge(-o)):(t[0]&1)===1!==s&&(o=ge(-o));let a=new e(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=zo(t.subarray(1,Hh+1)),n=zo(t.subarray(Hh+1,Hh*2+1)),i=new e(r,n);return i.assertValidity(),i}static fromHex(t){let r=Ul(t),n=r.length,i=r[0];if(n===Hh)return this.fromCompressedHex(r);if(n===Y9&&(i===2||i===3))return this.fromCompressedHex(r);if(n===J9&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Y9} compressed bytes or ${J9} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return e.BASE.multiply(vm(t))}static fromSignature(t,r,n){let{r:i,s:o}=jne(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=Wne(Ul(t)),{n:a}=xr,c=n===2||n===3?i+a:i,u=$w(c,a),h=ge(-s*u,a),l=ge(o*u,a),g=n&1?"03":"02",x=e.fromHex(g+ef(c)),A=e.BASE.multiplyAndAddUnsafe(x,h,l);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(t=!1){return tf(this.toHex(t))}toHex(t=!1){let r=ef(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${ef(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!Hw(r)||!Hw(n))throw new Error(t);let i=ge(n*n),o=Z9(r);if(ge(i-o)!==Kt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new e(this.x,ge(-this.y))}double(){return Ci.fromAffine(this).double().toAffine()}add(t){return Ci.fromAffine(this).add(Ci.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Ci.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Ci.fromAffine(this),o=r===Kt||r===br||this!==e.BASE?i.multiplyUnsafe(r):i.multiply(r),s=Ci.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(Ci.ZERO)?void 0:a.toAffine()}};Gr.BASE=new Gr(xr.Gx,xr.Gy);Gr.ZERO=new Gr(Kt,Kt);function X9(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function eM(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${zh(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:zo(r),left:e.subarray(t+2)}}function Lne(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${zh(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=eM(e.subarray(2)),{data:n,left:i}=eM(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${zh(i)}`);return{r:t,s:n}}var gm=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?zh(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new e(zw(i.slice(0,64)),zw(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=Lne(r?t:tf(t));return new e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!wm(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!wm(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=xr.n>>br;return this.s>t}normalizeS(){return this.hasHighS()?new e(this.r,ge(-this.s,xr.n)):this}toDERRawBytes(){return tf(this.toDERHex())}toDERHex(){let t=X9(ym(this.s)),r=X9(ym(this.r)),n=t.length/2,i=r.length/2,o=ym(n),s=ym(i);return`30${ym(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return tf(this.toCompactHex())}toCompactHex(){return ef(this.r)+ef(this.s)}};function pm(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Kne=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zh(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=Kne[e[r]];return t}var Fne=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ef(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(Kt<=e&&e<Fne))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function xm(e){let t=tf(ef(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function ym(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function zw(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function tf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function zo(e){return zw(zh(e))}function Ul(e){return e instanceof Uint8Array?Uint8Array.from(e):tf(e)}function tM(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&wm(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function ge(e,t=xr.P){let r=e%t;return r>=Kt?r:t+r}function Wo(e,t){let{P:r}=xr,n=e;for(;t-- >Kt;)n*=n,n%=r;return n}function Vne(e){let{P:t}=xr,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=Wo(u,mm)*u%t,l=Wo(h,mm)*u%t,g=Wo(l,Xu)*c%t,x=Wo(g,n)*g%t,A=Wo(x,i)*x%t,E=Wo(A,s)*A%t,C=Wo(E,a)*E%t,M=Wo(C,s)*A%t,N=Wo(M,mm)*u%t,R=Wo(N,o)*x%t,V=Wo(R,r)*c%t,q=Wo(V,Xu);if(q*q%t!==e)throw new Error("Cannot find square root");return q}function $w(e,t=xr.P){if(e===Kt||t<=Kt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ge(e,t),n=t,i=Kt,o=br,s=br,a=Kt;for(;r!==Kt;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==br)throw new Error("invert: does not exist");return ge(i,t)}function qne(e,t=xr.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Kt?o:(r[a]=o,ge(o*s,t)),br),i=$w(n,t);return e.reduceRight((o,s,a)=>s===Kt?o:(r[a]=ge(o*r[a],t),ge(o*s,t)),i),r}function Hne(e){let t=e.length*8-bm*8,r=zo(e);return t>0?r>>BigInt(t):r}function Wne(e,t=!1){let r=Hne(e);if(t)return r;let{n}=xr;return r>=n?r-n:r}var Wh,_6;function wm(e){return Kt<e&&e<xr.n}function Hw(e){return Kt<e&&e<xr.P}function vm(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*bm)throw new Error("Expected 32 bytes of private key");t=zw(e)}else if(e instanceof Uint8Array){if(e.length!==bm)throw new Error("Expected 32 bytes of private key");t=zo(e)}else throw new TypeError("Expected valid private key");if(!wm(t))throw new Error("Expected private key: 0 < key < n");return t}function zne(e){return e instanceof Gr?(e.assertValidity(),e):Gr.fromHex(e)}function jne(e){if(e instanceof gm)return e.assertValidity(),e;try{return gm.fromDER(e)}catch{return gm.fromCompact(e)}}function Uc(e,t=!1){return Gr.fromPrivateKey(e).toRawBytes(t)}function jw(e){return ge(zo(e),xr.n)}var jh=class e{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Ul(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=zo(r.subarray(0,32)),i=zo(r.subarray(32,64));return new e(n,i)}assertValidity(){let{r:t,s:r}=this;if(!Hw(t)||!wm(r))throw new Error("Invalid signature")}toHex(){return ef(this.r)+ef(this.s)}toRawBytes(){return tf(this.toHex())}};function Gne(e){return Gr.fromPrivateKey(e).toRawX()}var Gw=class{constructor(t,r,n=Ta.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=Ul(t);let{x:i,scalar:o}=this.getScalar(vm(r));if(this.px=i,this.d=o,this.rand=Ul(n),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){let r=Gr.fromPrivateKey(t),n=r.hasEvenY()?t:xr.n-t;return{point:r,scalar:n,x:r.toRawX()}}initNonce(t,r){return xm(t^zo(r))}finalizeNonce(t){let r=ge(zo(t),xr.n);if(r===Kt)throw new Error("sign: Creation of signature failed. k is zero");let{point:n,x:i,scalar:o}=this.getScalar(r);return{R:n,rx:i,k:o}}finalizeSig(t,r,n,i){return new jh(t.x,ge(r+n*i,xr.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){let{m:t,d:r,px:n,rand:i}=this,o=Ta.taggedHash,s=this.initNonce(r,await o(Qu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(await o(Qu.nonce,s,n,t)),h=jw(await o(Qu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return await iM(l,t,n)||this.error(),l}calcSync(){let{m:t,d:r,px:n,rand:i}=this,o=Ta.taggedHashSync,s=this.initNonce(r,o(Qu.aux,i)),{R:a,rx:c,k:u}=this.finalizeNonce(o(Qu.nonce,s,n,t)),h=jw(o(Qu.challenge,c,n,t)),l=this.finalizeSig(a,u,h,r);return oM(l,t,n)||this.error(),l}};async function $ne(e,t,r){return new Gw(e,t,r).calc()}function Yne(e,t,r){return new Gw(e,t,r).calcSync()}function rM(e,t,r){let n=e instanceof jh,i=n?e:jh.fromHex(e);return n&&i.assertValidity(),{...i,m:Ul(t),P:zne(r)}}function nM(e,t,r,n){let i=Gr.BASE.multiplyAndAddUnsafe(t,vm(r),ge(-n,xr.n));return!(!i||!i.hasEvenY()||i.x!==e)}async function iM(e,t,r){try{let{r:n,s:i,m:o,P:s}=rM(e,t,r),a=jw(await Ta.taggedHash(Qu.challenge,xm(n),s.toRawX(),o));return nM(n,s,i,a)}catch{return!1}}function oM(e,t,r){try{let{r:n,s:i,m:o,P:s}=rM(e,t,r),a=jw(Ta.taggedHashSync(Qu.challenge,xm(n),s.toRawX(),o));return nM(n,s,i,a)}catch(n){if(n instanceof Ww)throw n;return!1}}var sM={Signature:jh,getPublicKey:Gne,sign:$ne,verify:iM,signSync:Yne,verifySync:oM};Gr.BASE._setWindowSize(8);var wo={node:Dne,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Qu={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},qw={},Ta={bytesToHex:zh,hexToBytes:tf,concatBytes:pm,mod:ge,invert:$w,isValidPrivateKey(e){try{return vm(e),!0}catch{return!1}},_bigintTo32Bytes:xm,_normalizePrivateKey:vm,hashToPrivateKey:e=>{e=Ul(e);let t=bm+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=ge(zo(e),xr.n-br)+br;return xm(r)},randomBytes:(e=32)=>{if(wo.web)return wo.web.getRandomValues(new Uint8Array(e));if(wo.node){let{randomBytes:t}=wo.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ta.hashToPrivateKey(Ta.randomBytes(bm+8)),precompute(e=8,t=Gr.BASE){let r=t===Gr.BASE?t:new Gr(t.x,t.y);return r._setWindowSize(e),r.multiply(mm),r},sha256:async(...e)=>{if(wo.web){let t=await wo.web.subtle.digest("SHA-256",pm(...e));return new Uint8Array(t)}else if(wo.node){let{createHash:t}=wo.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(wo.web){let r=await wo.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=pm(...t),i=await wo.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(wo.node){let{createHmac:r}=wo.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=qw[e];if(r===void 0){let n=await Ta.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=pm(n,n),qw[e]=r}return Ta.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof Wh!="function")throw new Ww("sha256Sync is undefined, you need to set it");let r=qw[e];if(r===void 0){let n=Wh(Uint8Array.from(e,i=>i.charCodeAt(0)));r=pm(n,n),qw[e]=r}return Wh(r,...t)},_JacobianPoint:Ci};Object.defineProperties(Ta,{sha256Sync:{configurable:!1,get(){return Wh},set(e){Wh||(Wh=e)}},hmacSha256Sync:{configurable:!1,get(){return _6},set(e){_6||(_6=e)}}});p();y();var aM=new RegExp("^[0-9]+'?$"),Gh=2147483648;p();y();var XIe=new RegExp("^m(\\/[0-9]+')+$");var Zne="ed25519 seed",cM=e=>{let t=Buffer.from(gl(xo,Buffer.from(Zne),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Buffer.from(r,"hex"),chainCode:Buffer.from(n,"hex")}},uM=({key:e,chainCode:t},r)=>{let n=Buffer.allocUnsafe(4);n.writeUInt32BE(r,0);let i=Buffer.concat([Buffer.alloc(1,0),e,n]),o=Buffer.from(gl(xo,t,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64);return{key:Buffer.from(s,"hex"),chainCode:Buffer.from(a,"hex")}};p();y();var Dc=ee(Zr()),Yw=ee(oh()),$h=ee(un());var Qne=Dc.Buffer.from("Bitcoin seed"),fM=Yw.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),lM=e=>{let t=Dc.Buffer.from(gl(xo,Dc.Buffer.from(Qne),e)).toString("hex"),r=t.slice(0,64),n=t.slice(64);return{key:Dc.Buffer.from(r,"hex"),chainCode:Dc.Buffer.from(n,"hex")}},dM=(e,t)=>{let{key:r,chainCode:n}=e,i=new Uint8Array(37);if(t&Gh)i.set(r,1);else{let l=Uc(r,!0);i.set((0,$h.arrayify)(l))}for(let l=24;l>=0;l-=8)i[33+(l>>3)]=t>>24-l&255;let o=Dc.Buffer.from(gl(xo,n,i)).toString("hex"),s=o.slice(0,64),a=o.slice(64),c=Yw.BigNumber.from(`0x${s}`);if(c.gte(fM))throw new Error("Invalid private key");let u=c.add(`0x${r.toString("hex")}`).mod(fM);if(u.eq(Yw.BigNumber.from(0)))throw new Error("Invalid private key");let h=(0,$h.hexZeroPad)((0,$h.hexlify)(u),32);return{key:Dc.Buffer.from(h.replace("0x",""),"hex"),chainCode:Dc.Buffer.from(a,"hex")}};p();y();var C6=O.string().refine(e=>{if(typeof e!="string")return!1;let t=e.split("/");if(t.length<2||t[0]!=="m")return!1;for(let r=1;r<t.length;++r)if(!aM.test(t[r]))return!1;return!0},{message:"Value is not a valid derivation path."});var Am=O.union([O.literal("bitcoinTaproot"),O.literal("bitcoinNativeSegwit"),O.literal("bitcoinNestedSegwit"),O.literal("bitcoinLegacy")]),Sm=O.union([O.literal("bip44RootEthereum"),O.literal("bip44Ethereum"),O.literal("bip44EthereumSecondary"),O.literal("bip44EthereumTertiary")]),Em=O.union([O.literal("bip44Root"),O.literal("bip44"),O.literal("bip44Change"),O.literal("deprecated")]);p();y();var Xne=O.union([O.literal("bip44Change"),O.literal("bip44"),O.literal("deprecated")]),eie=O.union([O.literal("bip44Ethereum"),O.literal("bip44EthereumSecondary"),O.literal("bip44EthereumTertiary")]),tie=O.union([O.literal("bitcoinTaproot"),O.literal("bitcoinNativeSegwit"),O.literal("bitcoinNestedSegwit"),O.literal("bitcoinLegacy")]),M6=O.number().int().min(0),rie=O.object({pathType:O.literal("bip44Root"),index:O.number().optional()}),nie=O.object({pathType:Xne,index:M6}),iie=O.object({pathType:O.literal("bip44RootEthereum"),index:O.number().optional()}),oie=O.object({pathType:eie,index:M6}),sie=O.object({pathType:tie,index:M6}),Jw=O.union([rie,nie,iie,oie,sie]),Im=new Error("Invalid derivation path."),pM=new Error("Unsupported derivation path."),R6=e=>{if(!Jw.safeParse(e).success)throw Im;switch(e.pathType){case"bitcoinTaproot":return`m/86'/0'/0'/0/${e.index}`;case"bitcoinNativeSegwit":return`m/84'/0'/0'/0/${e.index}`;case"bitcoinNestedSegwit":return`m/46'/0'/0'/0/${e.index}`;case"bitcoinLegacy":return`m/44'/0'/0'/0/${e.index}`;case"bip44RootEthereum":return"m/44'/60'";case"bip44Ethereum":return`m/44'/60'/0'/0/${e.index}`;case"bip44EthereumSecondary":return`m/44'/60'/1'/0/${e.index}`;case"bip44EthereumTertiary":return`m/44'/60'/2'/0/${e.index}`;case"bip44Root":return"m/44'/501'";case"deprecated":return`m/501'/${e.index}'/0/0`;case"bip44":return`m/44'/501'/${e.index}'`;case"bip44Change":return`m/44'/501'/${e.index}'/0'`}},hM=1<<31>>>0,aie=e=>{try{let t=e.replace("0x","").match(/.{1,2}/g)??[];if(t.length===0)throw Im;let r=parseInt(t[0],16),n="m";for(let i=0;i<r;i++){let o="";for(let c=0;c<4;c++)o+=t[1+i*4+c];let s=parseInt(o,16),a=s>=hM;a&&(s-=hM),n+=`/${s.toString(10)}${a?"'":""}`}return n}catch{throw Im}},cie=e=>{let t,r=C6.safeParse(`m/${e.replace("m/","")}`);if(r.success)t=r.data;else try{t=aie(e)}catch{throw Im}if(t==="m/44'/501'")return{pathType:"bip44Root"};if(t==="m/44'/60'")return{pathType:"bip44RootEthereum"};let n=t.replace("m/","").split("/");try{if(n.length===5&&n[0]==="86'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinTaproot",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="84'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNativeSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="46'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinNestedSegwit",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="0'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bitcoinLegacy",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="0'"&&n[3]==="0")return{pathType:"bip44Ethereum",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="1'"&&n[3]==="0")return{pathType:"bip44EthereumSecondary",index:parseInt(n[4],10)};if(n.length===5&&n[0]==="44'"&&n[1]==="60'"&&n[2]==="2'"&&n[3]==="0")return{pathType:"bip44EthereumTertiary",index:parseInt(n[4],10)};if(n.length===4&&n[0]==="44'"&&n[1]==="501'"&&n[3]==="0'")return{pathType:"bip44Change",index:parseInt(n[2],10)};if(n.length===3&&n[0]==="44'"&&n[1]==="501'")return{pathType:"bip44",index:parseInt(n[2],10)};if(n.length===4&&n[0]==="501'"&&n[2]==="0"&&n[3]==="0")return{pathType:"deprecated",index:parseInt(n[1],10)}}catch{}throw pM};p();y();var v4e=new Error("Unsupported path."),O6=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!0;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!1}},N6=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return!1;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!0;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!1}},U6=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!1;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":return!0}};Nc.sha512Sync=(...e)=>xo(Nc.concatBytes(...e));var{getPublicKey:uie}=Dw,qs=class{#e;#t;constructor(t){this.#e={ellipticCurve:"ed25519",value:cM(t),nodes:{}},this.#t={ellipticCurve:"secp256k1",value:lM(t),nodes:{}}}derivePathType(t,r){switch(t){case"bitcoinTaproot":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/86'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNativeSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/84'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinNestedSegwit":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/46'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bitcoinLegacy":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/0'/0'/0/${r}`,useCompressedPublicKey:!0});case"bip44Ethereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/0'/0/${r}`});case"bip44EthereumSecondary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/1'/0/${r}`});case"bip44EthereumTertiary":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/44'/60'/2'/0/${r}`});case"bip44RootEthereum":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:"m/44'/60'"});case"bip44Change":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'/0'`});case"bip44":return this.derivePath({ellipticCurve:"ed25519",derivationPath:`m/44'/501'/${r}'`});case"deprecated":return this.derivePath({ellipticCurve:"secp256k1",derivationPath:`m/501'/${r}'/0/0`});case"bip44Root":return this.derivePath({ellipticCurve:"ed25519",derivationPath:"m/44'/501'"})}}derivePath(t){return t.ellipticCurve==="ed25519"?this.deriveED25519Path(t):t.ellipticCurve==="secp256k1"?this.deriveSECP256K1Path(t):xe(t)}deriveED25519Path(t){let{ellipticCurve:r,derivationPath:n}=t,i=n.split("/"),o=this.#e;for(let c of i){if(c==="m")continue;if(!o)throw new Error("Cannot derive path, no current node.");let u=o.nodes?.[c]??null;if(!u){let h={ellipticCurve:r,value:uM(o.value,parseInt(c,10)+Gh),nodes:{}};u=h,o.nodes[c]=h}o=u}if(!o)throw new Error(`Unable to derive ${n} on curve ${r}.`);let s=uie(o.value.key),a=new Uint8Array(64);return a.set(o.value.key),a.set(s,32),{publicKey:s,secretKey:a}}deriveSECP256K1Path(t){let{ellipticCurve:r,derivationPath:n,useCompressedPublicKey:i=!1}=t,o=n.split("/"),s=this.#t;for(let u of o){if(u==="m")continue;if(!s)throw new Error("Cannot derive path, no current node.");let h=s.nodes?.[u]??null;if(!h){let l=0;u.endsWith("'")&&(l=Gh);let g={ellipticCurve:r,value:dM(s.value,parseInt(u,10)+l),nodes:{}};h=g,s.nodes[u]=g}s=h}if(!s)throw new Error(`Unable to derive ${n} on curve ${r}.`);let a=s.value.key;return{publicKey:Uc(a,i),secretKey:new Uint8Array(a)}}cleanUpTree(t){if(t){t.value.key.fill(0),t.value.chainCode.fill(0);let r=Object.values(t.nodes);for(let n of r)this.cleanUpTree(n)}}cleanup(){this.cleanUpTree(this.#e),this.cleanUpTree(this.#t),this.#e=null,this.#t=null}};p();y();var Ie=(s=>(s.BitcoinTaproot="bip122_p2tr",s.BitcoinNativeSegwit="bip122_p2wpkh",s.BitcoinNestedSegwit="bip122_p2sh",s.BitcoinLegacy="bip122_p2pkh",s.Solana="solana",s.EVM="eip155",s))(Ie||{}),yM=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"],rf=O.enum(yM);var Zw=class{constructor(){this.type="bip122_p2pkh";this.displayName="Legacy";this.defaultDerivationPathType="bitcoinLegacy";this.otherDerivationPathType=[]}};p();y();var Qw=class{constructor(){this.type="bip122_p2wpkh";this.displayName="Native Segwit";this.defaultDerivationPathType="bitcoinNativeSegwit";this.otherDerivationPathType=[]}};p();y();var Xw=class{constructor(){this.type="bip122_p2sh";this.displayName="Nested Segwit";this.defaultDerivationPathType="bitcoinNestedSegwit";this.otherDerivationPathType=[]}};p();y();var e1=class{constructor(){this.type="bip122_p2tr";this.displayName="Taproot";this.defaultDerivationPathType="bitcoinTaproot";this.otherDerivationPathType=[]}};p();y();var t1=class{constructor(){this.type="eip155";this.displayName="Ethereum";this.defaultDerivationPathType="bip44Ethereum";this.otherDerivationPathType=["bip44RootEthereum","bip44EthereumSecondary","bip44EthereumTertiary"]}};p();y();var r1=class{constructor(){this.type="solana";this.displayName="Solana";this.defaultDerivationPathType="bip44Change";this.otherDerivationPathType=["bip44Root","bip44","deprecated"]}};var mM,gM,bM,xM,wM,vM;vM="bip122_p2tr",wM="bip122_p2wpkh",xM="bip122_p2sh",bM="bip122_p2pkh",gM="eip155",mM="solana";var D6=class{constructor(){this[vM]=new e1;this[wM]=new Qw;this[xM]=new Xw;this[bM]=new Zw;this[gM]=new t1;this[mM]=new r1;this.allAddressTypes=Object.values(Ie);this.allAddressTypeDefinitions=this.allAddressTypes.map(t=>this[t]);this.addressTypeByDerivationPathType={};this.allAddressTypeDefinitions.forEach(t=>{this.addressTypeByDerivationPathType[t.defaultDerivationPathType]=t.type,t.otherDerivationPathType.forEach(r=>{this.addressTypeByDerivationPathType[r]=t.type})})}getAll(){return this.allAddressTypes}getDisplayName(t){return this[t].displayName}getAddressType(t){return this.addressTypeByDerivationPathType[t]}},mi=new D6;p();y();p();y();p();y();var n1=class{constructor(){this.addressTypes=["bip122_p2tr","bip122_p2wpkh","bip122_p2sh","bip122_p2pkh"]}generateKeypairFromPrivateKey(t){let r=t.fold(i=>Buffer.from(i));return{publicKey:Uc(r,!0),privateKey:r}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new qs(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};p();y();p();y();var q8=ee(cy());p();y();var TM=ee(oh());var Yh=ee(jo()),PM=ee(Ti());p();y();var IM="abstract-provider/5.7.0";var vie=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Aie=new PM.Logger(IM),kM=class extends Yh.Description{static isForkEvent(t){return!!(t&&t._isForkEvent)}};var a1=class e{constructor(){Aie.checkAbstract(new.target,e),(0,Yh.defineReadOnly)(this,"_isProvider",!0)}getFeeData(){return vie(this,void 0,void 0,function*(){let{block:t,gasPrice:r}=yield(0,Yh.resolveProperties)({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(s=>null)}),n=null,i=null,o=null;return t&&t.baseFeePerGas&&(n=t.baseFeePerGas,o=TM.BigNumber.from("1500000000"),i=t.baseFeePerGas.mul(2).add(o)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r}})}addListener(t,r){return this.on(t,r)}removeListener(t,r){return this.off(t,r)}static isProvider(t){return!!(t&&t._isProvider)}};p();y();var Ws=ee(jo()),Pa=ee(Ti());p();y();var _M="abstract-signer/5.7.0";var Hs=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},Go=new Pa.Logger(_M),Sie=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Eie=[Pa.Logger.errors.INSUFFICIENT_FUNDS,Pa.Logger.errors.NONCE_EXPIRED,Pa.Logger.errors.REPLACEMENT_UNDERPRICED],km=class e{constructor(){Go.checkAbstract(new.target,e),(0,Ws.defineReadOnly)(this,"_isSigner",!0)}getBalance(t){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)})}getTransactionCount(t){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)})}estimateGas(t){return Hs(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let r=yield(0,Ws.resolveProperties)(this.checkTransaction(t));return yield this.provider.estimateGas(r)})}call(t,r){return Hs(this,void 0,void 0,function*(){this._checkProvider("call");let n=yield(0,Ws.resolveProperties)(this.checkTransaction(t));return yield this.provider.call(n,r)})}sendTransaction(t){return Hs(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let r=yield this.populateTransaction(t),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Hs(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(t){return Hs(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)})}checkTransaction(t){for(let n in t)Sie.indexOf(n)===-1&&Go.throwArgumentError("invalid transaction key: "+n,"transaction",t);let r=(0,Ws.shallowCopy)(t);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Go.throwArgumentError("from address mismatch","transaction",t),n[0])),r}populateTransaction(t){return Hs(this,void 0,void 0,function*(){let r=yield(0,Ws.resolveProperties)(this.checkTransaction(t));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Hs(this,void 0,void 0,function*(){if(i==null)return null;let o=yield this.resolveName(i);return o==null&&Go.throwArgumentError("provided ENS name resolves to null","tx.to",i),o})),r.to.catch(i=>{}));let n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Go.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t):(r.type===0||r.type===1)&&n&&Go.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{let i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){let o=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Go.throwError("network does not support EIP-1559",Pa.Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Go.throwError("failed to get consistent fee data",Pa.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(Eie.indexOf(i.code)>=0)throw i;return Go.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Pa.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Go.throwArgumentError("chainId address mismatch","transaction",t),i[0])),yield(0,Ws.resolveProperties)(r)})}_checkProvider(t){this.provider||Go.throwError("missing provider",Pa.Logger.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!!(t&&t._isSigner)}},BM=class e extends km{constructor(t,r){super(),(0,Ws.defineReadOnly)(this,"address",t),(0,Ws.defineReadOnly)(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,r){return Promise.resolve().then(()=>{Go.throwError(t,Pa.Logger.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new e(this.address,t)}};var js=ee(un()),Um=ee(e8());p();y();p();y();var t8=ee(un()),Pm=ee(jo()),v1=class{constructor(t){(0,Pm.defineReadOnly)(this,"alphabet",t),(0,Pm.defineReadOnly)(this,"base",t.length),(0,Pm.defineReadOnly)(this,"_alphabetMap",{}),(0,Pm.defineReadOnly)(this,"_leader",t.charAt(0));for(let r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}encode(t){let r=(0,t8.arrayify)(t);if(r.length===0)return"";let n=[0];for(let o=0;o<r.length;++o){let s=r[o];for(let a=0;a<n.length;++a)s+=n[a]<<8,n[a]=s%this.base,s=s/this.base|0;for(;s>0;)n.push(s%this.base),s=s/this.base|0}let i="";for(let o=0;r[o]===0&&o<r.length-1;++o)i+=this._leader;for(let o=n.length-1;o>=0;--o)i+=this.alphabet[n[o]];return i}decode(t){if(typeof t!="string")throw new TypeError("Expected String");let r=[];if(t.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<t.length;n++){let i=this._alphabetMap[t[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let o=i;for(let s=0;s<r.length;++s)o+=r[s]*this.base,r[s]=o&255,o>>=8;for(;o>0;)r.push(o&255),o>>=8}for(let n=0;t[n]===this._leader&&n<t.length-1;++n)r.push(0);return(0,t8.arrayify)(new Uint8Array(r.reverse()))}},lPe=new v1("abcdefghijklmnopqrstuvwxyz234567"),r8=new v1("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Nt=ee(un()),S8=ee(oh()),Wl=ee(sf());p();y();p();y();var cf=ee(un()),o8=ee(i8());function Vl(e,t,r,n,i){e=(0,cf.arrayify)(e),t=(0,cf.arrayify)(t);let o,s=1,a=new Uint8Array(n),c=new Uint8Array(t.length+4);c.set(t);let u,h;for(let l=1;l<=s;l++){c[t.length]=l>>24&255,c[t.length+1]=l>>16&255,c[t.length+2]=l>>8&255,c[t.length+3]=l&255;let g=(0,cf.arrayify)((0,o8.computeHmac)(i,e,c));o||(o=g.length,h=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),h.set(g);for(let E=1;E<r;E++){g=(0,cf.arrayify)((0,o8.computeHmac)(i,e,g));for(let C=0;C<o;C++)h[C]^=g[C]}let x=(l-1)*o,A=l===s?u:o;a.set((0,cf.arrayify)(h).slice(0,A),x)}return(0,cf.hexlify)(a)}var $n=ee(jo());p();y();p();y();var at=ee(qb()),Ca=ee(z_());function t0(e,t,r){return r={path:t,exports:{},require:function(n,i){return lse(n,i??r.path)}},e(r,r.exports),r.exports}function lse(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var u8=BR;function BR(e,t){if(!e)throw new Error(t||"Assertion failed")}BR.equal=function(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var zs=t0(function(e,t){"use strict";var r=t;function n(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)c[u]=s[u]|0;return c}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)c.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var h=s.charCodeAt(u),l=h>>8,g=h&255;l?c.push(l,g):c.push(g)}return c}r.toArray=n;function i(s){return s.length===1?"0"+s:s}r.zero2=i;function o(s){for(var a="",c=0;c<s.length;c++)a+=i(s[c].toString(16));return a}r.toHex=o,r.encode=function(a,c){return c==="hex"?o(a):a}}),vo=t0(function(e,t){"use strict";var r=t;r.assert=u8,r.toArray=zs.toArray,r.zero2=zs.zero2,r.toHex=zs.toHex,r.encode=zs.encode;function n(c,u,h){var l=new Array(Math.max(c.bitLength(),h)+1);l.fill(0);for(var g=1<<u+1,x=c.clone(),A=0;A<l.length;A++){var E,C=x.andln(g-1);x.isOdd()?(C>(g>>1)-1?E=(g>>1)-C:E=C,x.isubn(E)):E=0,l[A]=E,x.iushrn(1)}return l}r.getNAF=n;function i(c,u){var h=[[],[]];c=c.clone(),u=u.clone();for(var l=0,g=0,x;c.cmpn(-l)>0||u.cmpn(-g)>0;){var A=c.andln(3)+l&3,E=u.andln(3)+g&3;A===3&&(A=-1),E===3&&(E=-1);var C;A&1?(x=c.andln(7)+l&7,(x===3||x===5)&&E===2?C=-A:C=A):C=0,h[0].push(C);var M;E&1?(x=u.andln(7)+g&7,(x===3||x===5)&&A===2?M=-E:M=E):M=0,h[1].push(M),2*l===C+1&&(l=1-l),2*g===M+1&&(g=1-g),c.iushrn(1),u.iushrn(1)}return h}r.getJSF=i;function o(c,u,h){var l="_"+u;c.prototype[u]=function(){return this[l]!==void 0?this[l]:this[l]=h.call(this)}}r.cachedProperty=o;function s(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=s;function a(c){return new at.default(c,"hex","le")}r.intFromLE=a}),k1=vo.getNAF,dse=vo.getJSF,T1=vo.assert;function ff(e,t){this.type=e,this.p=new at.default(t.p,16),this.red=t.prime?at.default.red(t.prime):at.default.mont(this.p),this.zero=new at.default(0).toRed(this.red),this.one=new at.default(1).toRed(this.red),this.two=new at.default(2).toRed(this.red),this.n=t.n&&new at.default(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ql=ff;ff.prototype.point=function(){throw new Error("Not implemented")};ff.prototype.validate=function(){throw new Error("Not implemented")};ff.prototype._fixedNafMul=function(t,r){T1(t.precomputed);var n=t._getDoubles(),i=k1(r,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var u=a+n.step-1;u>=a;u--)c=(c<<1)+i[u];s.push(c)}for(var h=this.jpoint(null,null,null),l=this.jpoint(null,null,null),g=o;g>0;g--){for(a=0;a<s.length;a++)c=s[a],c===g?l=l.mixedAdd(n.points[a]):c===-g&&(l=l.mixedAdd(n.points[a].neg()));h=h.add(l)}return h.toP()};ff.prototype._wnafMul=function(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=k1(r,n,this._bitLength),a=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var u=0;c>=0&&s[c]===0;c--)u++;if(c>=0&&u++,a=a.dblp(u),c<0)break;var h=s[c];T1(h!==0),t.type==="affine"?h>0?a=a.mixedAdd(o[h-1>>1]):a=a.mixedAdd(o[-h-1>>1].neg()):h>0?a=a.add(o[h-1>>1]):a=a.add(o[-h-1>>1].neg())}return t.type==="affine"?a.toP():a};ff.prototype._wnafMulAdd=function(t,r,n,i,o){var s=this._wnafT1,a=this._wnafT2,c=this._wnafT3,u=0,h,l,g;for(h=0;h<i;h++){g=r[h];var x=g._getNAFPoints(t);s[h]=x.wnd,a[h]=x.points}for(h=i-1;h>=1;h-=2){var A=h-1,E=h;if(s[A]!==1||s[E]!==1){c[A]=k1(n[A],s[A],this._bitLength),c[E]=k1(n[E],s[E],this._bitLength),u=Math.max(c[A].length,u),u=Math.max(c[E].length,u);continue}var C=[r[A],null,null,r[E]];r[A].y.cmp(r[E].y)===0?(C[1]=r[A].add(r[E]),C[2]=r[A].toJ().mixedAdd(r[E].neg())):r[A].y.cmp(r[E].y.redNeg())===0?(C[1]=r[A].toJ().mixedAdd(r[E]),C[2]=r[A].add(r[E].neg())):(C[1]=r[A].toJ().mixedAdd(r[E]),C[2]=r[A].toJ().mixedAdd(r[E].neg()));var M=[-3,-1,-5,-7,0,7,5,1,3],N=dse(n[A],n[E]);for(u=Math.max(N[0].length,u),c[A]=new Array(u),c[E]=new Array(u),l=0;l<u;l++){var R=N[0][l]|0,V=N[1][l]|0;c[A][l]=M[(R+1)*3+(V+1)],c[E][l]=0,a[A]=C}}var q=this.jpoint(null,null,null),W=this._wnafT4;for(h=u;h>=0;h--){for(var G=0;h>=0;){var z=!0;for(l=0;l<i;l++)W[l]=c[l][h]|0,W[l]!==0&&(z=!1);if(!z)break;G++,h--}if(h>=0&&G++,q=q.dblp(G),h<0)break;for(l=0;l<i;l++){var te=W[l];te!==0&&(te>0?g=a[l][te-1>>1]:te<0&&(g=a[l][-te-1>>1].neg()),g.type==="affine"?q=q.mixedAdd(g):q=q.add(g))}}for(h=0;h<i;h++)a[h]=null;return o?q:q.toP()};function Qo(e,t){this.curve=e,this.type=t,this.precomputed=null}ff.BasePoint=Qo;Qo.prototype.eq=function(){throw new Error("Not implemented")};Qo.prototype.validate=function(){return this.curve.validate(this)};ff.prototype.decodePoint=function(t,r){t=vo.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?T1(t[t.length-1]%2===0):t[0]===7&&T1(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};Qo.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Qo.prototype._encode=function(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Qo.prototype.encode=function(t,r){return vo.encode(this._encode(r),t)};Qo.prototype.precompute=function(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this};Qo.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((t.bitLength()+1)/r.step):!1};Qo.prototype._getDoubles=function(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<r;o+=t){for(var s=0;s<t;s++)i=i.dbl();n.push(i)}return{step:t,points:n}};Qo.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)r[o]=r[o-1].add(i);return{wnd:t,points:r}};Qo.prototype._getBeta=function(){return null};Qo.prototype.dblp=function(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r};var f8=t0(function(e){typeof Object.create=="function"?e.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),hse=vo.assert;function Xo(e){ql.call(this,"short",e),this.a=new at.default(e.a,16).toRed(this.red),this.b=new at.default(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}f8(Xo,ql);var pse=Xo;Xo.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(t.beta)r=new at.default(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(t.lambda)n=new at.default(t.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))===0?n=o[0]:(n=o[1],hse(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var s;return t.basis?s=t.basis.map(function(a){return{a:new at.default(a.a,16),b:new at.default(a.b,16)}}):s=this._getEndoBasis(n),{beta:r,lambda:n,basis:s}}};Xo.prototype._getEndoRoots=function(t){var r=t===this.p?this.red:at.default.mont(t),n=new at.default(2).toRed(r).redInvm(),i=n.redNeg(),o=new at.default(3).toRed(r).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),a=i.redSub(o).fromRed();return[s,a]};Xo.prototype._getEndoBasis=function(t){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,i=this.n.clone(),o=new at.default(1),s=new at.default(0),a=new at.default(0),c=new at.default(1),u,h,l,g,x,A,E,C=0,M,N;n.cmpn(0)!==0;){var R=i.div(n);M=i.sub(R.mul(n)),N=a.sub(R.mul(o));var V=c.sub(R.mul(s));if(!l&&M.cmp(r)<0)u=E.neg(),h=o,l=M.neg(),g=N;else if(l&&++C===2)break;E=M,i=n,n=M,a=o,o=N,c=s,s=V}x=M.neg(),A=N;var q=l.sqr().add(g.sqr()),W=x.sqr().add(A.sqr());return W.cmp(q)>=0&&(x=u,A=h),l.negative&&(l=l.neg(),g=g.neg()),x.negative&&(x=x.neg(),A=A.neg()),[{a:l,b:g},{a:x,b:A}]};Xo.prototype._endoSplit=function(t){var r=this.endo.basis,n=r[0],i=r[1],o=i.b.mul(t).divRound(this.n),s=n.b.neg().mul(t).divRound(this.n),a=o.mul(n.a),c=s.mul(i.a),u=o.mul(n.b),h=s.mul(i.b),l=t.sub(a).sub(c),g=u.add(h).neg();return{k1:l,k2:g}};Xo.prototype.pointFromX=function(t,r){t=new at.default(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(t,i)};Xo.prototype.validate=function(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),o=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Xo.prototype._endoWnafMulAdd=function(t,r,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<t.length;s++){var a=this._endoSplit(r[s]),c=t[s],u=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),i[s*2]=c,i[s*2+1]=u,o[s*2]=a.k1,o[s*2+1]=a.k2}for(var h=this._wnafMulAdd(1,i,o,s*2,n),l=0;l<s*2;l++)i[l]=null,o[l]=null;return h};function Mn(e,t,r,n){ql.BasePoint.call(this,e,"affine"),t===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new at.default(t,16),this.y=new at.default(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}f8(Mn,ql.BasePoint);Xo.prototype.point=function(t,r,n){return new Mn(this,t,r,n)};Xo.prototype.pointFromJSON=function(t,r){return Mn.fromJSON(this,t,r)};Mn.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r}};Mn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Mn.fromJSON=function(t,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function o(a){return t.point(a[0],a[1],n)}var s=r[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};Mn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Mn.prototype.isInfinity=function(){return this.inf};Mn.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Mn.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),a=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};Mn.prototype.getX=function(){return this.x.fromRed()};Mn.prototype.getY=function(){return this.y.fromRed()};Mn.prototype.mul=function(t){return t=new at.default(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Mn.prototype.mulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};Mn.prototype.jmulAdd=function(t,r,n){var i=[this,r],o=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};Mn.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Mn.prototype.neg=function(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Mn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Gn(e,t,r,n){ql.BasePoint.call(this,e,"jacobian"),t===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new at.default(0)):(this.x=new at.default(t,16),this.y=new at.default(r,16),this.z=new at.default(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}f8(Gn,ql.BasePoint);Xo.prototype.jpoint=function(t,r,n){return new Gn(this,t,r,n)};Gn.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};Gn.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Gn.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),o=t.x.redMul(n),s=this.y.redMul(r.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),c=i.redSub(o),u=s.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=c.redSqr(),l=h.redMul(c),g=i.redMul(h),x=u.redSqr().redIAdd(l).redISub(g).redISub(g),A=u.redMul(g.redISub(x)).redISub(s.redMul(l)),E=this.z.redMul(t.z).redMul(c);return this.curve.jpoint(x,A,E)};Gn.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),o=this.y,s=t.y.redMul(r).redMul(this.z),a=n.redSub(i),c=o.redSub(s);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),g=c.redSqr().redIAdd(h).redISub(l).redISub(l),x=c.redMul(l.redISub(g)).redISub(o.redMul(h)),A=this.z.redMul(a);return this.curve.jpoint(g,x,A)};Gn.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,a=this.y,c=this.z,u=c.redSqr().redSqr(),h=a.redAdd(a);for(r=0;r<t;r++){var l=s.redSqr(),g=h.redSqr(),x=g.redSqr(),A=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),E=s.redMul(g),C=A.redSqr().redISub(E.redAdd(E)),M=E.redISub(C),N=A.redMul(M);N=N.redIAdd(N).redISub(x);var R=h.redMul(c);r+1<t&&(u=u.redMul(x)),s=C,c=R,h=N}return this.curve.jpoint(s,h.redMul(o),c)};Gn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Gn.prototype._zeroDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(a).redISub(a),h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),t=u,r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),g=this.y.redSqr(),x=g.redSqr(),A=this.x.redAdd(g).redSqr().redISub(l).redISub(x);A=A.redIAdd(A);var E=l.redAdd(l).redIAdd(l),C=E.redSqr(),M=x.redIAdd(x);M=M.redIAdd(M),M=M.redIAdd(M),t=C.redISub(A).redISub(A),r=E.redMul(A.redISub(t)).redISub(M),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};Gn.prototype._threeDbl=function(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),a=this.x.redAdd(o).redSqr().redISub(i).redISub(s);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(a).redISub(a);t=u;var h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),r=c.redMul(a.redISub(u)).redISub(h),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),g=this.y.redSqr(),x=this.x.redMul(g),A=this.x.redSub(l).redMul(this.x.redAdd(l));A=A.redAdd(A).redIAdd(A);var E=x.redIAdd(x);E=E.redIAdd(E);var C=E.redAdd(E);t=A.redSqr().redISub(C),n=this.y.redAdd(this.z).redSqr().redISub(g).redISub(l);var M=g.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M),r=A.redMul(E.redISub(t)).redISub(M)}return this.curve.jpoint(t,r,n)};Gn.prototype._dbl=function(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=r.redSqr(),a=n.redSqr(),c=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(o)),u=r.redAdd(r);u=u.redIAdd(u);var h=u.redMul(a),l=c.redSqr().redISub(h.redAdd(h)),g=h.redISub(l),x=a.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var A=c.redMul(g).redISub(x),E=n.redAdd(n).redMul(i);return this.curve.jpoint(l,A,E)};Gn.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),o=t.redAdd(t).redIAdd(t),s=o.redSqr(),a=this.x.redAdd(r).redSqr().redISub(t).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var c=a.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var h=o.redIAdd(a).redSqr().redISub(s).redISub(c).redISub(u),l=r.redMul(h);l=l.redIAdd(l),l=l.redIAdd(l);var g=this.x.redMul(c).redISub(l);g=g.redIAdd(g),g=g.redIAdd(g);var x=this.y.redMul(h.redMul(u.redISub(h)).redISub(a.redMul(c)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var A=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(g,x,A)};Gn.prototype.mul=function(t,r){return t=new at.default(t,r),this.curve._wnafMul(this,t)};Gn.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),o=n.redMul(t.z);return this.y.redMul(o).redISub(t.y.redMul(i)).cmpn(0)===0};Gn.prototype.eqXToP=function(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=t.clone(),o=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Gn.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Gn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var E1=t0(function(e,t){"use strict";var r=t;r.base=ql,r.short=pse,r.mont=null,r.edwards=null}),I1=t0(function(e,t){"use strict";var r=t,n=vo.assert;function i(a){a.type==="short"?this.curve=new E1.short(a):a.type==="edwards"?this.curve=new E1.edwards(a):this.curve=new E1.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function o(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var u=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ca.default.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ca.default.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ca.default.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ca.default.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ca.default.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ca.default.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ca.default.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var s;try{s=null.crash()}catch{s=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ca.default.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",s]})});function uf(e){if(!(this instanceof uf))return new uf(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=zs.toArray(e.entropy,e.entropyEnc||"hex"),r=zs.toArray(e.nonce,e.nonceEnc||"hex"),n=zs.toArray(e.pers,e.persEnc||"hex");u8(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var CR=uf;uf.prototype._init=function(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};uf.prototype._hmac=function(){return new Ca.default.hmac(this.hash,this.K)};uf.prototype._update=function(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};uf.prototype.reseed=function(t,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),t=zs.toArray(t,r),n=zs.toArray(n,i),u8(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1};uf.prototype.generate=function(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=zs.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,zs.encode(s,r)};var c8=vo.assert;function gi(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var l8=gi;gi.fromPublic=function(t,r,n){return r instanceof gi?r:new gi(t,{pub:r,pubEnc:n})};gi.fromPrivate=function(t,r,n){return r instanceof gi?r:new gi(t,{priv:r,privEnc:n})};gi.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};gi.prototype.getPublic=function(t,r){return typeof t=="string"&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub};gi.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};gi.prototype._importPrivate=function(t,r){this.priv=new at.default(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)};gi.prototype._importPublic=function(t,r){if(t.x||t.y){this.ec.curve.type==="mont"?c8(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&c8(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};gi.prototype.derive=function(t){return t.validate()||c8(t.validate(),"public point not validated"),t.mul(this.priv).getX()};gi.prototype.sign=function(t,r,n){return this.ec.sign(t,this,r,n)};gi.prototype.verify=function(t,r){return this.ec.verify(t,r,this)};gi.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var yse=vo.assert;function P1(e,t){if(e instanceof P1)return e;this._importDER(e,t)||(yse(e.r&&e.s,"Signature without r or s"),this.r=new at.default(e.r,16),this.s=new at.default(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var _1=P1;function mse(){this.place=0}function s8(e,t){var r=e[t.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return i<=127?!1:(t.place=s,i)}function _R(e){for(var t=0,r=e.length-1;!e[t]&&!(e[t+1]&128)&&t<r;)t++;return t===0?e:e.slice(t)}P1.prototype._importDER=function(t,r){t=vo.toArray(t,r);var n=new mse;if(t[n.place++]!==48)return!1;var i=s8(t,n);if(i===!1||i+n.place!==t.length||t[n.place++]!==2)return!1;var o=s8(t,n);if(o===!1)return!1;var s=t.slice(n.place,o+n.place);if(n.place+=o,t[n.place++]!==2)return!1;var a=s8(t,n);if(a===!1||t.length!==a+n.place)return!1;var c=t.slice(n.place,a+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new at.default(s),this.s=new at.default(c),this.recoveryParam=null,!0};function a8(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(r|128);--r;)e.push(t>>>(r<<3)&255);e.push(t)}P1.prototype.toDER=function(t){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=_R(r),n=_R(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];a8(i,r.length),i=i.concat(r),i.push(2),a8(i,n.length);var o=i.concat(n),s=[48];return a8(s,o.length),s=s.concat(o),vo.encode(s,t)};var gse=function(){throw new Error("unsupported")},MR=vo.assert;function Zo(e){if(!(this instanceof Zo))return new Zo(e);typeof e=="string"&&(MR(Object.prototype.hasOwnProperty.call(I1,e),"Unknown curve "+e),e=I1[e]),e instanceof I1.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var bse=Zo;Zo.prototype.keyPair=function(t){return new l8(this,t)};Zo.prototype.keyFromPrivate=function(t,r){return l8.fromPrivate(this,t,r)};Zo.prototype.keyFromPublic=function(t,r){return l8.fromPublic(this,t,r)};Zo.prototype.genKeyPair=function(t){t||(t={});for(var r=new CR({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||gse(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new at.default(2));;){var o=new at.default(r.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Zo.prototype._truncateToN=function(t,r){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t};Zo.prototype.sign=function(t,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new at.default(t,16));for(var o=this.n.byteLength(),s=r.getPrivate().toArray("be",o),a=t.toArray("be",o),c=new CR({hash:this.hash,entropy:s,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new at.default(1)),h=0;;h++){var l=i.k?i.k(h):new at.default(c.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(u)>=0)){var g=this.g.mul(l);if(!g.isInfinity()){var x=g.getX(),A=x.umod(this.n);if(A.cmpn(0)!==0){var E=l.invm(this.n).mul(A.mul(r.getPrivate()).iadd(t));if(E=E.umod(this.n),E.cmpn(0)!==0){var C=(g.getY().isOdd()?1:0)|(x.cmp(A)!==0?2:0);return i.canonical&&E.cmp(this.nh)>0&&(E=this.n.sub(E),C^=1),new _1({r:A,s:E,recoveryParam:C})}}}}}};Zo.prototype.verify=function(t,r,n,i){t=this._truncateToN(new at.default(t,16)),n=this.keyFromPublic(n,i),r=new _1(r,"hex");var o=r.r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),c=a.mul(t).umod(this.n),u=a.mul(o).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.eqXToP(o)):(h=this.g.mulAdd(c,n.getPublic(),u),h.isInfinity()?!1:h.getX().umod(this.n).cmp(o)===0)};Zo.prototype.recoverPubKey=function(e,t,r,n){MR((3&r)===r,"The recovery param is more than two bits"),t=new _1(t,n);var i=this.n,o=new at.default(e),s=t.r,a=t.s,c=r&1,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?s=this.curve.pointFromX(s.add(this.curve.n),c):s=this.curve.pointFromX(s,c);var h=t.r.invm(i),l=i.sub(o).mul(h).umod(i),g=a.mul(h).umod(i);return this.g.mulAdd(l,s,g)};Zo.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new _1(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch{continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var xse=t0(function(e,t){"use strict";var r=t;r.version="6.5.4",r.utils=vo,r.rand=function(){throw new Error("unsupported")},r.curve=E1,r.curves=I1,r.ec=bse,r.eddsa=null}),RR=xse.ec;var ur=ee(un()),r0=ee(jo()),NR=ee(Ti());p();y();var OR="signing-key/5.7.0";var h8=new NR.Logger(OR),d8=null;function Ma(){return d8||(d8=new RR("secp256k1")),d8}var es=class{constructor(t){(0,r0.defineReadOnly)(this,"curve","secp256k1"),(0,r0.defineReadOnly)(this,"privateKey",(0,ur.hexlify)(t)),(0,ur.hexDataLength)(this.privateKey)!==32&&h8.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let r=Ma().keyFromPrivate((0,ur.arrayify)(this.privateKey));(0,r0.defineReadOnly)(this,"publicKey","0x"+r.getPublic(!1,"hex")),(0,r0.defineReadOnly)(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),(0,r0.defineReadOnly)(this,"_isSigningKey",!0)}_addPoint(t){let r=Ma().keyFromPublic((0,ur.arrayify)(this.publicKey)),n=Ma().keyFromPublic((0,ur.arrayify)(t));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(t){let r=Ma().keyFromPrivate((0,ur.arrayify)(this.privateKey)),n=(0,ur.arrayify)(t);n.length!==32&&h8.throwArgumentError("bad digest length","digest",t);let i=r.sign(n,{canonical:!0});return(0,ur.splitSignature)({recoveryParam:i.recoveryParam,r:(0,ur.hexZeroPad)("0x"+i.r.toString(16),32),s:(0,ur.hexZeroPad)("0x"+i.s.toString(16),32)})}computeSharedSecret(t){let r=Ma().keyFromPrivate((0,ur.arrayify)(this.privateKey)),n=Ma().keyFromPublic((0,ur.arrayify)(p8(t)));return(0,ur.hexZeroPad)("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}};function UR(e,t){let r=(0,ur.splitSignature)(t),n={r:(0,ur.arrayify)(r.r),s:(0,ur.arrayify)(r.s)};return"0x"+Ma().recoverPubKey((0,ur.arrayify)(e),n,r.recoveryParam).encode("hex",!1)}function p8(e,t){let r=(0,ur.arrayify)(e);if(r.length===32){let n=new es(r);return t?"0x"+Ma().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return t?(0,ur.hexlify)(r):"0x"+Ma().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return t?"0x"+Ma().keyFromPublic(r).getPublic(!0,"hex"):(0,ur.hexlify)(r)}return h8.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Qi=ee(i8());p();y();var n0=ee(cy()),lf=ee(oh()),st=ee(un()),KR=ee(L6()),Hl=ee(bu()),FR=ee(jo()),Ra=ee(wY());var B1=ee(Ti());p();y();var DR="transactions/5.7.0";var xi=new B1.Logger(DR),LR;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(LR||(LR={}));function m8(e){return e==="0x"?null:(0,n0.getAddress)(e)}function bi(e){return e==="0x"?KR.Zero:lf.BigNumber.from(e)}var wse=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],vse={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Oa(e){let t=p8(e);return(0,n0.getAddress)((0,st.hexDataSlice)((0,Hl.keccak256)((0,st.hexDataSlice)(t,1)),12))}function g8(e,t){return Oa(UR((0,st.arrayify)(e),t))}function Ao(e,t){let r=(0,st.stripZeros)(lf.BigNumber.from(e).toHexString());return r.length>32&&xi.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function y8(e,t){return{address:(0,n0.getAddress)(e),storageKeys:(t||[]).map((r,n)=>((0,st.hexDataLength)(r)!==32&&xi.throwArgumentError("invalid access list storageKey",`accessList[${e}:${n}]`,r),r.toLowerCase()))}}function b8(e){if(Array.isArray(e))return e.map((r,n)=>Array.isArray(r)?(r.length>2&&xi.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),y8(r[0],r[1])):y8(r.address,r.storageKeys));let t=Object.keys(e).map(r=>{let n=e[r].reduce((i,o)=>(i[o]=!0,i),{});return y8(r,Object.keys(n).sort())});return t.sort((r,n)=>r.address.localeCompare(n.address)),t}function VR(e){return b8(e).map(t=>[t.address,t.storageKeys])}function qR(e,t){if(e.gasPrice!=null){let n=lf.BigNumber.from(e.gasPrice),i=lf.BigNumber.from(e.maxFeePerGas||0);n.eq(i)||xi.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}let r=[Ao(e.chainId||0,"chainId"),Ao(e.nonce||0,"nonce"),Ao(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ao(e.maxFeePerGas||0,"maxFeePerGas"),Ao(e.gasLimit||0,"gasLimit"),e.to!=null?(0,n0.getAddress)(e.to):"0x",Ao(e.value||0,"value"),e.data||"0x",VR(e.accessList||[])];if(t){let n=(0,st.splitSignature)(t);r.push(Ao(n.recoveryParam,"recoveryParam")),r.push((0,st.stripZeros)(n.r)),r.push((0,st.stripZeros)(n.s))}return(0,st.hexConcat)(["0x02",Ra.encode(r)])}function HR(e,t){let r=[Ao(e.chainId||0,"chainId"),Ao(e.nonce||0,"nonce"),Ao(e.gasPrice||0,"gasPrice"),Ao(e.gasLimit||0,"gasLimit"),e.to!=null?(0,n0.getAddress)(e.to):"0x",Ao(e.value||0,"value"),e.data||"0x",VR(e.accessList||[])];if(t){let n=(0,st.splitSignature)(t);r.push(Ao(n.recoveryParam,"recoveryParam")),r.push((0,st.stripZeros)(n.r)),r.push((0,st.stripZeros)(n.s))}return(0,st.hexConcat)(["0x01",Ra.encode(r)])}function Ase(e,t){(0,FR.checkProperties)(e,vse);let r=[];wse.forEach(function(s){let a=e[s.name]||[],c={};s.numeric&&(c.hexPad="left"),a=(0,st.arrayify)((0,st.hexlify)(a,c)),s.length&&a.length!==s.length&&a.length>0&&xi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a),s.maxLength&&(a=(0,st.stripZeros)(a),a.length>s.maxLength&&xi.throwArgumentError("invalid length for "+s.name,"transaction:"+s.name,a)),r.push((0,st.hexlify)(a))});let n=0;if(e.chainId!=null?(n=e.chainId,typeof n!="number"&&xi.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!(0,st.isBytesLike)(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),n!==0&&(r.push((0,st.hexlify)(n)),r.push("0x"),r.push("0x")),!t)return Ra.encode(r);let i=(0,st.splitSignature)(t),o=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),o+=n*2+8,i.v>28&&i.v!==o&&xi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&xi.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push((0,st.hexlify)(o)),r.push((0,st.stripZeros)((0,st.arrayify)(i.r))),r.push((0,st.stripZeros)((0,st.arrayify)(i.s))),Ra.encode(r)}function x8(e,t){if(e.type==null||e.type===0)return e.accessList!=null&&xi.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),Ase(e,t);switch(e.type){case 1:return HR(e,t);case 2:return qR(e,t);default:break}return xi.throwError(`unsupported transaction type: ${e.type}`,B1.Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function WR(e,t,r){try{let n=bi(t[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");e.v=n}catch{xi.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,st.hexZeroPad)(t[1],32),e.s=(0,st.hexZeroPad)(t[2],32);try{let n=(0,Hl.keccak256)(r(e));e.from=g8(n,{r:e.r,s:e.s,recoveryParam:e.v})}catch{}}function Sse(e){let t=Ra.decode(e.slice(1));t.length!==9&&t.length!==12&&xi.throwArgumentError("invalid component count for transaction type: 2","payload",(0,st.hexlify)(e));let r=bi(t[2]),n=bi(t[3]),i={type:2,chainId:bi(t[0]).toNumber(),nonce:bi(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:bi(t[4]),to:m8(t[5]),value:bi(t[6]),data:t[7],accessList:b8(t[8])};return t.length===9||(i.hash=(0,Hl.keccak256)(e),WR(i,t.slice(9),qR)),i}function Ese(e){let t=Ra.decode(e.slice(1));t.length!==8&&t.length!==11&&xi.throwArgumentError("invalid component count for transaction type: 1","payload",(0,st.hexlify)(e));let r={type:1,chainId:bi(t[0]).toNumber(),nonce:bi(t[1]).toNumber(),gasPrice:bi(t[2]),gasLimit:bi(t[3]),to:m8(t[4]),value:bi(t[5]),data:t[6],accessList:b8(t[7])};return t.length===8||(r.hash=(0,Hl.keccak256)(e),WR(r,t.slice(8),HR)),r}function Ise(e){let t=Ra.decode(e);t.length!==9&&t.length!==6&&xi.throwArgumentError("invalid raw transaction","rawTransaction",e);let r={nonce:bi(t[0]).toNumber(),gasPrice:bi(t[1]),gasLimit:bi(t[2]),to:m8(t[3]),value:bi(t[4]),data:t[5],chainId:0};if(t.length===6)return r;try{r.v=lf.BigNumber.from(t[6]).toNumber()}catch{return r}if(r.r=(0,st.hexZeroPad)(t[7],32),r.s=(0,st.hexZeroPad)(t[8],32),lf.BigNumber.from(r.r).isZero()&&lf.BigNumber.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27,i=t.slice(0,6);r.chainId!==0&&(i.push((0,st.hexlify)(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);let o=(0,Hl.keccak256)(Ra.encode(i));try{r.from=g8(o,{r:(0,st.hexlify)(r.r),s:(0,st.hexlify)(r.s),recoveryParam:n})}catch{}r.hash=(0,Hl.keccak256)(e)}return r.type=null,r}function JPe(e){let t=(0,st.arrayify)(e);if(t[0]>127)return Ise(t);switch(t[0]){case 1:return Ese(t);case 2:return Sse(t);default:break}return xi.throwError(`unsupported transaction type: ${t[0]}`,B1.Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}p();y();p();y();var jR=ee(e8()),w8=ee(jo()),GR=ee(Ti());p();y();var zR="wordlists/5.7.0";var kse=!1,Tse=new GR.Logger(zR),i0=class e{constructor(t){Tse.checkAbstract(new.target,e),(0,w8.defineReadOnly)(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){let r=[];for(let n=0;n<2048;n++){let i=t.getWord(n);if(n!==t.getWordIndex(i))return"0x";r.push(i)}return(0,jR.id)(r.join(`
`)+`
`)}static register(t,r){if(r||(r=t.locale),kse)try{let n=self;n._ethers&&n._ethers.wordlists&&(n._ethers.wordlists[r]||(0,w8.defineReadOnly)(n._ethers.wordlists,r,t))}catch{}}};p();y();p();y();var Pse="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo",Mm=null;function $R(e){if(Mm==null&&(Mm=Pse.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),i0.check(e)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Mm=null,new Error("BIP39 Wordlist for en (English) FAILED")}var v8=class extends i0{constructor(){super("en")}getWord(t){return $R(this),Mm[t]}getWordIndex(t){return $R(this),Mm.indexOf(t)}},A8=new v8;i0.register(A8);var C1={en:A8};var ZR=ee(Ti());p();y();var YR="hdnode/5.7.0";var R1=new ZR.Logger(YR),_se=S8.BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Bse=(0,Wl.toUtf8Bytes)("Bitcoin seed"),Rm=2147483648;function QR(e){return(1<<e)-1<<8-e}function Cse(e){return(1<<e)-1}function M1(e){return(0,Nt.hexZeroPad)((0,Nt.hexlify)(e),32)}function JR(e){return r8.encode((0,Nt.concat)([e,(0,Nt.hexDataSlice)((0,Qi.sha256)((0,Qi.sha256)(e)),0,4)]))}function E8(e){if(e==null)return C1.en;if(typeof e=="string"){let t=C1[e];return t==null&&R1.throwArgumentError("unknown locale","wordlist",e),t}return e}var o0={},zl="m/44'/60'/0'/0/0",df=class e{constructor(t,r,n,i,o,s,a,c){if(t!==o0)throw new Error("HDNode constructor cannot be called directly");if(r){let u=new es(r);(0,$n.defineReadOnly)(this,"privateKey",u.privateKey),(0,$n.defineReadOnly)(this,"publicKey",u.compressedPublicKey)}else(0,$n.defineReadOnly)(this,"privateKey",null),(0,$n.defineReadOnly)(this,"publicKey",(0,Nt.hexlify)(n));(0,$n.defineReadOnly)(this,"parentFingerprint",i),(0,$n.defineReadOnly)(this,"fingerprint",(0,Nt.hexDataSlice)((0,Qi.ripemd160)((0,Qi.sha256)(this.publicKey)),0,4)),(0,$n.defineReadOnly)(this,"address",Oa(this.publicKey)),(0,$n.defineReadOnly)(this,"chainCode",o),(0,$n.defineReadOnly)(this,"index",s),(0,$n.defineReadOnly)(this,"depth",a),c==null?((0,$n.defineReadOnly)(this,"mnemonic",null),(0,$n.defineReadOnly)(this,"path",null)):typeof c=="string"?((0,$n.defineReadOnly)(this,"mnemonic",null),(0,$n.defineReadOnly)(this,"path",c)):((0,$n.defineReadOnly)(this,"mnemonic",c),(0,$n.defineReadOnly)(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return JR((0,Nt.concat)([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",(0,Nt.hexlify)(this.depth),this.parentFingerprint,(0,Nt.hexZeroPad)((0,Nt.hexlify)(this.index),4),this.chainCode,this.privateKey!=null?(0,Nt.concat)(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new e(o0,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let r=this.path;r&&(r+="/"+(t&~Rm));let n=new Uint8Array(37);if(t&Rm){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set((0,Nt.arrayify)(this.privateKey),1),r&&(r+="'")}else n.set((0,Nt.arrayify)(this.publicKey));for(let l=24;l>=0;l-=8)n[33+(l>>3)]=t>>24-l&255;let i=(0,Nt.arrayify)((0,Qi.computeHmac)(Qi.SupportedAlgorithm.sha512,this.chainCode,n)),o=i.slice(0,32),s=i.slice(32),a=null,c=null;this.privateKey?a=M1(S8.BigNumber.from(o).add(this.privateKey).mod(_se)):c=new es((0,Nt.hexlify)(o))._addPoint(this.publicKey);let u=r,h=this.mnemonic;return h&&(u=Object.freeze({phrase:h.phrase,path:r,locale:h.locale||"en"})),new e(o0,a,c,this.fingerprint,M1(s),t,this.depth+1,u)}derivePath(t){let r=t.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+t);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){let o=r[i];if(o.match(/^[0-9]+'$/)){let s=parseInt(o.substring(0,o.length-1));if(s>=Rm)throw new Error("invalid path index - "+o);n=n._derive(Rm+s)}else if(o.match(/^[0-9]+$/)){let s=parseInt(o);if(s>=Rm)throw new Error("invalid path index - "+o);n=n._derive(s)}else throw new Error("invalid path component - "+o)}return n}static _fromSeed(t,r){let n=(0,Nt.arrayify)(t);if(n.length<16||n.length>64)throw new Error("invalid seed");let i=(0,Nt.arrayify)((0,Qi.computeHmac)(Qi.SupportedAlgorithm.sha512,Bse,n));return new e(o0,M1(i.slice(0,32)),null,"0x00000000",M1(i.slice(32)),0,0,r)}static fromMnemonic(t,r,n){return n=E8(n),t=Om(I8(t,n),n),e._fromSeed(Mse(t,r),{phrase:t,path:"m",locale:n.locale})}static fromSeed(t){return e._fromSeed(t,null)}static fromExtendedKey(t){let r=r8.decode(t);(r.length!==82||JR(r.slice(0,78))!==t)&&R1.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let n=r[4],i=(0,Nt.hexlify)(r.slice(5,9)),o=parseInt((0,Nt.hexlify)(r.slice(9,13)).substring(2),16),s=(0,Nt.hexlify)(r.slice(13,45)),a=r.slice(45,78);switch((0,Nt.hexlify)(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new e(o0,null,(0,Nt.hexlify)(a),i,s,o,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new e(o0,(0,Nt.hexlify)(a.slice(1)),null,i,s,o,n,null)}return R1.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}};function Mse(e,t){t||(t="");let r=(0,Wl.toUtf8Bytes)("mnemonic"+t,Wl.UnicodeNormalizationForm.NFKD);return Vl((0,Wl.toUtf8Bytes)(e,Wl.UnicodeNormalizationForm.NFKD),r,2048,64,"sha512")}function I8(e,t){t=E8(t),R1.checkNormalize();let r=t.split(e);if(r.length%3!==0)throw new Error("invalid mnemonic");let n=(0,Nt.arrayify)(new Uint8Array(Math.ceil(11*r.length/8))),i=0;for(let u=0;u<r.length;u++){let h=t.getWordIndex(r[u].normalize("NFKD"));if(h===-1)throw new Error("invalid mnemonic");for(let l=0;l<11;l++)h&1<<10-l&&(n[i>>3]|=1<<7-i%8),i++}let o=32*r.length/3,s=r.length/3,a=QR(s);if(((0,Nt.arrayify)((0,Qi.sha256)(n.slice(0,o/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return(0,Nt.hexlify)(n.slice(0,o/8))}function Om(e,t){if(t=E8(t),e=(0,Nt.arrayify)(e),e.length%4!==0||e.length<16||e.length>32)throw new Error("invalid entropy");let r=[0],n=11;for(let s=0;s<e.length;s++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[s],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[s]>>8-n,r.push(e[s]&Cse(8-n)),n+=3);let i=e.length/4,o=(0,Nt.arrayify)((0,Qi.sha256)(e))[0]&QR(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,t.join(r.map(s=>t.getWord(s)))}var H8=ee(bu()),ts=ee(jo());p();y();p();y();var tO=ee(un()),T8=ee(Ti());p();y();var XR="random/5.7.0";var k8=new T8.Logger(XR);function Rse(){if(typeof self<"u"||typeof self<"u"||typeof self<"u")return self;throw new Error("unable to locate global object")}var eO=Rse(),O1=eO.crypto||eO.msCrypto;(!O1||!O1.getRandomValues)&&(k8.warn("WARNING: Missing strong random number source"),O1={getRandomValues:function(e){return k8.throwError("no secure random source avaialble",T8.Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function hf(e){(e<=0||e>1024||e%1||e!=e)&&k8.throwArgumentError("invalid length","length",e);let t=new Uint8Array(e);return O1.getRandomValues(t),(0,tO.arrayify)(t)}p();y();p();y();var B8=ee(_8()),iO=ee(cy()),C8=ee(un()),oO=ee(bu());var sO=ee(sf()),aO=ee(jo()),cO=ee(Ti());p();y();var N1="json-wallets/5.7.0";p();y();var s0=ee(un()),U1=ee(sf());function Lc(e){return typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),(0,s0.arrayify)(e)}function a0(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Nm(e){return typeof e=="string"?(0,U1.toUtf8Bytes)(e,U1.UnicodeNormalizationForm.NFKC):(0,s0.arrayify)(e)}function Rr(e,t){let r=e,n=t.toLowerCase().split("/");for(let i=0;i<n.length;i++){let o=null;for(let s in r)if(s.toLowerCase()===n[i]){o=r[s];break}if(o===null)return null;r=o}return r}function nO(e){let t=(0,s0.arrayify)(e);t[6]=t[6]&15|64,t[8]=t[8]&63|128;let r=(0,s0.hexlify)(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}var Ose=new cO.Logger(N1),M8=class extends aO.Description{isCrowdsaleAccount(t){return!!(t&&t._isCrowdsaleAccount)}};function R8(e,t){let r=JSON.parse(e);t=Nm(t);let n=(0,iO.getAddress)(Rr(r,"ethaddr")),i=Lc(Rr(r,"encseed"));(!i||i.length%16!==0)&&Ose.throwArgumentError("invalid encseed","json",e);let o=(0,C8.arrayify)(Vl(t,t,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),c=new B8.default.ModeOfOperation.cbc(o,s),u=B8.default.padding.pkcs7.strip((0,C8.arrayify)(c.decrypt(a))),h="";for(let x=0;x<u.length;x++)h+=String.fromCharCode(u[x]);let l=(0,sO.toUtf8Bytes)(h),g=(0,oO.keccak256)(l);return new M8({_isCrowdsaleAccount:!0,address:n,privateKey:g})}p();y();function O8(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return t.encseed&&t.ethaddr}function N8(e){let t=null;try{t=JSON.parse(e)}catch{return!1}return!(!t.version||parseInt(t.version)!==t.version||parseInt(t.version)!==3)}p();y();var Kc=ee(_8()),L1=ee(fO()),K8=ee(cy()),Or=ee(un());var F8=ee(bu());var dO=ee(jo());var D1=ee(Ti());var Nse=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},D8=new D1.Logger(N1);function lO(e){return e!=null&&e.mnemonic&&e.mnemonic.phrase}var L8=class extends dO.Description{isKeystoreAccount(t){return!!(t&&t._isKeystoreAccount)}};function Use(e,t,r){if(Rr(e,"crypto/cipher")==="aes-128-ctr"){let i=Lc(Rr(e,"crypto/cipherparams/iv")),o=new Kc.default.Counter(i),s=new Kc.default.ModeOfOperation.ctr(t,o);return(0,Or.arrayify)(s.decrypt(r))}return null}function hO(e,t){let r=Lc(Rr(e,"crypto/ciphertext"));if((0,Or.hexlify)((0,F8.keccak256)((0,Or.concat)([t.slice(16,32),r]))).substring(2)!==Rr(e,"crypto/mac").toLowerCase())throw new Error("invalid password");let i=Use(e,t.slice(0,16),r);i||D8.throwError("unsupported cipher",D1.Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let o=t.slice(32,64),s=Oa(i);if(e.address){let c=e.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),(0,K8.getAddress)(c)!==s)throw new Error("address mismatch")}let a={_isKeystoreAccount:!0,address:s,privateKey:(0,Or.hexlify)(i)};if(Rr(e,"x-ethers/version")==="0.1"){let c=Lc(Rr(e,"x-ethers/mnemonicCiphertext")),u=Lc(Rr(e,"x-ethers/mnemonicCounter")),h=new Kc.default.Counter(u),l=new Kc.default.ModeOfOperation.ctr(o,h),g=Rr(e,"x-ethers/path")||zl,x=Rr(e,"x-ethers/locale")||"en",A=(0,Or.arrayify)(l.decrypt(c));try{let E=Om(A,x),C=df.fromMnemonic(E,null,x).derivePath(g);if(C.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=C.mnemonic}catch(E){if(E.code!==D1.Logger.errors.INVALID_ARGUMENT||E.argument!=="wordlist")throw E}}return new L8(a)}function pO(e,t,r,n,i){return(0,Or.arrayify)(Vl(e,t,r,n,i))}function Dse(e,t,r,n,i){return Promise.resolve(pO(e,t,r,n,i))}function yO(e,t,r,n,i){let o=Nm(t),s=Rr(e,"crypto/kdf");if(s&&typeof s=="string"){let a=function(c,u){return D8.throwArgumentError("invalid key-derivation function parameters",c,u)};if(s.toLowerCase()==="scrypt"){let c=Lc(Rr(e,"crypto/kdfparams/salt")),u=parseInt(Rr(e,"crypto/kdfparams/n")),h=parseInt(Rr(e,"crypto/kdfparams/r")),l=parseInt(Rr(e,"crypto/kdfparams/p"));(!u||!h||!l)&&a("kdf",s),u&u-1&&a("N",u);let g=parseInt(Rr(e,"crypto/kdfparams/dklen"));return g!==32&&a("dklen",g),n(o,c,u,h,l,64,i)}else if(s.toLowerCase()==="pbkdf2"){let c=Lc(Rr(e,"crypto/kdfparams/salt")),u=null,h=Rr(e,"crypto/kdfparams/prf");h==="hmac-sha256"?u="sha256":h==="hmac-sha512"?u="sha512":a("prf",h);let l=parseInt(Rr(e,"crypto/kdfparams/c")),g=parseInt(Rr(e,"crypto/kdfparams/dklen"));return g!==32&&a("dklen",g),r(o,c,l,g,u)}}return D8.throwArgumentError("unsupported key-derivation function","kdf",s)}function mO(e,t){let r=JSON.parse(e),n=yO(r,t,pO,L1.default.syncScrypt);return hO(r,n)}function gO(e,t,r){return Nse(this,void 0,void 0,function*(){let n=JSON.parse(e),i=yield yO(n,t,Dse,L1.default.scrypt,r);return hO(n,i)})}function V8(e,t,r,n){try{if((0,K8.getAddress)(e.address)!==Oa(e.privateKey))throw new Error("address/privateKey mismatch");if(lO(e)){let C=e.mnemonic;if(df.fromMnemonic(C.phrase,null,C.locale).derivePath(C.path||zl).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(C){return Promise.reject(C)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});let i=(0,Or.arrayify)(e.privateKey),o=Nm(t),s=null,a=null,c=null;if(lO(e)){let C=e.mnemonic;s=(0,Or.arrayify)(I8(C.phrase,C.locale||"en")),a=C.path||zl,c=C.locale||"en"}let u=r.client;u||(u="ethers.js");let h=null;r.salt?h=(0,Or.arrayify)(r.salt):h=hf(32);let l=null;if(r.iv){if(l=(0,Or.arrayify)(r.iv),l.length!==16)throw new Error("invalid iv")}else l=hf(16);let g=null;if(r.uuid){if(g=(0,Or.arrayify)(r.uuid),g.length!==16)throw new Error("invalid uuid")}else g=hf(16);let x=1<<17,A=8,E=1;return r.scrypt&&(r.scrypt.N&&(x=r.scrypt.N),r.scrypt.r&&(A=r.scrypt.r),r.scrypt.p&&(E=r.scrypt.p)),L1.default.scrypt(o,h,x,A,E,64,n).then(C=>{C=(0,Or.arrayify)(C);let M=C.slice(0,16),N=C.slice(16,32),R=C.slice(32,64),V=new Kc.default.Counter(l),q=new Kc.default.ModeOfOperation.ctr(M,V),W=(0,Or.arrayify)(q.encrypt(i)),G=(0,F8.keccak256)((0,Or.concat)([N,W])),z={address:e.address.substring(2).toLowerCase(),id:nO(g),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,Or.hexlify)(l).substring(2)},ciphertext:(0,Or.hexlify)(W).substring(2),kdf:"scrypt",kdfparams:{salt:(0,Or.hexlify)(h).substring(2),n:x,dklen:32,p:E,r:A},mac:G.substring(2)}};if(s){let te=hf(16),_=new Kc.default.Counter(te),f=new Kc.default.ModeOfOperation.ctr(R,_),m=(0,Or.arrayify)(f.encrypt(s)),b=new Date,w=b.getUTCFullYear()+"-"+a0(b.getUTCMonth()+1,2)+"-"+a0(b.getUTCDate(),2)+"T"+a0(b.getUTCHours(),2)+"-"+a0(b.getUTCMinutes(),2)+"-"+a0(b.getUTCSeconds(),2)+".0Z";z["x-ethers"]={client:u,gethFilename:"UTC--"+w+"--"+z.address,mnemonicCounter:(0,Or.hexlify)(te).substring(2),mnemonicCiphertext:(0,Or.hexlify)(m).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(z)})}function bO(e,t,r){if(O8(e)){r&&r(0);let n=R8(e,t);return r&&r(1),Promise.resolve(n)}return N8(e)?gO(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function xO(e,t){if(O8(e))return R8(e,t);if(N8(e))return mO(e,t);throw new Error("invalid JSON wallet")}var W8=ee(Ti());p();y();var wO="wallet/5.7.0";var vO=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},c0=new W8.Logger(wO);function Lse(e){return e!=null&&(0,js.isHexString)(e.privateKey,32)&&e.address!=null}function Kse(e){let t=e.mnemonic;return t&&t.phrase}var u0=class e extends km{constructor(t,r){if(super(),Lse(t)){let n=new es(t.privateKey);if((0,ts.defineReadOnly)(this,"_signingKey",()=>n),(0,ts.defineReadOnly)(this,"address",Oa(this.publicKey)),this.address!==(0,q8.getAddress)(t.address)&&c0.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),Kse(t)){let i=t.mnemonic;(0,ts.defineReadOnly)(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||zl,locale:i.locale||"en"}));let o=this.mnemonic,s=df.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path);Oa(s.privateKey)!==this.address&&c0.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else(0,ts.defineReadOnly)(this,"_mnemonic",()=>null)}else{if(es.isSigningKey(t))t.curve!=="secp256k1"&&c0.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),(0,ts.defineReadOnly)(this,"_signingKey",()=>t);else{typeof t=="string"&&t.match(/^[0-9a-f]*$/i)&&t.length===64&&(t="0x"+t);let n=new es(t);(0,ts.defineReadOnly)(this,"_signingKey",()=>n)}(0,ts.defineReadOnly)(this,"_mnemonic",()=>null),(0,ts.defineReadOnly)(this,"address",Oa(this.publicKey))}r&&!a1.isProvider(r)&&c0.throwArgumentError("invalid provider","provider",r),(0,ts.defineReadOnly)(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new e(this,t)}signTransaction(t){return(0,ts.resolveProperties)(t).then(r=>{r.from!=null&&((0,q8.getAddress)(r.from)!==this.address&&c0.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete r.from);let n=this._signingKey().signDigest((0,H8.keccak256)(x8(r)));return x8(r,n)})}signMessage(t){return vO(this,void 0,void 0,function*(){return(0,js.joinSignature)(this._signingKey().signDigest((0,Um.hashMessage)(t)))})}_signTypedData(t,r,n){return vO(this,void 0,void 0,function*(){let i=yield Um._TypedDataEncoder.resolveNames(t,r,n,o=>(this.provider==null&&c0.throwError("cannot resolve ENS names without a provider",W8.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:o}),this.provider.resolveName(o)));return(0,js.joinSignature)(this._signingKey().signDigest(Um._TypedDataEncoder.hash(i.domain,r,i.value)))})}encrypt(t,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),V8(this,t,r,n)}static createRandom(t){let r=hf(16);t||(t={}),t.extraEntropy&&(r=(0,js.arrayify)((0,js.hexDataSlice)((0,H8.keccak256)((0,js.concat)([r,t.extraEntropy])),0,16)));let n=Om(r,t.locale);return e.fromMnemonic(n,t.path,t.locale)}static fromEncryptedJson(t,r,n){return bO(t,r,n).then(i=>new e(i))}static fromEncryptedJsonSync(t,r){return new e(xO(t,r))}static fromMnemonic(t,r,n){return r||(r=zl),new e(df.fromMnemonic(t,null,n).derivePath(r))}};var K1=class{constructor(){this.addressTypes=["eip155"]}generateKeypairFromPrivateKey(t){let r=t.fold(n=>new u0(new Uint8Array(n)));return{publicKey:new Uint8Array(Buffer.from(r.publicKey.slice(2),"hex")),privateKey:new Uint8Array(Buffer.from(r.privateKey.slice(2),"hex"))}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new qs(o));try{let o=i.derivePathType(n,r);return{publicKey:o.publicKey,privateKey:o.secretKey}}finally{i.cleanup()}}};p();y();p();y();Nc.sha512Sync=(...e)=>xo(Nc.concatBytes(...e));var{getPublicKey:Fse}=Dw,z8=e=>{let t=Fse(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}};var F1=class{constructor(){this.addressTypes=["solana"]}generateKeypairFromPrivateKey(t){let r=t.fold(n=>new bo.Account(new Uint8Array(n)));return{publicKey:r.publicKey.toBytes(),privateKey:r.secretKey}}generateKeypairFromSeed(t,r,n){let i=t.fold(o=>new qs(o));try{let o=i.derivePathType(n,r);switch(n){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Root":case"bip44":case"bip44Change":case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return{publicKey:o.publicKey,privateKey:o.secretKey};case"deprecated":{let s=z8(o.secretKey);return{publicKey:s.publicKey,privateKey:s.secretKey}}}}finally{i.cleanup()}}};var Dm=class{constructor(){this.cryptoChainPlugins=new Map;this.registerChainPlugin(new n1),this.registerChainPlugin(new K1),this.registerChainPlugin(new F1)}registerChainPlugin(t){for(let r of t.addressTypes)this.cryptoChainPlugins.set(r,t)}generateKeypairFromPrivateKey(t,r){let n=this.cryptoChainPlugins.get(r);if(!n)throw new Error(`No plugin found for address type ${r}, please register the plugin first.`);return n.generateKeypairFromPrivateKey(t)}generateKeypairFromSeed(t,r,n){let i=mi.getAddressType(n),o=this.cryptoChainPlugins.get(i);if(!o)throw new Error(`No plugin found for address type ${i}, please register the plugin first.`);return o.generateKeypairFromSeed(t,r,n)}};p();y();function j8(e){return mi.getAll().includes(e)}p();y();var DO=ee(Ns()),LO=ee(f0()),H1=ee(ch()),KO=ee(V1());var Z8=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":try{return{key:Zse(t,e.networkIDValue),encoding:"hex"}}catch{throw new Error("Could not find encoding for Bitcoin private key")}case"eip155":try{return{key:Qse(t),encoding:"hex"}}catch{throw new Error("Could not find encoding for EVM private key")}case"solana":try{return Xse(t)}catch{throw new Error("Could not find encoding for Solana private key")}default:return xe(r)}},Zse=(e,t)=>{try{let{privateKey:r}=KO.decodeRaw(LO.default.decode(e),t);return r}catch{throw new Error("Provided Bitcoin private key is invalid!")}},Qse=e=>{let t=Buffer.from(e.replace("0x",""),"hex");try{return new u0(new Uint8Array(t)),t}catch{throw new Error("Provided Ethereum private key is invalid!")}},q1=e=>{let t=H1.default.sign.keyPair.fromSecretKey(e),r=Buffer.from("phantom-secret-key-validation"),n=H1.default.sign.detached(r,e);if(!H1.default.sign.detached.verify(r,n,t.publicKey))throw new Error("Provided Solana private key is invalid!")},Xse=e=>{try{let t=JSON.parse(e);return q1(Uint8Array.from(t)),{key:t,encoding:"uint8array"}}catch{}try{let t=DO.default.decode(e);return q1(t),{key:t,encoding:"base58"}}catch{}try{let t=Buffer.from(e,"hex");return q1(t),{key:t,encoding:"hex"}}catch{}try{let t=Buffer.from(e,"base64");return q1(t),{key:t,encoding:"base64"}}catch{}throw new Error("Provided Solana private key is invalid!")};p();y();var FO=ee(Ns()),VO=ee(f0()),qO=ee(V1());var eae=e=>{let{privateKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return VO.default.encode(qO.encodeRaw(e.networkIDValue,Buffer.from(t),!0));case"eip155":return"0x"+Buffer.from(t).toString("hex");case"solana":return FO.default.encode(t);default:return xe(r)}};p();y();var Lm=e=>{try{return lo.from(Z8(e).key)}catch(t){return console.error(t),lo.from(Buffer.from(""))}};p();y();var She=ee(Q1());p();y();var[uN,fN,lN]=[[],[],[]],$ae=BigInt(0),Hm=BigInt(1),Yae=BigInt(2),Jae=BigInt(7),Zae=BigInt(256),Qae=BigInt(113);for(let e=0,t=Hm,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],uN.push(2*(5*n+r)),fN.push((e+1)*(e+2)/2%64);let i=$ae;for(let o=0;o<7;o++)t=(t<<Hm^(t>>Jae)*Qae)%Zae,t&Yae&&(i^=Hm<<(Hm<<BigInt(o))-Hm);lN.push(i)}var[Xae,ece]=Me.split(lN,!0),aN=(e,t,r)=>r>32?Me.rotlBH(e,t,r):Me.rotlSH(e,t,r),cN=(e,t,r)=>r>32?Me.rotlBL(e,t,r):Me.rotlSL(e,t,r);function tce(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,c=(s+2)%10,u=r[c],h=r[c+1],l=aN(u,h,1)^r[a],g=cN(u,h,1)^r[a+1];for(let x=0;x<50;x+=10)e[s+x]^=l,e[s+x+1]^=g}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=fN[s],c=aN(i,o,a),u=cN(i,o,a),h=uN[s];i=e[h],o=e[h+1],e[h]=c,e[h+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=Xae[n],e[1]^=ece[n]}r.fill(0)}var X1=class e extends uB{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,yl.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=aB(this.state)}keccak(){tce(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){yl.exists(this);let{blockLen:r,state:n}=this;t=cB(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,r&128&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){yl.exists(this,!1),yl.bytes(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return yl.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(yl.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}},bf=(e,t,r)=>ml(()=>new X1(t,e,r)),x7e=bf(6,144,224/8),w7e=bf(6,136,256/8),v7e=bf(6,104,384/8),A7e=bf(6,72,512/8),S7e=bf(1,144,224/8),dI=bf(1,136,256/8),E7e=bf(1,104,384/8),I7e=bf(1,72,512/8),dN=(e,t,r)=>fB((n={})=>new X1(t,e,n.dkLen===void 0?r:n.dkLen,!0)),k7e=dN(31,168,128/8),T7e=dN(31,136,256/8);var Ys=ee(fg()),BL=ee(Ns());function ro(e){let{publicKey:t,addressType:r}=e;switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return Ehe(t,r,e.networkID);case"eip155":return Ihe(t);case"solana":return BL.default.encode(t);default:return xe(r)}}var Ehe=(e,t,r)=>{let n=r==="bip122:000000000933ea01ad0ee984209779ba"?Ys.networks.testnet:Ys.networks.bitcoin,i;switch(t){case"bip122_p2tr":Ys.initEccLib(She),i=Ys.payments.p2tr({internalPubkey:Buffer.from(e.slice(1,33)),network:n},{validate:!1})?.address;break;case"bip122_p2wpkh":i=Ys.payments.p2wpkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break;case"bip122_p2sh":{let o=Buffer.from(e),s=Ys.payments.p2wpkh({pubkey:o,network:n},{validate:!1});i=Ys.payments.p2sh({pubkey:o,network:n,redeem:s},{validate:!1})?.address;break}case"bip122_p2pkh":{i=Ys.payments.p2pkh({pubkey:Buffer.from(e),network:n},{validate:!1})?.address;break}default:xe(t)}if(!i)throw new Error("Could not derive Bitcoin address from public key");return i},Ihe=e=>{let t=e.slice(1),n=dI(t).slice(12);return khe(`0x${Buffer.from(n).toString("hex")}`)},khe=e=>{if(!ah.safeParse(e).success)throw new Error("toChecksumAddress: Input address is not a valid hex string.");let t=e.toLowerCase().replace("0x",""),r=Buffer.from(dI(Buffer.from(t,"utf-8"))).toString("hex"),n="0x";for(let i=0;i<t.length;i++)parseInt(r[i],16)>=8?n+=t[i].toUpperCase():n+=t[i];return n};p();y();function dd(e){return rf.safeParse(e).success}p();y();function P4(e){switch(e){case"bip44Root":case"bip44Change":case"bip44":case"deprecated":return"solana";case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return"eip155";case"bitcoinLegacy":return"bip122_p2pkh";case"bitcoinNativeSegwit":return"bip122_p2wpkh";case"bitcoinNestedSegwit":return"bip122_p2sh";case"bitcoinTaproot":return"bip122_p2tr"}}p();y();p();y();p();y();var ei=(s=>(s.Solana="solana",s.Monad="monad",s.Ethereum="ethereum",s.Base="base",s.Polygon="polygon",s.Bitcoin="bitcoin",s))(ei||{}),as=(s=>(s.Ethereum="60",s.Monad="143",s.Polygon="966",s.Base="8453",s.Solana="501",s.Bitcoin="0",s))(as||{});var r2=(r=>(r.Mainnet="eip155:8453",r.Sepolia="eip155:84532",r))(r2||{}),CL=O.union([O.literal("eip155:8453"),O.literal("eip155:84532")]),_4={id:"base",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/base.png",name:"Base",networks:{"eip155:8453":{id:"eip155:8453",name:"Base",rpcProxyUrl:"https://base-mainnet.phantom.app",value:8453},"eip155:84532":{id:"eip155:84532",name:"Base Sepolia",rpcProxyUrl:"https://base-sepolia.phantom.app",value:84532}},mainnetID:"eip155:8453",tokenDecimals:18,tokenSymbol:"ETH",slip44:"8453"};p();y();var The=ee(Q1());var n2=ee(fg());var sn=(r=>(r.Mainnet="bip122:000000000019d6689c085ae165831e93",r.Testnet="bip122:000000000933ea01ad0ee984209779ba",r))(sn||{}),Mf=O.union([O.literal("bip122:000000000019d6689c085ae165831e93"),O.literal("bip122:000000000933ea01ad0ee984209779ba")]),Rf=O.string().refine(e=>{try{return n2.initEccLib(The),n2.address.toOutputScript(e),!0}catch{return!1}},{message:"Invalid Bitcoin address."}),lg=O.object({networkID:Mf,addressType:O.nativeEnum(Ie),address:Rf,publicKey:O.instanceof(Uint8Array).optional()}),B4={id:"bitcoin",addressTypes:["bip122_p2tr","bip122_p2wpkh"],iconUrl:"https://static.phantom.app/assets/bitcoin.png",name:"Bitcoin",networks:{"bip122:000000000019d6689c085ae165831e93":{id:"bip122:000000000019d6689c085ae165831e93",name:"Bitcoin",value:128},"bip122:000000000933ea01ad0ee984209779ba":{id:"bip122:000000000933ea01ad0ee984209779ba",name:"Bitcoin Testnet",shortName:"Testnet",value:239}},mainnetID:"bip122:000000000019d6689c085ae165831e93",tokenDecimals:8,tokenSymbol:"BTC",slip44:"0"};p();y();p();y();var dg=(n=>(n.Mainnet="eip155:143",n.Testnet="eip155:10143",n.Devnet="eip155:41454",n))(dg||{}),C4=O.union([O.literal("eip155:143"),O.literal("eip155:10143"),O.literal("eip155:41454")]),M4={id:"monad",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/monad.png",name:"Monad",networks:{"eip155:143":{id:"eip155:143",name:"Monad",rpcProxyUrl:"https://monad-mainnet.phantom.app",value:143},"eip155:10143":{id:"eip155:10143",name:"Monad Testnet",shortName:"Testnet",rpcProxyUrl:"https://monad-testnet.phantom.app",value:10143},"eip155:41454":{id:"eip155:41454",name:"Monad Devnet",shortName:"Devnet",rpcProxyUrl:"https://devnet1.monad.xyz/rpc/YbJtaztqsm4SugWbf5h9byUSMh09sOWnpOo7vJneGE6k",value:41454}},mainnetID:"eip155:41454",tokenDecimals:18,tokenSymbol:"MON",slip44:"143"};p();y();var i2=(r=>(r.Mainnet="eip155:137",r.Amoy="eip155:80002",r))(i2||{}),R4=O.union([O.literal("eip155:137"),O.literal("eip155:80002")]),O4={id:"polygon",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/polygon.png",name:"Polygon",networks:{"eip155:137":{id:"eip155:137",name:"Polygon",rpcProxyUrl:"https://polygon-mainnet.phantom.app",value:137},"eip155:80002":{id:"eip155:80002",name:"Polygon Amoy",shortName:"Amoy",rpcProxyUrl:"https://polygon-amoy.phantom.app",value:80002}},mainnetID:"eip155:137",tokenDecimals:18,tokenSymbol:"POL",slip44:"966"};var o2=(r=>(r.Mainnet="eip155:1",r.Sepolia="eip155:11155111",r))(o2||{}),ML=O.union([O.literal("eip155:1"),O.literal("eip155:11155111")]),Of=O.union([ML,R4,CL,C4]),s2=O.object({networkID:Of,addressType:O.nativeEnum(Ie),address:ma}),N4={id:"ethereum",addressTypes:["eip155"],iconUrl:"https://static.phantom.app/assets/ethereum.png",name:"Ethereum",networks:{"eip155:1":{id:"eip155:1",name:"Ethereum",rpcProxyUrl:"https://eth-mainnet.phantom.app",value:1},"eip155:11155111":{id:"eip155:11155111",name:"Ethereum Sepolia",shortName:"Sepolia",rpcProxyUrl:"https://eth-sepolia.phantom.app",value:11155111}},mainnetID:"eip155:1",tokenDecimals:18,tokenSymbol:"ETH",slip44:"60"};p();y();var a2=(i=>(i.Mainnet="solana:101",i.Testnet="solana:102",i.Devnet="solana:103",i.Localnet="solana:localnet",i))(a2||{}),Nf=O.union([O.literal("solana:101"),O.literal("solana:102"),O.literal("solana:103"),O.literal("solana:localnet")]),hg=O.object({networkID:Nf,addressType:O.nativeEnum(Ie),address:xu}),U4={id:"solana",addressTypes:["solana"],iconUrl:"https://static.phantom.app/assets/solana.png",name:"Solana",networks:{"solana:101":{id:"solana:101",name:"Solana",rpcProxyUrl:"https://solana-mainnet.phantom.app/YBPpkkN4g91xDiAnTE9r0RcMkjg0sKUIWvAfoFVJ?advancedTxSubmission=true",value:"mainnet"},"solana:102":{id:"solana:102",name:"Solana Testnet",shortName:"Testnet",value:"testnet"},"solana:103":{id:"solana:103",name:"Solana Devnet",shortName:"Devnet",value:"devnet"},"solana:localnet":{id:"solana:localnet",name:"Solana Localnet",shortName:"Localnet",value:"localnet"}},localnetID:"solana:localnet",mainnetID:"solana:101",tokenDecimals:9,tokenSymbol:"SOL",slip44:"501"};p();y();function c2(e){return Object.values(ei).includes(e)}var no={bitcoin:B4,ethereum:N4,polygon:O4,monad:M4,solana:U4,base:_4},u2={solana:1,ethereum:2,monad:3,base:4,polygon:5,bitcoin:6},RL={solana:!0,ethereum:!0,monad:!1,base:!1,polygon:!0,bitcoin:!0},D4=(e,t)=>{let r=u2[e]-u2[t];return r===0?0:r>0?1:-1},Phe=()=>{let e=Object.values(ei).sort(D4),t=e.map(j=>no[j]),r={},n=[],i={},o={},s={};t.forEach(j=>{let X=Object.keys(j.networks);n.push(...X),X.forEach(ue=>{r[ue]=j});let fe=Object.values(j.networks);i[j.id]=fe.map(ue=>ue.id),fe.forEach(ue=>{o[ue.id]=ue});for(let ue of j.addressTypes){let K=s[ue];K?K.push(j.id):s[ue]=[j.id]}});let a=new Set(n);function c(j){return j?.evmOnly?e.filter(X=>no[X].addressTypes.includes("eip155")):e}function u(j,X){return j==="base"?X||RL[j]:X_()&&j==="monad"?!0:RL[j]}function h(j){return i[j]}function l(j){if(j){let X=t;return j.evmOnly&&(X=X.filter(fe=>fe.addressTypes.includes("eip155"))),j.mainnetOnly?X.map(fe=>fe.mainnetID):X.flatMap(fe=>Object.keys(fe.networks))}else return n}function g(j){return r[j]}function x(j){return o[j].rpcProxyUrl}function A(j){return r[j].addressTypes[0]}function E(j){let X=r[j];if(X.addressTypes.length===1){let[fe]=X.addressTypes;return fe}else throw`The chain ${X.id} has multiple address types`}function C(j){return r[j].addressTypes}function M(j){return r[j].id}function N(j){return no[Y(j)].name}function R(j){return r[j].tokenDecimals}function V(j){return(te(j)?r[j]:no[j]).tokenSymbol}function q(j){return(te(j)?r[j]:no[j]).iconUrl}function W(j){return r[j].slip44}function G(j){return no[Y(j)].mainnetID}function z(j){let X;if(v(j)&&(X=o[j].value),typeof X=="number")return X;throw new Error(`Invalid NetworkID: ${j}. Must be an EVM NetworkID.`)}function te(j){return a.has(j)}function _(j){return Object.keys(no.bitcoin.networks).includes(j)}function f(j){return Object.keys(no.ethereum.networks).includes(j)}function m(j){return Object.keys(no.polygon.networks).includes(j)}function b(j){return Object.keys(no.base.networks).includes(j)}function w(j){return Object.keys(no.monad.networks).includes(j)}function v(j){return f(j)||m(j)||b(j)||w(j)}function P(j){return Object.keys(no.solana.networks).includes(j)}function B(j){if(!P(j))throw new Error(`Invalid NetworkID: ${j}. Must be a Solana NetworkID.`);return no.solana.networks[j].value}function k(j){return r[j].localnetID===j}function d(j){return r[j].mainnetID===j}function S(j){return o[j]}function F(j,X=!1){let fe=o[j];return X&&fe.shortName?fe.shortName:fe.name}function U(j){return s[j]}function D(j,X){let fe=r[j].id,ue=r[X].id;return D4(fe,ue)}function Y(j){return c2(j)?j:te(j)?se.getChainID(j):xe(j)}return{...no,getAllChainIDs:c,getDefaultChainEnablement:u,getNetworkIDs:h,getAllNetworkIDs:l,getChainDefinition:g,getAddressType:E,getAddressTypes:C,getChainID:M,getChainName:N,getTokenDecimals:R,getTokenSymbol:V,getChainIconUrl:q,getSlip44:W,getMainnetNetworkID:G,getEVMNetworkIDValue:z,getSolanaNetworkIDValue:B,_DO_NOT_USE_getAddressType:A,isNetworkID:te,isBitcoinNetworkID:_,isEVMNetworkID:v,isSolanaNetworkID:P,isEthereumNetworkID:f,isPolygonNetworkID:m,isBaseNetworkID:b,isLocalNetworkID:k,isMainnetNetworkID:d,getNetworkDefinition:S,getNetworkName:F,getChainIDs:U,compareChain:D4,compareNetworkID:D,getRpcProxyUrl:x}},se=Phe();p();y();var Ft={Bitcoin:sn,Ethereum:o2,Polygon:i2,Solana:a2,Base:r2,Monad:dg},Zc=O.union([Mf,Of,Nf]),_he=O.union([lg,s2,hg]);p();y();p();y();var Ha=(n=>(n.address="address",n.tx="tx",n.nativeToken="nativeToken",n))(Ha||{}),OL=O.string(),NL=O.object({chainId:Zc,resourceType:O.nativeEnum(Ha)}),L4=NL.extend({resourceType:O.literal("nativeToken"),slip44:O.nativeEnum(as)}),M0=NL.extend({resourceType:O.literal("address"),address:O.string()}),K4=M0.extend({chainId:Nf,address:xu}),F4=M0.extend({chainId:Of,address:ma,tokenId:O.string().optional()}),V4=M0.extend({chainId:Mf,address:Rf.or(O.string())}),UL=O.union([L4,M0,K4,F4,V4]);var DL=e=>{if(e.resourceType==="nativeToken")return`${e.chainId}/nativeToken:${e.slip44}`;if(se.isEVMNetworkID(e.chainId))return e.address=e.address.toLowerCase(),"tokenId"in e&&typeof e.tokenId=="string"&&e.tokenId?`${e.chainId}/address:${e.address}/${e.tokenId}`:`${e.chainId}/address:${e.address}`;if(se.isSolanaNetworkID(e.chainId))return`${e.chainId}/address:${e.address}`;if(se.isBitcoinNetworkID(e.chainId)){let t=e;return`${t.chainId}/address:${t.address}`}return xe(e.chainId)};p();y();p();y();var LL=O.string().refine(e=>{let t=e.split("/");if(t.length<2)return!1;let r=t[0],i=t[1].split(":");if(i.length<2)return!1;let o=i[0],s=i[1];return typeof e=="string"&&se.isNetworkID(r)&&o.match(/^[-a-z0-9]{2,8}/)&&s.match(/^[-a-zA-Z0-9]{1,64}/)},{message:"Value is not a valid BRI string."});p();y();var KL=e=>{let t=e.split("/");if(t.length>3||t.length<2)throw new Error(`Cannot decode malformed caip19 string '${e}'`);let r=t[0];if(!(se.isEVMNetworkID(r)||se.isSolanaNetworkID(r)||se.isBitcoinNetworkID(r)))throw new Error(`Cannot decode unsupported chain '${r}'`);let n=t[1].split(":");if(n.length!==2)throw new Error(`Invalid resource specification '${t[1]}'`);let[i,o]=n;if(!Object.values(Ha).includes(i))throw new Error(`Unsupported resource type '${i}'`);if(i==="nativeToken"){if(!Object.values(as).includes(o))throw new Error(`Unsupported slip44 '${o}'`);return{chainId:r,resourceType:i,slip44:o}}else if(se.isEVMNetworkID(r)){if(i==="address")return t.length===3?{chainId:r,address:o,resourceType:i,tokenId:t[2]}:{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(se.isSolanaNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}else if(se.isBitcoinNetworkID(r)){if(i==="address")return{chainId:r,address:o,resourceType:i};throw new Error(`Unsupported resource type ${i} for chain ${r}`)}throw new Error(`Cannot decode malformed caip19 string '${e}'`)};p();y();function FL(e){return!e||e.resourceType!=="address"?!1:!!se.isEVMNetworkID(e.chainId)}p();y();function f2(e,t){return se.isBitcoinNetworkID(t)?Rf.safeParse(e).success:se.isEVMNetworkID(t)?ma.safeParse(e).success:se.isSolanaNetworkID(t)?xu.safeParse(e).success:xe(t)}p();y();var VL=e=>{let t=se.getNetworkIDs(e),r=se.getMainnetNetworkID(t[0]),n=se[e].slip44;return{chainId:r,resourceType:"nativeToken",slip44:n}};p();y();p();y();p();y();function qL(e){return lg.safeParse(e).success}function HL(e){return hg.safeParse(e).success}var WL=O.object({networkID:Zc,addressType:O.nativeEnum(Ie),address:O.string()}),Bhe=e=>`${e.networkID}-${e.address}`,zL={toKey:Bhe},jL=e=>{let t={chainId:e.networkID,address:e.address,resourceType:"address"};return se.isEVMNetworkID(e.networkID)&&(t.address=t.address.toLowerCase()),t};p();y();function GL(e){return[Ft.Solana.Devnet,Ft.Solana.Testnet,Ft.Solana.Mainnet].map(r=>parseInt(r.replace("solana:",""))).includes(parseInt(e,16))?`solana:${parseInt(e,16)}`:`eip155:${parseInt(e,16)}`}p();y();var $L=O.object({id:Zc,name:O.string(),symbol:O.string(),imageUrl:O.string()});function YL(e){let{name:t,tokenSymbol:r,iconUrl:n}=se.getChainDefinition(e);return{id:e,name:t,symbol:r,imageUrl:n}}p();y();function JL(e){switch(e){case"devnet":return Ft.Solana.Devnet;case"mainnet":return Ft.Solana.Mainnet;case"testnet":return Ft.Solana.Testnet;case"localnet":return Ft.Solana.Localnet}}function ZL(e){switch(e){case"mainnet":return"mainnet-beta";case"localnet":return"localhost";default:return e}}p();y();var Js=(e,t)=>{if(se.isBitcoinNetworkID(e)){switch(!0){case(t.startsWith("bc1p")||t.startsWith("bcrt1p")||t.startsWith("tb1p")):return"bip122_p2tr";case(t.startsWith("bc1q")||t.startsWith("tb1q")):return"bip122_p2wpkh";case(t.startsWith("3")||t.startsWith("2")):return"bip122_p2sh";case(t.startsWith("1")||t.startsWith("m")):return"bip122_p2pkh"}throw new Error(`Unable to get address type from invalid Bitcoin address: ${t}`)}else return se.isEVMNetworkID(e)?"eip155":se.isSolanaNetworkID(e)?"solana":xe(e)};p();y();var Che=se.getAllNetworkIDs().filter(e=>se.isEVMNetworkID(e)),QL=e=>Che.find(t=>se.getNetworkDefinition(t).value===e);p();y();var XL=(e,t,r)=>se.getAllNetworkIDs({evmOnly:!0}).filter(n=>{let i=se.getChainID(n);if(i==="base"&&!e||i==="monad"&&!t)return!1;if(r){if(r==="mainnets_only")return se.isMainnetNetworkID(n);if(r==="testnets_only")return!se.isMainnetNetworkID(n)}else return!0}).map(Mhe),Mhe=e=>`0x${se.getNetworkDefinition(e).value.toString(16)}`;p();y();var Dhe={[Ft.Monad.Mainnet]:1,[Ft.Monad.Devnet]:1,[Ft.Monad.Testnet]:1,[Ft.Ethereum.Mainnet]:6,[Ft.Ethereum.Sepolia]:6,[Ft.Polygon.Mainnet]:128,[Ft.Polygon.Amoy]:128,[Ft.Base.Mainnet]:3,[Ft.Base.Sepolia]:3},Lhe={[Ft.Bitcoin.Mainnet]:1,[Ft.Bitcoin.Testnet]:1};var Khe="TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb";p();y();p();y();function Fhe(e,t){return t.getSupportedChains().includes(e)}function eK(e,t){if(c2(e))return t.get(e);if(se.isNetworkID(e)){let r=se.getChainID(e);if(Fhe(r,t))return t.get(r)}throw new Error("Invalid input type for chain config get method")}function q4(e){return{get:t=>eK(t,e),supportedChains:e.getSupportedChains()}}p();y();var pg=class{constructor(t){this.chainConfigMap=new Map;Object.entries(t).forEach(([r,n])=>{this.register(r,n)})}register(t,r){this.chainConfigMap.set(t,r)}getSupportedChains(){return Array.from(this.chainConfigMap.keys())}get(t){let r=this.chainConfigMap.get(t);if(!r)throw new Error(`No chain config found for chain: ${t}`);return r}};p();y();var tK=".phantom-labs.internal.enabledChainsOverrideSettings",rK=async e=>{try{return(await e.get(tK))?.settings}catch{return null}},nK=async(e,t,r)=>{let n=await rK(r);return r.set(tK,{version:1,settings:{...n!=null&&n,[e]:t}})},iK=async e=>{let t=[],r;try{r=await rK(e),r&&Object.entries(r).forEach(([i,o])=>{o||t.push(i)})}catch{}try{let i=await e.get(Vhe);!i||i.version===1||i.chains.forEach(o=>{r&&r[o]||t.push(o)})}catch{}let n=fo.isFeatureEnabled("enable-base-default-on");try{se.getAllChainIDs().forEach(i=>{r&&r[i]||se.getDefaultChainEnablement(i,n)||t.push(i)})}catch{}return[...new Set(t)]},oK=async(e,t)=>nK(e,!1,t),H4=async(e,t)=>nK(e,!0,t),R0=".phantom-labs.internal.disabledAddressTypes",sK=async e=>{let t;try{t=await e.get(R0)!==null}catch{t=!1}return t},aK=async e=>{let t;try{t=(await e.get(R0))?.addressTypes??[]}catch{t=[]}return[...new Set([...t,"bip122_p2sh","bip122_p2pkh"])]},cK=async(e,t)=>{let r=await t.get(R0),n=new Set(r?.addressTypes??[]);return n.delete(e),t.set(R0,{version:1,addressTypes:Array.from(n)})},uK=async(e,t)=>{let r=await t.get(R0),n=new Set(r?.addressTypes??[]);return n.add(e),t.set(R0,{version:1,addressTypes:Array.from(n)})},Vhe=".phantom-labs.internal.disabledChains";p();y();var hd=async e=>{let t=fo.isFeatureEnabled("enable-base"),r=fo.isFeatureEnabled("enable-monad"),n=se.getAllChainIDs().filter(M=>(M!=="base"||t)&&(M!=="monad"||r)),i=await iK(e),o=new Set(i),s=n.filter(M=>!o.has(M)),a=M=>{let N=se.getChainID(M);return s.includes(N)},c=se.getAllNetworkIDs({mainnetOnly:!1}).filter(a),u=se.getAllNetworkIDs({mainnetOnly:!0}).filter(a),h=new Set(i.flatMap(M=>se.getNetworkIDs(M))),l=c.filter(M=>!h.has(M)),g=u.filter(M=>!h.has(M)),x=mi.getAll(),A=await aK(e),E=new Set(A);for(let M of x){let N=se.getChainIDs(M);if(!N){E.add(M);continue}N.every(V=>o.has(V))&&E.add(M)}let C=x.filter(M=>!E.has(M));return{supportedChainIDs:n,supportedAddressTypes:x,disabledChainIDs:i,enabledChainIDs:s,enabledAddressTypes:C,enabledNetworkIDs:l,enabledMainnetOnlyNetworkIDs:g}};p();y();p();y();var l2="@phantom/chains",d2={enabledChains:[`${l2}:enabled-chains`],enabledAddressTypes:[`${l2}:enabled-address-types`],enabledNetworkIDs(e){return[`${l2}:enabled-network-ids`,{mainnetOnly:e}]},chainAvailability(e){return[`${l2}:chain-availability`,e]}};var fK=[],W4=e=>{fK.push(e)},Qc=async e=>{let t=fo.isFeatureEnabled("enable-base"),r=fo.isFeatureEnabled("enable-monad");await e.invalidateQueries({queryKey:d2.chainAvailability({isBaseEnabled:t,isMonadEnabled:r})}),await Promise.all(fK.map(n=>n(e)))};p();y();p();y();var yg=(i=>(i.Image="image",i.Emoji="emoji",i.ReadOnlyDefault="read-only-default",i.Default="default",i))(yg||{}),qhe=O.object({type:O.nativeEnum(yg),imageUrl:O.string().optional(),unicode:O.string().optional()}),h2=(t=>(t.Ledger="ledger",t))(h2||{}),p2=(t=>(t.BLE="ble",t))(p2||{}),Hhe=O.object({version:O.literal(1),connectionType:O.nativeEnum(p2),deviceType:O.nativeEnum(h2),id:O.string().min(1),name:O.string().optional(),model:O.string().optional()}),Whe=O.object({value:O.number(),timestamp:O.number()}),zhe=O.object({name:O.string(),icon:qhe.optional(),connectedDevices:Hhe.array().optional(),balance:Whe.optional()});var jhe=100,Ghe={unicode:void 0,imageUrl:void 0,type:"default"},z4={version:1,isDeveloperMode:!1};var y2=Ft.Solana.Devnet,m2=Ft.Ethereum.Sepolia,pd={version:1,setting:{solana:y2,eip155:m2}};function Zs(e){return e.map(t=>mi[t].defaultDerivationPathType)}var $he={bip44Root:"bip44RootEthereum",bip44Change:"bip44Ethereum",bip44:"bip44EthereumSecondary",deprecated:"bip44EthereumTertiary",bip44RootEthereum:null,bip44Ethereum:null,bip44EthereumSecondary:null,bip44EthereumTertiary:null,bitcoinTaproot:null,bitcoinNativeSegwit:null,bitcoinNestedSegwit:null,bitcoinLegacy:null},Xc={bip44Root:-1,bip44RootEthereum:-1,bitcoinTaproot:0,bitcoinNativeSegwit:0,bitcoinNestedSegwit:0,bitcoinLegacy:0,bip44Change:0,bip44Ethereum:0,bip44:1,bip44EthereumSecondary:1,deprecated:2,bip44EthereumTertiary:2},Yhe="https://help.phantom.app/hc/en-us/articles/4406563212819";var Jhe="https://help.phantom.app/hc/en-us/articles/21872962238355";p();y();var mg=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};p();y();p();y();var Zhe=e=>e.includes(".")||e.includes("@")?!1:xu.safeParse(e).success||ma.safeParse(e).success||Rf.safeParse(e).success,j4=(e,t=5)=>Zhe(e)?mg(e,t):e;var Qhe=(e,t,r,n=4)=>{let i=t?t.name:r,o=j4(e,n);return i?`${i} (${o})`:o};p();y();var Xhe=e=>`${e.substring(0,5)}...`;p();y();var O0=ee(Kr()),lK=(0,O0.createContext)(null);function e0e({children:e,authRepository:t}){return O0.default.createElement(lK.Provider,{value:t},e)}function Ki(){let e=(0,O0.useContext)(lK);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}p();y();p();y();var $4=ee(Zr());p();y();var gg="https://phantom.app",bg="https://api.phantom.app/oauth2/auth",g2={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},G4={prod:"https://auth.phantom.app",staging:"https://staging-auth.phantom.app"},dK="/login/start",hK="/oauth2/token";var t0e="https://help.phantom.app/hc/en-us/articles/32367778944403";p();y();var ti=e=>Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var r0e=60;function xg(){let e={alg:"ES256",type:"JWT"},t=Math.floor(Date.now()/1e3),r={iss:gg,aud:bg,nbf:t,exp:t+r0e,iat:t};return{header:e,payload:r}}function N0(e){let t=ti($4.Buffer.from(JSON.stringify(e.header))),r=ti($4.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}p();y();var pK=O.object({alg:O.string(),type:O.string(),kid:O.string()}),yK=O.object({sub:O.string(),iss:O.string(),aud:O.string(),nbf:O.number(),exp:O.number(),iat:O.number()}),Y4=O.object({header:pK,payload:yK,signature:O.string()}),mK=O.object({alg:O.string(),type:O.string()}),gK=O.object({iss:O.string(),aud:O.string(),nbf:O.number(),exp:O.number(),iat:O.number()}),J4=O.object({header:mK,payload:gK}),bK=O.object({id_token:O.string(),access_token:O.string(),refresh_token:O.string(),scope:O.string(),token_type:O.string(),expires_in:O.number().gte(0)}),n0e=O.object({redirectTo:O.string()}),xK=O.object({at_hash:O.string(),aud:O.array(O.string()),auth_time:O.number(),exp:O.number(),iat:O.number(),iss:O.string(),jti:O.string(),rat:O.number(),sid:O.string(),sub:O.string(),email:O.string().optional()}),Z4=O.object({authenticationKeys:O.array(O.object({createdAt:O.string().datetime().nullish().default(null),updatedAt:O.string().datetime().nullish().default(null),id:O.string().uuid(),publicKey:O.string(),userId:O.string().uuid()})).optional()});p();y();var yd=ee(dk());p();y();p();y();p();y();p();y();function LK(...e){let t=new AbortController;for(let r of e){let n=r instanceof AbortController?r.signal:r;if(n?.aborted)return t.abort(n.reason),t.signal;n?.addEventListener("abort",()=>{t.abort(n.reason)},{once:!0})}return t.signal}var Q0e=2*60*1e3,X0e=[];function KK(e,t){let{fetchTimeout:r,retryDelays:n,...i}=t||{},o=t?.fetchTimeout??Q0e,s=t?.retryDelays??X0e,a=0,c=0;return new Promise((u,h)=>{function l(){a++,c=Date.now();let A=!0,E=new AbortController,C=fetch(e,{...i,signal:LK(...i.signal?[i.signal,E.signal]:[E.signal])}),M=setTimeout(()=>{E.abort(),A=!1,x(a)?g():h(new Error(`fetchWithTimeoutAndRetry(): Failed to get response from server due to timeout of ${o} ms, tried ${a} times.`))},o);C.then(N=>{clearTimeout(M),A&&(N.status>=200&&N.status<300?u(N):x(a)?g():u(N))}).catch(N=>{clearTimeout(M),x(a)?g():h(N)})}function g(){let A=s[a-1],E=c+A;setTimeout(l,Math.max(E-Date.now(),0))}function x(A){return A<=s.length}l()})}p();y();var hk=(e={},t={})=>{let r=new Headers(e),n=new Headers(t);for(let[i,o]of n.entries())o===void 0||o==="undefined"?r.delete(i):r.set(i,o);return r};p();y();var V0=ee(Zr());p();y();p();y();function FK(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function pk(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function VK(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");FK(e.outputLen),FK(e.blockLen)}function K0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function qK(e,t){pk(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();var epe=e=>e instanceof Uint8Array;var B2=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Qs=(e,t)=>e<<32-t|e>>>t,tpe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!tpe)throw new Error("Non little-endian hardware is not supported");function rpe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function vg(e){if(typeof e=="string"&&(e=rpe(e)),!epe(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var F0=class{clone(){return this._cloneInto()}},TFe={}.toString;function HK(e){let t=n=>e().update(vg(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var C2=class extends F0{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,VK(t);let n=vg(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return K0(this),this.iHash.update(t),this}digestInto(t){K0(this),pk(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},yk=(e,t,r)=>new C2(e,t).update(r).digest();yk.create=(e,t)=>new C2(e,t);p();y();p();y();function npe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var M2=class extends F0{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=B2(this.buffer)}update(t){K0(this);let{view:r,buffer:n,blockLen:i}=this;t=vg(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=B2(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){K0(this),qK(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;npe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=B2(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var ipe=(e,t,r)=>e&t^~e&r,ope=(e,t,r)=>e&t^e&r^t&r,spe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ff=new Uint32Array(64),mk=class extends M2{constructor(){super(64,32,8,!1),this.A=Kf[0]|0,this.B=Kf[1]|0,this.C=Kf[2]|0,this.D=Kf[3]|0,this.E=Kf[4]|0,this.F=Kf[5]|0,this.G=Kf[6]|0,this.H=Kf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Ff[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=Ff[l-15],x=Ff[l-2],A=Qs(g,7)^Qs(g,18)^g>>>3,E=Qs(x,17)^Qs(x,19)^x>>>10;Ff[l]=E+Ff[l-7]+A+Ff[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=Qs(a,6)^Qs(a,11)^Qs(a,25),x=h+g+ipe(a,c,u)+spe[l]+Ff[l]|0,E=(Qs(n,2)^Qs(n,13)^Qs(n,22))+ope(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){Ff.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var WK=HK(()=>new mk);var ape=[86,120,48,81,89,86,110,49,100,114,111,113,49,70,56,84,77,115,80,81,66,75,72,51,90,83,110,100,110,116,68,88,107,118,83,53,102,80,114,89,111,88,85,75,57,43,67,57,97,103,74,113,68,76,112,112,100,48,102,101,80,122,83,111,108,113,75,90,56,114,66,70,119,87,84,104,98,57,110,119,43,79,70,51,51,65,61,61],cpe=[87,67,49,81,97,71,70,117,100,71,57,116,81,88,86,48,97,70,82,118,97,50,86,117],upe=[87,67,49,81,97,71,70,117,100,71,57,116,84,109,57,117,89,50,85,61];function fpe(e){let t=new URL(e);return t.pathname+t.search}function zK(e,t){let r=fpe(e),n=JSON.stringify(Math.floor(Date.now()/1e3)),i=r+n,o=yk(WK,V0.Buffer.from(String.fromCharCode(...ape)),V0.Buffer.from(i)),s=new Headers(t);return s.set(V0.Buffer.from(String.fromCharCode(...cpe),"base64").toString(),encodeURIComponent(V0.Buffer.from(o).toString("base64"))),s.set(V0.Buffer.from(String.fromCharCode(...upe),"base64").toString(),n),s}var H0=class extends Error{constructor(t,r){super(t),this.response=r}},lpe={"Content-Type":"application/json","X-Phantom-Version":tB},q0=async e=>{let t,r;try{r=await e.clone().blob()}catch{}try{t=await e.clone().json()}catch{}let{status:n,statusText:i}=e;return{blob:r,data:t,status:n,statusText:i}},gk=class e{constructor(t={}){this.fetch=async(t,r={})=>{try{if(typeof t=="function"){let c=pl()==="https://api.phantom.app"?"prod":"staging";t=t({apiEnv:c})}let n="";this.config.withApiEnvironment==="prod"?n="https://api.phantom.app":this.config.withApiEnvironment==="staging"?n="https://staging-api.phantom.app":this.config.withApiEnvironment==="default"&&(n=pl());let i=new URL(`${n}${t}`),o=r;r.headers=hk(this.config.headers,r.headers),this.config.withClientAuth&&(r.headers=zK(i.toString(),r.headers)),r?.params&&(i.search=new URLSearchParams(r.params).toString());let s=this.config.validateStatus;r?.validateStatus&&(s=r?.validateStatus),o.body&&typeof o.body!="string"&&(o.body=JSON.stringify(o.body)),this.config.timeoutMs&&(o.fetchTimeout=this.config.timeoutMs),this.config.numRetries&&(o.retryDelays=Array(this.config.numRetries).fill(this.config.delayBetweenEachRetryMs));let a=await KK(i.toString(),o);if(s&&!a.ok)throw new H0(`Request failed with status code ${a.status}`,await q0(a));return a}catch(n){throw n instanceof H0?n:new H0(n?.message,n?.response)}};this.config={withClientAuth:!0,numRetries:0,delayBetweenEachRetryMs:0,timeoutMs:null,validateStatus:!1,headers:lpe,withApiEnvironment:"none",...t}}auth(t){return new e({...this.config,withClientAuth:t})}bearer(t){return t?this.headers({authorization:`Bearer ${t}`}):this}headers(t,r){let n=r?.mergeHeaders===!1?t:hk(this.config.headers,t);return new e({...this.config,headers:n})}timeout(t){return new e({...this.config,timeoutMs:t})}retry(t,r){return new e({...this.config,numRetries:t,delayBetweenEachRetryMs:r})}validateStatus(t){return new e({...this.config,validateStatus:t})}api(t="default"){return new e({...this.config,withApiEnvironment:t})}async get(t,r={}){r.method="GET";let n=await this.fetch(t,r);return q0(n)}async post(t,r,n={}){n.method="POST";let i=await this.fetch(t,{...n,body:r});return q0(i)}async put(t,r,n={}){n.method="PUT";let i=await this.fetch(t,{...n,body:r});return q0(i)}async patch(t,r,n={}){n.method="PATCH";let i=await this.fetch(t,{...n,body:r});return q0(i)}async delete(t,r,n={}){n.method="DELETE";let i=await this.fetch(t,{...n,body:r});return q0(i)}},dr=new gk;function dpe(e){if(e===void 0)throw new Error("rpcUrl undefined");return async(t,r)=>{let n={jsonrpc:"2.0",id:+new Date,method:t,params:r},o=(await dr.post(e,n)).data;if("error"in o)throw new Error(JSON.stringify(o.error));return o.result}}async function hpe(e,t={}){return dr.fetch(e,t)}function ppe(e){return e.status>199&&e.status<300}function ype(e){return e instanceof H0}p();y();var W0=ee(dk()),GK=ee(ch()),bk={generateRandom:e=>{let t=(0,GK.randomBytes)(e);return(0,W0.bufferToString)(t)},async deriveChallenge(e){let t=ly((0,W0.textEncodeLite)(e));return(0,W0.urlSafe)(t)}};p();y();var tu=()=>pl()==="https://api.phantom.app"?G4.prod:T.BASE_AUTH_ENDPOINT||G4.staging,xk=()=>`${tu()}${dK}`,R2=()=>`${tu()}${hK}`;var $K=new yd.BasicQueryStringUtils;async function Ag(e,t){let{url:r,codeVerifier:n}=await YK(e.getClientID(),e.redirectURL,t),i=t.type==="email",o=await e.fetchAuthorizationCode(e.redirectURL,r,i);return await wk({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:R2(),code:o,codeVerifier:n})}async function YK(e,t,r){let n=xk(),i,o=["openid","offline_access","user","incognito"],s;switch(r.type){case"key":{i={type:"key",jwt:N0(r.clientJWT)};break}case"email":{i={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},s=r.prompt,o.push("seedless"),o.push("email");break}case"session":{i={type:"session",existingAccessToken:r.existingAccessToken},o.push("seedless");break}}let c=await new yd.AuthorizationRequest({client_id:e,redirect_uri:t,scope:o.join(" "),response_type:"code"},bk).toJson(),u;switch(i.type){case"key":u=`jwt:${ti(Buffer.from(i.jwt,"utf8"))}`;break;case"email":u=`sso:${i.provider}`,i.existingAccessToken&&(u=`${u}:${i.existingAccessToken}`);break;case"session":u=`session:${i.existingAccessToken}`;break}let h={redirect_uri:c.redirect_uri,client_id:c.client_id,response_type:c.response_type,state:c.state??"",scope:c.scope,login_hint:u};s&&(h.prompt=s);let l=c.extras?.code_challenge,g=c.extras?.code_challenge_method,x=c.internal?.code_verifier;if(l&&g&&(h.code_challenge=l,h.code_challenge_method=g),!l||!g||!x)throw new Error("Missing code challenge or code verifier for PKCE.");let A=$K.stringify(h);return{url:`${n}?${A}`,codeVerifier:x}}async function wk(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:i}=e,o;t==="authorization_code"?o=new yd.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):o=new yd.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,refresh_token:e.refreshToken});let s=await dr.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(eB()).post(r,$K.stringify(o.toStringMap()));if(s.status===401)throw t==="refresh_token"?new Error("Token request unauthorized. Refresh token is expired or invalid."):new Error("Token request unauthorized. Authorization code is expired or invalid.");if(s.status===400)throw new Error("Bad Token request. Request is malformed or incorrect clientID / redirectURI.");let a=bK.safeParse(s.data);if(!a.success)throw new Error("Invalid OAuth2Token response.");let{data:c}=a;return{idToken:c.id_token,accessToken:c.access_token,refreshToken:c.refresh_token,scope:c.scope,tokenType:c.token_type,expiresAt:Date.now()+c.expires_in*1e3}}async function JK(e,t){return await wk({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:R2(),refreshToken:t})}p();y();p();y();var _Ve=new Error("timeout while waiting for mutex to become available"),BVe=new Error("mutex already locked"),mpe=new Error("request for lock canceled"),gpe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},vk=class{constructor(t,r=mpe){this._value=t,this._cancelError=r,this._weightedQueues=[],this._weightedWaiters=[]}acquire(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise((r,n)=>{this._weightedQueues[t-1]||(this._weightedQueues[t-1]=[]),this._weightedQueues[t-1].push({resolve:r,reject:n}),this._dispatch()})}runExclusive(t,r=1){return gpe(this,void 0,void 0,function*(){let[n,i]=yield this.acquire(r);try{return yield t(n)}finally{i()}})}waitForUnlock(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise(r=>{this._weightedWaiters[t-1]||(this._weightedWaiters[t-1]=[]),this._weightedWaiters[t-1].push(r),this._dispatch()})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(t){this._value=t,this._dispatch()}release(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);this._value+=t,this._dispatch()}cancel(){this._weightedQueues.forEach(t=>t.forEach(r=>r.reject(this._cancelError))),this._weightedQueues=[]}_dispatch(){var t;for(let r=this._value;r>0;r--){let n=(t=this._weightedQueues[r-1])===null||t===void 0?void 0:t.shift();if(!n)continue;let i=this._value,o=r;this._value-=r,r=this._value+1,n.resolve([i,this._newReleaser(o)])}this._drainUnlockWaiters()}_newReleaser(t){let r=!1;return()=>{r||(r=!0,this.release(t))}}_drainUnlockWaiters(){for(let t=this._value;t>0;t--)this._weightedWaiters[t-1]&&(this._weightedWaiters[t-1].forEach(r=>r()),this._weightedWaiters[t-1]=[])}},bpe=function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(h){try{u(n.next(h))}catch(l){s(l)}}function c(h){try{u(n.throw(h))}catch(l){s(l)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((n=n.apply(e,t||[])).next())})},O2=class{constructor(t){this._semaphore=new vk(1,t)}acquire(){return bpe(this,void 0,void 0,function*(){let[,t]=yield this._semaphore.acquire();return t})}runExclusive(t){return this._semaphore.runExclusive(()=>t())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}};p();y();var ZK=e=>Buffer.from(e.replace("-","+").replace("_","/").replace(/=+$/,""),"base64");p();y();function z0(e,t="expected value not found"){if(e==null)throw new Error(t);return e}var QK=".phantom.auth",N2=`${QK}.tokens`,xpe=`${QK}.authentication-factors`,Sg="/v1/authentication-keys",wpe=e=>({getUser:()=>j0(e),autoLogIn:()=>Epe(e),logIn:t=>eF(e,t),isExistingAuthFactor:t=>XK(e,t),getAuthenticationKeys:()=>Ipe(e),getLocalAuthenticationPublicKeys:()=>kpe(e),addAuthFactor:t=>Tpe(e,t),deleteAuthFactor:t=>Ppe(e,t),deleteAllAuthFactors:()=>_pe(e),logOut:()=>Bpe(e)}),vpe=new O2,Ape=(e,t)=>e.runExclusive?.(t)??vpe.runExclusive(t),Ak=e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=ZK(t[1]).toString("utf-8"),i=JSON.parse(n);r=xK.parse(i)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}},j0=e=>Ape(e,async()=>{let{storage:t,authConfig:r}=e,n=await t.get(N2);if(n&&Date.now()<n.expiresAt)return Ak(n);if(n&&n.refreshToken)try{let i=await JK(r,n.refreshToken);return await t.set(N2,i),Ak(i)}catch(i){return de.captureError(i,"Auth"),null}return null}),XK=async(e,t)=>{let r=tu(),n=z0(e.signer,"Signer is required for key-based auth.");try{let i=await n.getAuthenticationPublicKey(t),o=xg(),s=await n.sign(o,t),{data:a}=await dr.get(`${r}${Sg}`,{params:{token:N0(s)}}),c=Z4.safeParse(a);return c.success?(c.data.authenticationKeys??[]).some(l=>l.publicKey===i):!1}catch{return!1}},Spe=async(e,t)=>{if(t.secretIdentifier)return t.secretIdentifier;let r=await z0(e.signer).getAllSecretIdentifiers();for(let n of r)if(await XK(e,n))return n;throw new Error("Unable to log in with key-based auth. No auth factor found for login.")},eF=async(e,t)=>{let{storage:r,authConfig:n}=e,i,{type:o}=t;switch(o){case"key":{let s=await Spe(e,t),a=z0(e.signer,"Signer is required for key-based auth."),c=xg(),u=await a.sign(c,s);i=await Ag(n,{type:o,clientJWT:u});break}case"email":{i=await Ag(n,{type:o,prompt:t.prompt,provider:t.provider});break}case"session":{i=await Ag(n,{type:o,existingAccessToken:t.accessToken});break}}return await r.set(N2,i),Ak(i)},Epe=async e=>{let t=await j0(e);if(!t)de.addBreadcrumb("account","Unable to get user from storage or refresh, continuing with full auth flow.","info");else return t;try{return e.signer?await eF(e,{type:"key"}):null}catch(r){return de.captureError(r,"account"),null}},Ipe=async e=>({authenticationPublicKeys:(await tF(e)).map(r=>r.publicKey)}),tF=async e=>{let t=tu(),r=await j0(e);if(!r)throw new Error("User not authenticated.");let{data:n}=await dr.bearer(r.accessToken).get(`${t}${Sg}`),i=Z4.safeParse(n);if(!i.success)throw new Error("Unable to parse auth factors response.");return i.data.authenticationKeys??[]},kpe=async e=>{try{let t=z0(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let i of r)n[i]=await t.getAuthenticationPublicKey(i);return n}catch(t){return de.captureError(t,"account"),{}}},Tpe=async(e,{secretIdentifier:t})=>{let r=tu(),n=z0(e.signer,"Signer is required for key-based auth."),i=await j0(e);if(!i)throw new Error("User not authenticated.");let o=xg(),s=await n.sign(o,t);await dr.bearer(i.accessToken).post(`${r}${Sg}`,{jwt:N0(s)})},Ppe=async(e,{authenticationPublicKey:t})=>{let r=tu(),n=await j0(e);if(!n)throw new Error("User not authenticated.");await dr.bearer(n.accessToken).delete(`${r}${Sg}/${encodeURIComponent(t)}`)},_pe=async e=>{let t=tu(),r=e.storage,n=await j0(e);if(!n)throw new Error("User not authenticated.");let i=await tF(e);await Promise.all(i.map(o=>dr.bearer(n.accessToken).delete(`${t}${Sg}/${o.id}`))),await r.remove(xpe)},Bpe=async({storage:e})=>{await e.remove(N2)};p();y();var Cpe=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n};p();y();var Mpe=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),i=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${i}`,{cause:n});return!1};p();y();var Rpe=()=>pl()==="https://api.phantom.app"?g2.prod:g2.staging;p();y();p();y();var rF="@phantom/auth",ru={user:["auth",`${rF}:user`],authFactors:["auth",`${rF}:user-auth-factors`]};var md=()=>{let e=Ki(),t=ru.user;return Ct({queryKey:t,queryFn:async()=>{let n=await e.autoLogIn();if(!n)throw new Error("Unable to automatically log in with key-based auth.");return n},retryOnMount:!1})};p();y();var Sk=()=>{let e=Ki(),t=ru.authFactors;return Ct({queryKey:t,queryFn:async()=>{let n=await e.getLocalAuthenticationPublicKeys();if(!n)throw new Error("Unable to build local AuthFactors!");let{authenticationPublicKeys:i}=await e.getAuthenticationKeys();if(!i)throw new Error("Unable to find AuthFactors for currently logged-in user!");let o={};return Object.entries(n).forEach(([s,a])=>{let c=i.includes(a);o[s]={authenticationPublicKey:a,isExistingAuthFactor:c}}),o},retryOnMount:!1})};p();y();p();y();var Ek=async e=>{await e.removeQueries({queryKey:ru.user})},Ik=async e=>{await e.resetQueries({queryKey:ru.user})},Eg=async e=>{await e.invalidateQueries({queryKey:ru.user})},U2=async e=>{await e.invalidateQueries({queryKey:ru.authFactors})};var Ope=()=>{let e=Ae(),t=Ki();return Se({mutationFn:async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await U2(e)}})};p();y();var Npe=()=>{let e=Ae(),t=Ki();return Se({mutationFn:async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await U2(e)}})};p();y();var gd=()=>{let{data:e}=md();return!!e};p();y();var Upe=()=>{let{data:e}=md();return e?.accessToken};p();y();p();y();p();y();var G0=ee(Kr()),nF=(0,G0.createContext)(null);function Dpe({children:e,analytics:t}){return G0.default.createElement(nF.Provider,{value:t},e)}function ii(){let e=(0,G0.useContext)(nF);if(!e)throw new Error("useAnalytics must be used within a AnalyticsProvider");return e}p();y();p();y();var Ig=wu(ii,e=>new D2(e)),D2=class{#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};p();y();var $0=ee(Kr()),iF=(0,$0.createContext)(null);function Lpe({children:e,userRepository:t,claimUsernameSigner:r}){return $0.default.createElement(iF.Provider,{value:{userRepository:t,claimUsernameSigner:r}},e)}function oF(){let e=(0,$0.useContext)(iF);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function St(){return oF().userRepository}function sF(){return oF().claimUsernameSigner}p();y();p();y();var kg="@phantom/users",Nn={checkUsernameAvailability(e){return["user",`${kg}:check-username-availability`,{username:e}]},userProfile(){return["user",`${kg}:user-profile`]},userProfileAttributeEffect(e){return["user",`${kg}:user-profile-attribute-effect`,{username:e}]},userSyncedAccounts(){return["user",`${kg}:user-synced-accounts`]}};var Kpe=uh({days:1}),Fpe=uh({minutes:1});function nu(){let e=St(),t=gd(),r=Nn.userProfile();return Ct({enabled:t,queryKey:r,queryFn:async()=>{let i=await e.getUserProfile();if(!i)throw new Error("No user profile.");return i},gcTime:Kpe,staleTime:Fpe})}p();y();p();y();p();y();var Y0=(e,t)=>t?`/user/v1/users/${e}/wallet-accounts/${t}`:`/user/v1/users/${e}/wallet-accounts`,Tg=e=>`/user/v1/users/${e}/profile`,kk=e=>`/user/v1/profiles/${e}`,aF=()=>"/user/v1/profiles/creation-check",cF=e=>`/v1/actors-search?query=${encodeURIComponent(e)}`,uF=["seed","seedless","privateKey"],Vpe=(e,t)=>{let r=e[0],n=t[0],i=se.isNetworkID(r),o=se.isNetworkID(n);return i&&o?se.compareNetworkID(r,n):i?-1:o?1:0},Tk=10,fF=500,Pg={seedless:1,seed:2,privateKey:3};p();y();var Pk=async e=>{await e.removeQueries({queryKey:Nn.userProfile()})},_k=async e=>{await e.resetQueries({queryKey:Nn.userProfile()})},bd=async e=>{await e.invalidateQueries({queryKey:Nn.userProfile()})},Bk=async e=>{await e.removeQueries({queryKey:Nn.userSyncedAccounts()})},qpe=async e=>{await e.resetQueries({queryKey:Nn.userSyncedAccounts()})},ja=async e=>{await e.invalidateQueries({queryKey:Nn.userSyncedAccounts()})};p();y();var L2=O.string().regex(/^https?:\/\/.+$/),K2=O.string(),Ck=O.literal("privateKey"),Hpe=O.object({networkId:Nf,publicKey:ah,address:Q_,pathType:Em.or(Ck)}),Wpe=O.object({networkId:Of,publicKey:ah,address:ma,pathType:Sm.or(Ck)}),zpe=O.object({networkId:Mf,publicKey:ah,address:O.string(),pathType:Am.or(Ck)}),jpe=O.union([Hpe,Wpe,zpe]),lF=O.object({accountHash:O.string(),accountOrigin:O.string().regex(/^(seed|privateKey|seedless):(.+)/).catch("readOnly"),name:O.string().nullish().default(null).catch(null),icon:O.union([L2,K2]).nullish().default(null).catch(null),derivationIndex:O.number().nullish().default(null).catch(null),addresses:O.array(jpe).min(1)}),Gpe=lF.and(O.object({id:O.string()})),F2=O.object({walletAccounts:O.array(Gpe)}),hWe=O.record(O.string(),lF);p();y();var J0=e=>{for(let t of uF)if(e.accountOrigin?.split(":")[0]===t)return t;return null},Ga=e=>e.accountOrigin?.replace("seed:","")?.replace("privateKey:","")?.replace("seedless:",""),dF=(e=[])=>e.sort((t,r)=>{let n=J0(t),i=J0(r);if(n===null&&i===null)return 0;if(n===null)return 1;if(i===null)return-1;if(Pg[n]-Pg[i]!==0)return Pg[n]-Pg[i];let o=Ga(t),s=Ga(r);if(o===null&&s===null)return 0;if(o===null)return 1;if(s===null)return-1;let a=o.localeCompare(s);return a!==0?a:t.derivationIndex===null&&r.derivationIndex===null?0:t.derivationIndex===null?1:r.derivationIndex===null?-1:t.derivationIndex-r.derivationIndex});p();y();var Z0=(i=>(i.PUBLIC="public",i.PRIVATE="private",i.INVISIBLE="invisible",i.HIDDEN="hidden",i))(Z0||{}),$pe=Object.values(Z0),Mk=O.object({id:O.string(),username:O.string(),icon:O.string(),addresses:O.record(O.string(),O.string()),privacyState:O.nativeEnum(Z0).optional().default("public")}),Rk=O.string().url().brand("ActorId"),Ype=O.object({id:O.string().optional(),orderedItems:Rk.array(),next:O.string().optional()}),hF=O.object({id:O.string().url(),current:Ype.optional(),totalItems:O.number().optional()}),pF=O.object({type:O.string(),value:O.string(),name:O.string()}),Jpe=O.object({id:O.string().url().optional(),name:O.string().optional(),type:O.string()}),Zpe=O.object({id:Rk,name:O.string(),preferredUsername:O.string(),manuallyApprovesFollowers:O.boolean(),followers:O.union([hF,O.string().url()]),following:O.union([hF,O.string().url()]),icon:Jpe,attachment:O.union([pF,O.array(pF)]).optional()}).transform(e=>{let{attachment:t,...r}=e,n={};if(t){let i=Array.isArray(t)?t:[t];for(let o of i)if(o.name.endsWith(":address")){let s=Zc.safeParse(o.name.replace(":address",""));if(s.success){let a=s.data;n[a]=o.value}}}return{...r,addresses:n}}),yF=O.object({actors:Zpe.array()}),_g={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},SWe=O.object({type:O.nativeEnum(_g),imageUrl:O.string().optional(),unicode:O.string().optional()}),Ok=O.object({error:O.object({message:O.string()})});var Qpe=e=>({getUsernameAvailability:t=>Xpe(t),getUserProfile:()=>eye(e),getUserProfileByUsername:t=>mF(t),getUserProfileByUsernameOrUserProfileId:t=>mF(t),searchForActor:(t,r)=>fye(t,r),setUserProfile:({username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>tye(e,{username:t,addresses:r,signedMessages:i,icon:n,privacyState:o}),patchUserProfile:({addresses:t,icon:r,privacyState:n})=>rye(e,{addresses:t,icon:r,privacyState:n}),deleteUserProfile:()=>nye(e),isEligibleToClaim:t=>iye(t),getSyncedAccounts:()=>Nk(e),downloadSyncedAccounts:()=>oye(e),uploadSyncedAccounts:t=>sye(e,t),uploadSyncedAccount:t=>aye(e,t),deleteSyncedAccounts:()=>cye(e),deleteSyncedAccount:t=>uye(e,t)}),Xpe=async e=>{switch((await dr.api().get(kk(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},eye=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,i=await dr.api().bearer(n).get(Tg(r)),o=Mk.safeParse(i.data);return o.success?o.data:null},mF=async e=>{let t=await dr.api().get(kk(e)),r=Mk.safeParse(t.data);return r.success?r.data:null},tye=async({authRepository:e},{username:t,addresses:r,icon:n,signedMessages:i,privacyState:o})=>{let s=await e.getUser();if(!s)throw new Error("User is not logged in, unable to claim username.");let{userID:a,accessToken:c}=s,u=await dr.api().bearer(c).post(Tg(a),{username:t,signedMessages:i,icon:n,addresses:r,privacyState:o});if(u.status===201)return;let h=Ok.safeParse(u.data);throw h.success?new Error(h.data.error.message):new Error("Unknown error")},rye=async({authRepository:e},{addresses:t,icon:r,privacyState:n})=>{let i=await e.getUser();if(!i)throw new Error("User is not logged in, unable to claim username.");let{userID:o,accessToken:s}=i,a=await dr.api().bearer(s).patch(Tg(o),{addresses:t,icon:r,privacyState:n});if(a.status===200)return;de.captureMessage(`Failed to patch user profile: ${a.status} ${JSON.stringify(a.data)}`,"Auth");let c=Ok.safeParse(a.data);throw c.success?new Error(c.data.error.message):new Error("Unknown error")},nye=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await dr.api().bearer(n).delete(Tg(r));return 200<=i.status&&i.status<300},iye=async e=>{try{return(await dr.api().post(aF(),{addresses:e})).status===200}catch{return!1}},Nk=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await dr.api().bearer(n).get(Y0(r)),o=F2.safeParse(i.data);if(!o.success)throw new Error("Unable to get synced accounts: unable to parse GET /wallet-accounts response.");return{walletAccounts:dF(o.data.walletAccounts)}},oye=async e=>{let{walletAccounts:t}=await Nk(e),r=t.reduce((n,i)=>(n[i.accountHash]=i,n),{});return await e.claimUsernameSigner.storeSyncedAccounts(r),!0},gF=(e,t,r)=>dr.api().bearer(e).post(Y0(t),r),sye=async(e,t)=>{let{authRepository:r,claimUsernameSigner:n,queryClient:i}=e,o=await r.getUser();if(!o)return de.addBreadcrumb("Auth","User is not logged in, unable to sync up accounts.","info"),!1;try{let s=t;s||(s=[...(await Nk(e)).walletAccounts.reduce((x,A)=>{let E=Ga(A);return E&&x.add(E),x},new Set)]);let a=await n.getBatchAccountMetadata(s),{userID:c,accessToken:u}=o,h=vE(Object.values(a),Tk);for(let l of h)await Promise.all(l.map(g=>gF(u,c,g))),await pB(fF);return await ja(i),!0}catch{return de.addBreadcrumb("Auth","Unable to sync up accounts.","info"),!1}},aye=async({authRepository:e,claimUsernameSigner:t,queryClient:r},n)=>{let i=await e.getUser();if(!i)return de.addBreadcrumb("Auth","User is not logged in, unable to sync up account.","info"),!1;try{let o=await t.getAccountMetadata(n),{userID:s,accessToken:a}=i;return await gF(a,s,o),await ja(r),!0}catch(o){return de.addBreadcrumb("Auth","Unable to sync up account.","info"),de.captureError(o,"Auth"),!1}},bF=(e,t,r)=>dr.api().bearer(e).delete(Y0(t,r.id),r),cye=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync up accounts.");let{userID:r,accessToken:n}=t,i=await dr.api().bearer(n).get(Y0(r)),o=F2.safeParse(i.data);if(!o.success)throw new Error("Unable to delete synced accounts, unable to parse GET /wallet-accounts response.");let s=vE(o.data.walletAccounts,Tk);for(let a of s)await Promise.all(a.map(c=>bF(n,r,c)));return!0},uye=async({authRepository:e},t)=>{let r=await e.getUser();if(!r)throw new Error("User is not logged in, unable to sync up accounts.");let{userID:n,accessToken:i}=r,o=await dr.api().bearer(i).get(Y0(n)),s=F2.safeParse(o.data);if(!s.success)throw new Error("Unable to delete synced accounts, unable to parse GET /wallet-accounts response.");let a=s.data.walletAccounts.find(c=>c.accountHash===t);return a?(await bF(i,n,a),!0):!1},fye=async(e,t)=>{de.addBreadcrumb("network","User is searching for actors.","info",{query:e});let r=await dr.api().bearer(t).get(cF(e)),n=yF.safeParse(r.data);return n.success?{actors:n.data.actors}:{actors:[]}};p();y();var lye=new Set([Nn.userProfile()[1],Nn.userSyncedAccounts()[1]]),dye=e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:lye.has(t)};p();y();function hye(){let e=Ig(),t=Ki(),r=St(),n=sF(),i=Ae(),o=async({username:s,addresses:a,icon:c,secretIdentifiers:u,accountIdentifiers:h})=>{if(de.addBreadcrumb("Auth",`Claiming Username: ${s}.`,"info"),u.length===0)throw new Error("Unable to log in to claim a username. Select a secret identifier to use as an auth factor.");de.addBreadcrumb("Auth","Logging in with first auth factor","info");let l=await t.logIn({type:"key",secretIdentifier:u[0]});for(let x of u.slice(1))de.addBreadcrumb("Auth","Adding additional auth factor","info"),await t.addAuthFactor({secretIdentifier:x});de.addBreadcrumb("Auth","Signing over messages","info");let g=await n.signMessages(s);de.addBreadcrumb("Auth","Creating user profile to claim username","info"),await r.setUserProfile({username:s,addresses:a,icon:c,signedMessages:g,privacyState:"public"}),de.addBreadcrumb("Auth","Uploading Synced Accounts","info"),await r.uploadSyncedAccounts(h),de.addBreadcrumb("Auth","\u2705 Username Claimed!","info"),await Ik(i),await _k(i),await Eg(i),await bd(i),e.onClaimFlowComplete(s,l.userID)};return Se({mutationFn:async s=>{try{return await o(s)}catch(a){de.addBreadcrumb("Auth","Could not claim username","error");let c;throw a instanceof Error?c=a:c=new Error("Unable to claim username"),de.captureError(c,"Auth"),c}}})}p();y();function pye(e){let t=Ig(),r=St(),n=Nn.checkUsernameAvailability(e);return Ct({enabled:!!e,queryKey:n,queryFn:async()=>{let s=await r.getUsernameAvailability(e);return t.onCheckAvailability(e,s),s}})}p();y();var yye=uh({days:1}),mye=uh({minutes:1}),xF=e=>{let t=St(),r=gd();return Ct({enabled:r,queryKey:Nn.userSyncedAccounts(),queryFn:async()=>(await t.getSyncedAccounts()).walletAccounts,gcTime:yye,staleTime:mye,select:e})};p();y();var gye=()=>{let e=Ae(),t=Ki(),r=St();return Se({mutationFn:async()=>{await r.deleteSyncedAccounts(),await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await Bk(e),await Pk(e),await Ek(e),await ja(e),await bd(e),await Eg(e)}})};p();y();var bye=()=>{let e=Ae(),t=St();return Se({mutationFn:async n=>{await t.patchUserProfile(n),await bd(e)}})};p();y();var xye=()=>{let e=Ae(),t=St();return Se({mutationFn:async n=>{await t.uploadSyncedAccounts(n),await ja(e)}})};p();y();var wye=()=>{let e=Ae(),t=St();return Se({mutationFn:async n=>{for(let i of n)await t.deleteSyncedAccount(i);await ja(e)}})};p();y();var vye=()=>{let{data:e}=nu(),t=jb(),r=e?.username;return Ct({queryKey:Nn.userProfileAttributeEffect(r),queryFn:async()=>(r&&(fo.setSubjectAttributes({username:r}),await t()),!0)}),r};p();y();var wF=ee(Kr());var Aye=/^https?:\/\/.+$/,Sye=()=>{let{data:e}=nu();return(0,wF.useMemo)(()=>vF(e),[e])},vF=e=>{if(!e?.icon)return{type:_g.Default};let t=e.icon;return t.match(Aye)?{type:_g.Image,imageUrl:t}:{type:_g.Emoji,unicode:t}};p();y();var AF=ee(Kr());var Eye=()=>{let{data:e}=nu();return(0,AF.useMemo)(()=>e?.privacyState??"public",[e?.privacyState])};p();y();var SF=ee(Kr());var Iye=()=>{let{data:e}=nu();return(0,SF.useMemo)(()=>e?.addresses,[e?.addresses])};p();y();p();y();var EF=ee(Kr());var kye=async(e,t)=>{let r=await e.getUser();if(!r)throw new Error("no user");let n=await t.getUserProfile();return{userID:r.userID,username:n?.username??null}},Tye=()=>{let e=Ki(),t=St(),{data:r}=Sk();return(0,EF.useCallback)(async()=>{try{return{...await kye(e,t),authFactors:r}}catch{return{userID:null,username:null}}},[r,e,t])};p();y();var Pye=wu(ii,e=>new V2(e)),V2=class{#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};p();y();p();y();p();y();p();y();var Uk=(e,t)=>{let r=Js(e,t);switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return mi.getDisplayName(r);default:return}};var IF={badge:(e,t,r)=>t.filter(dd).length<=1?"":Uk(e,r)??"",showAddressTypeExplainer:e=>e.filter(dd).length>1};p();y();var kF={badge:(e,t)=>{switch(e){case"eip155:41454":case"eip155:10143":return se.getNetworkDefinition(e).shortName;case"eip155:143":return}},networkNameOverride:()=>"Monad"};var Bye=new pg({solana:{},ethereum:{},polygon:{},base:{},monad:kF,bitcoin:IF}),Dk=q4(Bye);p();y();var mGe=O.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});p();y();p();y();var Et=(s=>(s.Seed="seed",s.PrivateKey="privateKey",s.Ledger="ledger",s.SeedVault="seedVault",s.ReadOnly="readOnly",s.Seedless="seedless",s))(Et||{}),Cye=O.object({derivationIndex:O.number(),addresses:O.array(O.object({pathType:O.union([Sm,Em]),value:O.string()})),publicKeys:O.array(O.object({pathType:Am,value:O.string()}))}),$a=class extends Error{constructor(){super(...arguments);this.message="No account exists in storage for identifier"}},xd=class extends Error{constructor(){super(...arguments);this.message="No account exists in storage for identifier"}},Vf=class extends Error{constructor(){super(...arguments);this.message="Address type not found or incompatible with account"}},Bg=class extends Error{constructor(){super(...arguments);this.message="Hardware wallet account does not have known secr*ts"}},Cg=class extends Error{constructor(){super(...arguments);this.message="Read only account does not have known secr*ts"}},Mg=class extends Error{constructor(){super(...arguments);this.message="Invalid configuration for read only account"}},wd=class extends Error{constructor(){super(...arguments);this.message="Seed already exists in storage"}},iu=class extends Error{constructor(){super(...arguments);this.message="No seed exists in storage for identifier"}},Rg=class extends Error{constructor(){super(...arguments);this.message="The derivation index is missing or invalid"}},Og=class extends Error{constructor(){super(...arguments);this.message="Private key already exists in storage"}},vd=class extends Error{constructor(){super(...arguments);this.message="No private key exists in storage for identifier"}};var Ya=class extends Error{constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},q2=class extends Error{constructor(){super(...arguments);this.message="Vault already stores a seedless account"}},Mye=O.union([O.literal("unonboarded"),O.literal("unable-to-load-accounts")]),Rye=O.union([O.literal("invalid-identifier"),O.literal("fetch-integrity-storage-error"),O.literal("fetch-entropy-storage-error"),O.literal("fetch-pk-storage-error"),O.literal("invalid-entropy"),O.literal("invalid-pk-address-type"),O.literal("invalid-pk-identifier"),O.literal("invalid-pk"),O.literal("internal-error")]),Oye=O.literal("safely-onboarded"),Nye=O.union([O.object({status:Mye,isOnboarded:O.literal(!1),reonboardingNeeded:O.literal(!1)}),O.object({status:Rye,isOnboarded:O.literal(!0),reonboardingNeeded:O.literal(!0)}),O.object({status:Oye,isOnboarded:O.literal(!0),reonboardingNeeded:O.literal(!1)})]);var Uye=(e,t,r,n)=>{let i=[];for(let o of t){let s=se.getChainID(o);if(n.includes(s))for(let a of se[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}default:xe(c)}}}return i},Dye=(e,t,r,n)=>{let i=[];for(let o of t){let s=se.getChainID(o);if(n.includes(s))for(let a of se[s].addressTypes){if(!r.includes(a))continue;let c=e.chains[a];if(c)switch(c.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:c.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:c.publicKey,address:c.addresses[o]});break}default:xe(c)}}}return i},Lye=(e,t,r,n)=>{let i=[];for(let o of t){let s=se.getChainID(o);if(n.includes(s))for(let a of se[s].addressTypes)r.includes(a)&&e.chainType===a&&i.push({networkID:o,addressType:a,address:e.address})}return i},Kye=(e,t,r,n)=>{let i=[];for(let o of t){let s=se.getChainID(o);if(n.includes(s)){for(let a of se[s].addressTypes)if(r.includes(a)&&e.chainType===a)switch(e.chainType){case"eip155":case"solana":{i.push({networkID:o,addressType:a,address:e.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:o,addressType:a,publicKey:e.publicKey,address:e.addresses[o]});break}default:xe(e)}}}return i},Fye=(e,t,r,n)=>{let i=[];for(let o of t){let s=se.getChainID(o);if(n.includes(s)){for(let a of se[s].addressTypes)if(r.includes(a))for(let[c,u]of Object.entries(e.addresses))c===a&&i.push({networkID:o,addressType:a,address:u})}}return i},Ng=(e,t,r,n,i,o)=>{let s;switch(o?s=Object.values(i.setting):s=t,s=s.sort((a,c)=>se.compareNetworkID(a,c)),e.type){case"seedless":case"seed":return Uye(e,s,r,n);case"ledger":return Dye(e,s,r,n);case"seedVault":return Lye(e,s,r,n);case"privateKey":return Kye(e,s,r,n);case"readOnly":return Fye(e,s,r,n)}};p();y();p();y();var Q0="Trying to find a selected account, but there no accounts in the vault.",Ug="Missing ChainAvailability.",TF=(e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,Lk=new Error("The current account group has no valid bitcoin address"),Kk=new Error("The current account group has no valid EIP-155 address"),Fk=new Error("The current account group has no valid solana address"),PF=new Error("The current account group has no valid address or the the chain type was unsupported"),MGe=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),RGe=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");p();y();var Vye=[".phantom-labs.account.accountMetadata","developerMode","networkSetting",".phantom-labs.account.selectedAccount","termsHaveBeenAcknowledged2"];var DGe=new Error("Failed to clear selected account index");async function Vk(e){try{let t=await e.get(".phantom-labs.account.selectedAccount");return t?.version===2?t.identifier:null}catch{throw qye}}var qye=new Error("Failed to get selected account identifier");async function Fi(e,t){try{let r={version:2,identifier:t};return await e.set(".phantom-labs.account.selectedAccount",r)}catch{throw Hye}}var Hye=new Error("Failed to set selected account identifier");var ou=async(e,t)=>{if(e.length===0)throw new Error(Q0);let r=await Vk(t),n=e.find(i=>i.identifier===r);return n||(await Fi(t,e[0].identifier),e[0])};p();y();var qk=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":return!1}};p();y();var Wye=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};p();y();p();y();var zye=e=>e==null?!1:["ledger","seedVault"].includes(e);p();y();function _F(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw Lk;case"eip155":throw Kk;case"solana":throw Fk;default:throw PF}return n}function jye(e,t){return _F(e,t)?.address}p();y();var Gye=e=>{let t=e.toString();return mg(t)};p();y();function $ye(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}p();y();function Yye(e){return[e.endsWith(".eth")]}p();y();var Jye=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(s=>{switch(s.type){case"seed":case"seedless":return s.seedIdentifier===r;case"privateKey":return s.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:xe(s)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let o=await e.sign(i.identifier,{isJWT:!0,data:t});if(o.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in o)||!o.signedJWT)throw new Error("No JWT from vault signing.");return o.signedJWT};p();y();var Zye=async e=>[...(await e.fetchAllAccounts()).reduce((i,o)=>{switch(o.type){case"seed":case"seedless":{i.add(o.seedIdentifier);break}case"privateKey":{i.add(o.privateKeyIdentifier);break}case"ledger":case"seedVault":case"readOnly":break;default:xe(o);break}return i},new Set)];p();y();var fT=ee(Ns());p();y();p();y();function oi(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(T.NODE_ENV!=="production"){var i=ome[e],o=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function X0(e){return!!e&&!!e[ko]}function Sd(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===sme}(e)||Array.isArray(e)||!!e[DF]||!!e.constructor[DF]||Qk(e)||Xk(e))}function Lg(e,t,r){r===void 0&&(r=!1),tp(e)===0?(r?Object.keys:iT)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function tp(e){var t=e[ko];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Qk(e)?2:Xk(e)?3:0}function Gk(e,t){return tp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Qye(e,t){return tp(e)===2?e.get(t):e[t]}function LF(e,t,r){var n=tp(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function Xye(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Qk(e){return nme&&e instanceof Map}function Xk(e){return ime&&e instanceof Set}function Ad(e){return e.o||e.t}function eT(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ame(e);delete t[ko];for(var r=iT(t),n=0;n<r.length;n++){var i=r[n],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function tT(e,t){return t===void 0&&(t=!1),rT(e)||X0(e)||!Sd(e)||(tp(e)>1&&(e.set=e.add=e.clear=e.delete=eme),Object.freeze(e),t&&Lg(e,function(r,n){return tT(n,!0)},!0)),e}function eme(){oi(2)}function rT(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ja(e){var t=cme[e];return t||oi(18,e),t}function BF(){return T.NODE_ENV==="production"||ep||oi(0),ep}function Hk(e,t){t&&(Ja("Patches"),e.u=[],e.s=[],e.v=t)}function H2(e){$k(e),e.p.forEach(tme),e.p=null}function $k(e){e===ep&&(ep=e.l)}function CF(e){return ep={p:[],l:ep,h:e,m:!0,_:0}}function tme(e){var t=e[ko];t.i===0||t.i===1?t.j():t.O=!0}function Wk(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||Ja("ES5").S(t,e,n),n?(r[ko].P&&(H2(t),oi(4)),Sd(e)&&(e=W2(t,e),t.l||z2(t,e)),t.u&&Ja("Patches").M(r[ko].t,e,t.u,t.s)):e=W2(t,r,[]),H2(t),t.u&&t.v(t.u,t.s),e!==KF?e:void 0}function W2(e,t,r){if(rT(t))return t;var n=t[ko];if(!n)return Lg(t,function(o,s){return MF(e,n,t,o,s,r)},!0),t;if(n.A!==e)return t;if(!n.P)return z2(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=eT(n.k):n.o;Lg(n.i===3?new Set(i):i,function(o,s){return MF(e,n,i,o,s,r)}),z2(e,i,!1),r&&e.u&&Ja("Patches").R(n,r,e.u,e.s)}return n.o}function MF(e,t,r,n,i,o){if(T.NODE_ENV!=="production"&&i===r&&oi(5),X0(i)){var s=W2(e,i,o&&t&&t.i!==3&&!Gk(t.D,n)?o.concat(n):void 0);if(LF(r,n,s),!X0(s))return;e.m=!1}if(Sd(i)&&!rT(i)){if(!e.h.F&&e._<1)return;W2(e,i),t&&t.A.l||z2(e,i)}}function z2(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&tT(t,r)}function zk(e,t){var r=e[ko];return(r?Ad(r):e)[t]}function RF(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Yk(e){e.P||(e.P=!0,e.l&&Yk(e.l))}function jk(e){e.o||(e.o=eT(e.t))}function Jk(e,t,r){var n=Qk(t)?Ja("MapSet").N(t,r):Xk(t)?Ja("MapSet").T(t,r):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:BF(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},c=a,u=Zk;s&&(c=[a],u=Dg);var h=Proxy.revocable(c,u),l=h.revoke,g=h.proxy;return a.k=g,a.j=l,g}(t,r):Ja("ES5").J(t,r);return(r?r.A:BF()).p.push(n),n}function rme(e){return X0(e)||oi(22,e),function t(r){if(!Sd(r))return r;var n,i=r[ko],o=tp(r);if(i){if(!i.P&&(i.i<4||!Ja("ES5").K(i)))return i.t;i.I=!0,n=OF(r,o),i.I=!1}else n=OF(r,o);return Lg(n,function(s,a){i&&Qye(i.t,s)===a||LF(n,s,t(a))}),o===3?new Set(n):n}(e)}function OF(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return eT(e)}var NF,ep,nT=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",nme=typeof Map<"u",ime=typeof Set<"u",UF=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",KF=nT?Symbol.for("immer-nothing"):((NF={})["immer-nothing"]=!0,NF),DF=nT?Symbol.for("immer-draftable"):"__$immer_draftable",ko=nT?Symbol.for("immer-state"):"__$immer_state";var ome={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},sme=""+Object.prototype.constructor,iT=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ame=Object.getOwnPropertyDescriptors||function(e){var t={};return iT(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},cme={},Zk={get:function(e,t){if(t===ko)return e;var r=Ad(e);if(!Gk(r,t))return function(i,o,s){var a,c=RF(o,s);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Sd(n)?n:n===zk(e.t,t)?(jk(e),e.o[t]=Jk(e.A.h,n,e)):n},has:function(e,t){return t in Ad(e)},ownKeys:function(e){return Reflect.ownKeys(Ad(e))},set:function(e,t,r){var n=RF(Ad(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=zk(Ad(e),t),o=i?.[ko];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(Xye(r,i)&&(r!==void 0||Gk(e.t,t)))return!0;jk(e),Yk(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return zk(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,jk(e),Yk(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Ad(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){oi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){oi(12)}},Dg={};Lg(Zk,function(e,t){Dg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Dg.deleteProperty=function(e,t){return T.NODE_ENV!=="production"&&isNaN(parseInt(t))&&oi(13),Dg.set.call(this,e,t,void 0)},Dg.set=function(e,t,r){return T.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&oi(14),Zk.set.call(this,e[0],t,r,e[0])};var ume=function(){function e(r){var n=this;this.g=UF,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var c=n;return function(E){var C=this;E===void 0&&(E=a);for(var M=arguments.length,N=Array(M>1?M-1:0),R=1;R<M;R++)N[R-1]=arguments[R];return c.produce(E,function(V){var q;return(q=o).call.apply(q,[C,V].concat(N))})}}var u;if(typeof o!="function"&&oi(6),s!==void 0&&typeof s!="function"&&oi(7),Sd(i)){var h=CF(n),l=Jk(n,i,void 0),g=!0;try{u=o(l),g=!1}finally{g?H2(h):$k(h)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(E){return Hk(h,s),Wk(E,h)},function(E){throw H2(h),E}):(Hk(h,s),Wk(u,h))}if(!i||typeof i!="object"){if((u=o(i))===void 0&&(u=i),u===KF&&(u=void 0),n.F&&tT(u,!0),s){var x=[],A=[];Ja("Patches").M(i,u,x,A),s(x,A)}return u}oi(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(u){for(var h=arguments.length,l=Array(h>1?h-1:0),g=1;g<h;g++)l[g-1]=arguments[g];return n.produceWithPatches(u,function(x){return i.apply(void 0,[x].concat(l))})};var s,a,c=n.produce(i,o,function(u,h){s=u,a=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(u){return[u,s,a]}):[c,s,a]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Sd(r)||oi(8),X0(r)&&(r=rme(r));var n=CF(this),i=Jk(this,r,void 0);return i[ko].C=!0,$k(n),i},t.finishDraft=function(r,n){var i=r&&r[ko];T.NODE_ENV!=="production"&&(i&&i.C||oi(9),i.I&&oi(10));var o=i.A;return Hk(o,n),Wk(void 0,o)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!UF&&oi(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var o=n[i];if(o.path.length===0&&o.op==="replace"){r=o.value;break}}i>-1&&(n=n.slice(i+1));var s=Ja("Patches").$;return X0(r)?s(r,n):this.produce(r,function(a){return s(a,n)})},e}(),To=new ume,oT=To.produce,M$e=To.produceWithPatches.bind(To),R$e=To.setAutoFreeze.bind(To),O$e=To.setUseProxies.bind(To),N$e=To.applyPatches.bind(To),U$e=To.createDraft.bind(To),D$e=To.finishDraft.bind(To),L$e=oT;var sT=new Error("Failed to add user account metadata to storage"),Kg=new Error("Could not find account metadata in storage");async function aT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Kg;let i=n.accounts[t];i?i.name=r:(i={name:r},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function cT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Kg;let i=n.accounts[t];i?i.icon=r:(i={icon:r,name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function uT(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw Kg;let i=n.accounts[t];i?i.balance=r:(i={balance:r,name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function Za(e,t,r){try{let n=await e.get(".phantom-labs.account.accountMetadata");n?n.accounts[t]=r:n={version:1,accounts:{[t]:r}},await e.set(".phantom-labs.account.accountMetadata",n)}catch{throw sT}}async function Fg(e,t){try{let r=await e.get(".phantom-labs.account.accountMetadata");r?r.accounts=oT(r.accounts,n=>{for(let[i,o]of Object.entries(t))n[i]||(n[i]={name:""}),n[i].name=o.name,n[i].icon=o.icon??n[i].icon,n[i].balance=o.balance??n[i].balance,n[i].connectedDevices=o.connectedDevices??n[i].connectedDevices}):r={version:1,accounts:{...t}},await e.set(".phantom-labs.account.accountMetadata",r)}catch{throw sT}}async function Vg(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");r||(r={version:1,accounts:{}});let n=r.accounts[t];return n||(n={name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})}),n}async function qg(e){let t=await e.get(".phantom-labs.account.accountMetadata");return t?t.accounts:{}}async function Hg(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");if(!r)throw Kg;delete r.accounts[t],await e.set(".phantom-labs.account.accountMetadata",r)}p();y();p();y();var rp=async e=>{let t=await e.get("networkSetting");return t?fme(e,t):pd},fme=async(e,t)=>{let r=!1;lme(t)&&(r=!0);let n=t.setting.solana;n&&se.isMainnetNetworkID(n)&&(t.setting.solana=y2,r=!0);let i=t.setting.eip155;return i&&se.isMainnetNetworkID(i)&&(t.setting.eip155=m2,r=!0),r&&await e.set("networkSetting",t),t},lme=e=>{let t=!1,r=e.setting.eip155;return r&&(r.toString()==="eip155:5"&&(e.setting.eip155=Ft.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting.eip155=Ft.Polygon.Amoy,t=!0)),t};var Ed=async(e,t,r)=>{let n=await e.fetchAllAccounts();if(n.length===0)return[];let i=t.get("developerMode"),o=rp(t),s=qg(t),[a,c,u]=await Promise.all([i,o,s]);return n.map(h=>{let l=u[h.identifier];l||(l={name:vu.t("onboardingImportAccountsAccountName",{walletIndex:""})});let g={name:l.name,icon:l.icon,identifier:h.identifier,addresses:Ng(h,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,c??pd,a?.isDeveloperMode??!1)};return h.type==="seed"?{...g,type:"seed",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="seedless"?{...g,type:"seedless",seedIdentifier:h.seedIdentifier,isReadOnly:!1}:h.type==="readOnly"?{...g,type:"readOnly",isReadOnly:!0}:h.type==="privateKey"?{...g,privateKeyIdentifier:h.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...g,type:h.type,isReadOnly:!1}})};var FF=(e,t)=>{let r=Math.floor(Date.now()/1e3);return`Signing this message to claim username ${e} | Public Key: ${t} | Time: ${r}`},VF=(e,t)=>{let r=e.addresses.map(n=>{let i;switch(t.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":i=`0x${Buffer.from(t.publicKey).toString("hex")}`;break;case"solana":i=`0x${Buffer.from(fT.default.decode(t.address)).toString("hex")}`;break;case"eip155":i=t.address;break}return{networkId:n.networkID,pathType:"privateKey",publicKey:i,address:n.address}});return r.length===0?null:{accountHash:e.identifier,accountOrigin:`privateKey:${e.privateKeyIdentifier}`,derivationIndex:-1,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,addresses:r}},qF=(e,t)=>{let r=[];for(let n of e.addresses){let i=t.chains[n.addressType];if(!i)continue;let o,s;switch(i.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{o=`0x${Buffer.from(i.publicKey).toString("hex")}`,s=i.addresses["bip122:000000000019d6689c085ae165831e93"];break}case"solana":o=`0x${Buffer.from(fT.default.decode(i.address)).toString("hex")}`,s=i.address;break;case"eip155":o=i.address,s=i.address;break}let a=null;switch(!0){case(U6(i.pathType)&&se.isSolanaNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(N6(i.pathType)&&se.isEVMNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break;case(O6(i.pathType)&&se.isBitcoinNetworkID(n.networkID)):a={publicKey:o,address:s,pathType:i.pathType,networkId:n.networkID};break}a&&r.push(a)}return{accountHash:e.identifier,accountOrigin:e.type==="seed"?`seed:${e.seedIdentifier}`:`seedless:${e.seedIdentifier}`,name:e.name,icon:e.icon?.imageUrl??e.icon?.unicode??null,derivationIndex:t.derivationIndex,addresses:r}},dme=e=>{let t=L2.safeParse(e);if(t.success)return{type:"image",imageUrl:t.data};let r=K2.safeParse(e);return r.success?{type:"emoji",unicode:r.data}:{type:"default"}},hme=async(e,t)=>{let r=Object.entries(t).reduce((n,[i,o])=>(n[i]={name:o.name??"",icon:dme(o.icon)},n),{});await Fg(e,r)},pme=(e,t)=>({signMessages:async r=>{let n=[],i=await hd(t),o=await Ed(e,t,i);for(let s of o){if(!(s.type==="seed"||s.type==="privateKey"||s.type==="seedless"))continue;let a=s.identifier,c=s.addresses.find(l=>l.addressType==="solana");if(!c||c.addressType!=="solana")continue;let u=FF(r,c.address),h=await e.sign(a,{signingType:"message",chainType:c.addressType,message:FF(r,c.address)});h.status!=="error"&&n.push({networkID:c.networkID,address:c.address,message:u,signature:h.signature})}return n},getBatchAccountMetadata:async r=>{let n=new Set(r),i=await hd(t),o=await Ed(e,t,i),s=(await e.fetchAllAccounts()).reduce((c,u)=>(c[u.identifier]=u,c),{}),a={};for(let c of o){let u=s?.[c.identifier]??null,h=null;switch(c.type){case"seedless":case"seed":n.has(c.identifier)&&u.type===c.type&&(h=qF(c,u));break;case"privateKey":n.has(c.identifier)&&u.type===c.type&&(h=VF(c,u));break;case"ledger":case"seedVault":case"readOnly":break;default:xe(c)}h&&(a[c.identifier]=h)}return a},getAccountMetadata:async r=>{let n=await hd(t),i=await Ed(e,t,n),o=(await e.fetchAllAccounts()).reduce((u,h)=>(u[h.identifier]=h,u),{}),s=i.find(u=>u.identifier===r)??null;if(!s)throw new Error(`Unable to get account metadata for account at identifier ${r}`);let a=o?.[s.identifier]??null,c=null;switch(s.type){case"seedless":case"seed":a.type===s.type&&(c=qF(s,a));break;case"privateKey":a.type===s.type&&(c=VF(s,a));break;case"ledger":case"seedVault":case"readOnly":break;default:xe(s)}if(!c)throw new Error(`Unable to get account metadata for account. Syncing is not supported for account type: ${s.type}`);return c},storeSyncedAccounts:async r=>(de.addBreadcrumb("Auth",`Storing ${Object.entries(r).length} synced accounts`,"info"),await hme(t,r),de.addBreadcrumb("Auth","\u2705 Stored Synced Account metadata","info"),await e.syncAccounts(r),de.addBreadcrumb("Auth","\u2705 Stored Sync Accounts in Vault","info"),!0)});p();y();var yme=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:xe(r);return}});p();y();function mme(e){return Dk.get(e).networkNameOverride?.(e)??se.getNetworkName(e,!0)}p();y();p();y();function np(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}p();y();var Gg=ee(BV());function Wge(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Pd(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:xe(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Pd(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:xe(n)}}break;case"seedVault":break;default:xe(t)}}),e}function zge(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:xe(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:xe(n)}}break;case"seedVault":break;default:xe(t)}}),e}function CV(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&Pd(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&Pd(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:xe(t)}}),e}function MV(e){return e=(0,Gg.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:xe(t)}}),e}function Pd(e){return!!e&&typeof e=="object"&&AE("type",e)&&typeof e.type=="string"&&AE("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}p();y();var Xs=".phantom-labs.vault";var tA=`${Xs}.accounts`,cp=`${Xs}.secrets`,rA=e=>`${Xs}.privateKey.${e}`,nA=e=>`${Xs}.seed.${e}`,iA=e=>`${Xs}.seedless.${e}`,eA=`${Xs}.integrityCheck`;async function hr(e){return(await VV(e))?.accounts??[]}async function NV(e){let t=await Po(e),r=new Set(t.seedIdentifiers),n=await hr(e);for(let o of n)o.type==="seed"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function oA(e){let t=await Po(e),r=new Set(t.seedlessIdentifiers),n=await hr(e);for(let o of n)o.type==="seedless"&&r.add(o.seedIdentifier);let i=[];for(let o of r)i.push({identifier:o});return i}async function Po(e){let t=await e.generalStorage.get(cp);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function UV(e,t){let r=nA(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=iA(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new iu;return Pd(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function up(e,t){let r=rA(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new vd;return Pd(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function Si(e,t,r=!0){let n=await VV(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,o=Gge(i,t);if(o.length>0){if(!r)throw new Ya(o[0].type,t.type);let s=OV(t.type);for(let c of o)if(OV(c.type)>=s)throw new Ya(c.type,t.type);let a=o.map(c=>c.identifier);return i=i.filter(c=>!a.includes(c.identifier)),i.push(t),await ea(e,i),await IT(e)}else i.push(t);n.accounts=i}return ea(e,n.accounts)}async function ea(e,t){let r={version:1,accounts:t};return e.generalStorage.set(tA,MV(r))}async function DV(e,t){let r=rA(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Jge(e,t.identifier)}async function LV(e,t){let r=nA(t.identifier);await e.secretsStorage.setSecureValue(r,t),await $ge(e,t.identifier)}async function KV(e,t){let r=iA(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Yge(e,t.identifier)}async function IT(e){let t=await hr(e),r=new Set,n=new Set;for(let a of t)switch(a.type){case"seed":case"seedless":r.add(a.seedIdentifier);break;case"privateKey":n.add(a.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:xe(a)}let i=await Po(e),o={seedIdentifiers:i.seedIdentifiers.filter(a=>r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>n.has(a))},s={seedIdentifiers:i.seedIdentifiers.filter(a=>!r.has(a)),seedlessIdentifiers:i.seedlessIdentifiers.filter(a=>!r.has(a)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(a=>!n.has(a))};await e.generalStorage.set(cp,{version:1,...o}),await e.secretsStorage.removeSecureValue([...s.seedIdentifiers.map(a=>nA(a)),...s.seedlessIdentifiers.map(a=>iA(a)),...s.privateKeyIdentifiers.map(a=>rA(a))])}async function kT(e,t){t?await e.secretsStorage.setSecureValue(eA,t):await e.secretsStorage.removeSecureValue(eA)}async function TT(e){return e.secretsStorage.getSecureValue(eA)}async function FV(e){await e.generalStorage.remove(tA);let t=await Po(e),r=t.privateKeyIdentifiers.map(o=>rA(o)),n=t.seedIdentifiers.map(o=>nA(o)),i=t.seedlessIdentifiers.map(o=>iA(o));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(cp),await e.secretsStorage.removeSecureValue(eA),await e.secureCache.clear()}async function VV(e){let t=await e.generalStorage.get(tA);return t?(t=CV(t),t=await jge(e,t),t):null}async function jge(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=RV(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=RV(i)||r});break;case"seedVault":break;default:xe(n)}}),r&&await ea(e,t.accounts),t}function RV(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(sn).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=ro({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function Gge(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(o=>{switch(o.chainType){case"eip155":case"solana":{n.push(o.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(o.publicKey);break}default:xe(o)}});break}case"readOnly":{Object.values(t.addresses).forEach(o=>{n.push(o)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}default:xe(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(o=>{throw new Error("unknown account type")})(t)}let i=[];for(let o of e){let s;switch(o.type){case"seed":case"seedless":case"ledger":{s=Object.values(o.chains).some(a=>{switch(a.chainType){case"eip155":case"solana":return!!n.find(c=>np(c,a.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return!!r.find(c=>np(c,a.publicKey));default:xe(a)}});break}case"readOnly":{s=Object.values(o.addresses).some(a=>!!n.find(c=>np(c,a)));break}case"privateKey":{s=!!n.find(a=>np(a,o.publicKey));break}case"seedVault":{s=!!n.find(a=>np(a,o.publicKey));break}default:(a=>{throw new Error("unknown account type")})(o)}s&&i.push(o)}return i}async function $ge(e,t){let r=await Po(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(cp,{version:1,...r})}async function Yge(e,t){let r=await Po(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(cp,{version:1,...r})}async function Jge(e,t){let r=await Po(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(cp,{version:1,...r})}function OV(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}p();y();p();y();var io=ee(Zr());p();y();p();y();p();y();p();y();p();y();function qV(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function PT(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function HV(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");qV(e.outputLen),qV(e.blockLen)}function fp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function WV(e,t){PT(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();p();y();var sA=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var zV=e=>e instanceof Uint8Array;var aA=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ta=(e,t)=>e<<32-t|e>>>t,Zge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Zge)throw new Error("Non little-endian hardware is not supported");function Qge(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function $g(e){if(typeof e=="string"&&(e=Qge(e)),!zV(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function jV(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!zV(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var lp=class{clone(){return this._cloneInto()}},lJe={}.toString;function cA(e){let t=n=>e().update($g(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function uA(e=32){if(sA&&typeof sA.getRandomValues=="function")return sA.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Xge(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var dp=class extends lp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=aA(this.buffer)}update(t){fp(this);let{view:r,buffer:n,blockLen:i}=this;t=$g(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=aA(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){fp(this),WV(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;Xge(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=aA(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var ebe=(e,t,r)=>e&t^~e&r,tbe=(e,t,r)=>e&t^e&r^t&r,rbe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wf=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zf=new Uint32Array(64),_T=class extends dp{constructor(){super(64,32,8,!1),this.A=Wf[0]|0,this.B=Wf[1]|0,this.C=Wf[2]|0,this.D=Wf[3]|0,this.E=Wf[4]|0,this.F=Wf[5]|0,this.G=Wf[6]|0,this.H=Wf[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)zf[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=zf[l-15],x=zf[l-2],A=ta(g,7)^ta(g,18)^g>>>3,E=ta(x,17)^ta(x,19)^x>>>10;zf[l]=E+zf[l-7]+A+zf[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=ta(a,6)^ta(a,11)^ta(a,25),x=h+g+ebe(a,c,u)+rbe[l]+zf[l]|0,E=(ta(n,2)^ta(n,13)^ta(n,22))+tbe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){zf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ei=cA(()=>new _T);p();y();var RT={};xE(RT,{bitGet:()=>ube,bitLen:()=>cbe,bitMask:()=>Yg,bitSet:()=>fbe,bytesToHex:()=>_d,bytesToNumberBE:()=>si,bytesToNumberLE:()=>dA,concatBytes:()=>cu,createHmacDrbg:()=>MT,ensureBytes:()=>mn,equalBytes:()=>sbe,hexToBytes:()=>Bd,hexToNumber:()=>CT,numberToBytesBE:()=>ra,numberToBytesLE:()=>hA,numberToHexUnpadded:()=>YV,numberToVarBytesBE:()=>obe,utf8ToBytes:()=>abe,validateObject:()=>jf});p();y();var $V=BigInt(0),fA=BigInt(1),nbe=BigInt(2),lA=e=>e instanceof Uint8Array,ibe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function _d(e){if(!lA(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=ibe[e[r]];return t}function YV(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function CT(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Bd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let i=n*2,o=e.slice(i,i+2),s=Number.parseInt(o,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");r[n]=s}return r}function si(e){return CT(_d(e))}function dA(e){if(!lA(e))throw new Error("Uint8Array expected");return CT(_d(Uint8Array.from(e).reverse()))}function ra(e,t){return Bd(e.toString(16).padStart(t*2,"0"))}function hA(e,t){return ra(e,t).reverse()}function obe(e){return Bd(YV(e))}function mn(e,t,r){let n;if(typeof t=="string")try{n=Bd(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(lA(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function cu(...e){let t=new Uint8Array(e.reduce((n,i)=>n+i.length,0)),r=0;return e.forEach(n=>{if(!lA(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function sbe(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function abe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function cbe(e){let t;for(t=0;e>$V;e>>=fA,t+=1);return t}function ube(e,t){return e>>BigInt(t)&fA}var fbe=(e,t,r)=>e|(r?fA:$V)<<BigInt(t),Yg=e=>(nbe<<BigInt(e-1))-fA,BT=e=>new Uint8Array(e),GV=e=>Uint8Array.from(e);function MT(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=BT(e),i=BT(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=BT())=>{i=a(GV([0]),l),n=a(),l.length!==0&&(i=a(GV([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,g=[];for(;l<t;){n=a();let x=n.slice();g.push(x),l+=n.length}return cu(...g)};return(l,g)=>{s(),c(l);let x;for(;!(x=g(u()));)c();return s(),x}}var lbe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function jf(e,t,r={}){let n=(i,o,s)=>{let a=lbe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var bn=BigInt(0),Hr=BigInt(1),Cd=BigInt(2),dbe=BigInt(3),OT=BigInt(4),JV=BigInt(5),ZV=BigInt(8),hbe=BigInt(9),pbe=BigInt(16);function gn(e,t){let r=e%t;return r>=bn?r:t+r}function ybe(e,t,r){if(r<=bn||t<bn)throw new Error("Expected power/modulo > 0");if(r===Hr)return bn;let n=Hr;for(;t>bn;)t&Hr&&(n=n*e%r),e=e*e%r,t>>=Hr;return n}function _o(e,t,r){let n=e;for(;t-- >bn;)n*=n,n%=r;return n}function pA(e,t){if(e===bn||t<=bn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=gn(e,t),n=t,i=bn,o=Hr,s=Hr,a=bn;for(;r!==bn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Hr)throw new Error("invert: does not exist");return gn(i,t)}function mbe(e){let t=(e-Hr)/Cd,r,n,i;for(r=e-Hr,n=0;r%Cd===bn;r/=Cd,n++);for(i=Cd;i<e&&ybe(i,t,e)!==e-Hr;i++);if(n===1){let s=(e+Hr)/OT;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+Hr)/Cd;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),g=a.pow(c,r);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let x=1;for(let E=a.sqr(g);x<u&&!a.eql(E,a.ONE);x++)E=a.sqr(E);let A=a.pow(h,Hr<<BigInt(u-x-1));h=a.sqr(A),l=a.mul(l,A),g=a.mul(g,h),u=x}return l}}function gbe(e){if(e%OT===dbe){let t=(e+Hr)/OT;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%ZV===JV){let t=(e-JV)/ZV;return function(n,i){let o=n.mul(i,Cd),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,Cd),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%pbe,mbe(e)}var bbe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NT(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=bbe.reduce((n,i)=>(n[i]="function",n),t);return jf(e,r)}function xbe(e,t,r){if(r<bn)throw new Error("Expected power > 0");if(r===bn)return e.ONE;if(r===Hr)return t;let n=e.ONE,i=t;for(;r>bn;)r&Hr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Hr;return n}function wbe(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function UT(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function QV(e,t,r=!1,n={}){if(e<=bn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=UT(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=gbe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Yg(i),ZERO:bn,ONE:Hr,create:c=>gn(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return bn<=c&&c<e},is0:c=>c===bn,isOdd:c=>(c&Hr)===Hr,neg:c=>gn(-c,e),eql:(c,u)=>c===u,sqr:c=>gn(c*c,e),add:(c,u)=>gn(c+u,e),sub:(c,u)=>gn(c-u,e),mul:(c,u)=>gn(c*u,e),pow:(c,u)=>xbe(a,c,u),div:(c,u)=>gn(c*pA(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>pA(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>wbe(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?hA(c,o):ra(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?dA(c):si(c)}});return Object.freeze(a)}function XV(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function DT(e){let t=XV(e);return t+Math.ceil(t/2)}function eq(e,t,r=!1){let n=e.length,i=XV(t),o=DT(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?si(e):dA(e),a=gn(s,t-Hr)+Hr;return r?hA(a,i):ra(a,i)}p();y();p();y();var Abe=BigInt(0),LT=BigInt(1);function tq(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>Abe;)o&LT&&(s=s.add(a)),a=a.double(),o>>=LT;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let l=0;l<s;l++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,l=BigInt(2**i-1),g=2**i,x=BigInt(i);for(let A=0;A<a;A++){let E=A*c,C=Number(s&l);s>>=x,C>c&&(C-=g,s+=LT);let M=E,N=E+Math.abs(C)-1,R=A%2!==0,V=C<0;C===0?h=h.add(r(R,o[M])):u=u.add(r(V,o[N]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function KT(e){return NT(e.Fp),jf(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...UT(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Sbe(e){let t=KT(e);jf(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:Ebe,hexToBytes:Ibe}=RT,Md={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Md;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Ebe(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Md,r=typeof e=="string"?Ibe(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=Md._parseInt(r.subarray(2)),{d:s,l:a}=Md._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},uu=BigInt(0),us=BigInt(1),LJe=BigInt(2),rq=BigInt(3),KJe=BigInt(4);function kbe(e){let t=Sbe(e),{Fp:r}=t,n=t.toBytes||((A,E,C)=>{let M=E.toAffine();return cu(Uint8Array.from([4]),r.toBytes(M.x),r.toBytes(M.y))}),i=t.fromBytes||(A=>{let E=A.subarray(1),C=r.fromBytes(E.subarray(0,r.BYTES)),M=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:C,y:M}});function o(A){let{a:E,b:C}=t,M=r.sqr(A),N=r.mul(M,A);return r.add(r.add(N,r.mul(A,E)),C)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(A){return typeof A=="bigint"&&uu<A&&A<t.n}function a(A){if(!s(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){let{allowedPrivateKeyLengths:E,nByteLength:C,wrapPrivateKey:M,n:N}=t;if(E&&typeof A!="bigint"){if(A instanceof Uint8Array&&(A=_d(A)),typeof A!="string"||!E.includes(A.length))throw new Error("Invalid key");A=A.padStart(C*2,"0")}let R;try{R=typeof A=="bigint"?A:si(mn("private key",A,C))}catch{throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof A}`)}return M&&(R=gn(R,N)),a(R),R}let u=new Map;function h(A){if(!(A instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(E,C,M){if(this.px=E,this.py=C,this.pz=M,E==null||!r.isValid(E))throw new Error("x required");if(C==null||!r.isValid(C))throw new Error("y required");if(M==null||!r.isValid(M))throw new Error("z required")}static fromAffine(E){let{x:C,y:M}=E||{};if(!E||!r.isValid(C)||!r.isValid(M))throw new Error("invalid affine point");if(E instanceof l)throw new Error("projective point not allowed");let N=R=>r.eql(R,r.ZERO);return N(C)&&N(M)?l.ZERO:new l(C,M,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let C=r.invertBatch(E.map(M=>M.pz));return E.map((M,N)=>M.toAffine(C[N])).map(l.fromAffine)}static fromHex(E){let C=l.fromAffine(i(mn("pointHex",E)));return C.assertValidity(),C}static fromPrivateKey(E){return l.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:E,y:C}=this.toAffine();if(!r.isValid(E)||!r.isValid(C))throw new Error("bad point: x or y not FE");let M=r.sqr(C),N=o(E);if(!r.eql(M,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.eql(r.mul(C,q),r.mul(R,N)),G=r.eql(r.mul(M,q),r.mul(V,N));return W&&G}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:E,b:C}=t,M=r.mul(C,rq),{px:N,py:R,pz:V}=this,q=r.ZERO,W=r.ZERO,G=r.ZERO,z=r.mul(N,N),te=r.mul(R,R),_=r.mul(V,V),f=r.mul(N,R);return f=r.add(f,f),G=r.mul(N,V),G=r.add(G,G),q=r.mul(E,G),W=r.mul(M,_),W=r.add(q,W),q=r.sub(te,W),W=r.add(te,W),W=r.mul(q,W),q=r.mul(f,q),G=r.mul(M,G),_=r.mul(E,_),f=r.sub(z,_),f=r.mul(E,f),f=r.add(f,G),G=r.add(z,z),z=r.add(G,z),z=r.add(z,_),z=r.mul(z,f),W=r.add(W,z),_=r.mul(R,V),_=r.add(_,_),z=r.mul(_,f),q=r.sub(q,z),G=r.mul(_,te),G=r.add(G,G),G=r.add(G,G),new l(q,W,G)}add(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.ZERO,G=r.ZERO,z=r.ZERO,te=t.a,_=r.mul(t.b,rq),f=r.mul(C,R),m=r.mul(M,V),b=r.mul(N,q),w=r.add(C,M),v=r.add(R,V);w=r.mul(w,v),v=r.add(f,m),w=r.sub(w,v),v=r.add(C,N);let P=r.add(R,q);return v=r.mul(v,P),P=r.add(f,b),v=r.sub(v,P),P=r.add(M,N),W=r.add(V,q),P=r.mul(P,W),W=r.add(m,b),P=r.sub(P,W),z=r.mul(te,v),W=r.mul(_,b),z=r.add(W,z),W=r.sub(m,z),z=r.add(m,z),G=r.mul(W,z),m=r.add(f,f),m=r.add(m,f),b=r.mul(te,b),v=r.mul(_,v),m=r.add(m,b),b=r.sub(f,b),b=r.mul(te,b),v=r.add(v,b),f=r.mul(m,v),G=r.add(G,f),f=r.mul(P,v),W=r.mul(w,W),W=r.sub(W,f),f=r.mul(w,m),z=r.mul(P,z),z=r.add(z,f),new l(W,G,z)}subtract(E){return this.add(E.negate())}is0(){return this.equals(l.ZERO)}wNAF(E){return x.wNAFCached(this,u,E,C=>{let M=r.invertBatch(C.map(N=>N.pz));return C.map((N,R)=>N.toAffine(M[R])).map(l.fromAffine)})}multiplyUnsafe(E){let C=l.ZERO;if(E===uu)return C;if(a(E),E===us)return this;let{endo:M}=t;if(!M)return x.unsafeLadder(this,E);let{k1neg:N,k1:R,k2neg:V,k2:q}=M.splitScalar(E),W=C,G=C,z=this;for(;R>uu||q>uu;)R&us&&(W=W.add(z)),q&us&&(G=G.add(z)),z=z.double(),R>>=us,q>>=us;return N&&(W=W.negate()),V&&(G=G.negate()),G=new l(r.mul(G.px,M.beta),G.py,G.pz),W.add(G)}multiply(E){a(E);let C=E,M,N,{endo:R}=t;if(R){let{k1neg:V,k1:q,k2neg:W,k2:G}=R.splitScalar(C),{p:z,f:te}=this.wNAF(q),{p:_,f}=this.wNAF(G);z=x.constTimeNegate(V,z),_=x.constTimeNegate(W,_),_=new l(r.mul(_.px,R.beta),_.py,_.pz),M=z.add(_),N=te.add(f)}else{let{p:V,f:q}=this.wNAF(C);M=V,N=q}return l.normalizeZ([M,N])[0]}multiplyAndAddUnsafe(E,C,M){let N=l.BASE,R=(q,W)=>W===uu||W===us||!q.equals(N)?q.multiplyUnsafe(W):q.multiply(W),V=R(this,C).add(R(E,M));return V.is0()?void 0:V}toAffine(E){let{px:C,py:M,pz:N}=this,R=this.is0();E==null&&(E=R?r.ONE:r.inv(N));let V=r.mul(C,E),q=r.mul(M,E),W=r.mul(N,E);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(W,r.ONE))throw new Error("invZ was invalid");return{x:V,y:q}}isTorsionFree(){let{h:E,isTorsionFree:C}=t;if(E===us)return!0;if(C)return C(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:C}=t;return E===us?this:C?C(l,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(l,this,E)}toHex(E=!0){return _d(this.toRawBytes(E))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,x=tq(l,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Tbe(e){let t=KT(e);return jf(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function nq(e){let t=Tbe(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(v){return uu<v&&v<r.ORDER}function a(v){return gn(v,n)}function c(v){return pA(v,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:g}=kbe({...t,toBytes(v,P,B){let k=P.toAffine(),d=r.toBytes(k.x),S=cu;return B?S(Uint8Array.from([P.hasEvenY()?2:3]),d):S(Uint8Array.from([4]),d,r.toBytes(k.y))},fromBytes(v){let P=v.length,B=v[0],k=v.subarray(1);if(P===i&&(B===2||B===3)){let d=si(k);if(!s(d))throw new Error("Point is not on curve");let S=l(d),F=r.sqrt(S),U=(F&us)===us;return(B&1)===1!==U&&(F=r.neg(F)),{x:d,y:F}}else if(P===o&&B===4){let d=r.fromBytes(k.subarray(0,r.BYTES)),S=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:d,y:S}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),x=v=>_d(ra(v,t.nByteLength));function A(v){let P=n>>us;return v>P}function E(v){return A(v)?a(-v):v}let C=(v,P,B)=>si(v.slice(P,B));class M{constructor(P,B,k){this.r=P,this.s=B,this.recovery=k,this.assertValidity()}static fromCompact(P){let B=t.nByteLength;return P=mn("compactSignature",P,B*2),new M(C(P,0,B),C(P,B,2*B))}static fromDER(P){let{r:B,s:k}=Md.toSig(mn("DER",P));return new M(B,k)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new M(this.r,this.s,P)}recoverPublicKey(P){let{r:B,s:k,recovery:d}=this,S=G(mn("msgHash",P));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let F=d===2||d===3?B+t.n:B;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let U=d&1?"03":"02",D=u.fromHex(U+x(F)),Y=c(F),j=a(-S*Y),X=a(k*Y),fe=u.BASE.multiplyAndAddUnsafe(D,j,X);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bd(this.toDERHex())}toDERHex(){return Md.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bd(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}let N={isValidPrivateKey(v){try{return h(v),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let v=DT(t.n);return eq(t.randomBytes(v),t.n)},precompute(v=8,P=u.BASE){return P._setWindowSize(v),P.multiply(BigInt(3)),P}};function R(v,P=!0){return u.fromPrivateKey(v).toRawBytes(P)}function V(v){let P=v instanceof Uint8Array,B=typeof v=="string",k=(P||B)&&v.length;return P?k===i||k===o:B?k===2*i||k===2*o:v instanceof u}function q(v,P,B=!0){if(V(v))throw new Error("first arg must be private key");if(!V(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(h(v)).toRawBytes(B)}let W=t.bits2int||function(v){let P=si(v),B=v.length*8-t.nBitLength;return B>0?P>>BigInt(B):P},G=t.bits2int_modN||function(v){return a(W(v))},z=Yg(t.nBitLength);function te(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(uu<=v&&v<z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ra(v,t.nByteLength)}function _(v,P,B=f){if(["recovered","canonical"].some(K=>K in B))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:d}=t,{lowS:S,prehash:F,extraEntropy:U}=B;S==null&&(S=!0),v=mn("msgHash",v),F&&(v=mn("prehashed msgHash",k(v)));let D=G(v),Y=h(P),j=[te(Y),te(D)];if(U!=null){let K=U===!0?d(r.BYTES):U;j.push(mn("extraEntropy",K))}let X=cu(...j),fe=D;function ue(K){let Z=W(K);if(!g(Z))return;let J=c(Z),ne=u.BASE.multiply(Z).toAffine(),pe=a(ne.x);if(pe===uu)return;let re=a(J*a(fe+pe*Y));if(re===uu)return;let ae=(ne.x===pe?0:2)|Number(ne.y&us),ut=re;return S&&A(re)&&(ut=E(re),ae^=1),new M(pe,ut,ae)}return{seed:X,k2sig:ue}}let f={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(v,P,B=f){let{seed:k,k2sig:d}=_(v,P,B),S=t;return MT(S.hash.outputLen,S.nByteLength,S.hmac)(k,d)}u.BASE._setWindowSize(8);function w(v,P,B,k=m){let d=v;if(P=mn("msgHash",P),B=mn("publicKey",B),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:F}=k,U,D;try{if(typeof d=="string"||d instanceof Uint8Array)try{U=M.fromDER(d)}catch(ne){if(!(ne instanceof Md.Err))throw ne;U=M.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:ne,s:pe}=d;U=new M(ne,pe)}else throw new Error("PARSE");D=u.fromHex(B)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&U.hasHighS())return!1;F&&(P=t.hash(P));let{r:Y,s:j}=U,X=G(P),fe=c(j),ue=a(X*fe),K=a(Y*fe),Z=u.BASE.multiplyAndAddUnsafe(D,ue,K)?.toAffine();return Z?a(Z.x)===Y:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:q,sign:b,verify:w,ProjectivePoint:u,Signature:M,utils:N}}p();y();p();y();var yA=class extends lp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,HV(t);let n=$g(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return fp(this),this.iHash.update(t),this}digestInto(t){fp(this),PT(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},FT=(e,t,r)=>new yA(e,t).update(r).digest();FT.create=(e,t)=>new yA(e,t);function Pbe(e){return{hash:e,hmac:(t,...r)=>FT(e,t,jV(...r)),randomBytes:uA}}function iq(e,t){let r=n=>nq({...e,...Pbe(n)});return Object.freeze({...r(t),create:r})}var xA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aq=BigInt(1),gA=BigInt(2),oq=(e,t)=>(e+t/gA)/t;function cq(e){let t=xA,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,l=_o(h,r,t)*h%t,g=_o(l,r,t)*h%t,x=_o(g,gA,t)*u%t,A=_o(x,i,t)*x%t,E=_o(A,o,t)*A%t,C=_o(E,a,t)*E%t,M=_o(C,c,t)*C%t,N=_o(M,a,t)*E%t,R=_o(N,r,t)*h%t,V=_o(R,s,t)*A%t,q=_o(V,n,t)*u%t,W=_o(q,gA,t);if(!qT.eql(qT.sqr(W),e))throw new Error("Cannot find square root");return W}var qT=QV(xA,void 0,void 0,{sqrt:cq}),hp=iq({a:BigInt(0),b:BigInt(7),Fp:qT,n:mA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=mA,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-aq*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=oq(o*e,t),c=oq(-n*e,t),u=gn(e-a*r-c*i,t),h=gn(-a*n-c*o,t),l=u>s,g=h>s;if(l&&(u=t-u),g&&(h=t-h),u>s||h>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:g,k2:h}}}},Ei),wA=BigInt(0),uq=e=>typeof e=="bigint"&&wA<e&&e<xA,_be=e=>typeof e=="bigint"&&wA<e&&e<mA,sq={};function bA(e,...t){let r=sq[e];if(r===void 0){let n=Ei(Uint8Array.from(e,i=>i.charCodeAt(0)));r=cu(n,n),sq[e]=r}return Ei(cu(r,...t))}var zT=e=>e.toRawBytes(!0).slice(1),HT=e=>ra(e,32),VT=e=>gn(e,xA),Jg=e=>gn(e,mA),jT=hp.ProjectivePoint,Bbe=(e,t,r)=>jT.BASE.multiplyAndAddUnsafe(e,t,r);function WT(e){let t=hp.utils.normPrivateKeyToScalar(e),r=jT.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:Jg(-t),bytes:zT(r)}}function fq(e){if(!uq(e))throw new Error("bad x: need 0 < x < p");let t=VT(e*e),r=VT(t*e+BigInt(7)),n=cq(r);n%gA!==wA&&(n=VT(-n));let i=new jT(e,n,aq);return i.assertValidity(),i}function lq(...e){return Jg(si(bA("BIP0340/challenge",...e)))}function Cbe(e){return WT(e).bytes}function Mbe(e,t,r=uA(32)){let n=mn("message",e),{bytes:i,scalar:o}=WT(t),s=mn("auxRand",r,32),a=HT(o^si(bA("BIP0340/aux",s))),c=bA("BIP0340/nonce",a,i,n),u=Jg(si(c));if(u===wA)throw new Error("sign failed: k is zero");let{bytes:h,scalar:l}=WT(u),g=lq(h,i,n),x=new Uint8Array(64);if(x.set(h,0),x.set(HT(Jg(l+g*o)),32),!dq(x,n,i))throw new Error("sign: Invalid signature produced");return x}function dq(e,t,r){let n=mn("signature",e,64),i=mn("message",t),o=mn("publicKey",r,32);try{let s=fq(si(o)),a=si(n.subarray(0,32));if(!uq(a))return!1;let c=si(n.subarray(32,64));if(!_be(c))return!1;let u=lq(HT(a),zT(s),i),h=Bbe(s,c,Jg(-u));return!(!h||!h.hasEvenY()||h.toAffine().x!==a)}catch{return!1}}var Bo={getPublicKey:Cbe,sign:Mbe,verify:dq,utils:{randomPrivateKey:hp.utils.randomPrivateKey,lift_x:fq,pointToBytes:zT,numberToBytesBE:ra,bytesToNumberBE:si,taggedHash:bA,mod:gn}};p();y();var Rbe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),pq=Uint8Array.from({length:16},(e,t)=>t),Obe=pq.map(e=>(9*e+5)%16),$T=[pq],YT=[Obe];for(let e=0;e<4;e++)for(let t of[$T,YT])t.push(t[e].map(r=>Rbe[r]));var yq=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Nbe=$T.map((e,t)=>e.map(r=>yq[t][r])),Ube=YT.map((e,t)=>e.map(r=>yq[t][r])),Dbe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Lbe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),vA=(e,t)=>e<<t|e>>>32-t;function hq(e,t,r,n){return e===0?t^r^n:e===1?t&r|~t&n:e===2?(t|~r)^n:e===3?t&n|r&~n:t^(r|~n)}var AA=new Uint32Array(16),GT=class extends dp{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:t,h1:r,h2:n,h3:i,h4:o}=this;return[t,r,n,i,o]}set(t,r,n,i,o){this.h0=t|0,this.h1=r|0,this.h2=n|0,this.h3=i|0,this.h4=o|0}process(t,r){for(let x=0;x<16;x++,r+=4)AA[x]=t.getUint32(r,!0);let n=this.h0|0,i=n,o=this.h1|0,s=o,a=this.h2|0,c=a,u=this.h3|0,h=u,l=this.h4|0,g=l;for(let x=0;x<5;x++){let A=4-x,E=Dbe[x],C=Lbe[x],M=$T[x],N=YT[x],R=Nbe[x],V=Ube[x];for(let q=0;q<16;q++){let W=vA(n+hq(x,o,a,u)+AA[M[q]]+E,R[q])+l|0;n=l,l=u,u=vA(a,10)|0,a=o,o=W}for(let q=0;q<16;q++){let W=vA(i+hq(A,s,c,h)+AA[N[q]]+C,V[q])+g|0;i=g,g=h,h=vA(c,10)|0,c=s,s=W}}this.set(this.h1+a+h|0,this.h2+u+g|0,this.h3+l+i|0,this.h4+n+s|0,this.h0+o+c|0)}roundClean(){AA.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},mq=cA(()=>new GT);p();y();function pp(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function EA(...e){let t=(i,o)=>s=>i(o(s)),r=Array.from(e).reverse().reduce((i,o)=>i?t(i,o.encode):o.encode,void 0),n=e.reduce((i,o)=>i?t(i,o.decode):o.decode,void 0);return{encode:r,decode:n}}function QT(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function XT(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Kbe(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function gq(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(s=>{if(s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,a=!0;for(let c=n;c<o.length;c++){let u=o[c],h=t*s+u;if(!Number.isSafeInteger(h)||t*s/t!==s||h-u!==t*s)throw new Error("convertRadix: carry overflow");s=h%r;let l=Math.floor(h/r);if(o[c]=l,!Number.isSafeInteger(l)||l*r+s!==h)throw new Error("convertRadix: carry overflow");if(a)l?a=!1:n=c;else continue}if(i.push(s),a)break}for(let s=0;s<e.length-1&&e[s]===0;s++)i.push(0);return i.reverse()}var vq=(e,t)=>t?vq(t,e%t):e,SA=(e,t)=>e+(t-vq(e,t));function JT(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(SA(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${SA(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let c of e){if(c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function Fbe(e){return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return gq(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(gq(t,e,2**8))}}}function Aq(e,t=!1){if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(SA(8,e)>32||SA(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return JT(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(JT(r,e,8,t))}}}function bq(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}function Vbe(e,t){if(typeof t!="function")throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let s=0;s<e;s++)if(i[s]!==o[s])throw new Error("Invalid checksum");return n}}}var qbe=e=>EA(Fbe(58),QT(e),XT("")),Hbe=qbe("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Sq=e=>EA(Vbe(4,t=>e(e(t))),Hbe),ZT=EA(QT("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),XT("")),xq=[996825010,642813549,513874426,1027748829,705979059];function Zg(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<xq.length;n++)(t>>n&1)===1&&(r^=xq[n]);return r}function wq(e,t,r=1){let n=e.length,i=1;for(let o=0;o<n;o++){let s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=Zg(i)^s>>5}i=Zg(i);for(let o=0;o<n;o++)i=Zg(i)^e.charCodeAt(o)&31;for(let o of t)i=Zg(i)^o;for(let o=0;o<6;o++)i=Zg(i);return i^=r,ZT.encode(JT([i%2**30],30,5,!1))}function Eq(e){let t=e==="bech32"?1:734539939,r=Aq(5),n=r.decode,i=r.encode,o=bq(n);function s(h,l,g=90){if(typeof h!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof h}`);if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof l}`);let x=h.length+7+l.length;if(g!==!1&&x>g)throw new TypeError(`Length ${x} exceeds limit ${g}`);let A=h.toLowerCase(),E=wq(A,l,t);return`${A}1${ZT.encode(l)}${E}`}function a(h,l=90){if(typeof h!="string")throw new Error(`bech32.decode input should be string, not ${typeof h}`);if(h.length<8||l!==!1&&h.length>l)throw new TypeError(`Wrong string length: ${h.length} (${h}). Expected (8..${l})`);let g=h.toLowerCase();if(h!==g&&h!==h.toUpperCase())throw new Error("String must be lowercase or uppercase");h=g;let x=h.lastIndexOf("1");if(x===0||x===-1)throw new Error('Letter "1" must be present between prefix and data only');let A=h.slice(0,x),E=h.slice(x+1);if(E.length<6)throw new Error("Data must be at least 6 characters long");let C=ZT.decode(E).slice(0,-6),M=wq(A,C,t);if(!E.endsWith(M))throw new Error(`Invalid checksum in ${h}: expected "${M}"`);return{prefix:A,words:C}}let c=bq(a);function u(h){let{prefix:l,words:g}=a(h,!1);return{prefix:l,words:g,bytes:n(g)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:c,fromWords:n,fromWordsUnsafe:o,toWords:i}}var IA=Eq("bech32"),eP=Eq("bech32m"),tP={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Dr=EA(Aq(4),QT("0123456789abcdef"),XT(""),Kbe(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));p();y();var Lr=new Uint8Array,CA=new Uint8Array([0]);function pr(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function kA(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Co=e=>e instanceof Uint8Array,TA=class{constructor(t,r=[],n=[]){this.data=t,this.path=r,this.fieldPath=n,this.pos=0,this.hasPtr=!1,this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Reader(${this.fieldPath.join("/")}): ${t}`)}absBytes(t){if(t>this.data.length)throw new Error("absBytes: Unexpected end of buffer");return this.data.subarray(t)}bytes(t,r=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(t))throw this.err(`readBytes: wrong length=${t}`);if(this.pos+t>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let n=this.data.subarray(this.pos,this.pos+t);return r||(this.pos+=t),n}byte(t=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");return this.data[t?this.pos:this.pos++]}get leftBytes(){return this.data.length-this.pos}isEnd(){return this.pos>=this.data.length&&!this.bitPos}length(t){let r;if(Gf(t)?r=Number(t.decodeStream(this)):typeof t=="number"?r=t:typeof t=="string"&&(r=BA(this.path,t.split("/"))),typeof r=="bigint"&&(r=Number(r)),typeof r!="number")throw this.err(`Wrong length: ${r}`);return r}bits(t){if(t>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let r=0;for(;t;){this.bitPos||(this.bitBuf=this.data[this.pos++],this.bitPos=8);let n=Math.min(t,this.bitPos);this.bitPos-=n,r=r<<n|this.bitBuf>>this.bitPos&2**n-1,this.bitBuf&=2**this.bitPos-1,t-=n}return r>>>0}find(t,r=this.pos){if(!Co(t))throw this.err(`find: needle is not bytes! ${t}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!t.length)throw this.err("find: needle is empty");for(let n=r;(n=this.data.indexOf(t[0],n))!==-1;n++){if(n===-1||this.data.length-n<t.length)return;if(pr(t,this.data.subarray(n,n+t.length)))return n}}finish(){if(!(this.isEnd()||this.hasPtr))throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${Dr.encode(this.data.slice(this.pos))}`)}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},PA=class{constructor(t=[],r=[]){this.path=t,this.fieldPath=r,this.buffers=[],this.pos=0,this.ptrs=[],this.bitBuf=0,this.bitPos=0}err(t){return new Error(`Writer(${this.fieldPath.join("/")}): ${t}`)}bytes(t){if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(t),this.pos+=t.length}byte(t){if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([t])),this.pos++}get buffer(){if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=kA(...this.buffers);for(let r of this.ptrs){let n=t.length;t=kA(t,r.buffer);let i=r.ptr.encode(n);for(let o=0;o<i.length;o++)t[r.pos+o]=i[o]}return t}length(t,r){if(t===null)return;if(Gf(t))return t.encodeStream(this,r);let n;if(typeof t=="number"?n=t:typeof t=="string"&&(n=BA(this.path,t.split("/"))),typeof n=="bigint"&&(n=Number(n)),n===void 0||n!==r)throw this.err(`Wrong length: ${n} len=${t} exp=${r}`)}bits(t,r){if(r>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(t>=2**r)throw this.err(`writeBits: value (${t}) >= 2**bits (${r})`);for(;r;){let n=Math.min(r,8-this.bitPos);this.bitBuf=this.bitBuf<<n|t>>r-n,this.bitPos+=n,r-=n,t&=2**r-1,this.bitPos===8&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}fieldPathPush(t){this.fieldPath.push(t)}fieldPathPop(){this.fieldPath.pop()}},_A=e=>Uint8Array.from(e).reverse();function Iq(e,t,r,n){if(n){let i=2n**(r-1n);if(t<-i||t>=i)throw e.err("sInt: value out of bounds")}else if(0n>t||t>=2n**r)throw e.err("uInt: value out of bounds")}function xn(e){return{...e,encode:t=>{let r=new PA;return e.encodeStream(r,t),r.buffer},decode:t=>{let r=new TA(t),n=e.decodeStream(r);return r.finish(),n}}}function BA(e,t){e=Array.from(e);let r=0;for(;r<t.length&&t[r]==="..";r++)e.pop();let n=e.pop();for(;r<t.length;r++){if(!n||n[t[r]]===void 0)return;n=n[t[r]]}return n}function Gf(e){return typeof e.encode=="function"&&typeof e.encodeStream=="function"&&typeof e.decode=="function"&&typeof e.decodeStream=="function"}function zbe(){return{encode:e=>{let t={};for(let[r,n]of e){if(t[r]!==void 0)throw new Error(`coders.dict: same key(${r}) appears twice in struct`);t[r]=n}return t},decode:e=>Object.entries(e)}}var jbe={encode:e=>{if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`coders.number: element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>BigInt(e)};function Gbe(e){return{encode:t=>e[t],decode:t=>e[t]}}function $be(e){let t=10n**BigInt(e);return{encode:r=>{let n=(r<0n?-r:r).toString(10),i=n.length-e;i<0&&(n=n.padStart(n.length-i,"0"),i=0);let o=n.length-1;for(;o>=i&&n[o]==="0";o--);let[s,a]=[n.slice(0,i),n.slice(i,o+1)];return s||(s="0"),r<0n&&(s="-"+s),a?`${s}.${a}`:s},decode:r=>{let n=!1;r.startsWith("-")&&(n=!0,r=r.slice(1));let i=r.indexOf(".");i=i===-1?r.length:i;let[o,s]=[r.slice(0,i),r.slice(i+1)],a=BigInt(o)*t,c=Math.min(s.length,e),u=BigInt(s.slice(0,c))*10n**BigInt(e-c),h=a+u;return n?-h:h}}}function Ybe(e){return{encode:t=>{for(let r of e){let n=r.encode(t);if(n!==void 0)return n}throw new Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let n=r.decode(t);if(n!==void 0)return n}throw new Error(`match/decode: cannot find match in ${t}`)}}}var yp={dict:zbe,number:jbe,tsEnum:Gbe,decimal:$be,match:Ybe};var Mo=(e,t=!1,r=!1)=>xn({size:e,encodeStream:(n,i)=>{if(typeof i!="number"&&typeof i!="bigint")throw n.err(`bigint: invalid value: ${i}`);let o=BigInt(i),s=BigInt(e);Iq(n,o,8n*s,!!r);let a=2n**(8n*s-1n);r&&o<0&&(o=o|a);let c=[];for(let h=0;h<e;h++)c.push(Number(o&255n)),o>>=8n;let u=new Uint8Array(c).reverse();n.bytes(t?u.reverse():u)},decodeStream:n=>{let i=BigInt(e),o=n.bytes(e);t&&(o=_A(o));let s=_A(o),a=2n**(8n*i-1n),c=0n;for(let u=0;u<s.length;u++)c|=BigInt(s[u])<<8n*BigInt(u);return r&&c&a&&(c=(c^a)-a),Iq(n,c,8n*i,!!r),c}}),bZe=Mo(32,!0),kq=Mo(32,!1),xZe=Mo(32,!0,!0),wZe=Mo(32,!1,!0),vZe=Mo(16,!0),AZe=Mo(16,!1),SZe=Mo(16,!0,!0),EZe=Mo(16,!1,!0),Qg=Mo(8,!0),IZe=Mo(8,!1),Tq=Mo(8,!0,!0),kZe=Mo(8,!1,!0),Qa=(e,t=!1,r=!1)=>{if(e>6)throw new Error("int supports size up to 6 bytes (48 bits), for other use bigint");return eb(Mo(e,t,r),yp.number)},Xt=Qa(4,!0),Pq=Qa(4,!1),mp=Qa(4,!0,!0),TZe=Qa(4,!1,!0),rP=Qa(2,!0),PZe=Qa(2,!1),_Ze=Qa(2,!0,!0),BZe=Qa(2,!1,!0),fu=Qa(1,!1),CZe=Qa(1,!1,!0),MZe=xn({size:1,encodeStream:(e,t)=>e.byte(t?1:0),decodeStream:e=>{let t=e.byte();if(t!==0&&t!==1)throw e.err(`bool: invalid value ${t}`);return t===1}}),Er=(e,t=!1)=>xn({size:typeof e=="number"?e:void 0,encodeStream:(r,n)=>{if(!Co(n))throw r.err(`bytes: invalid value ${n}`);Co(e)||r.length(e,n.length),r.bytes(t?_A(n):n),Co(e)&&r.bytes(e)},decodeStream:r=>{let n;if(Co(e)){let i=r.find(e);if(!i)throw r.err("bytes: cannot find terminator");n=r.bytes(i-r.pos),r.bytes(e.length)}else n=r.bytes(e===null?r.leftBytes:r.length(e));return t?_A(n):n}}),Xg=(e,t=!1)=>{let r=Er(e,t);return xn({size:r.size,encodeStream:(n,i)=>r.encodeStream(n,tP.decode(i)),decodeStream:n=>tP.encode(r.decodeStream(n))})},RZe=Xg(CA),_q=(e,t=!1,r=!1)=>{let n=Er(e,t);return xn({size:n.size,encodeStream:(i,o)=>{if(r&&!o.startsWith("0x"))throw new Error("hex(withZero=true).encode input should start with 0x");let s=Dr.decode(r?o.slice(2):o);return n.encodeStream(i,s)},decodeStream:i=>(r?"0x":"")+Dr.encode(n.decodeStream(i))})};function eb(e,t){if(!Gf(e))throw new Error(`apply: invalid inner value ${e}`);return xn({size:e.size,encodeStream:(r,n)=>{let i;try{i=t.decode(n)}catch(o){throw r.err(""+o)}return e.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(i){throw r.err(""+i)}}})}function fs(e,t){if(!Gf(e))throw new Error(`validate: invalid inner value ${e}`);return xn({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t(n)),decodeStream:r=>t(e.decodeStream(r))})}var Bq=(e,t=!1)=>xn({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=pr(r.bytes(e.length,!0),e),n&&r.bytes(e.length)),n!==t}});function Cq(e,t,r){if(!Gf(t))throw new Error(`flagged: invalid inner value ${t}`);return xn({encodeStream:(n,i)=>{typeof e=="string"?BA(n.path,e.split("/"))?t.encodeStream(n,i):r&&t.encodeStream(n,r):(e.encodeStream(n,!!i),i?t.encodeStream(n,i):r&&t.encodeStream(n,r))},decodeStream:n=>{let i=!1;if(typeof e=="string"?i=BA(n.path,e.split("/")):i=e.decodeStream(n),i)return t.decodeStream(n);r&&t.decodeStream(n)}})}function tb(e,t,r=!0){if(!Gf(e))throw new Error(`flagged: invalid inner value ${e}`);return xn({size:e.size,encodeStream:(n,i)=>e.encodeStream(n,t),decodeStream:n=>{let i=e.decodeStream(n);if(r&&typeof i!="object"&&i!==t||Co(t)&&!pr(t,i))throw n.err(`magic: invalid value: ${i} !== ${t}`)}})}function Mq(e){let t=0;for(let r of e){if(!r.size)return;t+=r.size}return t}function Ii(e){if(Array.isArray(e))throw new Error("Packed.Struct: got array instead of object");return xn({size:Mq(Object.values(e)),encodeStream:(t,r)=>{if(typeof r!="object"||r===null)throw t.err(`struct: invalid value ${r}`);t.path.push(r);for(let n in e)t.fieldPathPush(n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r={};t.path.push(r);for(let n in e)t.fieldPathPush(n),r[n]=e[n].decodeStream(t),t.fieldPathPop();return t.path.pop(),r}})}function Rq(e){if(!Array.isArray(e))throw new Error(`Packed.Tuple: got ${typeof e} instead of array`);return xn({size:Mq(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),e[n].encodeStream(t,r[n]),t.fieldPathPop();t.path.pop()},decodeStream:t=>{let r=[];t.path.push(r);for(let n=0;n<e.length;n++)t.fieldPathPush(""+n),r.push(e[n].decodeStream(t)),t.fieldPathPop();return t.path.pop(),r}})}function Oq(e,t){if(!Gf(t))throw new Error(`prefix: invalid inner value ${t}`);if(Co(e))throw new Error("prefix: len cannot be Uint8Array");let r=Er(e);return xn({size:typeof e=="number"?e:void 0,encodeStream:(n,i)=>{let o=new PA(n.path,n.fieldPath);t.encodeStream(o,i),r.encodeStream(n,o.buffer)},decodeStream:n=>{let i=r.decodeStream(n);return t.decodeStream(new TA(i,n.path,n.fieldPath))}})}function Vi(e,t){if(!Gf(t))throw new Error(`array: invalid inner value ${t}`);return xn({size:typeof e=="number"&&t.size?e*t.size:void 0,encodeStream:(r,n)=>{if(!Array.isArray(n))throw r.err(`array: invalid value ${n}`);Co(e)||r.length(e,n.length),r.path.push(n);for(let i=0;i<n.length;i++){r.fieldPathPush(""+i);let o=n[i],s=r.pos;if(t.encodeStream(r,o),Co(e)){if(e.length>r.pos-s)continue;let a=r.buffer.subarray(s,r.pos);if(pr(a.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${a}`)}r.fieldPathPop()}r.path.pop(),Co(e)&&r.bytes(e)},decodeStream:r=>{let n=[];if(e===null){let i=0;for(r.path.push(n);!r.isEnd()&&(r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop(),!(t.size&&r.leftBytes<t.size)););r.path.pop()}else if(Co(e)){let i=0;for(r.path.push(n);;){if(pr(r.bytes(e.length,!0),e)){r.bytes(e.length);break}r.fieldPathPush(""+i++),n.push(t.decodeStream(r)),r.fieldPathPop()}r.path.pop()}else{r.fieldPathPush("arrayLen");let i=r.length(e);r.fieldPathPop(),r.path.push(n);for(let o=0;o<i;o++)r.fieldPathPush(""+o),n.push(t.decodeStream(r)),r.fieldPathPop();r.path.pop()}return n}})}var OZe=tb(Er(0),Lr);var{ProjectivePoint:FA,sign:Nq,getPublicKey:Zbe}=hp,NA=hp.CURVE.n,nb=(e,t)=>e===void 0?t:e,kr=Co,VA=e=>mq(Ei(e)),$f=(...e)=>Ei(Ei(Yf(...e))),Yf=kA,Yq=Sq(Ei);function UA(e){if(Array.isArray(e))return e.map(t=>UA(t));if(e instanceof Uint8Array)return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(e===null)return e;if(typeof e=="object")return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,UA(r)]));throw new Error(`cloneDeep: unknown type=${e} (${typeof e})`)}var ki;(function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"})(ki||(ki={}));function wp(e,t){let r=e.length;if(t===ki.ecdsa){if(r===32)throw new Error("Expected non-Schnorr key");return FA.fromHex(e),e}else if(t===ki.schnorr){if(r!==32)throw new Error("Expected 32-byte Schnorr key");return Bo.utils.lift_x(Bo.utils.bytesToNumberBE(e)),e}else throw new Error("Unknown key type")}function Od(e,t){try{return wp(e,t),!0}catch{return!1}}var Uq=e=>e.r<NA/2n;function Qbe(e,t,r=!1){let n=Nq(e,t);if(r&&!Uq(n)){let i=new Uint8Array(32);for(let o=0;o<Number.MAX_SAFE_INTEGER&&(i.set(Xt.encode(o)),n=Nq(e,t,{extraEntropy:i}),!Uq(n));o++);}return n.toDERRawBytes()}function Jq(e,t){let r=Bo.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=NA)throw new Error("tweak higher than curve order");return i}function Xbe(e,t=new Uint8Array){let r=Bo.utils,n=r.bytesToNumberBE(e),i=FA.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,NA),s=r.pointToBytes(i),a=Jq(s,t);return r.numberToBytesBE(r.mod(o+a,NA),32)}function Zq(e,t){let r=Bo.utils,n=Jq(e,t),o=r.lift_x(r.bytesToNumberBE(e)).add(FA.fromPrivateKey(n)),s=o.hasEvenY()?0:1;return[r.pointToBytes(o),s]}var aP=fs(Er(null),e=>wp(e,ki.ecdsa)),DA=fs(Er(32),e=>wp(e,ki.schnorr)),Dq=fs(Er(null),e=>{if(e.length!==64&&e.length!==65)throw new Error("Schnorr signature should be 64 or 65 bytes long");return e});var Jf={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128};var exe=8,txe=2,Rd=0,Qq=4294967295,MA=new Uint8Array(32),VZe=yp.decimal(exe);function cP(e,t){if(!kr(e)||!kr(t))throw new Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)}var wn;(function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"})(wn||(wn={}));var vn=xn({encodeStream:(e,t)=>{for(let r of t){if(typeof r=="string"){if(wn[r]===void 0)throw new Error(`Unknown opcode=${r}`);e.byte(wn[r]);continue}else if(typeof r=="number"){if(r===0){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(wn.OP_1-1+r);continue}}if(typeof r=="number"&&(r=Xq().encode(BigInt(r))),!kr(r))throw new Error(`Wrong Script OP=${r} (${typeof r})`);let n=r.length;n<wn.PUSHDATA1?e.byte(n):n<=255?(e.byte(wn.PUSHDATA1),e.byte(n)):n<=65535?(e.byte(wn.PUSHDATA2),e.bytes(rP.encode(n))):(e.byte(wn.PUSHDATA4),e.bytes(Xt.encode(n))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(wn.OP_0<r&&r<=wn.PUSHDATA4){let n;if(r<wn.PUSHDATA1)n=r;else if(r===wn.PUSHDATA1)n=fu.decodeStream(e);else if(r===wn.PUSHDATA2)n=rP.decodeStream(e);else if(r===wn.PUSHDATA4)n=Xt.decodeStream(e);else throw new Error("Should be not possible");t.push(e.bytes(n))}else if(r===0)t.push(0);else if(wn.OP_1<=r&&r<=wn.OP_16)t.push(r-(wn.OP_1-1));else{let n=wn[r];if(n===void 0)throw new Error(`Unknown opcode=${r.toString(16)}`);t.push(n)}}return t}});function Xq(e=6,t=!1){return xn({encodeStream:(r,n)=>{if(n===0n)return;let i=n<0,o=BigInt(n),s=[];for(let a=i?-o:o;a;a>>=8n)s.push(Number(a&0xffn));s[s.length-1]>=128?s.push(i?128:0):i&&(s[s.length-1]|=128),r.bytes(new Uint8Array(s))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw new Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(n===0)return 0n;if(t&&!(r.data[n-1]&127)&&(n<=1||!(r.data[n-2]&128)))throw new Error("Non-minimally encoded ScriptNum");let i=0,o=0n;for(let s=0;s<n;++s)i=r.byte(),o|=BigInt(i)<<8n*BigInt(s);return i>=128&&(o&=2n**BigInt(n*8)-1n>>1n,o=-o),o}})}function rxe(e,t=4,r=!0){if(typeof e=="number")return e;if(kr(e))try{let n=Xq(t,r).decode(e);return n>Number.MAX_SAFE_INTEGER?void 0:Number(n)}catch{return}}var Lq={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,18446744073709551615n]},qA=xn({encodeStream:(e,t)=>{if(typeof t=="number"&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,i,o]of Object.values(Lq))if(!(i>t||t>o)){e.byte(r);for(let s=0;s<n;s++)e.byte(Number(t>>8n*BigInt(s)&0xffn));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,i]=Lq[t],o=0n;for(let s=0;s<n;s++)o|=BigInt(e.byte())<<8n*BigInt(s);if(o<i)throw e.err(`Wrong CompactSize(${8*n})`);return o}}),ia=eb(qA,yp.number),Kq=e=>Vi(qA,e),na=Er(qA),nxe=Ii({txid:Er(32,!0),index:Xt,finalScriptSig:na,sequence:Xt}),bp=Ii({amount:Qg,script:na}),ixe={amount:0xffffffffffffffffn,script:Lr},mP=Vi(ia,na),oxe=Ii({version:mp,segwitFlag:Bq(new Uint8Array([0,1])),inputs:Kq(nxe),outputs:Kq(bp),witnesses:Cq("segwitFlag",Vi("inputs/length",mP)),lockTime:Xt});function sxe(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw new Error("Segwit flag with empty witnesses array");return e}var Xa=fs(oxe,sxe);function uP(e){let[t,r,n,i,o,s]=e;return{type:t,kc:r,vc:n,reqInc:i,allowInc:o,silentIgnore:s}}var HA=Ii({fingerprint:Pq,path:Vi(null,Xt)}),axe=Ii({version:fu,internalKey:Er(32),merklePath:Vi(null,Er(32))}),xp=fs(axe,e=>{if(e.merklePath.length>128)throw new Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e}),eH=Ii({hashes:Vi(ia,Er(32)),der:HA}),cxe=Er(78),uxe=Ii({pubKey:DA,leafHash:Er(32)}),fxe=Vi(null,Ii({depth:fu,version:fu,script:na})),An=Er(null),Fq=Er(20),rb=Er(32),gP={unsignedTx:[0,!1,Xa,[0],[0],!1],xpub:[1,cxe,HA,[],[0,2],!1],txVersion:[2,!1,Xt,[2],[2],!1],fallbackLocktime:[3,!1,Xt,[],[2],!1],inputCount:[4,!1,ia,[2],[2],!1],outputCount:[5,!1,ia,[2],[2],!1],txModifiable:[6,!1,fu,[],[2],!1],version:[251,!1,Xt,[],[0,2],!1],proprietary:[252,An,An,[],[0,2],!1]},LA={nonWitnessUtxo:[0,!1,Xa,[],[0,2],!1],witnessUtxo:[1,!1,bp,[],[0,2],!1],partialSig:[2,aP,An,[],[0,2],!1],sighashType:[3,!1,Xt,[],[0,2],!1],redeemScript:[4,!1,An,[],[0,2],!1],witnessScript:[5,!1,An,[],[0,2],!1],bip32Derivation:[6,aP,HA,[],[0,2],!1],finalScriptSig:[7,!1,An,[],[0,2],!1],finalScriptWitness:[8,!1,mP,[],[0,2],!1],porCommitment:[9,!1,An,[],[0,2],!1],ripemd160:[10,Fq,An,[],[0,2],!1],sha256:[11,rb,An,[],[0,2],!1],hash160:[12,Fq,An,[],[0,2],!1],hash256:[13,rb,An,[],[0,2],!1],txid:[14,!1,rb,[2],[2],!0],index:[15,!1,Xt,[2],[2],!0],sequence:[16,!1,Xt,[],[2],!0],requiredTimeLocktime:[17,!1,Xt,[],[2],!1],requiredHeightLocktime:[18,!1,Xt,[],[2],!1],tapKeySig:[19,!1,Dq,[],[0,2],!1],tapScriptSig:[20,uxe,Dq,[],[0,2],!1],tapLeafScript:[21,xp,An,[],[0,2],!1],tapBip32Derivation:[22,rb,eH,[],[0,2],!1],tapInternalKey:[23,!1,DA,[],[0,2],!1],tapMerkleRoot:[24,!1,rb,[],[0,2],!1],proprietary:[252,An,An,[],[0,2],!1]},lxe=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],dxe=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],KA={redeemScript:[0,!1,An,[],[0,2],!1],witnessScript:[1,!1,An,[],[0,2],!1],bip32Derivation:[2,aP,HA,[],[0,2],!1],amount:[3,!1,Tq,[2],[2],!0],script:[4,!1,An,[2],[2],!0],tapInternalKey:[5,!1,DA,[],[0,2],!1],tapTree:[6,!1,fxe,[],[0,2],!1],tapBip32Derivation:[7,DA,eH,[],[0,2],!1],proprietary:[252,An,An,[],[0,2],!1]},hxe=[],Vq=Vi(CA,Ii({key:Oq(ia,Ii({type:ia,key:Er(null)})),value:Er(ia)})),qZe=Ii({type:ia,key:Er(null)});function bP(e){let t={};for(let r in e){let[n,i,o]=e[r];t[n]=[r,i,o]}return xn({encodeStream:(r,n)=>{let i=[];for(let o in e){let s=n[o];if(s===void 0)continue;let[a,c,u]=e[o];if(!c)i.push({key:{type:a,key:Lr},value:u.encode(s)});else{let h=s.map(([l,g])=>[c.encode(l),u.encode(g)]);h.sort((l,g)=>cP(l[0],g[0]));for(let[l,g]of h)i.push({key:{key:l,type:a},value:g})}}if(n.unknown){n.unknown.sort((o,s)=>cP(o[0].key,s[0].key));for(let[o,s]of n.unknown)i.push({key:o,value:s})}Vq.encodeStream(r,i)},decodeStream:r=>{let n=Vq.decodeStream(r),i={},o={};for(let s of n){let a="unknown",c=s.key.key,u=s.value;if(t[s.key.type]){let[h,l,g]=t[s.key.type];if(a=h,!l&&c.length)throw new Error(`PSBT: Non-empty key for ${a} (key=${Dr.encode(c)} value=${Dr.encode(u)}`);if(c=l?l.decode(c):void 0,u=g.decode(u),!l){if(i[a])throw new Error(`PSBT: Same keys: ${a} (key=${c} value=${u})`);i[a]=u,o[a]=!0;continue}}else c={type:s.key.type,key:s.key.key};if(o[a])throw new Error(`PSBT: Key type with empty key and no key=${a} val=${u}`);i[a]||(i[a]=[]),i[a].push([c,u])}return i}})}function qq(e,t){if(!pr(e.hash,Ei(t)))throw new Error("checkScript: wsh wrong witnessScript hash");let r=Sn.decode(t);if(r.type==="tr"||r.type==="tr_ns"||r.type==="tr_ms")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2SH`);if(r.type==="wpkh"||r.type==="sh")throw new Error(`checkScript: P2${r.type} cannot be wrapped in P2WSH`)}function fP(e,t,r){if(e){let n=Sn.decode(e);if(n.type==="tr_ns"||n.type==="tr_ms"||n.type==="ms"||n.type=="pk")throw new Error(`checkScript: non-wrapped ${n.type}`);if(n.type==="sh"&&t){if(!pr(n.hash,VA(t)))throw new Error("checkScript: sh wrong redeemScript hash");let i=Sn.decode(t);if(i.type==="tr"||i.type==="tr_ns"||i.type==="tr_ms")throw new Error(`checkScript: P2${i.type} cannot be wrapped in P2SH`);if(i.type==="sh")throw new Error("checkScript: P2SH cannot be wrapped in P2SH")}n.type==="wsh"&&r&&qq(n,r)}if(t){let n=Sn.decode(t);n.type==="wsh"&&r&&qq(n,r)}}var xP=fs(bP(LA),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw new Error("validateInput: wmpty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw new Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)wp(t,ki.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)wp(t,ki.ecdsa);if(e.requiredTimeLocktime!==void 0&&e.requiredTimeLocktime<5e8)throw new Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(e.requiredHeightLocktime!==void 0&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw new Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&e.index!==void 0){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw new Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!pr(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw new Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((t.version&254)!==r[r.length-1])throw new Error("validateInput: tapLeafScript version mimatch");if(r[r.length-1]&1)throw new Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw new Error("nonWitnessUtxo: incorect output index");let r=Nd.fromRaw(Xa.encode(e.nonWitnessUtxo)),n=Dr.encode(e.txid);if(r.id!==n)throw new Error(`nonWitnessUtxo: wrong txid, exp=${n} got=${r.id}`)}return e}),wP=fs(bP(KA),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)wp(t,ki.ecdsa);return e}),tH=fs(bP(gP),e=>{if((e.version||0)===0){if(!e.unsignedTx)throw new Error("PSBTv0: missing unsignedTx");if(e.unsignedTx.segwitFlag||e.unsignedTx.witnesses)throw new Error("PSBTv0: witness in unsingedTx");for(let r of e.unsignedTx.inputs)if(r.finalScriptSig&&r.finalScriptSig.length)throw new Error("PSBTv0: input scriptSig found in unsignedTx")}return e}),pxe=Ii({magic:tb(Xg(new Uint8Array([255])),"psbt"),global:tH,inputs:Vi("global/unsignedTx/inputs/length",xP),outputs:Vi(null,wP)}),yxe=Ii({magic:tb(Xg(new Uint8Array([255])),"psbt"),global:tH,inputs:Vi("global/inputCount",xP),outputs:Vi("global/outputCount",wP)}),HZe=Ii({magic:tb(Xg(new Uint8Array([255])),"psbt"),items:Vi(null,eb(Vi(CA,Rq([_q(ia),Er(qA)])),yp.dict()))});function nP(e,t,r){for(let n in r){if(n==="unknown"||!t[n])continue;let{allowInc:i}=uP(t[n]);if(!i.includes(e))throw new Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:i}=uP(t[n]);if(i.includes(e)&&r[n]===void 0)throw new Error(`PSBTv${e}: missing required field ${n}`)}}function Hq(e,t,r){let n={};for(let i in r){let o=i;if(o!=="unknown"){if(!t[o])continue;let{allowInc:s,silentIgnore:a}=uP(t[o]);if(!s.includes(e)){if(a)continue;throw new Error(`Failed to serialize in PSBTv${e}: ${o} but versions allows inclusion=${s}`)}}n[o]=r[o]}return n}function rH(e){let t=e&&e.global&&e.global.version||0;nP(t,gP,e.global);for(let s of e.inputs)nP(t,LA,s);for(let s of e.outputs)nP(t,KA,s);let r=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<r)throw new Error("Not enough inputs");let n=e.inputs.slice(r);if(n.length>1||n.length&&Object.keys(n[0]).length)throw new Error(`Unexpected inputs left in tx=${n}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw new Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw new Error(`Unexpected outputs left in tx=${o}`);return e}function iP(e,t,r,n){let i={...r,...t};for(let o in e){let s=o,[a,c,u]=e[s],h=n&&!n.includes(o);if(t[o]===void 0&&o in t){if(h)throw new Error(`Cannot remove signed field=${o}`);delete i[o]}else if(c){let l=r&&r[o]?r[o]:[],g=t[s];if(g){if(!Array.isArray(g))throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);g=g.map(E=>{if(E.length!==2)throw new Error(`keyMap(${o}): KV pairs should be [k, v][]`);return[typeof E[0]=="string"?c.decode(Dr.decode(E[0])):E[0],typeof E[1]=="string"?u.decode(Dr.decode(E[1])):E[1]]});let x={},A=(E,C,M)=>{if(x[E]===void 0){x[E]=[C,M];return}let N=Dr.encode(u.encode(x[E][1])),R=Dr.encode(u.encode(M));if(N!==R)throw new Error(`keyMap(${s}): same key=${E} oldVal=${N} newVal=${R}`)};for(let[E,C]of l){let M=Dr.encode(c.encode(E));A(M,E,C)}for(let[E,C]of g){let M=Dr.encode(c.encode(E));if(C===void 0){if(h)throw new Error(`Cannot remove signed field=${s}/${E}`);delete x[M]}else A(M,E,C)}i[s]=Object.values(x)}}else if(typeof i[o]=="string")i[o]=u.decode(Dr.decode(i[o]));else if(h&&o in t&&r&&r[o]!==void 0&&!pr(u.encode(t[o]),u.encode(r[o])))throw new Error(`Cannot change signed field=${o}`)}for(let o in i)e[o]||delete i[o];return i}var Wq=fs(pxe,rH),zq=fs(yxe,rH),oP=Ii({txid:Er(32,!0),index:Xt}),mxe={encode(e){if(!(e.length!==2||!kr(e[0])||!Od(e[0],ki.ecdsa)||e[1]!=="CHECKSIG"))return{type:"pk",pubkey:e[0]}},decode:e=>e.type==="pk"?[e.pubkey,"CHECKSIG"]:void 0};var gxe={encode(e){if(!(e.length!==5||e[0]!=="DUP"||e[1]!=="HASH160"||!kr(e[2]))&&!(e[3]!=="EQUALVERIFY"||e[4]!=="CHECKSIG"))return{type:"pkh",hash:e[2]}},decode:e=>e.type==="pkh"?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0};var bxe={encode(e){if(!(e.length!==3||e[0]!=="HASH160"||!kr(e[1])||e[2]!=="EQUAL"))return{type:"sh",hash:e[1]}},decode:e=>e.type==="sh"?["HASH160",e.hash,"EQUAL"]:void 0},nH=(e,t=Jf)=>{let r=e.script;if(!kr(r))throw new Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let n=VA(r),i=Sn.encode({type:"sh",hash:n});fP(i,r,e.witnessScript);let o={type:"sh",redeemScript:r,script:Sn.encode({type:"sh",hash:n}),address:WA(t).encode({type:"sh",hash:n})};return e.witnessScript&&(o.witnessScript=e.witnessScript),o},xxe={encode(e){if(!(e.length!==2||e[0]!==0||!kr(e[1]))&&e[1].length===32)return{type:"wsh",hash:e[1]}},decode:e=>e.type==="wsh"?[0,e.hash]:void 0};var wxe={encode(e){if(!(e.length!==2||e[0]!==0||!kr(e[1]))&&e[1].length===20)return{type:"wpkh",hash:e[1]}},decode:e=>e.type==="wpkh"?[0,e.hash]:void 0},vP=(e,t=Jf)=>{if(!Od(e,ki.ecdsa))throw new Error("P2WPKH: invalid publicKey");if(e.length===65)throw new Error("P2WPKH: uncompressed public key");let r=VA(e);return{type:"wpkh",script:Sn.encode({type:"wpkh",hash:r}),address:WA(t).encode({type:"wpkh",hash:r})}},vxe={encode(e){let t=e.length-1;if(e[t]!=="CHECKMULTISIG")return;let r=e[0],n=e[t-1];if(typeof r!="number"||typeof n!="number")return;let i=e.slice(1,-2);if(n===i.length){for(let o of i)if(!kr(o))return;return{type:"ms",m:r,pubkeys:i}}},decode:e=>e.type==="ms"?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0};var Axe={encode(e){if(!(e.length!==2||e[0]!==1||!kr(e[1])))return{type:"tr",pubkey:e[1]}},decode:e=>e.type==="tr"?[1,e.pubkey]:void 0};function Sxe(e){let t=Array.from(e);for(;t.length>=2;){t.sort((s,a)=>(a.weight||1)-(s.weight||1));let n=t.pop(),i=t.pop(),o=(i?.weight||1)+(n?.weight||1);t.push({weight:o,childs:[i?.childs||i,n?.childs||n]})}let r=t[0];return r?.childs||r}function Exe(e,t,r=!1){let n=Sn.decode(e);if(n.type==="unknown"&&r)return;if(!["tr_ns","tr_ms"].includes(n.type))throw new Error(`P2TR: invalid leaf script=${n.type}`);let i=n;if(!r&&i.pubkeys)for(let o of i.pubkeys){if(pr(o,iH))throw new Error("Unspendable taproot key in leaf script");if(pr(o,t))throw new Error("Using P2TR with leaf script with same key as internal key is not supported")}}function lP(e,t,r=!1){if(!e)throw new Error("taprootHashTree: empty tree");if(Array.isArray(e)&&e.length===1&&(e=e[0]),!Array.isArray(e)){let{leafVersion:a,script:c}=e;if(e.tapLeafScript||e.tapMerkleRoot&&!pr(e.tapMerkleRoot,Lr))throw new Error("P2TR: tapRoot leafScript cannot have tree");let u=typeof c=="string"?Dr.decode(c):c;if(!kr(u))throw new Error(`checkScript: wrong script type=${u}`);return Exe(u,t,r),{type:"leaf",version:a,script:u,hash:OA(u,a)}}if(e.length!==2&&(e=Sxe(e)),e.length!==2)throw new Error("hashTree: non binary tree!");let n=lP(e[0],t,r),i=lP(e[1],t,r),[o,s]=[n.hash,i.hash];return cP(s,o)===-1&&([o,s]=[s,o]),{type:"branch",left:n,right:i,hash:Bo.utils.taggedHash("TapBranch",o,s)}}function dP(e,t=[]){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return{...e,path:t};if(e.type!=="branch")throw new Error(`taprootAddPath: wrong type=${e}`);return{...e,path:t,left:dP(e.left,[e.right.hash,...t]),right:dP(e.right,[e.left.hash,...t])}}function hP(e){if(!e)throw new Error("taprootAddPath: empty tree");if(e.type==="leaf")return[e];if(e.type!=="branch")throw new Error(`taprootWalkTree: wrong type=${e}`);return[...hP(e.left),...hP(e.right)]}var iH=Ei(FA.BASE.toRawBytes(!1));function oH(e,t,r=Jf,n=!1){if(!e&&!t)throw new Error("p2tr: should have pubKey or scriptTree (or both)");let i=typeof e=="string"?Dr.decode(e):e||iH;if(!Od(i,ki.schnorr))throw new Error("p2tr: non-schnorr pubkey");let o=t?dP(lP(t,i,n)):void 0,s=o?o.hash:void 0,[a,c]=Zq(i,s||Lr),u;o&&(u=hP(o).map(g=>({...g,controlBlock:xp.encode({version:(g.version||yP)+c,internalKey:i,merklePath:g.path})})));let h;u&&(h=u.map(g=>[xp.decode(g.controlBlock),Yf(g.script,new Uint8Array([g.version||yP]))]));let l={type:"tr",script:Sn.encode({type:"tr",pubkey:a}),address:WA(r).encode({type:"tr",pubkey:a}),tweakedPubkey:a,tapInternalKey:i};return u&&(l.leaves=u),h&&(l.tapLeafScript=h),s&&(l.tapMerkleRoot=s),l}var Ixe={encode(e){let t=e.length-1;if(e[t]!=="CHECKSIG")return;let r=[];for(let n=0;n<t;n++){let i=e[n];if(n&1){if(i!=="CHECKSIGVERIFY"||n===t-1)return;continue}if(!kr(i))return;r.push(i)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if(e.type!=="tr_ns")return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}};var kxe={encode(e){let t=e.length-1;if(e[t]!=="NUMEQUAL"||e[1]!=="CHECKSIG")return;let r=[],n=rxe(e[t-1]);if(typeof n=="number"){for(let i=0;i<t-1;i++){let o=e[i];if(i&1){if(o!==(i===1?"CHECKSIG":"CHECKSIGADD"))throw new Error("OutScript.encode/tr_ms: wrong element");continue}if(!kr(o))throw new Error("OutScript.encode/tr_ms: wrong key element");r.push(o)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if(e.type!=="tr_ms")return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}};var Txe={encode(e){return{type:"unknown",script:vn.encode(e)}},decode:e=>e.type==="unknown"?vn.decode(e.script):void 0},Pxe=[mxe,gxe,bxe,xxe,wxe,vxe,Axe,Ixe,kxe,Txe],_xe=eb(vn,yp.match(Pxe)),Sn=fs(_xe,e=>{if(e.type==="pk"&&!Od(e.pubkey,ki.ecdsa))throw new Error("OutScript/pk: wrong key");if((e.type==="pkh"||e.type==="sh"||e.type==="wpkh")&&(!kr(e.hash)||e.hash.length!==20))throw new Error(`OutScript/${e.type}: wrong hash`);if(e.type==="wsh"&&(!kr(e.hash)||e.hash.length!==32))throw new Error("OutScript/wsh: wrong hash");if(e.type==="tr"&&(!kr(e.pubkey)||!Od(e.pubkey,ki.schnorr)))throw new Error("OutScript/tr: wrong taproot public key");if((e.type==="ms"||e.type==="tr_ns"||e.type==="tr_ms")&&!Array.isArray(e.pubkeys))throw new Error("OutScript/multisig: wrong pubkeys array");if(e.type==="ms"){let t=e.pubkeys.length;for(let r of e.pubkeys)if(!Od(r,ki.ecdsa))throw new Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw new Error("OutScript/multisig: invalid params")}if(e.type==="tr_ns"||e.type==="tr_ms"){for(let t of e.pubkeys)if(!Od(t,ki.schnorr))throw new Error(`OutScript/${e.type}: wrong pubkey`)}if(e.type==="tr_ms"){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw new Error("OutScript/tr_ms: invalid params")}return e});function sH(e,t){if(t.length<2||t.length>40)throw new Error("Witness: invalid length");if(e>16)throw new Error("Witness: invalid version");if(e===0&&!(t.length===20||t.length===32))throw new Error("Witness: invalid length for version")}function sP(e,t,r=Jf){sH(e,t);let n=e===0?IA:eP;return n.encode(r.bech32,[e].concat(n.toWords(t)))}function jq(e,t){return Yq.encode(Yf(Uint8Array.from(t),e))}function WA(e=Jf){return{encode(t){let{type:r}=t;if(r==="wpkh")return sP(0,t.hash,e);if(r==="wsh")return sP(0,t.hash,e);if(r==="tr")return sP(1,t.pubkey,e);if(r==="pkh")return jq(t.hash,[e.pubKeyHash]);if(r==="sh")return jq(t.hash,[e.scriptHash]);throw new Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw new Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(e.bech32)){let n;try{if(n=IA.decode(t),n.words[0]!==0)throw new Error(`bech32: wrong version=${n.words[0]}`)}catch{if(n=eP.decode(t),n.words[0]===0)throw new Error(`bech32m: wrong version=${n.words[0]}`)}if(n.prefix!==e.bech32)throw new Error(`wrong bech32 prefix=${n.prefix}`);let[i,...o]=n.words,s=IA.fromWords(o);if(sH(i,s),i===0&&s.length===32)return{type:"wsh",hash:s};if(i===0&&s.length===20)return{type:"wpkh",hash:s};if(i===1&&s.length===32)return{type:"tr",pubkey:s};throw new Error("Unknown witness program")}let r=Yq.decode(t);if(r.length!==21)throw new Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw new Error(`Invalid address prefix=${r[0]}`)}}}var Ir;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"})(Ir||(Ir={}));var pP;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"})(pP||(pP={}));function Bxe(e){if(typeof e!="number"||typeof pP[e]!="string")throw new Error(`Invalid SigHash=${e}`);return e}function Gq(e){let t=e&31;return{isAny:!!(e&Ir.ANYONECANPAY),isNone:t===Ir.NONE,isSingle:t===Ir.SINGLE}}function RA(e){if(e.txid===void 0||e.index===void 0)throw new Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:nb(e.sequence,Qq),finalScriptSig:nb(e.finalScriptSig,Lr)}}function $q(e){for(let t in e){let r=t;lxe.includes(r)||delete e[r]}}function gp(e){if(e.script===void 0||e.amount===void 0)throw new Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}var yP=192,OA=(e,t=yP)=>Bo.utils.taggedHash("TapLeaf",new Uint8Array([t]),na.encode(e));function Cxe(e,t,r,n=Lr){return pr(r,t)&&(e=Xbe(e,n),t=Bo.getPublicKey(e)),{privKey:e,pubKey:t}}var Mxe={}.toString;function Rxe(e){if(e!==void 0&&Mxe.call(e)!=="[object Object]")throw new Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:nb(e.version,txe),lockTime:nb(e.lockTime,0),PSBTVersion:nb(e.PSBTVersion,0)};if(typeof t.allowUnknowInput<"u"&&(e.allowUnknownInputs=t.allowUnknowInput),typeof t.allowUnknowOutput<"u"&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2].includes(t.version))throw new Error(`Unknown version: ${t.version}`);if(typeof t.lockTime!="number")throw new Error("Transaction lock time should be number");if(Xt.encode(t.lockTime),t.PSBTVersion!==0&&t.PSBTVersion!==2)throw new Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let r of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let n=t[r];if(n!==void 0&&typeof n!="boolean")throw new Error(`Transation options wrong type: ${r}=${n} (${typeof n})`)}return Object.freeze(t)}var Nd=class e{constructor(t={}){this.global={},this.inputs=[],this.outputs=[];let r=this.opts=Rxe(t);r.lockTime!==Rd&&(this.global.fallbackLocktime=r.lockTime),this.global.txVersion=r.version}static fromRaw(t,r={}){let n=Xa.decode(t),i=new e({...r,version:n.version,lockTime:n.lockTime});for(let o of n.outputs)i.addOutput(o);if(i.outputs=n.outputs,i.inputs=n.inputs,n.witnesses)for(let o=0;o<n.witnesses.length;o++)i.inputs[o].finalScriptWitness=n.witnesses[o];return i}static fromPSBT(t,r={}){let n;try{n=Wq.decode(t)}catch(l){try{n=zq.decode(t)}catch{throw l}}let i=n.global.version||0;if(i!==0&&i!==2)throw new Error(`Wrong PSBT version=${i}`);let o=n.global.unsignedTx,s=i===0?o?.version:n.global.txVersion,a=i===0?o?.lockTime:n.global.fallbackLocktime,c=new e({...r,version:s,lockTime:a,PSBTVersion:i}),u=i===0?o?.inputs.length:n.global.inputCount;c.inputs=n.inputs.slice(0,u).map((l,g)=>({finalScriptSig:Lr,...n.global.unsignedTx?.inputs[g],...l}));let h=i===0?o?.outputs.length:n.global.outputCount;return c.outputs=n.outputs.slice(0,h).map((l,g)=>({...l,...n.global.unsignedTx?.outputs[g]})),c.global={...n.global,txVersion:s},a!==Rd&&(c.global.fallbackLocktime=a),c}toPSBT(t=this.opts.PSBTVersion){if(t!==0&&t!==2)throw new Error(`Wrong PSBT version=${t}`);let r=this.inputs.map(o=>Hq(t,LA,o));for(let o of r)o.partialSig&&!o.partialSig.length&&delete o.partialSig,o.finalScriptSig&&!o.finalScriptSig.length&&delete o.finalScriptSig,o.finalScriptWitness&&!o.finalScriptWitness.length&&delete o.finalScriptWitness;let n=this.outputs.map(o=>Hq(t,KA,o)),i={...this.global};return t===0?(i.unsignedTx=Xa.decode(this.unsignedTx),delete i.fallbackLocktime,delete i.txVersion):(i.version=t,i.txVersion=this.version,i.inputCount=this.inputs.length,i.outputCount=this.outputs.length,i.fallbackLocktime&&i.fallbackLocktime===Rd&&delete i.fallbackLocktime),this.opts.bip174jsCompat&&(r.length||r.push({}),n.length||n.push({})),(t===0?Wq:zq).encode({global:i,inputs:r,outputs:n})}get lockTime(){let t=Rd,r=0,n=Rd,i=0;for(let o of this.inputs)o.requiredHeightLocktime&&(t=Math.max(t,o.requiredHeightLocktime),r++),o.requiredTimeLocktime&&(n=Math.max(n,o.requiredTimeLocktime),i++);return r&&r>=i?t:n!==Rd?n:this.global.fallbackLocktime||Rd}get version(){if(this.global.txVersion===void 0)throw new Error("No global.txVersion");return this.global.txVersion}inputStatus(t){this.checkInputIdx(t);let r=this.inputs[t];return r.finalScriptSig&&r.finalScriptSig.length||r.finalScriptWitness&&r.finalScriptWitness.length?"finalized":r.tapKeySig||r.tapScriptSig&&r.tapScriptSig.length||r.partialSig&&r.partialSig.length?"signed":"unsigned"}inputSighash(t){this.checkInputIdx(t);let r=this.inputType(this.inputs[t]).sighash,n=r===Ir.DEFAULT?Ir.ALL:r&3;return{sigInputs:r&Ir.ANYONECANPAY,sigOutputs:n}}signStatus(){let t=!0,r=!0,n=[],i=[];for(let o=0;o<this.inputs.length;o++){if(this.inputStatus(o)==="unsigned")continue;let{sigInputs:a,sigOutputs:c}=this.inputSighash(o);if(a===Ir.ANYONECANPAY?n.push(o):t=!1,c===Ir.ALL)r=!1;else if(c===Ir.SINGLE)i.push(o);else if(c!==Ir.NONE)throw new Error(`Wrong signature hash output type: ${c}`)}return{addInput:t,addOutput:r,inputs:n,outputs:i}}get isFinal(){for(let t=0;t<this.inputs.length;t++)if(this.inputStatus(t)!=="finalized")return!1;return!0}get hasWitnesses(){let t=!1;for(let r of this.inputs)r.finalScriptWitness&&r.finalScriptWitness.length&&(t=!0);return t}get weight(){if(!this.isFinal)throw new Error("Transaction is not finalized");let t=32,r=this.outputs.map(gp);this.hasWitnesses&&(t+=2),t+=4*ia.encode(this.inputs.length).length,t+=4*ia.encode(this.outputs.length).length;for(let n of this.inputs)t+=160+4*na.encode(n.finalScriptSig||Lr).length;for(let n of r)t+=32+4*na.encode(n.script).length;if(this.hasWitnesses)for(let n of this.inputs)n.finalScriptWitness&&(t+=mP.encode(n.finalScriptWitness).length);return t}get vsize(){return Math.ceil(this.weight/4)}toBytes(t=!1,r=!1){return Xa.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(RA).map(n=>({...n,finalScriptSig:t&&n.finalScriptSig||Lr})),outputs:this.outputs.map(gp),witnesses:this.inputs.map(n=>n.finalScriptWitness||[]),segwitFlag:r&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return Dr.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Dr.encode($f(this.toBytes(!0)))}get id(){if(!this.isFinal)throw new Error("Transaction is not finalized");return Dr.encode($f(this.toBytes(!0)).reverse())}checkInputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.inputs.length)throw new Error(`Wrong input index=${t}`)}getInput(t){return this.checkInputIdx(t),UA(this.inputs[t])}get inputsLength(){return this.inputs.length}normalizeInput(t,r,n){let{nonWitnessUtxo:i,txid:o}=t;typeof i=="string"&&(i=Dr.decode(i)),kr(i)&&(i=Xa.decode(i)),i===void 0&&(i=r?.nonWitnessUtxo),typeof o=="string"&&(o=Dr.decode(o)),o===void 0&&(o=r?.txid);let s={...r,...t,nonWitnessUtxo:i,txid:o};s.nonWitnessUtxo===void 0&&delete s.nonWitnessUtxo,s.sequence===void 0&&(s.sequence=Qq),s.tapMerkleRoot===null&&delete s.tapMerkleRoot,s=iP(LA,s,r,n),xP.encode(s);let a;return s.nonWitnessUtxo&&s.index!==void 0?a=s.nonWitnessUtxo.outputs[s.index]:s.witnessUtxo&&(a=s.witnessUtxo),a&&!this.opts.disableScriptCheck&&fP(a&&a.script,s.redeemScript,s.witnessScript),s}addInput(t,r=!1){if(!r&&!this.signStatus().addInput)throw new Error("Tx has signed inputs, cannot add new one");return this.inputs.push(this.normalizeInput(t)),this.inputs.length-1}updateInput(t,r,n=!1){this.checkInputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addInput||o.inputs.includes(t))&&(i=dxe)}this.inputs[t]=this.normalizeInput(r,this.inputs[t],i)}checkOutputIdx(t){if(!Number.isSafeInteger(t)||0>t||t>=this.outputs.length)throw new Error(`Wrong output index=${t}`)}getOutput(t){return this.checkOutputIdx(t),UA(this.outputs[t])}get outputsLength(){return this.outputs.length}normalizeOutput(t,r,n){let{amount:i,script:o}=t;if(i===void 0&&(i=r?.amount),typeof i!="bigint")throw new Error("amount must be bigint sats");typeof o=="string"&&(o=Dr.decode(o)),o===void 0&&(o=r?.script);let s={...r,...t,amount:i,script:o};if(s.amount===void 0&&delete s.amount,s=iP(KA,s,r,n),wP.encode(s),s.script&&!this.opts.allowUnknownOutputs&&Sn.decode(s.script).type==="unknown")throw new Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownScript=true, if you sure");return this.opts.disableScriptCheck||fP(s.script,s.redeemScript,s.witnessScript),s}addOutput(t,r=!1){if(!r&&!this.signStatus().addOutput)throw new Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(t)),this.outputs.length-1}updateOutput(t,r,n=!1){this.checkOutputIdx(t);let i;if(!n){let o=this.signStatus();(!o.addOutput||o.outputs.includes(t))&&(i=hxe)}this.outputs[t]=this.normalizeOutput(r,this.outputs[t],i)}addOutputAddress(t,r,n=Jf){return this.addOutput({script:Sn.encode(WA(n).decode(t)),amount:r})}get fee(){let t=0n;for(let n of this.inputs){let i=this.prevOut(n);if(!i)throw new Error("Empty input amount");t+=i.amount}let r=this.outputs.map(gp);for(let n of r)t-=n.amount;return t}preimageLegacy(t,r,n){let{isAny:i,isNone:o,isSingle:s}=Gq(n);if(t<0||!Number.isSafeInteger(t))throw new Error(`Invalid input idx=${t}`);if(s&&t>=this.outputs.length||t>=this.inputs.length)return kq.encode(1n);r=vn.encode(vn.decode(r).filter(h=>h!=="CODESEPARATOR"));let a=this.inputs.map(RA).map((h,l)=>({...h,finalScriptSig:l===t?r:Lr}));i?a=[a[t]]:(o||s)&&(a=a.map((h,l)=>({...h,sequence:l===t?h.sequence:0})));let c=this.outputs.map(gp);o?c=[]:s&&(c=c.slice(0,t).fill(ixe).concat([c[t]]));let u=Xa.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:a,outputs:c});return $f(u,mp.encode(n))}preimageWitnessV0(t,r,n,i){let{isAny:o,isNone:s,isSingle:a}=Gq(n),c=MA,u=MA,h=MA,l=this.inputs.map(RA),g=this.outputs.map(gp);o||(c=$f(...l.map(oP.encode))),!o&&!a&&!s&&(u=$f(...l.map(A=>Xt.encode(A.sequence)))),!a&&!s?h=$f(...g.map(bp.encode)):a&&t<g.length&&(h=$f(bp.encode(g[t])));let x=l[t];return $f(mp.encode(this.version),c,u,Er(32,!0).encode(x.txid),Xt.encode(x.index),na.encode(r),Qg.encode(i),Xt.encode(x.sequence),h,Xt.encode(this.lockTime),Xt.encode(n))}preimageWitnessV1(t,r,n,i,o=-1,s,a=192,c){if(!Array.isArray(i)||this.inputs.length!==i.length)throw new Error(`Invalid amounts array=${i}`);if(!Array.isArray(r)||this.inputs.length!==r.length)throw new Error(`Invalid prevOutScript array=${r}`);let u=[fu.encode(0),fu.encode(n),mp.encode(this.version),Xt.encode(this.lockTime)],h=n===Ir.DEFAULT?Ir.ALL:n&3,l=n&Ir.ANYONECANPAY,g=this.inputs.map(RA),x=this.outputs.map(gp);l!==Ir.ANYONECANPAY&&u.push(...[g.map(oP.encode),i.map(Qg.encode),r.map(na.encode),g.map(E=>Xt.encode(E.sequence))].map(E=>Ei(Yf(...E)))),h===Ir.ALL&&u.push(Ei(Yf(...x.map(bp.encode))));let A=(c?1:0)|(s?2:0);if(u.push(new Uint8Array([A])),l===Ir.ANYONECANPAY){let E=g[t];u.push(oP.encode(E),Qg.encode(i[t]),na.encode(r[t]),Xt.encode(E.sequence))}else u.push(Xt.encode(t));return A&1&&u.push(Ei(na.encode(c||Lr))),h===Ir.SINGLE&&u.push(t<x.length?Ei(bp.encode(x[t])):MA),s&&u.push(OA(s,a),fu.encode(0),mp.encode(o)),Bo.utils.taggedHash("TapSighash",...u)}prevOut(t){if(t.nonWitnessUtxo){if(t.index===void 0)throw new Error("Unknown input index");return t.nonWitnessUtxo.outputs[t.index]}else{if(t.witnessUtxo)return t.witnessUtxo;throw new Error("Cannot find previous output info")}}inputType(t){let r="legacy",n=Ir.ALL,i=this.prevOut(t),o=Sn.decode(i.script),s=o.type,a=o,c=[o];if(o.type==="tr")return n=Ir.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:i.script,defaultSighash:n,sighash:t.sighashType||n};{if((o.type==="wpkh"||o.type==="wsh")&&(r="segwit"),o.type==="sh"){if(!t.redeemScript)throw new Error("inputType: sh without redeemScript");let g=Sn.decode(t.redeemScript);(g.type==="wpkh"||g.type==="wsh")&&(r="segwit"),c.push(g),a=g,s+=`-${g.type}`}if(a.type==="wsh"){if(!t.witnessScript)throw new Error("inputType: wsh without witnessScript");let g=Sn.decode(t.witnessScript);g.type==="wsh"&&(r="segwit"),c.push(g),a=g,s+=`-${g.type}`}let u=c[c.length-1];if(u.type==="sh"||u.type==="wsh")throw new Error("inputType: sh/wsh cannot be terminal type");let h=Sn.encode(u),l={type:s,txType:r,last:u,lastScript:h,defaultSighash:n,sighash:t.sighashType||n};if(r==="legacy"&&!this.opts.allowLegacyWitnessUtxo&&!t.nonWitnessUtxo)throw new Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return l}}signIdx(t,r,n,i){this.checkInputIdx(r);let o=this.inputs[r],s=this.inputType(o);if(!kr(t)){if(!o.bip32Derivation||!o.bip32Derivation.length)throw new Error("bip32Derivation: empty");let h=o.bip32Derivation.filter(g=>g[1].fingerprint==t.fingerprint).map(([g,{path:x}])=>{let A=t;for(let E of x)A=A.deriveChild(E);if(!pr(A.publicKey,g))throw new Error("bip32Derivation: wrong pubKey");if(!A.privateKey)throw new Error("bip32Derivation: no privateKey");return A});if(!h.length)throw new Error(`bip32Derivation: no items with fingerprint=${t.fingerprint}`);let l=!1;for(let g of h)this.signIdx(g.privateKey,r)&&(l=!0);return l}n?n.forEach(Bxe):n=[s.defaultSighash];let a=s.sighash;if(!n.includes(a))throw new Error(`Input with not allowed sigHash=${a}. Allowed: ${n.join(", ")}`);let{sigOutputs:c}=this.inputSighash(r);if(c===Ir.SINGLE&&r>=this.outputs.length)throw new Error(`Input with sighash SINGLE, but there is no output with corresponding index=${r}`);let u=this.prevOut(o);if(s.txType==="taproot"){if(o.tapBip32Derivation)throw new Error("tapBip32Derivation unsupported");let h=this.inputs.map(this.prevOut),l=h.map(C=>C.script),g=h.map(C=>C.amount),x=!1,A=Bo.getPublicKey(t),E=o.tapMerkleRoot||Lr;if(o.tapInternalKey){let{pubKey:C,privKey:M}=Cxe(t,A,o.tapInternalKey,E),[N,R]=Zq(o.tapInternalKey,E);if(pr(N,C)){let V=this.preimageWitnessV1(r,l,a,g),q=Yf(Bo.sign(V,M,i),a!==Ir.DEFAULT?new Uint8Array([a]):Lr);this.updateInput(r,{tapKeySig:q},!0),x=!0}}if(o.tapLeafScript){o.tapScriptSig=o.tapScriptSig||[];for(let[C,M]of o.tapLeafScript){let N=M.subarray(0,-1),R=vn.decode(N),V=M[M.length-1],q=OA(N,V);if(R.findIndex(te=>kr(te)&&pr(te,A))===-1)continue;let G=this.preimageWitnessV1(r,l,a,g,void 0,N,V),z=Yf(Bo.sign(G,t,i),a!==Ir.DEFAULT?new Uint8Array([a]):Lr);this.updateInput(r,{tapScriptSig:[[{pubKey:A,leafHash:q},z]]},!0),x=!0}}if(!x)throw new Error("No taproot scripts signed");return!0}else{let h=Zbe(t),l=!1,g=VA(h);for(let E of vn.decode(s.lastScript))kr(E)&&(pr(E,h)||pr(E,g))&&(l=!0);if(!l)throw new Error(`Input script doesn't have pubKey: ${s.lastScript}`);let x;if(s.txType==="legacy")x=this.preimageLegacy(r,s.lastScript,a);else if(s.txType==="segwit"){let E=s.lastScript;s.last.type==="wpkh"&&(E=Sn.encode({type:"pkh",hash:s.last.hash})),x=this.preimageWitnessV0(r,E,a,u.amount)}else throw new Error(`Transaction/sign: unknown tx type: ${s.txType}`);let A=Qbe(x,t,this.opts.lowR);this.updateInput(r,{partialSig:[[h,Yf(A,new Uint8Array([a]))]]},!0)}return!0}sign(t,r,n){let i=0;for(let o=0;o<this.inputs.length;o++)try{this.signIdx(t,o,r,n)&&i++}catch{}if(!i)throw new Error("No inputs signed");return i}finalizeIdx(t){if(this.checkInputIdx(t),this.fee<0n)throw new Error("Outputs spends more than inputs amount");let r=this.inputs[t],n=this.inputType(r);if(n.txType==="taproot"){if(r.tapKeySig)r.finalScriptWitness=[r.tapKeySig];else if(r.tapLeafScript&&r.tapScriptSig){let c=r.tapLeafScript.sort((u,h)=>xp.encode(u[0]).length-xp.encode(h[0]).length);for(let[u,h]of c){let l=h.slice(0,-1),g=h[h.length-1],x=Sn.decode(l),A=OA(l,g),E=r.tapScriptSig.filter(M=>pr(M[0].leafHash,A)),C=[];if(x.type==="tr_ms"){let M=x.m,N=x.pubkeys,R=0;for(let V of N){let q=E.findIndex(W=>pr(W[0].pubKey,V));if(R===M||q===-1){C.push(Lr);continue}C.push(E[q][1]),R++}if(R!==M)continue}else if(x.type==="tr_ns"){for(let M of x.pubkeys){let N=E.findIndex(R=>pr(R[0].pubKey,M));N!==-1&&C.push(E[N][1])}if(C.length!==x.pubkeys.length)continue}else if(x.type==="unknown"&&this.opts.allowUnknownInputs){let M=vn.decode(l);if(C=E.map(([{pubKey:N},R])=>{let V=M.findIndex(q=>kr(q)&&pr(q,N));if(V===-1)throw new Error("finalize/taproot: cannot find position of pubkey in script");return{signature:R,pos:V}}).sort((N,R)=>N.pos-R.pos).map(N=>N.signature),!C.length)continue}else throw new Error("Finalize: Unknown tapLeafScript");r.finalScriptWitness=C.reverse().concat([l,xp.encode(u)]);break}if(!r.finalScriptWitness)throw new Error("finalize/taproot: empty witness")}else throw new Error("finalize/taproot: unknown input");r.finalScriptSig=Lr,$q(r);return}if(!r.partialSig||!r.partialSig.length)throw new Error("Not enough partial sign");let i=Lr,o=[];if(n.last.type==="ms"){let c=n.last.m,u=n.last.pubkeys,h=[];for(let l of u){let g=r.partialSig.find(x=>pr(l,x[0]));g&&h.push(g[1])}if(h=h.slice(0,c),h.length!==c)throw new Error(`Multisig: wrong signatures count, m=${c} n=${u.length} signatures=${h.length}`);i=vn.encode([0,...h])}else if(n.last.type==="pk")i=vn.encode([r.partialSig[0][1]]);else if(n.last.type==="pkh")i=vn.encode([r.partialSig[0][1],r.partialSig[0][0]]);else if(n.last.type==="wpkh")i=Lr,o=[r.partialSig[0][1],r.partialSig[0][0]];else if(n.last.type==="unknown"&&!this.opts.allowUnknownInputs)throw new Error("Unknown inputs not allowed");let s,a;if(n.type.includes("wsh-")&&(i.length&&n.lastScript.length&&(o=vn.decode(i).map(c=>{if(c===0)return Lr;if(kr(c))return c;throw new Error(`Wrong witness op=${c}`)})),o=o.concat(n.lastScript)),n.txType==="segwit"&&(a=o),n.type.startsWith("sh-wsh-")?s=vn.encode([vn.encode([0,Ei(n.lastScript)])]):n.type.startsWith("sh-")?s=vn.encode([...vn.decode(i),n.lastScript]):n.type.startsWith("wsh-")||n.txType!=="segwit"&&(s=i),!s&&!a)throw new Error("Unknown error finalizing input");s&&(r.finalScriptSig=s),a&&(r.finalScriptWitness=a),$q(r)}finalize(){for(let t=0;t<this.inputs.length;t++)this.finalizeIdx(t)}extract(){if(!this.isFinal)throw new Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw new Error("Transaction has no outputs");if(this.fee<0n)throw new Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(t){for(let i of["PSBTVersion","version","lockTime"])if(this.opts[i]!==t.opts[i])throw new Error(`Transaction/combine: different ${i} this=${this.opts[i]} other=${t.opts[i]}`);for(let i of["inputs","outputs"])if(this[i].length!==t[i].length)throw new Error(`Transaction/combine: different ${i} length this=${this[i].length} other=${t[i].length}`);let r=this.global.unsignedTx?Xa.encode(this.global.unsignedTx):Lr,n=t.global.unsignedTx?Xa.encode(t.global.unsignedTx):Lr;if(!pr(r,n))throw new Error("Transaction/combine: different unsigned tx");this.global=iP(gP,this.global,t.global);for(let i=0;i<this.inputs.length;i++)this.updateInput(i,t.inputs[i],!0);for(let i=0;i<this.outputs.length;i++)this.updateOutput(i,t.outputs[i],!0);return this}clone(){return e.fromPSBT(this.toPSBT(2),this.opts)}};var aH=ee(fg()),SP=ee(LI());p();y();p();y();var Nxe=O.array(O.object({address:O.string(),signingIndexes:O.array(O.number()),sigHash:O.number().optional(),isScriptSpend:O.boolean().optional()})),Uxe=O.object({chainType:rf,signingType:O.literal("transaction"),message:O.string().min(1),inputsToSign:Nxe.optional(),finalize:O.boolean()}),Dxe=O.object({chainType:rf,signingType:O.literal("message"),message:O.instanceof(Uint8Array)}),Lxe=Uxe.or(Dxe),Kxe=O.object({chainType:O.literal("solana"),signingType:O.literal("transaction"),message:O.union([O.string().min(1),O.instanceof(Uint8Array)])}),Fxe=O.object({chainType:O.literal("solana"),signingType:O.literal("message"),message:O.string().min(1)}),Vxe=Kxe.or(Fxe),qxe=O.object({chainType:O.literal("eip155"),signingType:O.literal("transaction"),message:O.string().min(1)}),Hxe=O.object({chainType:O.literal("eip155"),signingType:O.literal("message"),message:O.string().min(1)}),Wxe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(1),data:Y_}),zxe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(3),data:J_}),jxe=O.object({chainType:O.literal("eip155"),signingType:O.literal("typedData"),version:O.literal(4),data:Z_}),Gxe=qxe.or(Hxe).or(Wxe).or(zxe).or(jxe),$xe=O.object({isJWT:O.literal(!0),data:J4}),Yxe=O.object({status:O.literal("success"),signature:O.string()}),Jxe=O.object({status:O.literal("success"),signature:O.string()}),Zxe=O.object({status:O.literal("success"),signature:O.string(),message:O.instanceof(Uint8Array).optional()}),Qxe=O.object({status:O.literal("success"),signature:O.string(),signedJWT:Y4.optional()}),AP=Vxe.or(Gxe).or(Lxe).or($xe),lu=(E=>(E.InvalidInput="invalidInput",E.InvalidAccountId="invalidAccountId",E.InvalidAddressType="invalidAddressType",E.InvalidMessageEncoding="invalidMessageEncoding",E.InvalidDerivationPath="invalidDerivationPath",E.LedgerAppNotOpen="ledgerAppNotOpen",E.LedgerNotConnected="ledgerNotConnected",E.LedgerNeedPermission="ledgerNeedPermission",E.LedgerRejectAction="ledgerRejectAction",E.LedgerUnknownSignError="ledgerUnknownSignError",E.UnsupportedOperation="unsupportedOperation",E.InternalError="internalError",E.ExpiredTokenError="expiredToken",E.BeforeIATError="beforeTimeOfIssuance",E.InvalidClaimError="invalidClaim",E))(lu||{}),Xxe=O.object({status:O.literal("error"),type:O.nativeEnum(lu),message:O.string()}),ewe=O.union([Qxe,Zxe,Yxe,Jxe,Xxe]);var twe={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},Tr=(e,t)=>({status:"error",type:e,message:t??twe[e].message});var EP=e=>e.length===32?e:e.slice(1,33);function rwe(e){return io.Buffer.concat([(0,SP.encode)(e.byteLength),e])}function nwe(e){let{sha256:t}=aH.crypto,n=t(io.Buffer.from("BIP0322-signed-message"));return t(io.Buffer.concat([n,n,io.Buffer.from(e)])).toString("hex")}var iwe=(e,t)=>{switch(e){case"bip122_p2tr":return sM.getPublicKey(t);case"bip122_p2sh":return Uc(t,!0);case"bip122_p2wpkh":return Uc(t,!0);default:throw new Error("Unsupported Address Type")}},owe=(e,t)=>{let r=Jf;switch(e){case"bip122_p2tr":return oH(t,void 0,r);case"bip122_p2wpkh":return vP(t,r);case"bip122_p2sh":{let n=vP(t,r);return nH(n,r)}default:throw new Error("Unsupported Address Type")}};function swe(e,t,r,n){let i=Nd.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(o=>{let s=Js("bip122:000000000019d6689c085ae165831e93",o.address),a=e[s];if(!a)throw new Error("missing private key for ("+s+")");let{publicKey:c,privateKey:u}=a;o.signingIndexes.forEach(h=>{let l=i.getInput(h),g=l.witnessUtxo?.script&&Sn.decode(l.witnessUtxo.script);if(!o.isScriptSpend&&!l.tapInternalKey&&g?.type==="tr"&&i.updateInput(h,{tapInternalKey:EP(io.Buffer.from(c))}),o.sigHash)try{i.signIdx(u,h,[o.sigHash],fy(32))}catch{i.signIdx(u,h,void 0,fy(32))}else i.signIdx(u,h,void 0,fy(32));if(n)try{i.finalizeIdx(h)}catch{}})})}catch(o){throw console.error(o),new Error(`Error signing PSBT ${o.toString()}`)}return Promise.resolve(i.toPSBT(0))}var cH=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=io.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let o=io.Buffer.from(i).toString("hex"),s=iwe(r,o),a=owe(r,s),c=io.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),u=0,h=4294967295,l=0,g=vn.encode(["OP_0",io.Buffer.from(nwe(n),"hex")]),x=new Nd({allowUnknownOutputs:!0,version:u});x.addOutput({amount:BigInt(0),script:a.script}),x.addInput({txid:c,index:h,sequence:l,finalScriptSig:g});let A=new Nd({allowUnknownOutputs:!0,version:u});A.addInput({txid:x.id,index:0,sequence:l,tapInternalKey:r==="bip122_p2tr"?s:void 0,witnessUtxo:{script:a.script,amount:BigInt(0)},redeemScript:a.redeemScript}),A.addOutput({script:vn.encode(["RETURN"]),amount:BigInt(0)}),A.sign(io.Buffer.from(o,"hex"),void 0,fy(32)),A.finalize();let E=null,C=A.getInput(0);if(C.finalScriptWitness?.length){let M=(0,SP.encode)(C.finalScriptWitness?.length);E=io.Buffer.concat([M,...C.finalScriptWitness.map(N=>rwe(N))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:E.toString("hex"),message:A.toBytes()}}case"transaction":{let r=await swe(e,t.inputsToSign??[],io.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:io.Buffer.from(r).toString("hex")}}}}catch{return Tr("internalError")}}});p();y();var Yp=ee(Zr()),pG=ee(un());var ac=ee(hG()),yG=ee(sh());var mG=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=Yp.Buffer.from(e.privateKey.slice()),n=ac.SignTypedDataVersion.V1,{data:i}=t,o=(0,ac.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 3:{let r=Yp.Buffer.from(e.privateKey.slice()),n=ac.SignTypedDataVersion.V3,i=t.data,o=(0,ac.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}case 4:{let r=Yp.Buffer.from(e.privateKey.slice()),n=ac.SignTypedDataVersion.V4,i=t.data,o=(0,ac.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:o})}}break}case"message":{let r=t.message,n=(0,ac.personalSign)({privateKey:Yp.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=Yp.Buffer.from(t.message.replace("0x",""),"hex"),n=new es(e.privateKey),i=`0x${(0,yG.keccak256)(r)}`,o=(0,pG.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:o})}}}catch(r){return console.error(r),Promise.resolve(Tr("invalidMessageEncoding"))}}});p();y();var nh=ee(Zr());p();y();p();y();p();y();p();y();function gG(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function jAe(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function q5(e,...t){if(!jAe(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function bG(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gG(e.outputLen),gG(e.blockLen)}function Jp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xG(e,t){q5(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}p();y();p();y();var KS=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function wG(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var FS=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),da=(e,t)=>e<<32-t|e>>>t,GAe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!GAe)throw new Error("Non little-endian hardware is not supported");function $Ae(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Cb(e){if(typeof e=="string"&&(e=$Ae(e)),!wG(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function vG(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!wG(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Zp=class{clone(){return this._cloneInto()}},krt={}.toString;function AG(e){let t=n=>e().update(Cb(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function SG(e=32){if(KS&&typeof KS.getRandomValues=="function")return KS.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var VS=class extends Zp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,bG(t);let n=Cb(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return Jp(this),this.iHash.update(t),this}digestInto(t){Jp(this),q5(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},H5=(e,t,r)=>new VS(e,t).update(r).digest();H5.create=(e,t)=>new VS(e,t);p();y();p();y();var G5={};xE(G5,{bitGet:()=>tSe,bitLen:()=>eSe,bitMask:()=>Mb,bitSet:()=>rSe,bytesToHex:()=>Xd,bytesToNumberBE:()=>hu,bytesToNumberLE:()=>HS,concatBytes:()=>Qp,createHmacDrbg:()=>j5,ensureBytes:()=>No,equalBytes:()=>QAe,hexToBytes:()=>eh,hexToNumber:()=>z5,isBytes:()=>ha,numberToBytesBE:()=>ol,numberToBytesLE:()=>WS,numberToHexUnpadded:()=>TG,numberToVarBytesBE:()=>ZAe,utf8ToBytes:()=>XAe,validateObject:()=>sl});p();y();var kG=BigInt(0),qS=BigInt(1),YAe=BigInt(2);function ha(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var JAe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xd(e){if(!ha(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=JAe[e[r]];return t}function TG(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function z5(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var du={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function EG(e){if(e>=du._0&&e<=du._9)return e-du._0;if(e>=du._A&&e<=du._F)return e-(du._A-10);if(e>=du._a&&e<=du._f)return e-(du._a-10)}function eh(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=EG(e.charCodeAt(o)),a=EG(e.charCodeAt(o+1));if(s===void 0||a===void 0){let c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[i]=s*16+a}return n}function hu(e){return z5(Xd(e))}function HS(e){if(!ha(e))throw new Error("Uint8Array expected");return z5(Xd(Uint8Array.from(e).reverse()))}function ol(e,t){return eh(e.toString(16).padStart(t*2,"0"))}function WS(e,t){return ol(e,t).reverse()}function ZAe(e){return eh(TG(e))}function No(e,t,r){let n;if(typeof t=="string")try{n=eh(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(ha(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function Qp(...e){let t=0;for(let i=0;i<e.length;i++){let o=e[i];if(!ha(o))throw new Error("Uint8Array expected");t+=o.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function QAe(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function XAe(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function eSe(e){let t;for(t=0;e>kG;e>>=qS,t+=1);return t}function tSe(e,t){return e>>BigInt(t)&qS}var rSe=(e,t,r)=>e|(r?qS:kG)<<BigInt(t),Mb=e=>(YAe<<BigInt(e-1))-qS,W5=e=>new Uint8Array(e),IG=e=>Uint8Array.from(e);function j5(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=W5(e),i=W5(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...l)=>r(i,n,...l),c=(l=W5())=>{i=a(IG([0]),l),n=a(),l.length!==0&&(i=a(IG([1]),l),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0,g=[];for(;l<t;){n=a();let x=n.slice();g.push(x),l+=n.length}return Qp(...g)};return(l,g)=>{s(),c(l);let x;for(;!(x=g(u()));)c();return s(),x}}var nSe={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||ha(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function sl(e,t,r={}){let n=(i,o,s)=>{let a=nSe[o];if(typeof a!="function")throw new Error(`Invalid validator "${o}", expected function`);let c=e[i];if(!(s&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${o}`)};for(let[i,o]of Object.entries(t))n(i,o,!1);for(let[i,o]of Object.entries(r))n(i,o,!0);return e}var Fn=BigInt(0),Wr=BigInt(1),th=BigInt(2),iSe=BigInt(3),$5=BigInt(4),PG=BigInt(5),_G=BigInt(8),oSe=BigInt(9),sSe=BigInt(16);function Uo(e,t){let r=e%t;return r>=Fn?r:t+r}function aSe(e,t,r){if(r<=Fn||t<Fn)throw new Error("Expected power/modulo > 0");if(r===Wr)return Fn;let n=Wr;for(;t>Fn;)t&Wr&&(n=n*e%r),e=e*e%r,t>>=Wr;return n}function zS(e,t){if(e===Fn||t<=Fn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Uo(e,t),n=t,i=Fn,o=Wr,s=Wr,a=Fn;for(;r!==Fn;){let u=n/r,h=n%r,l=i-s*u,g=o-a*u;n=r,r=h,i=s,o=a,s=l,a=g}if(n!==Wr)throw new Error("invert: does not exist");return Uo(i,t)}function cSe(e){let t=(e-Wr)/th,r,n,i;for(r=e-Wr,n=0;r%th===Fn;r/=th,n++);for(i=th;i<e&&aSe(i,t,e)!==e-Wr;i++);if(n===1){let s=(e+Wr)/$5;return function(c,u){let h=c.pow(u,s);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}let o=(r+Wr)/th;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,h=a.pow(a.mul(a.ONE,i),r),l=a.pow(c,o),g=a.pow(c,r);for(;!a.eql(g,a.ONE);){if(a.eql(g,a.ZERO))return a.ZERO;let x=1;for(let E=a.sqr(g);x<u&&!a.eql(E,a.ONE);x++)E=a.sqr(E);let A=a.pow(h,Wr<<BigInt(u-x-1));h=a.sqr(A),l=a.mul(l,A),g=a.mul(g,h),u=x}return l}}function uSe(e){if(e%$5===iSe){let t=(e+Wr)/$5;return function(n,i){let o=n.pow(i,t);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%_G===PG){let t=(e-PG)/_G;return function(n,i){let o=n.mul(i,th),s=n.pow(o,t),a=n.mul(i,s),c=n.mul(n.mul(a,th),s),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e%sSe,cSe(e)}var fSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y5(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=fSe.reduce((n,i)=>(n[i]="function",n),t);return sl(e,r)}function lSe(e,t,r){if(r<Fn)throw new Error("Expected power > 0");if(r===Fn)return e.ONE;if(r===Wr)return t;let n=e.ONE,i=t;for(;r>Fn;)r&Wr&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Wr;return n}function dSe(e,t){let r=new Array(t.length),n=t.reduce((o,s,a)=>e.is0(s)?o:(r[a]=o,e.mul(o,s)),e.ONE),i=e.inv(n);return t.reduceRight((o,s,a)=>e.is0(s)?o:(r[a]=e.mul(o,r[a]),e.mul(o,s)),i),r}function J5(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function BG(e,t,r=!1,n={}){if(e<=Fn)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=J5(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=uSe(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:Mb(i),ZERO:Fn,ONE:Wr,create:c=>Uo(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Fn<=c&&c<e},is0:c=>c===Fn,isOdd:c=>(c&Wr)===Wr,neg:c=>Uo(-c,e),eql:(c,u)=>c===u,sqr:c=>Uo(c*c,e),add:(c,u)=>Uo(c+u,e),sub:(c,u)=>Uo(c-u,e),mul:(c,u)=>Uo(c*u,e),pow:(c,u)=>lSe(a,c,u),div:(c,u)=>Uo(c*zS(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>zS(c,e),sqrt:n.sqrt||(c=>s(a,c)),invertBatch:c=>dSe(a,c),cmov:(c,u,h)=>h?u:c,toBytes:c=>r?WS(c,o):ol(c,o),fromBytes:c=>{if(c.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${c.length}`);return r?HS(c):hu(c)}});return Object.freeze(a)}function CG(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Z5(e){let t=CG(e);return t+Math.ceil(t/2)}function jS(e,t,r=!1){let n=e.length,i=CG(t),o=Z5(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=r?hu(e):HS(e),a=Uo(s,t-Wr)+Wr;return r?WS(a,i):ol(a,i)}p();y();var hSe=BigInt(0),Q5=BigInt(1);function RG(e,t){let r=(i,o)=>{let s=o.negate();return i?s:o},n=i=>{let o=Math.ceil(t/i)+1,s=2**(i-1);return{windows:o,windowSize:s}};return{constTimeNegate:r,unsafeLadder(i,o){let s=e.ZERO,a=i;for(;o>hSe;)o&Q5&&(s=s.add(a)),a=a.double(),o>>=Q5;return s},precomputeWindow(i,o){let{windows:s,windowSize:a}=n(o),c=[],u=i,h=u;for(let l=0;l<s;l++){h=u,c.push(h);for(let g=1;g<a;g++)h=h.add(u),c.push(h);u=h.double()}return c},wNAF(i,o,s){let{windows:a,windowSize:c}=n(i),u=e.ZERO,h=e.BASE,l=BigInt(2**i-1),g=2**i,x=BigInt(i);for(let A=0;A<a;A++){let E=A*c,C=Number(s&l);s>>=x,C>c&&(C-=g,s+=Q5);let M=E,N=E+Math.abs(C)-1,R=A%2!==0,V=C<0;C===0?h=h.add(r(R,o[M])):u=u.add(r(V,o[N]))}return{p:u,f:h}},wNAFCached(i,o,s,a){let c=i._WINDOW_SIZE||1,u=o.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&o.set(i,a(u))),this.wNAF(c,u,s)}}}function X5(e){return Y5(e.Fp),sl(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...J5(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function pSe(e){let t=X5(e);sl(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:ySe,hexToBytes:mSe}=G5,rh={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=rh;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ySe(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=rh,r=typeof e=="string"?mSe(e):e;if(!ha(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=rh._parseInt(r.subarray(2)),{d:s,l:a}=rh._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{let h=u.toString(16);return h.length&1?`0${h}`:h},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return`30${r(s+o+4)}02${c}${i}02${a}${n}`}},pu=BigInt(0),gs=BigInt(1),$rt=BigInt(2),OG=BigInt(3),Yrt=BigInt(4);function gSe(e){let t=pSe(e),{Fp:r}=t,n=t.toBytes||((A,E,C)=>{let M=E.toAffine();return Qp(Uint8Array.from([4]),r.toBytes(M.x),r.toBytes(M.y))}),i=t.fromBytes||(A=>{let E=A.subarray(1),C=r.fromBytes(E.subarray(0,r.BYTES)),M=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:C,y:M}});function o(A){let{a:E,b:C}=t,M=r.sqr(A),N=r.mul(M,A);return r.add(r.add(N,r.mul(A,E)),C)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(A){return typeof A=="bigint"&&pu<A&&A<t.n}function a(A){if(!s(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(A){let{allowedPrivateKeyLengths:E,nByteLength:C,wrapPrivateKey:M,n:N}=t;if(E&&typeof A!="bigint"){if(ha(A)&&(A=Xd(A)),typeof A!="string"||!E.includes(A.length))throw new Error("Invalid key");A=A.padStart(C*2,"0")}let R;try{R=typeof A=="bigint"?A:hu(No("private key",A,C))}catch{throw new Error(`private key must be ${C} bytes, hex or bigint, not ${typeof A}`)}return M&&(R=Uo(R,N)),a(R),R}let u=new Map;function h(A){if(!(A instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(E,C,M){if(this.px=E,this.py=C,this.pz=M,E==null||!r.isValid(E))throw new Error("x required");if(C==null||!r.isValid(C))throw new Error("y required");if(M==null||!r.isValid(M))throw new Error("z required")}static fromAffine(E){let{x:C,y:M}=E||{};if(!E||!r.isValid(C)||!r.isValid(M))throw new Error("invalid affine point");if(E instanceof l)throw new Error("projective point not allowed");let N=R=>r.eql(R,r.ZERO);return N(C)&&N(M)?l.ZERO:new l(C,M,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let C=r.invertBatch(E.map(M=>M.pz));return E.map((M,N)=>M.toAffine(C[N])).map(l.fromAffine)}static fromHex(E){let C=l.fromAffine(i(No("pointHex",E)));return C.assertValidity(),C}static fromPrivateKey(E){return l.BASE.multiply(c(E))}_setWindowSize(E){this._WINDOW_SIZE=E,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:E,y:C}=this.toAffine();if(!r.isValid(E)||!r.isValid(C))throw new Error("bad point: x or y not FE");let M=r.sqr(C),N=o(E);if(!r.eql(M,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:E}=this.toAffine();if(r.isOdd)return!r.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.eql(r.mul(C,q),r.mul(R,N)),G=r.eql(r.mul(M,q),r.mul(V,N));return W&&G}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){let{a:E,b:C}=t,M=r.mul(C,OG),{px:N,py:R,pz:V}=this,q=r.ZERO,W=r.ZERO,G=r.ZERO,z=r.mul(N,N),te=r.mul(R,R),_=r.mul(V,V),f=r.mul(N,R);return f=r.add(f,f),G=r.mul(N,V),G=r.add(G,G),q=r.mul(E,G),W=r.mul(M,_),W=r.add(q,W),q=r.sub(te,W),W=r.add(te,W),W=r.mul(q,W),q=r.mul(f,q),G=r.mul(M,G),_=r.mul(E,_),f=r.sub(z,_),f=r.mul(E,f),f=r.add(f,G),G=r.add(z,z),z=r.add(G,z),z=r.add(z,_),z=r.mul(z,f),W=r.add(W,z),_=r.mul(R,V),_=r.add(_,_),z=r.mul(_,f),q=r.sub(q,z),G=r.mul(_,te),G=r.add(G,G),G=r.add(G,G),new l(q,W,G)}add(E){h(E);let{px:C,py:M,pz:N}=this,{px:R,py:V,pz:q}=E,W=r.ZERO,G=r.ZERO,z=r.ZERO,te=t.a,_=r.mul(t.b,OG),f=r.mul(C,R),m=r.mul(M,V),b=r.mul(N,q),w=r.add(C,M),v=r.add(R,V);w=r.mul(w,v),v=r.add(f,m),w=r.sub(w,v),v=r.add(C,N);let P=r.add(R,q);return v=r.mul(v,P),P=r.add(f,b),v=r.sub(v,P),P=r.add(M,N),W=r.add(V,q),P=r.mul(P,W),W=r.add(m,b),P=r.sub(P,W),z=r.mul(te,v),W=r.mul(_,b),z=r.add(W,z),W=r.sub(m,z),z=r.add(m,z),G=r.mul(W,z),m=r.add(f,f),m=r.add(m,f),b=r.mul(te,b),v=r.mul(_,v),m=r.add(m,b),b=r.sub(f,b),b=r.mul(te,b),v=r.add(v,b),f=r.mul(m,v),G=r.add(G,f),f=r.mul(P,v),W=r.mul(w,W),W=r.sub(W,f),f=r.mul(w,m),z=r.mul(P,z),z=r.add(z,f),new l(W,G,z)}subtract(E){return this.add(E.negate())}is0(){return this.equals(l.ZERO)}wNAF(E){return x.wNAFCached(this,u,E,C=>{let M=r.invertBatch(C.map(N=>N.pz));return C.map((N,R)=>N.toAffine(M[R])).map(l.fromAffine)})}multiplyUnsafe(E){let C=l.ZERO;if(E===pu)return C;if(a(E),E===gs)return this;let{endo:M}=t;if(!M)return x.unsafeLadder(this,E);let{k1neg:N,k1:R,k2neg:V,k2:q}=M.splitScalar(E),W=C,G=C,z=this;for(;R>pu||q>pu;)R&gs&&(W=W.add(z)),q&gs&&(G=G.add(z)),z=z.double(),R>>=gs,q>>=gs;return N&&(W=W.negate()),V&&(G=G.negate()),G=new l(r.mul(G.px,M.beta),G.py,G.pz),W.add(G)}multiply(E){a(E);let C=E,M,N,{endo:R}=t;if(R){let{k1neg:V,k1:q,k2neg:W,k2:G}=R.splitScalar(C),{p:z,f:te}=this.wNAF(q),{p:_,f}=this.wNAF(G);z=x.constTimeNegate(V,z),_=x.constTimeNegate(W,_),_=new l(r.mul(_.px,R.beta),_.py,_.pz),M=z.add(_),N=te.add(f)}else{let{p:V,f:q}=this.wNAF(C);M=V,N=q}return l.normalizeZ([M,N])[0]}multiplyAndAddUnsafe(E,C,M){let N=l.BASE,R=(q,W)=>W===pu||W===gs||!q.equals(N)?q.multiplyUnsafe(W):q.multiply(W),V=R(this,C).add(R(E,M));return V.is0()?void 0:V}toAffine(E){let{px:C,py:M,pz:N}=this,R=this.is0();E==null&&(E=R?r.ONE:r.inv(N));let V=r.mul(C,E),q=r.mul(M,E),W=r.mul(N,E);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(W,r.ONE))throw new Error("invZ was invalid");return{x:V,y:q}}isTorsionFree(){let{h:E,isTorsionFree:C}=t;if(E===gs)return!0;if(C)return C(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:C}=t;return E===gs?this:C?C(l,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return this.assertValidity(),n(l,this,E)}toHex(E=!0){return Xd(this.toRawBytes(E))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,x=RG(l,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function bSe(e){let t=X5(e);return sl(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function NG(e){let t=bSe(e),{Fp:r,n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(v){return pu<v&&v<r.ORDER}function a(v){return Uo(v,n)}function c(v){return zS(v,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:g}=gSe({...t,toBytes(v,P,B){let k=P.toAffine(),d=r.toBytes(k.x),S=Qp;return B?S(Uint8Array.from([P.hasEvenY()?2:3]),d):S(Uint8Array.from([4]),d,r.toBytes(k.y))},fromBytes(v){let P=v.length,B=v[0],k=v.subarray(1);if(P===i&&(B===2||B===3)){let d=hu(k);if(!s(d))throw new Error("Point is not on curve");let S=l(d),F=r.sqrt(S),U=(F&gs)===gs;return(B&1)===1!==U&&(F=r.neg(F)),{x:d,y:F}}else if(P===o&&B===4){let d=r.fromBytes(k.subarray(0,r.BYTES)),S=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:d,y:S}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),x=v=>Xd(ol(v,t.nByteLength));function A(v){let P=n>>gs;return v>P}function E(v){return A(v)?a(-v):v}let C=(v,P,B)=>hu(v.slice(P,B));class M{constructor(P,B,k){this.r=P,this.s=B,this.recovery=k,this.assertValidity()}static fromCompact(P){let B=t.nByteLength;return P=No("compactSignature",P,B*2),new M(C(P,0,B),C(P,B,2*B))}static fromDER(P){let{r:B,s:k}=rh.toSig(No("DER",P));return new M(B,k)}assertValidity(){if(!g(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!g(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new M(this.r,this.s,P)}recoverPublicKey(P){let{r:B,s:k,recovery:d}=this,S=G(No("msgHash",P));if(d==null||![0,1,2,3].includes(d))throw new Error("recovery id invalid");let F=d===2||d===3?B+t.n:B;if(F>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let U=d&1?"03":"02",D=u.fromHex(U+x(F)),Y=c(F),j=a(-S*Y),X=a(k*Y),fe=u.BASE.multiplyAndAddUnsafe(D,j,X);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return eh(this.toDERHex())}toDERHex(){return rh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return eh(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}let N={isValidPrivateKey(v){try{return h(v),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let v=Z5(t.n);return jS(t.randomBytes(v),t.n)},precompute(v=8,P=u.BASE){return P._setWindowSize(v),P.multiply(BigInt(3)),P}};function R(v,P=!0){return u.fromPrivateKey(v).toRawBytes(P)}function V(v){let P=ha(v),B=typeof v=="string",k=(P||B)&&v.length;return P?k===i||k===o:B?k===2*i||k===2*o:v instanceof u}function q(v,P,B=!0){if(V(v))throw new Error("first arg must be private key");if(!V(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(h(v)).toRawBytes(B)}let W=t.bits2int||function(v){let P=hu(v),B=v.length*8-t.nBitLength;return B>0?P>>BigInt(B):P},G=t.bits2int_modN||function(v){return a(W(v))},z=Mb(t.nBitLength);function te(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(pu<=v&&v<z))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ol(v,t.nByteLength)}function _(v,P,B=f){if(["recovered","canonical"].some(K=>K in B))throw new Error("sign() legacy options not supported");let{hash:k,randomBytes:d}=t,{lowS:S,prehash:F,extraEntropy:U}=B;S==null&&(S=!0),v=No("msgHash",v),F&&(v=No("prehashed msgHash",k(v)));let D=G(v),Y=h(P),j=[te(Y),te(D)];if(U!=null){let K=U===!0?d(r.BYTES):U;j.push(No("extraEntropy",K))}let X=Qp(...j),fe=D;function ue(K){let Z=W(K);if(!g(Z))return;let J=c(Z),ne=u.BASE.multiply(Z).toAffine(),pe=a(ne.x);if(pe===pu)return;let re=a(J*a(fe+pe*Y));if(re===pu)return;let ae=(ne.x===pe?0:2)|Number(ne.y&gs),ut=re;return S&&A(re)&&(ut=E(re),ae^=1),new M(pe,ut,ae)}return{seed:X,k2sig:ue}}let f={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(v,P,B=f){let{seed:k,k2sig:d}=_(v,P,B),S=t;return j5(S.hash.outputLen,S.nByteLength,S.hmac)(k,d)}u.BASE._setWindowSize(8);function w(v,P,B,k=m){let d=v;if(P=No("msgHash",P),B=No("publicKey",B),"strict"in k)throw new Error("options.strict was renamed to lowS");let{lowS:S,prehash:F}=k,U,D;try{if(typeof d=="string"||ha(d))try{U=M.fromDER(d)}catch(ne){if(!(ne instanceof rh.Err))throw ne;U=M.fromCompact(d)}else if(typeof d=="object"&&typeof d.r=="bigint"&&typeof d.s=="bigint"){let{r:ne,s:pe}=d;U=new M(ne,pe)}else throw new Error("PARSE");D=u.fromHex(B)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(S&&U.hasHighS())return!1;F&&(P=t.hash(P));let{r:Y,s:j}=U,X=G(P),fe=c(j),ue=a(X*fe),K=a(Y*fe),Z=u.BASE.multiplyAndAddUnsafe(D,ue,K)?.toAffine();return Z?a(Z.x)===Y:!1}return{CURVE:t,getPublicKey:R,getSharedSecret:q,sign:b,verify:w,ProjectivePoint:u,Signature:M,utils:N}}function xSe(e){return{hash:e,hmac:(t,...r)=>H5(e,t,vG(...r)),randomBytes:SG}}function UG(e,t){let r=n=>NG({...e,...xSe(n)});return Object.freeze({...r(t),create:r})}p();y();p();y();function wSe(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}var GS=class extends Zp{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=FS(this.buffer)}update(t){Jp(this);let{view:r,buffer:n,blockLen:i}=this;t=Cb(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=FS(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Jp(this),xG(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let l=s;l<i;l++)r[l]=0;wSe(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=FS(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,h[l],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var vSe=(e,t,r)=>e&t^~e&r,ASe=(e,t,r)=>e&t^e&r^t&r,SSe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),al=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cl=new Uint32Array(64),e_=class extends GS{constructor(){super(64,32,8,!1),this.A=al[0]|0,this.B=al[1]|0,this.C=al[2]|0,this.D=al[3]|0,this.E=al[4]|0,this.F=al[5]|0,this.G=al[6]|0,this.H=al[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)cl[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let g=cl[l-15],x=cl[l-2],A=da(g,7)^da(g,18)^g>>>3,E=da(x,17)^da(x,19)^x>>>10;cl[l]=E+cl[l-7]+A+cl[l-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:h}=this;for(let l=0;l<64;l++){let g=da(a,6)^da(a,11)^da(a,25),x=h+g+vSe(a,c,u)+SSe[l]+cl[l]|0,E=(da(n,2)^da(n,13)^da(n,22))+ASe(n,i,o)|0;h=u,u=c,c=a,a=s+x|0,s=o,o=i,i=n,n=x+E|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(n,i,o,s,a,c,u,h)}roundClean(){cl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var DG=AG(()=>new e_);var LG=BG(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),ESe=LG.create(BigInt("-3")),ISe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Rb=UG({a:ESe,b:ISe,Fp:LG,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},DG);var KG=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(Tr("invalidAddressType"));let r=Math.floor(Date.now()/1e3);if(t.data.payload.iat>r)return Promise.resolve(Tr("beforeTimeOfIssuance"));if(t.data.payload.exp<r)return Promise.resolve(Tr("expiredToken"));if(t.data.payload.iss!==gg)return Promise.resolve(Tr("invalidClaim"));if(t.data.payload.aud!==bg)return Promise.resolve(Tr("invalidClaim"));let n={...t.data.header,kid:ti(nh.Buffer.from(e.publicKey))},i={...t.data.payload,sub:ti(nh.Buffer.from(e.publicKey))},o=ti(nh.Buffer.from(JSON.stringify(n)))+"."+ti(nh.Buffer.from(JSON.stringify(i))),a=Rb.sign(nh.Buffer.from(o).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),c=ti(nh.Buffer.from(a)),u={header:n,payload:i,signature:c};return Promise.resolve({status:"success",signature:c,signedJWT:u})}});p();y();var FG=ee(Zr());var t_=ee(Ns()),VG=ee(ch());var qG=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(Tr("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=t_.default.decode(t.message):r=FG.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(Tr("invalidMessageEncoding"))}let n=t_.default.encode(VG.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});p();y();var $S=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[r.chainType].sign(t,r);case"eip155":return this.#e.keyPair[r.chainType].sign(t,r);case"solana":return this.#e.keyPair[r.chainType].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}};p();y();var HG=e=>AP.safeParse(e).success;p();y();var kSe=e=>({getSeed:t=>TSe(e,t),setSeed:(t,r)=>PSe(e,t,r),getClientJWTSigner:(t,r)=>_Se(e,t,r),setClientJWTSigner:(t,r,n)=>BSe(e,t,r,n),removeSeeds:t=>WG(e,t),removeClientJWTKeypairs:t=>zG(e,t),clear:async()=>{await WG(e,"all"),await zG(e,"all")}}),ul=`${Xs}.cache.secrets`,r_=e=>`${Xs}.cache.seed.${e}`,n_=e=>`${Xs}.cache.client-jwt.${e}`,TSe=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=r_(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:o,encoding:s}=i.seed;return new Uint8Array(Buffer.from(o,s))},PSe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let o=r_(n);await r.setSecureValue(o,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let s=await t.get(ul);if(!s)s={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let a=new Set(s.seedIdentifiers);a.add(n),s.seedIdentifiers=Array.from(a)}await t.set(ul,s)},WG=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(ul);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,o=new Set(i),s=n.seedIdentifiers.filter(a=>o.has(a));await t.removeSecureValue(s.map(r_)),await e.set(ul,{version:1,seedIdentifiers:n.seedIdentifiers.filter(a=>!o.has(a)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},_Se=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=n_(r),o=null;try{o=await t.getSecureValue(i)}catch{}if(!o||!o.keyPairs[n])return null;let s=o.keyPairs[n],a=new Uint8Array(Buffer.from(s.p256pubkey.bytes,s.p256pubkey.encoding)),c=new Uint8Array(Buffer.from(s.p256privkey.bytes,s.p256privkey.encoding));return{p256pubkey:a,p256privkey:c}},BSe=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,o)=>{if(!e())return;let s=n_(n),a=await r.getSecureValue(s)??{version:1,identifier:n,keyPairs:{}};a.keyPairs[i]={p256pubkey:{bytes:ti(Buffer.from(o.p256pubkey)),encoding:"base64"},p256privkey:{bytes:ti(Buffer.from(o.p256privkey)),encoding:"base64"}},await r.setSecureValue(s,a);let c=await t.get(ul);if(!c)c={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let u=new Set(c.clientJWTKeypairIdentifiers??[]);u.add(n),c.clientJWTKeypairIdentifiers=Array.from(u)}await t.set(ul,c)},zG=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(ul);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,o=new Set(i);await t.removeSecureValue(i.map(n_)),await e.set(ul,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(s=>!o.has(s))})};p();y();p();y();p();y();p();y();p();y();async function i_(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}p();y();var jG=ee(Zr());var MSe=ee(ch());p();y();var o_=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],ait=new Set(o_);var RSe=(e,t,r,n,i)=>{let o;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":o=ly;break;case"sha512":o=xo;break}return dB(o,e,t,{c:r,dkLen:n})},OSe=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},GG=e=>e.map(t=>OSe(t.toString(2),"0",8)).join(""),NSe=e=>parseInt(e,2),USe=e=>{let r=e.length*8/32,n=ly(e);return GG(Array.from(n)).slice(0,r)};var s_=async e=>{let t=o_;if(e.length<16)throw new Error("InvalidEntropy");if(e.length>32)throw new Error("InvalidEntropy");if(e.length%4!==0)throw new Error("InvalidEntropy");let r=GG(Array.from(e)),n=USe(e),o=(r+n).match(/(.{1,11})/g);if(!o)throw new Error("InvalidEntropy");let s=o.map(u=>{let h=NSe(u);return t[h]}),a=jG.Buffer.from(s.join(" "));return{seed:await i_({mnemonic:a,pbkdf2:RSe}),mnemonic:a}};p();y();var DSe=ee(ch()),vit=new RegExp("^m(\\/[0-9]+')+$");p();y();async function Xp(e,t){let r=await UV(e,t);if(!r)throw new iu;let n=lo.from(r.entropy);return r.entropy.fill(0),n}async function Vn(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let o=await Xp(e,t),{seed:s}=await o.foldAsync(s_);r=s,await e.secureCache.setSeed(t,r)}let i=lo.from(r);return r.fill(0),i}p();y();var a_=ee(sh());function ih(e){return e.fold(a_.keccak256)}function fl(e,t,r){let n=Xc[r];return a_.keccak256(`${e}:${t}:${n}`)}function cc(e,t,r,n){let i={};for(let o of n){let{publicKey:s}=e.keypairGenerator.generateKeypairFromSeed(t,r,o),a=mi.getAddressType(o);switch(o){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[a]={chainType:a,pathType:o,publicKey:s,addresses:Object.values(sn).reduce((c,u)=>({...c,[u]:ro({publicKey:s,addressType:a,networkID:u})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[a]={chainType:a,pathType:o,publicKey:ro({publicKey:s,addressType:a})};break}default:xe(o)}}return i}async function $G(e,t){let r=new Set,n=await hr(e);for(let o of n)o.type==="seed"&&o.seedIdentifier===t&&Xc[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return YG(e,t,i)}async function YG(e,t,r){try{return await LSe(e,t,r)}catch(n){if(n instanceof Ya)return await YG(e,t,r+1);throw n}}async function LSe(e,t,r){let n=await Vn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Zs(i),s=await fl(t,r,o[0]),a={version:1,type:"seed",identifier:s,seedIdentifier:t,derivationIndex:r,chains:cc(e,n,r,o)};return await Si(e,a,!1),a}p();y();var r$=ee(Q1());var n$=ee(fg()),i$=ee(t$()),o$=ee(sh());function WSe(e,t,r){let n=Xc[r];return o$.keccak256(`${e}:${t}:${n}`)}async function s$(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let o=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,s=WSe(t,i.derivationIndex,o);n$.initEccLib(r$);let a=(0,i$.ECPairFactory)(r$),c={...i.addresses.reduce((h,l)=>{let g=mi.getAddressType(l.pathType);switch(g){case"eip155":case"solana":{h[g]={chainType:g,pathType:l.pathType,publicKey:l.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");default:xe(g)}return h},{}),...i.publicKeys.reduce((h,l)=>{let g=mi.getAddressType(l.pathType);switch(g){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let x=a.fromPublicKey(Buffer.from(l.value,"hex")),A=new Uint8Array(x.publicKey);h[g]={chainType:g,pathType:l.pathType,publicKey:A,addresses:Object.values(sn).reduce((E,C)=>({...E,[C]:ro({publicKey:A,addressType:g,networkID:C})}),{})};break}default:xe(g)}return h},{})},u={version:1,type:"ledger",identifier:s,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:c};n.push(u),await Si(e,u)}return n}p();y();var a$=ee(sh());function zSe(e){return a$.keccak256(e)}async function c$(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),o=await Po(e),s=zSe(i.publicKey);if((o?.privateKeyIdentifiers??[]).includes(s))throw new Og;let u={version:1,identifier:s,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},h=s,l;switch(t){case"eip155":case"solana":{l={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:ro({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{l={version:1,type:"privateKey",identifier:h,privateKeyIdentifier:s,publicKey:i.publicKey,addresses:Object.values(sn).reduce((g,x)=>({...g,[x]:ro({publicKey:i.publicKey,addressType:t,networkID:x})}),{}),chainType:t};break}default:xe(t)}if(!l)throw new Error("unable to create a private key account based on the address type");return await Si(e,l),await DV(e,u),l}p();y();var u$=ee(sh());function jSe(e){return u$.keccak256(e)}async function f$(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Mg;let n=jSe(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await Si(e,i),i}p();y();async function l$(e,t){let r=new Set,n=await hr(e);for(let o of n)o.type==="seedless"&&o.seedIdentifier===t&&Xc[Object.values(o.chains)[0].pathType]===0&&r.add(o.derivationIndex);let i=0;for(let o=0;o<=r.size;o++)if(!r.has(o)){i=o;break}return d$(e,t,i)}async function d$(e,t,r){try{return await GSe(e,t,r)}catch(n){if(n instanceof Ya)return await d$(e,t,r+1);throw n}}async function GSe(e,t,r){let n=await Vn(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,o=Zs(i),s=await fl(t,r,o[0]),a={version:1,type:"seedless",identifier:s,seedIdentifier:t,derivationIndex:r,chains:cc(e,n,r,o)};return await Si(e,a,!1),a}p();y();p();y();p();y();async function ry(e,t){let r=await Po(e),n=ih(t),i=r?.seedIdentifiers??[],o=r?.seedlessIdentifiers??[];return i.concat(o).includes(n)}async function JS(e,t,r,n){if((await oA(e)).length>0)throw new q2;if(n.length===0)throw new Rg;if(await ry(e,t))throw new wd;let s=ih(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await KV(e,a);let c=[],u=await Vn(e,s);for(let h of n){let l=fl(s,h.derivationIndex,h.derivationPathTypes[0]),g=cc(e,u,h.derivationIndex,h.derivationPathTypes),x={version:1,type:"seedless",identifier:l,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:g};await Si(e,x),c.push(x)}return c}async function h$(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Zs(n);return(await JS(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}p();y();p();y();async function ZS(e,t,r,n,i=!1){let o=await ry(e,t);if(!i&&o)throw new wd;let s=ih(t),a=t.fold(h=>({version:1,identifier:s,name:r,entropy:new Uint8Array(h)}));await LV(e,a);let c=[],u=await Vn(e,s);for(let h of n){let l=await fl(s,h.derivationIndex,h.derivationPathTypes[0]),g=cc(e,u,h.derivationIndex,h.derivationPathTypes),x={version:1,type:"seed",identifier:l,seedIdentifier:s,derivationIndex:h.derivationIndex,chains:g};await Si(e,x),c.push(x)}return c}async function p$(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,o=Zs(n);return(await ZS(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:o}]))[0]}p();y();var y$=ee(sh());function $Se(e){return y$.keccak256(e)}async function m$(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:o}of t){let s=$Se(n),a={version:1,type:"seedVault",identifier:s,derivationPath:i,authToken:o,publicKey:n,chainType:"solana"};r.push(a),await Si(e,a)}return r}p();y();p();y();async function QS(e,t,r){let i=(await hr(e)).find(o=>o.identifier===t);if(!i)throw new $a;switch(i.type){case"seed":case"seedless":{let o=i.chains[r]?.pathType;if(!o)throw new Vf;let s=await Vn(e,i.seedIdentifier),a=e.keypairGenerator.generateKeypairFromSeed(s,i.derivationIndex,o);return lo.from(a.privateKey)}case"privateKey":{let o=await up(e,i.privateKeyIdentifier);if(o.chainType!==r)throw new Vf;let s=e.keypairGenerator.generateKeypairFromPrivateKey(lo.from(o.privateKey),r);return lo.from(s.privateKey)}case"ledger":case"seedVault":throw new Bg;case"readOnly":throw new Cg;default:(o=>{throw new Error("invalid account type")})(i)}}var YSe=new iu,JSe=new Vf,ZSe=new vd,an={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function x$(e,t=!1){let r;try{if(r=await hr(e),r.length===0)return an.unonboarded}catch{return an.unableToLoadAccounts}return t?QSe(e,r):w$(e,r)}var QSe=async(e,t)=>{let r=await w$(e,t);if(r.status!=="safely-onboarded")return r;try{let s=await TT(e);if(s?.version===3&&s?.isSafelyOnboarded)return an.safelyOnboarded}catch{return an.fetchIntegrityStorageError}let n=await b$(e,t,"seed"),i=await b$(e,t,"seedless"),o=await XSe(e,t);return n.status!=="safely-onboarded"?n:i.status!=="safely-onboarded"?i:o.status!=="safely-onboarded"?o:(await kT(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),an.safelyOnboarded)},w$=async(e,t)=>{try{if((await TT(e))?.isSafelyOnboarded)return an.safelyOnboarded}catch{return an.fetchIntegrityStorageError}let r=await g$(e,t,"seed"),n=await g$(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await kT(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),an.safelyOnboarded)},g$=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Xp(e,i)}catch(o){if(o instanceof Error){if(o.message===YSe.message)return an.invalidIdentifier;if(o.message.match(/ExpoSecureStorage/))return an.fetchEntropyStorageError}return an.internalError}return an.safelyOnboarded},b$=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Vn(e,i)}catch(o){return o instanceof Error&&o.message.match(/ExpoSecureStorage/)?an.fetchEntropyStorageError:an.invalidEntropy}return an.safelyOnboarded},XSe=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await QS(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===JSe.message)return an.invalidPkAddressType;if(n.message===ZSe.message)return an.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return an.fetchPkStorageError}return an.invalidPk}return an.safelyOnboarded};p();y();async function v$(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await hr(e);if(n.length===0)return r;let i=new Map;for(let o of n){if(o.type!=="seed")continue;let s=i.get(o.seedIdentifier);s?s.push(o):i.set(o.seedIdentifier,[o])}for(let[o,s]of i){let a;for(let c of s)if(!(c.chains&&!qk(Object.values(c.chains)[0].pathType)))for(let u of t){if(c.chains[u])continue;a||(a=await Vn(e,o));let l=Zs([u]),g=cc(e,a,c.derivationIndex,l);c.chains={...c.chains,...g},r=!0}}return r&&await ea(e,n),r}p();y();p();y();var l_="m/23001'/0'";async function XS(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,l_);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await Vn(e,t.seedIdentifier)).fold(s=>new qs(s));break}case"privateKey":{let o=await up(e,t.privateKeyIdentifier);i=new qs(o.privateKey);break}}try{let o=i.derivePath({ellipticCurve:"ed25519",derivationPath:l_}),s=jS(o.secretKey,Rb.CURVE.n),a=Rb.getPublicKey(s);return await e.secureCache.setClientJWTSigner(r,l_,{p256pubkey:a,p256privkey:s}),{publicKey:a,privateKey:s}}finally{i.cleanup()}}var A$=async(e,t)=>{let r=await hr(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let n=r.find(i=>{switch(i.type){case"seed":return i.seedIdentifier===t;case"privateKey":return i.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1}});if(!n)throw new Error("Unable to derive authentication public key for given secret identifier.");switch(n.type){case"seed":case"seedless":case"privateKey":{let i=await XS(e,n);return ti(Buffer.from(i.publicKey))}case"ledger":case"seedVault":case"readOnly":throw new Error(`Authentication public keys are currently unsupported for accounts of type ${n.type}.`)}};p();y();async function S$(e,t){let r=await hr(e);if(r.length===0)throw new $a;let n=r.filter(i=>i.identifier!==t);await ea(e,n),await IT(e)}p();y();async function E$(e,t,r){let n=await hr(e);if(r<0||r>=n.length)throw new $a;let i=n.map(s=>s.identifier).indexOf(t);if(i<0)throw new $a;if(i===r)return;let o=n[i];n.splice(i,1),n.splice(r,0,o),await ea(e,n)}p();y();async function d_(e,t,r){let n=t.chains[r]?.pathType;if(!n)return Tr("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await Vn(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function I$(e,t,r){let n=await hr(e),i=n.find(o=>o.identifier===t);if(!i)return Tr("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let o=await XS(e,i);return e.vaultSigner.signWithKeypair(o,r)}default:return Tr("unsupportedOperation","Invalid signingAccount type provided for paramType")}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:o}=await e.fetchChainAvailability(),s={},a=Object.keys(i.chains).filter(c=>rf.safeParse(c).success).filter(c=>o.includes(c));for(let c of a){let u=await d_(e,i,c);if("status"in u&&u.status==="error")return u;s[c]=u}return e.vaultSigner.signWithKeypair(s,r)}case"eip155":{let o=await d_(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}case"solana":{let o=await d_(e,i,r.chainType);return"status"in o&&o.status==="error"?o:e.vaultSigner.signWithKeypair(o,r)}}break}case"privateKey":{let o=await up(e,i.privateKeyIdentifier);if(o.chainType!==r.chainType)return Tr("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${o.chainType}, got ${r.chainType}`);let s=e.keypairGenerator.generateKeypairFromPrivateKey(lo.from(o.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:s},r);case"eip155":return e.vaultSigner.signWithKeypair(s,r);case"solana":return e.vaultSigner.signWithKeypair(s,r)}break}case"ledger":{let o=i.chains[r.chainType];if(!o)return Tr("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let s=Jw.safeParse({pathType:o.pathType,index:i.derivationIndex});if(!s.success)return Tr("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let a=R6(s.data);return e.vaultSigner.signWithHardware(t,a,r)}case"seedVault":{let{authToken:o,derivationPath:s,chainType:a}=i;return a!==r.chainType?Tr("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${a}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(o,s,r)}case"readOnly":return Tr("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(o=>{throw new Error("invalid account type")})(i)}}p();y();function h_(e){switch(e.type){case"seed":return Ob(e);case"seedless":return Nb(e);case"privateKey":return y_(e);case"ledger":return p_(e);case"seedVault":return m_(e);case"readOnly":return e}}function p_(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(sn).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new xd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}function y_(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(sn).reduce((o,s)=>{let a=t?t[s]:void 0;if(!a)throw new xd;return{...o,[s]:a}},{});return{...n,addresses:i}}}}function m_(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function Ob(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(sn).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new xd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}function Nb(e){let{chains:t,version:r,...n}=e,i={};for(let o of Object.keys(t)){let s=t[o];if(!s)continue;let a;switch(s.chainType){case"solana":case"eip155":{let{publicKey:c,...u}=s;a={...u,address:c};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:c,...u}=s,h=Object.values(sn).reduce((l,g)=>{let x=c?c[g]:void 0;if(!x)throw new xd;return{...l,[g]:x}},{});a={...u,addresses:h};break}}i[o]=a}return{...n,chains:i}}p();y();var x_=ee(Ns());var eEe=new Set(Object.values(Et)),k$=e=>e!==null&&eEe.has(e),b_=e=>{},eE=e=>{let t=e.addresses.reduce((r,n)=>{try{let i=Js(n.networkId,n.address);r[i]=n.address}catch{de.addBreadcrumb("Auth","Unable to derive AddressType from networkID and address.","error",{networkID:n.networkId,address:n.address})}return r},{});return Object.entries(t).length===0?(de.captureError(new Error("Unable to convert synced account to read-only account. No addresses found."),"Auth"),null):{version:1,type:"readOnly",identifier:e.accountHash,addresses:t}},g_=(e,t)=>{let r=t==="seed"?"se*d":"se*dless";if(e.derivationIndex===null||e.derivationIndex<0)return de.addBreadcrumb("Auth",`Invalid derivation index for ${r} account: ${e.derivationIndex}`,"error"),null;let n=e.addresses.reduce((o,s)=>{if(s.pathType==="privateKey")return de.addBreadcrumb("Auth",`Invalid path type when converting synced account to ${r} account: ${s.pathType}`,"error"),o;let a=P4(s.pathType);switch(s.pathType){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":dd(a)?o[a]={chainType:a,publicKey:Buffer.from(s.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":s.address},pathType:s.pathType}:de.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44Root":case"bip44":case"bip44Change":case"deprecated":a==="solana"?o[a]={chainType:a,publicKey:x_.default.encode(Buffer.from(s.publicKey.replace("0x",""),"hex")),pathType:s.pathType}:de.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":a==="eip155"?o[a]={chainType:a,publicKey:s.address,pathType:s.pathType}:de.addBreadcrumb("Auth",`Invalid address type used when converting synced account to ${r} account.`,"error",{addressType:a,pathType:s.pathType});break;default:b_(s.pathType)}return o},{});if(Object.entries(n).length===0)return de.captureError(new Error(`Unable to convert synced account to ${r} account. No addresses found.`),"Auth"),null;let i=Ga(e);return i?{version:1,type:t,identifier:e.accountHash,seedIdentifier:i,derivationIndex:e.derivationIndex,chains:n}:(de.captureError(new Error(`Unable to convert synced account to ${r} account. Missing account origin.`),"Auth"),null)},T$=e=>{let t=Ga(e);if(!t)return de.captureError(new Error("Unable to convert synced account to pk account. Missing account origin."),"Auth"),null;let r=e.addresses[0];if(!r)return de.captureError(new Error("Unable to convert synced account to pk account. No address."),"Auth"),null;let n;try{n=Js(r.networkId,r.address)}catch{return de.captureError(new Error("Unable to convert synced account to pk account. Unable to determine address type."),"Auth"),null}return dd(n)?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:Buffer.from(r.publicKey.replace("0x",""),"hex"),addresses:{"bip122:000000000019d6689c085ae165831e93":r.address},chainType:n}:n==="solana"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:x_.default.encode(Buffer.from(r.publicKey.replace("0x",""),"hex")),chainType:n}:n==="eip155"?{version:1,type:"privateKey",identifier:e.accountHash,privateKeyIdentifier:t,publicKey:r.address,chainType:n}:(xe(n),null)},P$=async(e,t)=>{let r=await hr(e),n=await Po(e),i=new Set(n.seedIdentifiers),o=new Set(n.seedlessIdentifiers),s=new Set(n.privateKeyIdentifiers);for(let c=0;c<r.length;++c){let u=r[c],h=t[u.identifier];if(delete t[u.identifier],!h||u.type!=="readOnly")continue;let l=J0(h),g=Ga(h);if(!k$(l)||!g)continue;let x=null;switch(l){case"seed":case"seedless":try{(i.has(g)||o.has(g))&&(x=g_(h,l))}catch{}break;case"privateKey":try{s.has(g)&&(x=T$(h))}catch{}break;default:b_(l)}x&&(r[c]=x)}let a=[...r];for(let c of Object.values(t)){if(c.addresses.length===0)continue;let u=J0(c),h=Ga(c);if(!k$(u)||!h){let l=eE(c);l&&a.push(l);continue}switch(u){case"seed":if(i.has(h)){let l=g_(c,u);l&&a.push(l)}else{let l=eE(c);l&&a.push(l)}break;case"seedless":if(o.has(h)){let l=g_(c,u);l&&a.push(l)}else{let l=eE(c);l&&a.push(l)}break;case"privateKey":if(s.has(h)){let l=T$(c);l&&a.push(l)}else{let l=eE(c);l&&a.push(l)}break;default:b_(u)}}return await ea(e,a),!1};function tEe(e){return{addSeedWithDefaultAccount:(t,r)=>p$(e,t,r).then(Ob),addAccountForExistingSeed:t=>$G(e,t).then(Ob),addSeedWithMultipleAccounts:(t,r,n,i)=>ZS(e,t,r,n,i).then(o=>o.map(Ob)),addPrivateKeyAccount:(t,r,n)=>c$(e,t,r,n).then(y_),addLedgerAccounts:(t,r)=>s$(e,t,r).then(n=>n.map(p_)),addSolanaSeedVaultAccounts:t=>m$(e,t).then(r=>r.map(m_)),addReadonlyAccount:t=>f$(e,t),deriveAddresses:()=>v$(e),removeAccount:t=>S$(e,t),reorderAccount:(t,r)=>E$(e,t,r),exportEntropy:t=>Xp(e,t),exportPrivateKey:(t,r)=>QS(e,t,r),fetchAllAccounts:()=>hr(e).then(t=>t.map(h_)),fetchAllSeedMetas:()=>NV(e),fetchAllSeedlessMetas:()=>oA(e),sign:(t,r)=>I$(e,t,r),isExistingSeed:t=>ry(e,t),checkVaultIntegrity:t=>x$(e,t),clearVault:()=>FV(e),addSeedlessWithMultipleAccounts:(t,r,n)=>JS(e,t,r,n).then(i=>i.map(Nb)),addSeedlessWithDefaultAccount:(t,r)=>h$(e,t,r).then(Nb),addAccountForExistingSeedless:t=>l$(e,t).then(Nb),getAuthenticationPublicKey:t=>A$(e,t),syncAccounts:t=>P$(e,t)}}p();y();p();y();var Yct=wu(ii,e=>new tE(e)),tE=class{#e;constructor(t){this.#e=t}onMigrateInvalidChecksum(){this.#e.capture("migrationMultichainMigrateInvalidChecksum")}onAccountsOnlyMigrationStarted(){this.#e.capture("migrationMultichainAccountOnlyMigrationStarted")}onAccountsOnlyMigrationSettled(t){this.#e.capture("migrationMultichainAccountOnlyMigrationSettled",{data:{isSuccess:t}})}onMigrationFailureFlowOpened(){this.#e.capture("migrationFailureOpen")}onMigrationFailureUnableToFetchLegacyMnemonic(t){this.#e.capture("migrationFailureUnableToFetchLegacyMnemonic",{data:{reason:t}})}onCanStartMigrationResult(t){t.result||this.#e.capture("migrationMultichainCannotStart",{data:{reason:t.reason}})}onMigrationStarted(){this.#e.capture("migrationMultichainStarted")}onMigrationSettled(t,r){this.#e.capture("migrationMultichain",{data:{isGTM:t,isSuccess:r}})}onMigrationSecureStore(){this.#e.capture("migrationSecureStore")}};p();y();var _$=e=>wu(ii,t=>new rE(t,e))(),rE=class{constructor(t,r){this.identifyAccount=async(t,r,n)=>{let i=!!r.addresses.find(g=>se.isSolanaNetworkID(g.networkID)),o=!!r.addresses.find(g=>se.isEthereumNetworkID(g.networkID)),s=!!r.addresses.find(g=>se.isBitcoinNetworkID(g.networkID)),a={hasSolanaAddress:i,hasEthereumAddress:o,hasBitcoinAddress:s},c=n.enabledChainIDs.map(g=>se[g].name).join(", "),u;this.#t&&(u=(await this.#t.getUser())?.userID);let h=new Set,l=new Set;for(let g of t)switch(g.type){case"seed":case"seedless":h.add(g.seedIdentifier);break;case"readOnly":break;case"privateKey":case"ledger":case"seedVault":l.add(g.identifier);break;default:xe(g);break}switch(r.type){case"seed":case"seedless":this.#e.identify(r.identifier,{...a,authUserId:u,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(h),accountIds:Array.from(l),isReadOnly:!1,enabledChains:c});break;case"readOnly":this.#e.identify(r.identifier,{...a,authUserId:u,accountType:r.type,isReadOnly:!0,enabledChains:c});break;case"privateKey":case"ledger":case"seedVault":this.#e.identify(r.identifier,{...a,authUserId:u,accountType:r.type,rootIds:Array.from(h),accountIds:Array.from(l),isReadOnly:!1,enabledChains:c});break;default:xe(r)}};this.onAppSessionStart=t=>{let r=new Map;for(let n of t){if(n.type==="readOnly")continue;let{addresses:i,identifier:o}=n;for(let s of i){let a=se.getChainName(s.networkID),c={type:n.type,accountId:o,id:s.address};if(!r.get(a))r.set(a,[c]);else{let u=r.get(a)??[];r.set(a,[...u,c])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})};this.#e=t,this.#t=r}#e;#t};p();y();p();y();var rEe=e=>{let t=[];for(let r of e)r.type!=="readOnly"&&t.push(r);return t};p();y();p();y();var nE=ee(Kr());p();y();p();y();p();y();var ny=ee(Kr()),B$=(0,ny.createContext)(null);function nEe({children:e,storage:t}){return ny.default.createElement(B$.Provider,{value:t},e)}function ve(){let e=(0,ny.useContext)(B$);if(!e)throw new Error("useStorage must be used within a StorageProvider");return e}var yu=()=>{let e=ve(),{data:[t,r],isLoading:n}=hB(["enable-base","enable-monad"]);return Ct({enabled:!n,queryKey:d2.chainAvailability({isBaseEnabled:t,isMonadEnabled:r}),queryFn:()=>hd(e)})};p();y();var w_=()=>{let e=Ae(),t=ve();return Se({mutationFn:async({addressTypes:n})=>{for(let i of n)await uK(i,t);Qc(e)}})};p();y();var iEe=()=>{let e=ve(),t=Ae();return Se({mutationFn:async({chainIDs:n})=>{for(let i of n)await oK(i,e);Qc(t)}})};p();y();p();y();p();y();var iy=ee(Kr()),C$=(0,iy.createContext)(null);function oEe({children:e,vault:t}){return iy.default.createElement(C$.Provider,{value:t},e)}function Qt(){let e=(0,iy.useContext)(C$);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}var v_=()=>{let e=Ae(),t=ve(),r=Qt();return Se({mutationFn:async({addressTypes:i})=>{for(let o of i)await cK(o,t);await r.deriveAddresses(),await Qc(e)}})};p();y();var sEe=()=>{let e=ve(),t=Ae(),r=Qt();return Se({mutationFn:async({chainIDs:i})=>{for(let o of i)await H4(o,e);await r.deriveAddresses(),await Qc(t)}})};p();y();var aEe=()=>{let e=ve(),{mutateAsync:t}=w_(),{mutateAsync:r}=v_();return Se({mutationFn:async({addressTypes:i})=>{if(await sK(e))await r({addressTypes:i});else{let s=new Set(se.bitcoin.addressTypes);for(let a of i)s.delete(a);if(s.size===se.bitcoin.addressTypes.length&&s.delete("bip122_p2wpkh"),s.size>0){let a=Array.from(s);await t({addressTypes:a})}}}})};var A_=se.getAllChainIDs().filter(e=>se.getDefaultChainEnablement(e,!1)),M$=A_.map(e=>se.getMainnetNetworkID(e)),cEe=M$.flatMap(e=>se.getAddressTypes(e)),Llt=()=>yu().data?.enabledAddressTypes??cEe,iE=()=>yu().data?.enabledChainIDs??A_,Klt=()=>yu().data?.supportedChainIDs??A_,Flt=e=>{let t=yu().data;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:M$},Vlt=()=>iE().length===1,qlt=()=>{let e=iE();return(0,nE.useMemo)(()=>se.getChainIDs("eip155").some(t=>e.includes(t)),[e])},Hlt=()=>{let e=iE();return(0,nE.useMemo)(()=>e.length===1&&e.includes("solana"),[e])},Wlt=e=>{let t=iE();return(0,nE.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])};p();y();p();y();p();y();var R$=async(e,t)=>(await Vg(e,t))?.balance,O$=async e=>await qg(e);p();y();var In="@phantom/accounts",S_=`${In}:account-identifier`,E_=`${In}:all-multi-chain-seeds`,rdt=`${In}:account-balance`,ct={accountBalance(e){return[`${In}:account-balance`,{identifier:e}]},allAccountBalances(){return[`${In}:all-account-balances`]},allMultiChainAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[`${In}:all-multi-chain-accounts`,{chainAvailabilityQueryObject:t}]},allMultiChainSeeds(e){return[E_,e]},developerMode(){return[`${In}:developer-mode`]},accountIdentifier(e){return[S_,{identifier:e}]},selectedMultiChainAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[`${In}:selected-multi-chain-account`,t]},selectedAccountIdentifier(){return[`${In}:selected-account-identifier`]},selectedAccountIndex(){return[`${In}:selected-account-index`]},selectedMultiChainNetworkSetting(){return[`${In}:selected-multi-chain-network-setting`]},trustedApps(){return[`${In}:multi-chain-trusted-apps`]},migratedWithInvalidChecksum(){return[`${In}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${In}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${In}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]}};var uEe=(e,t=!0)=>{let r=ve(),n=t&&!!e,i=ct.accountBalance(e||"");return Ct({queryKey:i,queryFn:async()=>{try{if(!e)return null;let s=await R$(r,e);return de.addBreadcrumb("account",`Finished fetching balance for account: ${e}`,"info"),s||null}catch(s){throw s instanceof Error&&de.captureError(s,"account"),s}},enabled:n})},fEe=(e=!0)=>{let t=ve(),r=ct.allAccountBalances();return Ct({queryKey:r,queryFn:async()=>{try{let i=await O$(t);return de.addBreadcrumb("account","Finished fetching all account balances","info"),i}catch(i){throw i instanceof Error&&de.captureError(i,"account"),i}},enabled:e})};p();y();function Ub(e){let{isSuccess:t,data:r}=yu(),n=Qt(),i=ct.allMultiChainAccounts(r),o=ve();return Ct({enabled:t,queryKey:i,queryFn:async()=>{try{if(!r)throw new Error(Ug);let a=await Ed(n,o,r);return de.addBreadcrumb("account",`Finished fetching all accounts. Num accounts: ${a.length}`,"info"),a}catch(a){throw a instanceof Error&&de.captureError(a,"account"),a}},select:e})}var oE=()=>{let{isSuccess:e,isFetching:t,data:r=[]}=Ub(),n=e&&!t&&!!r.length;return n?{enabled:n,accounts:r}:{enabled:n}};p();y();var qt=async e=>{await e.invalidateQueries({queryKey:[E_]}),await e.invalidateQueries({queryKey:[`${In}:all-multi-chain-accounts`],predicate:t=>t.queryKey[0]===`${In}:all-multi-chain-accounts`}),await e.invalidateQueries({queryKey:[S_]}),await sE(e)},sE=async e=>{await e.invalidateQueries({predicate:t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===`${In}:selected-multi-chain-account`}),await e.invalidateQueries({queryKey:ct.selectedAccountIndex()}),await e.invalidateQueries({queryKey:ct.selectedAccountIdentifier()})};W4(qt);p();y();p();y();function aE(){let e=ve(),t=Ae();return Se({mutationFn:async({metadataBatch:o})=>{de.addBreadcrumb("account",`Adding Account Metadata Batch: ${Object.entries(o).length} entries`,"info"),await Fg(e,o)},onSuccess:async()=>{await qt(t)},onError:o=>{de.captureError(o,"account")}})}function lEe(){let{mutateAsync:e}=aE(),t=ve(),r=Ae(),n=Qt(),{t:i}=Us();return Se({mutationFn:async({accounts:c,pairedBLEDevice:u})=>{let h=rB(),l=await n.connectLedgerAccounts(h,c),g=l.reduce((A,E,C)=>{let{name:M,accountIndex:N}=c[C],R;!M||M.length===0?R=i("onboardingImportAccountsLedgerAccountName",{walletIndex:1+N}):R=M;let V;u&&(V=[{...u,version:1,connectionType:"ble",deviceType:"ledger"}]);let q={name:R,icon:void 0,connectedDevices:V};return A[E.identifier]=q,A},{});await e({metadataBatch:g});let x=l[0]?.identifier;return x||(x=(await n.fetchAllAccounts())[0].identifier),await Fi(t,x),r.setQueryData(ct.selectedAccountIdentifier(),x),l},onSettled:async()=>{await qt(r)},onError:c=>de.captureError(c,"account")})}p();y();var N$=ee(Kr());var dEe=e=>{if(e){switch(e.type){case"seed":case"seedless":return e.seedIdentifier;case"privateKey":case"ledger":case"seedVault":case"readOnly":return}xe(e)}};function uc({select:e,updateESPUserProperties:t,authRepository:r}={}){let n=(0,N$.useMemo)(()=>fo.isFeatureEnabled("frontend-enable-esp-user-properties-update"),[]),{isSuccess:i,data:o}=yu(),s=oE(),a=s.enabled&&i,c=jb(),u=ve(),h=_$(r),l=ct.selectedMultiChainAccount(o);return Ct({queryKey:l,queryFn:async()=>{try{if(!o)throw new Error(Ug);if(!s.enabled)throw new Error(Q0);let x=await ou(s.accounts,u);if(de.addBreadcrumb("account",`Finished fetching selected account: ${x.identifier}`,"info"),n&&t){let A=x.addresses.map(E=>E.address)??[];Promise.all(A.map(E=>t(E,vu.language)))}return fo.setSubjectAttributes({rootID:dEe(x)}),c(),h.identifyAccount(s.accounts,x,o),x}catch(x){throw x instanceof Error&&de.captureError(x,"account"),x}},enabled:a,select:e})}p();y();function hEe(){let e=ve(),t=Ae();return Se({mutationFn:async({identifier:i,balance:o})=>(de.addBreadcrumb("account",`Setting Account Balance: ${i}`,"info"),await uT(e,i,o),{identifier:i,balance:o}),onSuccess:({identifier:i,balance:o})=>{i&&t.invalidateQueries({queryKey:ct.accountBalance(i)}),o&&t.invalidateQueries({queryKey:ct.allAccountBalances()})}})}p();y();var U$=ee(Kr());var Db=()=>{let{data:e}=uc();return(0,U$.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])};p();y();p();y();function I_(){let e=ct.developerMode(),t=ve();return Ct({queryKey:e,queryFn:async()=>await t.get("developerMode")||z4})}var pEe=()=>{let{data:e}=I_();return!!e?.isDeveloperMode},yEe=()=>Db().some(t=>se.isLocalNetworkID(t));p();y();var D$=ee(Kr());var mEe=e=>{let t=(0,D$.useMemo)(()=>{if(e){if(gEe(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(se.isNetworkID(e))return n=>n.networkID===e;if(j8(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return uc({select:n=>{let i=n.addresses.filter(t);if(i.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return i[0]}})};function gEe(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}p();y();p();y();var zi=ee(Kr());function bEe(e){let t,r=new Set,n=(u,h)=>{let l=typeof u=="function"?u(t):u;if(l!==t){let g=t;t=h?l:Object.assign({},t,l),r.forEach(x=>x(t,g))}},i=()=>t,o=(u,h=i,l=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=h(t);function x(){let A=h(t);if(!l(g,A)){let E=g;u(g=A,E)}}return r.add(x),()=>r.delete(x)},c={setState:n,getState:i,subscribe:(u,h,l)=>h||l?o(u,h,l):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return t=e(n,i,c),c}var xEe=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),L$=xEe?zi.useEffect:zi.useLayoutEffect;function cE(e){let t=typeof e=="function"?bEe(e):e,r=(n=t.getState,i=Object.is)=>{let[,o]=(0,zi.useReducer)(C=>C+1,0),s=t.getState(),a=(0,zi.useRef)(s),c=(0,zi.useRef)(n),u=(0,zi.useRef)(i),h=(0,zi.useRef)(!1),l=(0,zi.useRef)();l.current===void 0&&(l.current=n(s));let g,x=!1;(a.current!==s||c.current!==n||u.current!==i||h.current)&&(g=n(s),x=!i(l.current,g)),L$(()=>{x&&(l.current=g),a.current=s,c.current=n,u.current=i,h.current=!1});let A=(0,zi.useRef)(s);L$(()=>{let C=()=>{try{let N=t.getState(),R=c.current(N);u.current(l.current,R)||(a.current=N,l.current=R,o())}catch{h.current=!0,o()}},M=t.subscribe(C);return t.getState()!==A.current&&C(),M},[]);let E=x?g:l.current;return(0,zi.useDebugValue)(E),E};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var K$={username:"",icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},F$=cE((e,t)=>({...K$,setUsername:r=>e({username:r}),setIcon:r=>e({icon:r}),addSecretIdentifier:r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},removeSecretIdentifier:r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},addAccountIdentifierToSync:r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},removeAccountIdentifierToSync:r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},clearAccountIdentifiersToSync:()=>e({accountIdentifiersToSync:[]}),setAccountIdentifiersToSync:r=>e({accountIdentifiersToSync:r}),addAddress:(r,n)=>{let i={...t().addresses};i[r]=n,e({addresses:i})},removeAddress:(r,n)=>{let i={...t().addresses};i[r]===n&&delete i[r],e({addresses:i})},clearAddresses:()=>{e({addresses:{}})},reset:()=>{e(K$)}}));p();y();p();y();var wEe={editableAccountMetadata:void 0,setEditableAccountMetadata:()=>{}},uE=cE(e=>({...wEe,setEditableAccountMetadata:t=>{e({editableAccountMetadata:t})}}));p();y();var V$=ee(Kr()),vEe=({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:i})=>{(0,V$.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let o=Date.now();i({identifier:t,balance:{timestamp:o,value:n}})}},[e,t,r,n,i])};p();y();p();y();function AEe(e){let t=oE(),r=t.enabled&&e.length>0,n=ct.accountIdentifier(e);return Ct({enabled:r,queryKey:n,queryFn:async()=>{try{if(de.addBreadcrumb("account",`Fetching Account: ${e}`,"info"),!t.enabled)throw new Error(Q0);let{accounts:o}=t,s=o.find(a=>a.identifier===e);if(!s)throw new Error(TF(o.length,e));return s}catch(o){throw o instanceof Error&&de.captureError(o,"account"),o}}})}p();y();p();y();function SEe(){let e=ve(),t=Ae(),r=Qt(),n=St(),{t:i}=Us();return Se({mutationFn:async({name:u,icon:h,seedIdentifier:l})=>{de.addBreadcrumb("account","Generating new multi-chain account","info");let g=await r.addAccountForSeed(l),x;if(!u||u.length===0){let E=await r.fetchAllAccounts();x=i("onboardingImportAccountsAccountName",{walletIndex:E.length})}else x=u;let A={name:x,icon:h};return await Za(e,g.identifier,A),await Fi(e,g.identifier),n.uploadSyncedAccount(g.identifier),g},onSettled:async()=>{await qt(t)},onSuccess:u=>{t.setQueryData(ct.selectedAccountIdentifier(),u.identifier)},onError:u=>de.captureError(u,"account")})}p();y();function EEe(){let e=ve(),t=Ae(),r=Qt();return Se({mutationFn:async({name:a,addresses:c,icon:u})=>{let h=await r.addReadonlyAccount(c),l={name:a,icon:u};return await Za(e,h.identifier,l),await Fi(e,h.identifier),h},onSettled:async()=>{await qt(t)},onSuccess:a=>{t.setQueryData(ct.selectedAccountIdentifier(),a.identifier)},onError:a=>de.captureError(a,"account")})}p();y();function IEe(){let e=ve(),t=Ae(),r=Qt(),n=St(),{t:i}=Us();return Se({mutationFn:async({name:u,icon:h,socialSeedIdentifier:l})=>{de.addBreadcrumb("account","Generating new social seed account","info");let g=await r.addAccountForSeedless(l),x;if(!u||u.length===0){let E=await r.fetchAllAccounts();x=i("onboardingImportAccountsAccountName",{walletIndex:E.length})}else x=u;let A={name:x,icon:h};return await Za(e,g.identifier,A),await Fi(e,g.identifier),n.uploadSyncedAccount(g.identifier),g},onSettled:async()=>{await qt(t)},onSuccess:u=>{t.setQueryData(ct.selectedAccountIdentifier(),u.identifier)},onError:u=>de.captureError(u,"account")})}p();y();function q$(e){let t=Qt(),r=ct.allMultiChainSeeds(e);return Ct({queryKey:r,queryFn:async()=>{try{let i;switch(e){case"all":{let o=await t.fetchAllSeedMetas();i=[...await t.fetchAllSeedlessMetas(),...o];break}case"seeds-only":{i=[...await t.fetchAllSeedMetas()];break}case"seedless-seeds-only":{i=[...await t.fetchAllSeedlessMetas()];break}}return i}catch(i){throw i instanceof Error&&de.captureError(i,"account"),i}}})}p();y();p();y();function kEe(){let e=ve(),t=Ae(),r=Qt(),n=St();return Se({mutationFn:async({chainType:a,privateKey:c,name:u,icon:h})=>{de.addBreadcrumb("account","Importing Private Key Account... \u23F3","info");let l=await r.importPrivateKeyAccount(a,c),g={name:u,icon:h};return await Za(e,l.identifier,g),await Fi(e,l.identifier),n.uploadSyncedAccount(l.identifier),de.addBreadcrumb("account",`Imported Private Key Account \u2705: ${l.identifier}`,"info"),l},onSettled:async()=>{await qt(t)},onSuccess:a=>{t.setQueryData(ct.selectedAccountIdentifier(),a.identifier)}})}p();y();p();y();function TEe(){let e=ct.selectedMultiChainNetworkSetting(),t=ve();return Ct({queryKey:e,queryFn:()=>rp(t)})}p();y();function PEe(){let e=ve(),t=ii(),r=Qt(),n=Ae(),i=St();return Se({mutationFn:async({identifier:a})=>{de.addBreadcrumb("account",`Removing Account... \u23F3: ${a}`,"info"),await Promise.all([r.removeAccount(a),Hg(e,a)]),await ou(await r.fetchAllAccounts(),e),t.capture("removeAccount"),i.deleteSyncedAccount(a),de.addBreadcrumb("account",`Removed Account \u2705: ${a}`,"info")},onSuccess:async()=>{await qt(n)}})}p();y();function _Ee(){let e=ve(),t=ii(),r=Ae(),n=Qt();return Se({mutationFn:async({seedIdentifier:a})=>{let c=await n.fetchAllAccounts(),u=[];for(let h of c)switch(h.type){case"privateKey":case"ledger":case"seedVault":case"readOnly":continue;case"seed":case"seedless":h.seedIdentifier===a&&u.push(h.identifier);break;default:xe(h)}for(let h of u)await Promise.all([n.removeAccount(h),Hg(e,h)]);t.capture("removeSeed",{data:{numOfAccounts:u.length}})},onSuccess:()=>{qt(r)},onError:a=>{de.captureError(a,"account")}})}p();y();function BEe(){let e=ve(),t=Ae(),r=St();return Se({mutationFn:async({identifier:s,name:a})=>{de.addBreadcrumb("account","Renaming Multichain Account","info"),await aT(e,s,a),r.uploadSyncedAccount(s)},onSuccess:async()=>{await qt(t)},onError:s=>de.captureError(s,"account")})}p();y();function CEe(){let e=Ae(),t=Qt();return Se({mutationFn:async({identifier:i,toIndex:o})=>{await t.reorderAccount(i,o)},onSuccess:()=>{qt(e)}})}p();y();function MEe(){let e=ct.selectedAccountIdentifier(),t=ve(),r=Qt();return Ct({queryKey:e,queryFn:async()=>{try{let i=await r.fetchAllAccounts(),s=(await ou(i,t)).identifier;if(!s)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return s}catch(i){throw i instanceof Error&&de.captureError(i,"account"),i}}})}p();y();function REe(){let e=ve(),t=Ae();return Se({mutationFn:async({developerMode:i})=>{t.setQueryData(ct.developerMode(),i),await e.set("developerMode",i)},onSuccess:()=>{qt(t)}})}p();y();function OEe(){let e=ve(),t=Ae(),r=St();return Se({mutationFn:async({identifier:o,icon:s})=>{de.addBreadcrumb("account","Setting Multichain Account Icon","info"),await cT(e,o,s),r.uploadSyncedAccount(o)},onSuccess:async()=>{await qt(t)}})}p();y();function NEe(){let e=ve(),t=Ae();return Se({mutationFn:async({networkSetting:i})=>{t.setQueryData(ct.selectedMultiChainNetworkSetting(),i),await e.set("networkSetting",i)},onSuccess:()=>{qt(t)}})}p();y();function UEe(){let e=ve(),t=ii(),r=Ae();return Se({mutationFn:async({identifier:s})=>(await Fi(e,s),t.capture("changeAccount",{data:{identifier:s}}),s),onSuccess:s=>{sE(r),r.setQueryData(ct.selectedAccountIdentifier(),s)},onError:s=>de.captureError(s,"account")})}p();y();var DEe=()=>{let e=Ae(),t=St(),r=gd(),n=ct.syncUserAccounts();return Ct({enabled:r,queryKey:n,queryFn:async()=>{let o=!1;try{o=await t.downloadSyncedAccounts()}catch{return!1}return o&&await qt(e),o},gcTime:1/0,staleTime:1/0})};p();y();var H$=ee(Kr());var LEe=()=>{let{data:e,isFetching:t}=Ub(),{data:r,isFetching:n}=uc(),i=Db();return(0,H$.useMemo)(()=>({data:{"All Accounts":e,"Selected Account":r??null,"Selected Networks":i.map(o=>se.getNetworkName(o))},isFetching:t||n}),[e,t,n,r,i])};p();y();var KEe=ee(Kr());p();y();p();y();var W$=ee(Kr());var FEe=e=>{let t=(0,W$.useCallback)(r=>r.addresses.find(n=>e===se.getChainID(n.networkID))?.networkID,[e]);return uc({select:t})};p();y();var bE=ee(Kr());p();y();var mr=ee(Kr(),1),Vb=e=>e.type==="checkbox",sy=e=>e instanceof Date,uo=e=>e==null,tY=e=>typeof e=="object",qn=e=>!uo(e)&&!Array.isArray(e)&&tY(e)&&!sy(e),rY=e=>qn(e)&&e.target?Vb(e.target)?e.target.checked:e.target.value:e,VEe=e=>e.substring(0,e.search(/.\d/))||e,nY=(e,t)=>[...e].some(r=>VEe(t)===r),yE=e=>e.filter(Boolean),Jr=e=>e===void 0,be=(e,t,r)=>{if(!t||!qn(e))return r;let n=yE(t.split(/[,[\].]+?/)).reduce((i,o)=>uo(i)?i:i[o],e);return Jr(n)||n===e?Jr(e[t])?r:e[t]:n},__={BLUR:"blur",CHANGE:"change"},pa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},mu={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},M_=(e,t)=>{let r=Object.assign({},e);return delete r[t],r},qEe=mr.default.createContext(null),R_=()=>mr.default.useContext(qEe);var iY=(e,t,r,n=!0)=>{function i(s){return()=>{if(s in e)return t[s]!==pa.all&&(t[s]=!n||pa.all),r&&(r[s]=!0),e[s]}}let o={};for(let s in e)Object.defineProperty(o,s,{get:i(s)});return o},Do=e=>qn(e)&&!Object.keys(e).length,oY=(e,t,r)=>{let n=M_(e,"name");return Do(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(i=>t[i]===(!r||pa.all))},fE=e=>Array.isArray(e)?e:[e],sY=(e,t,r)=>r&&t?e===t:!e||!t||e===t||fE(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function O_(e){let t=mr.default.useRef(e);t.current=e,mr.default.useEffect(()=>{let r=i=>{i&&i.unsubscribe()},n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}function HEe(e){let t=R_(),{control:r=t.control,disabled:n,name:i,exact:o}=e||{},[s,a]=mr.default.useState(r._formState),c=mr.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=mr.default.useRef(i),h=mr.default.useRef(!0);u.current=i;let l=mr.default.useCallback(g=>h.current&&sY(u.current,g.name,o)&&oY(g,c.current)&&a(Object.assign(Object.assign({},r._formState),g)),[r,o]);return O_({disabled:n,callback:l,subject:r._subjects.state}),mr.default.useEffect(()=>()=>{h.current=!1},[]),iY(s,r._proxyFormState,c.current,!1)}var fc=e=>typeof e=="string",aY=(e,t,r,n)=>{let i=Array.isArray(e);return fc(e)?(n&&t.watch.add(e),be(r,e)):i?e.map(o=>(n&&t.watch.add(o),be(r,o))):(n&&(t.watchAll=!0),r)},mE=e=>typeof e=="function",N_=e=>{for(let t in e)if(mE(e[t]))return!0;return!1};function WEe(e){let t=R_(),{control:r=t.control,name:n,defaultValue:i,disabled:o,exact:s}=e||{},a=mr.default.useRef(n);a.current=n;let c=mr.default.useCallback(l=>{if(sY(a.current,l.name,s)){let g=aY(a.current,r._names,l.values||r._formValues);h(Jr(a.current)||qn(g)&&!N_(g)?Object.assign({},g):Array.isArray(g)?[...g]:Jr(g)?i:g)}},[r,s,i]);O_({disabled:o,subject:r._subjects.watch,callback:c});let[u,h]=mr.default.useState(Jr(i)?r._getWatch(n):i);return mr.default.useEffect(()=>{r._removeUnmounted()}),u}function zEe(e){let t=R_(),{name:r,control:n=t.control,shouldUnregister:i}=e,o=nY(n._names.array,r),s=WEe({control:n,name:r,defaultValue:be(n._formValues,r,be(n._defaultValues,r,e.defaultValue)),exact:!o}),a=HEe({control:n,name:r}),c=mr.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:s})));return mr.default.useEffect(()=>{let u=(h,l)=>{let g=be(n._fields,h);g&&(g._f.mount=l)};return u(r,!0),()=>{let h=n._options.shouldUnregister||i;o?h&&n._stateFlags.action:h?n.unregister(r):u(r,!1)}},[r,n,o,i]),{field:{name:r,value:s,onChange:mr.default.useCallback(u=>{c.current.onChange({target:{value:rY(u),name:r},type:__.CHANGE})},[r]),onBlur:mr.default.useCallback(()=>{c.current.onBlur({target:{value:be(n._formValues,r),name:r},type:__.BLUR})},[r,n]),ref:mr.default.useCallback(u=>{let h=be(n._fields,r);u&&h&&u.focus&&(h._f.ref={focus:()=>u.focus(),setCustomValidity:l=>u.setCustomValidity(l),reportValidity:()=>u.reportValidity()})},[r,n])},formState:a,fieldState:{invalid:!!be(a.errors,r),isDirty:!!be(a.dirtyFields,r),isTouched:!!be(a.touchedFields,r),error:be(a.errors,r)}}}var cY=e=>e.render(zEe(e)),jEe=(e,t,r,n,i)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},U_=e=>/^\w*$/.test(e),uY=e=>yE(e.replace(/["|']|\]/g,"").split(/\.|\[/));function cn(e,t,r){let n=-1,i=U_(t)?[t]:uY(t),o=i.length,s=o-1;for(;++n<o;){let a=i[n],c=r;if(n!==s){let u=e[a];c=qn(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}e[a]=c,e=e[a]}return e}var B_=(e,t,r)=>{for(let n of r||Object.keys(e)){let i=be(e,n);if(i){let o=i._f,s=M_(i,"_f");if(o&&t(o.name)){if(o.ref.focus&&Jr(o.ref.focus()))break;if(o.refs){o.refs[0].focus();break}}else qn(s)&&B_(s,t)}}};var z$=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));function Kb(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||qn(e)){t=r?[]:{};for(let n in e){if(mE(e[n])){t=e;break}t[n]=Kb(e[n])}}else return e;return t}function k_(){let e=[];return{get observers(){return e},next:i=>{for(let o of e)o.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(o=>o!==i)}}),unsubscribe:()=>{e=[]}}}var dE=e=>uo(e)||!tY(e);function ay(e,t){if(dE(e)||dE(t))return e===t;if(sy(e)&&sy(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){let s=t[i];if(sy(o)&&sy(s)||qn(o)&&qn(s)||Array.isArray(o)&&Array.isArray(s)?!ay(o,s):o!==s)return!1}}return!0}var j$=e=>({isOnSubmit:!e||e===pa.onSubmit,isOnBlur:e===pa.onBlur,isOnChange:e===pa.onChange,isOnAll:e===pa.all,isOnTouch:e===pa.onTouched}),Fb=e=>typeof e=="boolean",D_=e=>e.type==="file",C_=e=>e instanceof HTMLElement,fY=e=>e.type==="select-multiple",L_=e=>e.type==="radio",GEe=e=>L_(e)||Vb(e),G$=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",T_=e=>C_(e)&&e.isConnected;function $Ee(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=Jr(e)?n++:e[t[n++]];return e}function ji(e,t){let r=U_(t)?[t]:uY(t),n=r.length==1?e:$Ee(e,r),i=r[r.length-1],o;n&&delete n[i];for(let s=0;s<r.slice(0,-1).length;s++){let a=-1,c,u=r.slice(0,-(s+1)),h=u.length-1;for(s>0&&(o=e);++a<u.length;){let l=u[a];c=c?c[l]:e[l],h===a&&(qn(c)&&Do(c)||Array.isArray(c)&&!c.filter(g=>qn(g)&&!Do(g)||Fb(g)).length)&&(o?delete o[l]:delete e[l]),o=c}}return e}function hE(e,t={}){let r=Array.isArray(e);if(qn(e)||r)for(let n in e)Array.isArray(e[n])||qn(e[n])&&!N_(e[n])?(t[n]=Array.isArray(e[n])?[]:{},hE(e[n],t[n])):uo(e[n])||(t[n]=!0);return t}function lY(e,t,r){let n=Array.isArray(e);if(qn(e)||n)for(let i in e)Array.isArray(e[i])||qn(e[i])&&!N_(e[i])?Jr(t)||dE(r[i])?r[i]=Array.isArray(e[i])?hE(e[i],[]):Object.assign({},hE(e[i])):lY(e[i],uo(t)?{}:t[i],r[i]):r[i]=!ay(e[i],t[i]);return r}var $$=(e,t)=>lY(e,t,hE(t)),Y$={value:!1,isValid:!1},J$={value:!0,isValid:!0},dY=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Jr(e[0].attributes.value)?Jr(e[0].value)||e[0].value===""?J$:{value:e[0].value,isValid:!0}:J$:Y$}return Y$},hY=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Jr(e)?e:t?e===""?NaN:+e:r&&fc(e)?new Date(e):n?n(e):e,Z$={isValid:!1,value:null},pY=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Z$):Z$;function P_(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return D_(t)?t.files:L_(t)?pY(e.refs).value:fY(t)?[...t.selectedOptions].map(({value:r})=>r):Vb(t)?dY(e.refs).value:hY(Jr(t.value)?e.ref.value:t.value,e)}var YEe=(e,t,r,n)=>{let i={};for(let o of e){let s=be(t,o);s&&cn(i,o,s._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},pE=e=>e instanceof RegExp,Lb=e=>Jr(e)?void 0:pE(e)?e.source:qn(e)?pE(e.value)?e.value.source:e.value:e,JEe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Q$(e,t,r){let n=be(e,r);if(n||U_(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let o=i.join("."),s=be(t,o),a=be(e,o);if(s&&!Array.isArray(s)&&r!==o)return{name:r};if(a&&a.type)return{name:o,error:a};i.pop()}return{name:r}}var ZEe=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,QEe=(e,t)=>!yE(be(e,t)).length&&ji(e,t),lE=e=>fc(e)||mr.default.isValidElement(e);function X$(e,t,r="validate"){if(lE(e)||Array.isArray(e)&&e.every(lE)||Fb(e)&&!e)return{type:r,message:lE(e)?e:"",ref:t}}var oy=e=>qn(e)&&!pE(e)?e:{value:e,message:""},eY=async(e,t,r,n)=>{let{ref:i,refs:o,required:s,maxLength:a,minLength:c,min:u,max:h,pattern:l,validate:g,name:x,valueAsNumber:A,mount:E,disabled:C}=e._f;if(!E||C)return{};let M=o?o[0]:i,N=_=>{n&&M.reportValidity&&(M.setCustomValidity(Fb(_)?"":_||" "),M.reportValidity())},R={},V=L_(i),q=Vb(i),W=V||q,G=(A||D_(i))&&!i.value||t===""||Array.isArray(t)&&!t.length,z=jEe.bind(null,x,r,R),te=(_,f,m,b=mu.maxLength,w=mu.minLength)=>{let v=_?f:m;R[x]=Object.assign({type:_?b:w,message:v,ref:i},z(_?b:w,v))};if(s&&(!W&&(G||uo(t))||Fb(t)&&!t||q&&!dY(o).isValid||V&&!pY(o).isValid)){let{value:_,message:f}=lE(s)?{value:!!s,message:s}:oy(s);if(_&&(R[x]=Object.assign({type:mu.required,message:f,ref:M},z(mu.required,f)),!r))return N(f),R}if(!G&&(!uo(u)||!uo(h))){let _,f,m=oy(h),b=oy(u);if(isNaN(t)){let w=i.valueAsDate||new Date(t);fc(m.value)&&(_=w>new Date(m.value)),fc(b.value)&&(f=w<new Date(b.value))}else{let w=i.valueAsNumber||parseFloat(t);uo(m.value)||(_=w>m.value),uo(b.value)||(f=w<b.value)}if((_||f)&&(te(!!_,m.message,b.message,mu.max,mu.min),!r))return N(R[x].message),R}if((a||c)&&!G&&fc(t)){let _=oy(a),f=oy(c),m=!uo(_.value)&&t.length>_.value,b=!uo(f.value)&&t.length<f.value;if((m||b)&&(te(m,_.message,f.message),!r))return N(R[x].message),R}if(l&&!G&&fc(t)){let{value:_,message:f}=oy(l);if(pE(_)&&!t.match(_)&&(R[x]=Object.assign({type:mu.pattern,message:f,ref:i},z(mu.pattern,f)),!r))return N(f),R}if(g){if(mE(g)){let _=await g(t),f=X$(_,M);if(f&&(R[x]=Object.assign(Object.assign({},f),z(mu.validate,f.message)),!r))return N(f.message),R}else if(qn(g)){let _={};for(let f in g){if(!Do(_)&&!r)break;let m=X$(await g[f](t),M,f);m&&(_=Object.assign(Object.assign({},m),z(f,m.message)),N(m.message),r&&(R[x]=_))}if(!Do(_)&&(R[x]=Object.assign({ref:M},_),!r))return R}}return N(!0),R},XEe={mode:pa.onSubmit,reValidateMode:pa.onChange,shouldFocusError:!0};function e3e(e={}){let t=Object.assign(Object.assign({},XEe),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=t.defaultValues||{},o=t.shouldUnregister?{}:Kb(i),s={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0,h={},l={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={watch:k_(),array:k_(),state:k_()},x=j$(t.mode),A=j$(t.reValidateMode),E=t.criteriaMode===pa.all,C=(K,Z)=>(...J)=>{clearTimeout(u),u=self.setTimeout(()=>K(...J),Z)},M=async K=>{let Z=!1;return l.isValid&&(Z=t.resolver?Do((await G()).errors):await te(n,!0),!K&&Z!==r.isValid&&(r.isValid=Z,g.state.next({isValid:Z}))),Z},N=(K,Z,J,ne=[],pe=!0,re=!0)=>{if(s.action=!0,re&&Array.isArray(be(n,K))){let ae=Z(be(n,K),J.argA,J.argB);pe&&cn(n,K,ae)}if(l.errors&&re&&Array.isArray(be(r.errors,K))){let ae=Z(be(r.errors,K),J.argA,J.argB);pe&&cn(r.errors,K,ae),QEe(r.errors,K)}if(l.touchedFields&&Array.isArray(be(r.touchedFields,K))){let ae=Z(be(r.touchedFields,K),J.argA,J.argB);pe&&cn(r.touchedFields,K,ae)}l.dirtyFields&&(r.dirtyFields=$$(i,o)),g.state.next({isDirty:f(K,ne),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},R=(K,Z)=>(cn(r.errors,K,Z),g.state.next({errors:r.errors})),V=(K,Z,J,ne)=>{let pe=be(n,K);if(pe){let re=be(o,K,Jr(J)?be(i,K):J);Jr(re)||ne&&ne.defaultChecked||Z?cn(o,K,Z?re:P_(pe._f)):w(K,re),s.mount&&M()}},q=(K,Z,J,ne,pe)=>{let re=!1,ae={name:K},ut=be(r.touchedFields,K);if(l.isDirty){let Ee=r.isDirty;r.isDirty=ae.isDirty=f(),re=Ee!==ae.isDirty}if(l.dirtyFields&&(!J||ne)){let Ee=be(r.dirtyFields,K);ay(be(i,K),Z)?ji(r.dirtyFields,K):cn(r.dirtyFields,K,!0),ae.dirtyFields=r.dirtyFields,re=re||Ee!==be(r.dirtyFields,K)}return J&&!ut&&(cn(r.touchedFields,K,J),ae.touchedFields=r.touchedFields,re=re||l.touchedFields&&ut!==J),re&&pe&&g.state.next(ae),re?ae:{}},W=async(K,Z,J,ne,pe)=>{let re=be(r.errors,Z),ae=l.isValid&&r.isValid!==J;if(e.delayError&&ne?(c=c||C(R,e.delayError),c(Z,ne)):(clearTimeout(u),ne?cn(r.errors,Z,ne):ji(r.errors,Z)),((ne?!ay(re,ne):re)||!Do(pe)||ae)&&!K){let ut=Object.assign(Object.assign(Object.assign({},pe),ae?{isValid:J}:{}),{errors:r.errors,name:Z});r=Object.assign(Object.assign({},r),ut),g.state.next(ut)}h[Z]--,l.isValidating&&!h[Z]&&(g.state.next({isValidating:!1}),h={})},G=async K=>t.resolver?await t.resolver(Object.assign({},o),t.context,YEe(K||a.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},z=async K=>{let{errors:Z}=await G();if(K)for(let J of K){let ne=be(Z,J);ne?cn(r.errors,J,ne):ji(r.errors,J)}else r.errors=Z;return Z},te=async(K,Z,J={valid:!0})=>{for(let ne in K){let pe=K[ne];if(pe){let re=pe._f,ae=M_(pe,"_f");if(re){let ut=await eY(pe,be(o,re.name),E,t.shouldUseNativeValidation);if(ut[re.name]&&(J.valid=!1,Z))break;Z||(ut[re.name]?cn(r.errors,re.name,ut[re.name]):ji(r.errors,re.name))}ae&&await te(ae,Z,J)}}return J.valid},_=()=>{for(let K of a.unMount){let Z=be(n,K);Z&&(Z._f.refs?Z._f.refs.every(J=>!T_(J)):!T_(Z._f.ref))&&D(K)}a.unMount=new Set},f=(K,Z)=>(K&&Z&&cn(o,K,Z),!ay(d(),i)),m=(K,Z,J)=>{let ne=Object.assign({},s.mount?o:Jr(Z)?i:fc(K)?{[K]:Z}:Z);return aY(K,a,ne,J)},b=K=>yE(be(s.mount?o:i,K,e.shouldUnregister?be(i,K,[]):[])),w=(K,Z,J={})=>{let ne=be(n,K),pe=Z;if(ne){let re=ne._f;re&&(!re.disabled&&cn(o,K,hY(Z,re)),pe=G$&&C_(re.ref)&&uo(Z)?"":Z,fY(re.ref)?[...re.ref.options].forEach(ae=>ae.selected=pe.includes(ae.value)):re.refs?Vb(re.ref)?re.refs.length>1?re.refs.forEach(ae=>ae.checked=Array.isArray(pe)?!!pe.find(ut=>ut===ae.value):pe===ae.value):re.refs[0]&&(re.refs[0].checked=!!pe):re.refs.forEach(ae=>ae.checked=ae.value===pe):D_(re.ref)||(re.ref.value=pe,re.ref.type||g.watch.next({name:K})))}(J.shouldDirty||J.shouldTouch)&&q(K,pe,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&k(K)},v=(K,Z,J)=>{for(let ne in Z){let pe=Z[ne],re=`${K}.${ne}`,ae=be(n,re);(a.array.has(K)||!dE(pe)||ae&&!ae._f)&&!sy(pe)?v(re,pe,J):w(re,pe,J)}},P=(K,Z,J={})=>{let ne=be(n,K),pe=a.array.has(K);cn(o,K,Z),pe?(g.array.next({name:K,values:o}),(l.isDirty||l.dirtyFields)&&J.shouldDirty&&(r.dirtyFields=$$(i,o),g.state.next({name:K,dirtyFields:r.dirtyFields,isDirty:f(K,Z)}))):ne&&!ne._f&&!uo(Z)?v(K,Z,J):w(K,Z,J),z$(K,a)&&g.state.next({}),g.watch.next({name:K})},B=async K=>{let Z=K.target,J=Z.name,ne=be(n,J);if(ne){let pe,re,ae=Z.type?P_(ne._f):rY(K),ut=K.type===__.BLUR,Ee=!JEe(ne._f)&&!t.resolver&&!be(r.errors,J)&&!ne._f.deps||ZEe(ut,be(r.touchedFields,J),r.isSubmitted,A,x),_e=z$(J,a,ut);cn(o,J,ae),ut?ne._f.onBlur&&ne._f.onBlur(K):ne._f.onChange&&ne._f.onChange(K);let Lo=q(J,ae,ut,!1),Oe=!Do(Lo)||_e;if(!ut&&g.watch.next({name:J,type:K.type}),Ee)return Oe&&g.state.next(Object.assign({name:J},_e?{}:Lo));if(!ut&&_e&&g.state.next({}),h[J]=(h[J],1),l.isValidating&&g.state.next({isValidating:!0}),t.resolver){let{errors:Be}=await G([J]),ya=Q$(r.errors,n,J),Ce=Q$(Be,n,ya.name||J);pe=Ce.error,J=Ce.name,re=Do(Be)}else pe=(await eY(ne,be(o,J),E,t.shouldUseNativeValidation))[J],re=await M(!0);ne._f.deps&&k(ne._f.deps),W(!1,J,re,pe,Lo)}},k=async(K,Z={})=>{let J,ne,pe=fE(K);if(g.state.next({isValidating:!0}),t.resolver){let re=await z(Jr(K)?K:pe);J=Do(re),ne=K?!pe.some(ae=>be(re,ae)):J}else K?(ne=(await Promise.all(pe.map(async re=>{let ae=be(n,re);return await te(ae&&ae._f?{[re]:ae}:ae)}))).every(Boolean),!(!ne&&!r.isValid)&&M()):ne=J=await te(n);return g.state.next(Object.assign(Object.assign(Object.assign({},!fc(K)||l.isValid&&J!==r.isValid?{}:{name:K}),t.resolver?{isValid:J}:{}),{errors:r.errors,isValidating:!1})),Z.shouldFocus&&!ne&&B_(n,re=>be(r.errors,re),K?pe:a.mount),ne},d=K=>{let Z=Object.assign(Object.assign({},i),s.mount?o:{});return Jr(K)?Z:fc(K)?be(Z,K):K.map(J=>be(Z,J))},S=K=>{K?fE(K).forEach(Z=>ji(r.errors,Z)):r.errors={},g.state.next({errors:r.errors})},F=(K,Z,J)=>{let ne=(be(n,K,{_f:{}})._f||{}).ref;cn(r.errors,K,Object.assign(Object.assign({},Z),{ref:ne})),g.state.next({name:K,errors:r.errors,isValid:!1}),J&&J.shouldFocus&&ne&&ne.focus&&ne.focus()},U=(K,Z)=>mE(K)?g.watch.subscribe({next:J=>K(m(void 0,Z),J)}):m(K,Z,!0),D=(K,Z={})=>{for(let J of K?fE(K):a.mount)a.mount.delete(J),a.array.delete(J),be(n,J)&&(Z.keepValue||(ji(n,J),ji(o,J)),!Z.keepError&&ji(r.errors,J),!Z.keepDirty&&ji(r.dirtyFields,J),!Z.keepTouched&&ji(r.touchedFields,J),!t.shouldUnregister&&!Z.keepDefaultValue&&ji(i,J));g.watch.next({}),g.state.next(Object.assign(Object.assign({},r),Z.keepDirty?{isDirty:f()}:{})),!Z.keepIsValid&&M()},Y=(K,Z={})=>{let J=be(n,K),ne=Fb(Z.disabled);return cn(n,K,{_f:Object.assign(Object.assign(Object.assign({},J&&J._f?J._f:{ref:{name:K}}),{name:K,mount:!0}),Z)}),a.mount.add(K),J?ne&&cn(o,K,Z.disabled?void 0:be(o,K,P_(J._f))):V(K,!0,Z.value),Object.assign(Object.assign(Object.assign({},ne?{disabled:Z.disabled}:{}),t.shouldUseNativeValidation?{required:!!Z.required,min:Lb(Z.min),max:Lb(Z.max),minLength:Lb(Z.minLength),maxLength:Lb(Z.maxLength),pattern:Lb(Z.pattern)}:{}),{name:K,onChange:B,onBlur:B,ref:pe=>{if(pe){Y(K,Z),J=be(n,K);let re=Jr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,ae=GEe(re),ut=J._f.refs||[];if(ae?ut.find(Ee=>Ee===re):re===J._f.ref)return;cn(n,K,{_f:Object.assign(Object.assign({},J._f),ae?{refs:ut.concat(re).filter(T_),ref:{type:re.type,name:K}}:{ref:re})}),V(K,!1,void 0,re)}else J=be(n,K,{}),J._f&&(J._f.mount=!1),(t.shouldUnregister||Z.shouldUnregister)&&!(nY(a.array,K)&&s.action)&&a.unMount.add(K)}})};return{control:{register:Y,unregister:D,_executeSchema:G,_getWatch:m,_getDirty:f,_updateValid:M,_removeUnmounted:_,_updateFieldArray:N,_getFieldArray:b,_subjects:g,_proxyFormState:l,get _fields(){return n},set _fields(K){n=K},get _formValues(){return o},set _formValues(K){o=K},get _stateFlags(){return s},set _stateFlags(K){s=K},get _defaultValues(){return i},set _defaultValues(K){i=K},get _names(){return a},set _names(K){a=K},get _formState(){return r},set _formState(K){r=K},get _options(){return t},set _options(K){t=Object.assign(Object.assign({},t),K)}},trigger:k,register:Y,handleSubmit:(K,Z)=>async J=>{J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let ne=!0,pe=t.shouldUnregister?Kb(o):Object.assign({},o);g.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:re,values:ae}=await G();r.errors=re,pe=ae}else await te(n);Do(r.errors)&&Object.keys(r.errors).every(re=>be(pe,re))?(g.state.next({errors:{},isSubmitting:!0}),await K(pe,J)):(Z&&await Z(r.errors,J),t.shouldFocusError&&B_(n,re=>be(r.errors,re),a.mount))}catch(re){throw ne=!1,re}finally{r.isSubmitted=!0,g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Do(r.errors)&&ne,submitCount:r.submitCount+1,errors:r.errors})}},watch:U,setValue:P,getValues:d,reset:(K,Z={})=>{let J=K||i,ne=Kb(J),pe=K&&!Do(K)?ne:i;if(Z.keepDefaultValues||(i=J),!Z.keepValues){if(G$&&Jr(K))for(let re of a.mount){let ae=be(n,re);if(ae&&ae._f){let ut=Array.isArray(ae._f.refs)?ae._f.refs[0]:ae._f.ref;try{C_(ut)&&ut.closest("form").reset();break}catch{}}}o=e.shouldUnregister?Z.keepDefaultValues?Kb(i):{}:ne,n={},g.array.next({values:pe}),g.watch.next({values:pe})}a={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!l.isValid||!!Z.keepIsValid,s.watch=!!e.shouldUnregister,g.state.next({submitCount:Z.keepSubmitCount?r.submitCount:0,isDirty:Z.keepDirty?r.isDirty:Z.keepDefaultValues?!ay(K,i):!1,isSubmitted:Z.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Z.keepDirty?r.dirtyFields:Z.keepDefaultValues&&K?Object.entries(K).reduce((re,[ae,ut])=>Object.assign(Object.assign({},re),{[ae]:ut!==be(i,ae)}),{}):{},touchedFields:Z.keepTouched?r.touchedFields:{},errors:Z.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(K,Z={})=>{be(n,K)&&(Jr(Z.defaultValue)?P(K,be(i,K)):(P(K,Z.defaultValue),cn(i,K,Z.defaultValue)),Z.keepTouched||ji(r.touchedFields,K),Z.keepDirty||(ji(r.dirtyFields,K),r.isDirty=Z.defaultValue?f(K,be(i,K)):f()),Z.keepError||(ji(r.errors,K),l.isValid&&M()),g.state.next(Object.assign({},r)))},clearErrors:S,unregister:D,setError:F,setFocus:K=>{let Z=be(n,K)._f;(Z.ref.focus?Z.ref:Z.refs[0]).focus()}}}function gE(e={}){let t=mr.default.useRef(),[r,n]=mr.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},e3e(e)),{formState:r});let i=t.current.control,o=mr.default.useCallback(s=>{oY(s,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),s),n(Object.assign({},i._formState)))},[i]);return O_({subject:i._subjects.state,callback:o}),mr.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=iY(r,i._proxyFormState),t.current}var t3e=({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:o})=>{let s=St(),{t:a}=Us(),c=ii(),u=n?.networkID||Ft.Solana.Mainnet,{formState:{errors:h},control:l,clearErrors:g,getValues:x,setValue:A,register:E,handleSubmit:C,watch:M,trigger:N}=gE({mode:"all"}),{networkID:R,name:V,address:q,resolvedAddress:W}=M(),G={required:!0},z=(0,bE.useMemo)(()=>({required:{value:!0,message:a("addAccountImportAccountPublicKeyRequired")},validate:async f=>{if(f==="")return!0;if(!f2(f,R||u))try{let w=await o(f,R,s);return w?(A("resolvedAddress",w),e.find(P=>P.addresses.map(B=>B.address).includes(w))?a("addAccountImportAccountDuplicateAddress"):!0):a("addAccountImportAccountIncorrectFormat")}catch{return a("sendFormErrorInvalidDomain")}return A("resolvedAddress",f),e.find(w=>w.addresses.map(v=>v.address).includes(f))?a("addAccountImportAccountDuplicateAddress"):!0}}),[a,R,u,A,e,o,s]),te=V&&W&&!h.name&&!h.address,_=(0,bE.useCallback)(async({networkID:f,name:m,resolvedAddress:b},w)=>{let v=Js(f,b);t.includes(v)||await r({addressTypes:[v]});let P={};P[v]=b,i({name:m,addresses:P,icon:n?.icon}),w(),c.capture("addReadOnlyAccount",{data:{networkID:f,chainType:v}})},[i,n?.icon,r,t,c]);return{Controller:cY,canSubmit:te,control:l,errors:h,nameValidations:G,address:q,addressValidations:z,clearErrors:g,getValues:x,handleSubmit:C,onSubmit:_,register:E,setValue:A,trigger:N}};p();y();var mY=ee(Kr()),yY=/(\p{Emoji_Presentation}|\p{Extended_Pictographic})/giu,r3e=/[\p{Script=Latin}\p{Script=Cyrillic}]+/giu,n3e=(e="",t)=>(0,mY.useMemo)(()=>{let r=e.split(" "),n=r[0]??"",i=new RegExp(yY).test(n),o=new RegExp(r3e).test(n),s=!i&&!o,a=t!==void 0?t+1:"";if(i){let c=Array.from(n);if(c.length>1){let u="";for(let h of c)if(h.match(yY))u+=h;else break;n=u}}else o&&(n=yB(n).charAt(0));if(r.length>1){let c=Number(r[1]);if(Number.isInteger(c)&&c>=0)return s?a:`${n}${c}`}return s?a:n},[e,t]);p();y();var gY=ee(Ns()),lc=ee(Kr());var i3e=({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:i}=Us(),{formState:{errors:o},control:s,clearErrors:a,getValues:c,setValue:u,register:h,handleSubmit:l,watch:g,trigger:x}=gE({mode:"all",defaultValues:{addressType:r?.addressType||"solana",networkID:r?.networkID||Ft.Solana.Mainnet}}),[A,E]=(0,lc.useState)(null),C=uE(m=>m.setEditableAccountMetadata),{name:M}=g(),N=r?.secrets,R=c("networkID"),V=c("addressType"),q=c("privateKey"),W=(0,lc.useMemo)(()=>new Dm,[]),G={required:!0},z=(0,lc.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:m=>{m.target.value||E(null)},validate:m=>{try{let b=c("networkID"),w=c("addressType");if(/\s/.test(m)||!w)return i("addAccountImportAccountIncorrectFormat");let v=se.getNetworkDefinition(b).value,P=Lm({privateKey:m,addressType:w,networkIDValue:v});C({...r,secrets:P});let B=W.generateKeypairFromPrivateKey(P,w);return t.find(d=>!d.isReadOnly&&(d.addresses.map(S=>S.address).includes(ro({publicKey:B.publicKey,addressType:w,networkID:b}))||d.addresses.filter(S=>"publicKey"in S).map(S=>S.publicKey).find(S=>S?Buffer.from(S).equals(Buffer.from(B.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}}}),[i,W,t,r,C,c]);(0,lc.useEffect)(()=>{if(o.privateKey){E(null);return}if(q||N)try{let m=se.getNetworkDefinition(R).value,b=N||Lm({privateKey:q,addressType:V,networkIDValue:m}),w=W.generateKeypairFromPrivateKey(b,V);if(!q){let v="";switch(V){case"solana":{v=gY.default.encode(w.privateKey);break}case"eip155":{v="0x"+Buffer.from(w.privateKey).toString("hex");break}}u("privateKey",v)}E(ro({publicKey:w.publicKey,addressType:V,networkID:R}))}catch{E(null)}},[o.privateKey,V,W,q,N,u,R]);let te=(0,lc.useMemo)(()=>!!(M&&q&&!o.name&&!o.privateKey),[o.name,o.privateKey,M,q]),_=(0,lc.useCallback)(async({networkID:m,name:b,privateKey:w,addressType:v})=>{let P=se.getNetworkDefinition(m).value,B=Lm({privateKey:w,addressType:v,networkIDValue:P});await e({chainType:v,name:b,icon:r?.icon,privateKey:B}),n.capture("addPrivateKeyAccount",{data:{networkID:m,chainType:v}})},[e,r?.icon,n]);return{formOnSubmitHandler:l(m=>_(m)),canSubmit:te,control:s,getValues:c,register:h,setValue:u,trigger:x,errors:o,clearErrors:a,nameValidations:G,privateKey:q,privateKeyValidations:z,addressPreview:A}};p();y();var o3e=async(e,t,r)=>{let{enabledAddressTypes:n,enabledChainIDs:i,enabledMainnetOnlyNetworkIDs:o}=r,[s,a]=await Promise.all([t.get("developerMode"),rp(t)]),c=await e.fetchAllAccounts(),u=await ou(c,t),h=await Vg(t,u.identifier),l={name:h.name,icon:h.icon,identifier:u.identifier,addresses:Ng(u,o,n,i,a??pd,s?.isDeveloperMode??!1)};return u.type==="seed"?{...l,type:"seed",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="seedless"?{...l,type:"seedless",seedIdentifier:u.seedIdentifier,isReadOnly:!1}:u.type==="readOnly"?{...l,type:"readOnly",isReadOnly:!0}:u.type==="privateKey"?{...l,privateKeyIdentifier:u.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...l,type:u.type,isReadOnly:!1}};p();y();export{FB as a,e7 as b,sx as c,t7 as d,Iy as e,i3 as f,p7 as g,D7 as h,Ih as i,w3 as j,j7 as k,v3 as l,S3 as m,Y7 as n,E3 as o,k3 as p,Z7 as q,X7 as r,aC as s,uC as t,C3 as u,Pw as v,R9 as w,N9 as x,f6 as y,p9 as z,Ho as A,l6 as B,Fh as C,d6 as D,h6 as E,A9 as F,S9 as G,E9 as H,I9 as I,T9 as J,P9 as K,_9 as L,B9 as M,Yre as N,Zi as O,bo as P,dr as Q,dpe as R,hpe as S,ppe as T,ype as U,R6 as V,cie as W,O6 as X,N6 as Y,U6 as Z,qs as _,Ie as $,yM as aa,rf as ba,mi as ca,jo as da,kM as ea,a1 as fa,km as ga,BM as ha,L6 as ia,sf as ja,QM as ka,e8 as la,r8 as ma,i8 as na,p8 as oa,b8 as pa,x8 as qa,JPe as ra,df as sa,z8 as ta,Dm as ua,f0 as va,V1 as wa,eae as xa,Lm as ya,Q1 as za,SI as Aa,rU as Ba,LI as Ca,jI as Da,oL as Ea,fg as Fa,ro as Ga,dd as Ha,P4 as Ia,Mf as Ja,Rf as Ka,Of as La,Nf as Ma,se as Na,LL as Oa,Ft as Pa,Zc as Qa,OL as Ra,M0 as Sa,UL as Ta,KL as Ua,DL as Va,FL as Wa,qL as Xa,HL as Ya,WL as Za,zL as _a,jL as $a,GL as ab,$L as bb,YL as cb,JL as db,ZL as eb,f2 as fb,Js as gb,VL as hb,QL as ib,XL as jb,q4 as kb,pg as lb,tK as mb,Dhe as nb,Lhe as ob,Khe as pb,hd as qb,W4 as rb,Qc as sb,jhe as tb,Ghe as ub,z4 as vb,pd as wb,Zs as xb,Yhe as yb,Jhe as zb,Uk as Ab,Dk as Bb,Cye as Cb,Ug as Db,Lk as Eb,Vye as Fb,qk as Gb,Wye as Hb,zye as Ib,_F as Jb,jye as Kb,mg as Lb,Gye as Mb,Qhe as Nb,Xhe as Ob,$ye as Pb,Yye as Qb,Jye as Rb,Zye as Sb,Vpe as Tb,_k as Ub,bd as Vb,qpe as Wb,ja as Xb,Rk as Yb,Qpe as Zb,dye as _b,t0e as $b,tu as ac,O2 as bc,wpe as cc,Cpe as dc,Mpe as ec,e0e as fc,Ki as gc,Rpe as hc,md as ic,Sk as jc,Ik as kc,Eg as lc,Ope as mc,Npe as nc,gd as oc,Upe as pc,Dpe as qc,ii as rc,Ig as sc,Lpe as tc,St as uc,hye as vc,pye as wc,nu as xc,xF as yc,gye as zc,bye as Ac,xye as Bc,wye as Cc,vye as Dc,Sye as Ec,Eye as Fc,Iye as Gc,Tye as Hc,Pye as Ic,L$e as Jc,Ed as Kc,pme as Lc,yme as Mc,mme as Nc,BV as Oc,Wge as Pc,zge as Qc,tA as Rc,Nd as Sc,AP as Tc,Tr as Uc,EP as Vc,cH as Wc,mb as Xc,hG as Yc,mG as Zc,KG as _c,qG as $c,$S as ad,HG as bd,kSe as cd,ih as dd,t$ as ed,tEe as fd,rE as gd,rEe as hd,nEe as id,ve as jd,yu as kd,w_ as ld,iEe as md,oEe as nd,Qt as od,v_ as pd,sEe as qd,aEe as rd,Llt as sd,iE as td,Klt as ud,Flt as vd,Vlt as wd,qlt as xd,Hlt as yd,Wlt as zd,uEe as Ad,fEe as Bd,Ub as Cd,AEe as Dd,qt as Ed,aE as Fd,SEe as Gd,EEe as Hd,IEe as Id,q$ as Jd,lEe as Kd,I_ as Ld,kEe as Md,TEe as Nd,PEe as Od,_Ee as Pd,BEe as Qd,CEe as Rd,MEe as Sd,uc as Td,hEe as Ud,REe as Vd,OEe as Wd,NEe as Xd,UEe as Yd,DEe as Zd,Db as _d,LEe as $d,pEe as ae,yEe as be,mEe as ce,FEe as de,zEe as ee,cY as fe,gE as ge,t3e as he,cE as ie,uE as je,F$ as ke,n3e as le,i3e as me,vEe as ne,o3e as oe};
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)

@noble/secp256k1/lib/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/btc-signer/index.js:
  (*! scure-btc-signer - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-6ZVJZYTQ.js.map
