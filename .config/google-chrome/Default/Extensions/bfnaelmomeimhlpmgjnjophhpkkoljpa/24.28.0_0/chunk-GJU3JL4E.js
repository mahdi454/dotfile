import{k as at,s as Ie,z as cn}from"./chunk-PFT3L2T6.js";import{$a as ct,A as lt,Ac as Tt,Cb as _n,Fa as Cn,Ib as Hn,J as fn,Ja as kn,Ka as xn,L as gn,La as En,Lb as Wn,Mb as Kn,Nb as yt,Ob as qn,Ra as Rn,Sa as Dn,Sb as Qn,U as yn,Ua as Un,_ as bn,_a as In,_b as $n,aa as Sn,ab as K,ba as An,bb as Ne,cb as vn,cc as zn,db as j,fb as pt,gb as Be,gc as bt,hb as He,ia as Tn,ib as dt,jb as mt,kb as ft,lb as Pn,lc as Dt,mb as Nn,mc as St,nb as Bn,nc as pe,oa as _e,oc as Fe,qa as Fn,qb as On,qc as Ut,ra as Pe,rc as jn,sc as Oe,ta as hn,tb as gt,tc as Yn,ua as wn,uc as At,v as pn,vb as Ln,w as dn,wb as Mn,wc as Xn,y as ut,yb as Vn,z as mn,zb as Gn,zc as Le}from"./chunk-LVTCV2WT.js";import{a as Re,g as De,o as Ue}from"./chunk-S37W3WO2.js";import{Ka as an,Lb as ce,Ma as rt,Na as H,Nb as ln,O as Xt,Oc as er,P as ee,Q as fe,Sa as sn,T as Jt,Td as ue,U as Ze,Ua as be,Va as it,Ya as Ge,ca as rn,ce as ve,e as Jo,gb as un,ie as st,jd as Se,od as Ee,rc as ie,v as Zo}from"./chunk-6ZVJZYTQ.js";import{K as Zt,p as Yt}from"./chunk-DFKC7QAI.js";import{a as s,m as Q,n as ot}from"./chunk-56SJOU6P.js";import{$ as nt,M as tt,a as Ae,b as G,da as nn,f as et,fa as on,ia as xe,ka as Rt,l as en,s as tn,x as ye}from"./chunk-CBSQD5B4.js";import{_a as ke,ia as se,ka as re,la as ge,ta as Te}from"./chunk-VNNHZNYI.js";import{a as g}from"./chunk-4P36KWOF.js";import{a as V}from"./chunk-7X4NV6OJ.js";import{f as P,h as u,m as Buffer,n as l}from"./chunk-3KENBVE7.js";u();l();var tr=g.object({data:g.string(),from:g.string(),to:g.string()}),nr=g.object({transaction:tr});async function or({caip19:e,amount:t,owner:n}){let o=await fe.api().post("/tokens/v1/unwrap",{owner:n,caip19:e,amount:t.toNumber()}),r=nr.safeParse(o.data);if(!r.success){let{error:i}=r;throw Te.captureError(i,"fungibles"),new ct(`Failed to get unwrap transaction: ${i.message}`)}return r.data.transaction}var rr=({caip19:e,amount:t,owner:n})=>re({gcTime:Be.Medium,staleTime:1/0,enabled:n!==""&&t.isGreaterThan(0),queryKey:K.unwrapTransaction({caip19:e,amount:t,owner:n}),async queryFn(){return await or({caip19:e,amount:t,owner:n})}});u();l();function It(){let e=Se(),t=ie(),n=se();return ge({async mutationFn({accountId:o,mutations:r}){await $n(e,t,{accountId:o,mutations:r})},async onSuccess(o,r){await n.invalidateQueries({queryKey:K.hiddenMints(r.accountId)})}})}u();l();var vt=P(er());u();l();var Ft={recipient:"",addressBookRecipient:void 0,amountAsset:new Ae(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0};var Zn={sendSessionId:"",fungibleKey:void 0,splTokenAccount:void 0,sendFormValues:Ft,shouldShowUsdValues:!1,retryArgs:void 0},Y=st((e,t)=>({...(0,vt.default)(Zn),resetSendSlice:()=>{let n=(0,vt.default)(Zn);n.sendSessionId=Zt(),e(n)},setSendFungibleKey:(n,o)=>{e({fungibleKey:n,splTokenAccount:o})},setSendFormValues:n=>{e({sendFormValues:n})},setInputAmount:n=>{let o=t();e({sendFormValues:{...o.sendFormValues,inputAmount:n}})},setShouldShowUsdValues:n=>{e({shouldShowUsdValues:n})},setRetryArgs:n=>{e({retryArgs:n})}}));u();l();var eo={collectible:void 0,sendFormValues:Ft,shouldRequireAmount:!1},ir=st(e=>({...eo,resetSendSlice:()=>{e({...eo})},setSendCollectible:t=>{e({collectible:t})},setSendFormValues:t=>{e({sendFormValues:t})},setShouldRequireAmount:t=>{e({shouldRequireAmount:t})}}));u();l();u();l();u();l();u();l();var ht=P(Jo(),1),no=P(Zo(),1);var to=(0,ht.struct)([(0,ht.u8)("instruction")]);function oo(e,t,n,o=[],r=_e){let i=wn([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,o),a=Buffer.alloc(to.span);return to.encode({instruction:hn.CloseAccount},a),new no.TransactionInstruction({keys:i,programId:r,data:a})}var Pt=new G(0),Nt=(e,t,n,o=!0)=>{let{data:r,isLoading:i}=yt(e),a=Y(b=>b.sendFormValues.recipient);if(!t)return Pt;let{data:c,type:p}=t,m=new G(c.balance).multipliedBy(new G(10).pow(c.decimals));if(!j(p)||!n)return m;let d=new G(0);if(ut(n))d=m.minus(new G(n.value));else if(mn(n)){let{gasLimit:b,maxFeePerGas:y,l1Fee:S=new G(0)}=n,C=b.times(y).plus(S);d=m.minus(C)}else if(lt(n)){if(!e||i)return;let b=e.addressType,y=r?.safeToSendUtxos??[],S=dn(n.btcPerKilobyte),C=a&&an.safeParse(a).success?a:"bc1p",k=[{value:y.reduce((T,E)=>T.plus(new G(E.value)),new G(0)).toNumber(),address:C}],R=bn(b,y,k,S.toNumber(),[]);if(R.type==="error")d=new G(R.maxAmount).integerValue(G.ROUND_DOWN);else{let{inputs:T,fee:E}=R;d=T.reduce((N,I)=>N.plus(new G(I.value)),new G(0)).minus(E).integerValue(G.ROUND_DOWN)}}else return en(n);return d.isGreaterThan(Pt)?d:o?Pt:d};u();l();var Bt=P(V());u();l();var ro=(e,t,n)=>{let o=Xn(e,t),{fungibles:r,isLoadingTokens:i,isErrorTokens:a,isErrorPrices:c}=pe({...n,keys:o?[o]:[]});return{isError:c||a,fungible:r.length===1?r[0]:void 0,isLoading:i}};var Ot=(e,t,n,o=new Ae(0))=>{let{fungible:r,isLoading:i,isError:a}=ro(e,t),c="unknown",p="",m=(0,Bt.useMemo)(()=>{let b=r?.data.walletAddress;if(!b)return;let y=un(e,b);return{networkID:e,address:b,addressType:y}},[e,r?.data.walletAddress]),d=Nt(m,r,n,!1);return!a&&r&&d&&(d.gte(o)?c="sufficient":c="insufficient",p=r.data.symbol||""),(0,Bt.useMemo)(()=>({hasSufficientFunds:c,nativeTokenSymbol:p,isLoading:i,isError:a}),[c,p,i,a])};u();l();var uo=P(V());u();l();var Lt=P(V());u();l();var io=({chainAddresses:e=[]})=>{let t=K.tokensErrorCount(e);return re({queryKey:t,initialData:0})};u();l();var ar=({errors:e})=>e;function ao({chainAddresses:e,queryOptions:t}){return On({select:ar,chainAddresses:e,queryOptions:t})}var so=3,wt=({networkID:e,chainAddresses:t=[]})=>{let{data:n=[]}=ao({chainAddresses:t}),{data:o=0}=io({chainAddresses:t}),r=o>=so,{data:i=0}=Gn(),a=i>=so,{t:c}=Q(),p=(0,Lt.useMemo)(()=>{if(r)return c("partialErrorGeneric");let m=n.filter(b=>e?b.details.chainId===e:!0),d=m.length+(a?1:0);return d?d>1?c("partialErrorGeneric"):a?c("partialErrorTokenPrices"):e?c("partialErrorTokenDetail"):c("partialErrorBalanceChainName",{chainName:H.getChainName(m[0].details.chainId)}):""},[n,r,e,a,c]);return(0,Lt.useMemo)(()=>({partialErrorMessage:p,shouldShowPartialError:p!==""}),[p])};function sr(e){let{onTappingBuy:t,onTappingReceive:n,onTappingSend:o,onTappingSwap:r,account:i}=e,{shouldShowPartialError:a,partialErrorMessage:c}=wt({chainAddresses:i?.addresses});return{ctaActions:ur({onTappingBuy:t,onTappingReceive:n,onTappingSend:o,onTappingSwap:r}),shouldShowPartialError:a,partialErrorMessage:c}}function ur(e){let{t}=Q();return(0,uo.useMemo)(()=>{let o=[];return o.push({text:t("commandSend"),type:"send",onClick:e.onTappingSend}),o.push({text:t("commandSwap"),type:"swap",onClick:e.onTappingSwap}),o.push({text:t("commandReceive"),type:"receive",onClick:e.onTappingReceive}),o.push({text:t("commandBuy"),type:"buy",onClick:e.onTappingBuy}),o.sort((r,i)=>(Oe.get(r.type)??100)-(Oe.get(i.type)??100)),{primary:o,more:[]}},[t,e.onTappingSend,e.onTappingSwap,e.onTappingReceive,e.onTappingBuy])}u();l();u();l();var Ke=(r=>(r.FAIL_SEVERE="FAIL_SEVERE",r.FAIL_HIGH="FAIL_HIGH",r.NO_ACTION="NO_ACTION",r.DATA_NOT_FOUND="DATA_NOT_FOUND",r))(Ke||{}),lo=g.object({action:g.nativeEnum(Ke),address:sn,expirationUnixtimeInSec:g.number().nullish().default(null)}),Mt=g.object({addressScreenResults:g.array(lo)}),We=class extends Error{constructor(t){super(t),this.name="WalletScreenError"}};u();l();var bo=P(V());u();l();u();l();var cr="@phantom/wallet-screening",co=`${cr}:wallet-screen-action`,po={walletScreenAction(e){return[co,e]}};u();l();var mo=new Error("Failed to fetch wallet screen action.");async function fo(e){try{let t=await fe.api().post("/wallet_screen/v1",e);if(!Jt(t))throw mo;let n=t.data;return Mt.parse(n)}catch{throw mo}}var go=ye({days:7}),yo=e=>{let t=e!==void 0&&H.isMainnetNetworkID(e.networkID),n=[];if(e!==void 0){let c=H.isEVMNetworkID(e.networkID)?e.address.toLowerCase():e.address;n=[{chainId:e.networkID,address:c,resourceType:"address"}]}let o={addresses:n},r=se(),i=po.walletScreenAction(o),a=[i[0]];return re({enabled:t,queryKey:i,gcTime:go,staleTime:go,refetchInterval:!1,refetchOnMount:!1,async queryFn(){if(pr(r,a))return"FAIL_SEVERE";let p=await fo(o);return dr(p)}})},pr=(e,t)=>{let n=e.getQueriesData({queryKey:t,exact:!1}),o=!1;for(let[r,i]of n){let a=i;if(a&&a==="FAIL_SEVERE"){o=!0;break}}return o},dr=e=>{let t=e.addressScreenResults;return t.some(n=>n.action==="FAIL_SEVERE")?"FAIL_SEVERE":t.some(n=>n.action==="FAIL_HIGH")?"FAIL_HIGH":t.some(n=>n.action==="NO_ACTION")?"NO_ACTION":"DATA_NOT_FOUND"};var Vt=(e,t)=>{let n=ie(),{data:o}=yo(e);switch((0,bo.useEffect)(()=>{o&&e&&n.capture("walletScreened",{data:{walletScreen:{action:o.toString(),surface:t},chainId:H.getChainID(e.networkID),networkId:e.networkID}})},[o,e,t,n]),o){case"FAIL_SEVERE":case"FAIL_HIGH":throw new We(`Transaction disabled: ${t}`);case"NO_ACTION":case"DATA_NOT_FOUND":return}};u();l();u();l();u();l();var So=P(V());var fr=({networkID:e,unsignedTransaction:t,pendingActivityRows:n,accountIdentifier:o,accountSigner:r,storage:i,includeCallPayload:a})=>({accountSigner:r,accountIdentifier:o,networkID:e,unsignedTransaction:t,...a&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:n}},storage:i}),gr=async({t:e,fungible:t,unsignedUnwrapTx:n,gasEstimation:o,storage:r,accountMetadata:i,accountSigner:a})=>{if(!n)throw new Error("Unsigned unwrap transaction is required");if(!o)throw new Error("Gas estimation is required");let{chain:c,balance:p}=t.data;if(!H.isEthereumNetworkID(c.id))throw new Error(`Chain is not supported: ${c.id}`);let m=c.id,d={topRight:{text:`+${p} ${c.symbol}`},topLeft:{text:e("transactionsPendingSwapping")},bottomRight:{text:`-${p} ${t.data.symbol}`},bottomLeft:{text:`${t.data.name}`}},b=Yt.parse({type:"0x2",chainId:H.getEVMNetworkIDValue(m),gas:`0x${o.gasLimit.toString(16)}`,maxFeePerGas:`0x${o.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${o.maxPriorityFeePerGas.toString(16)}`,...n}),y=fr({storage:r,accountSigner:a,pendingActivityRows:d,includeCallPayload:!1,networkID:m,unsignedTransaction:b,accountIdentifier:i.accountIdentifier});return Tn(y)},yr=()=>{let{data:e}=ue();return(0,So.useMemo)(()=>{let n=e?.type,o=e?.name??"",r=e?.identifier??"";return{accountName:o,accountType:n,accountIdentifier:r}},[e])},br=e=>{let t=Se(),n=se(),{t:o}=Q(),r=yr(),i=Ee();return ge({async mutationFn({fungible:a,unsignedUnwrapTx:c,gasEstimation:p}){return await gr({t:o,fungible:a,unsignedUnwrapTx:c,gasEstimation:p,accountMetadata:r,storage:t,accountSigner:i})},async onSuccess(){await n.invalidateQueries({queryKey:K.tokens(e)})}})};u();l();u();l();u();l();var Ao=()=>{let{setRetryArgs:e}=Y();return t=>{if(t instanceof An){let{successfulTxIds:n}=t,[o,r]=n;e({type:"BRC20",commitTxId:o,revealTxId:r})}}};function Sr(){let e=Se(),{data:t}=ue({select:a=>a.identifier}),n=Ao(),o=Kn(),r=Ee();return ge({mutationFn:async({multichainTransaction:a,pendingTransactionInput:c,senderAddress:p,gasEstimation:m})=>{if(!t)throw new Error("No account identifier found");let{networkID:d}=a,b=Ne.get(d).onBeforeSend({multichainTransaction:a,gasEstimation:m})??a,y=await En({accountIdentifier:t,accountSigner:r,multichainTransaction:b,networkID:d,pendingTransactionInput:c,senderAddress:p,storage:e,utxoManager:o});return xn(d,y)},onError(a){a instanceof Error&&(Te.captureError(a,"fungibles"),a instanceof Sn&&n(a))}})}u();l();var To=P(V());var Ar=(e,t,n)=>{let o=se(),{fungibles:r}=pe({keys:[e]}),i=r.length===1?r[0]:void 0;(0,To.useEffect)(()=>{if(!i)return;let{type:a,data:c}=i,{balance:p,decimals:m,chain:d}=c,{id:b}=d,y=j(a)===!0;if(!n||!p||y||p.isEqualTo(t))return;let S=K.transferFungibleLoggingContext(e),C={transactionId:n,decimals:m,chainId:b,isNativeToken:y,previousBalance:p,fungibleKey:e};o.setQueryData(S,C)},[n])};u();l();var ho=P(V());u();l();function Fo(e,t,n){return ee.PublicKey.findProgramAddressSync([e.toBuffer(),n.toBuffer(),t.toBuffer()],Fn)[0]}var Tr=new ct("Unable to unwrap SOL. Wrapped SOL Token account does not exist.");function Gt(){let{connection:e}=Hn(),{data:t}=ue(),{solanaChainAddress:n,accountIdentifier:o}=(0,ho.useMemo)(()=>({solanaChainAddress:t?.addresses.find(Ge),accountIdentifier:t?.identifier??""}),[t]),r=Se(),i=Ee(),{t:a}=Q();return ge({mutationFn:async()=>{if(!n)return Promise.reject("solanaChainAddress not loaded");let{networkID:c,address:p}=n,m=new ee.PublicKey(p),d=Fo(m,Pe,_e);if(!await e.getAccountInfo(d))throw Tr;let y=oo(d,m,m,[],_e),S=new Xt.Transaction().add(y),C={ownerAddress:p,networkID:c,data:{signature:""},type:"unwrapSOL",display:{summary:{topLeft:{text:a("assetDetailUnwrappingSOL")}}}},x=await Cn({accountIdentifier:o,accountSigner:i,connection:e,feePayer:new ee.PublicKey(p),pendingTransactionInput:C,storage:r,transaction:S,useSubmissionService:!1});return{networkID:c,id:x}}})}u();l();var wo=ye({minutes:1}),Fr=(e,t=!0)=>{let n=K.solanaBalance(e);return re({enabled:!!e&&t&&Ge(e),gcTime:wo,staleTime:wo,queryKey:n,async queryFn(){if(!e)throw new Error("No chain address provided");if(Ge(e))return gn(e.networkID).getBalance(new ee.PublicKey(e.address));throw new Error(`SOL balance not implemented for ${e.networkID}`)}})};u();l();function _t({balance:e,fungibleTokenType:t,chainAddress:n,isSendEnabledForTokenType:o,isSplNonTransferable:r}){let{data:i}=yt(n),a;switch(t){case"BRC20":case"BitcoinNative":a=!!i;break;default:a=!0}return e.isGreaterThan(0)&&o&&a&&!r}u();l();var ko=P(V());u();l();var Co=P(V());var Ht=e=>{let{data:t}=Ie();return(0,Co.useMemo)(()=>{if(!e||!t)return;let n=e.data.chain.id,o=t.explorers[n]??Re.get(n).defaultExplorer,r,i;if(j(e.type))i="address",r=e.data.walletAddress;else switch(e.type){case"ERC20":{i="address",r=e.data.contractAddress;break}case"SPL":{i="address",r=(e.data.splTokenAccountPubkey||e.data.tokenAddress)??"";break}case"BRC20":return{explorerName:"Unisat",explorerUrl:`https://unisat.io/brc20?q=${e.data.walletAddress}`}}let a=Ue({networkID:n,endpoint:i,explorerType:o,param:r});return{explorerName:De[o],explorerUrl:a}},[e,t])};var hr=[{text:"commandReceive",type:"receive"},{text:"commandSend",type:"send"},{text:"commandSwap",type:"swap"},{text:"assetDetailStakeSOL",singleWordAltText:"commandStake",type:"stakeSol",menuOnly:!0},{text:"commandMintLST",singleWordAltText:"commandMintLST",type:"mintLST",menuOnly:!0},{text:"assetDetailUnwrapAll",singleWordAltText:"commandUnwrap",type:"unwrapWrappedSol",menuOnly:!0},{text:"commandStake",singleWordAltText:"commandStake",type:"stake",menuOnly:!0},{text:"commandUnstake",singleWordAltText:"commandUnstake",type:"unstake",menuOnly:!0},{text:"commandReportAsSpam",singleWordAltText:"commandReport",type:"reportAsSpam",isDestructive:!0,menuOnly:!0},{text:"commandReportAsNotSpam",singleWordAltText:"collectiblesReportNotSpam",type:"reportAsNotSpam",isDestructive:!0,menuOnly:!0},{text:"",singleWordAltText:"commandView",type:"viewOnExplorer",menuOnly:!0}];function wr(e,t){return hr.reduce((n,o)=>{let r=e[o.type];if(r===void 0)return n;if((typeof r.enabled>"u"?!!r.onClick:r.enabled)&&r.onClick){let a=r.text?r.text:t(o.text);return[...n,{...o,onClick:r.onClick,text:a,...o.singleWordAltText?{singleWordAltText:t(o.singleWordAltText)}:{}}]}return n},[])}function Cr(e){let{balance:t,canSwap:n,chainAddress:o,fee:r,fungible:i,isReadOnlyAccount:a,isSplNonTransferable:c,killBrc20Sends:p,onDepositPress:m,onMarkAsSpam:d,onMarkNotSpam:b,onSendPress:y,onStakeSolPress:S,onSwapPress:C,onUnwrapWrappedSolPress:x,onNativeMintLSTPress:k,onStakeLSTPress:R,onUnstakeLSTPress:T,onViewOnExplorerPress:E,type:A}=e,{t:N}=Q(),I=ve("solana"),h=Ht(i),B=A==="BRC20"?!p:!0,O=_t({balance:t,fungibleTokenType:A,chainAddress:o,isSendEnabledForTokenType:B,isSplNonTransferable:c}),_=A==="SolanaNative",D=!a&&_,L=A==="SPL"&&i?.data.tokenAddress===Pe.toBase58(),{fungible:ne}=Fe({key:"SolanaNative"}),F=G(ne?.data?.amount??"0"),W=L&&!!i.data.tokenAddress&&I!==void 0&&F.isGreaterThan(r),M=(0,ko.useMemo)(()=>{let oe=wr({receive:{enabled:!0,onClick:m},viewOnExplorer:{enabled:!0,onClick:E,text:N("assetDetailViewOnExplorer",{explorer:h?.explorerName})},send:{enabled:O,onClick:y},swap:{enabled:n,onClick:C},stakeSol:{enabled:D,onClick:S},mintLST:{onClick:k},unwrapWrappedSol:{enabled:W,onClick:x},stake:{onClick:R},unstake:{onClick:T},reportAsSpam:{enabled:i?.type&&!j(i.type),onClick:d},reportAsNotSpam:{enabled:i?.type&&!j(i.type),onClick:b}},N);return oe.sort((w,U)=>(Oe.get(w.type)??100)-(Oe.get(U.type)??100)),Yn(oe,4)},[N,m,O,n,D,W,d,b,h?.explorerName,E,i?.type,y,C,S,x,R,T,k]);return{canStakeSol:D,canUnwrapWrappedSol:W,ctaActions:M}}u();l();var Me=P(V());u();l();u();l();var kr=g.object({data:In}),xr="TokenHoldingsNotLoading";async function xo(e){let t=be(e.caip19),n=new URLSearchParams;n.append("walletAddress",e.walletAddress);let o=t.resourceType==="nativeToken"?t.slip44:t.address,r=await fe.api().timeout(ye({seconds:10})).get(`/tokens/v1/${t.chainId}/${t.resourceType}/${o}/holdings`,{params:n});if(r.status!==200)throw new ot({key:xr});let i=await r.data;return kr.parse(i)}var Er="get-fungible-holdings",Rr=e=>({gcTime:Be.Short,staleTime:He.Long,enabled:!!e,queryKey:e?K.fungibleHoldings(e):[],async queryFn(){if(!e)throw new Error("No args provided for getFungibleHoldings");try{return(await xo(e)).data}catch(t){if(Ze(t)){let n=t.response?.status;dt(t,n,Er,{})}throw t}}});function Eo(e){return re(Rr(e))}function Dr(e){if(e&&H.isBitcoinNetworkID(e.networkID))return`${rn.getDisplayName(e.addressType)} (${tn(e.address,5,3)})`}function Ur({symbol:e,name:t,chainName:n,addressString:o,mintAddress:r,contractAddress:i,transferFeePercent:a,interestBearingPercent:c,isNonTransferable:p,isPermanentDelegated:m,copyToClipboard:d}){return[{label:s.t("assetDetailTokenNameLabel"),value:e?`${t} (${e})`:t},n?{label:s.t("assetDetailNetworkLabel"),value:n}:void 0,o?{label:s.t("assetDetailAddressLabel"),value:o}:void 0,r?{label:s.t("publicFungibleDetailMint"),value:ce(r,4),onPress:()=>{d(r)}}:void 0,i?{label:s.t("publicFungibleDetailContract"),value:ce(i,4),onPress:()=>{d(i)}}:void 0,a?{label:s.t("sendFungibleTransferFee"),value:`${a}%`,tooltipContent:s.t("sendFungibleTransferFeeToolTip")}:void 0,c?{label:s.t("sendFungibleInterestBearingPercent"),value:`${c}%`}:void 0,p?{label:s.t("sendFungibleNonTransferable"),value:s.t("sendFungibleNonTransferableYes")}:void 0,m?{label:s.t("permanentDelegateTitle"),value:s.t("permanentDelegateValue"),tooltipContent:s.t("permanentDelegateTooltipValue")}:void 0].filter(et)}function Ro({fungibleKey:e,account:t,copyToClipboard:n}){let{fungible:o}=Fe({key:e}),{chainName:r,symbol:i,name:a,walletAddress:c,networkID:p,transferFeePercent:m,interestBearingPercent:d,isNonTransferable:b,isPermanentDelegated:y}=(0,Me.useMemo)(()=>{let I=o?.data;if(!I)return{};let{symbol:h,name:B,chain:O,walletAddress:_}=I,D=ft(o),L=Pn(o),ne=Bn(o),F=!!Nn(o);return{symbol:h??null,name:B??s.t("assetDetailUnknownToken"),walletAddress:_,chainName:O.name,networkID:O.id,transferFeePercent:D,interestBearingPercent:L,isNonTransferable:ne,isPermanentDelegated:F}},[o]),{data:S}=ve({address:c,networkID:p});qn(S);let C=(0,Me.useMemo)(()=>Dr(S),[S]),x=(0,Me.useMemo)(()=>o&&o.type==="SPL"?o.data.mintAddress:void 0,[o]),k=(0,Me.useMemo)(()=>o&&o.type==="ERC20"?o.data.contractAddress:void 0,[o]),{partialErrorMessage:R,shouldShowPartialError:T}=wt({chainAddresses:t?.addresses,networkID:p}),{data:[E]}=ke(["enable-holdings"]),A=E&&o?it(St(o)):void 0,N=Eo(A&&c?{caip19:A,walletAddress:c}:void 0);return(0,Me.useMemo)(()=>({summaryItems:Ur({symbol:i,name:a,chainName:r,addressString:C,mintAddress:x,contractAddress:k,transferFeePercent:m,interestBearingPercent:d,isNonTransferable:b,isPermanentDelegated:y,copyToClipboard:n}),partialErrorMessage:R,shouldShowPartialError:T,holdingsQueryResult:N,isHoldingsEnabled:E}),[n,i,a,r,C,x,k,m,d,b,R,T,y,N,E])}u();l();var Do=P(V());var Ir=e=>{let t=se();return(0,Do.useCallback)(()=>t.invalidateQueries({queryKey:K.tokens(e)}),[t,e])};u();l();var Uo=P(V()),Wt=(e,t)=>(0,Uo.useMemo)(()=>{if(e)if(lt(e)){let n=pn(e).toNumber().toLocaleString("en-US");return{leftSubtext:void 0,leftSubtextColor:void 0,rightSubtext:t("satsAmount",{sats:n.toString()})}}else return ut(e)&&e.highFees?{leftSubtext:t("notificationTransactionApprovalNetworkFeeHighWarning"),leftSubtextColor:"#ffdc62",rightSubtext:""}:void 0},[e,t]);u();l();u();l();u();l();u();l();u();l();var vo=(r=>(r.Website="website",r.Telegram="telegram",r.X="x",r.Discrod="discord",r))(vo||{}),vr=g.object({type:g.nativeEnum(vo),url:g.string()}),Po=Dn.merge(g.object({address:g.string().nullish(),description:g.string().nullish(),logoURI:g.string().nullish(),links:g.array(vr).nullish(),marketCap:g.number({coerce:!0}).nullish(),totalSupply:g.number({coerce:!0}).nullish(),circulatingSupply:g.number({coerce:!0}).nullish(),maxSupply:g.number({coerce:!0}).nullish(),holders:g.number().nullish(),volume24hUSD:g.number({coerce:!0}).nullish(),volume24hUSDChangePercentage:g.number().nullish(),trades24h:g.number().nullish(),trades24hChangePercentage:g.number().nullish(),uniqueWallets24h:g.number().nullish(),uniqueWallets24hChangePercentage:g.number().nullish(),top10HoldersPercent:g.number().nullish(),mintable:g.boolean().nullish(),freezable:g.boolean().nullish(),mutableMetadata:g.boolean().nullish(),ownershipRenounced:g.boolean().nullish(),updateAuthority:g.string().nullish(),freezeAuthority:g.string().nullish(),spamStatus:Rn.optional().default("NOT_VERIFIED")})),yc=g.object({code:g.string(),message:g.string()});var Pr="TokenDetailNotLoading";async function Kt(e){let t=be(e.caip19),n=t.resourceType==="nativeToken"?t.slip44:t.address,o=await fe.api().timeout(ye({seconds:10})).get(`/tokens/v1/${t.chainId}/${t.resourceType}/${n}`);if(o.status!==200)throw new ot({key:Pr});let r=await o.data;return Po.parse(r.data),r}u();l();var No={fungibleDetail({caip19:e}){return["fungibleDetail",{caip19:e}]}};var Nr="get-fungible-detail",Bo=e=>({gcTime:Be.Short,staleTime:He.Long,queryKey:No.fungibleDetail({caip19:e.caip19}),async queryFn(){try{return(await Kt(e)).data}catch(t){if(Ze(t)){let n=t.response?.status;dt(t,n,Nr,{})}throw t}}});function Qe(e){return re(Bo(e))}var te=P(V());function Br(e,t){if(!e)return;let n=[];X(n,s.t("nounSymbol"),e.symbol),X(n,s.t("nounNetwork"),e.chain.name),X(n,rt.safeParse(e.chain.id).success?s.t("publicFungibleDetailMint"):s.t("publicFungibleDetailContract"),t);let o=Lo(e.marketCap);X(n,s.t("publicFungibleDetailMarketCap"),o);let r=$e(e.totalSupply);X(n,s.t("publicFungibleDetailTotalSupply"),r);let i=$e(e.circulatingSupply);X(n,s.t("publicFungibleDetailCirculatingSupply"),i);let a=Gr(e.maxSupply);X(n,s.t("publicFungibleDetailMaxSupply"),a);let c=$e(e.holders);return X(n,s.t("publicFungibleDetailHolders"),c),n}function Or(e){if(!e)return;let t=[],n=Lo(e.volume24hUSD),o=kt(e.volume24hUSDChangePercentage);Qt(t,s.t("publicFungibleDetailVolume"),n,o);let r=$e(e.trades24h),i=kt(e.trades24hChangePercentage);Qt(t,s.t("publicFungibleDetailTrades"),r,i);let a=$e(e.uniqueWallets24h),c=kt(e.uniqueWallets24hChangePercentage);return Qt(t,s.t("publicFungibleDetailTraders"),a,c),t.length>0?t:void 0}function Lr(e,t){if(!e)return;let n=[],o=kt(e.top10HoldersPercent);X(n,s.t("publicFungibleDetailTop10Holders"),o,s.t("publicFungibleDetailTop10HoldersTooltip"),t);let r=qt(e.mintable);X(n,s.t("publicFungibleDetailMintable"),r,s.t("publicFungibleDetailMintableTooltip"),t);let i=qt(e.mutableMetadata);X(n,s.t("publicFungibleDetailMutableInfo"),i,s.t("publicFungibleDetailMutableInfoTooltip"),t);let a=qt(e.ownershipRenounced);X(n,s.t("publicFungibleDetailOwnershipRenounced"),a,s.t("publicFungibleDetailOwnershipRenouncedTooltip"),t);let c=Oo(e.updateAuthority);X(n,s.t("publicFungibleDetailUpdateAuthority"),c,s.t("publicFungibleDetailUpdateAuthorityTooltip"),t);let p=Oo(e.freezeAuthority);return X(n,s.t("publicFungibleDetailFreezeAuthority"),p,s.t("publicFungibleDetailFreezeAuthorityTooltip"),t),n.length>0?n:void 0}function Mr(e){let{fungibleAnalytics:t,caip19:n,canBuy:o,canSwap:r,entryPoint:i,fungibleKey:a,navigateToBalance:c,openBuy:p,openReportIssue:m,openLink:d,openSwapper:b,showSummaryTooltip:y,title:S,onShare:C,copyAddress:x,includeUgcItemTypes:k,refetchBondingCurve:R}=e,{t:T}=Q(),E=ie(),A=(0,te.useMemo)(()=>be(n),[n]),{data:N}=ue(),I=N?.isReadOnly??!1,{data:h,refetch:B,isError:O}=Qe({caip19:n}),_=Hr(a,A),{fungibles:D,isLoadingTokens:L,refetch:ne}=pe({keys:_}),F=D?.[0],W=_r(h,F,S),M=(0,te.useRef)(!1);(0,te.useEffect)(()=>{!M.current&&!L&&(M.current=!0,t.onPublicFungiblePageOpen({caip19:n,uiContext:{name:i},hasBalance:!!F}))},[t,n,F,i,L]);let oe=(0,te.useCallback)(()=>{Promise.all([B(),ne(),R()])},[B,ne,R]),w=(0,te.useCallback)(()=>{if(!F)return;let Z=F.data.chain.id,we=W??T("assetDetailUnknownToken");E.capture("assetDetailClick",{data:{address:F.data.tokenAddress,chain:Z,chainId:Z,isNativeOfType:Z,networkId:Z,type:"fungible",spamStatus:F.data.spamStatus,name:we}}),c({chainName:F.data.chain.name,fungibleKey:F.data.key,title:W,networkID:F.data.chain.id,symbol:F.data.symbol??"",tokenAddress:F.data.tokenAddress,type:F.type,walletAddress:F.data.walletAddress})},[W,F,c,E,T]),U=[];k&&U.push({type:"ugcWarningBanner",data:{caip19:n,spamStatus:h?.spamStatus}}),!k&&h&&h.spamStatus!=="VERIFIED"&&U.push({type:"unverifiedBanner"}),U.push({type:"priceHistory",data:{caip19:n}});let q=Vr({caip19:n,canBuy:o,canSwap:r,fungible:F,fungibleCaip19:A,openBuy:p,openReportIssue:m,openLink:d,openSwapper:b,title:W,onShare:C,isReadOnly:I}),de=q.primary.length>0,me=!I&&q.primary.length===0&&q.more.length>0;de&&U.push({type:"cta",data:{actions:q}}),F&&U.push({type:"sectionHeader",data:s.t("publicFungibleDetailYourBalance")},{type:"balance",data:{fungible:F,onPress:w}}),O&&U.push({type:"error",data:void 0}),h?.description&&U.push({type:"sectionHeader",data:s.t("publicFungibleDetailAbout")},{type:"about",data:h.description});let z=Br(h,x);z&&(U.push({type:"sectionHeader",data:s.t("publicFungibleDetailInfo")}),k?U.push({type:"tableWithBondingCurveProgress",data:{caip19:n,rows:z,key:"info"}}):U.push({type:"table",data:{key:"info",rows:z}}));let he=Or(h);he&&U.push({type:"sectionHeader",data:s.t("publicFungibleDetailPerformance")},{type:"table",data:{key:"performance",rows:he}});let v=Lr(h,y);v&&U.push({type:"sectionHeader",data:s.t("publicFungibleDetailSecurity")},{type:"table",data:{key:"security",rows:v}});let le=(0,te.useCallback)(Z=>{E.capture("onPublicFungibleLinkOpen",{data:{url:Z}})},[E]);return h?.links&&U.push({type:"links",data:{links:h.links,trackAction:le}}),{title:W,caip19:n,items:U,actions:me?q:void 0,showMoreInHeader:me,isLoading:L,refetch:oe}}function Vr(e){let{caip19:t,canBuy:n,canSwap:o,fungible:r,fungibleCaip19:i,openBuy:a,openReportIssue:c,openLink:p,openSwapper:m,title:d,onShare:b,isReadOnly:y}=e,{t:S}=Q(),{data:C}=at(),{data:[x]}=ke(["prefer-phantom-dot-com"]),k=o(i.chainId),R=(0,te.useCallback)(()=>{t&&m({buyFungibleCaip19:t})},[t,m]),{data:T}=Ie(),E=i.resourceType==="address",A=(0,te.useMemo)(()=>{if(!E||!T)return;let O=i.chainId,_=T.explorers[O]??Re.get(O).defaultExplorer,D=Ue({networkID:O,endpoint:"address",explorerType:_,param:i.address});return{explorerName:De[_],explorerUrl:D}},[E,i,T]),N=(0,te.useCallback)(()=>{A?.explorerUrl&&p(A?.explorerUrl)},[A?.explorerUrl,p]),I={caip19:t,hasBalance:!!r,title:d},h=[];k&&!y&&h.push({type:"swap",text:S("commandSwap"),onClick:R,typeSpecificMetadata:I}),n&&!y&&h.push({type:"buy",text:S("commandBuy"),onClick:a??Rt,typeSpecificMetadata:I});let B=Tt.getUrlFromFungible({caip19:i,isAnalyticsOptedOut:!!C,useDotCom:x});return B&&h.push({type:"share",text:S("commandShare"),onClick:()=>b(B),typeSpecificMetadata:{...I,shareUrl:B}}),h.push({type:"reportAsSpam",text:S("commandReportIssue"),onClick:c??Rt,menuOnly:!0,typeSpecificMetadata:I}),E&&h.push({type:"viewOnExplorer",text:S("assetDetailViewOnExplorer",{explorer:A?.explorerName}),singleWordAltText:S("commandView"),onClick:N,menuOnly:!0,typeSpecificMetadata:{...I,origin:tt(A?.explorerUrl)}}),At(h,3)}var Oo=e=>e?ce(e):void 0,kt=e=>e?nt(mt(e)):void 0,$e=e=>e?Le(e):void 0,Lo=e=>e?xe(e,{compact:!0}):void 0,Gr=e=>e===null?"\u221E":e===void 0?void 0:Le(e),qt=e=>e==null?void 0:e?s.t("nounYes"):s.t("nounNo");function X(e,t,n,o,r){n&&e.push({label:t,value:n,tooltipContent:o,handleTooltip:r?()=>{r(t,o??"")}:void 0})}function Qt(e,t,n,o,r,i){!n||!o||e.push({label:t,value:n,change:o,tooltipContent:r,handleTooltip:i?()=>{i(t,r??"")}:void 0})}var _r=(e,t,n)=>e?.name??t?.data.name??n??"",Hr=(e,t)=>e?[e]:t?pt(t):void 0;u();l();var $=P(V());function Wr(e,t){if(!e)return;let n=[];J(n,s.t("nounSymbol"),e.symbol),J(n,s.t("nounNetwork"),e.chain.name),J(n,rt.safeParse(e.chain.id).success?s.t("publicFungibleDetailMint"):s.t("publicFungibleDetailContract"),t);let o=_o(e.marketCap);J(n,s.t("publicFungibleDetailMarketCap"),o);let r=ze(e.totalSupply);J(n,s.t("publicFungibleDetailTotalSupply"),r);let i=ze(e.circulatingSupply);J(n,s.t("publicFungibleDetailCirculatingSupply"),i);let a=ni(e.maxSupply);J(n,s.t("publicFungibleDetailMaxSupply"),a);let c=ze(e.holders);return J(n,s.t("publicFungibleDetailHolders"),c),n}function Kr(e){if(!e)return;let t=[],n=_o(e.volume24hUSD),o=xt(e.volume24hUSDChangePercentage);zt(t,s.t("publicFungibleDetailVolume"),n,o);let r=ze(e.trades24h),i=xt(e.trades24hChangePercentage);zt(t,s.t("publicFungibleDetailTrades"),r,i);let a=ze(e.uniqueWallets24h),c=xt(e.uniqueWallets24hChangePercentage);return zt(t,s.t("publicFungibleDetailTraders"),a,c),t.length>0?t:void 0}function qr(e,t){if(!e)return;let n=[],o=xt(e.top10HoldersPercent);J(n,s.t("publicFungibleDetailTop10Holders"),o,s.t("publicFungibleDetailTop10HoldersTooltip"),t);let r=$t(e.mintable);J(n,s.t("publicFungibleDetailMintable"),r,s.t("publicFungibleDetailMintableTooltip"),t);let i=$t(e.mutableMetadata);J(n,s.t("publicFungibleDetailMutableInfo"),i,s.t("publicFungibleDetailMutableInfoTooltip"),t);let a=$t(e.ownershipRenounced);J(n,s.t("publicFungibleDetailOwnershipRenounced"),a,s.t("publicFungibleDetailOwnershipRenouncedTooltip"),t);let c=Vo(e.updateAuthority);J(n,s.t("publicFungibleDetailUpdateAuthority"),c,s.t("publicFungibleDetailUpdateAuthorityTooltip"),t);let p=Vo(e.freezeAuthority);return J(n,s.t("publicFungibleDetailFreezeAuthority"),p,s.t("publicFungibleDetailFreezeAuthorityTooltip"),t),n.length>0?n:void 0}function Qr(e){let{fungibleAnalytics:t,caip19:n,canBuy:o,canSwap:r,entryPoint:i,fungibleKey:a,openBuy:c,openLink:p,openSwapper:m,showSummaryTooltip:d,title:b,onShare:y,onSend:S,onReceive:C,copyAddress:x,includeUgcItemTypes:k,refetchBondingCurve:R,onUnwrapWrappedSol:T,onStakeSol:E,onNativeMintLSTPress:A,onStakeLSTPress:N,onUnstakeLSTPress:I}=e,h=ie(),B=(0,$.useMemo)(()=>be(n),[n]),{data:O}=ue(),_=O?.isReadOnly??!1,{data:D,refetch:L,isError:ne}=Qe({caip19:n}),F=ri(a,B),{fungibles:W,isLoadingTokens:M,refetch:oe}=pe({keys:F}),w=ti(W),U=oi(D,w,b),q=Xr({fungible:w,fungibleDetail:D,fungibleCaip19:B}),de=ei({fungible:q,accountId:O?.identifier}),{onMarkNotSpamAsync:me}=Go({fungible:q,accountId:O?.identifier,fungibleCaip19:B}),z=(0,$.useRef)(!1);(0,$.useEffect)(()=>{!z.current&&!M&&(z.current=!0,t.onPublicFungiblePageOpen({caip19:n,uiContext:{name:i},hasBalance:!!q?.data.balance.gt(0)}))},[t,n,q,i,M]);let he=(0,$.useCallback)(()=>{Promise.all([L(),oe(),R()])},[L,oe,R]),v=[];zr(v,{fungible:q,derivedSpamStatus:de,onMarkNotSpamAsync:me,includeUgcItemTypes:k,caip19:n,hasFungibleDetail:!!D}),v.push({type:"priceHistory",data:{caip19:n}});let le=Yr({caip19:n,canBuy:o,canSwap:r,fungible:q,fungibleCaip19:B,openBuy:c,openLink:p,openSwapper:m,onSend:S,onReceive:C,title:U,onShare:y,isReadOnly:_,derivedSpamStatus:de,accountId:O?.identifier,onUnwrapWrappedSol:T,onStakeSol:E,onNativeMintLSTPress:A,onStakeLSTPress:N,onUnstakeLSTPress:I}),Z=le.primary.length>0,we=!_&&le.primary.length===0&&le.more.length>0;Z&&v.push({type:"cta",data:{actions:le}}),w&&(v.push({type:"balance",data:{status:"success",fungible:w,holdings:void 0}}),!_&&w.type==="SolanaNative"&&(v.push({type:"sectionHeader",data:s.t("assetDetailStakingLabel")}),v.push({type:"staking",data:w}))),ne&&v.push({type:"error",data:void 0}),D?.description&&v.push({type:"sectionHeader",data:s.t("publicFungibleDetailAbout")},{type:"about",data:D.description.trim()});let Ce=Wr(D,x);Ce&&(v.push({type:"sectionHeader",data:s.t("publicFungibleDetailInfo")}),k?v.push({type:"tableWithBondingCurveProgress",data:{caip19:n,rows:Ce,key:"info"}}):v.push({type:"table",data:{key:"info",rows:Ce}}));let Ye=Kr(D);Ye&&v.push({type:"sectionHeader",data:s.t("publicFungibleDetailPerformance")},{type:"table",data:{key:"performance",rows:Ye}});let Xe=qr(D,d);Xe&&v.push({type:"sectionHeader",data:s.t("publicFungibleDetailSecurity")},{type:"table",data:{key:"security",rows:Xe}});let Je=(0,$.useCallback)(Et=>{h.capture("onPublicFungibleLinkOpen",{data:{url:Et}})},[h]);return D?.links&&v.push({type:"links",data:{links:D.links,trackAction:Je}}),w&&w.data.balance.gt(0)&&(v.push({type:"sectionHeader",data:s.t("unifiedTokenDetailTransactionActivity")}),v.push({type:"transactionHistory",data:w})),{title:U,caip19:n,fungible:w,items:v,actions:we?le:void 0,showMoreInHeader:we,isLoading:M,refetch:he}}var $r=[{type:"receive",text:"commandReceive"},{type:"send",text:"commandSend"},{type:"swap",text:"commandSwap"},{type:"buy",text:"commandBuy"},{type:"share",text:"commandShare"},{text:"assetDetailStakeSOL",singleWordAltText:"commandStake",type:"stakeSol",menuOnly:!0},{text:"commandMintLST",singleWordAltText:"commandMintLST",type:"mintLST",menuOnly:!0},{text:"assetDetailUnwrapAll",singleWordAltText:"commandUnwrap",type:"unwrapWrappedSol",menuOnly:!0},{text:"commandStake",singleWordAltText:"commandStake",type:"stake",menuOnly:!0},{text:"commandUnstake",singleWordAltText:"commandUnstake",type:"unstake",menuOnly:!0},{text:"commandReportAsSpam",type:"reportAsSpam",isDestructive:!0,menuOnly:!0},{text:"commandReportAsNotSpam",type:"reportAsNotSpam",isDestructive:!0,menuOnly:!0},{text:"",singleWordAltText:"commandView",type:"viewOnExplorer",menuOnly:!0}];function zr(e,{fungible:t,derivedSpamStatus:n,onMarkNotSpamAsync:o,includeUgcItemTypes:r,caip19:i,hasFungibleDetail:a}){t&&n&&n==="POSSIBLE_SPAM"?e.push({type:"spamTreatment",data:{fungible:t,spamStatus:n,markAsNotSpam:o}}):r?e.push({type:"ugcWarningBanner",data:{caip19:i,spamStatus:n}}):!r&&a&&n!=="VERIFIED"&&e.push({type:"unverifiedBanner"})}function jr(e,t){return $r.reduce((n,o)=>{let r=e[o.type];return r===void 0?n:!!("enabled"in r?r.enabled:r.onClick)&&r.onClick?[...n,{...o,onClick:r.onClick,text:r.text?r.text:t(o.text),..."singleWordAltText"in o&&{singleWordAltText:t(o.singleWordAltText)},..."typeSpecificMetadata"in r&&{typeSpecificMetadata:r.typeSpecificMetadata}}]:n},[])}function Yr(e){let{accountId:t,caip19:n,canBuy:o,canSwap:r,fungible:i,fungibleCaip19:a,openBuy:c,openLink:p,openSwapper:m,onReceive:d,onSend:b,title:y,onShare:S,onUnwrapWrappedSol:C,onStakeSol:x,derivedSpamStatus:k,onNativeMintLSTPress:R,onStakeLSTPress:T,onUnstakeLSTPress:E,isReadOnly:A}=e,{t:N}=Q(),{data:I}=at(),{data:[h]}=ke(["prefer-phantom-dot-com"]),{onMarkAsSpam:B,onMarkNotSpam:O}=Go({fungible:i,accountId:t,fungibleCaip19:a}),_=Mo(d,i),D=Mo(b,i),L=r(a.chainId)&&k&&!bt(k),ne=(0,$.useCallback)(()=>{n&&m({buyFungibleCaip19:n})},[n,m]),F=Jr({walletAddress:i?.data.walletAddress,fungibleCaip19:a}),W=(0,$.useCallback)(()=>{F?.explorerUrl&&p(F?.explorerUrl)},[F?.explorerUrl,p]),M=!!i&&i.data.balance.gt(0),oe=j(i?.type),w={caip19:n,hasBalance:M,title:y},U=Tt.getUrlFromFungible({caip19:a,isAnalyticsOptedOut:!!I,useDotCom:h}),de=i&&i.type==="SPL"&&i?.data.tokenAddress===Pe.toBase58()&&!A&&i.data.balance.isGreaterThan(Ae(kn).dividedBy(ee.LAMPORTS_PER_SOL)),me=Zr(),z=jr({receive:{enabled:!A&&(M||oe),onClick:_,typeSpecificMetadata:w},send:{enabled:!A&&M,onClick:D,typeSpecificMetadata:w},swap:{enabled:!A&&L,onClick:ne,typeSpecificMetadata:w},buy:{enabled:!A&&o,onClick:c,typeSpecificMetadata:w},unwrapWrappedSol:{enabled:de,onClick:C?()=>C(me):void 0},stakeSol:{enabled:!A&&i?.type==="SolanaNative",onClick:x,typeSpecificMetadata:w},mintLST:{enabled:!A&&M,onClick:R},stake:{enabled:!A&&M,onClick:T},unstake:{enabled:!A&&M,onClick:E},share:{onClick:U?()=>S(U):void 0,typeSpecificMetadata:w},reportAsSpam:{enabled:k&&!bt(k),onClick:B,typeSpecificMetadata:w},reportAsNotSpam:{enabled:k&&bt(k),onClick:O,typeSpecificMetadata:w},viewOnExplorer:{enabled:!!F,onClick:W,text:N("assetDetailViewOnExplorer",{explorer:F?.explorerName}),typeSpecificMetadata:{...w,origin:tt(F?.explorerUrl)}}},N);return At(z,4)}function Xr({fungible:e,fungibleDetail:t,fungibleCaip19:n}){if(e)return e;if(t){if("address"in n){let o=vn(n),r=t.address??n.address,i={amount:"0",balance:Ae(0),chain:t.chain,decimals:t.decimals,logoUri:t.logoURI??t.logoUri,name:t.name??"Unknown",symbol:t.symbol??"Unknown",key:r,walletAddress:"",spamStatus:t.spamStatus};if("SPL"===o)return{type:"SPL",data:{...i,mintAddress:r,programId:"",splTokenAccountPubkey:""}};if("ERC20"===o)return{type:"ERC20",data:{...i,contractAddress:r}};if("BRC20"===o)return{type:"BRC20",data:{...i,firstCreatedInscriptionId:r}};Te.captureError(new Error(`Fungible type could not be derived from ${o}`),"fungibles");return}Te.captureError(new Error(`Fungible type could not be derived from ${n.chainId}/${n.slip44}`),"fungibles")}}function Jr({walletAddress:e,fungibleCaip19:t}){let{data:n}=Ie(),o=t.resourceType==="address"?t.address:e;if(!o||!n)return;let r=t.chainId,i=n.explorers[r]??Re.get(r).defaultExplorer,a=Ue({networkID:r,endpoint:"address",explorerType:i,param:o});return{explorerName:De[i],explorerUrl:a}}function Mo(e,t){return(0,$.useMemo)(()=>{if(e)return()=>{t&&e(t)}},[e,t])}function Zr(){let{mutateAsync:e}=Gt();return e}function ei({fungible:e,accountId:t}){let{data:n}=Dt(t??"");return e?zn(n,{key:e.data.key,spamStatus:e?.data.spamStatus??"NOT_VERIFIED"}):void 0}function Go({fungible:e,accountId:t,fungibleCaip19:n}){let o=ie(),{mutateAsync:r}=It(),i=(0,$.useCallback)(async()=>{!e||!t||(o.capture("fungiblesReportAsNotSpam",{data:{caip19:it(n)}}),await r({accountId:t,mutations:[{fungibleKey:e.data.key,visibility:"visible:reported_notSpam"}]}))},[t,e,r,o,n]),a=(0,$.useCallback)(()=>{i()},[i]);return{onMarkAsSpam:(0,$.useMemo)(()=>{if(e&&j(e.type))return;let p=jn({analytics:o,fungible:e,accountId:t,setVisibilityOverrides:r});if(p)return()=>{p()}},[t,e,r,o]),onMarkNotSpam:a,onMarkNotSpamAsync:i}}var ti=e=>e&&e.length>0?e.reduce((t,n)=>!t||t.data.balance.lt(n.data.balance)?n:t,void 0):void 0,Vo=e=>e?ce(e):void 0,xt=e=>e?nt(mt(e)):void 0,ze=e=>e?Le(e):void 0,_o=e=>e?xe(e,{compact:!0}):void 0,ni=e=>e===null?"\u221E":e===void 0?void 0:Le(e),$t=e=>e==null?void 0:e?s.t("nounYes"):s.t("nounNo");function J(e,t,n,o,r){n&&e.push({label:t,value:n,tooltipContent:o,handleTooltip:r?()=>{r(t,o??"")}:void 0})}function zt(e,t,n,o,r,i){!n||!o||e.push({label:t,value:n,change:o,tooltipContent:r,handleTooltip:i?()=>{i(t,r??"")}:void 0})}var oi=(e,t,n)=>e?.name??t?.data.name??n??"",ri=(e,t)=>e?[e]:t?pt(t):void 0;u();l();var ae=P(V());u();l();var Ho=P(V()),Wo=({networkID:e,transactionUnitAmount:t,onTransactionSpeedChange:n})=>{let{status:o,data:r}=gt({networkID:e}),{transactionSpeed:i}=Y(c=>c.sendFormValues),a=(0,Ho.useMemo)(()=>{if(o!=="error"&&r&&i)return()=>n(i,t)},[n,i,t,r,o]);return{transactionSpeed:i,openTransactionSettings:a}};var ii={accentAlert:"#EB3742",white:"#FFFFFF"};var ai=({networkID:e,recipient:t,uiRecipient:n,displayUiRecipient:o,networkName:r,networkFee:i,networkFeeErrorMsg:a,networkFeeRow:c,displayFeeTooltip:p,transferFeePercent:m,solanaMetadata:d,valueLoader:b,fontColors:y,openTransactionSettings:S,onNetworkFeeDescriptionPress:C,onTransferFeePress:x})=>(0,ae.useMemo)(()=>{let k=o?n:t;return[H.isSolanaNetworkID(e)&&d.label?{label:s.t("sendConfirmationLabel"),value:d.label}:void 0,H.isSolanaNetworkID(e)&&d.message?{label:s.t("sendConfirmationMessage"),value:d.message}:void 0,{label:s.t("transactionsTo"),value:k,isAddress:!yn(k),type:"address"},{label:s.t("sendFungibleSummaryNetwork"),value:r},{label:s.t("sendFungibleSummaryNetworkFee"),value:i.length>0?i:a?null:b,color:a?y.accentAlert:y.white,leftSubtext:a||void 0,leftSubtextColor:y.accentAlert,rightSubtext:c?.rightSubtext,tooltipContent:p?s.t("networkFeesTooltipDescription",{chainName:r})||"":void 0,onClick:p?S:void 0,onPress:p?S:void 0,handleTooltip:p?C:void 0},m?{label:s.t("sendFungibleTransferFee"),value:`${m}%`,tooltipContent:s.t("sendFungibleTransferFeeToolTip")||"",handleTooltip:x}:void 0,d.memo?{label:s.t("sendMemo"),value:d.memo.replace(/(\r\n|\n|\r)/gm," ")}:void 0].filter(et)},[p,o,y.accentAlert,y.white,i,a,c?.rightSubtext,e,r,C,x,S,t,d.label,d.memo,d.message,m,n,b]),si=({hasSufficientFunds:e,isTransactionUnitError:t,hasGasEstimationFailed:n,nativeTokenSymbol:o})=>t?s.t("transactionGasLimitError"):n?s.t("transactionGasEstimationError"):e==="insufficient"?s.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):"",ui=e=>{let{networkID:t,displayUiRecipient:n=!0,valueLoader:o,fontColors:r=ii,onTransactionSpeedChange:i,onNetworkFeeDescriptionPress:a,onTransferFeePress:c,onSubmissionCheckFail:p}=e,m=ie(),d=H.getNetworkName(t),b=Y(),y=Y(Ve=>Ve.sendFormValues),S=Y(Ve=>Ve.setSendFormValues),{amountAsset:C,recipient:x,solana:k}=y,R=Y(Ve=>Ve.fungibleKey),{fungible:T}=Fe({key:R,splTokenAccount:b.splTokenAccount}),E=T?T.data.tokenAddress:void 0,A=T?.data.symbol??(E?ce(E,4):s.t("tokenRowUnknownToken")),N=T?.data.logoUri??"",I=nn(C,T?.data.decimals??0),h=I.toString(),B=(0,ae.useMemo)(()=>T?St(T):void 0,[T]),{data:O}=Vn({query:B?{data:B}:void 0}),_=xe(Un(I.toNumber(),O?.usd??0)),D=(0,ae.useMemo)(()=>({key:R,amount:h,symbol:A||"",logoUri:N,usdPrice:_}),[R,N,A,_,h]),{data:L}=ve({address:T?.data.walletAddress,networkID:t}),{getExistingAccount:ne,getKnownAddressLabel:F}=cn(),W=ne(x),M=F(x,t),oe=(0,ae.useMemo)(()=>ln(x,W,M,4),[W,x,M]);Vt(L,"SEND_FUNGIBLE");let{data:w}=Ut(b),{data:U,isError:q}=Ln(w),{transactionSpeed:de,openTransactionSettings:me}=Wo({networkID:t,transactionUnitAmount:U,onTransactionSpeedChange:i}),{data:z,isFetched:he,isSuccess:v}=Mn({networkID:t,multichainTransaction:w,transactionSpeed:de,queryOptions:{refetchInterval:!1}}),{data:le}=_n(T?.data.chain.id,z),Z=Wn(L),we=T&&j(T.type)?C:new G(0),{hasSufficientFunds:Ce,isLoading:Ye,nativeTokenSymbol:Xe}=Ot(t,L?.addressType,z,we),Je=Qn({networkID:t,gasEstimation:z,gasEstimationPrice:le}),Et=Wt(z,s.t),Ko=ft(T),{data:jt}=gt({networkID:t}),qo=(0,ae.useMemo)(()=>Ne.get(t).displayFeeTooltip&&Object.keys(jt??{}).length>1,[jt,t]);(0,ae.useEffect)(()=>{m.capture("sendAssetSummary",{data:{type:"fungible",symbol:A??"",networkId:t,chainId:H.getChainID(t)}})},[t,A,m]);let Qo=he&&!v,$o=!!z&&!Ye&&Ce!=="insufficient"&&!!Je,zo=si({hasSufficientFunds:Ce,isTransactionUnitError:q,hasGasEstimationFailed:Qo,nativeTokenSymbol:Xe}),jo=(0,ae.useCallback)(()=>!w||!L||!R?!1:Z?(m.capture("showFungibleTxSubmissionFailureModal"),p(Z),!1):(S({...y,multichainTransaction:w}),!0),[w,L,R,Z,S,y,m,p]),Yo=ai({networkID:t,recipient:x,uiRecipient:oe,networkName:d,networkFee:Je,networkFeeErrorMsg:zo,networkFeeRow:Et,transferFeePercent:Ko,solanaMetadata:k,displayFeeTooltip:qo,valueLoader:o,fontColors:r,displayUiRecipient:n,openTransactionSettings:me,onNetworkFeeDescriptionPress:a,onTransferFeePress:c}),Xo=(0,ae.useMemo)(()=>({send:s.t("commandSend"),cancel:s.t("commandCancel")}),[]);return{sender:L,recipientAddress:x,uiRecipient:oe,token:D,networkName:d,displayAmountAndName:`${on(h)} ${A}`,canSend:$o,txSubmissionCheckFailureModal:Z,summaryRows:Yo,headerText:s.t("sendConfirmationPrimaryText"),buttons:Xo,multichainTransaction:w,prepareSubmission:jo}};u();l();var je=P(V());var li=({networkID:e,isTxConfirmError:t,isTxSubmissionError:n,isTxConfirmed:o,isTxSubmitted:r})=>{let i=Ne.get(e).sendSuccessCondition,a=(0,je.useMemo)(()=>{switch(i){case"SUBMISSION":return n?"ERROR":r?"SUCCESS":"LOADING";case"CONFIRMATION":return n||t?"ERROR":o?"SUCCESS":"LOADING"}},[t,o,n,r,i]),c=i==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",p=(0,je.useMemo)(()=>{switch(a){case"LOADING":return s.t("sendStatusLoadingTitle");case"ERROR":return s.t("sendStatusErrorTitle");case"SUCCESS":return s.t(c)}},[a,c]),{isError:m,isSuccess:d}=(0,je.useMemo)(()=>({isError:a==="ERROR",isSuccess:a==="SUCCESS"}),[a]),{transactionSpeed:b="standard"}=Y(S=>S.sendFormValues),y=(0,je.useMemo)(()=>{let S=fn.get(e).transactionSpeedDescription(b);return S?s.t(S):""},[e,b]);return{title:p,isError:m,isSuccess:d,sendSuccessCondition:i,estimatedTime:y}};u();l();var ci=P(V());u();l();export{oo as a,rr as b,It as c,Y as d,ir as e,Sr as f,Ar as g,Nt as h,Gt as i,Fr as j,Ht as k,Cr as l,Ro as m,Ot as n,sr as o,Ir as p,Wt as q,Mr as r,Qr as s,We as t,co as u,Vt as v,ui as w,li as x,br as y};
//# sourceMappingURL=chunk-GJU3JL4E.js.map
