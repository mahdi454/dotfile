import{t as bu}from"./chunk-GBDVRVXI.js";import{p as yu}from"./chunk-NV3TFZ4C.js";import{e as Si}from"./chunk-B226KCTA.js";import{p as Su,u as wu}from"./chunk-GJU3JL4E.js";import{a as Au,d as hu}from"./chunk-XFLX2RRO.js";import{a as pu,b as SS}from"./chunk-BCLUZY4R.js";import{F as Hc,m as Gc,s as Vc}from"./chunk-PFT3L2T6.js";import{Aa as ru,Ab as fu,B as Xc,Ca as nu,Cb as Nr,Fa as su,Ga as $o,Ha as iu,Ia as au,Ib as zo,T as Jc,Ua as Te,Va as je,Xb as gu,Y as wi,Z as Zc,Za as uu,bb as Dr,cb as mo,db as Ce,e as yS,eb as lu,f as $c,fa as eu,fb as fo,g as nt,ga as tu,i as zc,ia as ou,j as jc,mc as V,nc as At,oc as it,pb as mu,sb as Rn,tb as Pn,ub as du,wc as jo,xb as st,y as Wc,yb as Be,yc as Ai,z as Yc,zc as Gt}from"./chunk-LVTCV2WT.js";import{d as cu,h as kr}from"./chunk-HLHJEFRF.js";import{o as qc,u as be}from"./chunk-S37W3WO2.js";import{$a as rt,C as qo,Cd as Kc,G as uc,Ga as In,Hb as vn,Lb as En,Na as v,Nb as yi,Oa as yt,Ob as Pr,P as Rr,Pa as z,Q as _,Qa as qt,T as se,Ta as qe,Td as re,Ua as Dc,Va as ae,Wa as lo,Yb as Bc,_b as Lc,_d as Cn,ba as Pc,ca as uo,ce as wt,hb as Ge,hd as _c,ic as De,ie as Ne,jd as Z,kb as Ko,kd as Oc,lb as Ho,od as Mc,qd as Qc,rb as Nc,rc as K,ta as kc,uc as Uc,vd as xn,xc as St}from"./chunk-6ZVJZYTQ.js";import{K as dc,p as Qo,v as cc}from"./chunk-DFKC7QAI.js";import{a as N,m as ot,n as xe}from"./chunk-56SJOU6P.js";import{$ as Ec,U as Vo,V as Ic,Y as vc,Z as Tn,_ as gS,a as te,aa as Qt,b as k,ba as tt,ca as xc,da as X,ea as Cc,fa as Rc,ga as Ee,ha as Fn,ia as co,o as bc,p as Tc,q as hn,t as Fc,v as bn,w as gt,x as U}from"./chunk-CBSQD5B4.js";import{Ca as wc,Ea as Ac,H as ce,J as Se,K as mc,L as Mt,La as hc,_a as ie,ba as ve,da as fc,ea as gc,fa as An,ga as yc,ia as j,ka as D,la as ne,ma as po,na as Sc,sa as Go,t as wn,ta as L,v as ao,z as lc}from"./chunk-VNNHZNYI.js";import{a as l}from"./chunk-4P36KWOF.js";import{a as R}from"./chunk-7X4NV6OJ.js";import{c as ze,f as C,h as i,l as fS,m as Buffer,n as a}from"./chunk-3KENBVE7.js";var vu=ze((tx,Iu)=>{i();a();(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(o,r){return o<<r|o>>>32-r},rotr:function(o,r){return o<<32-r|o>>>r},endian:function(o){if(o.constructor==Number)return t.rotl(o,8)&16711935|t.rotl(o,24)&4278255360;for(var r=0;r<o.length;r++)o[r]=t.endian(o[r]);return o},randomBytes:function(o){for(var r=[];o>0;o--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(o){for(var r=[],n=0,s=0;n<o.length;n++,s+=8)r[s>>>5]|=o[n]<<24-s%32;return r},wordsToBytes:function(o){for(var r=[],n=0;n<o.length*32;n+=8)r.push(o[n>>>5]>>>24-n%32&255);return r},bytesToHex:function(o){for(var r=[],n=0;n<o.length;n++)r.push((o[n]>>>4).toString(16)),r.push((o[n]&15).toString(16));return r.join("")},hexToBytes:function(o){for(var r=[],n=0;n<o.length;n+=2)r.push(parseInt(o.substr(n,2),16));return r},bytesToBase64:function(o){for(var r=[],n=0;n<o.length;n+=3)for(var s=o[n]<<16|o[n+1]<<8|o[n+2],p=0;p<4;p++)n*8+p*6<=o.length*8?r.push(e.charAt(s>>>6*(3-p)&63)):r.push("=");return r.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],n=0,s=0;n<o.length;s=++n%4)s!=0&&r.push((e.indexOf(o.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<s*2|e.indexOf(o.charAt(n))>>>6-s*2);return r}};Iu.exports=t})()});var Fi=ze((nx,Eu)=>{i();a();var Ti={utf8:{stringToBytes:function(e){return Ti.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(Ti.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(e.charCodeAt(o)&255);return t},bytesToString:function(e){for(var t=[],o=0;o<e.length;o++)t.push(String.fromCharCode(e[o]));return t.join("")}}};Eu.exports=Ti});var Cu=ze((ax,xu)=>{i();a();(function(){var e=vu(),t=Fi().utf8,o=Fi().bin,r=function(s){s.constructor==String?s=t.stringToBytes(s):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||(s=s.toString());var p=e.bytesToWords(s),u=s.length*8,c=[],m=1732584193,g=-271733879,f=-1732584194,S=271733878,w=-1009589776;p[u>>5]|=128<<24-u%32,p[(u+64>>>9<<4)+15]=u;for(var y=0;y<p.length;y+=16){for(var A=m,b=g,F=f,I=S,E=w,T=0;T<80;T++){if(T<16)c[T]=p[y+T];else{var x=c[T-3]^c[T-8]^c[T-14]^c[T-16];c[T]=x<<1|x>>>31}var P=(m<<5|m>>>27)+w+(c[T]>>>0)+(T<20?(g&f|~g&S)+1518500249:T<40?(g^f^S)+1859775393:T<60?(g&f|g&S|f&S)-1894007588:(g^f^S)-899497514);w=S,S=f,f=g<<30|g>>>2,g=m,m=P}m+=A,g+=b,f+=F,S+=I,w+=E}return[m,g,f,S,w]},n=function(s,p){var u=e.wordsToBytes(r(s));return p&&p.asBytes?u:p&&p.asString?o.bytesToString(u):e.bytesToHex(u)};n._blocksize=16,n._digestsize=20,xu.exports=n})()});var ku=ze((fx,bS)=>{bS.exports={name:"@phantom-labs/blocklist",version:"0.13.0",main:"index.js",types:"index.d.ts",repository:"git@github.com:phantom-labs/blocklist.git",author:"Jordan Leigh <AlwaysBCoding@gmail.com>",license:"MIT",scripts:{build:"node build.js"},dependencies:{"js-yaml":"^4.1.0",sha3:"^2.1.4"}}});var Du=ze((gx,TS)=>{TS.exports={blocklist:["phantomweb.app","aurory.app","solvision.io","staratlas.art","starsatlas.com","sollet.cc","raydlum.io","aurorynft.com","sneks.gg","solletweb.io","i-sollet.com","fancyfrenchienft.art","solanawebwallet.online","phahtom.com","server-syncwallet.com","staratias.app","raydium.network","grapesnetwork.me","staratias.art","soistarter.org","audius-nft.top","aurory.me","degenapes.app","phantom-app.online","phantomwallet.net","dapps-node.com","phantom-app.link","solanaoutage.com","walletconnectdapps.net","staratlas.cx","web-phantom.app","0120tt.com"],whitelist:[],fuzzylist:[],contentHash:"830ea1c9a833213eabc17990adf053081f503b1203ca9a2c711db7199e657293"}});var Nu=ze(Ei=>{i();a();var{version:FS}=ku(),IS=Du(),vS=()=>FS,ES=()=>IS;Ei.getVersion=vS;Ei.getBlocklist=ES});var Lu=ze(Yo=>{"use strict";i();a();Yo.__esModule=!0;Yo.distance=Yo.closest=void 0;var ht=new Uint32Array(65536),xS=function(e,t){for(var o=e.length,r=t.length,n=1<<o-1,s=-1,p=0,u=o,c=o;c--;)ht[e.charCodeAt(c)]|=1<<c;for(c=0;c<r;c++){var m=ht[t.charCodeAt(c)],g=m|p;m|=(m&s)+s^s,p|=~(m|s),s&=m,p&n&&u++,s&n&&u--,p=p<<1|1,s=s<<1|~(g|p),p&=g}for(c=o;c--;)ht[e.charCodeAt(c)]=0;return u},CS=function(e,t){for(var o=t.length,r=e.length,n=[],s=[],p=Math.ceil(o/32),u=Math.ceil(r/32),c=0;c<p;c++)s[c]=-1,n[c]=0;for(var m=0;m<u-1;m++){for(var g=0,f=-1,S=m*32,w=Math.min(32,r)+S,y=S;y<w;y++)ht[e.charCodeAt(y)]|=1<<y;for(var c=0;c<o;c++){var A=ht[t.charCodeAt(c)],b=s[c/32|0]>>>c&1,F=n[c/32|0]>>>c&1,I=A|g,E=((A|F)&f)+f^f|A|F,T=g|~(E|f),x=f&E;T>>>31^b&&(s[c/32|0]^=1<<c),x>>>31^F&&(n[c/32|0]^=1<<c),T=T<<1|b,x=x<<1|F,f=x|~(I|T),g=T&I}for(var y=S;y<w;y++)ht[e.charCodeAt(y)]=0}for(var P=0,O=-1,M=m*32,H=Math.min(32,r-M)+M,y=M;y<H;y++)ht[e.charCodeAt(y)]|=1<<y;for(var Q=r,c=0;c<o;c++){var A=ht[t.charCodeAt(c)],b=s[c/32|0]>>>c&1,F=n[c/32|0]>>>c&1,I=A|P,E=((A|F)&O)+O^O|A|F,T=P|~(E|O),x=O&E;Q+=T>>>r-1&1,Q-=x>>>r-1&1,T>>>31^b&&(s[c/32|0]^=1<<c),x>>>31^F&&(n[c/32|0]^=1<<c),T=T<<1|b,x=x<<1|F,O=x|~(I|T),P=T&I}for(var y=M;y<H;y++)ht[e.charCodeAt(y)]=0;return Q},Bu=function(e,t){if(e.length<t.length){var o=t;t=e,e=o}return t.length===0?e.length:e.length<=32?xS(e,t):CS(e,t)};Yo.distance=Bu;var RS=function(e,t){for(var o=1/0,r=0,n=0;n<t.length;n++){var s=Bu(e,t[n]);s<o&&(o=s,r=n)}return t[r]};Yo.closest=RS});var Uu=ze((xi,Br)=>{i();a();(function(){"use strict";var e;try{e=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null}catch{console.log("Collator could not be initialized and wouldn't be used")}var t=Lu(),o=[],r=[],n={get:function(s,p,u){var c=u&&e&&u.useCollator;if(c){var m=s.length,g=p.length;if(m===0)return g;if(g===0)return m;var f,S,w,y,A;for(w=0;w<g;++w)o[w]=w,r[w]=p.charCodeAt(w);o[g]=g;var b;for(w=0;w<m;++w){for(S=w+1,y=0;y<g;++y)f=S,b=e.compare(s.charAt(w),String.fromCharCode(r[y]))===0,S=o[y]+(b?0:1),A=f+1,S>A&&(S=A),A=o[y+1]+1,S>A&&(S=A),o[y]=f;o[y]=S}return S}return t.distance(s,p)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return n}):typeof Br<"u"&&Br!==null&&typeof xi<"u"&&Br.exports===xi?Br.exports=n:(typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"||typeof self<"u"&&self!==null)&&(self.Levenshtein=n)})()});var lm=ze((Qr,or)=>{i();a();var sw=200,iw="Expected a function",ha="__lodash_hash_undefined__",zn=1,rr=2,Gl=1/0,Vl=9007199254740991,Qn="[object Arguments]",da="[object Array]",Kl="[object Boolean]",Hl="[object Date]",$l="[object Error]",zl="[object Function]",aw="[object GeneratorFunction]",qn="[object Map]",jl="[object Number]",tr="[object Object]",Nl="[object Promise]",Wl="[object RegExp]",Gn="[object Set]",Yl="[object String]",Xl="[object Symbol]",fa="[object WeakMap]",Jl="[object ArrayBuffer]",Vn="[object DataView]",pw="[object Float32Array]",cw="[object Float64Array]",uw="[object Int8Array]",lw="[object Int16Array]",mw="[object Int32Array]",dw="[object Uint8Array]",fw="[object Uint8ClampedArray]",gw="[object Uint16Array]",yw="[object Uint32Array]",Sw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ww=/^\w*$/,Aw=/^\./,hw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bw=/[\\^$.*+?()[\]{}|]/g,Tw=/\\(\\)?/g,Fw=/^\[object .+?Constructor\]$/,Iw=/^(?:0|[1-9]\d*)$/,ue={};ue[pw]=ue[cw]=ue[uw]=ue[lw]=ue[mw]=ue[dw]=ue[fw]=ue[gw]=ue[yw]=!0;ue[Qn]=ue[da]=ue[Jl]=ue[Kl]=ue[Vn]=ue[Hl]=ue[$l]=ue[zl]=ue[qn]=ue[jl]=ue[tr]=ue[Wl]=ue[Gn]=ue[Yl]=ue[fa]=!1;var Zl=typeof self=="object"&&self&&self.Object===Object&&self,vw=typeof self=="object"&&self&&self.Object===Object&&self,$t=Zl||vw||Function("return this")(),em=typeof Qr=="object"&&Qr&&!Qr.nodeType&&Qr,Bl=em&&typeof or=="object"&&or&&!or.nodeType&&or,Ew=Bl&&Bl.exports===em,Ll=Ew&&Zl.process,Ul=function(){try{return Ll&&Ll.binding("util")}catch{}}(),_l=Ul&&Ul.isTypedArray;function xw(e,t,o,r){for(var n=-1,s=e?e.length:0;++n<s;){var p=e[n];t(r,p,o(p),e)}return r}function Cw(e,t){for(var o=-1,r=e?e.length:0;++o<r;)if(t(e[o],o,e))return!0;return!1}function Rw(e){return function(t){return t?.[e]}}function Pw(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}function kw(e){return function(t){return e(t)}}function Dw(e,t){return e?.[t]}function ga(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Nw(e){var t=-1,o=Array(e.size);return e.forEach(function(r,n){o[++t]=[n,r]}),o}function Bw(e,t){return function(o){return e(t(o))}}function Lw(e){var t=-1,o=Array(e.size);return e.forEach(function(r){o[++t]=r}),o}var Uw=Array.prototype,_w=Function.prototype,jn=Object.prototype,la=$t["__core-js_shared__"],Ol=function(){var e=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),tm=_w.toString,Et=jn.hasOwnProperty,nr=jn.toString,Ow=RegExp("^"+tm.call(Et).replace(bw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ml=$t.Symbol,Ql=$t.Uint8Array,Mw=jn.propertyIsEnumerable,Qw=Uw.splice,qw=Bw(Object.keys,Object),ya=sr($t,"DataView"),qr=sr($t,"Map"),Sa=sr($t,"Promise"),wa=sr($t,"Set"),Aa=sr($t,"WeakMap"),Gr=sr(Object,"create"),Gw=wo(ya),Vw=wo(qr),Kw=wo(Sa),Hw=wo(wa),$w=wo(Aa),Kn=Ml?Ml.prototype:void 0,ma=Kn?Kn.valueOf:void 0,ql=Kn?Kn.toString:void 0;function So(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function zw(){this.__data__=Gr?Gr(null):{}}function jw(e){return this.has(e)&&delete this.__data__[e]}function Ww(e){var t=this.__data__;if(Gr){var o=t[e];return o===ha?void 0:o}return Et.call(t,e)?t[e]:void 0}function Yw(e){var t=this.__data__;return Gr?t[e]!==void 0:Et.call(t,e)}function Xw(e,t){var o=this.__data__;return o[e]=Gr&&t===void 0?ha:t,this}So.prototype.clear=zw;So.prototype.delete=jw;So.prototype.get=Ww;So.prototype.has=Yw;So.prototype.set=Xw;function xt(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function Jw(){this.__data__=[]}function Zw(e){var t=this.__data__,o=Wn(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():Qw.call(t,o,1),!0}function eA(e){var t=this.__data__,o=Wn(t,e);return o<0?void 0:t[o][1]}function tA(e){return Wn(this.__data__,e)>-1}function oA(e,t){var o=this.__data__,r=Wn(o,e);return r<0?o.push([e,t]):o[r][1]=t,this}xt.prototype.clear=Jw;xt.prototype.delete=Zw;xt.prototype.get=eA;xt.prototype.has=tA;xt.prototype.set=oA;function Ct(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function rA(){this.__data__={hash:new So,map:new(qr||xt),string:new So}}function nA(e){return Yn(this,e).delete(e)}function sA(e){return Yn(this,e).get(e)}function iA(e){return Yn(this,e).has(e)}function aA(e,t){return Yn(this,e).set(e,t),this}Ct.prototype.clear=rA;Ct.prototype.delete=nA;Ct.prototype.get=sA;Ct.prototype.has=iA;Ct.prototype.set=aA;function Hn(e){var t=-1,o=e?e.length:0;for(this.__data__=new Ct;++t<o;)this.add(e[t])}function pA(e){return this.__data__.set(e,ha),this}function cA(e){return this.__data__.has(e)}Hn.prototype.add=Hn.prototype.push=pA;Hn.prototype.has=cA;function vt(e){this.__data__=new xt(e)}function uA(){this.__data__=new xt}function lA(e){return this.__data__.delete(e)}function mA(e){return this.__data__.get(e)}function dA(e){return this.__data__.has(e)}function fA(e,t){var o=this.__data__;if(o instanceof xt){var r=o.__data__;if(!qr||r.length<sw-1)return r.push([e,t]),this;o=this.__data__=new Ct(r)}return o.set(e,t),this}vt.prototype.clear=uA;vt.prototype.delete=lA;vt.prototype.get=mA;vt.prototype.has=dA;vt.prototype.set=fA;function gA(e,t){var o=Ht(e)||cm(e)?Pw(e.length,String):[],r=o.length,n=!!r;for(var s in e)(t||Et.call(e,s))&&!(n&&(s=="length"||sm(s,r)))&&o.push(s);return o}function Wn(e,t){for(var o=e.length;o--;)if(pm(e[o][0],t))return o;return-1}function yA(e,t,o,r){return SA(e,function(n,s,p){t(r,n,o(n),p)}),r}var SA=NA(AA),wA=BA();function AA(e,t){return e&&wA(e,t,$n)}function om(e,t){t=Xn(t,e)?[t]:rm(t);for(var o=0,r=t.length;e!=null&&o<r;)e=e[Jn(t[o++])];return o&&o==r?e:void 0}function hA(e){return nr.call(e)}function bA(e,t){return e!=null&&t in Object(e)}function ba(e,t,o,r,n){return e===t?!0:e==null||t==null||!Zn(e)&&!es(t)?e!==e&&t!==t:TA(e,t,ba,o,r,n)}function TA(e,t,o,r,n,s){var p=Ht(e),u=Ht(t),c=da,m=da;p||(c=Kt(e),c=c==Qn?tr:c),u||(m=Kt(t),m=m==Qn?tr:m);var g=c==tr&&!ga(e),f=m==tr&&!ga(t),S=c==m;if(S&&!g)return s||(s=new vt),p||HA(e)?nm(e,t,o,r,n,s):LA(e,t,c,o,r,n,s);if(!(n&rr)){var w=g&&Et.call(e,"__wrapped__"),y=f&&Et.call(t,"__wrapped__");if(w||y){var A=w?e.value():e,b=y?t.value():t;return s||(s=new vt),o(A,b,r,n,s)}}return S?(s||(s=new vt),UA(e,t,o,r,n,s)):!1}function FA(e,t,o,r){var n=o.length,s=n,p=!r;if(e==null)return!s;for(e=Object(e);n--;){var u=o[n];if(p&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++n<s;){u=o[n];var c=u[0],m=e[c],g=u[1];if(p&&u[2]){if(m===void 0&&!(c in e))return!1}else{var f=new vt;if(r)var S=r(m,g,c,e,t,f);if(!(S===void 0?ba(g,m,r,zn|rr,f):S))return!1}}return!0}function IA(e){if(!Zn(e)||QA(e))return!1;var t=um(e)||ga(e)?Ow:Fw;return t.test(wo(e))}function vA(e){return es(e)&&Ia(e.length)&&!!ue[nr.call(e)]}function EA(e){return typeof e=="function"?e:e==null?WA:typeof e=="object"?Ht(e)?RA(e[0],e[1]):CA(e):YA(e)}function xA(e){if(!qA(e))return qw(e);var t=[];for(var o in Object(e))Et.call(e,o)&&o!="constructor"&&t.push(o);return t}function CA(e){var t=_A(e);return t.length==1&&t[0][2]?am(t[0][0],t[0][1]):function(o){return o===e||FA(o,e,t)}}function RA(e,t){return Xn(e)&&im(t)?am(Jn(e),t):function(o){var r=zA(o,e);return r===void 0&&r===t?jA(o,e):ba(t,r,void 0,zn|rr)}}function PA(e){return function(t){return om(t,e)}}function kA(e){if(typeof e=="string")return e;if(va(e))return ql?ql.call(e):"";var t=e+"";return t=="0"&&1/e==-Gl?"-0":t}function rm(e){return Ht(e)?e:GA(e)}function DA(e,t){return function(o,r){var n=Ht(o)?xw:yA,s=t?t():{};return n(o,e,EA(r,2),s)}}function NA(e,t){return function(o,r){if(o==null)return o;if(!Fa(o))return e(o,r);for(var n=o.length,s=t?n:-1,p=Object(o);(t?s--:++s<n)&&r(p[s],s,p)!==!1;);return o}}function BA(e){return function(t,o,r){for(var n=-1,s=Object(t),p=r(t),u=p.length;u--;){var c=p[e?u:++n];if(o(s[c],c,s)===!1)break}return t}}function nm(e,t,o,r,n,s){var p=n&rr,u=e.length,c=t.length;if(u!=c&&!(p&&c>u))return!1;var m=s.get(e);if(m&&s.get(t))return m==t;var g=-1,f=!0,S=n&zn?new Hn:void 0;for(s.set(e,t),s.set(t,e);++g<u;){var w=e[g],y=t[g];if(r)var A=p?r(y,w,g,t,e,s):r(w,y,g,e,t,s);if(A!==void 0){if(A)continue;f=!1;break}if(S){if(!Cw(t,function(b,F){if(!S.has(F)&&(w===b||o(w,b,r,n,s)))return S.add(F)})){f=!1;break}}else if(!(w===y||o(w,y,r,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function LA(e,t,o,r,n,s,p){switch(o){case Vn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jl:return!(e.byteLength!=t.byteLength||!r(new Ql(e),new Ql(t)));case Kl:case Hl:case jl:return pm(+e,+t);case $l:return e.name==t.name&&e.message==t.message;case Wl:case Yl:return e==t+"";case qn:var u=Nw;case Gn:var c=s&rr;if(u||(u=Lw),e.size!=t.size&&!c)return!1;var m=p.get(e);if(m)return m==t;s|=zn,p.set(e,t);var g=nm(u(e),u(t),r,n,s,p);return p.delete(e),g;case Xl:if(ma)return ma.call(e)==ma.call(t)}return!1}function UA(e,t,o,r,n,s){var p=n&rr,u=$n(e),c=u.length,m=$n(t),g=m.length;if(c!=g&&!p)return!1;for(var f=c;f--;){var S=u[f];if(!(p?S in t:Et.call(t,S)))return!1}var w=s.get(e);if(w&&s.get(t))return w==t;var y=!0;s.set(e,t),s.set(t,e);for(var A=p;++f<c;){S=u[f];var b=e[S],F=t[S];if(r)var I=p?r(F,b,S,t,e,s):r(b,F,S,e,t,s);if(!(I===void 0?b===F||o(b,F,r,n,s):I)){y=!1;break}A||(A=S=="constructor")}if(y&&!A){var E=e.constructor,T=t.constructor;E!=T&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(y=!1)}return s.delete(e),s.delete(t),y}function Yn(e,t){var o=e.__data__;return MA(t)?o[typeof t=="string"?"string":"hash"]:o.map}function _A(e){for(var t=$n(e),o=t.length;o--;){var r=t[o],n=e[r];t[o]=[r,n,im(n)]}return t}function sr(e,t){var o=Dw(e,t);return IA(o)?o:void 0}var Kt=hA;(ya&&Kt(new ya(new ArrayBuffer(1)))!=Vn||qr&&Kt(new qr)!=qn||Sa&&Kt(Sa.resolve())!=Nl||wa&&Kt(new wa)!=Gn||Aa&&Kt(new Aa)!=fa)&&(Kt=function(e){var t=nr.call(e),o=t==tr?e.constructor:void 0,r=o?wo(o):void 0;if(r)switch(r){case Gw:return Vn;case Vw:return qn;case Kw:return Nl;case Hw:return Gn;case $w:return fa}return t});function OA(e,t,o){t=Xn(t,e)?[t]:rm(t);for(var r,n=-1,p=t.length;++n<p;){var s=Jn(t[n]);if(!(r=e!=null&&o(e,s)))break;e=e[s]}if(r)return r;var p=e?e.length:0;return!!p&&Ia(p)&&sm(s,p)&&(Ht(e)||cm(e))}function sm(e,t){return t=t??Vl,!!t&&(typeof e=="number"||Iw.test(e))&&e>-1&&e%1==0&&e<t}function Xn(e,t){if(Ht(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||va(e)?!0:ww.test(e)||!Sw.test(e)||t!=null&&e in Object(t)}function MA(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function QA(e){return!!Ol&&Ol in e}function qA(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||jn;return e===o}function im(e){return e===e&&!Zn(e)}function am(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==void 0||e in Object(o))}}var GA=Ta(function(e){e=$A(e);var t=[];return Aw.test(e)&&t.push(""),e.replace(hw,function(o,r,n,s){t.push(n?s.replace(Tw,"$1"):r||o)}),t});function Jn(e){if(typeof e=="string"||va(e))return e;var t=e+"";return t=="0"&&1/e==-Gl?"-0":t}function wo(e){if(e!=null){try{return tm.call(e)}catch{}try{return e+""}catch{}}return""}var VA=DA(function(e,t,o){e[o]=t});function Ta(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(iw);var o=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=o.cache;if(s.has(n))return s.get(n);var p=e.apply(this,r);return o.cache=s.set(n,p),p};return o.cache=new(Ta.Cache||Ct),o}Ta.Cache=Ct;function pm(e,t){return e===t||e!==e&&t!==t}function cm(e){return KA(e)&&Et.call(e,"callee")&&(!Mw.call(e,"callee")||nr.call(e)==Qn)}var Ht=Array.isArray;function Fa(e){return e!=null&&Ia(e.length)&&!um(e)}function KA(e){return es(e)&&Fa(e)}function um(e){var t=Zn(e)?nr.call(e):"";return t==zl||t==aw}function Ia(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vl}function Zn(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function es(e){return!!e&&typeof e=="object"}function va(e){return typeof e=="symbol"||es(e)&&nr.call(e)==Xl}var HA=_l?kw(_l):vA;function $A(e){return e==null?"":kA(e)}function zA(e,t,o){var r=e==null?void 0:om(e,t);return r===void 0?o:r}function jA(e,t){return e!=null&&OA(e,t,bA)}function $n(e){return Fa(e)?gA(e):xA(e)}function WA(e){return e}function YA(e){return Xn(e)?Rw(Jn(e)):PA(e)}or.exports=VA});var od=ze((Hr,ar)=>{i();a();var Dm=200,ah="Expected a function",qa="__lodash_hash_undefined__",as=1,cr=2,Ga=1/0,Nm=9007199254740991,os="[object Arguments]",Ba="[object Array]",Bm="[object Boolean]",Lm="[object Date]",Um="[object Error]",_m="[object Function]",ph="[object GeneratorFunction]",rs="[object Map]",Om="[object Number]",ir="[object Object]",Fm="[object Promise]",Mm="[object RegExp]",ns="[object Set]",Qm="[object String]",qm="[object Symbol]",La="[object WeakMap]",Gm="[object ArrayBuffer]",ss="[object DataView]",ch="[object Float32Array]",uh="[object Float64Array]",lh="[object Int8Array]",mh="[object Int16Array]",dh="[object Int32Array]",fh="[object Uint8Array]",gh="[object Uint8ClampedArray]",yh="[object Uint16Array]",Sh="[object Uint32Array]",wh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ah=/^\w*$/,hh=/^\./,bh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Th=/[\\^$.*+?()[\]{}|]/g,Fh=/\\(\\)?/g,Ih=/^\[object .+?Constructor\]$/,vh=/^(?:0|[1-9]\d*)$/,le={};le[ch]=le[uh]=le[lh]=le[mh]=le[dh]=le[fh]=le[gh]=le[yh]=le[Sh]=!0;le[os]=le[Ba]=le[Gm]=le[Bm]=le[ss]=le[Lm]=le[Um]=le[_m]=le[rs]=le[Om]=le[ir]=le[Mm]=le[ns]=le[Qm]=le[La]=!1;var Vm=typeof self=="object"&&self&&self.Object===Object&&self,Eh=typeof self=="object"&&self&&self.Object===Object&&self,jt=Vm||Eh||Function("return this")(),Km=typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,Im=Km&&typeof ar=="object"&&ar&&!ar.nodeType&&ar,xh=Im&&Im.exports===Km,vm=xh&&Vm.process,Em=function(){try{return vm&&vm.binding("util")}catch{}}(),xm=Em&&Em.isTypedArray;function Ch(e,t){var o=e?e.length:0;return!!o&&Dh(e,t,0)>-1}function Rh(e,t,o){for(var r=-1,n=e?e.length:0;++r<n;)if(o(t,e[r]))return!0;return!1}function Ph(e,t){for(var o=-1,r=e?e.length:0;++o<r;)if(t(e[o],o,e))return!0;return!1}function kh(e,t,o,r){for(var n=e.length,s=o+(r?1:-1);r?s--:++s<n;)if(t(e[s],s,e))return s;return-1}function Dh(e,t,o){if(t!==t)return kh(e,Nh,o);for(var r=o-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}function Nh(e){return e!==e}function Bh(e){return function(t){return t?.[e]}}function Lh(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}function Uh(e){return function(t){return e(t)}}function _h(e,t){return e.has(t)}function Oh(e,t){return e?.[t]}function Ua(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function Mh(e){var t=-1,o=Array(e.size);return e.forEach(function(r,n){o[++t]=[n,r]}),o}function Qh(e,t){return function(o){return e(t(o))}}function Va(e){var t=-1,o=Array(e.size);return e.forEach(function(r){o[++t]=r}),o}var qh=Array.prototype,Gh=Function.prototype,ps=Object.prototype,Da=jt["__core-js_shared__"],Cm=function(){var e=/[^.]+$/.exec(Da&&Da.keys&&Da.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Hm=Gh.toString,Pt=ps.hasOwnProperty,ur=ps.toString,Vh=RegExp("^"+Hm.call(Pt).replace(Th,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rm=jt.Symbol,Pm=jt.Uint8Array,Kh=ps.propertyIsEnumerable,Hh=qh.splice,$h=Qh(Object.keys,Object),_a=lr(jt,"DataView"),$r=lr(jt,"Map"),Oa=lr(jt,"Promise"),pr=lr(jt,"Set"),Ma=lr(jt,"WeakMap"),zr=lr(Object,"create"),zh=bo(_a),jh=bo($r),Wh=bo(Oa),Yh=bo(pr),Xh=bo(Ma),is=Rm?Rm.prototype:void 0,Na=is?is.valueOf:void 0,km=is?is.toString:void 0;function Ao(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function Jh(){this.__data__=zr?zr(null):{}}function Zh(e){return this.has(e)&&delete this.__data__[e]}function eb(e){var t=this.__data__;if(zr){var o=t[e];return o===qa?void 0:o}return Pt.call(t,e)?t[e]:void 0}function tb(e){var t=this.__data__;return zr?t[e]!==void 0:Pt.call(t,e)}function ob(e,t){var o=this.__data__;return o[e]=zr&&t===void 0?qa:t,this}Ao.prototype.clear=Jh;Ao.prototype.delete=Zh;Ao.prototype.get=eb;Ao.prototype.has=tb;Ao.prototype.set=ob;function kt(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function rb(){this.__data__=[]}function nb(e){var t=this.__data__,o=cs(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():Hh.call(t,o,1),!0}function sb(e){var t=this.__data__,o=cs(t,e);return o<0?void 0:t[o][1]}function ib(e){return cs(this.__data__,e)>-1}function ab(e,t){var o=this.__data__,r=cs(o,e);return r<0?o.push([e,t]):o[r][1]=t,this}kt.prototype.clear=rb;kt.prototype.delete=nb;kt.prototype.get=sb;kt.prototype.has=ib;kt.prototype.set=ab;function Dt(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function pb(){this.__data__={hash:new Ao,map:new($r||kt),string:new Ao}}function cb(e){return us(this,e).delete(e)}function ub(e){return us(this,e).get(e)}function lb(e){return us(this,e).has(e)}function mb(e,t){return us(this,e).set(e,t),this}Dt.prototype.clear=pb;Dt.prototype.delete=cb;Dt.prototype.get=ub;Dt.prototype.has=lb;Dt.prototype.set=mb;function jr(e){var t=-1,o=e?e.length:0;for(this.__data__=new Dt;++t<o;)this.add(e[t])}function db(e){return this.__data__.set(e,qa),this}function fb(e){return this.__data__.has(e)}jr.prototype.add=jr.prototype.push=db;jr.prototype.has=fb;function Rt(e){this.__data__=new kt(e)}function gb(){this.__data__=new kt}function yb(e){return this.__data__.delete(e)}function Sb(e){return this.__data__.get(e)}function wb(e){return this.__data__.has(e)}function Ab(e,t){var o=this.__data__;if(o instanceof kt){var r=o.__data__;if(!$r||r.length<Dm-1)return r.push([e,t]),this;o=this.__data__=new Dt(r)}return o.set(e,t),this}Rt.prototype.clear=gb;Rt.prototype.delete=yb;Rt.prototype.get=Sb;Rt.prototype.has=wb;Rt.prototype.set=Ab;function hb(e,t){var o=ho(e)||Zm(e)?Lh(e.length,String):[],r=o.length,n=!!r;for(var s in e)(t||Pt.call(e,s))&&!(n&&(s=="length"||Wm(s,r)))&&o.push(s);return o}function cs(e,t){for(var o=e.length;o--;)if(Jm(e[o][0],t))return o;return-1}function $m(e,t){t=ls(t,e)?[t]:zm(t);for(var o=0,r=t.length;e!=null&&o<r;)e=e[ms(t[o++])];return o&&o==r?e:void 0}function bb(e){return ur.call(e)}function Tb(e,t){return e!=null&&t in Object(e)}function Ka(e,t,o,r,n){return e===t?!0:e==null||t==null||!ds(e)&&!fs(t)?e!==e&&t!==t:Fb(e,t,Ka,o,r,n)}function Fb(e,t,o,r,n,s){var p=ho(e),u=ho(t),c=Ba,m=Ba;p||(c=zt(e),c=c==os?ir:c),u||(m=zt(t),m=m==os?ir:m);var g=c==ir&&!Ua(e),f=m==ir&&!Ua(t),S=c==m;if(S&&!g)return s||(s=new Rt),p||Hb(e)?jm(e,t,o,r,n,s):Lb(e,t,c,o,r,n,s);if(!(n&cr)){var w=g&&Pt.call(e,"__wrapped__"),y=f&&Pt.call(t,"__wrapped__");if(w||y){var A=w?e.value():e,b=y?t.value():t;return s||(s=new Rt),o(A,b,r,n,s)}}return S?(s||(s=new Rt),Ub(e,t,o,r,n,s)):!1}function Ib(e,t,o,r){var n=o.length,s=n,p=!r;if(e==null)return!s;for(e=Object(e);n--;){var u=o[n];if(p&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++n<s;){u=o[n];var c=u[0],m=e[c],g=u[1];if(p&&u[2]){if(m===void 0&&!(c in e))return!1}else{var f=new Rt;if(r)var S=r(m,g,c,e,t,f);if(!(S===void 0?Ka(g,m,r,as|cr,f):S))return!1}}return!0}function vb(e){if(!ds(e)||Qb(e))return!1;var t=td(e)||Ua(e)?Vh:Ih;return t.test(bo(e))}function Eb(e){return fs(e)&&$a(e.length)&&!!le[ur.call(e)]}function xb(e){return typeof e=="function"?e:e==null?Wb:typeof e=="object"?ho(e)?Pb(e[0],e[1]):Rb(e):Xb(e)}function Cb(e){if(!qb(e))return $h(e);var t=[];for(var o in Object(e))Pt.call(e,o)&&o!="constructor"&&t.push(o);return t}function Rb(e){var t=_b(e);return t.length==1&&t[0][2]?Xm(t[0][0],t[0][1]):function(o){return o===e||Ib(o,e,t)}}function Pb(e,t){return ls(e)&&Ym(t)?Xm(ms(e),t):function(o){var r=zb(o,e);return r===void 0&&r===t?jb(o,e):Ka(t,r,void 0,as|cr)}}function kb(e){return function(t){return $m(t,e)}}function Db(e){if(typeof e=="string")return e;if(za(e))return km?km.call(e):"";var t=e+"";return t=="0"&&1/e==-Ga?"-0":t}function Nb(e,t,o){var r=-1,n=Ch,s=e.length,p=!0,u=[],c=u;if(o)p=!1,n=Rh;else if(s>=Dm){var m=t?null:Bb(e);if(m)return Va(m);p=!1,n=_h,c=new jr}else c=t?[]:u;e:for(;++r<s;){var g=e[r],f=t?t(g):g;if(g=o||g!==0?g:0,p&&f===f){for(var S=c.length;S--;)if(c[S]===f)continue e;t&&c.push(f),u.push(g)}else n(c,f,o)||(c!==u&&c.push(f),u.push(g))}return u}function zm(e){return ho(e)?e:Gb(e)}var Bb=pr&&1/Va(new pr([,-0]))[1]==Ga?function(e){return new pr(e)}:Yb;function jm(e,t,o,r,n,s){var p=n&cr,u=e.length,c=t.length;if(u!=c&&!(p&&c>u))return!1;var m=s.get(e);if(m&&s.get(t))return m==t;var g=-1,f=!0,S=n&as?new jr:void 0;for(s.set(e,t),s.set(t,e);++g<u;){var w=e[g],y=t[g];if(r)var A=p?r(y,w,g,t,e,s):r(w,y,g,e,t,s);if(A!==void 0){if(A)continue;f=!1;break}if(S){if(!Ph(t,function(b,F){if(!S.has(F)&&(w===b||o(w,b,r,n,s)))return S.add(F)})){f=!1;break}}else if(!(w===y||o(w,y,r,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function Lb(e,t,o,r,n,s,p){switch(o){case ss:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Gm:return!(e.byteLength!=t.byteLength||!r(new Pm(e),new Pm(t)));case Bm:case Lm:case Om:return Jm(+e,+t);case Um:return e.name==t.name&&e.message==t.message;case Mm:case Qm:return e==t+"";case rs:var u=Mh;case ns:var c=s&cr;if(u||(u=Va),e.size!=t.size&&!c)return!1;var m=p.get(e);if(m)return m==t;s|=as,p.set(e,t);var g=jm(u(e),u(t),r,n,s,p);return p.delete(e),g;case qm:if(Na)return Na.call(e)==Na.call(t)}return!1}function Ub(e,t,o,r,n,s){var p=n&cr,u=Qa(e),c=u.length,m=Qa(t),g=m.length;if(c!=g&&!p)return!1;for(var f=c;f--;){var S=u[f];if(!(p?S in t:Pt.call(t,S)))return!1}var w=s.get(e);if(w&&s.get(t))return w==t;var y=!0;s.set(e,t),s.set(t,e);for(var A=p;++f<c;){S=u[f];var b=e[S],F=t[S];if(r)var I=p?r(F,b,S,t,e,s):r(b,F,S,e,t,s);if(!(I===void 0?b===F||o(b,F,r,n,s):I)){y=!1;break}A||(A=S=="constructor")}if(y&&!A){var E=e.constructor,T=t.constructor;E!=T&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(y=!1)}return s.delete(e),s.delete(t),y}function us(e,t){var o=e.__data__;return Mb(t)?o[typeof t=="string"?"string":"hash"]:o.map}function _b(e){for(var t=Qa(e),o=t.length;o--;){var r=t[o],n=e[r];t[o]=[r,n,Ym(n)]}return t}function lr(e,t){var o=Oh(e,t);return vb(o)?o:void 0}var zt=bb;(_a&&zt(new _a(new ArrayBuffer(1)))!=ss||$r&&zt(new $r)!=rs||Oa&&zt(Oa.resolve())!=Fm||pr&&zt(new pr)!=ns||Ma&&zt(new Ma)!=La)&&(zt=function(e){var t=ur.call(e),o=t==ir?e.constructor:void 0,r=o?bo(o):void 0;if(r)switch(r){case zh:return ss;case jh:return rs;case Wh:return Fm;case Yh:return ns;case Xh:return La}return t});function Ob(e,t,o){t=ls(t,e)?[t]:zm(t);for(var r,n=-1,p=t.length;++n<p;){var s=ms(t[n]);if(!(r=e!=null&&o(e,s)))break;e=e[s]}if(r)return r;var p=e?e.length:0;return!!p&&$a(p)&&Wm(s,p)&&(ho(e)||Zm(e))}function Wm(e,t){return t=t??Nm,!!t&&(typeof e=="number"||vh.test(e))&&e>-1&&e%1==0&&e<t}function ls(e,t){if(ho(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||za(e)?!0:Ah.test(e)||!wh.test(e)||t!=null&&e in Object(t)}function Mb(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Qb(e){return!!Cm&&Cm in e}function qb(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||ps;return e===o}function Ym(e){return e===e&&!ds(e)}function Xm(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==void 0||e in Object(o))}}var Gb=Ha(function(e){e=$b(e);var t=[];return hh.test(e)&&t.push(""),e.replace(bh,function(o,r,n,s){t.push(n?s.replace(Fh,"$1"):r||o)}),t});function ms(e){if(typeof e=="string"||za(e))return e;var t=e+"";return t=="0"&&1/e==-Ga?"-0":t}function bo(e){if(e!=null){try{return Hm.call(e)}catch{}try{return e+""}catch{}}return""}function Vb(e,t){return e&&e.length?Nb(e,xb(t,2)):[]}function Ha(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(ah);var o=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=o.cache;if(s.has(n))return s.get(n);var p=e.apply(this,r);return o.cache=s.set(n,p),p};return o.cache=new(Ha.Cache||Dt),o}Ha.Cache=Dt;function Jm(e,t){return e===t||e!==e&&t!==t}function Zm(e){return Kb(e)&&Pt.call(e,"callee")&&(!Kh.call(e,"callee")||ur.call(e)==os)}var ho=Array.isArray;function ed(e){return e!=null&&$a(e.length)&&!td(e)}function Kb(e){return fs(e)&&ed(e)}function td(e){var t=ds(e)?ur.call(e):"";return t==_m||t==ph}function $a(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nm}function ds(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function fs(e){return!!e&&typeof e=="object"}function za(e){return typeof e=="symbol"||fs(e)&&ur.call(e)==qm}var Hb=xm?Uh(xm):Eb;function $b(e){return e==null?"":Db(e)}function zb(e,t,o){var r=e==null?void 0:$m(e,t);return r===void 0?o:r}function jb(e,t){return e!=null&&Ob(e,t,Tb)}function Qa(e){return ed(e)?hb(e):Cb(e)}function Wb(e){return e}function Yb(){}function Xb(e){return ls(e)?Bh(ms(e)):kb(e)}ar.exports=Vb});var Pp=ze(Rp=>{"use strict";i();a();Object.defineProperty(Rp,"__esModule",{value:!0});var zf=R();function lI(e){var t=zf.useRef();return zf.useEffect(function(){t.current=e}),t.current}Rp.default=lI});i();a();i();a();i();a();var wS=l.object({balance:l.boolean(),history:l.boolean()}),GE=l.record(l.string(),wS),kn=class extends Error{constructor(t){super(t),this.name="SetTermsAcknowledgementError"}};var Tu=async(e,t)=>{try{return await e.set("termsHaveBeenAcknowledged2",t)}catch{throw new kn("Error Setting Terms Acknowledgement")}};async function AS(e){return(await e.get("onboardedAt"))?.onboardedAt}async function Fu(e,t=Date.now()){t&&!await AS(e)?await e.set("onboardedAt",{onboardedAt:t}):t||await e.remove("onboardedAt")}i();a();i();a();var Ru=C(yS(),1),Pu=C(Cu(),1),Ii=C(fS(),1),Wo=(e=>(e.BLOCK="BLOCK",e.NONE="NONE",e))(Wo||{});function hS(e,t){for(let o=0;o<e.k;o++){let r=(0,Pu.default)(`${e.salt}_${t}_${o}`,{asBytes:!0}),s=Ii.Buffer.from(r).subarray(0,4).readUInt32BE(0)%e.bits,p=Math.floor(s/24),u=Ii.Buffer.from(e.bitVector.slice(p*4,p*4+4),"base64"),c=s%24,m=Math.floor(c/8),g=c%8;if(!(u[m]&1<<7-g))return!1}return!0}var ux=typeof self<"u"&&self.fetch?self.fetch:Ru.default;function vi(e,t,o,r){let s=new URL(r).hostname.toLowerCase().split(".");for(let p=0;p<s.length-1;p++){let u=s.slice(p).join(".");if(t.includes(u)||hS(e,u)&&!o.includes(u))return"BLOCK"}return"NONE"}var Dn=C(Nu());var qu=C(Uu());i();a();var _u="https://blocklist.phantom.app/multichain.json",Ci="https://blowfish-blocklist-proxy.phantom.app",PS="https://github.com/phantom-labs/blocklist",Ri=(e=3)=>({retry:e,retryDelay:t=>Math.min(1e3*2**t,3e4)}),at={SLIPPAGE_EXCEEDED:"SLIPPAGE_EXCEEDED",INSUFFICIENT_FUNDS:"INSUFFICIENT_FUNDS",INSUFFICIENT_GAS:"INSUFFICIENT_GAS",UNKNOWN_ERROR:"UNKNOWN_ERROR",SIMULATION_FAILED:"SIMULATION_FAILED",TRANSACTION_EXPIRED:"TRANSACTION_EXPIRED",ACCOUNT_FROZEN:"ACCOUNT_FROZEN",SIMULATION_TIMEOUT:"SIMULATION_TIMEOUT",STALE_QUOTA:"STALE_QUOTA"};var DS=3,Ni=6e5,NS=6e4,Bx=l.object({type:l.union([l.literal("all"),l.literal("blocklist"),l.literal("whitelist"),l.literal("error"),l.literal("fuzzy"),l.literal("blowfishBloomFilter")]),result:l.boolean(),source:l.optional(l.string()),match:l.string().optional(),isSubdomainDomainWhitelisted:l.boolean().optional()}),Lx=l.object({localHash:l.any(),cursor:l.any()}),Bi=l.object({bitVector:l.string(),k:l.number(),hash:l.string(),bits:l.number(),salt:l.string()}),Gu=l.union([l.object({bloomFilter:Bi,bloomFilterHash:l.string(),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()}),l.object({bloomFilter:Bi.optional(),bloomFilterHash:l.optional(l.string()),recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),nextCursor:l.string()})]),Vu=l.object({bloomFilter:Bi,lastUpdated:l.number()}).nullish(),Ku=l.object({recentlyAdded:l.array(l.string()),recentlyRemoved:l.array(l.string()),lastUpdated:l.number().optional()}).nullish(),Lr=class{constructor(t,o,r,n){this.blocklist=Pi(t),this.whitelist=Pi(o),this.fuzzylist=Pi(r),this.tolerance=n||DS}check(t,o){if(!t)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let r=Nn(t),n=Li(r);if(LS(n,this.whitelist)){let c=new URL(t).hostname;if(ki(Li(c),this.blocklist)){let g={type:"blocklist",result:!0,source:c,isSubdomainDomainWhitelisted:!0};return o.capture("blockedDomain",{data:g}),g}else return{type:"whitelist",result:!1,source:c,isSubdomainDomainWhitelisted:!0}}if(ki(n,this.whitelist))return{type:"whitelist",result:!1,source:r,isSubdomainDomainWhitelisted:!1};if(ki(n,this.blocklist)){let c={type:"blocklist",result:!0,source:r,isSubdomainDomainWhitelisted:!1};return o.capture("blockedDomain",{data:c}),c}if(this.tolerance>0){let c=Ou(n);c=c.replace("www.","");let m=this.fuzzylist.find(g=>{let f=Ou(g);return qu.default.get(c,f)<=this.tolerance});if(m)return{type:"fuzzy",result:!0,match:BS(m),source:r,isSubdomainDomainWhitelisted:!1}}return{type:"all",result:!1,source:r,isSubdomainDomainWhitelisted:!1}}},Nn=e=>{let t=new URL(e).hostname.split(".");return t.slice(0).slice(-(t.length===4?3:2)).join(".")},Pi=e=>e.map(Li),Li=e=>e.split(".").reverse(),BS=e=>e.slice().reverse().join("."),Ou=e=>e.slice(1).reverse().join("."),ki=(e,t)=>t.some(o=>o.length>e.length?!1:o.every((r,n)=>e[n]===r)),LS=(e,t)=>t.some(o=>o[0]===e[0]&&o[1]===e[1]&&o[2]==="*"),US=async e=>{let t=(0,Dn.getBlocklist)(),o=await e.get("cachedBlocklistDiff"),r=null;try{r=JSON.parse(`${o}`)}catch(n){L.captureError(new Error(`Error parsing blocklist diff: ${n?.message}`),"generic")}if(r&&r.expiresAt&&r.expiresAt>Date.now())return new Lr(t.blocklist.concat(r.blocklist),t.whitelist.concat(r.whitelist),t.fuzzylist.concat(r.fuzzylist));{let n={},s=(0,Dn.getVersion)();r&&(n.lastContentHash=`${r.contentHash}`),s&&(n.localBlocklistVersion=`${s}`);let p=await _.headers(n).get(_u);if(p.status===200){let u=p.data;return u.expiresAt=Date.now()+Ni,e.set("cachedBlocklistDiff",JSON.stringify(u)),new Lr(t.blocklist.concat(u.blocklist),t.whitelist.concat(u.whitelist),t.fuzzylist.concat(u.fuzzylist))}else{if(p.status===304)return r.expiresAt=Date.now()+Ni,e.set("cachedBlocklistDiff",JSON.stringify(r)),new Lr(t.blocklist.concat(r.blocklist),t.whitelist.concat(r.whitelist),t.fuzzylist.concat(r.fuzzylist));throw new Error("Invalid response from blocklist")}}},Ui=async(e,t,o)=>{let r,n;try{let p=await hn(t.getFeatureFlags(),1e3);r=!!p["kill-blowfish-blocklist-cursor"],n=!!p["kill-previous-blocklist"]}catch{r=!1,n=!1}let s;try{if(n)return r?Qu(o,e,t):Mu(o,e,t);{s=await US(e);let p=s.check(o,t);return p.type==="all"?r?Qu(o,e,t):Mu(o,e,t):p}}catch{return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}}},Mu=async(e,t,o)=>{if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let r=Nn(e),n=await t.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"]),s=n.cachedBloomFilter??null,p=n.cachedBloomFilterHash??null,u=n.cachedScanDataCursor??null,c=n.cachedScanDataRecents??null,m=null,g={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0},f=null;if(s){let w=Vu.safeParse(s);w.success?m=w.data:await Di(t)}if(c){let w=Ku.safeParse(c);w.success?g=w.data:await Di(t)}if(u){let y=l.string().safeParse(u);y.success?f=y.data:await Di(t)}if(!g||g.lastUpdated==null||Date.now()>g.lastUpdated+NS){let w={localHash:p,cursor:f},y=await _.post(Ci,w);if(y.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let A=y.data,b,F=Gu.safeParse(A);if(F.success)b=F.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let I=[],E=[];g!=null&&(I=g.recentlyAdded,E=g.recentlyRemoved),I=I.concat(b.recentlyAdded),E=E.concat(b.recentlyRemoved),I=I.filter(x=>b.recentlyRemoved.indexOf(x)<0),E=E.filter(x=>b.recentlyAdded.indexOf(x)<0);let T={recentlyAdded:I,recentlyRemoved:E,lastUpdated:Date.now()};if(await t.set("cachedScanDataRecents",T),g=T,b.nextCursor!==f&&await t.set("cachedScanDataCursor",b.nextCursor),b.bloomFilter!=null){let x={bloomFilter:b.bloomFilter,lastUpdated:Date.now()};await Promise.all([t.set("cachedBloomFilter",x),t.set("cachedBloomFilterHash",b.bloomFilterHash)]),m=x}}if(!m)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let S=vi(m.bloomFilter,g.recentlyAdded,g.recentlyRemoved,e);if(S===Wo.BLOCK){let w={result:!0,source:r,type:"blowfishBloomFilter"};return o.capture("blockedDomain",{data:w}),w}else if(S===Wo.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};async function Di(e){await e.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"])}var Qu=async(e,t,o)=>{if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let r=Nn(e),n=await t.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"]),s=n.cachedBloomFilter??null,p=n.cachedBloomFilterHash??null,u=n.cachedScanDataRecents??null,c=null,m={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0};if(s){let f=Vu.safeParse(s);f.success?c=f.data:await t.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(u){let f=Ku.safeParse(u);f.success?m=f.data:await t.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(!m||m.lastUpdated==null||Date.now()>m.lastUpdated+Ni){let f={localHash:p},S=await _.post(Ci,f);if(S.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let w=S.data,y,A=Gu.safeParse(w);if(A.success)y=A.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let b={recentlyAdded:y.recentlyAdded,recentlyRemoved:y.recentlyRemoved,lastUpdated:Date.now()};if(await t.set("cachedScanDataRecents",b),m=b,y.bloomFilter!=null){let F={bloomFilter:y.bloomFilter,lastUpdated:Date.now()};await Promise.all([t.set("cachedBloomFilter",F),t.set("cachedBloomFilterHash",y.bloomFilterHash)]),c=F}}if(!c)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let g=vi(c.bloomFilter,m.recentlyAdded,m.recentlyRemoved,e);if(g===Wo.BLOCK){let f={result:!0,source:r,type:"blowfishBloomFilter"};return o.capture("blockedDomain",{data:f}),f}else if(g===Wo.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};i();a();i();a();var _S=e=>e/1e8;i();a();i();a();var Bn={GREEN:"accentSuccess",RED:"accentAlert",WHITE:"textPrimary"};function MS(e){switch(e){case"PLUS":return Bn.GREEN;case"MINUS":return Bn.RED;case"EQUAL":return Bn.WHITE;default:return Bn.WHITE}}function QS(e){let t=e?.advancedDetails&&"safeguard"in e.advancedDetails?e?.advancedDetails?.safeguard:void 0;if(t?.recommended&&!t?.shouldBundle&&!t.error&&!t.verifyError&&t?.transactions&&t.transactions.length>0)return t.transactions}function Hu(e,t){if(e.params&&"safeguard"in e.params&&e.params.safeguard&&t?.advancedDetails&&"safeguard"in t.advancedDetails&&t.advancedDetails.safeguard?.transactions){if(t.advancedDetails.safeguard.error)return t.advancedDetails.safeguard.error;let o=e.params.transactions,r=t.advancedDetails.safeguard.transactions;if(r){let n;try{au(o,r)}catch(s){s instanceof $o?n=s:s instanceof Error?n=$o.createUnknownError(s.message):n=$o.createUnknownError("Non error type",s)}if(n)return t.advancedDetails.safeguard.verifyError=n,n}}}i();a();i();a();var _i=async(e,t,o)=>{let r=`/simulation/v1?language=${e}`,n=await _.api().post(r,{...o,chainId:o.networkID,appVersion:ce,platform:Se,deviceId:t});if(!se(n))throw new Error("Failed to scan message");return n.data},Oi=async(e,t,o)=>{let r=`/simulation/v1?language=${e}`,n={...o.params,...o.params&&"safeguard"in o.params?{safeguard:{...o.params.safeguard,lighthouseProgramId:iu}}:{}},s=await _.api().post(r,{...o,chainId:o.networkID,params:n,appVersion:ce,platform:Se,deviceId:t});if(!se(s))throw new Error("Failed to scan transaction");let p=s.data,u=Hu(o,p);return u instanceof $o?L.captureMessage(`Verify error: ${u.message}`,"safeguard","error"):u&&L.captureMessage(`Safeguard API error: ${u}`,"safeguard"),p};var fC=l.union([l.literal("signTransaction"),l.literal("signAllTransactions"),l.literal("signAndSendTransaction"),l.literal("signAndSendAllTransactions")]);i();a();var $u=l.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),Tt=l.object({id:l.string(),displayName:l.string().optional(),logoURI:l.union([l.string(),l.null()]).optional(),tokenType:$u,decimals:l.number().optional(),symbol:l.string().optional(),isSpam:l.boolean().optional()}),zu=l.object({id:yt,displayName:l.string(),logoURI:l.union([l.string(),l.null()]).optional()}),Ln=l.object({token:Tt,amount:l.string(),to:yt,from:yt}),Mi=l.literal("UNCLASSIFIED_APP_INTERACTION"),Qi=l.literal("TOKEN_SEND"),qi=l.literal("TOKEN_BURN"),Gi=l.literal("TOKEN_SWAP"),Vi=l.literal("TOKEN_UNWRAP"),Ki=l.literal("WITHDRAW_STAKE"),Hi=l.literal("DEACTIVATE_STAKE"),$i=l.literal("STAKE"),zi=l.literal("COLLECTIBLE_LIST"),ji=l.literal("COLLECTIBLE_BUY_ITEM"),Wi=l.literal("COLLECTIBLE_CANCEL_BID"),Yi=l.literal("COLLECTIBLE_BID_ITEM"),Xi=l.literal("COLLECTIBLE_UNLIST"),Ji=l.literal("COLLECTIBLE_SELL_ITEM"),Zi=l.literal("CANCEL_TX"),ea=l.literal("TOKEN_APPROVAL"),ta=l.literal("CANCEL_ORDER"),oa=l.literal("COLLECTION_APPROVAL"),ra=l.literal("BRIDGE_INIT"),qS=l.union([Mi,Qi,qi,Gi,Vi,Ki,Hi,$i,zi,ji,Wi,Yi,Xi,Ji,Zi,ea,ta,oa,ra]),ju=l.object({transactionType:Mi,balanceChanges:l.array(Ln),dapp:l.union([nt,l.null()]).optional()}),Wu=l.object({transactionType:Qi,balanceChanges:l.array(Ln).nonempty(),dapp:l.union([nt,l.null()]).optional()}),Yu=l.object({transactionType:qi,dapp:l.union([nt,l.null()]).optional(),token:Tt,amount:l.string()}),Xu=l.object({transactionType:Gi,dapp:l.union([nt,l.null()]).optional(),receiveToken:Tt,sendToken:Tt,receiveAmount:l.string(),sendAmount:l.string()}),Ju=l.object({transactionType:Vi,token:Tt,amount:l.string()}),Zu=l.object({transactionType:Ki,stakeAccount:yt,amount:l.string()}),el=l.object({transactionType:Hi,stakeAccount:yt,amount:l.string()}),tl=l.object({transactionType:$i,stakeAccount:yt,amount:l.string(),validatorName:l.string().optional(),validatorWebsite:l.string().optional(),keybaseUsername:l.string().optional()}),ol=l.object({transactionType:Zi}),Xo=l.object({dapp:l.union([nt,l.null()]),itemAmount:l.string().optional(),item:Tt,forAmount:l.string(),forAsset:Tt,listingUrl:l.string().optional()}),rl=Xo.merge(l.object({transactionType:zi})),nl=Xo.merge(l.object({transactionType:ji})),sl=Xo.merge(l.object({transactionType:Wi})),il=Xo.merge(l.object({transactionType:Yi})),al=Xo.merge(l.object({transactionType:Xi})),pl=Xo.merge(l.object({transactionType:Ji})),cl=l.object({transactionType:ea,dapp:l.union([nt,l.null()]).optional(),token:Tt,value:l.string().optional(),isApproved:l.boolean()}),ul=l.object({transactionType:ta,dapp:l.union([nt,l.null()]).optional(),orderId:l.string()}),ll=l.object({transactionType:oa,collection:zu,dapp:l.union([nt,l.null()]).optional(),isApproved:l.boolean()}),ml=l.object({transactionType:ra,dapp:l.union([nt,l.null()]).optional(),balanceChanges:l.array(Ln).nonempty(),explorerUrl:l.string().optional()}),dl=l.enum(["success","failed"]),fl=l.object({networkFee:l.string().optional(),networkFeePayer:l.string().optional(),status:dl,errorMessage:l.union([l.string(),l.null()]),blockNumber:l.string(),chainId:qt,transactionId:l.string()}),Un=l.object({timestamp:l.number(),owner:yt,id:yt,interactionData:l.union([ju,Wu,Yu,Xu,Ju,Zu,el,tl,rl,nl,sl,il,al,pl,ol,cl,ul,ll,ml]),chainMeta:fl}),Le=e=>{let r=e.split("/")[1]?.split(":");return r&&r[1]};i();a();var na=C(R());var GS=["So11111111111111111111111111111111111111112","501"],VS=(e,t,o,r,n)=>{let{interactionData:s,chainMeta:p}=e,{transactionType:u}=s,c=p.status==="failed",m=p.chainId,g=v.getTokenSymbol(m),f=v.getTokenDecimals(m),S=t("historyUnknownDappName"),w=na.default.createElement(o,{activityItem:e,size:"small",isDetailViewOrSvg:!1});switch(u){case"TOKEN_SEND":{let A=s.balanceChanges[0],{token:{symbol:b,displayName:F,tokenType:I,decimals:E},amount:T}=A,x=gl(A,n),P=Ur(I),O=I==="NonFungible",M="";if(!c&&E!==void 0&&!O){let H=x?"+":"-";P?M=`${H}${Ee(T,E)}`:M=`${H}${Ee(T,E)}${b?` ${gt(b,6)}`:""}`}if(x){let H=Le(A.from),Q=yi(H,void 0,r(H,m));return{topLeft:{text:`${t("transactionsReceived")} ${P?F||t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${M}`,color:"accentSuccess"},bottomLeft:{text:t("transactionsFromParagraphInterpolated",{from:Q,defaultValue:`From ${Q}`})},start:w}}else{let H=Le(A.to),Q=yi(H,void 0,r(H,m));return{topLeft:{text:c?t("transactionsSendFailed"):`${t("transactionsSent")} ${P?F||t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${M}`,color:"textPrimary"},bottomLeft:{text:t("transactionsToParagraphInterpolated",{to:Q,defaultValue:`To ${Q}`})},start:w}}}case"TOKEN_BURN":{let{amount:y,token:A}=s,b="";return A.displayName?y==="1"?b=A.displayName:b=`${A.displayName} (${y})`:b=t("richTransactionDetailUnknownNFT"),{topLeft:{text:c?`${t("transactionsFailedBurn")}`:`${t("transactionsBurned")}`},bottomLeft:{text:b},start:w}}case"TOKEN_UNWRAP":{let{amount:y,token:A}=s;return{topLeft:{text:c?`${t("transactionsUnwrappedFailed")}`:`${t("transactionsUnwrapped")}`},topRight:{text:c?"":`${Ee(y,A.decimals??0)} ${A.symbol}`,color:"textPrimary"},start:w}}case"TOKEN_SWAP":{let{receiveAmount:y,receiveToken:A,sendAmount:b,sendToken:F,dapp:I}=s,E=I?I.displayName:t("historyUnknownDappName"),T=Pr(Le(F.id)||""),x=Pr(Le(A.id)||""),P="";!c&&A.decimals!==void 0&&(P=`+${Ee(y,A.decimals)} ${gt(A.symbol||x,6)}`);let O="";return!c&&F.decimals!==void 0&&(O=`-${Ee(b,F.decimals)} ${gt(F.symbol||T,6)}`),{topLeft:{text:t(c?"transactionsFailedSwap":"transactionsSwapped")},topRight:{text:P,color:"accentSuccess"},bottomLeft:{text:E},bottomRight:{text:O,color:"textPrimary"},start:w}}case"BRIDGE_INIT":{let y=s.dapp?s.dapp.displayName:S,b=s.balanceChanges[0],{token:{symbol:F,decimals:I},amount:E}=b,T=F?` ${gt(F,6)}`:"";if(!c&&I!==void 0){let x=`-${Ee(E,I)}${T}`;return{topLeft:{text:c?t("transactionBridgeInitiatedFailed"):`${t("transactionBridgeInitiated")}`},bottomLeft:{text:y},topRight:{text:`${x}`,color:"textPrimary"},start:w}}return{topLeft:{text:c?t("transactionBridgeInitiatedFailed"):`${t("transactionBridgeInitiated")}`},bottomLeft:{text:y},start:w}}case"WITHDRAW_STAKE":{let{amount:y,stakeAccount:A}=s,b=Le(A),F=v.getTokenSymbol(m);return{topLeft:{text:t(c?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{text:c?"":`${Ee(y,f)} ${gt(F,6)}`,color:"textPrimary"},bottomLeft:{text:En(b,4)},start:w}}case"DEACTIVATE_STAKE":{let{stakeAccount:y}=s,A=Le(y);return{topLeft:{text:t(c?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{text:En(A,4)},start:w}}case"STAKE":{let{amount:y,stakeAccount:A,validatorName:b}=s,F=Le(A);return{topLeft:{text:t(c?"transactionsStakedFailed":"transactionsStaked")},topRight:{text:c?"":`${Ee(y,f)} ${gt(g,6)}`,color:"textPrimary"},bottomLeft:{text:b||En(F,4)},start:w}}case"COLLECTIBLE_LIST":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),F=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsListedFailed"):t("transactionsListedInterpolated",{name:F})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_BUY_ITEM":{let{dapp:y,itemAmount:A,item:b,forAsset:F,forAmount:I}=s,E=y?y.displayName:t("historyUnknownDappName"),T=F.decimals!==void 0?`-${Ee(I,F.decimals)} ${gt(F.symbol||"",6)}`:t("transactionsUnknownAmount"),x=b.symbol||Pr(Le(b.id)),P=A&&b.tokenType==="SemiFungible"?`+${A} ${x}`:`+${x}`;return{topLeft:{text:t(c?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{text:c?"":P,color:"accentSuccess"},bottomRight:{text:c?"":`${T}`,color:"textPrimary"},bottomLeft:{text:E},start:w}}case"COLLECTIBLE_CANCEL_BID":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),F=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsCancelBidOnFailed"):t("transactionsCancelBidOnInterpolated",{name:F})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_BID_ITEM":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),F=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsBidFailed"):t("transactionsBidOnInterpolated",{name:F})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_UNLIST":{let{dapp:y,item:A}=s,b=y?y.displayName:t("historyUnknownDappName"),F=A.displayName||t("richTransactionDetailUnknownNFT");return{topLeft:{text:c?t("transactionsUnlistedFailed"):t("transactionsUnlistedInterpolated",{name:F})},bottomLeft:{text:b},start:w}}case"COLLECTIBLE_SELL_ITEM":{let{dapp:y,itemAmount:A,item:b,forAsset:F,forAmount:I}=s,E=y?y.displayName:t("historyUnknownDappName"),T=F.decimals!==void 0?`+${Ee(I,F.decimals)} ${gt(F.symbol||"",6)}`:t("transactionsUnknownAmount"),x=b.symbol||Pr(Le(b.id)),P=A&&b.tokenType==="SemiFungible"?`-${A} ${x}`:`-${x}`;return{topLeft:{text:t(c?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{text:c?"":`${T}`,color:"accentSuccess"},bottomRight:{text:c?"":P,color:"textPrimary"},bottomLeft:{text:E},start:w}}case"CANCEL_TX":return{topLeft:{text:t(c?"transactionCancelledFailed":"transactionCancelled")},start:w};case"TOKEN_APPROVAL":{let{dapp:y,token:A,isApproved:b}=s,F=Ur(A.tokenType)?A.displayName:A.symbol,I;return c?b?Ur(A.tokenType)?I=t("transactionApproveTokenFailed",{tokenSymbol:F}):I=t("transactionApprovalFailed"):Ur(A.tokenType)?I=t("transactionRevokeApproveTokenFailed",{tokenSymbol:F}):I=t("transactionRevokeFailed"):b?I=t("transactionApproveToken",{tokenSymbol:F}):I=t("transactionRevokeApproveToken",{tokenSymbol:F}),{topLeft:{text:I},bottomLeft:{text:y?y.displayName:S,color:"textTertiary"},start:w}}case"COLLECTION_APPROVAL":{let{collection:y,isApproved:A,dapp:b}=s,F=y.displayName,I;return c?A?I=t("transactionApproveTokenFailed",{tokenSymbol:F}):I=t("transactionRevokeApproveTokenFailed",{tokenSymbol:F}):A?I=t("transactionApproveToken",{tokenSymbol:F}):I=t("transactionRevokeApproveToken",{tokenSymbol:F}),{topLeft:{text:I},bottomLeft:{text:b?b.displayName:S,color:"textTertiary"},start:w}}case"CANCEL_ORDER":{let{dapp:y}=s;return{topLeft:{text:t(c?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{text:y?.displayName||t("historyUnknownDappName"),color:"textTertiary"},start:w}}case"UNCLASSIFIED_APP_INTERACTION":{let{dapp:y}=s,A=y?y.displayName:S;return{topLeft:{text:t(c?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{text:A},start:w}}}},KS=(e,t)=>{let{display:o,type:r}=e,{topLeft:n,topRight:s,bottomLeft:p,bottomRight:u}=o.summary,c=na.default.createElement(t,{logoUri:o.summary.logoUri,pendingTransactionType:r,size:"small"});return{topLeft:n,topRight:s,bottomLeft:p,bottomRight:u,start:c}},HS=(e,t,o)=>{let r=(e??[]).map(Zc);if(t){let n=r.find(s=>s.chainId===t)?.address;if(n){let s={chainId:t,address:n};o&&(s.filters=[{type:"token",value:o}]),r=[s]}}return r},Ur=e=>{switch(e){case"SemiFungible":case"NonFungible":return!0;default:return!1}},gl=(e,t)=>{let o=Le(e.to),r=Le(e.from),n=t.some(p=>p.address.toLowerCase()===o.toLowerCase()),s=t.some(p=>p.address.toLowerCase()===r.toLowerCase());return n&&!s},$S=e=>{switch(e?.type){case"BRC20":return e.data.firstCreatedInscriptionId;case"ERC20":return e.data.contractAddress;case"SPL":return e.data.splTokenAccountPubkey;default:return}},zS=(e,t)=>{let o=Le(e.id);return GS.includes(o)&&(e.tokenType="Native"),e.tokenType==="Native"?{chainId:t,slip44:v.getSlip44(t),resourceType:"nativeToken"}:{chainId:t,address:o,resourceType:"address"}};i();a();i();a();i();a();var Vt={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!0};var yl={...Vt};i();a();var Sl={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};i();a();var wl={...Vt,showTimeToMineRowInPendingTransactionDetail:!0};i();a();var Al={...Vt};i();a();var hl={...Vt};i();a();var bl={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};var jS=new Ho({solana:bl,ethereum:wl,polygon:hl,monad:Al,base:yl,bitcoin:Sl}),Tl=Ko(jS);i();a();i();a();i();a();var WS=10,YS="/history/v2",Zo=class extends Error{constructor(){super(...arguments);this.message="406: Cache bust!"}},Or=class extends Error{constructor(){super(...arguments);this.message="Server response malformed."}},_n=class extends Error{},On=class extends Error{},sa=l.object({next:l.union([l.null(),l.string()]),results:l.array(Un)}),Fl=async e=>{let t=await _.api().retry(3,2e3).post(`${YS}`,e);if(t.status===406)throw new Zo;if(t.status>=400&&t.status<500)throw new On(`FetchActivityItem: Status code: ${t.status}`);if(t.status>=500)throw new _n(`FetchActivityItem: Status code: ${t.status}`);return t.data},Il=e=>!Array.isArray(e.results)||typeof e.next!="string"&&e.next!==null,Mn=async e=>{let t=await Fl(e);if(Il(t))throw new Or;for(;t.results?.length<WS&&t.next;){if(Il(t))throw new Or;let o=await Fl({next:t.next,isSpam:e.isSpam});t.next=o.next,t.results=[...t.results,...o.results]}try{return sa.parse(t)}catch(o){let r=o,n=[],s=r.issues;for(let c=0;c<s.length;++c){let m=s[c].path;if(m[0]!=="results")throw L.captureError(r,"history"),r;let g=m[1];if(typeof g!="number")throw L.captureError(r,"history"),r;n.push(g)}n.sort(function(c,m){return m-c});let p=n.map(c=>t.results[c]).map(c=>c.interactionData?.transactionType||""),u=[];for(let c=0;c<n.length;++c){let m=n[c],g=t.results[m],f={timestamp:g?.timestamp,owner:g?.owner,id:g?.id,chainMeta:g?.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{Un.parse(f),t.results[m]=f,u.push(m)}catch{}}for(let c=0;c<n.length;++c){let m=n[c];u.indexOf(m)===-1&&t.results.splice(m,1)}n.length&&console.error(`Removed history items, ${p.join(",")}`);try{return sa.parse(t)}catch(c){let m=c;throw L.captureError(m,"history"),m}}};i();a();var vl=C(R());var Mr="fetch-infinite-activity-items",El=({accounts:e,isSpam:t})=>[Mr,e,t],XS=(e,t)=>{e.removeQueries({queryKey:t})},JS=({accounts:e,isSpam:t})=>{let o=j();(0,vl.useEffect)(()=>()=>{o.cancelQueries({queryKey:[Mr],exact:!1})},[o]);let r=El({accounts:e,isSpam:t});return po({queryKey:r,queryFn:async({pageParam:p})=>{try{let u;return p&&p!==""?u=await Mn({next:p,isSpam:t}):u=await Mn({accounts:e||[],isSpam:t}),u}catch(u){u instanceof Zo&&XS(o,r),L.captureError(u,"history")}},getNextPageParam:p=>p?.next,staleTime:1/0,retry:!1,enabled:!!e?.length&&e.every(p=>!v.isLocalNetworkID(p.chainId)),initialPageParam:""})};i();a();i();a();i();a();i();a();var Ft=U({days:1}),It=U({seconds:5});i();a();i();a();var We="@phantom/phantom-network",Ue={actor(e){return["actor",`${We}:actor`,{profileId:e}]},actorAndFollowers(e){return["user",`${We}:actor-and-followers`,{targetUid:e}]},actorAndFollowing(e){return["user",`${We}:actor-and-following`,{targetUid:e}]},userProfileByUsernameOrUserProfileId(e){return["user",`${We}:user-profile-by-username-or-user-profile-id`,{usernameOrUserProfileId:e}]},followUser(e,t){return["user",`${We}:follow-user`,{currentUid:e,targetUid:t}]},inbox(e){return["user",`${We}:inbox`,{currentUid:e}]},searchForActorBase(){return["actor",`${We}:search`]},searchForActor(e,t){return["actor",`${We}:search`,{query:e,enableSorting:t}]},followRequests(e){return["user",`${We}:follow-requests`,{currentUid:e}]},blocking(e){return["user",`${We}:blocking`,{currentUid:e}]},pendingFollowRequest(e){return["user",`${We}:pending-follow-request`,{curentUid:e}]}};i();a();i();a();var go=e=>{let t=ao();return Bc.parse(`${t}/v1/actors/${e}`)};function ia({query:e,enabled:t,enableSorting:o=!1}){let{data:r}=De(),{data:n}=St(),s=r?.accessToken,p=n?.id?go(n.id):void 0,u=e?.startsWith("@")?e.slice(1).trim():e.trim(),c=Uc(),m=Ue.searchForActor(u,o);return D({enabled:t,queryKey:m,queryFn:async()=>{if(!u)return{actors:[]};let{actors:f}=await c.searchForActor(u,s),S=f.map(w=>{let y=!1,A=!1;return p&&(typeof w.followers=="string"?A=!1:A=(w.followers.current?.orderedItems||[]).find(F=>F.includes(p))!==void 0,typeof w.following=="string"?y=!1:y=(w.following.current?.orderedItems||[]).find(F=>F.includes(p))!==void 0),{followsYou:y,followedByYou:A,...w}});return o&&S.sort((w,y)=>w.followedByYou?-1:y.followedByYou?1:0),{actors:S}},gcTime:Ft,staleTime:It})}i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();var ow=l.object({type:l.literal("fungible"),data:uu}),Pl=l.object({results:l.array(l.any()).transform(e=>e.reduce((t,o)=>{let r=ow.safeParse(o);return r.success&&t.push(r.data),t},[])),prevCursor:l.string().nullish().default(null),nextCursor:l.string().nullish().default(null),hasMore:l.boolean()});async function kl(e){let{query:t,networkIds:o,searchContext:r,supportedNetworkIds:n}=e,s=await _.api().headers({"Content-Type":"application/json"}).get("/search/v1",{params:{query:t.trim(),chainIds:o.join(","),platform:Se,pageSize:"50",searchTypes:"fungible",searchContext:r,...n&&{supportedNetworkIds:n.join(",")}}});if(!se(s))throw new xe({key:"UnknownError"});let p=Pl.safeParse(s.data);if(p.success)return p.data;throw new xe({key:"UnknownError"})}i();a();var pa=e=>{let t=e.data,o=Ai(t)??void 0;return{type:t.type,data:{...t.data,tokenAddress:Ai(t)??void 0,key:o}}};i();a();var rw="search",Dl={searchResults:(e,t,o,r)=>[rw,{query:e,networkIds:t,supportedNetworkIds:r,chainAddresses:o}]};i();a();var ca=(s=>(s[s.Always=1/0]="Always",s[s.Short=U({minutes:5})]="Short",s[s.Medium=U({minutes:30})]="Medium",s[s.Long=U({hours:1})]="Long",s[s.Never=0]="Never",s))(ca||{}),ua=(n=>(n[n.Immediate=0]="Immediate",n[n.Short=U({minutes:5})]="Short",n[n.Medium=U({minutes:30})]="Medium",n[n.Long=U({hours:1})]="Long",n))(ua||{});var nw=async({query:e,networkIds:t,searchContext:o,supportedNetworkIds:r})=>(await kl({query:e,networkIds:t,searchContext:o,supportedNetworkIds:r})).results.map(s=>pa(s)),yo=({query:e,networkIds:t,enableQuery:o=!0,keepPreviousData:r=!1,searchContext:n,supportedNetworkIds:s,chainAddresses:p})=>{let u=Dl.searchResults(e,t,p,s);return D({queryKey:u,gcTime:ca.Short,staleTime:ua.Short,enabled:o,placeholderData:r?gc:void 0,queryFn:()=>nw({query:e,networkIds:t,searchContext:n,supportedNetworkIds:s})})};var ka=C(lm()),ke=C(R());i();a();i();a();i();a();var mm={filterEnabled:e=>e,tokenSearchEnabled:e=>e};i();a();var dm={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var fm={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var gm={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var ym={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};i();a();var Sm={filterEnabled:()=>!0,tokenSearchEnabled:()=>!0};var XA=new Ho({solana:Sm,ethereum:fm,polygon:ym,base:mm,bitcoin:dm,monad:gm}),Ea=Ko(XA);i();a();var wm={fields:["domain","name","category","tags"],storeFields:["domain","name","category","tags","imageUrl"],searchOptions:{boost:{name:2},prefix:!0,fuzzy:e=>e.length>3?.2:!1}};i();a();i();a();var ct="@phantom/explore",Fe={RecentlyViewedSearchItems:[ct,"RecentlyViewedSearchItems"],sitesV2({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,rankAlgo:s}){return[ct,"sitesV2",ce,n,{sortBy:e,timeFrame:t,networkIDs:o,rankAlgo:s,limit:r}]},recommendedSites(e,t){return[ct,"sites","recommended",ce,t,e]},tokensV2({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:r,locale:n,limit:s,rankAlgo:p}){return[ct,"tokensV2",n,{sortBy:e,sortDirection:t,timeFrame:o,networkIDs:r,rankAlgo:p,limit:s}]},collectionsV2({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,rankAlgo:s}){return[ct,"collectionsV2",ce,n,{sortBy:e,timeFrame:t,networkIDs:o,rankAlgo:s,limit:r}]},featuredTransactions(e,t){return[ct,"transactions","featured",ce,t,e]},learn(e,t){return[ct,"learn",ce,t,e]}};var JA=10,hm="RecentlyViewedSearchItems";async function ZA(e){return await e.get(hm)??[]}async function bm(e,t){await e.set(hm,t)}function xa(e){return D({queryKey:Fe.RecentlyViewedSearchItems,queryFn:async()=>ZA(e),staleTime:0,enabled:!0})}function eh(e){let t=j();return ne({mutationFn:async r=>{let n=Am(r),p=(t.getQueryData(Fe.RecentlyViewedSearchItems)??[]).filter(u=>Am(u)!==n);p.unshift(r),p=p.slice(0,JA),await bm(e,p),t.setQueryData(Fe.RecentlyViewedSearchItems,p),await t.refetchQueries({queryKey:Fe.RecentlyViewedSearchItems})}})}function th(e){let t=j();return ne({mutationFn:async()=>{await bm(e,[]),t.setQueryData(Fe.RecentlyViewedSearchItems,[]),await t.refetchQueries({queryKey:Fe.RecentlyViewedSearchItems})}})}function Am(e){return e.type==="token"?ae(V(e.data)):e.data.id}i();a();i();a();var ts=e=>["explore-dapp",e];var Ca=e=>e.addresses.map(t=>v.getMainnetNetworkID(t.networkID))??[];var oh=e=>{let t={isRecommended:"true"};return e.networkIds&&(t.chainIds=e.networkIds.join(",")),`/dapps/v1?${new URLSearchParams(t).toString()}`},rh=async e=>{let t=await _.api().get(oh(e));if(t.status===500)throw new Error("Error fetching recommended dapps from registry");return(await t.data).data},Ra=e=>{let t=j();return D({queryKey:["dapps","recommended",e],queryFn:async()=>{try{let r=await rh(e);return An.batch(()=>{for(let n of r??[]){let s=ts(n.domain),p=t.getQueryState(s);t.setQueryData(s,()=>n??p?.data??null)}}),r}catch(r){throw L.captureError(r,"dappRegistry"),r}},gcTime:U({days:1}),staleTime:U({days:1})})};var Vr=3,nh=15,Pa=50,Tm={VERIFIED:1,NOT_VERIFIED:2,POSSIBLE_SPAM:3,SPAM:4},sh=(e,t=100)=>{let[o,r]=(0,ke.useState)(!1);return(0,ke.useEffect)(()=>{let n;return e?n=setTimeout(()=>r(!0),t):r(!1),()=>clearTimeout(n)},[e,t]),o},ih=({searchQuery:e,networkIds:t,minSearchResults:o,extraDapps:r=[]})=>{let{data:[n,s]}=ie(["enable-social-profiles","kill-base-explore-search"]),[p,u]=(0,ke.useState)(!1),[c,m]=(0,ke.useState)(!1),[g,f]=(0,ke.useState)(!1),S=t.filter(Qe=>Ea.get(Qe).tokenSearchEnabled(!s));(0,ke.useEffect)(()=>{u(!1),m(!1),f(!1)},[e]);let{data:w=[],isPending:y}=yo({query:e,networkIds:S,searchContext:"explore"}),A=(0,ke.useMemo)(()=>w.sort((Qe,Cr)=>Tm[Qe.data.spamStatus??"NOT_VERIFIED"]-Tm[Cr.data.spamStatus??"NOT_VERIFIED"]),[w]),b=o??(e.length===0?nh:Vr),F=(0,ke.useMemo)(()=>A.slice(0,c?Pa:b),[c,A,b]),I=A.map(Qe=>ae(V(Qe))),{data:E={},isPending:T}=st({query:{data:I},enabled:I.length>0}),{data:x=[],isPending:P}=Ra({networkIds:S}),O=(0,ke.useMemo)(()=>{let Qe=[...x,...r],Cr=(0,ka.default)(Qe,dS=>bn(dS.domain));return Object.values(Cr)},[x,r]),M=bn(e),H=vc(O,M,wm),Q=(0,ka.default)(H,Qe=>bn(Qe.domain)),W=Object.values(Q),Y=W.slice(0,p?Pa:Vr),{data:ge,isPending:G}=ia({query:e,enabled:n}),ee=n?G:!1,B=!!e,he=P||y||ee,me=B&&!he,ye=Z(),{data:$}=xa(ye),{actorsAll:J,actors:io}=(0,ke.useMemo)(()=>{let Qe=ge?.actors??[],Cr=Qe.slice(0,g?Pa:Vr);return{actorsAll:Qe,actors:Cr}},[g,ge?.actors]),ft=(0,ke.useMemo)(()=>({actors:io,dapps:x,searchedDapps:Y,renderShowMoreDappsButton:B&&W.length>Vr,isLoading:he,tokens:F,renderShowMoreTokensButton:B&&A.length>b,renderShowMoreUsersButton:B&&J.length>Vr,priceMap:E,isPriceMapLoading:T,showSearchResults:me,showMoreTokens:c,setShowMoreTokens:m,showMoreDapps:p,setShowMoreDapps:u,showMoreUsers:g,setShowMoreUsers:f,recentlyViewedSearchItems:$}),[io,x,Y,B,W.length,he,F,A.length,b,J.length,E,T,me,c,p,g,$]),[Sn,lS]=(0,ke.useState)(null),mS=sh(he);return(0,ke.useEffect)(()=>{ft.isLoading||lS(e?ft:null)},[ft.isLoading,e]),{...ft.isLoading&&Sn?Sn:ft,showSpinner:mS&&B}};i();a();var Wa=C(R());i();a();var cd=C(SS()),ud=C(od());var Jb=l.object({domain:l.string(),url:l.string(),name:l.string(),category:l.string(),imageUrl:l.string()}),ld=l.object({uuid:l.string(),data:l.array(Jb)}),Zb=l.object({chainId:qt,address:l.string(),name:l.string(),symbol:l.string(),logoUrl:l.string(),marketCap:l.number(),price:l.number(),priceChange:l.number(),volume:l.number(),volumeChange:l.number()}),md=l.object({items:l.array(Zb)}),eT=l.object({paymentTokenId:l.string(),name:l.string(),symbol:l.string(),decimals:l.number()}),tT=l.object({verified:l.boolean(),collectionUrl:l.string(),marketplaceId:l.string(),marketplaceName:l.string(),marketplaceCollectionId:l.string()}),oT=l.object({marketplaceId:l.string(),paymentToken:eT,value:l.string()}),rT=l.object({id:l.string(),name:l.string(),volume:l.string().optional(),volumePercentChange:l.number(),marketplacePages:l.array(tT),floorPrices:l.array(oT),imageUrl:l.string()}),dd=l.object({uuid:l.string(),data:l.array(rT)}),nT=["tokens","sites","collections","quests","learn"],To=l.enum(["shortcuts","carousel",...nT]),sT=l.object({type:l.literal(To.enum.shortcuts)}),iT=l.object({type:l.literal(To.enum.carousel)}),Wr="all_networks",mr=l.union([qt,l.literal(Wr)]),aT=["asc","desc"],pT=l.enum(aT),cT=["rank","volume","price","price-change","market-cap"],rd=l.enum(cT),uT=["1h","24h","7d","30d"],nd=l.enum(uT),lT=l.object({type:l.literal(To.enum.tokens),sortBy:l.array(rd).refine(e=>new Set(e).size===e.length),sortByDefault:rd,sortDirectionDefault:pT,network:l.array(mr).refine(e=>new Set(e).size===e.length),networkDefault:mr,timeFrame:l.array(nd).refine(e=>new Set(e).size===e.length),timeFrameDefault:nd,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),mT=["top","rank"],sd=l.enum(mT),dT=["24h","7d","30d"],id=l.enum(dT),fT=l.object({type:l.literal(To.enum.sites),sortBy:l.array(sd).refine(e=>new Set(e).size===e.length),sortByDefault:sd,network:l.array(mr).refine(e=>new Set(e).size===e.length),networkDefault:mr,timeFrame:l.array(id).refine(e=>new Set(e).size===e.length),timeFrameDefault:id,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),gT=["top","rank"],ad=l.enum(gT),yT=["24h","7d","30d"],pd=l.enum(yT),ST=l.object({type:l.literal(To.enum.collections),sortBy:l.array(ad).refine(e=>new Set(e).size===e.length),sortByDefault:ad,network:l.array(mr).refine(e=>new Set(e).size===e.length),networkDefault:mr,timeFrame:l.array(pd).refine(e=>new Set(e).size===e.length),timeFrameDefault:pd,rankAlgo:l.string(),limit:l.number(),listLimit:l.number()}),wT=l.object({type:l.literal(To.enum.learn),limit:l.number()}),AT=l.object({type:l.literal(To.enum.quests),limit:l.number()}),hT=l.discriminatedUnion("type",[sT,iT,lT,fT,ST,wT,AT]),ja=l.object({sections:l.array(hT).refine(e=>(0,cd.default)(e,(0,ud.default)(e,"type")))}),hU=l.object({uuid:l.string(),data:l.array(cc)});var bT=ja.parse({sections:[{type:"shortcuts"},{type:"carousel"},{type:"tokens",sortBy:["rank","volume","price","price-change","market-cap"],sortByDefault:"rank",sortDirectionDefault:"asc",network:["solana:101","eip155:1","eip155:137","all_networks"],networkDefault:"solana:101",timeFrame:["1h","24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:100},{type:"sites",sortBy:["top","rank"],sortByDefault:"top",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"collections",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"learn",limit:3},{type:"quests",limit:3}]}),fd=()=>{let e=ve.getMultivariateAssignment("explore-config"),{data:t}=hu();return(0,Wa.useMemo)(()=>{let o;try{o=ja.parse(JSON.parse(e??""))}catch{o=bT}return t?o:{...o,sections:o.sections.filter(r=>r.type!=="quests")}},[e,t])},Ya=()=>{let e=fd();return(0,Wa.useMemo)(()=>{let t=[];for(let o of e.sections)(o.type==="collections"||o.type==="tokens"||o.type==="sites"||o.type==="learn"||o.type==="quests")&&t.push(o);return t},[e.sections])};i();a();i();a();var TT=e=>`/dapps/v1?domains=${e.join(",")}`,FT=async e=>{let t=await _.api().get(TT(e));if(t.status===500)throw new Error("Error fetching recommended dapps from registry");return(await t.data).data},IT=e=>{let t=j();return D({queryKey:["dapps",e],queryFn:async()=>{try{let r=await FT(e);return An.batch(()=>{for(let n of r??[]){let s=ts(n.domain),p=t.getQueryState(s);t.setQueryData(s,()=>n??p?.data??null)}}),r}catch(r){throw L.captureError(r,"dappRegistry"),r}},gcTime:U({days:1}),staleTime:U({days:1})})};i();a();var yd=C(R());i();a();var gd=async(e,t,o,r)=>{let n=o?.addresses.map(rt)??[],s=o?.type==="seed"?o.seedIdentifier:null,p=o?.identifier??"",u=new URLSearchParams({accountId:p,appVersion:ce,deviceId:r,limit:"6",locale:t,platform:Se,timeframe:"24h"});e.forEach(g=>{u.append("chainIds[]",g)}),s&&u.append("rootId",s),n.forEach(g=>{u.append("selectedAccountAddresses[]",g.toString())});let c=await _.api().get("/explore/v1/featured-dapps",{params:u});if(!se(c))throw new Error("Failed to fetch sites");return await c.data};var vT=U({minutes:10}),ET=U({minutes:10}),xT=()=>{let{data:e}=re(),t=(0,yd.useMemo)(()=>e?Ca(e):[],[e]),o=be(N.language)??"en",r=K(),n=async()=>{if(!e)throw new Error("No account found");let s=await r.getDeviceId();return gd(t,o,e,s)};return D({queryKey:Fe.recommendedSites(t,o),enabled:!!e,queryFn:n,gcTime:vT,staleTime:ET})};i();a();var CT=C(R());i();a();var F_=U({minutes:10}),I_=U({minutes:10});i();a();i();a();var Sd=async({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:r,locale:n,limit:s,rankAlgo:p})=>{let u=new URLSearchParams({timeFrame:o,sortBy:e,sortDirection:t,limit:s.toString(),rankAlgo:p,platform:Se,locale:n,appVersion:ce});r.forEach(g=>{u.append("chainIds[]",g)});let c=await _.api().get("/explore/v2/trending-tokens",{params:u});if(!se(c))throw new Error("Failed to fetch tokens");let m=md.safeParse(c.data);if(!m.success)throw new Error("Failed to parse tokens");return m.data};i();a();var dr=(e,t)=>{let o=xn(),n=Ya().find(p=>p.type===t),s=[];return n&&n?.type!=="learn"&&n?.type!=="quests"?n.network.forEach(p=>{p!==Wr&&o.includes(p)&&s.push(p)}):s=o,e!==Wr&&!s.includes(e)?[]:e===Wr?s:[e]};var RT=U({minutes:1}),PT=U({minutes:1}),kT=({sortBy:e,sortDirection:t,timeFrame:o,network:r,limit:n,rankAlgo:s})=>{let{data:p}=re(),u=dr(r,"tokens"),c=be(N.language)??"en";return D({queryKey:Fe.tokensV2({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:u,locale:c,limit:n,rankAlgo:s}),enabled:!!p,async queryFn(){if(!p)throw new Error("No account found");return Sd({sortBy:e,sortDirection:t,timeFrame:o,networkIDs:u,locale:c,limit:n,rankAlgo:s})},gcTime:PT,staleTime:RT,retry:3})};i();a();i();a();var DT={rank:"trending",top:"top"},wd=async({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,account:s,deviceId:p,rankAlgo:u})=>{let c=s?.addresses.map(rt)??[],m=s?.type==="seed"?s.seedIdentifier:null,g=s?.identifier??"",f=new URLSearchParams({accountId:g,appVersion:ce,deviceId:p,limit:r.toString(),locale:n,platform:Se,rankAlgo:u,rankBy:DT[e],timeframe:t});o.forEach(y=>{f.append("chainIds[]",y)}),m&&f.append("rootId",m),c.forEach(y=>{f.append("selectedAccountAddresses[]",y.toString())});let S=await _.api().get("/explore/v1/trending-dapps",{params:f});if(!se(S))throw new Error("Failed to fetch sites");let w=ld.safeParse(S.data);if(!w.success)throw new Error("Failed to parse sites");return w.data};var NT=U({minutes:10}),BT=U({minutes:10}),LT=({sortBy:e,timeFrame:t,network:o,limit:r,rankAlgo:n})=>{let{data:s}=re(),p=dr(o,"sites"),u=be(N.language)??"en",c=K();return D({queryKey:Fe.sitesV2({sortBy:e,timeFrame:t,networkIDs:p,locale:u,limit:r,rankAlgo:n}),enabled:!!s,async queryFn(){if(!s)throw new Error("No account found");let m=await c.getDeviceId();return wd({sortBy:e,timeFrame:t,networkIDs:p,locale:u,account:s,deviceId:m,limit:r,rankAlgo:n})},gcTime:BT,staleTime:NT,retry:3})};i();a();i();a();var UT={rank:"trending",top:"volume"},_T=e=>e.floorPrices.length>0&&e.marketplacePages.length>0,Ad=async({sortBy:e,timeFrame:t,networkIDs:o,limit:r,locale:n,account:s,deviceId:p,rankAlgo:u})=>{let c=s?.addresses.map(rt)??[],m=s?.type==="seed"?s.seedIdentifier:null,g=s?.identifier??"",f=new URLSearchParams({accountId:g,appVersion:ce,deviceId:p,limit:r.toString(),locale:n,platform:Se,rankAlgo:u,rankBy:UT[e],timeframe:t});o.forEach(y=>{f.append("chainIds[]",y.toString())}),m&&f.append("rootId",m),c.forEach(y=>{f.append("selectedAccountAddresses[]",y.toString())});let S=await _.api().get("/explore/v1/trending-collections",{params:f});if(!se(S))throw new Error("Failed to fetch collections");let w=dd.safeParse(S.data);if(!w.success)throw new Error("Failed to parse collections");return{...w.data,data:w.data.data.filter(_T)}};var OT=U({minutes:10}),MT=U({minutes:10}),QT=({sortBy:e,timeFrame:t,network:o,limit:r,rankAlgo:n})=>{let{data:s}=re(),p=dr(o,"collections"),u=be(N.language)??"en",c=K();return D({queryKey:Fe.collectionsV2({sortBy:e,timeFrame:t,networkIDs:p,locale:u,limit:r,rankAlgo:n}),enabled:!!s,async queryFn(){if(!s)throw new Error("No account found");let m=await c.getDeviceId();return Ad({sortBy:e,timeFrame:t,networkIDs:p,locale:u,account:s,deviceId:m,limit:r,rankAlgo:n})},gcTime:MT,staleTime:OT,retry:3})};i();a();i();a();var hd=async(e,t)=>{let o=new URLSearchParams({appVersion:ce,locale:t,platform:Se});e.forEach(s=>{o.append("chainIds[]",s)});let r=await _.api().get("/explore/v1/learn-grid",{params:o});if(!se(r))throw new Error("Failed to fetch learn grid");return r.data};var qT=U({minutes:10}),GT=U({minutes:10}),VT=()=>{let e=xn(),t=be(N.language)??"en";return D({queryKey:Fe.learn(e,t),enabled:e.length>0,async queryFn(){return hd(e,t)},gcTime:GT,staleTime:qT})};i();a();i();a();var wO={location:0,distance:50,threshold:.2,shouldSort:!0,keys:[{name:"token.name",weight:.4},{name:"token.symbol",weight:.4},{name:"token.caip19.chainId",weight:.2}]};var bd=30,AO=6,hO=29850,bO=5,Td=["100","500","1000"];i();a();i();a();i();a();var KT=l.object({name:l.string().nullish().default(null),symbol:l.string().nullish().default(null),decimals:l.number(),caip19:qe,logoURI:l.string().nullish().default(null)}),HT=l.object({token:KT,quickSelectDenominations:l.array(l.string()).optional(),addressType:Pc.optional()}),CO=l.object({groups:l.array(l.object({groupName:l.string(),tokens:l.array(HT)}))}),Fd=(s=>(s.CARD="CARD",s.MOBILE_WALLET="MOBILE_WALLET",s.BANK_TRANSFER="BANK_TRANSFER",s.EXCHANGE="EXCHANGE",s.LOCAL="LOCAL",s))(Fd||{}),Xa=l.object({id:l.string(),type:l.nativeEnum(Fd),name:l.string(),estimatedArrival:l.string(),assets:l.object({icon:l.string(),roundIcon:l.string()}),description:l.string().optional()}),RO=l.object({paymentMethods:l.array(Xa)}),Id=l.object({id:l.string(),name:l.string(),tag:l.string(),logo:l.string(),quote:l.object({displaySourceAmount:l.string(),displayDestinationAmount:l.string(),displayFee:l.string()}).optional()}),PO=l.object({providers:l.array(Id),paymentMethod:Xa,token:qe}),kO=l.object({provider:Id,paymentMethod:Xa}),DO=l.object({url:l.string()}),ut=class extends Error{constructor(t){super(t),this.name="FiatRampError"}};var vd=new ut("Failed to get FiatRampTokens"),Ed=async(e,t,o)=>{try{let r=await _.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/tokens",t);if(!se(r))throw vd;return r.data}catch{throw vd}};i();a();var gs=e=>e.sort((t,o)=>v.compareNetworkID(t.token.caip19.chainId,o.token.caip19.chainId));i();a();var ys="@phantom/fiat-ramp",Ss=`${ys}:fungibles`,$T=`${ys}:payment-methods`,zT=`${ys}:providers`,jT=`${ys}:recommended-quote`,Wt={fiatRampTokens(e,t,o){return[Ss,e,t,o]},fiatRampPaymentMethods(e,t,o){return[$T,e,t,o]},fiatRampProviders(e,t,o){return[zT,e,t,o]},fiatRampRecommendedQuote(e,t,o){return[jT,e,t,o]}};var WT=U({days:7}),YT=U({hours:1}),Ja=(e,t,o,r=!0,n)=>{let{data:s}=re(),p=Array.from(new Set(s?.addresses?.map(w=>w.networkID))),u=Array.from(new Set(s?.addresses?.map(w=>w.addressType))),c={chainIDs:p},m={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:g}=De(),f=g?.userID,S=g?.accessToken;return D({queryKey:Wt.fiatRampTokens(m,c,f),queryFn:()=>Ed(m,c,S),gcTime:WT,staleTime:YT,enabled:r&&p.length>0,select:w=>{let y={...w,groups:w.groups.map(A=>({...A,tokens:gs(A.tokens.filter(b=>b.addressType?u.includes(b.addressType):!0))}))};return n?n(y):y}})};i();a();i();a();var xd=e=>{let t=e?.groups.flatMap(o=>o.tokens)??[];return gs(t)};var Za=(e,t,o,r=!0)=>Ja(e,t,o,r,xd);i();a();i();a();i();a();var Cd=new ut("Failed to get FiatRampPaymentMethods"),Rd=async(e,t,o)=>{try{let r=await _.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/payment_methods",t);if(!se(r))throw Cd;return r.data}catch{throw Cd}};var XT=U({days:7}),JT=U({hours:1}),ZT=(e,t,o,r)=>{let n={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:s}=De(),p=s?.userID,u=s?.accessToken;return D({queryKey:Wt.fiatRampPaymentMethods(n,r,p),queryFn:()=>Rd(n,r,u),gcTime:XT,staleTime:JT})};i();a();i();a();var Pd=new ut("Failed to get FiatRampProviders"),kd=async(e,t,o)=>{try{let r=await _.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/providers",t);if(!se(r))throw Pd;return r.data}catch{throw Pd}};var eF=U({seconds:bd}),tF=U({hours:1}),oF=(e,t,o,r)=>{let n={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:s}=De(),p=s?.userID,u=s?.accessToken;return D({queryKey:Wt.fiatRampProviders(n,r,p),queryFn:()=>kd(n,r,u),gcTime:tF,staleTime:eF})};i();a();i();a();var Dd=new ut("Failed to get FiatRampRecommendedQuote"),Nd=async(e,t,o)=>{try{let r=await _.api().headers(e).bearer(o).post("/fiat_ramp/v2/onramp/recommended_quote",t);if(!se(r))throw Dd;return r.data}catch{throw Dd}};var rF=U({days:7}),nF=U({hours:1}),sF=(e,t,o,r,n=!0)=>{let s={"x-client-platform":e,"x-client-app-version":t,"x-client-locale":o},{data:p}=De(),u=p?.userID,c=p?.accessToken;return D({queryKey:Wt.fiatRampRecommendedQuote(s,r,u),queryFn:()=>Nd(s,r,c),gcTime:rF,staleTime:nF,enabled:n})};i();a();var iF=(e,t,o,r)=>{let{data:n}=re(),{data:s=[]}=Za(e,t,o),p=s.find(c=>ae(c.token.caip19)===r),u=n?.addresses.find(c=>p?.addressType?c.addressType===p.addressType&&c.networkID===p?.token.caip19.chainId:c.networkID===p?.token.caip19.chainId)?.address??"";return p?.token.caip19.chainId&&v.isEVMNetworkID(p.token.caip19.chainId)&&(u=u.toLowerCase()),{tokenToBuy:p,destinationAddress:u,quickSelectDenominations:p?.quickSelectDenominations||Td}};i();a();i();a();i();a();i();a();i();a();var ep=(y=>(y.Buy="Buy",y.Collectibles="Collectibles",y.ConnectHardwareWallet="Connect Hardware Wallet",y.ConvertToJito="Convert to Jito",y.Explore="Explore",y.Quests="Quests",y.MintCollectible="Mint Collectible",y.SocialLogin="Social Login",y.SettingsClaimUsername="Settings: Claim Username",y.SettingsImportSeedPhrase="Settings: Import Seed Phrase",y.SettingsNotificationPreferences="Settings: Notification Preferences",y.SettingsSecurityAndPrivacy="Settings: Security & Privacy",y.Swapper="Swapper",y.ExternalLink="External Link",y))(ep||{}),ws=class extends Error{constructor(){super(...arguments);this.message="Failed to set dismissed action banners to storage"}};var pF={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,WelcomeBase:1,AdditionalPermissions:1},cF={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,WelcomeBase:1,AdditionalPermissions:1},tp=e=>Mt?pF[e]:mc?cF[e]:-1;var op=1,Fo=".phantom-labs.settings.interstitials",fr=class{static async hasSeen(t,o){let r=await o.get(Fo);if(!r)return!1;let n=tp(t);return(r.interstitialsSeen[t]??0)>=n}static async setHasSeen(t,o){let r=await o.get(Fo),n=tp(t);await o.set(Fo,{version:op,interstitialsSeen:{...!!r&&r.interstitialsSeen,[t]:n}})}static async resetHasSeen(t,o){let r=await o.get(Fo);if(r)return o.set(Fo,{version:op,interstitialsSeen:{...r.interstitialsSeen,[t]:void 0}})}static async resetAllHasSeen(t){if(await t.get(Fo))return t.set(Fo,{version:op,interstitialsSeen:{}})}};i();a();var Xr="@phantom/interstitials",Yt=`${Xr}:action-banners`,Bd=`${Xr}:force-upgrade`,_e={actionBanners:(e,t)=>[Yt,{accountIdentifier:e,accessToken:t}],hasSeenInterstitial:e=>[`${Xr}:has-seen-interstitial`,{feature:e}],appLaunchTimes:()=>[`${Xr}:app-launch-times`],lastOnboardedAt:()=>[`${Xr}:last-onboarded-at`]};var rp=e=>{let t=Z(),o=_e.hasSeenInterstitial(e);return D({queryKey:o,queryFn:async()=>await fr.hasSeen(e,t)})};i();a();i();a();i();a();i();a();var np=async e=>await e.get("dismissedActionBanners")??[],Ld=async(e,t)=>{try{let o=await np(e);return o.includes(t)?void 0:e.set("dismissedActionBanners",[...o,t])}catch{throw new ws}};var ip=()=>{let e=Z(),{data:t}=D({queryKey:_e.appLaunchTimes(),queryFn:async()=>await e.get("appLaunchTimes")??[]});return t??[]};i();a();var ap=()=>{let e=Z(),{data:t}=D({queryKey:_e.lastOnboardedAt(),queryFn:async()=>await e.get("lastOnboardedAt")??-1});return t};var Ud=()=>{let e=ap(),t=ip();if(t.length<2)return!0;if(e!==void 0){let[o,r]=t;if(e<o&&e<r)return!1}return!0};var uF="Apple Pay",lF="Google Pay";function mF(e="ios"){let{t}=ot(),{mutateAsync:o}=Qc(),r=async()=>{await o({chainIDs:["base"]})},n=Ud(),s=e==="android"?lF:uF,p=[{title:t("interstitialBaseWelcomeItemTitle_1"),description:t("interstitialBaseWelcomeItemDescription_1",{paymentMethod:s})},{title:t("interstitialBaseWelcomeItemTitle_2"),description:t("interstitialBaseWelcomeItemDescription_2")},{title:t("interstitialBaseWelcomeItemTitle_3"),description:t("interstitialBaseWelcomeItemDescription_3")}],{data:u,isSuccess:c}=rp("WelcomeBase"),m=ve.isFeatureEnabled("enable-base"),g=ve.isFeatureEnabled("enable-base-default-on"),{data:f}=Oc(),S=f?.enabledChainIDs?.includes("base"),w=!g&&!n&&m&&S===!1&&c&&!u;return{title:t("interstitialBaseWelcomeTitle"),primaryText:t("commandEnableNow"),secondaryText:t("commandNotNow"),onPrimaryButtonPress:r,features:p,shouldShowModal:w}}i();a();i();a();i();a();i();a();var As=e=>{let t=[];for(let o in e.errors)Array.isArray(e.errors[o])&&t.push(e.errors[o].join(", "));return t.join(", ")};var Od=async({locale:e})=>{let t;try{let o=JSON.stringify({platform:Se,appVersion:ce,locale:e}),r=await _.api().headers({"Content-Type":"application/json"}).post(({apiEnv:s})=>`/banners/force_upgrade/${s}/v1`,o);if(r.status===400){let s=await r.data,p=As(s);throw new Error(p)}else if(r.status<200||r.status>299)throw new Error(`status code: ${r.status}, body: ${r.statusText}`);let n=r.data;return n?{...n}:_d}catch(o){return t===400&&o instanceof Error&&L.captureError(o,"actionBanner"),_d}},_d={forceUpgradeStatus:"noop"};var Md=async({locale:e})=>({...await Od({locale:e})});var dF=()=>D({queryKey:[Bd],queryFn:async()=>{let t=be(N.language)??"en";return Md({locale:t})},enabled:!!ce,staleTime:U({minutes:5})});i();a();i();a();var Qd=async e=>{await e.invalidateQueries({queryKey:[Yt]})};Nc(Qd);var qd=async(e,t,o)=>{await e.setQueryData(_e.hasSeenInterstitial(t),o)};var fF=e=>{let t=Z(),o=j();return ne({mutationFn:async()=>{await fr.setHasSeen(e,t),await qd(o,e,!0)}})};i();a();i();a();i();a();i();a();var Vd=async({accountID:e,deviceId:t,locale:o,rootId:r,selectedAccountAddresses:n,addresses:s,accessToken:p})=>{let u;try{let c={accountID:e,deviceId:t,locale:o,platform:Se,rootId:r,selectedAccountAddresses:n,version:ce,addresses:s},m=await _.api().headers({"Content-Type":"application/json"}).bearer(p).post(({apiEnv:f})=>`/banners/get_banners/${f}/v2`,c);if(m.status===400){let f=await m.data,S=As(f);throw new Error(S)}else if(m.status<200||m.status>299)throw new Error(`status code: ${m.status}, body: ${await m.statusText}`);let g=m.data;return g?{...g,banners:g.banners??[]}:Gd}catch(c){return u===400&&c instanceof Error&&L.captureError(c,"actionBanner"),Gd}},Gd={id:void 0,banners:[]};i();a();i();a();var pp=e=>e?Object.values(ep).includes(e):!1;i();a();var Kd=e=>{switch(e){case"Bottom Sheet":return Mt;case"Modal":return!0;default:return!1}};var Hd=e=>{let{bannerType:t,destinationType:o}=e;switch(t){case"Deep Link":return pp(o);case"Bottom Sheet":case"Modal":return Kd(t)&&pp(o);default:return!1}};var $d=async({accountID:e,deviceId:t,dismissedBanners:o,locale:r,rootId:n,selectedAccountAddresses:s,addresses:p,accessToken:u})=>{let c=await Vd({accountID:e,deviceId:t,locale:r,rootId:n,selectedAccountAddresses:s,addresses:p,accessToken:u});return{...c,banners:c.banners.filter(m=>Hd(m)&&!o.includes(m.id))}};var yF=U({minutes:1}),SF=()=>{let e=K(),t=Z(),{data:o,isLoading:r}=De(),{data:n}=Kc(_c),{data:s}=re(),p=async()=>{let u=n?.flatMap(w=>w.addresses.map(rt))??[],c=s?.type!=="readOnly"?s?.addresses.map(rt)??[]:[],m=s?.type==="seed"?s.seedIdentifier:null,g=await np(t),f=be(N.language)??"en",S=await e.getDeviceId();return $d({accountID:s?.identifier??"",deviceId:S,dismissedBanners:g,locale:f,rootId:m,selectedAccountAddresses:c,addresses:u,accessToken:o?.accessToken})};return D({queryKey:_e.actionBanners(s?.identifier,o?.accessToken),queryFn:p,enabled:!r&&!!s?.identifier,staleTime:yF})};i();a();var wF=()=>{let e=Z(),t=j();return ne({mutationFn:async({actionBannerId:r})=>{Ld(e,r),t.setQueriesData({queryKey:[Yt]},n=>{if(!n)return;let s=n.banners.filter(p=>p.id!==r);return{...n,banners:s}})}})};i();a();var AF=()=>{let e=Z(),t=j();return ne({mutationFn:async()=>{let o=Date.now(),n=[...(await e.get("appLaunchTimes")||[]).slice(-1),o];return e.set("appLaunchTimes",n)},onSuccess:()=>{t.invalidateQueries({queryKey:_e.appLaunchTimes()})}})};i();a();var hF=()=>{let e=Z(),t=j();return ne({mutationFn:()=>{let o=Date.now();return e.set("lastOnboardedAt",o)},onSuccess:()=>{t.invalidateQueries({queryKey:_e.lastOnboardedAt()})}})};i();a();i();a();var de={buyFungible:void 0,buyUsdValue:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmount:"",amountType:"sell",quoteResponse:void 0,selectedProviderIndex:0,gasEstimation:void 0,isFetchingGasEstimation:!1,maxGasEstimation:void 0,refuelEnabled:!1,hasNoRoutes:!1,isFetchingQuote:!1,error:null,searchQuery:"",numSearchResults:0,primaryCurrency:"crypto",uiSellAmountFiatInput:"",uiBuyAmountFungibleInput:"",uiBuyAmountFiatInput:"",canInputFiatSellAmount:!1,swapFilter:void 0},h=Ne(e=>({...de,resetQuote:()=>e({quoteResponse:de.quoteResponse,isFetchingQuote:de.isFetchingQuote,hasNoRoutes:de.hasNoRoutes,selectedProviderIndex:de.selectedProviderIndex,error:de.error,uiSellAmountFiatInput:de.uiSellAmountFiatInput}),resetSwapper:()=>e({quoteResponse:de.quoteResponse,gasEstimation:de.gasEstimation,isFetchingGasEstimation:de.isFetchingGasEstimation,maxGasEstimation:de.maxGasEstimation,error:de.error,sellAmount:"",uiSellAmount:"",uiBuyAmountFungibleInput:de.uiBuyAmountFungibleInput,swapFilter:de.swapFilter}),setBuyFungible:t=>e({buyFungible:t}),setBuyUsdValue:t=>e({buyUsdValue:t}),setHasNoRoutes:t=>e({hasNoRoutes:t}),setIsFetchingQuote:t=>e({isFetchingQuote:t}),setQuoteResponse:t=>e({quoteResponse:t,hasNoRoutes:!1}),setSelectedProviderIndex:t=>e({selectedProviderIndex:t}),setGasEstimation:t=>e({gasEstimation:t}),setIsFetchingGasEstimation:t=>e({isFetchingGasEstimation:t}),setMaxGasEstimation:t=>e({maxGasEstimation:t}),setRefuelEnabled:t=>e({refuelEnabled:t}),setSellAmount:t=>e({sellAmount:t}),setAmountType:t=>e({amountType:t}),setSellUsdValue:t=>e({sellUsdValue:t}),setSellFungible:t=>e({sellFungible:t}),setUiSellAmount:t=>e({uiSellAmount:t}),setError:t=>e({error:t}),setSearchQuery:t=>e({searchQuery:t}),setNumSearchResults:t=>e({numSearchResults:t}),setPrimaryCurrency:t=>e({primaryCurrency:t}),setUiSellAmountFiatInput:t=>e({uiSellAmountFiatInput:t}),setUiBuyAmountFungibleInput:t=>e({uiBuyAmountFungibleInput:t}),setUiBuyAmountFiatInput:t=>e({uiBuyAmountFiatInput:t}),setCanInputFiatSellAmount:t=>e({canInputFiatSellAmount:t}),setSwapFilter:t=>e({swapFilter:t}),switchTokensForSell:()=>{e(t=>{let o=t.sellFungible??t.buyFungible,r=t.buyFungible??t.sellFungible,n=t.uiBuyAmountFungibleInput,s=t.uiBuyAmountFiatInput;return{sellFungible:r,buyFungible:o,uiSellAmount:n,uiSellAmountFiatInput:s,uiBuyAmountFungibleInput:de.uiBuyAmountFiatInput,uiBuyAmountFiatInput:de.uiBuyAmountFiatInput,sellAmount:n,swapFilter:void 0}})},switchTokensForBuy:()=>{e(t=>{let o=t.sellFungible??t.buyFungible,r=t.buyFungible??t.sellFungible,n=t.uiSellAmount,s=t.uiSellAmountFiatInput;return{sellFungible:r,buyFungible:o,uiSellAmount:de.uiSellAmount,uiSellAmountFiatInput:de.uiSellAmountFiatInput,uiBuyAmountFungibleInput:n,uiBuyAmountFiatInput:s,sellAmount:n,swapFilter:void 0}})},resetUiAmounts:()=>e({uiSellAmount:de.uiSellAmount,uiSellAmountFiatInput:de.uiSellAmountFiatInput,uiBuyAmountFungibleInput:de.uiBuyAmountFungibleInput,uiBuyAmountFiatInput:de.uiBuyAmountFiatInput,sellAmount:de.sellAmount})}));i();a();var zd=C(R());function q(){let e=h(u=>u.quoteResponse),t=h(u=>u.hasNoRoutes),o=h(u=>u.selectedProviderIndex),r=h(u=>u.isFetchingQuote),n=(0,zd.useMemo)(()=>e?e.quotes:[],[e]),s=n.length>0?n[o]:void 0;return{bestBuyAmount:n[0]?.buyAmount??"",currentQuote:s,hasNoRoutes:t,quoteResponse:e,quotes:n,selectedProviderIndex:o,isFetchingQuote:r}}i();a();var Wd=C(R());i();a();i();a();var cp=(n=>(n[n.Always=1/0]="Always",n[n.Short=U({days:1})]="Short",n[n.Medium=U({days:3})]="Medium",n[n.Long=U({days:7})]="Long",n))(cp||{}),jd=(s=>(s[s.Immediate=0]="Immediate",s[s.Short=U({minutes:1})]="Short",s[s.Medium=U({minutes:2.5})]="Medium",s[s.Long=U({minutes:60})]="Long",s[s.Never=1/0]="Never",s))(jd||{}),Jr=(r=>(r[r.Short=U({seconds:20})]="Short",r[r.Medium=U({minutes:2.5})]="Medium",r[r.Long=U({minutes:5})]="Long",r))(Jr||{});var bF=l.object({swapper:l.number(),review:l.number().nullish().default(null)}),hs={swapper:Jr.Short,review:null},Xt=()=>{let e=ve.getMultivariateAssignment("swapper-poll-interval-json");if(!e)return hs;try{let t=JSON.parse(e);return bF.parse(t)}catch{return hs}};var Ye=()=>{let e=Zr(n=>n.intervalMs),t=Zr(n=>n.state),o=Zr(n=>n.setState),r=(0,Wd.useCallback)(n=>{o("resumed",n??Yd())},[o]);return{state:t,pause:()=>o("paused"),resume:r,intervalMs:e}},Io=e=>{Zr.getState().setState("resumed",e??Yd())},en=()=>{Zr.getState().setState("paused")},Yd=()=>Xt().swapper,Zr=Ne(e=>({state:"resumed",intervalMs:hs.swapper,setState(t,o){e(o?{state:t,intervalMs:o}:{state:t})}}));i();a();var Sf=C(R());i();a();i();a();i();a();i();a();var TF=e=>{let t=Z(),o=K(),{data:r,isPending:n}=D({gcTime:0,queryKey:["originIsBlocklisted",e],queryFn:async()=>{let{result:s}=await Ui(t,o,e);return s}});return e===void 0?{isLoading:!1,originIsBlocklisted:!1}:{isLoading:n,originIsBlocklisted:r??!1}};i();a();var up=C(R());i();a();var tn=class{constructor(t){this.onScannedMessageByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"message",status:"success"}}})};this.onFailedScannedMessageByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"message",status:"error"}}})};this.onScannedTransactionByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"transaction",status:"success"}}})};this.onFailedScannedTransactionByUser=t=>{this.#e.capture("simulation",{data:{simulation:{...t,type:"transaction",status:"error"}}})};this.#e=t}#e};function FF(e,t){let{data:o}=re(),{params:r,networkID:n}=e,[s,p]=(0,up.useState)(null),u=["scan-message",{url:e.url,message:r.message}],c=o?.addresses.find(y=>y.networkID===n)?.address,m=be(N.language)??"en",g=K(),f=new tn(g),S=Jd(),w=D({queryKey:u,queryFn:async()=>{try{let y=await _i(m,await g.getDeviceId(),{...e,userAccount:c});return p(null),f.onScannedMessageByUser({networkId:n,warnings:y.warnings.map(A=>A.severity),shouldBlock:!!y.block,errorCode:y.error??""}),y}catch(y){p(y),f.onFailedScannedMessageByUser({networkId:n,url:e.url}),L.addBreadcrumb("simulation",`networkID: ${n}, url: ${e.url}, type: message`,"info"),L.captureError(w.error,"simulation")}},enabled:!!c&&!!e.url&&!!r.message&&!t?.disabled,refetchInterval:t?.disableRefetch?!1:S,staleTime:1e3*10,...Ri()});return{isFetched:w.isFetched,isFetching:w.isFetching,data:w.data,isLoading:w.isPending&&!t?.disabled,isError:w.isError||!!s,error:w.error||s}}function on(e,t){let{params:o}=e,[r,n]=(0,up.useState)(null),s=K(),p=["scan-transaction",e.networkID,e.url,o?o.transactions??o.transaction:""],u=Jd(),c=!1;v.isEVMNetworkID(e.networkID)||v.isSolanaNetworkID(e.networkID)?c=!!o&&o.transactions.length>0&&!!e.userAccount:v.isBitcoinNetworkID(e.networkID)&&(c=!!o&&!!o.transaction&&!!o.userAddresses&&o.userAddresses.length>0);let m=be(N.language)??"en",g=new tn(s),f=D({queryKey:p,queryFn:async()=>{try{let S=await Oi(m,await s.getDeviceId(),e);return g.onScannedTransactionByUser({networkId:e.networkID,warnings:S.warnings.map(w=>w.severity),shouldBlock:!!S.block,errorCode:S.error??""}),n(null),t?.onSettled?.(S,void 0),S}catch(S){g.onFailedScannedTransactionByUser({networkId:e.networkID,url:e.url}),L.addBreadcrumb("simulation",`networkID: ${e.networkID}, url: ${e.url}, type: transaction`,"info"),n(S),t?.onSettled?.(void 0,S),L.captureError(S,"simulation")}},enabled:c&&!t?.disabled,refetchInterval:t?.disableRefetch?!1:u,staleTime:1e3*10,...Ri()});return{isFetched:f.isFetched,isFetching:f.isFetching,data:f.data,isLoading:f.isPending&&!t?.disabled,isError:f.isError||!!r,error:f.error||r}}var Xd=5e3;function Jd(){let e=ve.getMultivariateAssignment("transactions-simulation-interval-ms");if(!e)return Xd;let t=parseInt(e,10);return Number.isNaN(t)?Xd:t}var nn=C(R());i();a();i();a();i();a();var tf=l.object({name:l.string(),message:l.string()}),of=l.object({chainId:qt,name:l.string(),symbol:l.string(),decimals:l.number(),logoURI:l.optional(l.string()),includesBridge:l.optional(l.boolean())}),IF=of.extend({address:l.string(),resourceType:l.literal("address")}),vF=of.extend({slip44:l.string(),resourceType:l.literal("nativeToken")}),EF=l.union([IF,vF]),xF=l.enum(["network","phantom"]),CF=l.object({name:l.string(),percentage:l.number(),amount:l.number(),type:xF}),RF=l.object({name:l.string(),proportion:l.string()}),rf=l.object({sellAmount:l.string(),buyAmount:l.string()}),nf=rf.extend({priceImpact:l.number(),sources:l.array(RF),fees:l.array(CF)}),lp=nf.extend({transactionData:l.array(l.string()),slippageTolerance:l.optional(l.number())}),mp=nf.extend({allowanceTarget:l.string(),exchangeAddress:l.string(),gas:l.number(),value:l.string(),transactionData:l.string(),slippageTolerance:l.optional(l.number())}),Zd=l.object({name:l.string(),amount:l.string(),token:qe,percentage:l.string(),included:l.boolean(),amountUSD:l.optional(l.string())}),PF=l.object({name:l.string(),key:l.string(),logoURI:l.string()}),sf=l.object({name:l.string(),symbol:l.string()}),kF=l.object({transactionData:l.string(),buyToken:qe,sellToken:qe,nonIncludedNonGasFees:l.string(),feeCosts:l.array(Zd),chainId:qt,tool:PF,value:l.optional(l.string()),allowanceTarget:l.optional(l.string()),approvalMetadata:l.optional(sf),approvalExactAmount:l.optional(l.string()),exchangeAddress:l.optional(l.string()),gasCosts:l.optional(l.array(l.number())),includedFeeCosts:l.optional(l.array(Zd))}),dp=rf.extend({executionDuration:l.number(),tags:l.array(l.string()),steps:l.array(kF),refuelAmount:l.optional(l.string())}),DF=l.union([lp,mp,dp]),fp=l.enum(["solana","eip155","xchain"]),gp=l.object({type:fp,taker:qe,buyToken:qe,sellToken:qe,slippageTolerance:l.number(),simulationTolerance:l.optional(l.number()),gasBuffer:l.optional(l.number()),quotes:l.array(DF)}),NF=l.enum(["swap-approval","swap","bridge-approval","bridge"]),BF=l.enum(["swap","bridge"]),af=l.object({sellToken:qe,buyToken:qe,approvalMetadata:l.optional(sf)}),LF=l.object({type:l.literal("solana"),transactions:l.array(l.string()),transactionTypes:l.array(BF),transactionPairs:l.optional(l.array(af))}),UF=l.object({type:l.literal("evm"),transactions:l.array(Qo),transactionTypes:l.array(NF),transactionPairs:l.optional(l.array(af))}),_V=l.union([LF,UF]);var yp=l.object({name:l.string(),amount:l.string()}).strict(),bs=l.object({name:l.string(),fee:l.string(),amount:l.string(),time:l.object({text:l.string(),isFast:l.boolean()}),logoURI:l.string()}),OV=l.union([yp,bs]);var ef=l.object({token:EF,owner:l.string()}),pf=l.object({sell:ef,buy:ef});function pe(e){return dp.safeParse(e).success}function Sp(e){return lp.safeParse(e).success}function vo(e){return mp.safeParse(e).success}function Jt(e){return Sp(e)||vo(e)}i();a();var Eo="swapper";var cf=[Eo,"quotes"],fe={quotesScope:()=>cf,quotes:({sellTokenCaip19:e,buyTokenCaip19:t,taker:o,amountValue:r,amountType:n,slippageTolerance:s,refuelEnabled:p,takerDestination:u,enableAutoSlippage:c})=>[...cf,{sellToken:e,buyToken:t,taker:o,takerDestination:u,amountValue:r,amountType:n,slippageTolerance:s,refuelEnabled:p,enableAutoSlippage:c}],transactions:e=>[Eo,"transactions",e],slippageTolerance:()=>[Eo,"slippageTolerance"],lastSubmittedPairs:()=>[Eo,"lastSubmittedPairs"],lastSelectedTokens:()=>[Eo,"lastSelectedTokens"],slippageSettings:()=>[Eo,"slippageSettings"],hasViewedAutoSlippageOptIn:()=>[Eo,"hasViewedAutoSlippageOptIn"]};var uf=async({callerAddress:e,contractAddress:t,networkId:o,sellAmount:r,allowanceTarget:n,approvalExactAmount:s,exchangeAddress:p,value:u,transactionData:c,type:m})=>{let g=[],f=[];if(t&&(await eu({callerAddress:e,spender:n,networkId:o,contractAddress:t})).lt(s??r.toString())){let y=await tu({callerAddress:e,spender:n,networkId:o,contractAddress:t,exactAmount:s});g.push(y),f.push(`${m}-approval`)}let S=Qo.parse({type:"0x2",from:e,data:c,chainId:v.getEVMNetworkIDValue(o),to:p,...u==="0"?{}:{value:`0x${new k(u).toString(16)}`}});return g.push(S),f.push(m),{transactions:g,transactionTypes:f}},_F=async({networkId:e,callerAddress:t,quote:o})=>{let{sellAmount:r,steps:n}=o,s=[],p=[],u=[];for(let c of n){let{allowanceTarget:m,exchangeAddress:g,value:f,transactionData:S,sellToken:w,buyToken:y,approvalMetadata:A}=c,b=w.resourceType==="address"?w.address:null,F=v.compareNetworkID(w.chainId,y.chainId)===0?"swap":"bridge";if(!m||!g||!S||!f)throw new Error("Missing bridge step data for EVM bridge quote.");let I=await uf({callerAddress:t,contractAddress:b,networkId:e,sellAmount:r,allowanceTarget:m,approvalExactAmount:c.approvalExactAmount,exchangeAddress:g,value:f,transactionData:S,type:F});s.push(...I.transactions),p.push(...I.transactionTypes),u.push({sellToken:w,buyToken:y,approvalMetadata:A}),I.transactionTypes.length==2&&I.transactionTypes.find(E=>E.includes("approval"))&&u.push({sellToken:w,buyToken:y,approvalMetadata:A})}return{type:"evm",transactions:s,transactionTypes:p,transactionPairs:u}},OF=async({quote:e,connection:t})=>{let o=[],r=[],n=[];for(let s of e.steps){let{transactionData:p,sellToken:u,buyToken:c}=s,m=v.compareNetworkID(u.chainId,c.chainId)===0?"swap":"bridge",g=await lf(p,t);o.push(wi.serialize(g).transaction),r.push(m),n.push({sellToken:u,buyToken:c})}return{type:"solana",transactions:o,transactionTypes:r,transactionPairs:n}},MF=async({networkId:e,callerAddress:t,quote:o,sellFungible:r})=>{let n=r?.data.tokenAddress??"",{allowanceTarget:s,exchangeAddress:p,sellAmount:u,value:c}=o;return{type:"evm",...await uf({callerAddress:t,contractAddress:n,networkId:e,sellAmount:u,allowanceTarget:s,exchangeAddress:p,value:c,transactionData:o.transactionData,type:"swap"})}},lf=async(e,t)=>{let o=qo(e,"bs58");return await Jc(o,{connection:t,transactionType:"Swap"})},QF=async({quote:e,connection:t})=>{let o=e.transactionData.map(p=>lf(p,t)),n=(await Promise.all(o)).map(p=>wi.serialize(p).transaction);return{type:"solana",transactionTypes:n.map(()=>"swap"),transactions:n}},Zt=({callerAddress:e,sellFungible:t,quote:o})=>{let{connection:r}=zo(),n=fe.transactions(o);return D({queryKey:n,enabled:!!o&&!!t,gcTime:0,staleTime:0,refetchInterval:Jr.Short,async queryFn(){try{if(!o)throw new Error("Missing quote");if(!t)throw new Error("Missing sell token");let s=t.data.chain.id;if(Jt(o)){if(v.isEVMNetworkID(s)&&vo(o))return await MF({networkId:s,callerAddress:e,quote:o,sellFungible:t});if(v.isSolanaNetworkID(s)&&Sp(o))return QF({quote:o,connection:r});throw new Error(`Single network swap quote not supported for network ID ${s}`)}if(pe(o)){if(v.isEVMNetworkID(s))return await _F({networkId:s,callerAddress:e,quote:o});if(v.isSolanaNetworkID(s))return await OF({quote:o,connection:r});throw new Error(`Bridge quote not supported for network ID ${s}`)}throw new Error("Swap quote type not supported")}catch(s){throw s instanceof Error&&L.captureError(s,"swapper"),s}}})};i();a();i();a();i();a();i();a();i();a();i();a();i();a();var Ts=e=>e.steps.map(t=>t.tool);var lt=e=>e?pe(e)?Ts(e):e?.sources??[]:[];i();a();function Oe(e){let t=e.reduce((o,r)=>o.add(r.name),new Set);return Array.from(t).join(" + ")}var qF=10,GF=Ne(e=>({transitions:[],addTransition:(t,o)=>e(r=>{let n=VF(o,t);return n?{transitions:[n,...r.transitions].slice(0,qF)}:r})}));function mf(e,t,o){GF.getState().addTransition(t,o)}function VF(e,t){switch(t.type){case"idle":return;case"fetchingQuote":return;case"quote":return{sell:mt(t.response,t.sell,"sell"),buy:mt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:rn(t.quote),slippage:t.response.slippageTolerance,stateType:t.type,eventType:e.type,timestamp:Date.now()};case"simulationRequestErrored":return{sell:mt(t.response,t.sell,"sell"),buy:mt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:rn(t.quote),slippage:t.response.slippageTolerance,stateType:t.type,eventType:e.type,error:t.error,quoteTransactionData:Fs(t.quote),timestamp:Date.now()};case"simulated":return;case"simulationFailed":return{sell:mt(t.response,t.sell,"sell"),buy:mt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:rn(t.quote),slippage:t.response.slippageTolerance,simulationError:t.simulationError,stateType:t.type,eventType:e.type,simulationWarning:t.scannedTransactionResult.warnings,quoteTransactionData:Fs(t.quote),simulationHumanReadableError:t.scannedTransactionResult.simulationError?.humanReadableError,timestamp:Date.now()};case"transactionSubmissionFailed":return{sell:mt(t.response,t.sell,"sell"),buy:mt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:rn(t.quote),slippage:t.response.slippageTolerance,error:t.error,stateType:t.type,eventType:e.type,quoteTransactionData:Fs(t.quote),timestamp:Date.now()};case"transactionNotConfirmed":return{sell:mt(t.response,t.sell,"sell"),buy:mt(t.response,t.buy,"buy"),sellAmount:t.quote.sellAmount,buyAmount:t.quote.buyAmount,provider:rn(t.quote),slippage:t.response.slippageTolerance,stateType:t.type,eventType:e.type,quoteTransactionData:Fs(t.quote),timestamp:Date.now()};default:return}}var rn=e=>{let t=lt(e);return Oe(t)},mt=(e,t,o)=>{switch(o){case"sell":return{caip19:e.sellToken,symbol:t.data.symbol??void 0};case"buy":return{caip19:e.buyToken,symbol:t.data.symbol??void 0}}},Fs=e=>{if(!pe(e))return e.transactionData};var vs=class{onStateChange(t,o,r){mf(o,r,t)}};i();a();var Es=class{constructor(t){this.listeners=t}transition(t,o){try{let r=this.detectNextState(t,o);return this.listeners.forEach(n=>n.onStateChange(o,t,r)),r}catch{return t}}detectNextState(t,o){switch(o.type){case"quoteRequestStarted":return{type:"fetchingQuote",buy:o.buy,sell:o.sell,amount:o.amount};case"quoteResponseReceived":switch(t.type){case"fetchingQuote":case"quote":case"simulated":case"simulationRequestErrored":case"transactionSubmissionFailed":case"transactionNotConfirmed":let r=o.response.quotes[o.quoteIndex];if(!r)throw new Error("Quote index out of bounds");return{type:"quote",response:o.response,buy:t.buy,sell:t.sell,quote:r};default:throw new Error("Can't transition from this state")}case"quoteSelected":switch(t.type){case"quote":let r=t.response.quotes[o.quoteIndex];if(!r)throw new Error("Quote index out of bounds");return{type:"quote",quote:r,buy:t.buy,sell:t.sell,response:t.response};default:throw new Error("Can only transition to QuoteChanged from Quote")}case"simulationResponseReceived":switch(t.type){case"quote":return o.scannedTransactionResult.error?{type:"simulationFailed",quote:t.quote,buy:t.buy,sell:t.sell,response:t.response,scannedTransactionResult:o.scannedTransactionResult,simulationError:o.scannedTransactionResult.error}:{type:"simulated",quote:t.quote,buy:t.buy,sell:t.sell,response:t.response,scannedTransactionResult:o.scannedTransactionResult};default:throw new Error("Can only transition to Simulated from Simulating")}case"simulationRequestError":switch(t.type){case"quote":return{type:"simulationRequestErrored",buy:t.buy,sell:t.sell,quote:t.quote,response:t.response,error:o.error};default:throw new Error("Can only transition to SimulationRequestErrored from Simulating")}case"transactionSubmissionFailed":switch(t.type){case"simulated":case"simulationFailed":return{type:"transactionSubmissionFailed",quote:t.quote,buy:t.buy,sell:t.sell,response:t.response,scannedTransactionResult:t.scannedTransactionResult,error:o.error};default:throw new Error("Can only transition to SwapSubmitFailed from SubmittingSwap")}case"transactionConfirmationFailed":switch(t.type){case"simulated":return{type:"transactionNotConfirmed",quote:t.quote,buy:t.buy,sell:t.sell,txReceipt:o.txReceipt,response:t.response,scannedTransactionResult:t.scannedTransactionResult,error:o.error};default:throw new Error("Can only transition to TransactionNotConfirmed from ConfirmingTransaction")}}}};var KF=new Es(new Set([new vs])),df=Ne(e=>({state:{type:"idle"},transition:t=>{e(o=>{let r=o.state;return{state:KF.transition(r,t)}})}}));var Xe=()=>{let e=df(o=>o.state),t=df(o=>o.transition);return{state:e,transition:t}};i();a();var HF="swap-priority-fee",$F=async(e,t,o)=>{let r=qo(e,"bs58");return await uc(r,o),{networkFeeEstimation:await ru(t,[r.message])}};function ff({swapTransactions:e,chainId:t,solanaConnection:o}){let r=[HF,e],n=async()=>{if(!e)throw new Error("No swap transactions");if(e.type!=="solana")throw new Error("Trying estimate network fee for non-solana txs");if(!t)throw new Error("Trying to execute swap with no chain id.");try{let p=e.transactions.map(m=>$F(m,t,o));return(await Promise.all(p)).map(m=>m.networkFeeEstimation.value)}catch{return[0]}},s=!!e&&e.transactions.length>0&&e.type==="solana"&&!!t;return D({queryKey:r,queryFn:n,enabled:s})}i();a();var zF=e=>{switch(e){case z.Ethereum.Mainnet:case z.Ethereum.Sepolia:return 8e5;case z.Polygon.Mainnet:case z.Polygon.Amoy:return 5e5;case z.Base.Mainnet:case z.Base.Sepolia:return 5e5;default:return 0}},jF=(e,t)=>e.steps.flatMap(r=>r.gasCosts??[zF(t)]),WF=1.3,gf={estimateGas:({evmGasEstimation:e,currentQuote:t,scanResult:o,networkID:r,includeGasBuffer:n,gasBuffer:s})=>{let{maxFeePerGas:p,maxPriorityFeePerGas:u}=e,c=vo(t)?[t.gas]:jF(t,r),m=o?.advancedDetails?.gas;return o?.advancedDetails?.gasLimit>0&&(c=m),c.map(f=>({maxFeePerGas:p,maxPriorityFeePerGas:u,networkID:r,gasLimit:new te(f).multipliedBy(n?s??WF:1).integerValue(te.ROUND_CEIL)}))}};i();a();var yf={estimateGas:({solanaNetworkFees:e,networkID:t})=>e.map(o=>({networkID:t,value:o}))};var XF=2e4,wp=({includeGasBuffer:e=!1}={})=>{let{currentQuote:t,quoteResponse:o}=q(),r=h(x=>x.sellFungible),n=r?.data.chain.id??z.Solana.Mainnet,{data:s}=wt(r?{address:r.data.walletAddress,networkID:r.data.chain.id}:void 0),p=s?.address??"",{data:u}=du({networkID:v.isEVMNetworkID(n)?n:z.Ethereum.Mainnet,transactionSpeed:"standard",gasLimit:new k(1),refetchInterval:XF}),{data:c,isFetching:m}=Zt({callerAddress:p,sellFungible:r,quote:t}),g={type:"transaction",userAccount:p,params:void 0,url:"https://phantom.app",networkID:n};c?.type==="evm"&&v.isEVMNetworkID(n)&&(g.params={transactions:c.transactions});let{transition:f}=Xe(),S=(0,nn.useCallback)((x,P)=>{P&&f({type:"simulationRequestError",error:P}),x&&f({type:"simulationResponseReceived",scannedTransactionResult:x})},[f]),{data:w,isFetching:y}=on(g,{disabled:v.isSolanaNetworkID(n),onSettled:S}),{connection:A}=zo(),{data:b,isFetching:F}=ff({swapTransactions:c,chainId:v.isSolanaNetworkID(n)?n:z.Solana.Mainnet,solanaConnection:A}),I=h(x=>x.isFetchingQuote),E=(0,nn.useMemo)(()=>{if(!(I||!t)){if(v.isEVMNetworkID(n)&&(vo(t)||pe(t))&&u)return gf.estimateGas({evmGasEstimation:u,currentQuote:t,scanResult:w,includeGasBuffer:e,networkID:n,gasBuffer:o?.gasBuffer});if(v.isSolanaNetworkID(n)&&b!==void 0)return yf.estimateGas({solanaNetworkFees:b,networkID:n})}},[I,t,n,u,b,w,e,o?.gasBuffer]),T=F||m||y;return(0,nn.useMemo)(()=>({gasEstimation:E,isFetching:T,isError:u===void 0}),[E,T,u])};function JF(){let e=h(u=>u.setGasEstimation),t=h(u=>u.setIsFetchingGasEstimation),o=h(u=>u.setMaxGasEstimation),{state:r}=Ye(),{gasEstimation:n,isFetching:s}=wp(),{gasEstimation:p}=wp({includeGasBuffer:!0});(0,Sf.useEffect)(()=>{if(r==="paused"){t(!1);return}t(s),e(n),o(p)},[r,e,o,t,n,p,s])}i();a();i();a();var Nf=C(R());i();a();var wf=(e,t,o)=>!(!e||t&&!o);i();a();var Rs=C(R());i();a();i();a();i();a();i();a();var Ap=5,hp=5,Af={id:v.solana.mainnetID,imageUrl:v.solana.iconUrl,name:v.solana.name,symbol:v.solana.tokenSymbol},xs={type:"SolanaNative",data:{amount:"0",balance:new k(0),chain:Af,decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"VERIFIED"}},bp={type:"SPL",data:{amount:"0",balance:new k(0),chain:Af,decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",spamStatus:"VERIFIED"}},hf={type:"PolygonNative",data:{chain:{id:v.polygon.mainnetID,name:v.polygon.name,symbol:v.polygon.tokenSymbol,imageUrl:v.polygon.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:v.polygon.tokenSymbol,balance:new k(0),key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},bf={type:"BaseNative",data:{chain:{id:v.base.mainnetID,name:v.base.name,symbol:v.base.tokenSymbol,imageUrl:v.base.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Base",symbol:v.base.tokenSymbol,balance:new k(0),key:"BaseNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},Tf={type:"ERC20",data:{amount:"0",balance:new k(0),decimals:6,key:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",walletAddress:"",chain:{id:v.polygon.mainnetID,imageUrl:v.polygon.iconUrl,name:v.polygon.name,symbol:v.polygon.tokenSymbol},contractAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",spamStatus:"VERIFIED"}},Ff={type:"ERC20",data:{amount:"0",balance:new k(0),decimals:6,key:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",walletAddress:"",chain:{id:v.base.mainnetID,imageUrl:v.base.iconUrl,name:v.base.name,symbol:v.base.tokenSymbol},contractAddress:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",spamStatus:"VERIFIED"}},If={type:"EthereumNative",data:{chain:{id:v.ethereum.mainnetID,name:v.ethereum.name,symbol:v.ethereum.tokenSymbol,imageUrl:v.ethereum.iconUrl},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new k(0),key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},vf={type:"ERC20",data:{chain:{id:v.ethereum.mainnetID,name:v.ethereum.name,symbol:v.ethereum.tokenSymbol,imageUrl:v.ethereum.iconUrl},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new k(0),key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},sn=bp,an=xs;var Cs="https://help.phantom.app/hc/en-us/articles/5985106844435",Ef="https://help.phantom.app/hc/en-us/articles/29763090277139";var xo=18;var yr=500,eo={amount:new k(0),uiAmount:"",pct:0};i();a();var Sr={};var xf={...Sr,bridgeMinimumUsdAmounts:0,swapDefaultFee:new k(6*10**16),bridgeDefaultFee:new k(6*10**16),averageNetworkFee:new k(15e-5*10**18),nativeFungible:bf,usdcFungible:Ff};i();a();var Cf={...Sr,bridgeMinimumUsdAmounts:20,swapDefaultFee:new k(2.5*10**16),bridgeDefaultFee:new k(3.75*10**16),averageNetworkFee:new k(0),nativeFungible:If,usdcFungible:vf};i();a();var Rf={...Sr,bridgeMinimumUsdAmounts:2,swapDefaultFee:new k(6*10**16),bridgeDefaultFee:new k(6*10**16),averageNetworkFee:new k(.0015*10**18),nativeFungible:hf,usdcFungible:Tf};i();a();var Pf={bridgeMinimumUsdAmounts:1,swapDefaultFee:new k(3*10**6),bridgeDefaultFee:new k(30*10**6),averageNetworkFee:new k(15e3),nativeFungible:xs,usdcFungible:bp};var IH=["solana","ethereum","polygon","base"],ZF=new Ho({solana:Pf,ethereum:Cf,polygon:Rf,base:xf}),we=Ko(ZF);i();a();var Ae=(e,t)=>!!e&&!!t&&v.compareNetworkID(e,t)!==0;i();a();var Df=C(R());i();a();var kf=C(R());function to(){let{data:[e]}=ie(["enable-base-swapper"]);return(0,kf.useMemo)(()=>we.supportedChains.filter(t=>t!=="base"||e),[e])}var Nt=()=>{let{data:e}=re(),t=to().map(o=>v.getMainnetNetworkID(o));return(0,Df.useMemo)(()=>eI(e,t),[e,t])},eI=(e,t)=>[...new Set((e?.addresses??[]).map(o=>o.networkID).filter(o=>t.includes(o)))];var Ps=()=>{let[e,t]=(0,Rs.useState)(!1),o=h(c=>c.sellFungible),r=h(c=>c.buyFungible),n=r?.data.chain.id,s=Ae(o?.data.chain.id,r?.data.chain.id),p=Nt(),{fungible:u}=it({key:n?jo(n,void 0):void 0});return(0,Rs.useEffect)(()=>{if(!u){t(!1);return}if(p.includes(u.data.chain.id)){let c=we.get(u.data.chain.id),m=s?c.bridgeDefaultFee:c.swapDefaultFee,g=new k(u.data.amount??0).gte(m);t(s&&!g)}},[u,s,t,p]),e};var Co=()=>{let{currentQuote:e}=q(),t=K(),o=Ps(),n=h(b=>b.buyFungible)?.data.chain.id,{fungible:s}=it({key:n?jo(n,void 0):void 0}),p=n?v.getTokenSymbol(n):"",u=s?.data.decimals??0,c=n?v.getChainID(n):void 0,m=h(b=>b.refuelEnabled),g=h(b=>b.setRefuelEnabled),f=(0,Nf.useCallback)(b=>{t.capture("swapperRefuelToggle",{data:{value:b}}),g(b)},[g,t]),S=pe(e)?e.refuelAmount:void 0,w=S?`${Ee(S??0,u)} ${p}`:void 0,y=Ee(s?.data.amount??0,u),A=wf(o,m,S);return{label:N.t("bridgeRefuelTitle"),refuelSupported:o,refuelEnabled:m,setRefuelEnabled:f,refuelAmount:S,uiRefuelAmount:w,showRefuelOption:A,buyNativeToken:{chain:c,symbol:p,balance:y,decimals:u}}};var tI=()=>{let{isFetchingQuote:e}=q(),{refuelEnabled:t,setRefuelEnabled:o,refuelAmount:r,uiRefuelAmount:n,buyNativeToken:{symbol:s,balance:p,decimals:u,chain:c}}=Co(),m=c?Ge(c):void 0,{data:g}=Be({query:m?{data:m}:void 0}),f="";if(g?.usd&&r&&u){let S=Te(X(new k(r),u).toNumber(),g.usd);f=co(S)}return{symbol:s,balance:p,refuelAmount:r,uiRefuelAmount:n,estimatedCost:f,refuelEnabled:t,setRefuelEnabled:o,isFetchingQuote:e}};i();a();var Of=C(R());i();a();var oI="swap",Bf=e=>new cu(e,oI),ks=Tn(K,e=>Bf(e));i();a();i();a();var Lf=C(R());i();a();function Je({key:e,queryKey:t,defaultValue:o=null}){let r=Z();return D({enabled:!0,queryKey:t,gcTime:cp.Long,staleTime:1/0,async queryFn(){try{return await r.get(e)}catch(n){return n instanceof Error&&L.captureError(n,"swapper"),o}}})}function dt({key:e,queryKey:t}){let o=Z(),r=j();return ne({async mutationFn(n){try{return await o.set(e,n)}catch(s){s instanceof Error&&L.captureError(s,"swapper");return}},async onMutate(n){await r.cancelQueries({queryKey:t});let s=r.getQueryData(t);return r.setQueryData(t,n),{previousValue:s}},onError(n,s,p){r.setQueryData(t,p?.previousValue)}})}var rI={type:"fixed"},Pe=()=>{let{slippageSetting:e,isFetched:t,save:o}=nI();return{isFetched:t,selectedSetting:e,setSlippageSetting:o}},nI=()=>{let{data:e,isFetched:t}=Je({key:"slippageSettings",queryKey:fe.slippageSettings()}),{mutateAsync:o}=dt({key:"slippageSettings",queryKey:fe.slippageSettings()}),r=(0,Lf.useCallback)(async n=>{await o(n)},[o]);return{isFetched:t,slippageSetting:e??rI,save:r}};function oo(e,t,o){if(!o)return;if(t==="fixed")return o.slippageTolerance;let r=o.quotes[e];if(r)return pe(r)?o.slippageTolerance:Jt(r)?r.slippageTolerance:o.slippageTolerance}i();a();var Ds=(e,t,o)=>{if(o)return X(e,t).times(te(o)).toNumber()},Uf=(e,t)=>t&&e?t>e?t:e:t??e;function _f({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,buyAmount:n,sellAmount:s,phantomFeeUiAmount:p,priceImpact:u,provider:c,slippageTolerance:m,slippageType:g}){if(t&&r){let f=Ds(n,t.data.decimals,e),S=Ds(s,r.data.decimals,o),w=Uf(f,S);return{networkId:r.data.chain.id,chainId:v.getChainID(r.data.chain.id),toNetworkId:t.data.chain.id,toChainId:v.getChainID(t.data.chain.id),isBridge:r.data.chain.id!==t.data.chain.id,marketName:`${r.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:c,priceImpact:u,fromAssetSymbol:r.data.symbol??"",fromAssetAddress:r.data.tokenAddress,fromAssetAmount:X(s,r.data.decimals),fromAssetUsdPrice:o,fromAssetUsdVolume:S,toAssetSymbol:t.data.symbol??"",toAssetAddress:t.data.tokenAddress,toAssetAmount:X(n,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:f,totalUsdVolume:w,feeUsd:p,slippageTolerance:m,slippageType:g}}return null}function Tp({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,quote:n,slippageTolerance:s,slippageType:p}){if(t&&r){let{buyAmount:u,sellAmount:c}=n,m="priceImpact"in n?n.priceImpact:0,g="sources"in n?Oe(n.sources):"",f=("fees"in n?n.fees.find(A=>A.type==="phantom")?.amount.toString():"")??"",S=Ds(u,t.data.decimals,e),w=Ds(c,r.data.decimals,o),y=Uf(S,w);return{chainId:r.data.chain.id??t.data.chain.id,swap:{marketName:`${r.data.symbol}/${t.data.symbol}`,tradeDirection:"sell",swapSource:g,priceImpact:m,fromAssetSymbol:r.data.symbol??"",fromAssetAddress:r.data.tokenAddress??"",fromAssetAmount:X(c,r.data.decimals),fromAssetUsdPrice:o??0,fromAssetUsdVolume:w??0,toAssetSymbol:t.data.symbol??"",toAssetAddress:t.data.tokenAddress??"",toAssetAmount:X(u,t.data.decimals),toAssetUsdPrice:e,toAssetUsdVolume:S,totalUsdVolume:y??0,feeUsd:Number(f),slippageTolerance:s,slippageType:p}}}return null}i();a();var Ns=C(R());i();a();var Fp=e=>{let o={chainId:e.data.chain.id,name:e.data.name??"",symbol:e.data.symbol??"",decimals:e.data.decimals,logoURI:e.data.logoUri??""};return Ce(e.type)?{resourceType:"nativeToken",slip44:e.data.key,...o}:{resourceType:"address",address:e.data.key,...o}};i();a();function sI(e){let{mainnetID:t,iconUrl:o,name:r,tokenSymbol:n}=v[e];return{id:t,imageUrl:o,name:r,symbol:n}}var Ip=e=>e.resourceType==="address"?e.address:e.slip44,vp=(e,t)=>{let o={amount:"0",balance:new k(0),decimals:e.decimals,key:Ip(e),logoUri:e.logoURI,mintAddress:Ip(e),name:e.name,splTokenAccountPubkey:"",symbol:e.symbol,tokenAddress:Ip(e),walletAddress:t,spamStatus:"NOT_VERIFIED"},r=sI(v.getChainID(e.chainId)),{nativeFungibleTokenType:n,nonNativeFungibleTokenType:s}=Dr.get(e.chainId),p=e.resourceType==="nativeToken"?n:s,u=iI(e);return{type:p,data:{chain:r,...o,...u}}};function iI(e){if(e.resourceType==="address"){if(v.isEVMNetworkID(e.chainId))return{contractAddress:e.address};if(v.isSolanaNetworkID(e.chainId))return{mintAddress:e.address}}return{}}function aI(e){let t=pf.safeParse(JSON.parse(e));if(!t.success)return null;let{sell:o,buy:r}=t.data,n=vp(o.token,o.owner),s=vp(r.token,r.owner);return!n||!s?null:{sellFungible:n,buyFungible:s}}function pI(e,t){let o=Fp(e),r=Fp(t);return!o||!r?"":JSON.stringify({sell:{token:o,owner:e.data.walletAddress},buy:{token:r,owner:t.data.walletAddress}})}var ro=()=>{let{data:e,isFetching:t}=Je({key:"lastSubmittedPairs",queryKey:fe.lastSubmittedPairs()}),o=(0,Ns.useMemo)(()=>e?aI(e):null,[e]),{mutateAsync:r}=dt({key:"lastSubmittedPairs",queryKey:fe.lastSubmittedPairs()}),n=(0,Ns.useCallback)(async(s,p)=>{await r(pI(s,p))},[r]);return{pairs:o,isLoading:t,storePairs:n}};var cn=({goToConfirmation:e})=>{let t=h(y=>y.selectedProviderIndex),o=h(y=>y.sellUsdValue),r=h(y=>y.buyUsdValue),{currentQuote:n,quoteResponse:s}=q(),p=h(y=>y.sellFungible),u=h(y=>y.buyFungible),{selectedSetting:c}=Pe(),{storePairs:m}=ro(),g=K(),f=ks(),{pause:S}=Ye();return(0,Of.useCallback)(()=>{if(!n||!p||!u)return;let y=oo(t,c.type,s);g.capture("swapperSwap");let A=Tp({buyToken:u,sellToken:p,sellAssetUsdValue:o,buyAssetUsdValue:r,quote:n,slippageTolerance:y,slippageType:c.type});A&&(L.addBreadcrumb("swapper","approved","info",Go(A.swap)),f.approved(A)),S(),e(),v.compareNetworkID(p.data.chain.id,u.data.chain.id)===0&&m(p,u)},[n,p,u,t,c.type,s,g,o,r,S,e,f,m])};i();a();var Ep=C(R());i();a();var Bs=(e,t)=>{if(t===void 0)return;let o=V(e),r=ae(o);return t[r]};i();a();var Mf=C(gS()),Ls=(e,t)=>{let o=(0,Mf.default)(e),r=o.value();return Math.abs(r)>0&&Math.abs(r)<1e-5?`< ${r<0?"-":""}0.00001`:t>=12?o.format("0,0.[0]"):t>=9?o.format("0,0.[000]"):o.format("0,0.[00000]")};var Us={network:{id:v.solana.mainnetID,name:v.solana.name,symbol:v.solana.tokenSymbol,imageUrl:v.solana.iconUrl},tokenType:"SolanaNative",symbol:"",logoUri:"",tokenAddress:"",amount:"",amountUsd:0};function cI({goToConfirmation:e}){let t=h(g=>g.buyFungible),o=h(g=>g.sellFungible),r=h(g=>g.setBuyUsdValue),n=h(g=>g.setSellUsdValue),s=(0,Ep.useMemo)(()=>{let g=[];return t&&o&&(g.push(V(t)),g.push(V(o))),{query:{data:g}}},[t,o]),{data:p}=st(s),{currentQuote:u,quoteResponse:c}=q(),m=cn({goToConfirmation:e});return(0,Ep.useMemo)(()=>{if(!c||!u||!t||!o)return{buyToken:Us,sellToken:Us,onSwap:m};let g=t?.data,f=o?.data;if(!g||!f)return{buyToken:Us,sellToken:Us,onSwap:m};let S="",w=null,y="",A=null,{sellAmount:b,buyAmount:F}=u,I=X(F,g.decimals),E=X(b,f.decimals),T=k(E),x=String(I).split(".")[0].length,P=E.toString().split(".")[0].length,O=g.symbol?.length,M=f.symbol?.length,H=x&&O?x+O:0,Q=P&&M?P+M:0;y=`${Ls(T,Q)} ${f.symbol}`,S=`${Ls(I,H)} ${g.symbol}`;let W=Bs(t,p),Y=Bs(o,p);return W?.usd&&(w=I.multipliedBy(W.usd).toNumber(),r(W.usd)),Y?.usd&&(A=T.multipliedBy(Y.usd).toNumber(),n(Y.usd)),{buyToken:{network:g.chain,tokenType:t.type,symbol:g.symbol,logoUri:g.logoUri,tokenAddress:g.tokenAddress,amount:S,amountUsd:w},sellToken:{network:f.chain,tokenType:o.type,symbol:f.symbol,logoUri:f.logoUri,tokenAddress:f.tokenAddress,amount:y,amountUsd:A},onSwap:m}},[c,u,t,o,p,m,r,n])}i();a();var Ke=C(R());i();a();var Qf=(e,t)=>e.length===0?an:t.includes(e[0])?we.get(e[0]).nativeFungible??an:an,qf=e=>we.get(e).usdcFungible,un=(e,t)=>{let o=mo(t);return e.find(r=>{if(Ce(o)&&o===r.type)return!0;if(t.resourceType==="address"){let n=lu(r);return lo(t)?Fc(t.address,n):t.address===n}})},_s=(e,t,o)=>{let r=un(o,e);if(!r){if(Ce(mo(e)))r=we.get(e.chainId).nativeFungible;else if(t&&t.chainId===e.chainId){let n=Ce(mo(t)),{usdcFungible:s,nativeFungible:p}=we.get(t.chainId);r=n?s:p}}return r};i();a();var Vf=C(R());i();a();var Cp=C(R());i();a();function Ro(e,t){return e.data.key===t.data.key}i();a();var Gf=C(R());var xp=()=>{let e=Nt();return(0,Gf.useCallback)(t=>!!t&&e.includes(t),[e])};function Po({enablePrices:e,enableSorting:t}){let{fungibles:o,isLoadingTokens:r,tokensError:n,refetch:s}=At({enablePrices:e,enableSorting:t}),p=xp(),u=o.filter(g=>p(g.data.chain.id)),c=h(g=>g.sellFungible),m=(0,Cp.useMemo)(()=>{if(c){let g=u.findIndex(S=>Ro(S,c)),f=u[g];f&&f.data.amount!==c.data.amount&&(u[g]=c)}return u.filter(g=>g.data.amount!=="0")},[u,c]);return(0,Cp.useMemo)(()=>({assets:m,isLoading:r,error:n,refetchTokens:s}),[m,r,n,s])}var Os=()=>{let e=Cn(),t=h(s=>s.sellFungible),{pairs:o}=ro(),{data:[r]}=ie(["enable-swapper-token-fetching-optimization"]),{assets:n}=Po({enablePrices:!r,enableSorting:!r});return(0,Vf.useMemo)(()=>{let s=t?qf(t.data.chain.id):sn,c=((o?e.includes(o.buyFungible.data.chain.id):!1)?o?.buyFungible:void 0)??s;return c?un(n,V(c))??c:void 0},[t,o,e,n])};i();a();var Kf=C(R());var Ar=()=>{let e=Cn(),t=Nt(),{pairs:o}=ro(),{data:[r]}=ie(["enable-swapper-token-fetching-optimization"]),{assets:n}=Po({enablePrices:!r,enableSorting:!r});return(0,Kf.useMemo)(()=>{let s=Qf(e,t),p=o?V(o?.sellFungible):void 0,u=o?V(o?.buyFungible):void 0;return((p?e.includes(p.chainId):!1)&&p&&u?_s(p,u,n):void 0)??s},[e,o,n,t])};var Hf=e=>{if(e)try{return Dc(e)}catch{return}},$f=e=>fo(e)??[];function uI({paramsSellFungible:e,paramsSellAmount:t,paramsBuyFungible:o,navRef:r}){let{isLoading:n}=ro(),s=(0,Ke.useMemo)(()=>Hf(e),[e]),p=(0,Ke.useMemo)(()=>Hf(o),[o]),u=t,[c,m]=(0,Ke.useState)(!1),[g,f]=(0,Ke.useState)(!1),{data:S}=re(),{data:[w]}=ie(["enable-swapper-token-fetching-optimization"]),{assets:y,isLoading:A}=Po({enablePrices:!w,enableSorting:!w}),{data:b,isPending:F}=yo({query:p?.resourceType==="address"?p.address:p?.slip44??"",enableQuery:!!p,networkIds:[p?.chainId??v.solana.mainnetID],searchContext:"swapper"}),I=(0,Ke.useMemo)(()=>{let G=[];return s&&G.push(...$f(s)),p&&G.push(...$f(p)),G},[s,p]),{fungibles:E,isLoadingTokens:T,isRefetchingTokens:x,tokensError:P}=At({keys:I,enablePrices:!w,enableSorting:!w}),O=Ar(),M=Os(),H=h(G=>G.setBuyFungible),Q=h(G=>G.setSellFungible),W=h(G=>G.setUiSellAmount),Y=h(G=>G.setSellAmount);return(0,Ke.useEffect)(()=>{Q(void 0),m(!1),H(void 0),f(!1)},[s,p,Q,H,S?.identifier,n,r]),(0,Ke.useEffect)(()=>{if(c)return;let G;if(s){if(A)return;G=_s(s,p,y)}else if(!s&&p){let{usdcFungible:ee,nativeFungible:B}=we.get(p.chainId);G=Ce(mo(p))?ee:B}else G=O;m(!0),Q(G)},[s,p,O,y,Q,A,c]),(0,Ke.useEffect)(()=>{if(g)return;let G;if(p){if(F)return;if(G=un(b??[],p),!G){let{usdcFungible:ee,nativeFungible:B}=we.get(p.chainId);G=Ce(mo(p))?B:ee}}else G=M;if(!T&&!x&&!P&&E&&G){let ee=ae(V(G)),B=E.find(he=>ae(V(he))===ee);B&&(G=B)}f(!0),H(G)},[p,b,F,H,g,M,E,T,x,P]),(0,Ke.useEffect)(()=>{u?(Y(u),W(u)):(Y(""),W(""))},[u,r,W,Y]),{isLoading:(!!s||!!p)&&(!g||!c)||n}}i();a();var He=C(R()),eg=C(Pp());i();a();i();a();i();a();var mI=["SwapperNoQuotes","UnsupportedCountry","UnknownError"],jf=(e,t,o,r)=>{e instanceof xe&&mI.includes(e.code)||(!t||t>=400&&t<500)&&(L.addBreadcrumb(o,JSON.stringify(r),"info"),L.captureError(e,"swapper"))};i();a();var Wf=async(e,t,o=void 0)=>{if(se(e))return Promise.resolve();let r;try{r=e.data}catch{throw new xe({key:o})}let n=tf.safeParse(r);throw n.success?(L.addBreadcrumb(t,JSON.stringify(n.data),"info"),new xe({key:n.data.name})):new xe({key:o})};i();a();var Yf=(e,t)=>{let o=new xe({key:"SwapperNoQuotes"});if(fp.safeParse(e?.type).success===!1)throw new Error("Invalid input");let r=gp.safeParse(e);if(!r.success)throw o;if(r.data.quotes.length===0)throw t?new xe({key:"SwapperRefuelNoQuotes"}):o;return r.data};var Xf="swap-quotes";async function Jf({sellTokenCaip19:e,buyTokenCaip19:t,taker:o,takerDestination:r,exactOut:n,sellAmount:s,slippageTolerance:p,refuelEnabled:u,signal:c,enableAutoSlippage:m}){let g;try{lo(o)&&(o.address=o.address.toLowerCase()),r&&lo(r)&&(r.address=r.address.toLowerCase()),lo(t)&&(t.address=t.address.toLowerCase()),lo(e)&&(e.address=e.address.toLowerCase());let f="/swap/v2/quotes",S={sellToken:e,buyToken:t,taker:o,takerDestination:r,exactOut:n,sellAmount:s,slippageTolerance:p,autoSlippage:m,...u?{refuel:1,ignoreRefuelFailures:!0}:{}},w=await _.api().post(f,S,{signal:c});return g=w.status,await Wf(w,Xf,"SwapperNoQuotes"),Yf(w.data,u)}catch(f){let S=f instanceof xe?f:new xe;throw jf(S,g,Xf,{sellToken:e,buyToken:t,sellAmount:s,slippageTolerance:p}),S}}var Zf=({sellToken:e,buyToken:t,taker:o,takerDestination:r,amount:n,slippageTolerance:s,refuelEnabled:p,pollInterval:u,pollerState:c,enableAutoSlippage:m})=>{let g=K(),f=e?V(e):void 0,S=t?V(t):void 0,w=e?mu(e,n.value).toString():n.value,y=h(I=>I.selectedProviderIndex),{transition:A}=Xe(),b=!!n.value&&!!t&&!!e&&c==="resumed",F=fe.quotes({sellTokenCaip19:f,buyTokenCaip19:S,taker:o,amountValue:w,amountType:n.type,refuelEnabled:p,takerDestination:r,slippageTolerance:s,enableAutoSlippage:m});return D({queryKey:F,enabled:b,gcTime:0,staleTime:0,refetchInterval:u,async queryFn({signal:I}){if(!n||!S||!f)throw new Error("missing necessary args");e&&t&&A({type:"quoteRequestStarted",buy:t,sell:e,amount:w});let E=await Jf({sellTokenCaip19:f,buyTokenCaip19:S,taker:o,takerDestination:r,sellAmount:w,exactOut:n.type==="buy",slippageTolerance:s,refuelEnabled:p,signal:I,enableAutoSlippage:m});return A({type:"quoteResponseReceived",response:E,quoteIndex:y}),g.capture("swapperQuotesResult",{data:{numQuotes:E.quotes.length,sellToken:e,fromNetworkId:f.chainId,toNetworkId:S.chainId}}),E}})};i();a();var Ms=()=>{let e=h(f=>f.sellFungible),t=h(f=>f.buyFungible),o=h(f=>f.sellAmount),r=e?V(e):null,{data:n}=Be({query:r?{data:r}:void 0}),s=e?.data.chain.id,p=t?.data.chain.id,u=n?.usd;if(!s||!p||!o||!u||v.compareNetworkID(s,p)===0)return!0;let c=Te(Number(o),u),m=we.get(s).bridgeMinimumUsdAmounts,g=we.get(p).bridgeMinimumUsdAmounts;return m<=c&&g<=c};i();a();var ko=()=>Je({key:"slippageTolerance",queryKey:fe.slippageTolerance()}),Qs=()=>dt({key:"slippageTolerance",queryKey:fe.slippageTolerance()});function dI({skipInitialBuyFungible:e}){let t=K(),o=h($=>$.sellAmount),r=h($=>$.amountType),s=h($=>$.buyFungible)??(e?void 0:sn),p=h($=>$.sellFungible),u=h($=>$.refuelEnabled),c=h($=>$.setRefuelEnabled),{state:m,intervalMs:g}=Ye(),f=h($=>$.resetQuote),S=h($=>$.setHasNoRoutes),w=h($=>$.setError),y=h($=>$.setIsFetchingQuote),A=h($=>$.setQuoteResponse),b=h($=>$.setSelectedProviderIndex),{data:[F]}=ie(["enable-auto-slippage"]),{data:I}=ko(),{mutateAsync:E}=Qs(),{selectedSetting:T}=Pe(),x=F&&T.type==="auto",P=Ps();(0,He.useEffect)(()=>c(P),[P,s,c]);let O=Ms(),M=(0,eg.default)(O),H=(0,He.useMemo)(()=>{let $=r==="sell"?{amount:o,fungible:p}:{amount:o,fungible:s};return new k($.amount).isGreaterThan(0)&&$.fungible?xc($.amount,$.fungible.data.decimals).toString():(f(),"")},[r,s,f,o,p]),Q=Ae(p?.data?.chain.id,s?.data.chain.id);(0,He.useEffect)(()=>{Q&&t.capture("swapperRefuelDefault",{data:{default:P}})},[P,t,Q]);let{data:W}=wt(p?.data?.chain.id),{data:Y}=wt(s?.data.chain.id),ge=(0,He.useMemo)(()=>W?{chainId:W.networkID,address:W.address,resourceType:"address"}:{},[W]),G=(0,He.useMemo)(()=>{if(Q)return{chainId:Y?.networkID,address:Y?.address,resourceType:"address"}},[Q,Y?.address,Y?.networkID]),{data:ee,error:B,isFetching:he}=Zf({sellToken:p,buyToken:s,taker:ge,takerDestination:G,amount:{value:O?H:"",type:r},slippageTolerance:x?void 0:I??void 0,refuelEnabled:u,enableAutoSlippage:x,pollInterval:g,pollerState:m}),me=(0,He.useCallback)($=>{w(null),b(0),y(!1),S(!1),A($);let J=oo(0,T.type,$);J&&I!==J&&E(J)},[w,S,y,A,b,E,I,T.type]),ye=(0,He.useCallback)($=>{f(),y(!1),S(!0),w($)},[f,w,S,y]);(0,He.useEffect)(()=>{m!=="paused"&&(he?y(!0):ee?me(ee):B&&ye(B))},[B,ee,he,me,ye,y,m,O]),(0,He.useEffect)(()=>{O?M===!1&&O&&(w(null),S(!1)):(w(new xe({key:"InsufficientSellAmount"})),S(!0))},[O,M,w,S])}i();a();var qs=C(R());i();a();i();a();i();a();var fI=e=>e.isGreaterThanOrEqualTo(1)?"0,0.[00]":"0,0.[00000]",hr=e=>{let t=k(e);return Rc(e,fI(t))};function Bt(e,t,o){if(t.lte(0))return"";let r=ae({chainId:e,resourceType:"nativeToken",slip44:v.getSlip44(e)}),n=v.getTokenDecimals(e),s=v.getTokenSymbol(e);if(!r||!n||!s)return"";let p=t.div(new k(10).pow(n)),u=o[r];if(!u?.usd)return`${hr(p.toString())} ${s}`;let c=p.times(u.usd).toNumber(),m=co(c,{minimumAmount:1e-6,decimalFormatSmallNumbers:"0.[00000]"});return m!=="$NaN"?m:""}i();a();var Do=e=>{let t=Math.floor(e/3600),o=Math.floor((e-t*3600)/60),r=e%60;if(t>0)return N.t("swapProviderEstimatedTimeHM",{hours:t,minutes:o});if(o>0){let n=r>0?o+1:o;return N.t("swapProviderEstimatedTimeM",{minutes:n})}return N.t("swapProviderEstimatedTimeS",{seconds:r})};i();a();var br=e=>e.steps.reduce((t,o)=>t.plus(new k(o.nonIncludedNonGasFees)),new k(0));var gI=5*60,tg=e=>{if(pe(e))return Oe(Ts(e));let{sources:t}=e;return Oe(t)},og=({quotes:e,buyTokenNetworkId:t,buyTokenDecimals:o,buyTokenSymbol:r})=>e.map(n=>{let{buyAmount:s}=n,p=Dr.get(t).formDisplayPrecision;return{name:tg(n),amount:`${Gt(X(s,o),p)} ${r}`}}),rg=({quotes:e,buyTokenNetworkId:t,buyTokenDecimals:o,buyTokenSymbol:r,networkIDForFees:n,networkFee:s,priceMap:p,t:u})=>e.filter(pe).map(c=>{let{buyAmount:m,executionDuration:g,steps:f}=c,w=br(c).plus(s),y=f.find(b=>!!b.tool.logoURI),A=Dr.get(t).formDisplayPrecision;return{name:tg(c),fee:n&&p?u("swapProvidersFee",{fee:Bt(n,w,p)}):"",amount:`${Gt(X(m,o),A)} ${r}`,time:{text:Do(g),isFast:g<=gI},logoURI:y?.tool.logoURI??""}});i();a();var yI={aggregate(e){return e.reduce((t,o)=>({...t,gasLimit:t.gasLimit.plus(o.gasLimit)}),{networkID:v.ethereum.mainnetID,gasLimit:new k(0),maxFeePerGas:e[0].maxFeePerGas,maxPriorityFeePerGas:e[0].maxPriorityFeePerGas})}},SI={aggregate(e){return e.reduce((t,o)=>({...t,value:t.value+o.value}),{networkID:v.solana.mainnetID,value:0})}},ln=e=>{if(!(!e||e.length===0)){if(Yc(e[0]))return yI.aggregate(e);if(Wc(e[0]))return SI.aggregate(e)}};function wI(){let{t:e}=ot(),{quoteResponse:t,isFetchingQuote:o,quotes:r,selectedProviderIndex:n}=q(),s=h(E=>E.setSelectedProviderIndex),p=h(E=>E.maxGasEstimation),u=h(E=>E.sellFungible),c=h(E=>E.buyFungible),m=u?.data.chain.id,{data:g}=Nr(m,ln(p)),S=to().map(E=>Ge(E)),{data:w={}}=st({query:{data:S}}),y=t?.type==="xchain",A=(0,qs.useMemo)(()=>c?y?rg({quotes:r,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol,networkIDForFees:m,networkFee:g?.gasEstimationAmount??new k(0),priceMap:w,t:e}):og({quotes:r,buyTokenNetworkId:c.data.chain.id,buyTokenDecimals:c.data.decimals,buyTokenSymbol:c.data.symbol}):[],[c,y,r,e,m,g?.gasEstimationAmount,w]),b=K(),{transition:F}=Xe(),I=(0,qs.useCallback)(E=>{let T=A[E];b.capture("swapperProviderSelected",{data:{provider:T.name}}),s(E),F({type:"quoteSelected",quoteIndex:E})},[s,A,b,F]);return{rows:A,selectedProviderIndex:n,isLoadingProviders:o,setSelectedProviderIndex:I}}i();a();var ng=C(R());var No=()=>{let{resume:e}=Ye(),t=h(o=>o.resetSwapper);return(0,ng.useCallback)(()=>{e(),t()},[t,e])};i();a();var Ks=C(R());i();a();var ig=C(R());i();a();var sg=C(R());var Gs=()=>{let e=j();return{cancelQuotes:(0,sg.useCallback)(async()=>{await e.cancelQueries({queryKey:fe.quotesScope()}),await bc(1)},[e])}};i();a();function Vs(e){return{chain:"solana",type:"fungible",address:e.type==="SPL"?e.data.mintAddress:void 0,symbol:e.data.symbol??""}}function kp(){let e=K(),t=h(n=>n.setBuyFungible),o=h(n=>n.buyFungible),{cancelQuotes:r}=Gs();return(0,ig.useCallback)(async n=>{if(o&&Ro(n,o))return;await r();let s=Vs(n);e.capture("swapperUpdateToAsset",{data:s}),t(n)},[e,o,r,t])}i();a();i();a();var AI=l.enum(["pumpFun","moonshot"]),hI=l.object({type:AI,programId:l.string(),name:l.string(),iconUrl:l.string()}),bI=l.object({programs:l.array(hI)}),ag=e=>{try{return bI.parse(e)}catch{return}};var Dp=[],Lt=()=>{try{let e=ve.getMultivariateAssignment("enabled-ugc-programs");if(!e)return Dp;let t=JSON.parse(e);return ag(t)?.programs??Dp}catch{return Dp}};i();a();var pg=e=>{Np.getState().setAsset(e)},Np=Ne(e=>({asset:void 0,setAsset(t){e({asset:t})}}));var TI=({onClose:e})=>{let t=kp(),o=Np(s=>s.asset),r=(0,Ks.useMemo)(()=>Lt().find(p=>p.programId===o?.data?.ugcTokenMeta?.programId),[o]),n=(0,Ks.useCallback)(async()=>{o&&(await t(o),e())},[t,o,e]);return{asset:o,program:r,handleConfirmPress:n}};i();a();var FI=()=>{let{review:e}=Xt();e?Io(e):en()};i();a();i();a();var Bp=()=>{let e=j(),t=h();return{clearQuotes:async()=>{t.resetQuote(),await e.invalidateQueries({queryKey:fe.quotesScope()})}}};i();a();i();a();var vI=({networkID:e,unsignedTransaction:t,pendingActivityRows:o,accountIdentifier:r,accountSigner:n,storage:s,includeCallPayload:p})=>({accountSigner:n,accountIdentifier:r,networkID:e,unsignedTransaction:t,...p&&{callPayload:{from:t.from,to:t.to,data:t.data,value:t.value}},pendingTransactionInput:{ownerAddress:t.from,networkID:e,data:{nonce:"",unsignedTransaction:t,hash:""},type:"swap",display:{summary:o}},storage:s}),cg=async({transactions:e,transactionTypes:t,networkID:o,gasEstimation:r,pendingApprovalActivityRows:n,pendingSwapActivityRows:s,accountIdentifier:p,accountSigner:u,storage:c})=>{let m=!0,g="";for(let[f,S]of e.entries()){let w=r[f],y={gas:`0x${w.gasLimit.toString(16)}`,maxFeePerGas:`0x${w.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${w.maxPriorityFeePerGas.toString(16)}`},A=Qo.parse({...S,...y}),F=t[f].includes("approval")?n:s,I=vI({networkID:o,accountIdentifier:p,pendingActivityRows:F.shift(),accountSigner:u,storage:c,unsignedTransaction:A,includeCallPayload:m});try{g="",g=await ou(I)}catch(E){return{signature:g,error:E instanceof Error?E:new Error("Failed to process EVM swap transaction")}}m&&(m=!1)}return{signature:g}};i();a();var EI=({networkID:e,transaction:t,feePayer:o,connection:r,pendingActivityRows:n,accountIdentifier:s,accountSigner:p,storage:u})=>({accountSigner:p,accountIdentifier:s,transaction:t,feePayer:o,connection:r,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:o.toBase58(),networkID:e,data:{signature:""},type:"swap",display:{summary:n}},storage:u}),ug=async({callerAddress:e,connection:t,networkID:o,transactions:r,pendingSwapActivityRows:n,accountIdentifier:s,accountSigner:p,storage:u})=>{let c=new Rr.PublicKey(e),m="";for(let[g,f]of r.entries()){let S=qo(f,"bs58"),w=EI({networkID:o,transaction:S,feePayer:c,connection:t,pendingActivityRows:n[g],accountIdentifier:s,accountSigner:p,storage:u});try{m="",m=await su(w),g!==r.length-1&&await nu({connection:t,signature:m})}catch(y){return{signature:m??"",error:y instanceof Error?y:new Error("Failed to process solana swap transaction")}}}return{signature:m??""}};var Up=({accountIdentifier:e,networkID:t})=>{let o=Z(),r=Mc();return ne({mutationFn:async s=>{let{swapTransactions:p,type:u}=s;if(p.type==="evm"&&u==="eip155"){let{gasEstimation:c,pendingApprovalActivityRows:m,pendingSwapActivityRows:g}=s,{signature:f,error:S}=await L.startSpan({name:"Process EVM Swap Txns"},()=>cg({transactions:p.transactions,transactionTypes:p.transactionTypes,networkID:t,gasEstimation:c,pendingSwapActivityRows:g,pendingApprovalActivityRows:m,accountIdentifier:e,accountSigner:r,storage:o}));return{networkID:t,chainType:u,id:f,error:S}}else if(p.type==="solana"&&u==="solana"){let{callerAddress:c,connection:m,pendingSwapActivityRows:g}=s;if(!m)throw new Error("missing connection");let{signature:f,error:S}=await L.startSpan({name:"Process Solana Swap Txns"},()=>ug({callerAddress:c,connection:m,networkID:t,transactions:p.transactions,pendingSwapActivityRows:g,accountIdentifier:e,accountSigner:r,storage:o}));return{networkID:t,chainType:u,id:f,error:S}}throw new Error("unsupported")}})};i();a();i();a();var Tr=C(R());i();a();var lg=C(R());function mg(){let e=h(r=>r.setUiBuyAmountFungibleInput),t=h(r=>r.setUiBuyAmountFiatInput),o=h(r=>r.primaryCurrency);return(0,lg.useCallback)(({amount:r,decimals:n,usdPrice:s})=>{if(o==="crypto")if(r===void 0)e("");else{let p=X(r,n).toString(),u=tt(p);e(u)}else if(o==="fiat"&&s)if(r===void 0)t("");else{let p=X(r,n).toString(),u=Te(Number(p),s);t(u.toString())}},[o,t,e])}i();a();var dg=C(R());function fg(){let e=h(u=>u.setAmountType),t=h(u=>u.setSellAmount),o=h(u=>u.sellAmount),r=h(u=>u.setUiBuyAmountFungibleInput),n=K(),[s,p]=Vo(o,t,yr);return(0,dg.useCallback)(async({fungibleValue:u,shouldUpdateQuote:c,decimals:m})=>{let g=Qt(u.substring(0,xo)),f=tt(g,m);e("buy"),r(f),await n.capture("swapperChangeReceiveCryptoAmount",{data:{amount:f}}),c&&p(f)},[n,e,r,p])}i();a();var gg=C(R());function Hs(e){return(0,gg.useMemo)(()=>e===void 0?void 0:V(e),[e])}i();a();var mn=C(R());var yg=()=>{let e=h(A=>A.primaryCurrency),t=h(A=>A.sellFungible),o=h(A=>A.buyFungible),r=h(A=>A.uiSellAmountFiatInput),n=h(A=>A.uiBuyAmountFiatInput),s=h(A=>A.amountType),p=h(A=>A.setUiSellAmount),u=h(A=>A.setUiBuyAmountFungibleInput),c=h(A=>A.switchTokensForBuy),m=h(A=>A.switchTokensForSell),{data:g}=Be({query:t?{data:V(t)}:void 0}),{data:f}=Be({query:o?{data:V(o)}:void 0}),S=(0,mn.useMemo)(()=>({fiatValue:r,decimals:t?.data.decimals??0,usdPrice:g?.usd}),[t?.data.decimals,r,g?.usd]),w=(0,mn.useMemo)(()=>({fiatValue:n,decimals:o?.data.decimals??0,usdPrice:f?.usd}),[o?.data.decimals,f?.usd,n]),y=({fiatValue:A,decimals:b,usdPrice:F})=>{let I=A?"":Gt(0,b);return F&&A&&(I=je(Number(A),F,b).toString()),I};return(0,mn.useCallback)(()=>{if(e==="fiat"){let A=y(S);p(A);let b=y(w);u(b)}s==="sell"?m():c()},[s,w,e,S,u,p,c,m])};var CI={chainId:z.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"};function _p(){let e=h(T=>T.buyFungible),t=Hs(e),o=h(T=>T.sellFungible),r=h(T=>T.primaryCurrency),n=h(T=>T.uiBuyAmountFungibleInput),s=h(T=>T.uiBuyAmountFiatInput),p=h(T=>T.amountType),u=h(T=>T.setAmountType),c=h(T=>T.setSellAmount),m=h(T=>T.uiSellAmount),g=h(T=>T.uiSellAmountFiatInput),f=e?.data.decimals??0,{currentQuote:S}=q(),w=e?V(e):CI,{data:y}=Be({query:{data:w}}),A=yg(),b=mg(),F=fg();(0,Tr.useEffect)(()=>{p==="sell"&&t&&b({amount:S?.buyAmount,decimals:f,usdPrice:y?.usd})},[p,t,S?.buyAmount,f,y?.usd,b]),(0,Tr.useEffect)(()=>{if(Ae(o?.data.chain.id,e?.data.chain.id)&&p==="buy"){if(u("sell"),r==="crypto")c(m);else if(y?.usd){let T=je(g,y.usd,f);c(T.toString())}}},[p,e,f,y,r,o,u,c,m,g]);let I=(0,Tr.useCallback)(T=>{F({fungibleValue:T,decimals:f,shouldUpdateQuote:!0})},[f,F]),E=(0,Tr.useCallback)(()=>{A()},[A]);return{cryptoAmountInputValue:n,handleCryptoAmountInputChange:I,fiatAmountInputValue:s,handleSwitchTokensClick:E}}i();a();var et=C(R());i();a();var RI=3,PI=new k(356190),kI=e=>we.get(e).averageNetworkFee.times(RI);function $s({sellFungible:e,totalFees:t,transactionSpeedsToUnitCost:o,destinationMinRequiredBalance:r=new k(0),isBridge:n=!1}){let{decimals:s,amount:p,chain:u}=e.data,c=new k(p),m=we.get(u.id),g=n?m.bridgeDefaultFee:m.swapDefaultFee,f=o?.standard;Xc(f)&&(g=PI.multipliedBy(f.maxFeePerGas.plus(f.maxPriorityFeePerGas)));let w=(Ce(e.type)?g.plus(kI(u.id)):t).plus(r),y=e&&Ce(e.type)&&c.gt(w)?c.minus(w).toString():c.toString();return Cc(y,s)}i();a();var Sg=C(R());function wg(){let e=h(c=>c.primaryCurrency),t=h(c=>c.setUiSellAmountFiatInput),o=h(c=>c.setUiBuyAmountFiatInput),r=h(c=>c.setAmountType),n=h(c=>c.setPrimaryCurrency),s=h(c=>c.setUiSellAmount),p=h(c=>c.setSellAmount),u=h(c=>c.setUiBuyAmountFungibleInput);return(0,Sg.useCallback)(({buyAmountFromQuote:c,buyFungibleDecimals:m,buyFungibleUsdPrice:g,sellAmountFromQuote:f,sellFungibleUsdPrice:S})=>{if(e==="crypto"){if(r("sell"),S&&f){let w=Te(Number(f),S);t(w.toString()),p(f.toString())}if(g&&c){let w=X(c,m).toString(),y=Te(Number(w),g);o(y.toString())}n("fiat")}if(e==="fiat"){if(f&&s(f),g&&c){let w=X(c,m).toString();u(w)}n("crypto")}},[e,p,r,u,o,n,s,t])}i();a();var Ag=C(R());function hg(){let e=h(r=>r.primaryCurrency),t=h(r=>r.setUiSellAmount),o=h(r=>r.setUiSellAmountFiatInput);return(0,Ag.useCallback)(({amount:r,decimals:n,usdPrice:s})=>{if(e==="crypto")if(r===void 0)t("0");else{let p=X(r,n).toString();t(p)}else if(e==="fiat"&&s)if(r===void 0)o("0");else{let p=X(r,n).toString(),u=Te(Number(p),s);o(u.toString())}},[e,t,o])}i();a();var bg=C(R());function Tg(){let e=h(p=>p.setAmountType),t=h(p=>p.setUiSellAmount),o=h(p=>p.setSellAmount),r=h(p=>p.sellAmount),[n,s]=Vo(r,o,yr);return(0,bg.useCallback)(({fungibleValue:p,decimals:u,shouldUpdateQuote:c})=>{let m=Qt(p.substring(0,xo)),g=tt(m,u);e("sell"),t(g),c&&s(g)},[e,t,s])}i();a();var Fg=C(R());function Ig(){let e=h(p=>p.setAmountType),t=h(p=>p.setSellAmount),o=h(p=>p.sellAmount),r=h(p=>p.setUiSellAmountFiatInput),[n,s]=Vo(o,t,yr);return(0,Fg.useCallback)(({fiatValue:p,shouldUpdateQuote:u,decimals:c,priceData:m})=>{let g=Qt(p.substring(0,xo)),f=tt(g,2);if(e("sell"),r(f),u&&m?.usd){let S=je(f,m.usd,c);s(S.toString())}},[e,r,s])}i();a();var Og=C(R());i();a();var vg=C(R());var DI={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"},Eg=()=>{let{currentQuote:e}=q(),{destinationNetworkFee:t,liquidityFee:o}=(0,vg.useMemo)(()=>{function r(s){return s?{amount:new te(s.amount??0),uiAmount:`$${s.amountUSD??""}`,pct:parseFloat(s.percentage??"0")}:eo}let n=new Map([]);return e&&pe(e)&&(n=e.steps.flatMap(s=>s.includedFeeCosts).reduce((s,p)=>{if(!p)return s;let u=DI[p.name];return u&&s.set(u,p),s},n)),{destinationNetworkFee:r(n.get("destinationNetwork")),liquidityFee:r(n.get("liquidityProvider"))}},[e]);return{destinationNetworkFee:t,liquidityFee:o}};i();a();var xg=C(R());var NI={calculate({currentQuote:e,gasEstimationPriceData:t}){return{amount:(e&&t?.gasEstimationAmount)??new te(0),uiAmount:(e&&t?.gasEstimationPriceUSD)??"",pct:0}}},BI={calculate({currentQuote:e,gasEstimationPriceData:t,maxGasEstimationPriceData:o}){return{amount:(e&&t?.gasEstimationAmount)??new te(0),uiAmount:(e&&t?.gasEstimationPriceUSD)??"",maxAmount:(e&&o?.gasEstimationAmount)??new te(0),maxUiAmount:(e&&o?.gasEstimationPriceUSD)??"",pct:0}}},Cg=()=>{let{currentQuote:e}=q(),t=h(m=>m.sellFungible),o=h(m=>m.gasEstimation),r=h(m=>m.maxGasEstimation),n=t?.data.chain.id??z.Solana.Mainnet,{data:s,isFetching:p}=Nr(n,ln(o)),{data:u}=Nr(n,ln(r));return{networkFee:(0,xg.useMemo)(()=>v.isEVMNetworkID(n)?BI.calculate({currentQuote:e,gasEstimationPriceData:s,maxGasEstimationPriceData:u}):NI.calculate({currentQuote:e,gasEstimationPriceData:s}),[e,s,u,n]),isFetchingGasEstimationPrice:p}};i();a();var Rg=C(R());var LI={calculate(){return eo}},UI={calculate({currentQuote:e,networkID:t,priceMap:o}){let r=br(e);return{amount:r,uiAmount:Bt(t,r,o),pct:0}}},Pg=({priceMap:e})=>{let{currentQuote:t}=q(),r=h(s=>s.sellFungible)?.data.chain.id??z.Solana.Mainnet;return{nonIncludedFees:(0,Rg.useMemo)(()=>t&&pe(t)?UI.calculate({currentQuote:t,networkID:r,priceMap:e}):LI.calculate(),[r,t,e])}};i();a();var kg=C(R());var _I={calculate(e){let t=(e?.fees??[]).find(o=>o.type==="phantom");return{amount:new te(t?.amount??0),uiAmount:"",pct:t?.percentage??0}}},OI={calculate(e){let t=e.steps.flatMap(o=>o.feeCosts).find(o=>o.name==="phantom");return{amount:new te(t?.amount??0),uiAmount:"",pct:parseFloat(t?.percentage??"0")}}},Dg=()=>{let{currentQuote:e}=q();return{phantomFee:(0,kg.useMemo)(()=>Jt(e)?_I.calculate(e):pe(e)?OI.calculate(e):eo,[e])}};i();a();var Ng=C(R());var MI={calculate({currentQuote:e,networkID:t,priceMap:o}){let r=(e?.fees??[]).find(n=>n.name==="Token account deposits");return{amount:new te(r?.amount??0),uiAmount:r?.amount?Bt(t,new te(r.amount),o):"",pct:r?.percentage??0}}},QI={calculate(){return eo}},Bg=({priceMap:e})=>{let{currentQuote:t}=q(),r=h(s=>s.sellFungible)?.data.chain.id??z.Solana.Mainnet;return{tokenAccountFee:(0,Ng.useMemo)(()=>Jt(t)?MI.calculate({currentQuote:t,networkID:r,priceMap:e}):QI.calculate(),[t,r,e])}};i();a();var Lg=C(R());var Ug={calculate:({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:r,priceMap:n})=>{let s=e.amount.plus(t.amount).plus(o.amount);return{amount:s,uiAmount:Bt(r,s,n),pct:0}}},qI={calculate:({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:r,priceMap:n})=>{let s=Ug.calculate({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:r,priceMap:n}),p=e.amount.plus(t.maxAmount??0).plus(o.amount);return{...s,maxAmount:p,maxUiAmount:Bt(r,p,n)}}},_g=({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,priceMap:r})=>{let s=h(u=>u.sellFungible)?.data.chain.id??z.Solana.Mainnet;return{totalFees:(0,Lg.useMemo)(()=>v.isEVMNetworkID(s)?qI.calculate({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:s,priceMap:r}):Ug.calculate({tokenAccountFee:e,networkFee:t,nonIncludedFees:o,networkID:s,priceMap:r}),[t,s,o,r,e])}};var Ze=()=>{let e=h(S=>S.isFetchingGasEstimation),t=to(),{data:o={}}=st({query:{data:t.map(S=>Ge(S))}}),{networkFee:r,isFetchingGasEstimationPrice:n}=Cg(),s=e||n,{phantomFee:p}=Dg(),{tokenAccountFee:u}=Bg({priceMap:o}),{nonIncludedFees:c}=Pg({priceMap:o}),{totalFees:m}=_g({tokenAccountFee:u,networkFee:r,nonIncludedFees:c,priceMap:o}),{destinationNetworkFee:g,liquidityFee:f}=Eg();return(0,Og.useMemo)(()=>({phantomFee:p,networkFee:r,tokenAccountFee:u,totalFees:m,nonIncludedFees:c,destinationNetworkFee:g,liquidityFee:f,isFetchingFees:s}),[p,r,u,m,c,g,f,s])};i();a();var Mg=C(R());var GI=.05,VI=({sellNetworkId:e,buyNetworkId:t,destinationMinRequiredBalance:o,priceMap:r})=>{if(!e||!t||!r)return new te(0);let n=ae(Ge(v.getChainID(e))),s=ae(Ge(v.getChainID(t))),p=r[n]?.usd,u=r[s]?.usd;if(!p||!u)return new te(0);let c=X(o.toNumber(),v.getTokenDecimals(t)),m=Te(c.toNumber(),u),g=je(m,p,v.getTokenDecimals(e));return new te(g).times(1+GI)},zs=()=>{let e=Os(),t=Ar(),o=h(F=>F.sellFungible)??t,r=h(F=>F.buyFungible)??e,n=o.data.chain.id,s=r?.data.chain.id,p=s??n,u=Ae(n,s),{fungible:c}=it({key:r?.data.key}),{data:m}=re(),g=(0,Mg.useMemo)(()=>m?.addresses.find(F=>F.networkID===p),[m,p]),S=to().map(F=>Ge(F)),{data:w}=st({query:{data:S},queryOptions:{refetchInterval:!1}}),{data:y=0}=Rn(g),A=new te(y),b=u?VI({sellNetworkId:n,buyNetworkId:s,destinationMinRequiredBalance:A,priceMap:w}):A;return c?void 0:b};function Op(){let e=Ar(),t=h(J=>J.sellFungible)??e,o=h(J=>J.buyFungible),r=h(J=>J.primaryCurrency),n=h(J=>J.isFetchingQuote),s=h(J=>J.sellAmount),p=h(J=>J.uiSellAmount),u=h(J=>J.setSellFungible),c=h(J=>J.uiSellAmountFiatInput),m=h(J=>J.amountType),g=h(J=>J.setSwapFilter),f=Hs(t),S=t?.data.key,{fungible:w}=it({key:S}),y=t?.data.chain.id,A=o?.data.chain.id,{totalFees:b}=Ze(),{data:F}=Pn({networkID:y}),I=Ae(y,A),E=zs(),T=t?.data.amount,x=t?t.data.decimals:0,P=(0,et.useMemo)(()=>$s({sellFungible:t,totalFees:b.amount,transactionSpeedsToUnitCost:v.isEVMNetworkID(t.data.chain.id)?F:void 0,isBridge:I,destinationMinRequiredBalance:E}),[t,b.amount,F,I,E]),O=(0,et.useMemo)(()=>m==="buy"?new te(p).isLessThanOrEqualTo(new te(P)):s===""?!0:new te(s).isLessThanOrEqualTo(new te(P)),[m,P,s,p]),{currentQuote:M}=q(),{data:H}=Be({query:{data:V(t)}}),Q=H?.usd,{data:W}=Be({query:o?{data:V(o)}:void 0}),Y=wg(),ge=Tg(),G=Ig(),ee=hg(),B=(0,et.useCallback)(()=>{let J=M?.sellAmount?X(M?.sellAmount,x).toString():s,io=M?.buyAmount,ft=o?.data.decimals??0,Sn=W?.usd;Y({buyAmountFromQuote:io,buyFungibleDecimals:ft,buyFungibleUsdPrice:Sn,sellAmountFromQuote:J,sellFungibleUsdPrice:Q})},[M?.sellAmount,M?.buyAmount,x,s,o?.data.decimals,W?.usd,Y,Q]),he=(0,et.useCallback)(J=>{ge({fungibleValue:J,decimals:x,shouldUpdateQuote:!0})},[x,ge]),me=(0,et.useCallback)(J=>{G({priceData:H,fiatValue:J,decimals:x,shouldUpdateQuote:!0})},[x,H,G]),ye=(0,et.useCallback)(J=>{g(J);let io=te(P).multipliedBy(J);if(r==="crypto")ge({fungibleValue:io.toString(),decimals:x,shouldUpdateQuote:!0});else if(Q){let ft=Te(Number(io),Q);G({priceData:H,fiatValue:ft.toString(),decimals:x,shouldUpdateQuote:!0})}},[g,P,r,Q,ge,x,G,H]);(0,et.useEffect)(()=>{w&&w.data.amount!==T&&u(w)},[w,T,u]),(0,et.useEffect)(()=>{m==="buy"&&f&&ee({amount:M?.sellAmount,decimals:x,usdPrice:Q})},[m,M?.sellAmount,x,H?.usd,f,Q,ee]);let $=Ms();return{maxSellAmount:P,sellFungible:t,notEnoughAssets:!O,uiSellAmount:p,uiSellAmountFiatInput:c,hasMinimumSellAmount:$,isFetchingQuote:n,handleToggleCurrencyClick:B,handleFiatAmountInputChange:me,handleCryptoAmountInputChange:he,handleSwapFilterClick:ye}}i();a();var $e=C(R());i();a();var KI=50,Qg=({includeOwnedAssets:e,sellAsset:t,ownedAssets:o,searchAssets:r})=>{if(!e||!t)return r;let n=f=>ae(V(f)),s=n(t),p=t.data.chain.id,u=o.filter(f=>n(f)!==s&&v.compareNetworkID(p,f.data.chain.id)===0).slice(0,KI-1),c=u.map(f=>[n(f),f]),m=new Map(c),g=r.filter(f=>!m.has(n(f)));return[...u,...g]};function HI({enableQuery:e=!0}={}){let{sellFungible:t,searchQuery:o,setSearchQuery:r,setNumSearchResults:n}=h(),s=Ic(o,150),{fungibles:p,isLoadingTokens:u,isRefetchingTokens:c,tokensError:m}=At(),g=Nt(),[f,S]=(0,$e.useState)(""),{data:w}=re(),y=(0,$e.useMemo)(()=>w?.addresses??[],[w]),{data:A,isSuccess:b,isFetching:F,error:I}=yo({query:s,networkIds:[t?.data.chain.id??v.solana.mainnetID],enableQuery:e,keepPreviousData:!0,searchContext:"swapper",supportedNetworkIds:g,chainAddresses:y}),E=!b&&F,T=(0,$e.useMemo)(()=>p.map(Q=>[ae(V(Q)),Q]),[p]),x=(0,$e.useMemo)(()=>{let Q=Ac(T.map(([Y])=>Y).join("~")),W=hc(Q);return wc(W)},[T]),P=(0,$e.useMemo)(()=>new Map(T),[x]),O=(0,$e.useMemo)(()=>{if(!A||A.length===0)return[];S(dc());let Q=A.reduce((W,Y)=>{let ge="";if(Ce(Y.type)){if(t&&Ce(t.type)&&Y.data.chain.id===t.data.chain.id)return W;ge=ae(Ge(v.getChainID(Y.data.chain.id)))}else{if(t&&Y.data.tokenAddress===t.data.tokenAddress)return W;ge=ae(V(Y))}let G,ee=P.get(ge);return ee&&ee.data.balance?G=ee:G=Y,G&&W.push(G),W},[]);return n(Q.length),Q},[P,A,t,n]),M=K();(0,$e.useEffect)(()=>{b&&O.length===0&&M.capture("swapperNullSearchResult",{data:{searchQuery:s}})},[b,O,s,M]);let H=(0,$e.useMemo)(()=>Qg({includeOwnedAssets:!s,sellAsset:t,ownedAssets:p,searchAssets:O}),[s,p,O,t]);return(0,$e.useMemo)(()=>({assets:H,initialFilterKey:t?.data.chain.id,isLoading:u||E,isFetching:u||E||c,error:m??I,searchRef:f,setSearchQuery:r}),[H,u,E,c,m,I,t,f,r])}i();a();var Ie=C(R()),Gg=C(Pp());i();a();var js="https://help.phantom.app/hc/en-us/articles/27085326202515";var Bo=[.3,.5,1],$I=Bo.map(e=>`${e}%`),Vg=[...$I,"custom"],Kg=Vg.length-1,zI=5,jI=2,Mp=.1,Qp=30,WI=1,qg=(e,t)=>{if(!e)return;let o=parseFloat(e);if(isNaN(o))return{message:t("swapSlippageSettingsCustomInvalidValue"),severity:"critical"};if(o>Qp)return{message:t("swapSlippageSettingsCustomMaxError",{maxSlippage:Qp}),severity:"critical"};if(o>WI)return{message:t("swapSlippageSettingsHighSlippageWarning"),severity:"warning"};if(o<Mp)return{message:t("swapSlippageSettingsCustomMinError",{minSlippage:Mp}),severity:"critical"}},YI=e=>e&&Bo.indexOf(e)!==-1?Bo.indexOf(e):e?Kg:0,XI=e=>e&&Bo.indexOf(e)===-1?`${e}`:"",JI=({onDismiss:e})=>{let{t}=ot(),o=K(),{data:r,isFetched:n}=ko(),{mutateAsync:s}=Qs(),{selectedSetting:p,isFetched:u,setSlippageSetting:c}=Pe(),[m,g]=(0,Ie.useState)(p.type),f=(0,Gg.default)(u),[S,w]=(0,Ie.useState)(!1),[y,A]=(0,Ie.useState)(0),[b,F]=(0,Ie.useState)(),[I,E]=(0,Ie.useState)(""),[T,x]=(0,Ie.useState)(),P=m==="auto",O=y===Kg,M=P?!1:T?.severity==="critical"||O&&!I;(0,Ie.useEffect)(()=>{f!==u&&m!==p.type&&g(p.type)},[f,u,p.type,m]);let H=(0,Ie.useCallback)(ee=>{y!==ee&&(x(void 0),A(ee),Bo[ee]?(F(Bo[ee]),E("")):F(void 0))},[y]),Q=(0,Ie.useCallback)(ee=>{let B=Qt(ee.substring(0,zI)),he=tt(B,jI),me=parseFloat(he);if(isNaN(me)){x(void 0),E("");return}E(he),x(qg(he,t))},[t]),W=(0,Ie.useCallback)(()=>{if(!P)if(O){let ee=parseFloat(I??"");s(ee),o.capture("slippageChanged",{data:{slippageValue:ee,slippageType:"custom"}}),F(void 0)}else b&&(s(b),o.capture("slippageChanged",{data:{slippageValue:b,slippageType:"preset"}}),E(""));c({type:m}),e()},[P,c,m,e,O,b,I,s,o]),Y=(0,Ie.useCallback)(()=>{let ee=YI(r),B=XI(r);A(ee),F(Bo[ee]),E(B),x(qg(B,t)),g(p.type)},[r,t,p.type]),ge=(0,Ie.useCallback)(()=>{g(m==="auto"?"fixed":"auto")},[m,g]),G=(0,Ie.useMemo)(()=>({title:t("swapSlippageSettingsTitle"),subtitle:t("swapSlippageSettingsSubtitle",{minSlippage:Mp,maxSlippage:Qp}),custom:t("swapSlippageSettingsCustom"),auto:t("swapSlippageSettingsAuto"),autoSubtitle:t("swapSlippageSettingsAutoSubtitle"),learnMore:t("commandLearnMore"),button:t("commandConfirm")}),[t]);return(0,Ie.useEffect)(()=>{!S&&n&&(Y(),w(!0))},[n,S,Y]),{options:Vg,selectedIndex:y,customSlippageValue:I,i18nStrings:G,error:T,submitDisabled:M,isAutoEnabled:P,autoLearnMoreUrl:js,onConfirm:W,onDismiss:e,onSelectOption:H,onChangeCustomSlippage:Q,onResetToDefault:Y,onToggleAutoSlippage:ge}};i();a();var Lo=C(R());i();a();i();a();var Hg=()=>[{chainId:"solana:101",address:"2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo",resourceType:"address"}];var $g=e=>{let t=[];return ev(e)&&!tv(e)&&t.push({level:"warn",titleKey:"swapAssetWarningPermanentDelegate"}),(e.data.spamStatus==="NOT_VERIFIED"||e.data.spamStatus==="SPAM"||e.data.spamStatus==="POSSIBLE_SPAM")&&t.push({level:"info",titleKey:"swapAssetWarningUnverified"}),t};function ev(e){let t=e.data;return t?.mintExtensions?t.mintExtensions.some(o=>o.extension==="permanentDelegate"):!1}function tv(e){let t=V(e),o=Hg();return t.resourceType==="address"?o.some(r=>r.resourceType===t.resourceType&&r.address===t.address&&r.chainId===t.chainId):!1}i();a();var jg=C(R());i();a();function zg(){return[new Gp,new qp]}var qp=class{isEditable(t,o){return!Ae(t?.data.chain.id,o?.data.chain.id)}},Gp=class{isEditable(){return ve.isFeatureEnabled("enable-swapper-exact-out")}};var Vp=(e,t)=>{let o=(0,jg.useMemo)(()=>zg(),[]);return t?o.every(r=>r.isEditable(e,t)):!1};i();a();var Yg=C(R());i();a();var Kp=class{isSupported(t,o,r,n,s){switch(t){case"sell":return!!(r&&s);case"buy":return!1}}},Hp=class{isSupported(t){return t!=="buy"}};function Wg(){return[new Kp,new Hp]}var Ws=(e,t,o,r,n)=>(0,Yg.useMemo)(()=>Wg(),[]).every(p=>p.isSupported(e,t,o,r,n));i();a();var $p=class{format(t,o){return`${Gt(t)} ${o}`}},zp=class{format(t,o){return`${Fn(t,{compact:!0})} ${o}`}},jp=class{format(t){return Fn(t,{compact:!0})}};function Xp(e){switch(e){case"full":return new $p;case"compact":return new zp;case"compactNoSymbol":return new jp}}var Wp=class{format(t,o,r,n){switch(o){case"crypto":return co(Te(Number(t),n));case"fiat":return`${Gt(je(Number(t),n,r.data?.decimals??0))} ${r.data.symbol??""}`}}},Ys=class{format(t,o,r,n){switch(o){case"crypto":return co(Te(Number(t),n),{compact:!0});case"fiat":return Fn(je(Number(t),n,r.data?.decimals??0),{compact:!0})}}},Yp=class{constructor(t){this.noSymbolDisplayStrategy=t}format(t,o,r,n){let s=this.noSymbolDisplayStrategy.format(t,o,r,n);switch(o){case"crypto":return s;case"fiat":return`${s} ${r.data?.symbol??""}`}}};function Jp(e){switch(e){case"full":return new Wp;case"compact":return new Yp(new Ys);case"compactNoSymbol":return new Ys}}var ov=Mt?[.25,.5,1]:[.5,1],Xg=Mt?Xp("full"):Xp("compactNoSymbol"),Jg=Mt?Jp("full"):Jp("compact"),rv={chainId:z.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"},nv=()=>{let t=h(ye=>ye.amountType)==="sell"?"sell":"buy",o=h(ye=>ye.primaryCurrency),r=o==="fiat"?"$":void 0,n=h(ye=>ye.swapFilter),s=h(ye=>ye.setSwapFilter),p=Gc(),{handleCryptoAmountInputChange:u,handleFiatAmountInputChange:c,sellFungible:m,uiSellAmount:g,isFetchingQuote:f,notEnoughAssets:S,hasMinimumSellAmount:w,handleToggleCurrencyClick:y,uiSellAmountFiatInput:A,handleSwapFilterClick:b,maxSellAmount:F}=Op(),I=h(ye=>ye.buyFungible),E=I?V(I):rv,T=ty(E),x=ty(V(m)),P=Ws("sell",m,x,I,T),O=(0,Lo.useMemo)(()=>({fungible:m,amount:o==="crypto"?g:A,secondaryAmount:Zg(o==="crypto"?g:A,m,o,Jg,x),balance:ey(m,Xg,p,F),isAmountLoading:f&&t!=="sell",isSecondaryAmountLoading:f,isWarning:S||!w,isAmountEditable:!0,supportsCurrencyDenominationSwitching:P,amountPrefix:r,filters:ov,selectedFilter:n,warnings:[]}),[m,o,g,A,x,p,F,f,t,S,w,P,r,n]),{handleSwitchTokensClick:M,cryptoAmountInputValue:H,fiatAmountInputValue:Q,handleCryptoAmountInputChange:W}=_p(),Y=Ws("buy",m,x,I,T),ge=Vp(m,I),G=(0,Lo.useMemo)(()=>{if(I)return{fungible:I,perspective:"buy",balance:ey(I,Xg,p),amount:o==="crypto"?H:Q,secondaryAmount:Zg(o==="crypto"?H:Q,I,o,Jg,T),isAmountLoading:f&&t!=="buy",isSecondaryAmountLoading:f,isWarning:!1,isAmountEditable:ge,supportsCurrencyDenominationSwitching:Y,amountPrefix:r,filters:[],selectedFilter:void 0,warnings:$g(I)}},[I,p,o,H,Q,T,f,t,ge,Y,r]),ee=(0,Lo.useCallback)((ye,$)=>{switch(s(void 0),ye){case"sell":o==="crypto"?u($):c($);break;case"buy":if(o==="fiat")return;W($);break}},[s,o,u,c,W]),B=K(),he=(0,Lo.useCallback)(async()=>{t==="sell"&&(y(),await B.capture("swapperToggleQuoteCurrency",{data:{value:o==="fiat"?"native":"fiat"}}))},[t,B,o,y]),me=(0,Lo.useCallback)((ye,$)=>{$==="sell"&&b(ye)},[b]);return{switchPerspective:M,sell:O,buy:G,setAmount:ee,switchCurrencyDenomination:he,setFilter:me,currencyDenomination:o}};function Zg(e,t,o,r,n){let s=t.data?.symbol??"",p=Number(e);switch(o){case"crypto":if(!n||p===0)return;break;case"fiat":if(!n)return`0 ${s}`;break}return r.format(p,o,t,n)}function ey(e,t,o,r){let n=r?te(r):e.data?.balance;if(!(!n||o))return t.format(n,e.data?.symbol??"")}var ty=e=>{let{data:t}=Be({query:{data:e}});return t?.usd};i();a();var sv=["lastSubmittedPairs","slippageTolerance"],Zp=e=>{let t=String(e.queryKey[1]);return sv.includes(t)};i();a();var oy=C(R());function ec(e){let{t}=ot();return(0,oy.useMemo)(()=>{let{networkFee:o,phantomFee:r,tokenAccountFee:n,nonIncludedFees:s,destinationNetworkFee:p,liquidityFee:u}=e;return{networkFee:{label:t("swapQuoteNetwork"),value:o.uiAmount,maxValue:o.maxUiAmount},bridgeFee:{label:t("swapQuoteBridgeFee"),value:s.uiAmount,maxValue:s.maxUiAmount},tokenAccountFee:{label:t("swapQuoteOneTimeTokenAccount"),value:n.uiAmount},phantomFeePercent:{label:r.pct?t("swapQuoteFeeDisclaimer",{feePercentage:Ec(r.pct)}):"",value:r.pct?`${r.pct}`:""},destinationNetworkFee:{label:t("swapQuoteDestinationNetwork"),value:p.uiAmount},liquidityProviderFee:{label:t("swapQuoteLiquidityProvider"),value:u.uiAmount}}},[e,t])}i();a();var ry=C(R());function iv(){let e=K(),t=h(f=>f.buyFungible),o=h(f=>f.sellFungible),r=h(f=>f.setBuyFungible),n=h(f=>f.setSellFungible),s=h(f=>f.setSellAmount),p=h(f=>f.setUiSellAmount),u=h(f=>f.resetQuote),c=h(f=>f.setSwapFilter),m=o?.data.amount,{cancelQuotes:g}=Gs();return(0,ry.useCallback)(async f=>{if(o&&Ro(f,o)){f&&f.data.amount!==m&&(n(f),c(void 0));return}await g();let S=Vs(f);e.capture("swapperUpdateFromAsset",{data:S}),n(f),c(void 0),t&&o&&Ro(f,t)&&r(o),f&&o?.data.chain.id!==f.data.chain.id&&(u(),r(void 0),s(""),p(""))},[e,t,g,m,u,o,r,s,n,c,p])}i();a();var uy=C(R());i();a();var no=C(R());i();a();i();a();i();a();var Xs=class{sections(t){let o=Lt().map(s=>s.programId),r=t.reduce((s,p)=>{if(p.data.spamStatus==="VERIFIED")return s.verified.push(p),s;if(p.type!=="SPL"||!p.data.ugcTokenMeta||p.data.ugcTokenMeta.status==="graduated"||!o.includes(p.data.ugcTokenMeta.programId))return s.unverified.push(p),s;let u=p.data.ugcTokenMeta.programId,c=s[u]??[];return c.push(p),s[u]=c,s},{verified:[],unverified:[]}),n=Lt().map(s=>{let p=r[s.programId]??[];return{id:s.programId,header:{title:N.t("swapSectionTitleTokens",{section:s.name}),iconUrl:s.iconUrl},data:p,behavior:"collapsible"}});return[{id:"verified",data:r.verified,behavior:"static"},{id:"unverified",header:{title:N.t("swapUnverifiedTokens")},data:r.unverified,behavior:"collapsible"},...n]}};i();a();var Js=class{sections(t){let o=t.filter(n=>n.data.spamStatus==="VERIFIED"),r=t.filter(n=>n.data.spamStatus!=="VERIFIED");return[{id:"verified",data:o,behavior:"static"},{id:"unverified",header:{title:N.t("swapUnverifiedTokens")},data:r,behavior:"static"}]}};function sy(e){return e?new Xs:new Js}i();a();var ay=C(R());i();a();var Zs=C(R());var iy=()=>{let{data:e}=Je({key:"lastSelectedTokens",queryKey:fe.lastSelectedTokens()}),t=(0,Zs.useMemo)(()=>e?JSON.parse(e):{},[e]),{mutateAsync:o}=dt({key:"lastSelectedTokens",queryKey:fe.lastSelectedTokens()}),r=(0,Zs.useCallback)(async n=>{let s={...t,[n]:!0};await o(JSON.stringify(s))},[t,o]);return{lastSelectedTokens:t,storeSelectedToken:r}};i();a();var ei=class{constructor(t,o){this.lastSelectedTokens=t;this.storeSelectedToken=o}intercept(t){let o=ae(V(t));return this.lastSelectedTokens[o]||this.storeSelectedToken(o),"continue"}};i();a();i();a();var ti=class{constructor(t){this.lastSelectedTokens=t}intercept(t,o){switch(t.type){case"SPL":{let r=ae(V(t)),n=this.lastSelectedTokens[r];return t.data.ugcTokenMeta?.status==="preDeploy"&&!n?(pg(t),o("ugcWarning"),"interrupt"):"continue"}default:return"continue"}}};function cv({enableUgcSwaps:e,lastSelectedTokens:t,storeSelectedToken:o}){let r=[];return e&&r.push(new ei(t,o),new ti(t)),r}function py(e){let{lastSelectedTokens:t,storeSelectedToken:o}=iy();return(0,ay.useMemo)(()=>cv({enableUgcSwaps:e,lastSelectedTokens:t,storeSelectedToken:o}),[e,t,o])}var cy=(0,no.createContext)(void 0),uv=({children:e})=>{let{data:[t]}=ie(["enable-ugc-swaps"]),o=(0,no.useMemo)(()=>sy(t),[t]),r=py(t);return no.default.createElement(cy.Provider,{value:{buyAssetSectionAdapter:o,interceptors:r}},e)},dn=()=>{let e=(0,no.useContext)(cy);if(!e)throw new Error("useSwapAssetSelect must be used within a SwapAssetSelectProvider");return e};var lv=()=>{let{interceptors:e}=dn();return{executeInterceptors:(0,uy.useCallback)((o,r)=>{for(let n of e)if(n.intercept(o,r)==="interrupt")return"interrupt";return"continue"},[e])}};i();a();var Uo=C(R());var ly=3;function tc(e){return{id:e.id,data:e.data,...e.header?{header:e.header}:{}}}var mv=e=>{let[t,o]=(0,Uo.useState)({}),r=(0,Uo.useCallback)((p,u)=>o(c=>({...c,[p]:u})),[]),{buyAssetSectionAdapter:n}=dn(),s=(0,Uo.useMemo)(()=>n.sections(e),[n,e]);return(0,Uo.useMemo)(()=>s.map(p=>{switch(p.behavior){case"static":return tc(p);case"collapsible":{if(p.data.length<=ly)return tc(p);let u=t[p.id],c=u?p.data:p.data.slice(0,ly),m=()=>r(p.id,!u),g=tc(p);return{...g,header:{...g.header,button:{label:u?N.t("commandShowLess"):N.t("commandShowMore"),onClick:m}},data:c}}}}),[s,t,r])};i();a();var dv=()=>{let e=Z(),t=j();return ne({mutationFn:async r=>{await Tu(e,r),t.setQueryData(["termsHaveBeenAcknowledged2"],r)}})};i();a();i();a();var my=async e=>!!await e.get("termsHaveBeenAcknowledged2");var oc=()=>{let e=Z(),t=async()=>!!await my(e);return D({queryKey:["termsHaveBeenAcknowledged2"],queryFn:t})};i();a();i();a();var Sv=C(R());i();a();var dy=Tn(K,e=>new rc(e)),rc=class{constructor(t){this.onOpen=()=>this.#e.capture("connectHardwareOpen");this.onSelectedChains=t=>{let o=new Set(t),r=[];for(let s of v.getAllChainIDs())o.has(s)&&r.push(s);let n={numChains:r.length,selectedChains:r.map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(", ")};this.#e.capture("connectHardwareSelectedChains",{data:n})};this.onDerivedAccounts=t=>{let o={};for(let[r,n]of Object.entries(t.derivedAddresses)){if(!fv(r))continue;let s={numberOfDerivedAccounts:n.addresses.length};n.duration!==void 0&&(s.derivationDuration=n.duration),o[r]=s}this.#e.capture("connectHardwareAccountsDerived",{data:{...o}})};this.onDiscoveredAccounts=t=>{let{discoveredAccounts:o}=t,r={};for(let n of o){if(n.status==="undiscovered")continue;let s=n.accounts.reduce((p,{derivationPathType:u,hasAccountActivity:c})=>{let m=uo.getAddressType(u);return p[m]={derivationPathType:u,hasAccountActivity:c},p},{});for(let{hasAccountActivity:p,derivationPathType:u}of Object.values(s)){if(!p)continue;let c=r[u]??0;r[u]=c+1}}this.#e.capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:r}})};this.onConnectedAccounts=t=>{let o={};for(let r of t.accounts){let n=[...r.addresses,...r.publicKeys].reduce((s,p)=>{let u=uo.getAddressType(p.pathType);return s[u]=p.pathType,s},{});for(let s of Object.values(n)){let p=o[s]??0;o[s]=p+1}}this.#e.capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:t.accounts.length,numberOfAccountsImportedByDerivationPath:o}})};this.#e=t}#e};function fv(e){return typeof e!="string"?!1:Object.keys(Si).includes(e)}i();a();i();a();var vZ=["firstTimeOnboarding","isResettingApp"];i();a();i();a();var oi="@phantom/onboarding",Ut={firstTimeOnboarding:[`${oi}:first-time-onboarding`],isResettingApp:[`${oi}:is-resetting-app`],deriveLedgerAccounts:[`${oi}:derive-ledger-accounts`],discoverLedgerAccounts:[`${oi}:discover-ledger-accounts`]};i();a();i();a();i();a();i();a();var wv="/discover/v1",Av={Accept:"application/json"},hv=e=>{if(!e||!Array.isArray(e.accounts))return!1;for(let t of e.accounts)if(!(typeof t.address=="string"&&typeof t.amount=="string"&&(!t.lastActivityTimestamp||typeof t.lastActivityTimestamp=="number")&&t.chain&&typeof t.chain.id=="string"&&new Set(v.getAllNetworkIDs()).has(t.chain.id)&&typeof t.chain.name=="string"&&typeof t.chain.symbol=="string"&&typeof t.chain.imageUrl=="string"))return!1;return!0},bv=e=>!!e&&typeof e.message=="string",nc=async e=>{if(!e.accounts.length)throw new Error("Must send at least 1 account for discovery");let t=await _.api().headers(Av).post(wv,e),o=t.data;if(!se(t))throw bv(o)?new Error(o.message):new Error(`Unable to discover accounts with args: ${JSON.stringify(e)}`);if(hv(o))return o;throw new Error(`Invalid discover accounts response: ${JSON.stringify(o)}`)};var Tv="fetch-multi-chain-accounts-by-seed",Fv=()=>["bitcoinTaproot","bitcoinNativeSegwit"],Iv=()=>["bip44Change","bip44","deprecated"],vv=()=>["bip44Ethereum","bip44EthereumSecondary","bip44EthereumTertiary"],Ev=(e,t)=>Fv().map(o=>{let r={pathType:o,index:e},{publicKey:n}=t.derivePathType(o,e),s=uo.getAddressType(o),p=In({publicKey:n,addressType:s});return{chainType:s,chainId:z.Bitcoin.Mainnet,address:p,publicKey:Buffer.from(n).toString("hex"),pathParams:r}}),xv=(e,t)=>vv().map(o=>{let r={pathType:o,index:e},{publicKey:n}=t.derivePathType(o,e),s=uo.getAddressType(o),p=In({publicKey:n,addressType:"eip155"});return{chainType:s,pathType:o,address:p,publicKey:Buffer.from(n).toString("hex"),pathParams:r}}),Cv=(e,t)=>Iv().map(o=>{let r={pathType:o,index:e},n=t.derivePathType(o,e),s;switch(o){case"bip44Root":case"bip44":case"bip44Change":s=n.publicKey;break;case"deprecated":s=kc(n.secretKey).publicKey;break}let p=In({publicKey:s,addressType:"solana"});return{chainType:"solana",chainId:z.Solana.Mainnet,address:p,publicKey:Buffer.from(s).toString("hex"),pathParams:r}}),Rv=1e4,fy=async(e,t=!0)=>{let o=Object.assign({},...e);try{let r=Object.values(o).map(({account:f})=>({address:f.address,chainId:f.chainId})),n;t?n=(await Tc(async()=>hn(nc({accounts:r}),Rv),()=>!0,2)).accounts:n=(await nc({accounts:r})).accounts;let s={};for(let f of n){let{account:S}=o[`${f.chain.id}-${f.address}`],w=S.publicKey,y=S.chainType,A=vn(S.pathParams),b={...f,publicKey:w,chainType:y,derivationPathType:S.pathParams.pathType,hasAccountActivity:!!f.lastActivityTimestamp||parseFloat(f.amount)>0};s[A]=[...s[A]||[],b]}Object.keys(s).forEach(f=>{s[f]=s[f].sort((S,w)=>v.compareNetworkID(S.chain.id,w.chain.id))});let p=Object.values(s),u=p.filter(f=>f.some(S=>S.hasAccountActivity)),c=!!u.length;return(c?u:p).map(f=>{let S=f[0];return{status:"discovered",seedIndex:o[`${S.chain.id}-${S.address}`].account.pathParams.index??-1,isSelectedByDefault:c,accounts:f}})}catch{let r=Object.values(o).map(({account:u})=>u),n={};for(let u of r){let{account:c}=o[`${u.chainId}-${u.address}`],m=vn(c.pathParams),g={...u,chain:{id:u.chainId,name:v.getNetworkName(u.chainId),symbol:v.getTokenSymbol(u.chainId)},chainType:uo.getAddressType(c.pathParams.pathType),derivationPathType:c.pathParams.pathType,hasAccountActivity:!1};n[m]=[...n[m]||[],g]}return Object.keys(n).forEach(u=>{n[u]=n[u].sort((c,m)=>v.compareNetworkID(c.chain.id,m.chain.id))}),Object.values(n).map(u=>{let c=u[0];return{status:"undiscovered",seedIndex:o[`${c.chain.id}-${c.address}`].account.pathParams.index??-1,accounts:u,isSelectedByDefault:!1}})}},Pv=async({hdWallet:e,startIndex:t,endIndex:o,enabledAddressTypes:r,enabledChains:n})=>{let s=[];for(let p=t;p<=o;++p){let u={};if(r.includes("bip122_p2wpkh"))for(let c of Ev(p,e))u[`${z.Bitcoin.Mainnet}-${c.address}`]={account:c};if(r.includes("eip155")){let c=xv(p,e),m=n.filter(g=>v.isEVMNetworkID(v[g].mainnetID));for(let g of m){let f=v[g];for(let{address:S,publicKey:w,chainType:y,pathParams:A}of c)u[`${f.mainnetID}-${S}`]={account:{chainType:y,chainId:f.mainnetID,address:S,publicKey:w,pathParams:A}}}}if(r.includes("solana"))for(let c of Cv(p,e))u[`${c.chainId}-${c.address}`]={account:c};s.push(u)}return fy(s)};function hee({batchSize:e,hdWallet:t,enabledAddressTypes:o,enabledChains:r}){let n=!!t&&o.length!=0;return po({enabled:n,queryKey:[Tv,e],queryFn:async({pageParam:c=0})=>{try{if(e<1)throw new Error(`Need positive batchSize: ${e}`);if(!t)throw new Error("Missing HDWallet");let m=[],g=[],f=c===0,S=c,w=!0;for(;w;){let y=S,A=S+e-1,F=(await Pv({hdWallet:t,startIndex:y,endIndex:A,enabledAddressTypes:o,enabledChains:r})).flat(1);S+=e,w=!1;for(let I of F)m.push(I),(I.status==="undiscovered"||I.isSelectedByDefault)&&g.push(I),f&&I.status==="discovered"&&I.isSelectedByDefault&&(w=!0)}if(f&&g.length===0&&m.length>1){let y=m[0],A=y.accounts.map(F=>({...F,hasAccountActivity:!1})),b={status:"undiscovered",seedIndex:y.seedIndex,accounts:A,isSelectedByDefault:!1};g.push(b)}return g}catch(m){throw m instanceof Error&&L.captureError(m,"account"),m}},getNextPageParam:(c,m)=>{let g=m.length,f=g?m[0]:[],S=f.length?kv(f[f.length-1].seedIndex,e):0;return g===1?S:S+e*(g-1)},gcTime:0,staleTime:0,initialPageParam:0})}var kv=(e,t)=>Math.ceil(e/t)*t+t;i();a();i();a();var Dv=()=>{let e=Z(),t=async()=>{let r=await e.get("firstTimeOnboarding");return r===null?!0:r.isFirstTimeOnboarding},{data:o}=D({queryKey:Ut.firstTimeOnboarding,queryFn:t});return o},Nv=()=>{let e=Z(),t=j();return ne({mutationFn:async r=>{await e.set("firstTimeOnboarding",{isFirstTimeOnboarding:r}),Fu(e,r?void 0:Date.now()),t.setQueryData(Ut.firstTimeOnboarding,r)}})};i();a();var Bv=()=>{let e=Z(),t=async()=>{let r=await e.get("isResettingApp");return r===null?{isResettingApp:!1,isFirstTimeResettingApp:!1}:r},{data:o}=D({queryKey:Ut.isResettingApp,queryFn:t});return o},Lv=()=>{let e=Z(),t=j();return ne({mutationFn:async r=>{let s=(await e.get("isResettingApp"))?.isFirstTimeResettingApp??!1;await e.set("isResettingApp",{isResettingApp:r,isFirstTimeResettingApp:s}),t.setQueryData(Ut.isResettingApp,{isResettingApp:r,isFirstTimeResettingApp:s})}})},Uv=()=>{let e=Z(),t=j();return ne({mutationFn:async r=>{let s=(await e.get("isResettingApp"))?.isResettingApp??!1;await e.set("isResettingApp",{isResettingApp:s,isFirstTimeResettingApp:r}),t.setQueryData(Ut.isResettingApp,{isResettingApp:s,isFirstTimeResettingApp:r})}})};i();a();i();a();var fn=()=>{let{selectedSetting:e}=Pe(),t=h(s=>s.selectedProviderIndex),o=h(s=>s.quoteResponse),r=oo(t,e.type,o),{data:n}=ko();return r??n??void 0};i();a();var _v="https://help.phantom.app/hc/en-us/articles/33745013398675";i();a();var Ov=e=>bs.safeParse(e).success;i();a();var _t=C(R());i();a();i();a();i();a();var ri=class{intercept({hasViewedAutoSlippageOptIn:t,selectedSetting:o,setHasViewedAutoSlippageOptIn:r,showOverlay:n}){return!t&&o!=="auto"?(n("autoSlippageOptIn"),r(!0),"interrupt"):"continue"}};i();a();var ni=class{intercept(){let{review:t}=Xt();return t?Io(t):en(),"continue"}};function gy(e){let t=[new ni];return e&&t.push(new ri),t}var yy=(0,_t.createContext)(void 0),Qv=({children:e})=>{let{data:[t]}=ie(["enable-auto-slippage"]),o=(0,_t.useMemo)(()=>t?["auto","fixed"]:["fixed"],[t]),r=(0,_t.useMemo)(()=>gy(t),[t]),n=lc;return _t.default.createElement(yy.Provider,{value:{slippageSettingTypes:o,reviewInterceptors:r,inspectorEnabled:n}},e)},sc=()=>{let e=(0,_t.useContext)(yy);if(!e)throw new Error("useSwapper must be used within a SwapperProvider");return e};i();a();var so=C(R());i();a();i();a();function Sy(){return Xt().review!==null?1:0}var wy=(0,so.createContext)(void 0),Gv=({children:e})=>{let t=(0,so.useMemo)(()=>Sy(),[]);return so.default.createElement(wy.Provider,{value:{infoRowDisplayStrategy:t}},e)},Vv=()=>{let e=(0,so.useContext)(wy);if(!e)throw new Error("useSwapReview must be used within a SwapReviewProvider");return e};i();a();var Me=C(R());i();a();i();a();var _o=C(R());i();a();i();a();var si=e=>e&&pe(e)?e.executionDuration:0;var Ay=e=>{let t=si(e);return Do(t)};i();a();var hy=({networkID:e,txReceipt:t,preferredExplorers:o})=>{let r=t?.id??"";if(!r)return;let n=o?.explorers[e];return qc({networkID:e,endpoint:"transaction",explorerType:n,param:r})};i();a();i();a();var oe=class extends Error{constructor(t,o){super(t),this.code=t,this.detailMessage=o}};function by(e,t){if(t){let o=Kv(e),r=$v(e,t),n=zv(e,t);return{notEnoughSol:t.message==="NotEnoughSol",txErrorTitle:o,txErrorMessage:r,txErrorHelpButtonLink:n}}return{notEnoughSol:!1,txErrorTitle:"",txErrorMessage:"",txErrorHelpButtonLink:""}}var Kv=e=>e?N.t("swapTxBridgeFailed"):N.t("swapTxConfirmationSwapFailed"),Hv=e=>{switch(e.message){case"LedgerConnectionError":return N.t("swapTxConfirmationSwapFailedLedgerConnectionError");case"LedgerRejectAction":return N.t("swapTxConfirmationSwapFailedLedgerReject");case"LedgerUnknownSignError":return N.t("swapTxConfirmationSwapFailedLedgerSignError");case"LedgerUnknownError":return N.t("swapTxConfirmationSwapFailedLedgerError");default:return null}},$v=(e,t)=>{let o=Hv(t);if(o!==null)return o;if(e)switch(t.message){case"slippageToleranceExceeded":return N.t("swapTxConfirmationSwapFailedSlippageLimit");default:return N.t("swapTxBridgeFailedDescription")}else switch(t.message){case"INSUFFICIENT_FUNDS":return N.t("swapTxConfirmationSwapFailedInsufficientBalance");case"slippageToleranceExceeded":return N.t("swapTxConfirmationSwapFailedSlippageLimit");case"EmptyRoute":return N.t("swapTxConfirmationSwapFailedEmptyRoute");case"AccountFrozen":return N.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return N.t("swapTxConfirmationSwapFailedSimulationTimeout");case"INSUFFICIENT_GAS":return N.t("swapTxConfirmationSwapFailedInsufficientGas");case"Scan results are not valid":return N.t("swapTxConfirmationSwapFailedUnknownError");case"STALE_QUOTA":return N.t("swapTxConfirmationSwapFailedStaleQuota");case"SimulationUnknownError":return N.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return N.t("swapTxConfirmationSwapFailedTryAgain")}},zv=(e,t)=>e?Cs:t.message==="AccountFrozen"?Ef:Cs;i();a();var Ty=({sellAmount:e,sellFungible:t,buyAmount:o,buyFungible:r,txStatus:n,txReceipt:s,swapTransactions:p,isReadyToExecute:u,uiEstimatedTime:c,isBridge:m,isLedger:g,notEnoughSol:f,txError:S,txErrorTitle:w,txErrorMessage:y,explorerUrl:A,txErrorHelpButtonLink:b,addressType:F})=>{let I=X(e,t?.data.decimals??0).toNumber(),E=X(o,r?.data.decimals??0).toNumber(),T=n==="success",x=n==="error",P=!!s,O=p?.transactions.length||0;return{sellAsset:{amount:I,symbol:t?.data.symbol??"",networkID:t?.data.chain.id??z.Solana.Mainnet},buyAsset:{amount:E,symbol:r?.data.symbol??"",networkID:r?.data.chain.id??z.Solana.Mainnet},estimatedTime:c,isBridge:m,isSuccess:T,isFailure:x,isLedger:g,isClosable:P,notEnoughSol:f,txError:S,txErrorTitle:w,txErrorMessage:S?.detailMessage?`${y}

${S?.detailMessage}`:y,txLink:A??"",txErrorHelpButtonLink:b,numberOfTransactions:O,isReadyToExecute:u,addressType:F}};var ic=({sellFungible:e,txReceipt:t,swapTransactions:o,isBridge:r,txError:n,txStatus:s,isReadyToExecute:p,isLedger:u})=>{let c=e?.data.chain.id??z.Solana.Mainnet,{notEnoughSol:m,txErrorTitle:g,txErrorMessage:f,txErrorHelpButtonLink:S}=(0,_o.useMemo)(()=>by(r,n),[r,n]),w=(0,_o.useMemo)(()=>v.getAddressType(c),[c]),{currentQuote:y}=q(),{buyAmount:A,sellAmount:b}=y??{buyAmount:"0",sellAmount:"0"},F=h(P=>P.buyFungible),{data:I}=Vc(),E=(0,_o.useMemo)(()=>hy({txReceipt:t,networkID:c,preferredExplorers:I}),[t,c,I]),T=(0,_o.useMemo)(()=>Ay(y),[y]);return(0,_o.useCallback)(()=>Ty({sellFungible:e,txReceipt:t,addressType:w,swapTransactions:o,isBridge:r,txError:n,sellAmount:b,buyAmount:A,buyFungible:F,txStatus:s,isReadyToExecute:p,uiEstimatedTime:T,isLedger:u,notEnoughSol:m,txErrorTitle:g,txErrorMessage:f,explorerUrl:E,txErrorHelpButtonLink:S}),[e,t,w,o,r,n,b,A,F,s,p,T,u,m,g,f,E,S])()};i();a();var jv="slippageToleranceExceeded",Wv="INSUFFICIENT_FUNDS",Yv=jc,Xv="insufficient lamports",Jv="lower balance than rent-exempt minimum",Zv=zc,eE="Transaction confirmation failed",tE=["Ledger App not open","Ledger not connected","Unable to connect to Ledger","Unable to connect to Ledger device","Need permission to connect to Ledger"],oE="Ledger user rejected action",rE="Ledger Sign Error";function nE(e){try{return Number(e.split('"Custom":')[1].split("}")[0])}catch{return null}}function sE(e){switch(nE(e.message)){case 301:return"slippageToleranceExceeded";case 6e3:return"EmptyRoute";case 6001:return"slippageToleranceExceeded";case 6002:return"InvalidCalculation";case 6003:return"MissingPlatformFeeAccount";case 6004:return"InvalidSlippage";case 6005:return"NotEnoughPercent";case 6006:return"InvalidInputIndex";case 6007:return"InvalidOutputIndex";case 6008:return"NotEnoughAccountKeys";case 6009:return"NonZeroMinimumOutAmountNotSupported";case 6010:return"InvalidRoutePlan";case 6011:return"InvalidReferralAuthority";case 6012:return"LedgerTokenAccountDoesNotMatch";case 6013:return"InvalidTokenLedger";case 6014:return"IncorrectTokenProgramID";case 6015:return"TokenProgramNotProvided";case 6016:return"SwapNotSupported";case 6017:return"ExactOutAmountNotMatched";case 6018:return"SourceAndDstinationMintCannotBeTheSame";default:return null}}function iE(e){return tE.some(o=>e.message.includes(o))?"LedgerConnectionError":e.message.includes(oE)?"LedgerRejectAction":e.message.includes(rE)?"LedgerUnknownSignError":e.message.toLowerCase().includes("ledger")?"LedgerUnknownError":null}function Fr(e){if(e===void 0)return new oe("UnknownError");if(e instanceof oe)return e;let t=aE(e);if(t.message.includes(Wv))return new oe("INSUFFICIENT_FUNDS");if(pE(t.message))return new oe("slippageToleranceExceeded");if(t.message==="Scan results are not valid")return new oe("Scan results are not valid");if([Yv,Xv,Zv,Jv].some(c=>t.message.includes(c)))return new oe("NotEnoughSol");let s=sE(t);if(s!==null)return new oe(s);if(t.message.includes(eE))return new oe("Transaction confirmation failed");let u=iE(t);return u!==null?new oe(u):new oe("UnknownError")}function aE(e){return typeof e=="string"?new Error(e):typeof e=="object"&&"logs"in e&&e.logs?.length?new Error(e.logs.join(`
`)):e}function pE(e){return e.includes(jv)}i();a();var vr=C(R());i();a();var Ir=e=>e?pe(e)?void 0:e.priceImpact:0;i();a();function Fy({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,buyAmount:n,sellAmount:s,phantomFeeUiAmount:p,priceImpact:u,provider:c,slippageTolerance:m,transactionId:g,slippageType:f}){let S=_f({buyAssetUsdValue:e,buyToken:t,sellAssetUsdValue:o,sellToken:r,buyAmount:n,sellAmount:s,phantomFeeUiAmount:p,priceImpact:u,provider:c,slippageTolerance:m,slippageType:f});return S?{data:{...S,id:g}}:{}}i();a();var Iy=({txReceipt:e,networkID:t,amountType:o,swapAnalytics:r})=>{let n=kr(t);L.addBreadcrumb("swapper","submittedTransaction","info",{...n,txReceipt:e.id,method:n.chainType==="solana"?"signAndSendTransaction":n.chainType==="eip155"?"eth_sendRawTransaction":"UNKNOWN"}),n.chainType==="solana"?r.submittedTransaction(e.id,{...n,method:"signAndSendTransaction",swapType:o==="sell"?"exactIn":"exactOut"}):n.chainType==="eip155"&&r.submittedTransaction(e.id,{...n,method:"eth_sendRawTransaction",swapType:o==="sell"?"exactIn":"exactOut"})};var Oo=()=>{let e=K(),t=ks(),{currentQuote:o,quoteResponse:r}=q(),n=h(T=>T.buyFungible),s=h(T=>T.sellFungible),p=h(T=>T.buyUsdValue),u=h(T=>T.sellUsdValue),c=h(T=>T.selectedProviderIndex),{selectedSetting:m}=Pe(),g=h.getState().amountType,f=s?.data.chain.id??z.Solana.Mainnet,S=Ze(),{transition:w}=Xe(),y=(0,vr.useCallback)(T=>{let x=oo(c,m.type,r);return Fy({buyToken:n,sellToken:s,buyAmount:o?.buyAmount.toString()??"",sellAmount:o?.sellAmount.toString()??"",phantomFeeUiAmount:S.phantomFee.uiAmount,priceImpact:Ir(o),provider:Oe(lt(o)),buyAssetUsdValue:p,sellAssetUsdValue:u,slippageTolerance:x,transactionId:T??"",slippageType:m.type})},[n,s,o,S.phantomFee.uiAmount,p,u,r,c,m.type]),A=(0,vr.useCallback)(T=>{Iy({txReceipt:T,networkID:f,amountType:g,swapAnalytics:t})},[f,g,t]),b=(0,vr.useCallback)((T,x)=>{w({type:"transactionSubmissionFailed",error:T}),T.message!=="Scan results are not valid"&&T.message!=="slippageToleranceExceeded"&&L.captureError(T,"swapper");let P=y(x);e.capture("swapperSwapFailure",{data:{...P.data,error:T.message}})},[e,y,w]),F=()=>{e.capture("swapperSwapFailureNoSignature")},I=(0,vr.useCallback)(T=>{let x=y(T.id);e.capture("swapperSwapSuccess",x);let P=kr(T.networkID);L.addBreadcrumb("swapper","transactionStatus","info",{...P,txReceipt:T.id}),(P.chainType==="eip155"||P.chainType==="solana")&&t.transactionStatus(T.id,{...P,status:{type:"confirmed"}})},[e,y,t]),E=(0,vr.useCallback)((T,x)=>{let P=T?.networkID?kr(T.networkID):null;(P?.chainType==="eip155"||P?.chainType==="solana")&&T?.id&&(L.addBreadcrumb("swapper","transactionStatus","error",{...P,txReceipt:T.id}),t.transactionStatus(T.id,{...P,status:{type:"error"}}),w({type:"transactionConfirmationFailed",error:x,txReceipt:T}))},[t,w]);return{logTransactionSubmitted:A,logTransactionSubmissionError:b,logSwapFailureNoSignature:F,logTransactionConfirmed:I,logTransactionConfirmationFailed:E}};i();a();var Uy=C(R());i();a();i();a();i();a();i();a();var vy=3;function Ey(){try{let e=ve.getMultivariateAssignment("swapper-high-slippage-threshold"),t=Number(e);return!e||isNaN(t)?vy:t}catch{return vy}}var xy=({currentQuote:e,quoteResponse:t,gasEstimation:o,swapTransactions:r,scanResults:n,isSwapSimulationDisabled:s,slippageTolerance:p,enableGasEstimationOptimization:u})=>{if(!e)throw new oe("Trying to execute swap with no current quote");if(!t)throw new oe("Trying to execute swap with no quote response");if((u?v.isEVMNetworkID(t.sellToken.chainId):!0)&&(!o||o?.length===0))throw new oe("No gas estimation available");if(!r)throw new oe("No swap transactions available");if(n.state!=="valid"&&(L.addBreadcrumb("swapper","swapSimulationNotValid","info",Go({scanResults:n.state})),!s)){let m=["Scan results are not valid","AccountFrozen","INSUFFICIENT_FUNDS","INSUFFICIENT_GAS","slippageToleranceExceeded","SIMULATION_TIMEOUT","MissingArgument","exceedsSimulationTolerance","STALE_QUOTA","SimulationUnknownError"];if(uE(n.state)&&m.includes(n.state.code)){if(cE(n.state,p))return;throw n.state}else throw new oe("Scan results are not valid")}};function cE(e,t){return e.code==="slippageToleranceExceeded"&&t&&t>=Ey()}function uE(e){return e instanceof oe}var lE={swap:{solana:"executeSolanaSwap",evm:"executeEvmSwap"},bridge:{solana:"executeSolanaBridge",evm:"executeEvmBridge"}},mE=(e,t)=>lE[e?"bridge":"swap"][t??"solana"],Cy=async({isBridge:e,addressType:t,isSwapSimulationDisabled:o,sender:r,currentQuote:n,quoteResponse:s,gasEstimation:p,swapTransactions:u,scanResults:c,pendingActivityRows:m,connection:g,enableGasEstimationOptimization:f,logSwapFailureNoSignature:S,logTransactionSubmitted:w,onTransactionReceiptReceived:y,onTransactionSubmissionError:A,resetToInitialState:b,slippageTolerance:F,swapFungibles:I})=>{await L.startSpan({name:mE(e,u?.type)},async()=>{b();let E;try{xy({currentQuote:n,quoteResponse:s,gasEstimation:p,swapTransactions:u,scanResults:c,isSwapSimulationDisabled:o,slippageTolerance:F,enableGasEstimationOptimization:f});let T=await I({type:t,callerAddress:r,swapTransactions:u,pendingSwapActivityRows:m.pendingSwapActivityRows,pendingApprovalActivityRows:m.pendingApprovalActivityRows,gasEstimation:p,connection:g});if(y(T),T.error)throw T.id||S(),E=T.id,T.error;w(T)}catch(T){let x=Fr(T);A(x,E)}})};i();a();var Py=C(R());i();a();var Ry=C(R());function ai(e){return(0,Ry.useMemo)(()=>Oe(e),[e])}function ky({sender:e}){let{t}=ot(),{currentQuote:o}=q(),r=h(w=>w.buyFungible),n=h(w=>w.sellFungible),s=ai(lt(o)),{data:p}=Zt({callerAddress:e,quote:o,sellFungible:n}),u=(w,y)=>y.find(A=>(fo(w)??[]).includes(A.data.key)),c=({sellFungible:w,buyFungible:y,sellAmount:A,buyAmount:b,provider:F,isBridge:I,t:E})=>{let T=w.data.symbol,x=y.data.symbol,P=X(A??0,w.data.decimals??0),O=X(b??0,y.data.decimals??0);return{topLeft:{text:`${E(I?"transactionsPendingBridging":"transactionsPendingSwapping")} on ${F}`},topRight:{text:`${O} ${x}`,color:"accentSuccess"},bottomLeft:{text:`${T} \u2192 ${x}`},bottomRight:{text:`${P} ${T}`}}},m=p?.transactionPairs?.flatMap(w=>[...fo(w.sellToken)??[],...fo(w.buyToken)??[]])??[],g=[...new Set(m)],{fungibles:f}=At({keys:g});return{pendingActivityRows:(0,Py.useMemo)(()=>{let w={pendingSwapActivityRows:[],pendingApprovalActivityRows:[]};return p?p.type==="evm"?p.transactionTypes.reduce((y,A,b)=>{let F=n,I=r,E,T=p.transactionPairs;if(T&&T[b]){let x=T[b];F=u(x.sellToken,f)??n,I=u(x.buyToken,f)??r,E=x.approvalMetadata}if(A.includes("approval")){let x=F?.data.symbol??"";y.pendingApprovalActivityRows.push({topLeft:E?{text:`${t("transactionsPendingApproving")} ${E.symbol}`}:{text:`${t("transactionsPendingApproving")} ${x}`}})}else F&&I&&y.pendingSwapActivityRows.push(c({sellFungible:F,buyFungible:I,sellAmount:o?.sellAmount,buyAmount:o?.buyAmount,provider:s,isBridge:A.includes("bridge"),t}));return y},w):p.transactionTypes.reduce((y,A,b)=>{let F=n,I=r,E=p.transactionPairs;if(E&&E[b]){let T=E[b];F=u(T.sellToken,f)??n,I=u(T.buyToken,f)??r}return F&&I&&y.pendingSwapActivityRows.push(c({sellFungible:F,buyFungible:I,sellAmount:o?.sellAmount,buyAmount:o?.buyAmount,provider:s,isBridge:A.includes("bridge"),t})),y},w):w},[p,n,r,f,t,o?.sellAmount,o?.buyAmount,s])}}i();a();var ci=C(R());i();a();var Ny=.01,pi="swap-validation",Dy=e=>{if(e.resourceType==="nativeToken"){if(["60","966"].includes(e.slip44))return"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"}else if(e.resourceType==="address")return e.address??"";return""},By=({scanResult:e,scanResultError:t,quote:o,sellToken:r,buyToken:n,simulationTolerance:s=Ny})=>{if(t)return"valid";if(!o||!r||!n||!s)return L.addBreadcrumb(pi,`Missing necessary args: ${JSON.stringify({quote:!!o,scanResult:!!e,sellToken:r,buyToken:n,simulationTolerance:s})}`,"info"),new oe("MissingArgument");if(e?.error===at.SIMULATION_FAILED)return"valid";if(e?.error){if(L.addBreadcrumb(pi,`Simulation error: ${JSON.stringify({error:e.error})}`,"info"),e.error===at.SLIPPAGE_EXCEEDED)return new oe("slippageToleranceExceeded");if(e.error===at.INSUFFICIENT_FUNDS)return new oe("INSUFFICIENT_FUNDS");if(e.error===at.INSUFFICIENT_GAS)return new oe("INSUFFICIENT_GAS");if(e.error===at.ACCOUNT_FROZEN)return new oe("AccountFrozen");if(e.error===at.SIMULATION_TIMEOUT)return new oe("SIMULATION_TIMEOUT");if(e.error===at.STALE_QUOTA)return new oe("STALE_QUOTA");if(e.error===at.UNKNOWN_ERROR){let g=fE(e);return new oe("SimulationUnknownError",g)}return new oe("Scan results are not valid")}if(!e)return L.addBreadcrumb(pi,`Missing necessary args: ${JSON.stringify({quote:!!o,scanResult:!1,sellToken:r,buyToken:n,simulationTolerance:s})}`,"info"),new oe("MissingArgument");let p=e?.advancedDetails,{isSimulationToleranceExceeded:u,buyDiff:c,sellDiff:m}=dE(p,n,r,o,s);return u&&p?.networkId===z.Ethereum.Mainnet?(L.addBreadcrumb(pi,`Diff is larger than simulationTolerance: ${JSON.stringify({sellToken:r,buyToken:n,buyDiff:c.toString(),sellDiff:m.toString(),simulationTolerance:s})}`,"info"),new oe("exceedsSimulationTolerance")):"valid"},dE=(e,t,o,r,n=Ny)=>{let s=e?.tokenChange||[],p=new k(s.find(y=>y.address===Dy(t))?.value??"0"),u=new k(s.find(y=>y.address===Dy(o))?.value??"0").abs(),c=o.resourceType==="nativeToken",m=new k(r.buyAmount),g=new k(r.sellAmount),f=p.minus(m).dividedBy(m).absoluteValue(),S=u.minus(g);if(c&&pe(r)){let y=br(r);S=S.minus(y)}return S=S.dividedBy(g).absoluteValue(),{isSimulationToleranceExceeded:!((pe(r)||f.lt(n))&&S.lt(n)),buyDiff:f,sellDiff:S}};function fE(e){return e.simulationError?e.simulationError.humanReadableError:e.warnings[0]?.message}var Ly=({swapTransactions:e})=>{let t=h(A=>A.sellFungible),o=h(A=>A.buyFungible),r=t?.data.chain.id??z.Solana.Mainnet,{data:n}=wt(t?{address:t.data.walletAddress,networkID:t.data.chain.id}:void 0),{selectedSetting:s}=Pe(),p=n?.address??"",{currentQuote:u,quoteResponse:c}=q(),m=Oe(lt(u)),g=Ae(t?.data.chain.id,o?.data.chain.id),f={type:"transaction",userAccount:p,params:void 0,url:"https://phantom.app",networkID:r,context:g?"bridge":"swap",provider:m,slippageType:s.type};e?.type==="evm"&&v.isEVMNetworkID(r)&&(f.params={transactions:e.transactions}),e?.type==="solana"&&v.isSolanaNetworkID(r)&&(f.params={transactions:e.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1,decodeInstructions:!1}});let{transition:S}=Xe(),w=(0,ci.useCallback)((A,b)=>{b&&S({type:"simulationRequestError",error:b}),A&&S({type:"simulationResponseReceived",scannedTransactionResult:A})},[S]),y=on(f,{disableRefetch:!0,onSettled:w});return(0,ci.useMemo)(()=>{if(y.isLoading)return{isLoading:!0,state:"loading"};let A=By({scanResult:y.data,scanResultError:y.isError,quote:u,sellToken:c?.sellToken,buyToken:c?.buyToken,simulationTolerance:c?.simulationTolerance});return{isLoading:y.isLoading,state:A}},[y,u,c])};function _y({isBridge:e,addressType:t,isSwapSimulationDisabled:o,onTransactionReceiptReceived:r,onTransactionSubmissionError:n,resetToInitialState:s,sender:p}){let{logTransactionSubmitted:u,logSwapFailureNoSignature:c}=Oo(),{connection:m}=zo(),{data:g}=re(),{data:[f]}=ie(["enable-swapper-gas-estimation-optimization"]),{currentQuote:S,quoteResponse:w}=q(),y=fn(),A=h(W=>W.maxGasEstimation),b=h(W=>W.sellFungible),F=b?.data.chain.id??z.Solana.Mainnet,{data:I,isSuccess:E}=Zt({callerAddress:p,quote:S,sellFungible:b}),T=Ly({swapTransactions:I}),{pendingActivityRows:x}=ky({sender:p}),{mutateAsync:P}=Up({accountIdentifier:g?.identifier??"",networkID:F}),[O,M]=(0,Uy.useState)(!1),H=async()=>(M(!0),Cy({isBridge:e,addressType:t,isSwapSimulationDisabled:o,sender:p,currentQuote:S,quoteResponse:w,gasEstimation:A,swapTransactions:I,scanResults:T,pendingActivityRows:x,connection:m,slippageTolerance:y,enableGasEstimationOptimization:f,logSwapFailureNoSignature:c,logTransactionSubmitted:u,swapFungibles:P,onTransactionSubmissionError:n,onTransactionReceiptReceived:r,resetToInitialState:s}));return{isReadyToExecute:O||(!T.isLoading||o)&&E,executeSwap:H}}i();a();var ui=C(R());var Oy=({goToSwapTab:e,goToSwapReview:t,goToActivityTab:o})=>{let{resume:r}=Ye(),{clearQuotes:n}=Bp(),s=No(),p=(0,ui.useCallback)(()=>{r(),n(),e()},[e,r,n]),u=(0,ui.useCallback)(()=>{r(),t()},[t,r]),c=(0,ui.useCallback)(()=>{s(),o()},[o,s]);return{onClose:p,onRetry:u,onSwapSuccess:c}};i();a();function My(){let{data:[e]}=ie(["kill-swapper-simulation"]);return e}i();a();var Er=C(R());i();a();function Qy({sellAmount:e,sellFungible:t,setSellFungible:o}){if(t&&e){let r={...t};r.data.amount=String(Number(t.data.amount)-Number(e)),o(r)}}var qy=({onTransactionConfirmationSuccess:e,onTransactionConfirmationError:t,txReceipt:o})=>{let{data:r}=re(),n=(0,Er.useMemo)(()=>r?.addresses??[],[r]),s=Su(n),p=No(),{logTransactionConfirmed:u,logTransactionConfirmationFailed:c}=Oo(),m=h(F=>F.sellFungible),g=h(F=>F.setSellFungible),{currentQuote:f}=q(),{sellAmount:S}=f??{sellAmount:"0"},w=(0,Er.useCallback)(async F=>{u(F),p(),Qy({sellAmount:S,sellFungible:m,setSellFungible:g}),s()},[u,p,S,m,g,s]),{isSuccess:y,isError:A,error:b}=gu(w,o);(0,Er.useEffect)(()=>{if(y)e();else if(A){let F=Fr(b);t(F),c(o,F)}},[y,A,b,o,c,e,t])};function Gy({isLedger:e,goToSwapTab:t,goToSwapReview:o,goToActivityTab:r}){let{currentQuote:n}=q(),s=h(me=>me.buyFungible),p=h(me=>me.sellFungible),u=No(),c=My(),{logTransactionSubmissionError:m}=Oo(),[g]=(0,Me.useState)(Ae(p?.data.chain.id,s?.data.chain.id)),f=p?.data.chain.id??z.Solana.Mainnet,{data:S}=re(),w=(0,Me.useMemo)(()=>S?.addresses??[],[S]),y=(0,Me.useMemo)(()=>w.find(me=>me.networkID===p?.data.chain.id)?.address??"",[w,p]),A=(0,Me.useMemo)(()=>v.getAddressType(f),[f]),{data:b}=Zt({callerAddress:y,quote:n,sellFungible:p}),[F,I]=(0,Me.useState)(),[E,T]=(0,Me.useState)("loading"),[x,P]=(0,Me.useState)(),O=()=>{T("loading"),P(void 0),I(void 0)},M=me=>{I(me)},H=(0,Me.useCallback)((me,ye)=>{T("error"),P(me),m(me,ye)},[m]),Q=(0,Me.useCallback)(()=>{T("success")},[]),W=(0,Me.useCallback)(me=>{T("error"),P(Fr(me))},[]);qy({onTransactionConfirmationSuccess:Q,onTransactionConfirmationError:W,txReceipt:E==="error"?void 0:F});let{executeSwap:Y,isReadyToExecute:ge}=_y({isBridge:g,addressType:A,isSwapSimulationDisabled:c,onTransactionSubmissionError:H,onTransactionReceiptReceived:M,resetToInitialState:O,sender:y}),{onClose:G,onRetry:ee,onSwapSuccess:B}=Oy({goToSwapTab:t,goToSwapReview:o,goToActivityTab:r});return{...ic({sellFungible:p,txReceipt:F,swapTransactions:b,isBridge:g,txStatus:E,isReadyToExecute:ge,isLedger:e,txError:x}),executeSwap:Y,resetSwapper:u,onClose:G,onRetry:ee,onSwapSuccess:B}}i();a();i();a();i();a();var Hy=C(R());i();a();var Vy=C(R());var gE={status:!1,timestamp:""},Ky=()=>{let{data:e}=Je({key:"hasViewedAutoSlippageOptIn",queryKey:fe.hasViewedAutoSlippageOptIn()}),{mutateAsync:t}=dt({key:"hasViewedAutoSlippageOptIn",queryKey:fe.hasViewedAutoSlippageOptIn()}),o=(0,Vy.useCallback)(r=>void t({status:r,timestamp:new Date().toISOString()}),[t]);return{viewedOptInState:e??gE,setViewedOptInState:o}};var yE=()=>{let{viewedOptInState:e,setViewedOptInState:t}=Ky(),{selectedSetting:o}=Pe(),{reviewInterceptors:r}=sc();return{executeInterceptors:(0,Hy.useCallback)(s=>{for(let p of r)if(p.intercept({hasViewedAutoSlippageOptIn:e.status,selectedSetting:o.type,setHasViewedAutoSlippageOptIn:t,showOverlay:s})==="interrupt")return"interrupt";return"continue"},[e.status,r,o.type,t])}};i();a();var Fie=Ne(e=>({quoteSpan:void 0,previousBuyAmount:void 0,previousSellAmount:void 0,setQuoteSpan(t){e({quoteSpan:t})},setPreviousBuyAmount(t){e({previousBuyAmount:t})},setPreviousSellAmount(t){e({previousSellAmount:t})}}));i();a();var Rie=Ne(e=>({initialLoadSpan:void 0,setInitialLoadSpan(t){e({initialLoadSpan:t})}}));i();a();var Mo=C(R());var SE=l.object({programId:l.string(),complete:l.boolean(),progress:l.string()}),wE=l.object({bondingCurves:l.record(l.string(),SE)});function AE(e){let t=$y(e),r=j().getQueryData(t.queryKey),{data:n,isFetching:s,isError:p}=D({...t,initialData:r,staleTime:0}),u=(0,Mo.useMemo)(()=>Lt(),[]);return(0,Mo.useMemo)(()=>{let c=r===n;if(s&&!c)return{type:"Loading"};if(p)return{type:"Error"};let m=wE.safeParse(n);if(!m.success)return{type:"Error"};let g=m.data.bondingCurves[e];if(!g)return{type:"NoBondingCurve"};let f=u.find(w=>w.programId===g.programId);if(!f)return{type:"NoBondingCurve"};let S=TE(g.progress);return S?g.complete?{type:"Graduated",ugcProgram:f}:{type:c&&s?"BondingCurveRefreshing":"BondingCurve",progressPercentage:S,ugcProgram:f}:{type:"Error"}},[r,e,n,p,s,u])}var hE=e=>{let t=j(),o=$y(e),r=ve.isFeatureEnabled("enable-ugc-swaps");return(0,Mo.useCallback)(async()=>{r&&await t.refetchQueries({queryKey:o.queryKey,type:"active"})},[t,o.queryKey,r])},$y=e=>{let t=(0,Mo.useMemo)(()=>Lt(),[]),o=(0,Mo.useMemo)(()=>t.map(n=>n.programId),[t]);return{queryKey:["bonding-curve",e,o],queryFn:()=>bE(e,o)}},bE=async(e,t)=>(await _.api().post("/ugc/v1/bonding-curve",{tokens:[e],programIds:t})).data,TE=e=>{let t=Number(e);if(!isNaN(t))return Math.round(t*100)};i();a();var IE=C(R());var Vie=["simulationRequestErrored","simulationFailed","transactionSubmissionFailed","transactionNotConfirmed"];i();a();var li=C(R());var vE=["enable","reject"],EE=({continueSwap:e,dismiss:t})=>{let o=K(),{setSlippageSetting:r}=Pe(),n=(0,li.useCallback)(p=>{switch(t(),p){case"enable":o.capture("autoSlippageOptIn",{data:{step:"enabledAutoSlippage"}}),r({type:"auto"}),Io();break;case"reject":o.capture("autoSlippageOptIn",{data:{step:"rejectedAutoSlippage"}}),r({type:"fixed"}),e();break}},[e,t,r,o]),s=(0,li.useMemo)(()=>vE.map(p=>({label:N.t(p==="enable"?"swapSlippageOptInEnableOption":"swapSlippageOptInRejectOption"),variant:p==="enable"?"primary":"secondary",onPress:()=>n(p)})),[n]);return{title:N.t("swapSlippageOptInTitle"),description:N.t("swapSlippageOptInSubtitle"),learnMoreText:N.t("commandLearnMore"),learnMoreUrl:js,options:s}};i();a();var jy=C(R());var xE=({goToAssetSelect:e})=>{let{setSearchQuery:t}=h();return(0,jy.useCallback)(o=>{o==="buy"&&t(""),e(o)},[e,t])};i();a();i();a();i();a();var gn=C(R());i();a();var ac=C(R());i();a();var Xy=C(R());i();a();function Wy(e){if(e===void 0)return"#999";let t=parseFloat(e.toFixed(2));switch(!0){case t>=5:return"#EB3742";case(t>=1&&e<5):return"#FFDC62";case(e>=0&&e<1):return"#21E56F";default:return"#777777"}}i();a();function Yy(e){if(e===void 0)return"-";switch(!0){case e>=1e3:return">1000%";case(e>=.01&&e<1e3):return`${e.toFixed(2)}%`;case(e>0&&e<.01):return"<0.01%";case e===0:return"0%";default:return"-"}}function mi(e){return(0,Xy.useMemo)(()=>{let t="",o="";if(e===void 0)return;let r=e*100;return t=Wy(r),o=Yy(r),{color:t,text:o,percentage:r}},[e])}i();a();var di=({priceImpact:e,slippage:t,displayRefuelRow:o,transferFees:r,shouldShowFees:n})=>{let s=[];return e&&e.percentage>Ap&&s.push("highPriceImpact"),t&&t.percentage>=hp&&s.push("highSlippage"),(r?.totalPercentFees??0)>0&&s.push("transferFees"),s.push("providerPressable"),s.push("exchangeRate"),n&&s.push("fees"),o&&s.push("refuel"),s};i();a();function fi(e){let t="",o="";if(e!==void 0)return t=CE(e),o=RE(e),{color:t,text:o,percentage:e}}function CE(e){let t=parseFloat(e.toFixed(2));switch(!0){case t>2:return"#EB3742";case(t>=1&&e<=2):return"#FFDC62";default:return"#777777"}}function RE(e){switch(!0){case e>=1e3:return">1000%";case(e>=.01&&e<1e3):return`${e.toFixed(2)}%`;case(e>0&&e<.01):return"<0.01%";case e===0:return"0%";default:return"-"}}i();a();var gi=e=>e.reduce((t,o)=>{if(!o||o.type!=="SPL")return t;let r;return o.type==="SPL"&&(r=PE(o)),r?{fees:[...t.fees,r],totalPercentFees:t.totalPercentFees+r.percentFee}:t},{fees:[],totalPercentFees:0}),PE=e=>{if(e.type!=="SPL")return;let o=(e.data.mintExtensions??[]).find(r=>r.extension==="transferFeeConfig");if(o)return{caip19:ae(V(e)),fungibleKey:e.data.key,symbol:e.data.symbol??"",name:e.data.name??"",percentFee:o.state.newerTransferFee.transferFeeBasisPoints/100}};var Jy=()=>{let{currentQuote:e,quoteResponse:t}=q(),o=mi(Ir(e)),r=(0,ac.useMemo)(()=>fi(t?.slippageTolerance),[t?.slippageTolerance]),{showRefuelOption:n,refuelAmount:s}=Co(),p=n&&!!s,u=h(S=>S.sellFungible),c=h(S=>S.buyFungible),m=(0,ac.useMemo)(()=>gi([u,c]),[u,c]),{data:[g]}=ie(["enable-swapper-skip-review"]);return{logSwapHomeState:()=>{let S=di({priceImpact:o,slippage:r,displayRefuelRow:p,transferFees:m,shouldShowFees:g}),w={slippage:JSON.stringify(r),priceImpact:JSON.stringify(o),rows:S};L.addBreadcrumb("swapper","swap-home","info",Go(w))}}};i();a();var eS=C(R());i();a();function Zy({sellFungible:e,totalFees:t,isBridge:o,minimumBalanceForRentExemption:r,currentQuote:n}){let s=t.maxAmount??t.amount;if(e?.type?Ce(e?.type):!1){let u=new te(n?.sellAmount??0);return s.plus(u)}else return s.plus(o?0:r)}var tS=()=>{let{currentQuote:e}=q(),{totalFees:t}=Ze(),o=h(g=>g.sellFungible),r=o?.data.chain.id,s=h(g=>g.buyFungible)?.data.chain.id,p=Ae(r,s),{data:u}=wt({address:o?.data.walletAddress,networkID:o?.data.chain.id}),{data:c=0}=Rn(u);return(0,eS.useMemo)(()=>Zy({sellFungible:o,totalFees:t,isBridge:p,minimumBalanceForRentExemption:c,currentQuote:e}),[o,t,p,c,e])};i();a();function oS({sellFungible:e,sellNativeFungible:t,totalNativeRequirement:o}){let r=e?.data.chain.id,n=t?Ee(t.data.amount,t.data.decimals):"-",s=t?Ee(o,t.data.decimals):"-";return{networkId:r,balance:n,required:s}}i();a();function rS({quoteResponse:e,hasInsufficientBalance:t,insufficientBalanceArgs:o,isTermsAcknowledged:r,shouldSkipSwapReview:n,logSwapHomeState:s,goToInsufficientBalance:p,goToSwapTermsOfService:u,goToSwapReview:c,onSwap:m}){if(e)t?p(o):(s(),r?n?m():c():u());else return}var pc=({goToSwapTermsOfService:e,goToSwapReview:t,goToInsufficientBalance:o,goToConfirmation:r})=>{let{data:[n]}=ie(["enable-swapper-skip-review"]),{quoteResponse:s}=q(),p=h(b=>b.sellFungible),u=p?.data.chain.id,{data:c}=oc(),{logSwapHomeState:m}=Jy(),{fungible:g}=it({key:u?jo(u,void 0):void 0}),f=tS(),S=(0,gn.useMemo)(()=>new te(g?.data.amount??0).lt(f),[g,f]),w=(0,gn.useMemo)(()=>oS({sellFungible:p,sellNativeFungible:g,totalNativeRequirement:f}),[p,g,f]),y=cn({goToConfirmation:r});return{onClick:(0,gn.useCallback)(()=>rS({quoteResponse:s,hasInsufficientBalance:S,insufficientBalanceArgs:w,isTermsAcknowledged:c,shouldSkipSwapReview:n,logSwapHomeState:m,goToInsufficientBalance:o,goToSwapTermsOfService:e,goToSwapReview:t,onSwap:y}),[s,S,w,c,n,m,o,e,t,y])}};i();a();i();a();i();a();var nS=({sellFungible:e,totalFees:t,transactionSpeedsToUnitCost:o,currentQuote:r,isBridge:n,destinationMinRequiredBalance:s})=>{let p=e?$s({sellFungible:e,totalFees:t.amount,transactionSpeedsToUnitCost:v.isEVMNetworkID(e.data.chain.id)?o:void 0,isBridge:n,destinationMinRequiredBalance:s}):"0",u=e?.data.decimals;return r?.sellAmount?new k(X(r.sellAmount,u??0)).isLessThanOrEqualTo(new k(p)):!0};var sS=({sellFungible:e,isFetchingQuote:t,quoteResponse:o,currentQuote:r,gasEstimation:n,maxGasEstimation:s,hasNoRoutes:p,totalFees:u,transactionSpeedsToUnitCost:c,isBridge:m,destinationMinRequiredBalance:g,enableGasEstimationOptimization:f,shouldSkipSwapReview:S})=>{let w=nS({sellFungible:e,totalFees:u,transactionSpeedsToUnitCost:c,currentQuote:r,isBridge:m,destinationMinRequiredBalance:g});switch(DE({quoteResponse:o,sellFungible:e,currentQuote:r,hasNoRoutes:p,hasEnoughAssets:w,isFetchingQuote:t,gasEstimation:n,maxGasEstimation:s,enableGasEstimationOptimization:f,shouldSkipSwapReview:S})){case"notSwappable":return{title:N.t("swapReviewFlowActionButtonPrimary"),type:"secondary",disabled:!0};case"swappable":return{title:N.t("swapReviewFlowActionButtonPrimary"),type:"primary",disabled:!1};case"reviewable":return{title:N.t("swapFlowActionButtonText"),type:"primary",disabled:!1};case"notReviewable":return{title:N.t("swapFlowActionButtonText"),type:"secondary",disabled:!0};case"insufficientBalance":return{title:N.t("swapReviewInsufficientBalance"),type:"alert",disabled:!0};case"noRoutes":return{title:N.t("swapNoQuotesFound"),type:"secondary",disabled:!0}}},kE=({sellFungible:e,enableGasEstimationOptimization:t})=>{let o=e?.data.chain.id??z.Solana.Mainnet;return t?v.isEVMNetworkID(o):!0};function DE({quoteResponse:e,sellFungible:t,currentQuote:o,hasNoRoutes:r,hasEnoughAssets:n,isFetchingQuote:s,gasEstimation:p,maxGasEstimation:u,enableGasEstimationOptimization:c,shouldSkipSwapReview:m}){if(!n)return"insufficientBalance";if(r)return"noRoutes";let g=kE({sellFungible:t,enableGasEstimationOptimization:c}),f=(p??[]).length>0&&(u??[]).length>0;return!e||!t||!o||g&&!f||s?m?"notSwappable":"notReviewable":m?"swappable":"reviewable"}function NE({goToInsufficientBalance:e,goToSwapReview:t,goToSwapTermsOfService:o,goToConfirmation:r}){let{currentQuote:n,isFetchingQuote:s,quoteResponse:p}=q(),{data:[u,c]}=ie(["enable-swapper-gas-estimation-optimization","enable-swapper-skip-review"]),m=h(M=>M.hasNoRoutes),g=h(M=>M.sellFungible),f=g?.data.chain.id,S=h(M=>M.gasEstimation),w=h(M=>M.maxGasEstimation),A=h(M=>M.buyFungible)?.data.chain.id,b=Ae(f,A),{totalFees:F}=Ze(),{data:I}=Pn({networkID:f}),E=zs(),{title:T,type:x,disabled:P}=sS({sellFungible:g,currentQuote:n,quoteResponse:p,isFetchingQuote:s,isBridge:b,gasEstimation:S,maxGasEstimation:w,hasNoRoutes:m,totalFees:F,transactionSpeedsToUnitCost:I,destinationMinRequiredBalance:E,enableGasEstimationOptimization:u,shouldSkipSwapReview:c}),{onClick:O}=pc({goToInsufficientBalance:e,goToSwapReview:t,goToSwapTermsOfService:o,goToConfirmation:r});return{disabled:P,title:T,type:x,onClick:O}}i();a();i();a();var yn=C(R());i();a();var xr=C(R());var BE=k(1);function iS(e,t,o){let r=K(),[n,s]=(0,xr.useState)(!1),p=(0,xr.useCallback)(async()=>{await r.capture("swapperToggleBestPriceRatio",{data:{unitCurrency:n?"buy token":"sell token"}}),s(!n)},[r,n]),u=h(m=>m.sellFungible),c=h(m=>m.buyFungible);return(0,xr.useMemo)(()=>{let m=!1,g="";if(t&&o){let f=c?.data,S=u?.data;if(f&&S){let{buyAmount:w,sellAmount:y}=o,A=X(w,f.decimals),b=X(y,S.decimals),F=A.dividedBy(b),I=`1 ${S.symbol} \u2248 ${hr(F)} ${f.symbol}`,E=`1 ${f.symbol} \u2248 ${hr(BE.dividedBy(F))} ${S.symbol}`;m=new k(o.buyAmount).isEqualTo(e),g=n?E:I}}return{isBestRate:m,rate:g,flip:p}},[e,o,n,t,u,c,p])}i();a();var aS=({buyNetwork:e,sellNetwork:t,executionDuration:o,priceImpact:r,slippage:n,displayRefuelRow:s})=>{let p=[];return p.push("provider"),p.push("exchangeRate"),e&&t&&e!==t&&p.push("network"),p.push("fees"),o>0&&p.push("executionDuration"),r&&p.push("priceImpact"),n&&p.push("slippage"),s&&p.push("refuel"),p};function LE({isSwapReview:e,showProviders:t}){let{bestBuyAmount:o,currentQuote:r,hasNoRoutes:n,quoteResponse:s,quotes:p,isFetchingQuote:u}=q(),c=iS(o,s,r),m=mi(Ir(r)),g=fn(),f=(0,yn.useMemo)(()=>fi(g),[g]),S=ai(lt(r)),w=si(r),y=Do(w),[A]=(0,yn.useState)(y),b=s?.sellToken?.chainId?v.getChainName(s.sellToken.chainId):void 0,F=s?.buyToken?.chainId?v.getChainName(s.buyToken.chainId):void 0,I=Ze(),E=ec(I),{showRefuelOption:T,refuelAmount:x}=Co(),P=h(G=>G.sellFungible),O=h(G=>G.buyFungible),M=(0,yn.useMemo)(()=>gi([P,O]),[P,O]),{data:[H]}=ie(["enable-swapper-skip-review"]),Q=T&&(!e||!!x),Y={exchangeRate:c,priceImpact:m,slippage:f,provider:S,fees:I,executionDuration:w,uiEstimatedTime:A,isFetchingQuote:u,sellNetwork:b,buyNetwork:F,feeBreakdown:E,selectProviderEnabled:!e&&!!S,isSwapReview:e,showProviders:t,transferFees:M},ge=e?aS({exchangeRate:c,priceImpact:m,slippage:f,displayRefuelRow:Q,buyNetwork:F,sellNetwork:b,executionDuration:w}):di({priceImpact:m,slippage:f,displayRefuelRow:Q,transferFees:M,shouldShowFees:H});return{exchangeRate:c,hasNoRoutes:n,priceImpact:m,slippage:f,provider:S,fees:I,nrOfQuotes:p.length,executionDuration:w,isFetchingQuote:u,sellNetwork:b,buyNetwork:F,rows:ge,sharedRowProps:Y}}i();a();var uS=C(R());i();a();var Ot=()=>!0,pS={tokens:Ot,prices:fu,collectibles:yu,currency:Hc,staking:bu,swapper:Zp,transferFungibleLoggingContext:Ot,user:Lc,[$c]:Ot,[Yt]:Ot,[Ss]:Ot,[wu]:Ot,[Mr]:Ot,[Au]:Ot,[ct]:Ot,"test-debug-query":wn},cS=e=>{if(e.queryKey.length===0||e.state.status!=="success")return!1;let t=String(e.queryKey[0]);return pS[t]?pS[t](e):!1};var UE=new yc({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),_E=fc({underlyingStorage:new pu,throttleMs:1e3,enableDebugLogs:wn()}),cle=e=>uS.default.createElement(Sc,{client:UE,persistOptions:{persister:_E,dehydrateOptions:{shouldDehydrateQuery:cS},buster:OE,maxAge:1/0}},e.children),OE="24.26.0";i();a();var ME=(B=>(B.HasOnboarded="hasOnboarded",B.ResetHasOnboarded="resetHasOnboarded",B.LockExtension="lockExtension",B.UnlockExtension="unlockExtension",B.IsExtensionUnlocked="IsExtensionUnlocked",B.SetPassword="setPassword",B.VerifyPassword="verifyPassword",B.UpdatePassword="updatePassword",B.ImportPrivateKeyAccount="importPrivateKeyAccount",B.ImportReadOnlyAccount="importReadOnlyAccount",B.ImportSeedAccount="importSeedAccount",B.ImportSeedlessAccount="importSocialSeedAccount",B.IsExistingSeed="isExistingSeed",B.AddAccountForSeed="addAccountForSeed",B.AddAccountForSeedless="addAccountForSeedless",B.AddLedgerAccounts="addLedgerAccounts",B.DeriveAddresses="deriveAddresses",B.ExportPrivateKey="exportPrivateKey",B.ExportEntropy="exportEntropy",B.SetAccountIcon="setAccountIcon",B.RemoveAccount="removeAccount",B.ReorderAccount="reorderAccount",B.GetAllAccounts="getAllAccounts",B.GetAllSeeds="getAllSeeds",B.GetAllSeedless="getAllSeedlessSeeds",B.GetAuthenticationPublicKey="getAuthenticationPublicKey",B.Sign="sign",B.SyncAccounts="syncAccounts",B.CheckVaultIntegrity="checkVaultIntegrity",B.LogMessage="logMessage",B.DownloadLogs="downloadLogs",B.ProviderInjectionOptions="providerInjectionOptions",B))(ME||{});i();a();function yle(e,t,o=Date.now()){return{jsonrpc:"2.0",id:o,method:e,params:t}}export{fy as a,hee as b,vZ as c,AS as d,_S as e,vu as f,Fi as g,PS as h,at as i,Nn as j,Ui as k,MS as l,QS as m,_i as n,Oi as o,Le as p,JS as q,VS as r,KS as s,HS as t,Ur as u,gl as v,$S as w,zS as x,Tl as y,IT as z,xT as A,eh as B,th as C,ih as D,Wr as E,fd as F,Ya as G,kT as H,LT as I,QT as J,VT as K,ut as L,ZT as M,wO as N,bd as O,AO as P,hO as Q,bO as R,Td as S,oF as T,sF as U,Ja as V,Za as W,iF as X,Fo as Y,rp as Z,mF as _,SF as $,wF as aa,dF as ba,AF as ca,Qd as da,fF as ea,hF as fa,h as ga,Bp as ha,q as ia,Nt as ja,xp as ka,Po as la,Ye as ma,TF as na,FF as oa,on as pa,JF as qa,Co as ra,tI as sa,cn as ta,cI as ua,uI as va,HI as wa,JI as xa,dI as ya,nv as za,wI as Aa,ec as Ba,No as Ca,kp as Da,iv as Ea,uv as Fa,lv as Ga,TI as Ha,mv as Ia,FI as Ja,Dv as Ka,Nv as La,Bv as Ma,Lv as Na,Uv as Oa,dv as Pa,oc as Qa,NE as Ra,fn as Sa,_v as Ta,Ov as Ua,Qv as Va,yE as Wa,Gv as Xa,Vv as Ya,AE as Za,hE as _a,Gy as $a,LE as ab,EE as bb,xE as cb,cS as db,UE as eb,cle as fb,ME as gb,yle as hb};
//# sourceMappingURL=chunk-CZNVQ2ZN.js.map
