(()=>{"use strict";chrome.action;const e={username:"a2epfq5ugq0u",password:"ptkx3fqg6v7n"},o=(chrome.i18n.getUILanguage(),()=>{chrome.storage.local.get(["isConnected","currentLocation"],(e=>{e.isConnected&&(chrome.action.setBadgeBackgroundColor({color:"#22c774"}),chrome.action.setBadgeTextColor({color:"#fff"}),chrome.action.setBadgeText({text:e.currentLocation.countryCode.substring(0,2).toUpperCase()}))}))}),n=async(e,o)=>{const n=async(t,a=!1)=>{try{return await fetch(`${t}/api/${e}/`,o)}catch(e){if(console.log(e),a)throw e;return await n("https://1vpn.website",!0)}};return await n("https://1vpn.org")},t=[{country:"Australia",countryCode:"au",isPremium:!0},{country:"Brazil",countryCode:"br",isPremium:!0},{country:"Canada",countryCode:"ca",isPremium:!0},{country:"Chile",countryCode:"cl",isPremium:!0},{country:"France",countryCode:"fr",isPremium:!0},{country:"Germany",countryCode:"de",hosts:[{hostname:"blade3.frankfurt-rack444.nodes.gen4.ninja",port:9002},{hostname:"blade4.frankfurt-rack444.nodes.gen4.ninja",port:9002},{hostname:"blade1.frankfurt-rack444.nodes.gen4.ninja",port:9002},{hostname:"blade2.frankfurt-rack444.nodes.gen4.ninja",port:9002},{hostname:"blade5.frankfurt-rack444.nodes.gen4.ninja",port:9002},{hostname:"germany-free-1.cloudcdnflare.site",port:443}],latitude:50.119,longitude:8.7147},{country:"India",countryCode:"in",isPremium:!0},{country:"Japan",countryCode:"jp",isPremium:!0},{country:"South Korea",countryCode:"kr",isPremium:!0},{country:"Mexico",countryCode:"mx",isPremium:!0},{country:"Netherlands",countryCode:"nl",isPremium:!0},{country:"Poland",countryCode:"pl",isPremium:!0},{country:"Singapore",countryCode:"sg",isPremium:!0},{country:"South Africa",countryCode:"za",isPremium:!0},{country:"Spain",countryCode:"es",isPremium:!0},{country:"Sweden",countryCode:"se",isPremium:!0},{country:"United Kingdom",countryCode:"uk",isPremium:!0},{country:"USA East",countryCode:"use",isPremium:!0},{country:"USA South",countryCode:"uss",isPremium:!0},{country:"USA West",countryCode:"usw",hosts:[{hostname:"blade11.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade1.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade2.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade3.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade9.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade10.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade18.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade13.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade17.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade20.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade22.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade5.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade7.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade4.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade6.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade25.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade12.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade8.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade15.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade19.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade21.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade16.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade24.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade14.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade23.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"blade26.losangeles-rack422.nodes.gen4.ninja",port:9002},{hostname:"usa-west-free-1.cloudcdnflare.site",port:443}],latitude:34.0541,longitude:-118.2441}],a=e=>{chrome.proxy.settings.set({value:{mode:"direct",rules:{}},scope:"regular"}),chrome.storage.local.set({isConnected:!1}),chrome.action.setBadgeText({text:""});const o=["messages"];chrome.storage.local.get(null,(n=>{const a=Object.keys(n).filter((e=>!o.includes(e)));a.length&&chrome.storage.local.remove(a),chrome.storage.local.set({currentLocation:t.at(-1)}),e&&e("start")}))},r=e=>{const o={apply:(o,n,t)=>{const a=t[0];return t[0]=o=>{const n=o=>{Object.defineProperty(o,"latitude",{value:e.latitude?+e.latitude:null}),Object.defineProperty(o,"longitude",{value:e.longitude?+e.longitude:null}),Object.defineProperty(o,"speed",{value:null}),Object.defineProperty(o,"heading",{value:null}),Object.defineProperty(o,"accuracy",{value:2e4}),Object.defineProperty(o,"altitude",{value:null}),Object.defineProperty(o,"altitudeAccuracy",{value:null})};"timestamp"in o&&Object.defineProperty(o,"timestamp",{value:Date.now()}),"coords"in o&&(n(o.coords),n(GeolocationCoordinates.prototype)),a(o)},o.apply(n,t)}};window.navigator?.geolocation&&(Object.getPrototypeOf(navigator.geolocation).getCurrentPosition=new Proxy(Object.getPrototypeOf(navigator.geolocation).getCurrentPosition,o),Object.getPrototypeOf(navigator.geolocation).watchPosition=new Proxy(Object.getPrototypeOf(navigator.geolocation).watchPosition,o))};chrome.runtime.onInstalled.addListener((e=>{o(),"install"===e.reason&&(chrome.tabs.create({url:"https://1vpn.org/select_plan/"}),chrome.storage.local.set({filteringModeDetails:{basic:[],complete:["all-urls"],none:[],optimal:[]},installDate:Date.now()}))})),chrome.runtime.onStartup.addListener(o),chrome.webRequest.onAuthRequired.addListener(((o,n)=>{const t=()=>new Promise(((o,n)=>{chrome.storage.local.get(["isPremium","username","sessionAuthToken"],(t=>{if(chrome.runtime.lastError)n(new Error(chrome.runtime.lastError));else{const n=t.isPremium?{username:t.username,password:t.sessionAuthToken}:e;o({authCredentials:n})}}))}));t().then((e=>{n(e)}))}),{urls:["<all_urls>"]},["asyncBlocking"]),chrome.alarms.create("fetchUserData",{periodInMinutes:360}),chrome.alarms.onAlarm.addListener((e=>{chrome.storage.local.get(["sessionAuthToken"],(o=>{o.sessionAuthToken&&"fetchUserData"===e.name&&n("refresh_token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token "+o.sessionAuthToken}}).then((async e=>{if(!e.ok){const o=await e.json();throw a(),o}return e.json()})).then((e=>{chrome.storage.local.set(e)})).catch((e=>{console.error("Error:",e)}))}))})),chrome.webNavigation.onCommitted.addListener((e=>{e.url?.startsWith("chrome://")||e.url?.startsWith("chrome-extension://")||e.url?.startsWith("https://chromewebstore.google.com/")||chrome.storage.local.get(["spoofGeolocation","isConnected","currentLocation"],(o=>{o.spoofGeolocation&&o.isConnected&&o.currentLocation&&chrome.scripting.executeScript({target:{tabId:e.tabId,allFrames:!0},world:"MAIN",injectImmediately:!0,func:r,args:[{latitude:o.currentLocation.latitude,longitude:o.currentLocation.longitude}]})}))})),chrome.proxy.onProxyError.addListener((()=>{fetch("http://ip-api.com/json")}))})();